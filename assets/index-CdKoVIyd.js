var tet=Object.defineProperty;var net=(e,t,n)=>t in e?tet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ret=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ml=(e,t,n)=>net(e,typeof t!="symbol"?t+"":t,n);var CTn=ret((FAn,sle)=>{function iet(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var on=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function l0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function set(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var aCe={exports:{}},nL={},uCe={exports:{}},kr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q3=Symbol.for("react.element"),oet=Symbol.for("react.portal"),aet=Symbol.for("react.fragment"),uet=Symbol.for("react.strict_mode"),cet=Symbol.for("react.profiler"),fet=Symbol.for("react.provider"),det=Symbol.for("react.context"),het=Symbol.for("react.forward_ref"),pet=Symbol.for("react.suspense"),met=Symbol.for("react.memo"),get=Symbol.for("react.lazy"),ehe=Symbol.iterator;function yet(e){return e===null||typeof e!="object"?null:(e=ehe&&e[ehe]||e["@@iterator"],typeof e=="function"?e:null)}var lCe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cCe=Object.assign,fCe={};function vT(e,t,n){this.props=e,this.context=t,this.refs=fCe,this.updater=n||lCe}vT.prototype.isReactComponent={};vT.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vT.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function dCe(){}dCe.prototype=vT.prototype;function oJ(e,t,n){this.props=e,this.context=t,this.refs=fCe,this.updater=n||lCe}var aJ=oJ.prototype=new dCe;aJ.constructor=oJ;cCe(aJ,vT.prototype);aJ.isPureReactComponent=!0;var the=Array.isArray,hCe=Object.prototype.hasOwnProperty,uJ={current:null},pCe={key:!0,ref:!0,__self:!0,__source:!0};function mCe(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)hCe.call(t,r)&&!pCe.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Q3,type:e,key:s,ref:o,props:i,_owner:uJ.current}}function vet(e,t){return{$$typeof:Q3,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function lJ(e){return typeof e=="object"&&e!==null&&e.$$typeof===Q3}function bet(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var nhe=/\/+/g;function IU(e,t){return typeof e=="object"&&e!==null&&e.key!=null?bet(""+e.key):t.toString(36)}function M6(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Q3:case oet:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+IU(o,0):r,the(i)?(n="",e!=null&&(n=e.replace(nhe,"$&/")+"/"),M6(i,t,n,"",function(l){return l})):i!=null&&(lJ(i)&&(i=vet(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(nhe,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",the(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+IU(s,a);o+=M6(s,t,n,u,i)}else if(u=yet(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+IU(s,a++),o+=M6(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function $O(e,t,n){if(e==null)return e;var r=[],i=0;return M6(e,r,"","",function(s){return t.call(n,s,i++)}),r}function xet(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Wl={current:null},$6={transition:null},wet={ReactCurrentDispatcher:Wl,ReactCurrentBatchConfig:$6,ReactCurrentOwner:uJ};function gCe(){throw Error("act(...) is not supported in production builds of React.")}kr.Children={map:$O,forEach:function(e,t,n){$O(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return $O(e,function(){t++}),t},toArray:function(e){return $O(e,function(t){return t})||[]},only:function(e){if(!lJ(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};kr.Component=vT;kr.Fragment=aet;kr.Profiler=cet;kr.PureComponent=oJ;kr.StrictMode=uet;kr.Suspense=pet;kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wet;kr.act=gCe;kr.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=cCe({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=uJ.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)hCe.call(t,u)&&!pCe.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:Q3,type:e.type,key:i,ref:s,props:r,_owner:o}};kr.createContext=function(e){return e={$$typeof:det,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:fet,_context:e},e.Consumer=e};kr.createElement=mCe;kr.createFactory=function(e){var t=mCe.bind(null,e);return t.type=e,t};kr.createRef=function(){return{current:null}};kr.forwardRef=function(e){return{$$typeof:het,render:e}};kr.isValidElement=lJ;kr.lazy=function(e){return{$$typeof:get,_payload:{_status:-1,_result:e},_init:xet}};kr.memo=function(e,t){return{$$typeof:met,type:e,compare:t===void 0?null:t}};kr.startTransition=function(e){var t=$6.transition;$6.transition={};try{e()}finally{$6.transition=t}};kr.unstable_act=gCe;kr.useCallback=function(e,t){return Wl.current.useCallback(e,t)};kr.useContext=function(e){return Wl.current.useContext(e)};kr.useDebugValue=function(){};kr.useDeferredValue=function(e){return Wl.current.useDeferredValue(e)};kr.useEffect=function(e,t){return Wl.current.useEffect(e,t)};kr.useId=function(){return Wl.current.useId()};kr.useImperativeHandle=function(e,t,n){return Wl.current.useImperativeHandle(e,t,n)};kr.useInsertionEffect=function(e,t){return Wl.current.useInsertionEffect(e,t)};kr.useLayoutEffect=function(e,t){return Wl.current.useLayoutEffect(e,t)};kr.useMemo=function(e,t){return Wl.current.useMemo(e,t)};kr.useReducer=function(e,t,n){return Wl.current.useReducer(e,t,n)};kr.useRef=function(e){return Wl.current.useRef(e)};kr.useState=function(e){return Wl.current.useState(e)};kr.useSyncExternalStore=function(e,t,n){return Wl.current.useSyncExternalStore(e,t,n)};kr.useTransition=function(){return Wl.current.useTransition()};kr.version="18.3.1";uCe.exports=kr;var N=uCe.exports;const yi=l0(N),iM=iet({__proto__:null,default:yi},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _et=N,Eet=Symbol.for("react.element"),Cet=Symbol.for("react.fragment"),Tet=Object.prototype.hasOwnProperty,Aet=_et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Det={key:!0,ref:!0,__self:!0,__source:!0};function yCe(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Tet.call(t,r)&&!Det.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Eet,type:e,key:s,ref:o,props:i,_owner:Aet.current}}nL.Fragment=Cet;nL.jsx=yCe;nL.jsxs=yCe;aCe.exports=nL;var E=aCe.exports,cW={},vCe={exports:{}},Kf={},bCe={exports:{}},xCe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Y,J){var $=Y.length;Y.push(J);e:for(;0<$;){var j=$-1>>>1,W=Y[j];if(0<i(W,J))Y[j]=J,Y[$]=W,$=j;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var J=Y[0],$=Y.pop();if($!==J){Y[0]=$;e:for(var j=0,W=Y.length,B=W>>>1;j<B;){var q=2*(j+1)-1,Z=Y[q],re=q+1,xe=Y[re];if(0>i(Z,$))re<W&&0>i(xe,Z)?(Y[j]=xe,Y[re]=$,j=re):(Y[j]=Z,Y[q]=$,j=q);else if(re<W&&0>i(xe,$))Y[j]=xe,Y[re]=$,j=re;else break e}}return J}function i(Y,J){var $=Y.sortIndex-J.sortIndex;return $!==0?$:Y.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(Y){for(var J=n(l);J!==null;){if(J.callback===null)r(l);else if(J.startTime<=Y)r(l),J.sortIndex=J.expirationTime,t(u,J);else break;J=n(l)}}function _(Y){if(m=!1,b(Y),!p)if(n(u)!==null)p=!0,U(w);else{var J=n(l);J!==null&&G(_,J.startTime-Y)}}function w(Y,J){p=!1,m&&(m=!1,y(A),A=-1),h=!0;var $=d;try{for(b(J),f=n(u);f!==null&&(!(f.expirationTime>J)||Y&&!R());){var j=f.callback;if(typeof j=="function"){f.callback=null,d=f.priorityLevel;var W=j(f.expirationTime<=J);J=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(J)}else r(u);f=n(u)}if(f!==null)var B=!0;else{var q=n(l);q!==null&&G(_,q.startTime-J),B=!1}return B}finally{f=null,d=$,h=!1}}var S=!1,T=null,A=-1,k=5,I=-1;function R(){return!(e.unstable_now()-I<k)}function F(){if(T!==null){var Y=e.unstable_now();I=Y;var J=!0;try{J=T(!0,Y)}finally{J?O():(S=!1,T=null)}}else S=!1}var O;if(typeof v=="function")O=function(){v(F)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,H=L.port2;L.port1.onmessage=F,O=function(){H.postMessage(null)}}else O=function(){g(F,0)};function U(Y){T=Y,S||(S=!0,O())}function G(Y,J){A=g(function(){Y(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,U(w))},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(Y){switch(d){case 1:case 2:case 3:var J=3;break;default:J=d}var $=d;d=J;try{return Y()}finally{d=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Y,J){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var $=d;d=Y;try{return J()}finally{d=$}},e.unstable_scheduleCallback=function(Y,J,$){var j=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?j+$:j):$=j,Y){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=$+W,Y={id:c++,callback:J,priorityLevel:Y,startTime:$,expirationTime:W,sortIndex:-1},$>j?(Y.sortIndex=$,t(l,Y),n(u)===null&&Y===n(l)&&(m?(y(A),A=-1):m=!0,G(_,$-j))):(Y.sortIndex=W,t(u,Y),p||h||(p=!0,U(w))),Y},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(Y){var J=d;return function(){var $=d;d=J;try{return Y.apply(this,arguments)}finally{d=$}}}})(xCe);bCe.exports=xCe;var Iet=bCe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ket=N,Of=Iet;function kt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wCe=new Set,tR={};function N_(e,t){KS(e,t),KS(e+"Capture",t)}function KS(e,t){for(tR[e]=t,e=0;e<t.length;e++)wCe.add(t[e])}var Hg=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fW=Object.prototype.hasOwnProperty,Ret=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rhe={},ihe={};function Net(e){return fW.call(ihe,e)?!0:fW.call(rhe,e)?!1:Ret.test(e)?ihe[e]=!0:(rhe[e]=!0,!1)}function Pet(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Oet(e,t,n,r){if(t===null||typeof t>"u"||Pet(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Gl(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var du={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){du[e]=new Gl(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];du[t]=new Gl(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){du[e]=new Gl(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){du[e]=new Gl(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){du[e]=new Gl(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){du[e]=new Gl(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){du[e]=new Gl(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){du[e]=new Gl(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){du[e]=new Gl(e,5,!1,e.toLowerCase(),null,!1,!1)});var cJ=/[\-:]([a-z])/g;function fJ(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(cJ,fJ);du[t]=new Gl(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(cJ,fJ);du[t]=new Gl(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(cJ,fJ);du[t]=new Gl(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){du[e]=new Gl(e,1,!1,e.toLowerCase(),null,!1,!1)});du.xlinkHref=new Gl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){du[e]=new Gl(e,1,!1,e.toLowerCase(),null,!0,!0)});function dJ(e,t,n,r){var i=du.hasOwnProperty(t)?du[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Oet(t,n,i,r)&&(n=null),r||i===null?Net(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var vy=ket.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,LO=Symbol.for("react.element"),O2=Symbol.for("react.portal"),F2=Symbol.for("react.fragment"),hJ=Symbol.for("react.strict_mode"),dW=Symbol.for("react.profiler"),_Ce=Symbol.for("react.provider"),ECe=Symbol.for("react.context"),pJ=Symbol.for("react.forward_ref"),hW=Symbol.for("react.suspense"),pW=Symbol.for("react.suspense_list"),mJ=Symbol.for("react.memo"),p1=Symbol.for("react.lazy"),SCe=Symbol.for("react.offscreen"),she=Symbol.iterator;function aD(e){return e===null||typeof e!="object"?null:(e=she&&e[she]||e["@@iterator"],typeof e=="function"?e:null)}var Xs=Object.assign,kU;function aI(e){if(kU===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);kU=t&&t[1]||""}return`
`+kU+e}var RU=!1;function NU(e,t){if(!e||RU)return"";RU=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{RU=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?aI(e):""}function Fet(e){switch(e.tag){case 5:return aI(e.type);case 16:return aI("Lazy");case 13:return aI("Suspense");case 19:return aI("SuspenseList");case 0:case 2:case 15:return e=NU(e.type,!1),e;case 11:return e=NU(e.type.render,!1),e;case 1:return e=NU(e.type,!0),e;default:return""}}function mW(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F2:return"Fragment";case O2:return"Portal";case dW:return"Profiler";case hJ:return"StrictMode";case hW:return"Suspense";case pW:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ECe:return(e.displayName||"Context")+".Consumer";case _Ce:return(e._context.displayName||"Context")+".Provider";case pJ:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case mJ:return t=e.displayName||null,t!==null?t:mW(e.type)||"Memo";case p1:t=e._payload,e=e._init;try{return mW(e(t))}catch{}}return null}function Met(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mW(t);case 8:return t===hJ?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Sv(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function CCe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $et(e){var t=CCe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function BO(e){e._valueTracker||(e._valueTracker=$et(e))}function TCe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=CCe(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function sM(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function gW(e,t){var n=t.checked;return Xs({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ohe(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Sv(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ACe(e,t){t=t.checked,t!=null&&dJ(e,"checked",t,!1)}function yW(e,t){ACe(e,t);var n=Sv(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?vW(e,t.type,n):t.hasOwnProperty("defaultValue")&&vW(e,t.type,Sv(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ahe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function vW(e,t,n){(t!=="number"||sM(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var uI=Array.isArray;function oS(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Sv(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function bW(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(kt(91));return Xs({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function uhe(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(kt(92));if(uI(n)){if(1<n.length)throw Error(kt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Sv(n)}}function DCe(e,t){var n=Sv(t.value),r=Sv(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function lhe(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ICe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xW(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ICe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var jO,kCe=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(jO=jO||document.createElement("div"),jO.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=jO.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function nR(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ek={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Let=["Webkit","ms","Moz","O"];Object.keys(ek).forEach(function(e){Let.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ek[t]=ek[e]})});function RCe(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ek.hasOwnProperty(e)&&ek[e]?(""+t).trim():t+"px"}function NCe(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=RCe(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Bet=Xs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wW(e,t){if(t){if(Bet[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(kt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(kt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(kt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(kt(62))}}function _W(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var EW=null;function gJ(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var SW=null,aS=null,uS=null;function che(e){if(e=eN(e)){if(typeof SW!="function")throw Error(kt(280));var t=e.stateNode;t&&(t=aL(t),SW(e.stateNode,e.type,t))}}function PCe(e){aS?uS?uS.push(e):uS=[e]:aS=e}function OCe(){if(aS){var e=aS,t=uS;if(uS=aS=null,che(e),t)for(e=0;e<t.length;e++)che(t[e])}}function FCe(e,t){return e(t)}function MCe(){}var PU=!1;function $Ce(e,t,n){if(PU)return e(t,n);PU=!0;try{return FCe(e,t,n)}finally{PU=!1,(aS!==null||uS!==null)&&(MCe(),OCe())}}function rR(e,t){var n=e.stateNode;if(n===null)return null;var r=aL(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(kt(231,t,typeof n));return n}var CW=!1;if(Hg)try{var uD={};Object.defineProperty(uD,"passive",{get:function(){CW=!0}}),window.addEventListener("test",uD,uD),window.removeEventListener("test",uD,uD)}catch{CW=!1}function jet(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var tk=!1,oM=null,aM=!1,TW=null,Uet={onError:function(e){tk=!0,oM=e}};function zet(e,t,n,r,i,s,o,a,u){tk=!1,oM=null,jet.apply(Uet,arguments)}function Vet(e,t,n,r,i,s,o,a,u){if(zet.apply(this,arguments),tk){if(tk){var l=oM;tk=!1,oM=null}else throw Error(kt(198));aM||(aM=!0,TW=l)}}function P_(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function LCe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fhe(e){if(P_(e)!==e)throw Error(kt(188))}function Het(e){var t=e.alternate;if(!t){if(t=P_(e),t===null)throw Error(kt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return fhe(i),e;if(s===r)return fhe(i),t;s=s.sibling}throw Error(kt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(kt(189))}}if(n.alternate!==r)throw Error(kt(190))}if(n.tag!==3)throw Error(kt(188));return n.stateNode.current===n?e:t}function BCe(e){return e=Het(e),e!==null?jCe(e):null}function jCe(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=jCe(e);if(t!==null)return t;e=e.sibling}return null}var UCe=Of.unstable_scheduleCallback,dhe=Of.unstable_cancelCallback,qet=Of.unstable_shouldYield,Wet=Of.unstable_requestPaint,So=Of.unstable_now,Get=Of.unstable_getCurrentPriorityLevel,yJ=Of.unstable_ImmediatePriority,zCe=Of.unstable_UserBlockingPriority,uM=Of.unstable_NormalPriority,Yet=Of.unstable_LowPriority,VCe=Of.unstable_IdlePriority,rL=null,Cm=null;function Ket(e){if(Cm&&typeof Cm.onCommitFiberRoot=="function")try{Cm.onCommitFiberRoot(rL,e,void 0,(e.current.flags&128)===128)}catch{}}var Zh=Math.clz32?Math.clz32:Jet,Xet=Math.log,Qet=Math.LN2;function Jet(e){return e>>>=0,e===0?32:31-(Xet(e)/Qet|0)|0}var UO=64,zO=4194304;function lI(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function lM(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=lI(a):(s&=o,s!==0&&(r=lI(s)))}else o=n&~i,o!==0?r=lI(o):s!==0&&(r=lI(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Zh(t),i=1<<n,r|=e[n],t&=~i;return r}function Zet(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ett(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Zh(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=Zet(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function AW(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function HCe(){var e=UO;return UO<<=1,!(UO&4194240)&&(UO=64),e}function OU(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function J3(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Zh(t),e[t]=n}function ttt(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Zh(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function vJ(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Zh(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var qi=0;function qCe(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var WCe,bJ,GCe,YCe,KCe,DW=!1,VO=[],Z1=null,ev=null,tv=null,iR=new Map,sR=new Map,C1=[],ntt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hhe(e,t){switch(e){case"focusin":case"focusout":Z1=null;break;case"dragenter":case"dragleave":ev=null;break;case"mouseover":case"mouseout":tv=null;break;case"pointerover":case"pointerout":iR.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sR.delete(t.pointerId)}}function lD(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=eN(t),t!==null&&bJ(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function rtt(e,t,n,r,i){switch(t){case"focusin":return Z1=lD(Z1,e,t,n,r,i),!0;case"dragenter":return ev=lD(ev,e,t,n,r,i),!0;case"mouseover":return tv=lD(tv,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return iR.set(s,lD(iR.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,sR.set(s,lD(sR.get(s)||null,e,t,n,r,i)),!0}return!1}function XCe(e){var t=ow(e.target);if(t!==null){var n=P_(t);if(n!==null){if(t=n.tag,t===13){if(t=LCe(n),t!==null){e.blockedOn=t,KCe(e.priority,function(){GCe(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function L6(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=IW(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);EW=r,n.target.dispatchEvent(r),EW=null}else return t=eN(n),t!==null&&bJ(t),e.blockedOn=n,!1;t.shift()}return!0}function phe(e,t,n){L6(e)&&n.delete(t)}function itt(){DW=!1,Z1!==null&&L6(Z1)&&(Z1=null),ev!==null&&L6(ev)&&(ev=null),tv!==null&&L6(tv)&&(tv=null),iR.forEach(phe),sR.forEach(phe)}function cD(e,t){e.blockedOn===t&&(e.blockedOn=null,DW||(DW=!0,Of.unstable_scheduleCallback(Of.unstable_NormalPriority,itt)))}function oR(e){function t(i){return cD(i,e)}if(0<VO.length){cD(VO[0],e);for(var n=1;n<VO.length;n++){var r=VO[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Z1!==null&&cD(Z1,e),ev!==null&&cD(ev,e),tv!==null&&cD(tv,e),iR.forEach(t),sR.forEach(t),n=0;n<C1.length;n++)r=C1[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<C1.length&&(n=C1[0],n.blockedOn===null);)XCe(n),n.blockedOn===null&&C1.shift()}var lS=vy.ReactCurrentBatchConfig,cM=!0;function stt(e,t,n,r){var i=qi,s=lS.transition;lS.transition=null;try{qi=1,xJ(e,t,n,r)}finally{qi=i,lS.transition=s}}function ott(e,t,n,r){var i=qi,s=lS.transition;lS.transition=null;try{qi=4,xJ(e,t,n,r)}finally{qi=i,lS.transition=s}}function xJ(e,t,n,r){if(cM){var i=IW(e,t,n,r);if(i===null)HU(e,t,r,fM,n),hhe(e,r);else if(rtt(i,e,t,n,r))r.stopPropagation();else if(hhe(e,r),t&4&&-1<ntt.indexOf(e)){for(;i!==null;){var s=eN(i);if(s!==null&&WCe(s),s=IW(e,t,n,r),s===null&&HU(e,t,r,fM,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else HU(e,t,r,null,n)}}var fM=null;function IW(e,t,n,r){if(fM=null,e=gJ(r),e=ow(e),e!==null)if(t=P_(e),t===null)e=null;else if(n=t.tag,n===13){if(e=LCe(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fM=e,null}function QCe(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Get()){case yJ:return 1;case zCe:return 4;case uM:case Yet:return 16;case VCe:return 536870912;default:return 16}default:return 16}}var M1=null,wJ=null,B6=null;function JCe(){if(B6)return B6;var e,t=wJ,n=t.length,r,i="value"in M1?M1.value:M1.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return B6=i.slice(e,1<r?1-r:void 0)}function j6(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function HO(){return!0}function mhe(){return!1}function Xf(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?HO:mhe,this.isPropagationStopped=mhe,this}return Xs(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=HO)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=HO)},persist:function(){},isPersistent:HO}),t}var bT={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_J=Xf(bT),Z3=Xs({},bT,{view:0,detail:0}),att=Xf(Z3),FU,MU,fD,iL=Xs({},Z3,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:EJ,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fD&&(fD&&e.type==="mousemove"?(FU=e.screenX-fD.screenX,MU=e.screenY-fD.screenY):MU=FU=0,fD=e),FU)},movementY:function(e){return"movementY"in e?e.movementY:MU}}),ghe=Xf(iL),utt=Xs({},iL,{dataTransfer:0}),ltt=Xf(utt),ctt=Xs({},Z3,{relatedTarget:0}),$U=Xf(ctt),ftt=Xs({},bT,{animationName:0,elapsedTime:0,pseudoElement:0}),dtt=Xf(ftt),htt=Xs({},bT,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ptt=Xf(htt),mtt=Xs({},bT,{data:0}),yhe=Xf(mtt),gtt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ytt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vtt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function btt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=vtt[e])?!!t[e]:!1}function EJ(){return btt}var xtt=Xs({},Z3,{key:function(e){if(e.key){var t=gtt[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=j6(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ytt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:EJ,charCode:function(e){return e.type==="keypress"?j6(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?j6(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wtt=Xf(xtt),_tt=Xs({},iL,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vhe=Xf(_tt),Ett=Xs({},Z3,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:EJ}),Stt=Xf(Ett),Ctt=Xs({},bT,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ttt=Xf(Ctt),Att=Xs({},iL,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dtt=Xf(Att),Itt=[9,13,27,32],SJ=Hg&&"CompositionEvent"in window,nk=null;Hg&&"documentMode"in document&&(nk=document.documentMode);var ktt=Hg&&"TextEvent"in window&&!nk,ZCe=Hg&&(!SJ||nk&&8<nk&&11>=nk),bhe=" ",xhe=!1;function eTe(e,t){switch(e){case"keyup":return Itt.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tTe(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var M2=!1;function Rtt(e,t){switch(e){case"compositionend":return tTe(t);case"keypress":return t.which!==32?null:(xhe=!0,bhe);case"textInput":return e=t.data,e===bhe&&xhe?null:e;default:return null}}function Ntt(e,t){if(M2)return e==="compositionend"||!SJ&&eTe(e,t)?(e=JCe(),B6=wJ=M1=null,M2=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ZCe&&t.locale!=="ko"?null:t.data;default:return null}}var Ptt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function whe(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ptt[e.type]:t==="textarea"}function nTe(e,t,n,r){PCe(r),t=dM(t,"onChange"),0<t.length&&(n=new _J("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var rk=null,aR=null;function Ott(e){hTe(e,0)}function sL(e){var t=B2(e);if(TCe(t))return e}function Ftt(e,t){if(e==="change")return t}var rTe=!1;if(Hg){var LU;if(Hg){var BU="oninput"in document;if(!BU){var _he=document.createElement("div");_he.setAttribute("oninput","return;"),BU=typeof _he.oninput=="function"}LU=BU}else LU=!1;rTe=LU&&(!document.documentMode||9<document.documentMode)}function Ehe(){rk&&(rk.detachEvent("onpropertychange",iTe),aR=rk=null)}function iTe(e){if(e.propertyName==="value"&&sL(aR)){var t=[];nTe(t,aR,e,gJ(e)),$Ce(Ott,t)}}function Mtt(e,t,n){e==="focusin"?(Ehe(),rk=t,aR=n,rk.attachEvent("onpropertychange",iTe)):e==="focusout"&&Ehe()}function $tt(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sL(aR)}function Ltt(e,t){if(e==="click")return sL(t)}function Btt(e,t){if(e==="input"||e==="change")return sL(t)}function jtt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cp=typeof Object.is=="function"?Object.is:jtt;function uR(e,t){if(cp(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!fW.call(t,i)||!cp(e[i],t[i]))return!1}return!0}function She(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Che(e,t){var n=She(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=She(n)}}function sTe(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?sTe(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function oTe(){for(var e=window,t=sM();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=sM(e.document)}return t}function CJ(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Utt(e){var t=oTe(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&sTe(n.ownerDocument.documentElement,n)){if(r!==null&&CJ(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Che(n,s);var o=Che(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ztt=Hg&&"documentMode"in document&&11>=document.documentMode,$2=null,kW=null,ik=null,RW=!1;function The(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;RW||$2==null||$2!==sM(r)||(r=$2,"selectionStart"in r&&CJ(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ik&&uR(ik,r)||(ik=r,r=dM(kW,"onSelect"),0<r.length&&(t=new _J("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=$2)))}function qO(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var L2={animationend:qO("Animation","AnimationEnd"),animationiteration:qO("Animation","AnimationIteration"),animationstart:qO("Animation","AnimationStart"),transitionend:qO("Transition","TransitionEnd")},jU={},aTe={};Hg&&(aTe=document.createElement("div").style,"AnimationEvent"in window||(delete L2.animationend.animation,delete L2.animationiteration.animation,delete L2.animationstart.animation),"TransitionEvent"in window||delete L2.transitionend.transition);function oL(e){if(jU[e])return jU[e];if(!L2[e])return e;var t=L2[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in aTe)return jU[e]=t[n];return e}var uTe=oL("animationend"),lTe=oL("animationiteration"),cTe=oL("animationstart"),fTe=oL("transitionend"),dTe=new Map,Ahe="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function db(e,t){dTe.set(e,t),N_(t,[e])}for(var UU=0;UU<Ahe.length;UU++){var zU=Ahe[UU],Vtt=zU.toLowerCase(),Htt=zU[0].toUpperCase()+zU.slice(1);db(Vtt,"on"+Htt)}db(uTe,"onAnimationEnd");db(lTe,"onAnimationIteration");db(cTe,"onAnimationStart");db("dblclick","onDoubleClick");db("focusin","onFocus");db("focusout","onBlur");db(fTe,"onTransitionEnd");KS("onMouseEnter",["mouseout","mouseover"]);KS("onMouseLeave",["mouseout","mouseover"]);KS("onPointerEnter",["pointerout","pointerover"]);KS("onPointerLeave",["pointerout","pointerover"]);N_("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));N_("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));N_("onBeforeInput",["compositionend","keypress","textInput","paste"]);N_("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));N_("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));N_("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cI="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qtt=new Set("cancel close invalid load scroll toggle".split(" ").concat(cI));function Dhe(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Vet(r,t,void 0,e),e.currentTarget=null}function hTe(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Dhe(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Dhe(i,a,l),s=u}}}if(aM)throw e=TW,aM=!1,TW=null,e}function vs(e,t){var n=t[MW];n===void 0&&(n=t[MW]=new Set);var r=e+"__bubble";n.has(r)||(pTe(t,e,2,!1),n.add(r))}function VU(e,t,n){var r=0;t&&(r|=4),pTe(n,e,r,t)}var WO="_reactListening"+Math.random().toString(36).slice(2);function lR(e){if(!e[WO]){e[WO]=!0,wCe.forEach(function(n){n!=="selectionchange"&&(qtt.has(n)||VU(n,!1,e),VU(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[WO]||(t[WO]=!0,VU("selectionchange",!1,t))}}function pTe(e,t,n,r){switch(QCe(t)){case 1:var i=stt;break;case 4:i=ott;break;default:i=xJ}n=i.bind(null,t,n,e),i=void 0,!CW||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function HU(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ow(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}$Ce(function(){var l=s,c=gJ(n),f=[];e:{var d=dTe.get(e);if(d!==void 0){var h=_J,p=e;switch(e){case"keypress":if(j6(n)===0)break e;case"keydown":case"keyup":h=wtt;break;case"focusin":p="focus",h=$U;break;case"focusout":p="blur",h=$U;break;case"beforeblur":case"afterblur":h=$U;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=ghe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=ltt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Stt;break;case uTe:case lTe:case cTe:h=dtt;break;case fTe:h=Ttt;break;case"scroll":h=att;break;case"wheel":h=Dtt;break;case"copy":case"cut":case"paste":h=ptt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=vhe}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,y!==null&&(_=rR(v,y),_!=null&&m.push(cR(v,_,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==EW&&(p=n.relatedTarget||n.fromElement)&&(ow(p)||p[qg]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?ow(p):null,p!==null&&(g=P_(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=ghe,_="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=vhe,_="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:B2(h),b=p==null?d:B2(p),d=new m(_,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,_=null,ow(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,_=m),g=_,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=BE(b))v++;for(b=0,_=y;_;_=BE(_))b++;for(;0<v-b;)m=BE(m),v--;for(;0<b-v;)y=BE(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=BE(m),y=BE(y)}m=null}else m=null;h!==null&&Ihe(f,d,h,m,!1),p!==null&&g!==null&&Ihe(f,g,p,m,!0)}}e:{if(d=l?B2(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var w=Ftt;else if(whe(d))if(rTe)w=Btt;else{w=$tt;var S=Mtt}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=Ltt);if(w&&(w=w(e,l))){nTe(f,w,n,c);break e}S&&S(e,d,l),e==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&vW(d,"number",d.value)}switch(S=l?B2(l):window,e){case"focusin":(whe(S)||S.contentEditable==="true")&&($2=S,kW=l,ik=null);break;case"focusout":ik=kW=$2=null;break;case"mousedown":RW=!0;break;case"contextmenu":case"mouseup":case"dragend":RW=!1,The(f,n,c);break;case"selectionchange":if(ztt)break;case"keydown":case"keyup":The(f,n,c)}var T;if(SJ)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else M2?eTe(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(ZCe&&n.locale!=="ko"&&(M2||A!=="onCompositionStart"?A==="onCompositionEnd"&&M2&&(T=JCe()):(M1=c,wJ="value"in M1?M1.value:M1.textContent,M2=!0)),S=dM(l,A),0<S.length&&(A=new yhe(A,e,null,n,c),f.push({event:A,listeners:S}),T?A.data=T:(T=tTe(n),T!==null&&(A.data=T)))),(T=ktt?Rtt(e,n):Ntt(e,n))&&(l=dM(l,"onBeforeInput"),0<l.length&&(c=new yhe("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=T))}hTe(f,t)})}function cR(e,t,n){return{instance:e,listener:t,currentTarget:n}}function dM(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=rR(e,n),s!=null&&r.unshift(cR(e,s,i)),s=rR(e,t),s!=null&&r.push(cR(e,s,i))),e=e.return}return r}function BE(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ihe(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=rR(n,s),u!=null&&o.unshift(cR(n,u,a))):i||(u=rR(n,s),u!=null&&o.push(cR(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Wtt=/\r\n?/g,Gtt=/\u0000|\uFFFD/g;function khe(e){return(typeof e=="string"?e:""+e).replace(Wtt,`
`).replace(Gtt,"")}function GO(e,t,n){if(t=khe(t),khe(e)!==t&&n)throw Error(kt(425))}function hM(){}var NW=null,PW=null;function OW(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var FW=typeof setTimeout=="function"?setTimeout:void 0,Ytt=typeof clearTimeout=="function"?clearTimeout:void 0,Rhe=typeof Promise=="function"?Promise:void 0,Ktt=typeof queueMicrotask=="function"?queueMicrotask:typeof Rhe<"u"?function(e){return Rhe.resolve(null).then(e).catch(Xtt)}:FW;function Xtt(e){setTimeout(function(){throw e})}function qU(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),oR(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);oR(t)}function nv(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Nhe(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var xT=Math.random().toString(36).slice(2),sm="__reactFiber$"+xT,fR="__reactProps$"+xT,qg="__reactContainer$"+xT,MW="__reactEvents$"+xT,Qtt="__reactListeners$"+xT,Jtt="__reactHandles$"+xT;function ow(e){var t=e[sm];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qg]||n[sm]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Nhe(e);e!==null;){if(n=e[sm])return n;e=Nhe(e)}return t}e=n,n=e.parentNode}return null}function eN(e){return e=e[sm]||e[qg],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function B2(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(kt(33))}function aL(e){return e[fR]||null}var $W=[],j2=-1;function hb(e){return{current:e}}function Cs(e){0>j2||(e.current=$W[j2],$W[j2]=null,j2--)}function ds(e,t){j2++,$W[j2]=e.current,e.current=t}var Cv={},Ju=hb(Cv),Ic=hb(!1),zw=Cv;function XS(e,t){var n=e.type.contextTypes;if(!n)return Cv;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function kc(e){return e=e.childContextTypes,e!=null}function pM(){Cs(Ic),Cs(Ju)}function Phe(e,t,n){if(Ju.current!==Cv)throw Error(kt(168));ds(Ju,t),ds(Ic,n)}function mTe(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(kt(108,Met(e)||"Unknown",i));return Xs({},n,r)}function mM(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cv,zw=Ju.current,ds(Ju,e),ds(Ic,Ic.current),!0}function Ohe(e,t,n){var r=e.stateNode;if(!r)throw Error(kt(169));n?(e=mTe(e,t,zw),r.__reactInternalMemoizedMergedChildContext=e,Cs(Ic),Cs(Ju),ds(Ju,e)):Cs(Ic),ds(Ic,n)}var ng=null,uL=!1,WU=!1;function gTe(e){ng===null?ng=[e]:ng.push(e)}function Ztt(e){uL=!0,gTe(e)}function pb(){if(!WU&&ng!==null){WU=!0;var e=0,t=qi;try{var n=ng;for(qi=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ng=null,uL=!1}catch(i){throw ng!==null&&(ng=ng.slice(e+1)),UCe(yJ,pb),i}finally{qi=t,WU=!1}}return null}var U2=[],z2=0,gM=null,yM=0,xd=[],wd=0,Vw=null,mg=1,gg="";function Dx(e,t){U2[z2++]=yM,U2[z2++]=gM,gM=e,yM=t}function yTe(e,t,n){xd[wd++]=mg,xd[wd++]=gg,xd[wd++]=Vw,Vw=e;var r=mg;e=gg;var i=32-Zh(r)-1;r&=~(1<<i),n+=1;var s=32-Zh(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,mg=1<<32-Zh(t)+i|n<<i|r,gg=s+e}else mg=1<<s|n<<i|r,gg=e}function TJ(e){e.return!==null&&(Dx(e,1),yTe(e,1,0))}function AJ(e){for(;e===gM;)gM=U2[--z2],U2[z2]=null,yM=U2[--z2],U2[z2]=null;for(;e===Vw;)Vw=xd[--wd],xd[wd]=null,gg=xd[--wd],xd[wd]=null,mg=xd[--wd],xd[wd]=null}var Af=null,bf=null,$s=!1,Oh=null;function vTe(e,t){var n=Dd(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Fhe(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Af=e,bf=nv(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Af=e,bf=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Vw!==null?{id:mg,overflow:gg}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Dd(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Af=e,bf=null,!0):!1;default:return!1}}function LW(e){return(e.mode&1)!==0&&(e.flags&128)===0}function BW(e){if($s){var t=bf;if(t){var n=t;if(!Fhe(e,t)){if(LW(e))throw Error(kt(418));t=nv(n.nextSibling);var r=Af;t&&Fhe(e,t)?vTe(r,n):(e.flags=e.flags&-4097|2,$s=!1,Af=e)}}else{if(LW(e))throw Error(kt(418));e.flags=e.flags&-4097|2,$s=!1,Af=e}}}function Mhe(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Af=e}function YO(e){if(e!==Af)return!1;if(!$s)return Mhe(e),$s=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!OW(e.type,e.memoizedProps)),t&&(t=bf)){if(LW(e))throw bTe(),Error(kt(418));for(;t;)vTe(e,t),t=nv(t.nextSibling)}if(Mhe(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(kt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){bf=nv(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}bf=null}}else bf=Af?nv(e.stateNode.nextSibling):null;return!0}function bTe(){for(var e=bf;e;)e=nv(e.nextSibling)}function QS(){bf=Af=null,$s=!1}function DJ(e){Oh===null?Oh=[e]:Oh.push(e)}var ent=vy.ReactCurrentBatchConfig;function dD(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(kt(309));var r=n.stateNode}if(!r)throw Error(kt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(kt(284));if(!n._owner)throw Error(kt(290,e))}return e}function KO(e,t){throw e=Object.prototype.toString.call(t),Error(kt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $he(e){var t=e._init;return t(e._payload)}function xTe(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=ov(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,_){return v===null||v.tag!==6?(v=ZU(b,y.mode,_),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,_){var w=b.type;return w===F2?c(y,v,b.props.children,_,b.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===p1&&$he(w)===v.type)?(_=i(v,b.props),_.ref=dD(y,v,b),_.return=y,_):(_=G6(b.type,b.key,b.props,null,y.mode,_),_.ref=dD(y,v,b),_.return=y,_)}function l(y,v,b,_){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=ez(b,y.mode,_),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,_,w){return v===null||v.tag!==7?(v=Dw(b,y.mode,_,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=ZU(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case LO:return b=G6(v.type,v.key,v.props,null,y.mode,b),b.ref=dD(y,null,v),b.return=y,b;case O2:return v=ez(v,y.mode,b),v.return=y,v;case p1:var _=v._init;return f(y,_(v._payload),b)}if(uI(v)||aD(v))return v=Dw(v,y.mode,b,null),v.return=y,v;KO(y,v)}return null}function d(y,v,b,_){var w=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:a(y,v,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case LO:return b.key===w?u(y,v,b,_):null;case O2:return b.key===w?l(y,v,b,_):null;case p1:return w=b._init,d(y,v,w(b._payload),_)}if(uI(b)||aD(b))return w!==null?null:c(y,v,b,_,null);KO(y,b)}return null}function h(y,v,b,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(b)||null,a(v,y,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case LO:return y=y.get(_.key===null?b:_.key)||null,u(v,y,_,w);case O2:return y=y.get(_.key===null?b:_.key)||null,l(v,y,_,w);case p1:var S=_._init;return h(y,v,b,S(_._payload),w)}if(uI(_)||aD(_))return y=y.get(b)||null,c(v,y,_,w,null);KO(v,_)}return null}function p(y,v,b,_){for(var w=null,S=null,T=v,A=v=0,k=null;T!==null&&A<b.length;A++){T.index>A?(k=T,T=null):k=T.sibling;var I=d(y,T,b[A],_);if(I===null){T===null&&(T=k);break}e&&T&&I.alternate===null&&t(y,T),v=s(I,v,A),S===null?w=I:S.sibling=I,S=I,T=k}if(A===b.length)return n(y,T),$s&&Dx(y,A),w;if(T===null){for(;A<b.length;A++)T=f(y,b[A],_),T!==null&&(v=s(T,v,A),S===null?w=T:S.sibling=T,S=T);return $s&&Dx(y,A),w}for(T=r(y,T);A<b.length;A++)k=h(T,y,A,b[A],_),k!==null&&(e&&k.alternate!==null&&T.delete(k.key===null?A:k.key),v=s(k,v,A),S===null?w=k:S.sibling=k,S=k);return e&&T.forEach(function(R){return t(y,R)}),$s&&Dx(y,A),w}function m(y,v,b,_){var w=aD(b);if(typeof w!="function")throw Error(kt(150));if(b=w.call(b),b==null)throw Error(kt(151));for(var S=w=null,T=v,A=v=0,k=null,I=b.next();T!==null&&!I.done;A++,I=b.next()){T.index>A?(k=T,T=null):k=T.sibling;var R=d(y,T,I.value,_);if(R===null){T===null&&(T=k);break}e&&T&&R.alternate===null&&t(y,T),v=s(R,v,A),S===null?w=R:S.sibling=R,S=R,T=k}if(I.done)return n(y,T),$s&&Dx(y,A),w;if(T===null){for(;!I.done;A++,I=b.next())I=f(y,I.value,_),I!==null&&(v=s(I,v,A),S===null?w=I:S.sibling=I,S=I);return $s&&Dx(y,A),w}for(T=r(y,T);!I.done;A++,I=b.next())I=h(T,y,A,I.value,_),I!==null&&(e&&I.alternate!==null&&T.delete(I.key===null?A:I.key),v=s(I,v,A),S===null?w=I:S.sibling=I,S=I);return e&&T.forEach(function(F){return t(y,F)}),$s&&Dx(y,A),w}function g(y,v,b,_){if(typeof b=="object"&&b!==null&&b.type===F2&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case LO:e:{for(var w=b.key,S=v;S!==null;){if(S.key===w){if(w=b.type,w===F2){if(S.tag===7){n(y,S.sibling),v=i(S,b.props.children),v.return=y,y=v;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===p1&&$he(w)===S.type){n(y,S.sibling),v=i(S,b.props),v.ref=dD(y,S,b),v.return=y,y=v;break e}n(y,S);break}else t(y,S);S=S.sibling}b.type===F2?(v=Dw(b.props.children,y.mode,_,b.key),v.return=y,y=v):(_=G6(b.type,b.key,b.props,null,y.mode,_),_.ref=dD(y,v,b),_.return=y,y=_)}return o(y);case O2:e:{for(S=b.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=ez(b,y.mode,_),v.return=y,y=v}return o(y);case p1:return S=b._init,g(y,v,S(b._payload),_)}if(uI(b))return p(y,v,b,_);if(aD(b))return m(y,v,b,_);KO(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=ZU(b,y.mode,_),v.return=y,y=v),o(y)):n(y,v)}return g}var JS=xTe(!0),wTe=xTe(!1),vM=hb(null),bM=null,V2=null,IJ=null;function kJ(){IJ=V2=bM=null}function RJ(e){var t=vM.current;Cs(vM),e._currentValue=t}function jW(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function cS(e,t){bM=e,IJ=V2=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(_c=!0),e.firstContext=null)}function Md(e){var t=e._currentValue;if(IJ!==e)if(e={context:e,memoizedValue:t,next:null},V2===null){if(bM===null)throw Error(kt(308));V2=e,bM.dependencies={lanes:0,firstContext:e}}else V2=V2.next=e;return t}var aw=null;function NJ(e){aw===null?aw=[e]:aw.push(e)}function _Te(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,NJ(t)):(n.next=i.next,i.next=n),t.interleaved=n,Wg(e,r)}function Wg(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var m1=!1;function PJ(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ETe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kg(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rv(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ci&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Wg(e,n)}return i=r.interleaved,i===null?(t.next=t,NJ(r)):(t.next=i.next,i.next=t),r.interleaved=t,Wg(e,n)}function U6(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,vJ(e,n)}}function Lhe(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function xM(e,t,n,r){var i=e.updateQueue;m1=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Xs({},f,d);break e;case 2:m1=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);qw|=o,e.lanes=o,e.memoizedState=f}}function Bhe(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(kt(191,i));i.call(r)}}}var tN={},Tm=hb(tN),dR=hb(tN),hR=hb(tN);function uw(e){if(e===tN)throw Error(kt(174));return e}function OJ(e,t){switch(ds(hR,t),ds(dR,e),ds(Tm,tN),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:xW(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=xW(t,e)}Cs(Tm),ds(Tm,t)}function ZS(){Cs(Tm),Cs(dR),Cs(hR)}function STe(e){uw(hR.current);var t=uw(Tm.current),n=xW(t,e.type);t!==n&&(ds(dR,e),ds(Tm,n))}function FJ(e){dR.current===e&&(Cs(Tm),Cs(dR))}var Ws=hb(0);function wM(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var GU=[];function MJ(){for(var e=0;e<GU.length;e++)GU[e]._workInProgressVersionPrimary=null;GU.length=0}var z6=vy.ReactCurrentDispatcher,YU=vy.ReactCurrentBatchConfig,Hw=0,Ks=null,ta=null,Aa=null,_M=!1,sk=!1,pR=0,tnt=0;function Eu(){throw Error(kt(321))}function $J(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cp(e[n],t[n]))return!1;return!0}function LJ(e,t,n,r,i,s){if(Hw=s,Ks=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,z6.current=e===null||e.memoizedState===null?snt:ont,e=n(r,i),sk){s=0;do{if(sk=!1,pR=0,25<=s)throw Error(kt(301));s+=1,Aa=ta=null,t.updateQueue=null,z6.current=ant,e=n(r,i)}while(sk)}if(z6.current=EM,t=ta!==null&&ta.next!==null,Hw=0,Aa=ta=Ks=null,_M=!1,t)throw Error(kt(300));return e}function BJ(){var e=pR!==0;return pR=0,e}function Yp(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Aa===null?Ks.memoizedState=Aa=e:Aa=Aa.next=e,Aa}function $d(){if(ta===null){var e=Ks.alternate;e=e!==null?e.memoizedState:null}else e=ta.next;var t=Aa===null?Ks.memoizedState:Aa.next;if(t!==null)Aa=t,ta=e;else{if(e===null)throw Error(kt(310));ta=e,e={memoizedState:ta.memoizedState,baseState:ta.baseState,baseQueue:ta.baseQueue,queue:ta.queue,next:null},Aa===null?Ks.memoizedState=Aa=e:Aa=Aa.next=e}return Aa}function mR(e,t){return typeof t=="function"?t(e):t}function KU(e){var t=$d(),n=t.queue;if(n===null)throw Error(kt(311));n.lastRenderedReducer=e;var r=ta,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((Hw&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Ks.lanes|=c,qw|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,cp(r,t.memoizedState)||(_c=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ks.lanes|=s,qw|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function XU(e){var t=$d(),n=t.queue;if(n===null)throw Error(kt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);cp(s,t.memoizedState)||(_c=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function CTe(){}function TTe(e,t){var n=Ks,r=$d(),i=t(),s=!cp(r.memoizedState,i);if(s&&(r.memoizedState=i,_c=!0),r=r.queue,jJ(ITe.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Aa!==null&&Aa.memoizedState.tag&1){if(n.flags|=2048,gR(9,DTe.bind(null,n,r,i,t),void 0,null),$a===null)throw Error(kt(349));Hw&30||ATe(n,t,i)}return i}function ATe(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ks.updateQueue,t===null?(t={lastEffect:null,stores:null},Ks.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function DTe(e,t,n,r){t.value=n,t.getSnapshot=r,kTe(t)&&RTe(e)}function ITe(e,t,n){return n(function(){kTe(t)&&RTe(e)})}function kTe(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cp(e,n)}catch{return!0}}function RTe(e){var t=Wg(e,1);t!==null&&ep(t,e,1,-1)}function jhe(e){var t=Yp();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mR,lastRenderedState:e},t.queue=e,e=e.dispatch=int.bind(null,Ks,e),[t.memoizedState,e]}function gR(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ks.updateQueue,t===null?(t={lastEffect:null,stores:null},Ks.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function NTe(){return $d().memoizedState}function V6(e,t,n,r){var i=Yp();Ks.flags|=e,i.memoizedState=gR(1|t,n,void 0,r===void 0?null:r)}function lL(e,t,n,r){var i=$d();r=r===void 0?null:r;var s=void 0;if(ta!==null){var o=ta.memoizedState;if(s=o.destroy,r!==null&&$J(r,o.deps)){i.memoizedState=gR(t,n,s,r);return}}Ks.flags|=e,i.memoizedState=gR(1|t,n,s,r)}function Uhe(e,t){return V6(8390656,8,e,t)}function jJ(e,t){return lL(2048,8,e,t)}function PTe(e,t){return lL(4,2,e,t)}function OTe(e,t){return lL(4,4,e,t)}function FTe(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function MTe(e,t,n){return n=n!=null?n.concat([e]):null,lL(4,4,FTe.bind(null,t,e),n)}function UJ(){}function $Te(e,t){var n=$d();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&$J(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function LTe(e,t){var n=$d();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&$J(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function BTe(e,t,n){return Hw&21?(cp(n,t)||(n=HCe(),Ks.lanes|=n,qw|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,_c=!0),e.memoizedState=n)}function nnt(e,t){var n=qi;qi=n!==0&&4>n?n:4,e(!0);var r=YU.transition;YU.transition={};try{e(!1),t()}finally{qi=n,YU.transition=r}}function jTe(){return $d().memoizedState}function rnt(e,t,n){var r=sv(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},UTe(e))zTe(t,n);else if(n=_Te(e,t,n,r),n!==null){var i=Nl();ep(n,e,r,i),VTe(n,t,r)}}function int(e,t,n){var r=sv(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(UTe(e))zTe(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,cp(a,o)){var u=t.interleaved;u===null?(i.next=i,NJ(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=_Te(e,t,i,r),n!==null&&(i=Nl(),ep(n,e,r,i),VTe(n,t,r))}}function UTe(e){var t=e.alternate;return e===Ks||t!==null&&t===Ks}function zTe(e,t){sk=_M=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function VTe(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,vJ(e,n)}}var EM={readContext:Md,useCallback:Eu,useContext:Eu,useEffect:Eu,useImperativeHandle:Eu,useInsertionEffect:Eu,useLayoutEffect:Eu,useMemo:Eu,useReducer:Eu,useRef:Eu,useState:Eu,useDebugValue:Eu,useDeferredValue:Eu,useTransition:Eu,useMutableSource:Eu,useSyncExternalStore:Eu,useId:Eu,unstable_isNewReconciler:!1},snt={readContext:Md,useCallback:function(e,t){return Yp().memoizedState=[e,t===void 0?null:t],e},useContext:Md,useEffect:Uhe,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,V6(4194308,4,FTe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return V6(4194308,4,e,t)},useInsertionEffect:function(e,t){return V6(4,2,e,t)},useMemo:function(e,t){var n=Yp();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Yp();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=rnt.bind(null,Ks,e),[r.memoizedState,e]},useRef:function(e){var t=Yp();return e={current:e},t.memoizedState=e},useState:jhe,useDebugValue:UJ,useDeferredValue:function(e){return Yp().memoizedState=e},useTransition:function(){var e=jhe(!1),t=e[0];return e=nnt.bind(null,e[1]),Yp().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ks,i=Yp();if($s){if(n===void 0)throw Error(kt(407));n=n()}else{if(n=t(),$a===null)throw Error(kt(349));Hw&30||ATe(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Uhe(ITe.bind(null,r,s,e),[e]),r.flags|=2048,gR(9,DTe.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Yp(),t=$a.identifierPrefix;if($s){var n=gg,r=mg;n=(r&~(1<<32-Zh(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=pR++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=tnt++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ont={readContext:Md,useCallback:$Te,useContext:Md,useEffect:jJ,useImperativeHandle:MTe,useInsertionEffect:PTe,useLayoutEffect:OTe,useMemo:LTe,useReducer:KU,useRef:NTe,useState:function(){return KU(mR)},useDebugValue:UJ,useDeferredValue:function(e){var t=$d();return BTe(t,ta.memoizedState,e)},useTransition:function(){var e=KU(mR)[0],t=$d().memoizedState;return[e,t]},useMutableSource:CTe,useSyncExternalStore:TTe,useId:jTe,unstable_isNewReconciler:!1},ant={readContext:Md,useCallback:$Te,useContext:Md,useEffect:jJ,useImperativeHandle:MTe,useInsertionEffect:PTe,useLayoutEffect:OTe,useMemo:LTe,useReducer:XU,useRef:NTe,useState:function(){return XU(mR)},useDebugValue:UJ,useDeferredValue:function(e){var t=$d();return ta===null?t.memoizedState=e:BTe(t,ta.memoizedState,e)},useTransition:function(){var e=XU(mR)[0],t=$d().memoizedState;return[e,t]},useMutableSource:CTe,useSyncExternalStore:TTe,useId:jTe,unstable_isNewReconciler:!1};function Dh(e,t){if(e&&e.defaultProps){t=Xs({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function UW(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Xs({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var cL={isMounted:function(e){return(e=e._reactInternals)?P_(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Nl(),i=sv(e),s=kg(r,i);s.payload=t,n!=null&&(s.callback=n),t=rv(e,s,i),t!==null&&(ep(t,e,i,r),U6(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Nl(),i=sv(e),s=kg(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=rv(e,s,i),t!==null&&(ep(t,e,i,r),U6(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Nl(),r=sv(e),i=kg(n,r);i.tag=2,t!=null&&(i.callback=t),t=rv(e,i,r),t!==null&&(ep(t,e,r,n),U6(t,e,r))}};function zhe(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!uR(n,r)||!uR(i,s):!0}function HTe(e,t,n){var r=!1,i=Cv,s=t.contextType;return typeof s=="object"&&s!==null?s=Md(s):(i=kc(t)?zw:Ju.current,r=t.contextTypes,s=(r=r!=null)?XS(e,i):Cv),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=cL,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Vhe(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&cL.enqueueReplaceState(t,t.state,null)}function zW(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},PJ(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Md(s):(s=kc(t)?zw:Ju.current,i.context=XS(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(UW(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&cL.enqueueReplaceState(i,i.state,null),xM(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function eC(e,t){try{var n="",r=t;do n+=Fet(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function QU(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function VW(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var unt=typeof WeakMap=="function"?WeakMap:Map;function qTe(e,t,n){n=kg(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){CM||(CM=!0,ZW=r),VW(e,t)},n}function WTe(e,t,n){n=kg(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){VW(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){VW(e,t),typeof r!="function"&&(iv===null?iv=new Set([this]):iv.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Hhe(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new unt;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=_nt.bind(null,e,t,n),t.then(e,e))}function qhe(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Whe(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=kg(-1,1),t.tag=2,rv(n,t,1))),n.lanes|=1),e)}var lnt=vy.ReactCurrentOwner,_c=!1;function wl(e,t,n,r){t.child=e===null?wTe(t,null,n,r):JS(t,e.child,n,r)}function Ghe(e,t,n,r,i){n=n.render;var s=t.ref;return cS(t,i),r=LJ(e,t,n,r,s,i),n=BJ(),e!==null&&!_c?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gg(e,t,i)):($s&&n&&TJ(t),t.flags|=1,wl(e,t,r,i),t.child)}function Yhe(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!KJ(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,GTe(e,t,s,r,i)):(e=G6(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:uR,n(o,r)&&e.ref===t.ref)return Gg(e,t,i)}return t.flags|=1,e=ov(s,r),e.ref=t.ref,e.return=t,t.child=e}function GTe(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(uR(s,r)&&e.ref===t.ref)if(_c=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(_c=!0);else return t.lanes=e.lanes,Gg(e,t,i)}return HW(e,t,n,r,i)}function YTe(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ds(q2,df),df|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ds(q2,df),df|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ds(q2,df),df|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ds(q2,df),df|=r;return wl(e,t,i,n),t.child}function KTe(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function HW(e,t,n,r,i){var s=kc(n)?zw:Ju.current;return s=XS(t,s),cS(t,i),n=LJ(e,t,n,r,s,i),r=BJ(),e!==null&&!_c?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gg(e,t,i)):($s&&r&&TJ(t),t.flags|=1,wl(e,t,n,i),t.child)}function Khe(e,t,n,r,i){if(kc(n)){var s=!0;mM(t)}else s=!1;if(cS(t,i),t.stateNode===null)H6(e,t),HTe(t,n,r),zW(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Md(l):(l=kc(n)?zw:Ju.current,l=XS(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Vhe(t,o,r,l),m1=!1;var d=t.memoizedState;o.state=d,xM(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Ic.current||m1?(typeof c=="function"&&(UW(t,n,c,r),u=t.memoizedState),(a=m1||zhe(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ETe(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Dh(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Md(u):(u=kc(n)?zw:Ju.current,u=XS(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&Vhe(t,o,r,u),m1=!1,d=t.memoizedState,o.state=d,xM(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Ic.current||m1?(typeof h=="function"&&(UW(t,n,h,r),p=t.memoizedState),(l=m1||zhe(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return qW(e,t,n,r,s,i)}function qW(e,t,n,r,i,s){KTe(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Ohe(t,n,!1),Gg(e,t,s);r=t.stateNode,lnt.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=JS(t,e.child,null,s),t.child=JS(t,null,a,s)):wl(e,t,a,s),t.memoizedState=r.state,i&&Ohe(t,n,!0),t.child}function XTe(e){var t=e.stateNode;t.pendingContext?Phe(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Phe(e,t.context,!1),OJ(e,t.containerInfo)}function Xhe(e,t,n,r,i){return QS(),DJ(i),t.flags|=256,wl(e,t,n,r),t.child}var WW={dehydrated:null,treeContext:null,retryLane:0};function GW(e){return{baseLanes:e,cachePool:null,transitions:null}}function QTe(e,t,n){var r=t.pendingProps,i=Ws.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ds(Ws,i&1),e===null)return BW(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=hL(o,r,0,null),e=Dw(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=GW(n),t.memoizedState=WW,e):zJ(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return cnt(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=ov(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ov(a,s):(s=Dw(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?GW(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=WW,r}return s=e.child,e=s.sibling,r=ov(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function zJ(e,t){return t=hL({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function XO(e,t,n,r){return r!==null&&DJ(r),JS(t,e.child,null,n),e=zJ(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function cnt(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=QU(Error(kt(422))),XO(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=hL({mode:"visible",children:r.children},i,0,null),s=Dw(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&JS(t,e.child,null,o),t.child.memoizedState=GW(o),t.memoizedState=WW,s);if(!(t.mode&1))return XO(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(kt(419)),r=QU(s,r,void 0),XO(e,t,o,r)}if(a=(o&e.childLanes)!==0,_c||a){if(r=$a,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Wg(e,i),ep(r,e,i,-1))}return YJ(),r=QU(Error(kt(421))),XO(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Ent.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,bf=nv(i.nextSibling),Af=t,$s=!0,Oh=null,e!==null&&(xd[wd++]=mg,xd[wd++]=gg,xd[wd++]=Vw,mg=e.id,gg=e.overflow,Vw=t),t=zJ(t,r.children),t.flags|=4096,t)}function Qhe(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),jW(e.return,t,n)}function JU(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function JTe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wl(e,t,r.children,n),r=Ws.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qhe(e,n,t);else if(e.tag===19)Qhe(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ds(Ws,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&wM(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),JU(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&wM(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}JU(t,!0,n,null,s);break;case"together":JU(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function H6(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gg(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),qw|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(kt(153));if(t.child!==null){for(e=t.child,n=ov(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ov(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function fnt(e,t,n){switch(t.tag){case 3:XTe(t),QS();break;case 5:STe(t);break;case 1:kc(t.type)&&mM(t);break;case 4:OJ(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ds(vM,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ds(Ws,Ws.current&1),t.flags|=128,null):n&t.child.childLanes?QTe(e,t,n):(ds(Ws,Ws.current&1),e=Gg(e,t,n),e!==null?e.sibling:null);ds(Ws,Ws.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return JTe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ds(Ws,Ws.current),r)break;return null;case 22:case 23:return t.lanes=0,YTe(e,t,n)}return Gg(e,t,n)}var ZTe,YW,eAe,tAe;ZTe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};YW=function(){};eAe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,uw(Tm.current);var s=null;switch(n){case"input":i=gW(e,i),r=gW(e,r),s=[];break;case"select":i=Xs({},i,{value:void 0}),r=Xs({},r,{value:void 0}),s=[];break;case"textarea":i=bW(e,i),r=bW(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=hM)}wW(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(tR.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(tR.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&vs("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};tAe=function(e,t,n,r){n!==r&&(t.flags|=4)};function hD(e,t){if(!$s)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Su(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function dnt(e,t,n){var r=t.pendingProps;switch(AJ(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Su(t),null;case 1:return kc(t.type)&&pM(),Su(t),null;case 3:return r=t.stateNode,ZS(),Cs(Ic),Cs(Ju),MJ(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(YO(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Oh!==null&&(nG(Oh),Oh=null))),YW(e,t),Su(t),null;case 5:FJ(t);var i=uw(hR.current);if(n=t.type,e!==null&&t.stateNode!=null)eAe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(kt(166));return Su(t),null}if(e=uw(Tm.current),YO(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[sm]=t,r[fR]=s,e=(t.mode&1)!==0,n){case"dialog":vs("cancel",r),vs("close",r);break;case"iframe":case"object":case"embed":vs("load",r);break;case"video":case"audio":for(i=0;i<cI.length;i++)vs(cI[i],r);break;case"source":vs("error",r);break;case"img":case"image":case"link":vs("error",r),vs("load",r);break;case"details":vs("toggle",r);break;case"input":ohe(r,s),vs("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},vs("invalid",r);break;case"textarea":uhe(r,s),vs("invalid",r)}wW(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&GO(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&GO(r.textContent,a,e),i=["children",""+a]):tR.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&vs("scroll",r)}switch(n){case"input":BO(r),ahe(r,s,!0);break;case"textarea":BO(r),lhe(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=hM)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ICe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[sm]=t,e[fR]=r,ZTe(e,t,!1,!1),t.stateNode=e;e:{switch(o=_W(n,r),n){case"dialog":vs("cancel",e),vs("close",e),i=r;break;case"iframe":case"object":case"embed":vs("load",e),i=r;break;case"video":case"audio":for(i=0;i<cI.length;i++)vs(cI[i],e);i=r;break;case"source":vs("error",e),i=r;break;case"img":case"image":case"link":vs("error",e),vs("load",e),i=r;break;case"details":vs("toggle",e),i=r;break;case"input":ohe(e,r),i=gW(e,r),vs("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Xs({},r,{value:void 0}),vs("invalid",e);break;case"textarea":uhe(e,r),i=bW(e,r),vs("invalid",e);break;default:i=r}wW(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?NCe(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&kCe(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&nR(e,u):typeof u=="number"&&nR(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(tR.hasOwnProperty(s)?u!=null&&s==="onScroll"&&vs("scroll",e):u!=null&&dJ(e,s,u,o))}switch(n){case"input":BO(e),ahe(e,r,!1);break;case"textarea":BO(e),lhe(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Sv(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?oS(e,!!r.multiple,s,!1):r.defaultValue!=null&&oS(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=hM)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Su(t),null;case 6:if(e&&t.stateNode!=null)tAe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(kt(166));if(n=uw(hR.current),uw(Tm.current),YO(t)){if(r=t.stateNode,n=t.memoizedProps,r[sm]=t,(s=r.nodeValue!==n)&&(e=Af,e!==null))switch(e.tag){case 3:GO(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&GO(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[sm]=t,t.stateNode=r}return Su(t),null;case 13:if(Cs(Ws),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($s&&bf!==null&&t.mode&1&&!(t.flags&128))bTe(),QS(),t.flags|=98560,s=!1;else if(s=YO(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(kt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(kt(317));s[sm]=t}else QS(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Su(t),s=!1}else Oh!==null&&(nG(Oh),Oh=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ws.current&1?la===0&&(la=3):YJ())),t.updateQueue!==null&&(t.flags|=4),Su(t),null);case 4:return ZS(),YW(e,t),e===null&&lR(t.stateNode.containerInfo),Su(t),null;case 10:return RJ(t.type._context),Su(t),null;case 17:return kc(t.type)&&pM(),Su(t),null;case 19:if(Cs(Ws),s=t.memoizedState,s===null)return Su(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)hD(s,!1);else{if(la!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=wM(e),o!==null){for(t.flags|=128,hD(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ds(Ws,Ws.current&1|2),t.child}e=e.sibling}s.tail!==null&&So()>tC&&(t.flags|=128,r=!0,hD(s,!1),t.lanes=4194304)}else{if(!r)if(e=wM(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),hD(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!$s)return Su(t),null}else 2*So()-s.renderingStartTime>tC&&n!==1073741824&&(t.flags|=128,r=!0,hD(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=So(),t.sibling=null,n=Ws.current,ds(Ws,r?n&1|2:n&1),t):(Su(t),null);case 22:case 23:return GJ(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?df&1073741824&&(Su(t),t.subtreeFlags&6&&(t.flags|=8192)):Su(t),null;case 24:return null;case 25:return null}throw Error(kt(156,t.tag))}function hnt(e,t){switch(AJ(t),t.tag){case 1:return kc(t.type)&&pM(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ZS(),Cs(Ic),Cs(Ju),MJ(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return FJ(t),null;case 13:if(Cs(Ws),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(kt(340));QS()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Cs(Ws),null;case 4:return ZS(),null;case 10:return RJ(t.type._context),null;case 22:case 23:return GJ(),null;case 24:return null;default:return null}}var QO=!1,Lu=!1,pnt=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function H2(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){so(e,t,r)}else n.current=null}function KW(e,t,n){try{n()}catch(r){so(e,t,r)}}var Jhe=!1;function mnt(e,t){if(NW=cM,e=oTe(),CJ(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(PW={focusedElem:e,selectionRange:n},cM=!1,Kt=t;Kt!==null;)if(t=Kt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Kt=e;else for(;Kt!==null;){t=Kt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Dh(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(kt(163))}}catch(_){so(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Kt=e;break}Kt=t.return}return p=Jhe,Jhe=!1,p}function ok(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&KW(t,n,s)}i=i.next}while(i!==r)}}function fL(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function XW(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function nAe(e){var t=e.alternate;t!==null&&(e.alternate=null,nAe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[sm],delete t[fR],delete t[MW],delete t[Qtt],delete t[Jtt])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rAe(e){return e.tag===5||e.tag===3||e.tag===4}function Zhe(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rAe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function QW(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=hM));else if(r!==4&&(e=e.child,e!==null))for(QW(e,t,n),e=e.sibling;e!==null;)QW(e,t,n),e=e.sibling}function JW(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(JW(e,t,n),e=e.sibling;e!==null;)JW(e,t,n),e=e.sibling}var Ja=null,kh=!1;function Zy(e,t,n){for(n=n.child;n!==null;)iAe(e,t,n),n=n.sibling}function iAe(e,t,n){if(Cm&&typeof Cm.onCommitFiberUnmount=="function")try{Cm.onCommitFiberUnmount(rL,n)}catch{}switch(n.tag){case 5:Lu||H2(n,t);case 6:var r=Ja,i=kh;Ja=null,Zy(e,t,n),Ja=r,kh=i,Ja!==null&&(kh?(e=Ja,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ja.removeChild(n.stateNode));break;case 18:Ja!==null&&(kh?(e=Ja,n=n.stateNode,e.nodeType===8?qU(e.parentNode,n):e.nodeType===1&&qU(e,n),oR(e)):qU(Ja,n.stateNode));break;case 4:r=Ja,i=kh,Ja=n.stateNode.containerInfo,kh=!0,Zy(e,t,n),Ja=r,kh=i;break;case 0:case 11:case 14:case 15:if(!Lu&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&KW(n,t,o),i=i.next}while(i!==r)}Zy(e,t,n);break;case 1:if(!Lu&&(H2(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){so(n,t,a)}Zy(e,t,n);break;case 21:Zy(e,t,n);break;case 22:n.mode&1?(Lu=(r=Lu)||n.memoizedState!==null,Zy(e,t,n),Lu=r):Zy(e,t,n);break;default:Zy(e,t,n)}}function epe(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new pnt),t.forEach(function(r){var i=Snt.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function yh(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ja=a.stateNode,kh=!1;break e;case 3:Ja=a.stateNode.containerInfo,kh=!0;break e;case 4:Ja=a.stateNode.containerInfo,kh=!0;break e}a=a.return}if(Ja===null)throw Error(kt(160));iAe(s,o,i),Ja=null,kh=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){so(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)sAe(t,e),t=t.sibling}function sAe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yh(t,e),Up(e),r&4){try{ok(3,e,e.return),fL(3,e)}catch(m){so(e,e.return,m)}try{ok(5,e,e.return)}catch(m){so(e,e.return,m)}}break;case 1:yh(t,e),Up(e),r&512&&n!==null&&H2(n,n.return);break;case 5:if(yh(t,e),Up(e),r&512&&n!==null&&H2(n,n.return),e.flags&32){var i=e.stateNode;try{nR(i,"")}catch(m){so(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&ACe(i,s),_W(a,o);var l=_W(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?NCe(i,f):c==="dangerouslySetInnerHTML"?kCe(i,f):c==="children"?nR(i,f):dJ(i,c,f,l)}switch(a){case"input":yW(i,s);break;case"textarea":DCe(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?oS(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?oS(i,!!s.multiple,s.defaultValue,!0):oS(i,!!s.multiple,s.multiple?[]:"",!1))}i[fR]=s}catch(m){so(e,e.return,m)}}break;case 6:if(yh(t,e),Up(e),r&4){if(e.stateNode===null)throw Error(kt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){so(e,e.return,m)}}break;case 3:if(yh(t,e),Up(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{oR(t.containerInfo)}catch(m){so(e,e.return,m)}break;case 4:yh(t,e),Up(e);break;case 13:yh(t,e),Up(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(qJ=So())),r&4&&epe(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Lu=(l=Lu)||c,yh(t,e),Lu=l):yh(t,e),Up(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(Kt=e,c=e.child;c!==null;){for(f=Kt=c;Kt!==null;){switch(d=Kt,h=d.child,d.tag){case 0:case 11:case 14:case 15:ok(4,d,d.return);break;case 1:H2(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){so(r,n,m)}}break;case 5:H2(d,d.return);break;case 22:if(d.memoizedState!==null){npe(f);continue}}h!==null?(h.return=d,Kt=h):npe(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=RCe("display",o))}catch(m){so(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){so(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:yh(t,e),Up(e),r&4&&epe(e);break;case 21:break;default:yh(t,e),Up(e)}}function Up(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(rAe(n)){var r=n;break e}n=n.return}throw Error(kt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(nR(i,""),r.flags&=-33);var s=Zhe(e);JW(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Zhe(e);QW(e,a,o);break;default:throw Error(kt(161))}}catch(u){so(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gnt(e,t,n){Kt=e,oAe(e)}function oAe(e,t,n){for(var r=(e.mode&1)!==0;Kt!==null;){var i=Kt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||QO;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Lu;a=QO;var l=Lu;if(QO=o,(Lu=u)&&!l)for(Kt=i;Kt!==null;)o=Kt,u=o.child,o.tag===22&&o.memoizedState!==null?rpe(i):u!==null?(u.return=o,Kt=u):rpe(i);for(;s!==null;)Kt=s,oAe(s),s=s.sibling;Kt=i,QO=a,Lu=l}tpe(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Kt=s):tpe(e)}}function tpe(e){for(;Kt!==null;){var t=Kt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Lu||fL(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Lu)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Dh(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Bhe(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Bhe(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&oR(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(kt(163))}Lu||t.flags&512&&XW(t)}catch(d){so(t,t.return,d)}}if(t===e){Kt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Kt=n;break}Kt=t.return}}function npe(e){for(;Kt!==null;){var t=Kt;if(t===e){Kt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Kt=n;break}Kt=t.return}}function rpe(e){for(;Kt!==null;){var t=Kt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{fL(4,t)}catch(u){so(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){so(t,i,u)}}var s=t.return;try{XW(t)}catch(u){so(t,s,u)}break;case 5:var o=t.return;try{XW(t)}catch(u){so(t,o,u)}}}catch(u){so(t,t.return,u)}if(t===e){Kt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Kt=a;break}Kt=t.return}}var ynt=Math.ceil,SM=vy.ReactCurrentDispatcher,VJ=vy.ReactCurrentOwner,Pd=vy.ReactCurrentBatchConfig,ci=0,$a=null,Vo=null,au=0,df=0,q2=hb(0),la=0,yR=null,qw=0,dL=0,HJ=0,ak=null,mc=null,qJ=0,tC=1/0,Q0=null,CM=!1,ZW=null,iv=null,JO=!1,$1=null,TM=0,uk=0,eG=null,q6=-1,W6=0;function Nl(){return ci&6?So():q6!==-1?q6:q6=So()}function sv(e){return e.mode&1?ci&2&&au!==0?au&-au:ent.transition!==null?(W6===0&&(W6=HCe()),W6):(e=qi,e!==0||(e=window.event,e=e===void 0?16:QCe(e.type)),e):1}function ep(e,t,n,r){if(50<uk)throw uk=0,eG=null,Error(kt(185));J3(e,n,r),(!(ci&2)||e!==$a)&&(e===$a&&(!(ci&2)&&(dL|=n),la===4&&T1(e,au)),Rc(e,r),n===1&&ci===0&&!(t.mode&1)&&(tC=So()+500,uL&&pb()))}function Rc(e,t){var n=e.callbackNode;ett(e,t);var r=lM(e,e===$a?au:0);if(r===0)n!==null&&dhe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&dhe(n),t===1)e.tag===0?Ztt(ipe.bind(null,e)):gTe(ipe.bind(null,e)),Ktt(function(){!(ci&6)&&pb()}),n=null;else{switch(qCe(r)){case 1:n=yJ;break;case 4:n=zCe;break;case 16:n=uM;break;case 536870912:n=VCe;break;default:n=uM}n=pAe(n,aAe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function aAe(e,t){if(q6=-1,W6=0,ci&6)throw Error(kt(327));var n=e.callbackNode;if(fS()&&e.callbackNode!==n)return null;var r=lM(e,e===$a?au:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=AM(e,r);else{t=r;var i=ci;ci|=2;var s=lAe();($a!==e||au!==t)&&(Q0=null,tC=So()+500,Aw(e,t));do try{xnt();break}catch(a){uAe(e,a)}while(!0);kJ(),SM.current=s,ci=i,Vo!==null?t=0:($a=null,au=0,t=la)}if(t!==0){if(t===2&&(i=AW(e),i!==0&&(r=i,t=tG(e,i))),t===1)throw n=yR,Aw(e,0),T1(e,r),Rc(e,So()),n;if(t===6)T1(e,r);else{if(i=e.current.alternate,!(r&30)&&!vnt(i)&&(t=AM(e,r),t===2&&(s=AW(e),s!==0&&(r=s,t=tG(e,s))),t===1))throw n=yR,Aw(e,0),T1(e,r),Rc(e,So()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(kt(345));case 2:Ix(e,mc,Q0);break;case 3:if(T1(e,r),(r&130023424)===r&&(t=qJ+500-So(),10<t)){if(lM(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Nl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=FW(Ix.bind(null,e,mc,Q0),t);break}Ix(e,mc,Q0);break;case 4:if(T1(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Zh(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=So()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ynt(r/1960))-r,10<r){e.timeoutHandle=FW(Ix.bind(null,e,mc,Q0),r);break}Ix(e,mc,Q0);break;case 5:Ix(e,mc,Q0);break;default:throw Error(kt(329))}}}return Rc(e,So()),e.callbackNode===n?aAe.bind(null,e):null}function tG(e,t){var n=ak;return e.current.memoizedState.isDehydrated&&(Aw(e,t).flags|=256),e=AM(e,t),e!==2&&(t=mc,mc=n,t!==null&&nG(t)),e}function nG(e){mc===null?mc=e:mc.push.apply(mc,e)}function vnt(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!cp(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function T1(e,t){for(t&=~HJ,t&=~dL,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Zh(t),r=1<<n;e[n]=-1,t&=~r}}function ipe(e){if(ci&6)throw Error(kt(327));fS();var t=lM(e,0);if(!(t&1))return Rc(e,So()),null;var n=AM(e,t);if(e.tag!==0&&n===2){var r=AW(e);r!==0&&(t=r,n=tG(e,r))}if(n===1)throw n=yR,Aw(e,0),T1(e,t),Rc(e,So()),n;if(n===6)throw Error(kt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ix(e,mc,Q0),Rc(e,So()),null}function WJ(e,t){var n=ci;ci|=1;try{return e(t)}finally{ci=n,ci===0&&(tC=So()+500,uL&&pb())}}function Ww(e){$1!==null&&$1.tag===0&&!(ci&6)&&fS();var t=ci;ci|=1;var n=Pd.transition,r=qi;try{if(Pd.transition=null,qi=1,e)return e()}finally{qi=r,Pd.transition=n,ci=t,!(ci&6)&&pb()}}function GJ(){df=q2.current,Cs(q2)}function Aw(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Ytt(n)),Vo!==null)for(n=Vo.return;n!==null;){var r=n;switch(AJ(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pM();break;case 3:ZS(),Cs(Ic),Cs(Ju),MJ();break;case 5:FJ(r);break;case 4:ZS();break;case 13:Cs(Ws);break;case 19:Cs(Ws);break;case 10:RJ(r.type._context);break;case 22:case 23:GJ()}n=n.return}if($a=e,Vo=e=ov(e.current,null),au=df=t,la=0,yR=null,HJ=dL=qw=0,mc=ak=null,aw!==null){for(t=0;t<aw.length;t++)if(n=aw[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}aw=null}return e}function uAe(e,t){do{var n=Vo;try{if(kJ(),z6.current=EM,_M){for(var r=Ks.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}_M=!1}if(Hw=0,Aa=ta=Ks=null,sk=!1,pR=0,VJ.current=null,n===null||n.return===null){la=1,yR=t,Vo=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=au,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=qhe(o);if(h!==null){h.flags&=-257,Whe(h,o,a,s,t),h.mode&1&&Hhe(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){Hhe(s,l,t),YJ();break e}u=Error(kt(426))}}else if($s&&a.mode&1){var g=qhe(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Whe(g,o,a,s,t),DJ(eC(u,a));break e}}s=u=eC(u,a),la!==4&&(la=2),ak===null?ak=[s]:ak.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=qTe(s,u,t);Lhe(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(iv===null||!iv.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var _=WTe(s,a,t);Lhe(s,_);break e}}s=s.return}while(s!==null)}fAe(n)}catch(w){t=w,Vo===n&&n!==null&&(Vo=n=n.return);continue}break}while(!0)}function lAe(){var e=SM.current;return SM.current=EM,e===null?EM:e}function YJ(){(la===0||la===3||la===2)&&(la=4),$a===null||!(qw&268435455)&&!(dL&268435455)||T1($a,au)}function AM(e,t){var n=ci;ci|=2;var r=lAe();($a!==e||au!==t)&&(Q0=null,Aw(e,t));do try{bnt();break}catch(i){uAe(e,i)}while(!0);if(kJ(),ci=n,SM.current=r,Vo!==null)throw Error(kt(261));return $a=null,au=0,la}function bnt(){for(;Vo!==null;)cAe(Vo)}function xnt(){for(;Vo!==null&&!qet();)cAe(Vo)}function cAe(e){var t=hAe(e.alternate,e,df);e.memoizedProps=e.pendingProps,t===null?fAe(e):Vo=t,VJ.current=null}function fAe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=hnt(n,t),n!==null){n.flags&=32767,Vo=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{la=6,Vo=null;return}}else if(n=dnt(n,t,df),n!==null){Vo=n;return}if(t=t.sibling,t!==null){Vo=t;return}Vo=t=e}while(t!==null);la===0&&(la=5)}function Ix(e,t,n){var r=qi,i=Pd.transition;try{Pd.transition=null,qi=1,wnt(e,t,n,r)}finally{Pd.transition=i,qi=r}return null}function wnt(e,t,n,r){do fS();while($1!==null);if(ci&6)throw Error(kt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(kt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(ttt(e,s),e===$a&&(Vo=$a=null,au=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||JO||(JO=!0,pAe(uM,function(){return fS(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Pd.transition,Pd.transition=null;var o=qi;qi=1;var a=ci;ci|=4,VJ.current=null,mnt(e,n),sAe(n,e),Utt(PW),cM=!!NW,PW=NW=null,e.current=n,gnt(n),Wet(),ci=a,qi=o,Pd.transition=s}else e.current=n;if(JO&&(JO=!1,$1=e,TM=i),s=e.pendingLanes,s===0&&(iv=null),Ket(n.stateNode),Rc(e,So()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(CM)throw CM=!1,e=ZW,ZW=null,e;return TM&1&&e.tag!==0&&fS(),s=e.pendingLanes,s&1?e===eG?uk++:(uk=0,eG=e):uk=0,pb(),null}function fS(){if($1!==null){var e=qCe(TM),t=Pd.transition,n=qi;try{if(Pd.transition=null,qi=16>e?16:e,$1===null)var r=!1;else{if(e=$1,$1=null,TM=0,ci&6)throw Error(kt(331));var i=ci;for(ci|=4,Kt=e.current;Kt!==null;){var s=Kt,o=s.child;if(Kt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Kt=l;Kt!==null;){var c=Kt;switch(c.tag){case 0:case 11:case 15:ok(8,c,s)}var f=c.child;if(f!==null)f.return=c,Kt=f;else for(;Kt!==null;){c=Kt;var d=c.sibling,h=c.return;if(nAe(c),c===l){Kt=null;break}if(d!==null){d.return=h,Kt=d;break}Kt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Kt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Kt=o;else e:for(;Kt!==null;){if(s=Kt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ok(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Kt=y;break e}Kt=s.return}}var v=e.current;for(Kt=v;Kt!==null;){o=Kt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Kt=b;else e:for(o=v;Kt!==null;){if(a=Kt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:fL(9,a)}}catch(w){so(a,a.return,w)}if(a===o){Kt=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,Kt=_;break e}Kt=a.return}}if(ci=i,pb(),Cm&&typeof Cm.onPostCommitFiberRoot=="function")try{Cm.onPostCommitFiberRoot(rL,e)}catch{}r=!0}return r}finally{qi=n,Pd.transition=t}}return!1}function spe(e,t,n){t=eC(n,t),t=qTe(e,t,1),e=rv(e,t,1),t=Nl(),e!==null&&(J3(e,1,t),Rc(e,t))}function so(e,t,n){if(e.tag===3)spe(e,e,n);else for(;t!==null;){if(t.tag===3){spe(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(iv===null||!iv.has(r))){e=eC(n,e),e=WTe(t,e,1),t=rv(t,e,1),e=Nl(),t!==null&&(J3(t,1,e),Rc(t,e));break}}t=t.return}}function _nt(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Nl(),e.pingedLanes|=e.suspendedLanes&n,$a===e&&(au&n)===n&&(la===4||la===3&&(au&130023424)===au&&500>So()-qJ?Aw(e,0):HJ|=n),Rc(e,t)}function dAe(e,t){t===0&&(e.mode&1?(t=zO,zO<<=1,!(zO&130023424)&&(zO=4194304)):t=1);var n=Nl();e=Wg(e,t),e!==null&&(J3(e,t,n),Rc(e,n))}function Ent(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),dAe(e,n)}function Snt(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(kt(314))}r!==null&&r.delete(t),dAe(e,n)}var hAe;hAe=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ic.current)_c=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return _c=!1,fnt(e,t,n);_c=!!(e.flags&131072)}else _c=!1,$s&&t.flags&1048576&&yTe(t,yM,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;H6(e,t),e=t.pendingProps;var i=XS(t,Ju.current);cS(t,n),i=LJ(null,t,r,e,i,n);var s=BJ();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,kc(r)?(s=!0,mM(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,PJ(t),i.updater=cL,t.stateNode=i,i._reactInternals=t,zW(t,r,e,n),t=qW(null,t,r,!0,s,n)):(t.tag=0,$s&&s&&TJ(t),wl(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(H6(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Tnt(r),e=Dh(r,e),i){case 0:t=HW(null,t,r,e,n);break e;case 1:t=Khe(null,t,r,e,n);break e;case 11:t=Ghe(null,t,r,e,n);break e;case 14:t=Yhe(null,t,r,Dh(r.type,e),n);break e}throw Error(kt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Dh(r,i),HW(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Dh(r,i),Khe(e,t,r,i,n);case 3:e:{if(XTe(t),e===null)throw Error(kt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,ETe(e,t),xM(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=eC(Error(kt(423)),t),t=Xhe(e,t,r,n,i);break e}else if(r!==i){i=eC(Error(kt(424)),t),t=Xhe(e,t,r,n,i);break e}else for(bf=nv(t.stateNode.containerInfo.firstChild),Af=t,$s=!0,Oh=null,n=wTe(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(QS(),r===i){t=Gg(e,t,n);break e}wl(e,t,r,n)}t=t.child}return t;case 5:return STe(t),e===null&&BW(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,OW(r,i)?o=null:s!==null&&OW(r,s)&&(t.flags|=32),KTe(e,t),wl(e,t,o,n),t.child;case 6:return e===null&&BW(t),null;case 13:return QTe(e,t,n);case 4:return OJ(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=JS(t,null,r,n):wl(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Dh(r,i),Ghe(e,t,r,i,n);case 7:return wl(e,t,t.pendingProps,n),t.child;case 8:return wl(e,t,t.pendingProps.children,n),t.child;case 12:return wl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ds(vM,r._currentValue),r._currentValue=o,s!==null)if(cp(s.value,o)){if(s.children===i.children&&!Ic.current){t=Gg(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=kg(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),jW(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(kt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),jW(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}wl(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,cS(t,n),i=Md(i),r=r(i),t.flags|=1,wl(e,t,r,n),t.child;case 14:return r=t.type,i=Dh(r,t.pendingProps),i=Dh(r.type,i),Yhe(e,t,r,i,n);case 15:return GTe(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Dh(r,i),H6(e,t),t.tag=1,kc(r)?(e=!0,mM(t)):e=!1,cS(t,n),HTe(t,r,i),zW(t,r,i,n),qW(null,t,r,!0,e,n);case 19:return JTe(e,t,n);case 22:return YTe(e,t,n)}throw Error(kt(156,t.tag))};function pAe(e,t){return UCe(e,t)}function Cnt(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dd(e,t,n,r){return new Cnt(e,t,n,r)}function KJ(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Tnt(e){if(typeof e=="function")return KJ(e)?1:0;if(e!=null){if(e=e.$$typeof,e===pJ)return 11;if(e===mJ)return 14}return 2}function ov(e,t){var n=e.alternate;return n===null?(n=Dd(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function G6(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")KJ(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case F2:return Dw(n.children,i,s,t);case hJ:o=8,i|=8;break;case dW:return e=Dd(12,n,t,i|2),e.elementType=dW,e.lanes=s,e;case hW:return e=Dd(13,n,t,i),e.elementType=hW,e.lanes=s,e;case pW:return e=Dd(19,n,t,i),e.elementType=pW,e.lanes=s,e;case SCe:return hL(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _Ce:o=10;break e;case ECe:o=9;break e;case pJ:o=11;break e;case mJ:o=14;break e;case p1:o=16,r=null;break e}throw Error(kt(130,e==null?e:typeof e,""))}return t=Dd(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Dw(e,t,n,r){return e=Dd(7,e,r,t),e.lanes=n,e}function hL(e,t,n,r){return e=Dd(22,e,r,t),e.elementType=SCe,e.lanes=n,e.stateNode={isHidden:!1},e}function ZU(e,t,n){return e=Dd(6,e,null,t),e.lanes=n,e}function ez(e,t,n){return t=Dd(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ant(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=OU(0),this.expirationTimes=OU(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=OU(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function XJ(e,t,n,r,i,s,o,a,u){return e=new Ant(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Dd(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},PJ(s),e}function Dnt(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O2,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function mAe(e){if(!e)return Cv;e=e._reactInternals;e:{if(P_(e)!==e||e.tag!==1)throw Error(kt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(kc(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(kt(171))}if(e.tag===1){var n=e.type;if(kc(n))return mTe(e,n,t)}return t}function gAe(e,t,n,r,i,s,o,a,u){return e=XJ(n,r,!0,e,i,s,o,a,u),e.context=mAe(null),n=e.current,r=Nl(),i=sv(n),s=kg(r,i),s.callback=t??null,rv(n,s,i),e.current.lanes=i,J3(e,i,r),Rc(e,r),e}function pL(e,t,n,r){var i=t.current,s=Nl(),o=sv(i);return n=mAe(n),t.context===null?t.context=n:t.pendingContext=n,t=kg(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=rv(i,t,o),e!==null&&(ep(e,i,o,s),U6(e,i,o)),o}function DM(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ope(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function QJ(e,t){ope(e,t),(e=e.alternate)&&ope(e,t)}var yAe=typeof reportError=="function"?reportError:function(e){console.error(e)};function JJ(e){this._internalRoot=e}mL.prototype.render=JJ.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(kt(409));pL(e,t,null,null)};mL.prototype.unmount=JJ.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ww(function(){pL(null,e,null,null)}),t[qg]=null}};function mL(e){this._internalRoot=e}mL.prototype.unstable_scheduleHydration=function(e){if(e){var t=YCe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<C1.length&&t!==0&&t<C1[n].priority;n++);C1.splice(n,0,e),n===0&&XCe(e)}};function ZJ(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function gL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ape(){}function Int(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=DM(o);s.call(l)}}var o=gAe(t,r,e,0,null,!1,!1,"",ape);return e._reactRootContainer=o,e[qg]=o.current,lR(e.nodeType===8?e.parentNode:e),Ww(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=DM(u);a.call(l)}}var u=XJ(e,0,!1,null,null,!1,!1,"",ape);return e._reactRootContainer=u,e[qg]=u.current,lR(e.nodeType===8?e.parentNode:e),Ww(function(){pL(t,u,n,r)}),u}function yL(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=DM(o);a.call(u)}}pL(t,o,e,i)}else o=Int(n,t,e,i,r);return DM(o)}WCe=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=lI(t.pendingLanes);n!==0&&(vJ(t,n|1),Rc(t,So()),!(ci&6)&&(tC=So()+500,pb()))}break;case 13:Ww(function(){var r=Wg(e,1);if(r!==null){var i=Nl();ep(r,e,1,i)}}),QJ(e,1)}};bJ=function(e){if(e.tag===13){var t=Wg(e,134217728);if(t!==null){var n=Nl();ep(t,e,134217728,n)}QJ(e,134217728)}};GCe=function(e){if(e.tag===13){var t=sv(e),n=Wg(e,t);if(n!==null){var r=Nl();ep(n,e,t,r)}QJ(e,t)}};YCe=function(){return qi};KCe=function(e,t){var n=qi;try{return qi=e,t()}finally{qi=n}};SW=function(e,t,n){switch(t){case"input":if(yW(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=aL(r);if(!i)throw Error(kt(90));TCe(r),yW(r,i)}}}break;case"textarea":DCe(e,n);break;case"select":t=n.value,t!=null&&oS(e,!!n.multiple,t,!1)}};FCe=WJ;MCe=Ww;var knt={usingClientEntryPoint:!1,Events:[eN,B2,aL,PCe,OCe,WJ]},pD={findFiberByHostInstance:ow,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Rnt={bundleType:pD.bundleType,version:pD.version,rendererPackageName:pD.rendererPackageName,rendererConfig:pD.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vy.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=BCe(e),e===null?null:e.stateNode},findFiberByHostInstance:pD.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ZO=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ZO.isDisabled&&ZO.supportsFiber)try{rL=ZO.inject(Rnt),Cm=ZO}catch{}}Kf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=knt;Kf.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ZJ(t))throw Error(kt(200));return Dnt(e,t,null,n)};Kf.createRoot=function(e,t){if(!ZJ(e))throw Error(kt(299));var n=!1,r="",i=yAe;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=XJ(e,1,!1,null,null,n,!1,r,i),e[qg]=t.current,lR(e.nodeType===8?e.parentNode:e),new JJ(t)};Kf.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(kt(188)):(e=Object.keys(e).join(","),Error(kt(268,e)));return e=BCe(t),e=e===null?null:e.stateNode,e};Kf.flushSync=function(e){return Ww(e)};Kf.hydrate=function(e,t,n){if(!gL(t))throw Error(kt(200));return yL(null,e,t,!0,n)};Kf.hydrateRoot=function(e,t,n){if(!ZJ(e))throw Error(kt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=yAe;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=gAe(t,null,e,1,n??null,i,!1,s,o),e[qg]=t.current,lR(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new mL(t)};Kf.render=function(e,t,n){if(!gL(t))throw Error(kt(200));return yL(null,e,t,!1,n)};Kf.unmountComponentAtNode=function(e){if(!gL(e))throw Error(kt(40));return e._reactRootContainer?(Ww(function(){yL(null,null,e,!1,function(){e._reactRootContainer=null,e[qg]=null})}),!0):!1};Kf.unstable_batchedUpdates=WJ;Kf.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!gL(n))throw Error(kt(200));if(e==null||e._reactInternals===void 0)throw Error(kt(38));return yL(e,t,n,!1,r)};Kf.version="18.3.1-next-f1338f8080-20240426";function vAe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vAe)}catch(e){console.error(e)}}vAe(),vCe.exports=Kf;var nN=vCe.exports;const fI=l0(nN);var upe=nN;cW.createRoot=upe.createRoot,cW.hydrateRoot=upe.hydrateRoot;var om=function(){return om=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},om.apply(this,arguments)};function rN(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function ug(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function lpe(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Nnt(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Wr(e){return this instanceof Wr?(this.v=e,this):new Wr(e)}function lw(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Wr?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function tz(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Wr(e[i](o)),done:!1}:s?s(o):o}:s}}function lk(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof lpe=="function"?lpe(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var Y6="right-scroll-bar-position",K6="width-before-scroll-bar",Pnt="with-scroll-bars-hidden",Ont="--removed-body-scroll-bar-size";function nz(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Fnt(e,t){var n=N.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var Mnt=typeof window<"u"?N.useLayoutEffect:N.useEffect,cpe=new WeakMap;function $nt(e,t){var n=Fnt(null,function(r){return e.forEach(function(i){return nz(i,r)})});return Mnt(function(){var r=cpe.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||nz(a,null)}),s.forEach(function(a){i.has(a)||nz(a,o)})}cpe.set(n,e)},[e]),n}function Lnt(e){return e}function Bnt(e,t){t===void 0&&(t=Lnt);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function jnt(e){e===void 0&&(e={});var t=Bnt(null);return t.options=om({async:!0,ssr:!1},e),t}var bAe=function(e){var t=e.sideCar,n=rN(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,om({},n))};bAe.isSideCarExport=!0;function Unt(e,t){return e.useMedium(t),bAe}var xAe=jnt(),rz=function(){},vL=N.forwardRef(function(e,t){var n=N.useRef(null),r=N.useState({onScrollCapture:rz,onWheelCapture:rz,onTouchMoveCapture:rz}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=rN(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=d,w=$nt([n,t]),S=om(om({},b),i);return N.createElement(N.Fragment,null,c&&N.createElement(_,{sideCar:xAe,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?N.cloneElement(N.Children.only(a),om(om({},S),{ref:w})):N.createElement(y,om({},S,{className:u,ref:w}),a))});vL.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};vL.classNames={fullWidth:K6,zeroRight:Y6};var znt=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Vnt(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=znt();return t&&e.setAttribute("nonce",t),e}function Hnt(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function qnt(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Wnt=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Vnt())&&(Hnt(t,n),qnt(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Gnt=function(){var e=Wnt();return function(t,n){N.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},wAe=function(){var e=Gnt(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},Ynt={left:0,top:0,right:0,gap:0},iz=function(e){return parseInt(e||"",10)||0},Knt=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[iz(n),iz(r),iz(i)]},Xnt=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Ynt;var t=Knt(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Qnt=wAe(),dS="data-scroll-locked",Jnt=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Pnt,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(dS,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Y6,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(K6,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Y6," .").concat(Y6,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(K6," .").concat(K6,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(dS,`] {
    `).concat(Ont,": ").concat(a,`px;
  }
`)},fpe=function(){var e=parseInt(document.body.getAttribute(dS)||"0",10);return isFinite(e)?e:0},Znt=function(){N.useEffect(function(){return document.body.setAttribute(dS,(fpe()+1).toString()),function(){var e=fpe()-1;e<=0?document.body.removeAttribute(dS):document.body.setAttribute(dS,e.toString())}},[])},ert=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;Znt();var s=N.useMemo(function(){return Xnt(i)},[i]);return N.createElement(Qnt,{styles:Jnt(s,!t,i,n?"":"!important")})},rG=!1;if(typeof window<"u")try{var e4=Object.defineProperty({},"passive",{get:function(){return rG=!0,!0}});window.addEventListener("test",e4,e4),window.removeEventListener("test",e4,e4)}catch{rG=!1}var jE=rG?{passive:!1}:!1,trt=function(e){return e.tagName==="TEXTAREA"},_Ae=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!trt(e)&&n[t]==="visible")},nrt=function(e){return _Ae(e,"overflowY")},rrt=function(e){return _Ae(e,"overflowX")},dpe=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=EAe(e,r);if(i){var s=SAe(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},irt=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},srt=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},EAe=function(e,t){return e==="v"?nrt(t):rrt(t)},SAe=function(e,t){return e==="v"?irt(t):srt(t)},ort=function(e,t){return e==="h"&&t==="rtl"?-1:1},art=function(e,t,n,r,i){var s=ort(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=SAe(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&EAe(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&Math.abs(f)<1||!c&&Math.abs(d)<1)&&(l=!0),l},t4=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},hpe=function(e){return[e.deltaX,e.deltaY]},ppe=function(e){return e&&"current"in e?e.current:e},urt=function(e,t){return e[0]===t[0]&&e[1]===t[1]},lrt=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},crt=0,UE=[];function frt(e){var t=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),i=N.useState(crt++)[0],s=N.useState(wAe)[0],o=N.useRef(e);N.useEffect(function(){o.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=Nnt([e.lockRef.current],(e.shards||[]).map(ppe),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=N.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=t4(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],_="deltaY"in m?m.deltaY:v[1]-y[1],w,S=m.target,T=Math.abs(b)>Math.abs(_)?"h":"v";if("touches"in m&&T==="h"&&S.type==="range")return!1;var A=dpe(T,S);if(!A)return!0;if(A?w=T:(w=T==="v"?"h":"v",A=dpe(T,S)),!A)return!1;if(!r.current&&"changedTouches"in m&&(b||_)&&(r.current=w),!w)return!0;var k=r.current||w;return art(k,g,m,k==="h"?b:_)},[]),u=N.useCallback(function(m){var g=m;if(!(!UE.length||UE[UE.length-1]!==s)){var y="deltaY"in g?hpe(g):t4(g),v=t.current.filter(function(w){return w.name===g.type&&(w.target===g.target||g.target===w.shadowParent)&&urt(w.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(ppe).filter(Boolean).filter(function(w){return w.contains(g.target)}),_=b.length>0?a(g,b[0]):!o.current.noIsolation;_&&g.cancelable&&g.preventDefault()}}},[]),l=N.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:drt(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(_){return _!==b})},1)},[]),c=N.useCallback(function(m){n.current=t4(m),r.current=void 0},[]),f=N.useCallback(function(m){l(m.type,hpe(m),m.target,a(m,e.lockRef.current))},[]),d=N.useCallback(function(m){l(m.type,t4(m),m.target,a(m,e.lockRef.current))},[]);N.useEffect(function(){return UE.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,jE),document.addEventListener("touchmove",u,jE),document.addEventListener("touchstart",c,jE),function(){UE=UE.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,jE),document.removeEventListener("touchmove",u,jE),document.removeEventListener("touchstart",c,jE)}},[]);var h=e.removeScrollBar,p=e.inert;return N.createElement(N.Fragment,null,p?N.createElement(s,{styles:lrt(i)}):null,h?N.createElement(ert,{gapMode:e.gapMode}):null)}function drt(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const hrt=Unt(xAe,frt);var nC=N.forwardRef(function(e,t){return N.createElement(vL,om({},e,{ref:t,sideCar:hrt}))});nC.classNames=vL.classNames;function us(e){return Object.keys(e)}function sz(e){return e&&typeof e=="object"&&!Array.isArray(e)}function eZ(e,t){const n={...e},r=t;return sz(e)&&sz(t)&&Object.keys(t).forEach(i=>{sz(r[i])&&i in e?n[i]=eZ(n[i],r[i]):n[i]=r[i]}),n}function prt(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function mrt(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function vR(e){const t=mrt(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function oz(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function CAe(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?oz(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?oz(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?oz(s):s}}return r}return n}const ze=CAe("rem",{shouldScale:!0}),IM=CAe("em");function mb(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function TAe(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function gb(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==N.Fragment:!1}function mu(e){const t=N.createContext(null);return[({children:i,value:s})=>E.jsx(t.Provider,{value:s,children:i}),()=>{const i=N.useContext(t);if(i===null)throw new Error(e);return i}]}function wT(e=null){const t=N.createContext(e);return[({children:i,value:s})=>E.jsx(t.Provider,{value:s,children:i}),()=>N.useContext(t)]}function kM(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function RM(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function grt(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function yrt(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function vrt(e,t,n){return RM(e,n)===RM(t,n)}function tZ({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=RM(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>vrt(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=yrt(l,u,r),f=grt(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const brt={app:100,modal:200,popover:300,overlay:400,max:9999};function _p(e){return brt[e]}const xrt=()=>{};function wrt(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||xrt:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function ur(e,t="size",n=!0){if(e!==void 0)return TAe(e)?n?ze(e):e:`var(--${t}-${e})`}function qo(e){return ur(e,"mantine-spacing")}function Zi(e){return e===void 0?"var(--mantine-radius-default)":ur(e,"mantine-radius")}function Pl(e){return ur(e,"mantine-font-size")}function AAe(e){return ur(e,"mantine-line-height",!1)}function nZ(e){if(e)return ur(e,"mantine-shadow",!1)}function yg(e,t){return n=>{e==null||e(n),t==null||t(n)}}function rZ(e,t){return e in t.breakpoints?vR(t.breakpoints[e]):vR(e)}function bR(e,t){const n=e.map(r=>({value:r,px:rZ(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function Hh(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function _rt(e,t,n){var r;return n?Array.from(((r=RM(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function Ert(){const[e,t]=N.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function vg(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function hS(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function A1(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function bL(e,t){const n=A1(e),r=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),N.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const mpe=["mousedown","touchstart"];function Srt(e,t,n){const r=N.useRef();return N.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||mpe).forEach(s=>document.addEventListener(s,i)),()=>{(t||mpe).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function Crt(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function Trt(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function Art(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=N.useState(n?t:Trt(e)),s=N.useRef();return N.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),Crt(s.current,o=>i(o.matches))},[e]),r}const O_=typeof document<"u"?N.useLayoutEffect:N.useEffect;function Um(e,t){const n=N.useRef(!1);N.useEffect(()=>()=>{n.current=!1},[]),N.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function DAe({opened:e,shouldReturnFocus:t=!0}){const n=N.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return Um(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function Drt(e,t="body > :not(script)"){const n=hS(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const Irt=/input|select|textarea|button|object/,IAe="a, input, select, textarea, button, object, [tabindex]";function krt(e){return e.style.display==="none"}function Rrt(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(krt(n))return!1;n=n.parentNode}return!0}function kAe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function iG(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(kAe(e));return(Irt.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&Rrt(e)}function RAe(e){const t=kAe(e);return(Number.isNaN(t)||t>=0)&&iG(e)}function Nrt(e){return Array.from(e.querySelectorAll(IAe)).filter(RAe)}function Prt(e,t){const n=Nrt(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function Ort(e=!0){const t=N.useRef(),n=N.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(IAe));o=a.find(RAe)||a.find(iG)||null,!o&&iG(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=N.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=Drt(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return N.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&Prt(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const Frt=e=>(e+1)%1e6;function Mrt(){const[,e]=N.useReducer(Frt,0);return e}const $rt=yi.useId||(()=>{});function Lrt(){const e=$rt();return e?`mantine-${e.replace(/:/g,"")}`:""}function ol(e){const t=Lrt(),[n,r]=N.useState(t);return O_(()=>{r(hS())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function NAe(e,t,n){N.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function iZ(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function PAe(...e){return t=>{e.forEach(n=>iZ(n,t))}}function Ro(...e){return N.useCallback(PAe(...e),e)}function OAe(e,t,n="ltr"){const r=N.useRef(null),i=N.useRef(!1),s=N.useRef(!1),o=N.useRef(0),[a,u]=N.useState(!1);return N.useEffect(()=>{i.current=!0},[]),N.useEffect(()=>{var v,b;const l=({x:_,y:w})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const S=r.current.getBoundingClientRect();if(S.width&&S.height){const T=vg((_-S.left)/S.width,0,1);e({x:n==="ltr"?T:1-T,y:vg((w-S.top)/S.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=_=>{d(),_.preventDefault(),m(_)},m=_=>l({x:_.clientX,y:_.clientY}),g=_=>{_.cancelable&&_.preventDefault(),d(),y(_)},y=_=>{_.cancelable&&_.preventDefault(),l({x:_.changedTouches[0].clientX,y:_.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Ba({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=N.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function xL(e,t){return Art("(prefers-reduced-motion: reduce)",e,t)}const Brt={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Df(e){const t=N.useRef(0),n=N.useRef(null),[r,i]=N.useState(Brt),s=N.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return N.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function jrt(e){const[t,{width:n,height:r}]=Df(e);return{ref:t,width:n,height:r}}function Urt(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function zrt(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function Vrt(e){return t=>zrt(Urt(e),t)}function Hrt(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{Vrt(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function sZ(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=N.useState(e),o=N.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=N.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=N.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function qrt(e,t,n={autoInvoke:!1}){const r=N.useRef(null),i=N.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=N.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return N.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function Wrt(e,t,n){const r=N.useRef(),i=N.useRef(null);return N.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function Grt(){const[e,t]=N.useState(!1);return N.useEffect(()=>t(!0),[]),e}function Yrt(e,t){const n=A1(e),r=N.useRef(),i=N.useRef(),s=N.useRef(!0),o=N.useRef(t),a=N.useRef(-1),u=()=>window.clearTimeout(a.current),l=N.useCallback((...d)=>{n(...d),r.current=d,i.current=d,s.current=!1},[n]),c=N.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[l]),f=N.useCallback((...d)=>{s.current?(l(...d),a.current=window.setTimeout(c,o.current)):r.current=d},[l,c]);return N.useEffect(()=>{o.current=t},[t]),[f,u]}function Krt(e,t){const[n,r]=N.useState(e),[i,s]=Yrt(r,t);return N.useEffect(()=>s,[]),[n,i]}function Xrt(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function Qrt(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});O_(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>Xrt(`${e}:${String(r)}`,i[0])}return[t,n]}var Jrt={};function FAe(){return typeof process<"u"&&Jrt?"production":"development"}function MAe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=MAe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ao(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=MAe(e))&&(r&&(r+=" "),r+=t);return r}const Zrt={};function eit(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Ao(t[r],i):t[r]=i})}),t}function wL({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||Zrt);return eit(s)}function NM({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const $Ae=N.createContext(null);function yb(){const e=N.useContext($Ae);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function tit(){return yb().cssVariablesResolver}function nit(){return yb().classNamesPrefix}function oZ(){return yb().getStyleNonce}function rit(){return yb().withStaticClasses}function iit(){return yb().headless}function sit(){var e;return(e=yb().stylesTransform)==null?void 0:e.sx}function oit(){var e;return(e=yb().stylesTransform)==null?void 0:e.styles}function ait(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function uit(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function lit(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function cit(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function aZ(e){return ait(e)?uit(e):e.startsWith("rgb")?lit(e):e.startsWith("hsl")?cit(e):{r:0,g:0,b:0,a:1}}function n4(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=aZ(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function xR(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function az(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function fit(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function dit(e){if(e.startsWith("oklch("))return(fit(e)||0)/100;const{r:t,g:n,b:r}=aZ(e),i=t/255,s=n/255,o=r/255,a=az(i),u=az(s),l=az(o);return .2126*a+.7152*u+.0722*l}function mD(e,t=.179){return e.startsWith("var(")?!1:dit(e)>t}function c0({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:mD(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:mD(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:mD(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][xR(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:mD(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:mD(e,t.luminanceThreshold),shade:s,variable:void 0}}function Ki(e,t){const n=c0({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function sG(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Ki(n.from,t),i=Ki(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Kp(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=aZ(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const zE=Kp,hit=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=c0({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${ze(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${ze(1)} solid transparent`}:{background:e,hover:n4(e,.1),color:a,border:`${ze(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${ze(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Kp(a,.1),hover:Kp(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${ze(1)} solid transparent`}}return{background:Kp(e,.1),hover:Kp(e,.12),color:e,border:`${ze(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${ze(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Kp(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${ze(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Kp(e,.05),color:e,border:`${ze(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${ze(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Kp(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${ze(1)} solid transparent`}}return{background:"transparent",hover:Kp(e,.12),color:e,border:`${ze(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${ze(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${ze(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${ze(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:n4(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${ze(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:n4(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${ze(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:n4(t.white,.01),color:e,border:`${ze(1)} solid transparent`}:n==="gradient"?{background:sG(r,t),hover:sG(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${ze(1)} solid var(--mantine-color-default-border)`}:{}},pit={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},gpe="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",uZ={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:pit,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:hit,autoContrast:!1,luminanceThreshold:.3,fontFamily:gpe,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:gpe,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:ze(34),lineHeight:"1.3"},h2:{fontSize:ze(26),lineHeight:"1.35"},h3:{fontSize:ze(22),lineHeight:"1.4"},h4:{fontSize:ze(18),lineHeight:"1.45"},h5:{fontSize:ze(16),lineHeight:"1.5"},h6:{fontSize:ze(14),lineHeight:"1.5"}}},fontSizes:{xs:ze(12),sm:ze(14),md:ze(16),lg:ze(18),xl:ze(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:ze(2),sm:ze(4),md:ze(8),lg:ze(16),xl:ze(32)},spacing:{xs:ze(10),sm:ze(12),md:ze(16),lg:ze(20),xl:ze(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), 0 ${ze(1)} ${ze(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(10)} ${ze(15)} ${ze(-5)}, rgba(0, 0, 0, 0.04) 0 ${ze(7)} ${ze(7)} ${ze(-5)}`,md:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(20)} ${ze(25)} ${ze(-5)}, rgba(0, 0, 0, 0.04) 0 ${ze(10)} ${ze(10)} ${ze(-5)}`,lg:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(28)} ${ze(23)} ${ze(-7)}, rgba(0, 0, 0, 0.04) 0 ${ze(12)} ${ze(12)} ${ze(-7)}`,xl:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(36)} ${ze(28)} ${ze(-7)}, rgba(0, 0, 0, 0.04) 0 ${ze(17)} ${ze(17)} ${ze(-7)}`},other:{},components:{}};function ype(e){return e==="auto"||e==="dark"||e==="light"}function mit({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return ype(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&ype(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const git="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",vpe="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function uz(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function bpe(e){if(!(e.primaryColor in e.colors))throw new Error(git);if(typeof e.primaryShade=="object"&&(!uz(e.primaryShade.dark)||!uz(e.primaryShade.light)))throw new Error(vpe);if(typeof e.primaryShade=="number"&&!uz(e.primaryShade))throw new Error(vpe)}function yit(e,t){var r;if(!t)return bpe(e),e;const n=eZ(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),bpe(n),n}const lZ=N.createContext(null),vit=()=>N.useContext(lZ)||uZ;function No(){const e=N.useContext(lZ);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function LAe({theme:e,children:t,inherit:n=!0}){const r=vit(),i=N.useMemo(()=>yit(n?r:uZ,e),[e,r,n]);return E.jsx(lZ.Provider,{value:i,children:t})}LAe.displayName="@mantine/core/MantineThemeProvider";function bit(){const e=No(),t=oZ(),n=us(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=vR(e.breakpoints[i]),a=s?`${o-.1}px`:IM(o-.1),u=s?`${o}px`:IM(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return E.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function lz(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function cz(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function xit(e,t){const n=lz(e.variables),r=n?cz(t,n):"",i=lz(e.dark),s=i?cz(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=lz(e.light),a=o?cz(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function vb({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&c0({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function xpe(e,t){return vb({color:e.colors[e.primaryColor][xR(e,t)],theme:e,autoContrast:null})}function r4({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=xR(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:zE(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:zE(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:zE(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=xR(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:zE(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:zE(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:zE(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function wit(e){return Array.isArray(e)?e:Array(10).fill(e)}function _it(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function VE(e,t,n){us(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const BAe=e=>{const t=xR(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:ze(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":xpe(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":xpe(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};VE(r.variables,e.breakpoints,"breakpoint"),VE(r.variables,e.spacing,"spacing"),VE(r.variables,e.fontSizes,"font-size"),VE(r.variables,e.lineHeights,"line-height"),VE(r.variables,e.shadows,"shadow"),VE(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),us(e.colors).forEach(s=>{const o=e.colors[s];if(_it(o)){Object.assign(r.light,r4({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,r4({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,r4({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,r4({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return us(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function Eit({theme:e,generator:t}){const n=BAe(e),r=t==null?void 0:t(e);return r?eZ(n,r):n}const fz=BAe(uZ);function Sit(e){const t={variables:{},light:{},dark:{}};return us(e.variables).forEach(n=>{fz.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),us(e.light).forEach(n=>{fz.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),us(e.dark).forEach(n=>{fz.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function Cit(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function jAe({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=No(),r=oZ(),i=tit(),s=Eit({theme:n,generator:i}),o=e===":root"&&t,a=o?Sit(s):s,u=xit(a,e);return u?E.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":Cit(e)}`}}):null}jAe.displayName="@mantine/CssVariables";function Tit(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function HE(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function Ait({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=N.useRef(),[s,o]=N.useState(()=>e.get(t)),a=r||s,u=N.useCallback(c=>{r||(HE(c,n),o(c),e.set(c))},[e.set,a,r]),l=N.useCallback(()=>{o(t),HE(t,n),e.clear()},[e.clear,t]);return N.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),O_(()=>{HE(e.get(t),n)},[]),N.useEffect(()=>{var f;if(r)return HE(r,n),()=>{};r===void 0&&HE(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&HE(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function Dit({respectReducedMotion:e,getRootElement:t}){O_(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}Tit();function UAe({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=mit(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=Ait({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return Dit({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),E.jsx($Ae.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:E.jsxs(LAe,{theme:e,children:[o&&E.jsx(jAe,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&E.jsx(bit,{}),t]})})}UAe.displayName="@mantine/core/MantineProvider";function iN({classNames:e,styles:t,props:n,stylesCtx:r}){const i=No();return{resolvedClassNames:wL({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:NM({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const Iit={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function kit({theme:e,options:t,unstyled:n}){return Ao((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||Iit[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function Rit({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return wL({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function wpe({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return wL({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function Nit({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function Pit({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function Oit({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function Fit({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=wL({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function Mit({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function $it({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Ao(kit({theme:e,options:t,unstyled:a||h}),Fit({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),Mit({options:t,classes:o,selector:r,unstyled:a}),wpe({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),wpe({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),Rit({selector:r,stylesCtx:f,options:t,props:c,theme:e}),Nit({rootSelector:l,selector:r,className:u}),Pit({selector:r,classes:o,unstyled:a||h}),d&&!h&&Oit({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function Lit({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return NM({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function oG({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...oG({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function Bit(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...mb(n[r])}}),t),{})}function jit({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=Bit([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function Uit({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&Lit({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&NM({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&NM({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...jit({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?oG({style:u,theme:e}):null,...oG({style:r==null?void 0:r.style,theme:e})}}function zit({props:e,stylesCtx:t,themeName:n}){var o;const r=No(),i=(o=oit())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function Gt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=No(),h=nit(),p=rit(),m=iit(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=zit({props:n,stylesCtx:r,themeName:g});return(b,_)=>({className:$it({theme:d,options:_,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([_==null?void 0:_.styles,l])}),style:Uit({theme:d,themeName:g,selector:b,options:_,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function _T(e,t){return typeof e=="boolean"?e:t.autoContrast}function Qe(e,t,n){var o;const r=No(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...mb(n)}}function dz(e){return us(e).reduce((t,n)=>e[n]!==void 0?`${t}${prt(n)}:${e[n]};`:t,"").trim()}function Vit({selector:e,styles:t,media:n,container:r}){const i=t?dz(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${dz(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${dz(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function F_(e){const t=oZ();return E.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:Vit(e)}})}function M_(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:_,c:w,opacity:S,ff:T,fz:A,fw:k,lts:I,ta:R,lh:F,fs:O,tt:L,td:H,w:U,miw:G,maw:Y,h:J,mih:$,mah:j,bgsz:W,bgp:B,bgr:q,bga:Z,pos:re,top:xe,left:pe,bottom:Te,right:ke,inset:it,display:Re,flex:ut,hiddenFrom:Ke,visibleFrom:Ct,lightHidden:gt,darkHidden:Ie,sx:Ve,...ft}=e;return{styleProps:mb({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:_,c:w,opacity:S,ff:T,fz:A,fw:k,lts:I,ta:R,lh:F,fs:O,tt:L,td:H,w:U,miw:G,maw:Y,h:J,mih:$,mah:j,bgsz:W,bgp:B,bgr:q,bga:Z,pos:re,top:xe,left:pe,bottom:Te,right:ke,inset:it,display:Re,flex:ut,hiddenFrom:Ke,visibleFrom:Ct,lightHidden:gt,darkHidden:Ie,sx:Ve}),rest:ft}}const Hit={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function cZ(e,t){const n=c0({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function qit(e,t){const n=c0({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:cZ(e,t)}function Wit(e,t){if(typeof e=="number")return ze(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${ze(n)}`;return r&&(s+=` ${r}`),wit.length>0&&(s+=` ${cZ(i.join(" "),t)}`),s.trim()}return e}const _pe={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function Git(e){return typeof e=="string"&&e in _pe?_pe[e]:e}const Yit=["h1","h2","h3","h4","h5","h6"];function Kit(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&Yit.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?ze(e):e}function Xit(e){return e}const Qit=["h1","h2","h3","h4","h5","h6"];function Jit(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&Qit.includes(e)?`var(--mantine-${e}-line-height)`:e}function Zit(e){return typeof e=="number"?ze(e):e}function est(e,t){if(typeof e=="number")return ze(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return ze(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const hz={color:cZ,textColor:qit,fontSize:Kit,spacing:est,identity:Xit,size:Zit,lineHeight:Jit,fontFamily:Git,border:Wit};function Epe(e){return e.replace("(min-width: ","").replace("em)","")}function tst({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(Epe(i))-Number(Epe(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function nst(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function rst(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function ist(e){return typeof e=="object"&&e!==null?us(e).filter(t=>t!=="base"):[]}function sst(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function zAe({styleProps:e,data:t,theme:n}){return tst(us(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=rst(e[i]);if(!nst(e[i]))return o.forEach(l=>{r.inlineStyles[l]=hz[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=ist(e[i]);return o.forEach(l=>{a&&(r.styles[l]=hz[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:hz[s.type](sst(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function sN(){return`__m__-${N.useId().replace(/:/g,"")}`}function fZ(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...fZ(r,t)}),{}):typeof e=="function"?e(t):e??{}}function VAe(e){return e.startsWith("data-")?e:`data-${e}`}function ost(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[VAe(n)]=e[n]),t},{})}function HAe(e){return e?typeof e=="string"?{[VAe(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...HAe(n)}),{}):ost(e):null}function aG(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...aG(r,t)}),{}):typeof e=="function"?e(t):e??{}}function ast({theme:e,style:t,vars:n,styleProps:r}){const i=aG(t,e),s=aG(n,e);return{...i,...s,...r}}const qAe=N.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var A;const m=No(),g=e||"div",{styleProps:y,rest:v}=M_(h),b=sit(),_=(A=b==null?void 0:b())==null?void 0:A(y.sx),w=sN(),S=zAe({styleProps:y,theme:m,data:Hit}),T={ref:p,style:ast({theme:m,style:t,vars:n,styleProps:S.inlineStyles}),className:Ao(r,_,{[w]:S.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":TAe(o)?void 0:o||void 0,size:d,...HAe(s),...v};return E.jsxs(E.Fragment,{children:[S.hasResponsiveStyles&&E.jsx(F_,{selector:`.${w}`,styles:S.styles,media:S.media}),typeof f=="function"?f(T):E.jsx(g,{...T})]})});qAe.displayName="@mantine/core/Box";const Fe=qAe;function WAe(e){return e}function wt(e){const t=N.forwardRef(e);return t.extend=WAe,t}function ya(e){const t=N.forwardRef(e);return t.extend=WAe,t}const ust=N.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function by(){return N.useContext(ust)}function lst(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function pz(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const gD=typeof window<"u"&&window.requestAnimationFrame;function cst({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=N.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=N.useState(r?{}:o),l=p=>{nN.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||lst(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}Um(()=>{typeof gD=="function"&&gD(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),gD(()=>{const p=pz(i);c({...f(p),height:p})})}:()=>{const p=pz(i);c({...f(p),willChange:"height",height:p}),gD(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=pz(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:PAe(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const fst={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},_L=wt((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=Qe("Collapse",fst,e),c=No(),f=xL(),h=(c.respectReducedMotion?f:!1)?0:i,p=cst({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?E.jsx(Fe,{...l,children:n}):null:E.jsx(Fe,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...fZ(o,c)},ref:t,...l}),children:n})});_L.displayName="@mantine/core/Collapse";const[dst,Yd]=mu("ScrollArea.Root component was not found in tree");function rC(e,t){const n=A1(t);O_(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const hst=N.forwardRef((e,t)=>{const{style:n,...r}=e,i=Yd(),[s,o]=N.useState(0),[a,u]=N.useState(0),l=!!(s&&a);return rC(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),rC(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?E.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),pst=N.forwardRef((e,t)=>{const n=Yd(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?E.jsx(hst,{...e,ref:t}):null}),mst={scrollHideDelay:1e3,type:"hover"},GAe=N.forwardRef((e,t)=>{const n=Qe("ScrollAreaRoot",mst,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=N.useState(null),[l,c]=N.useState(null),[f,d]=N.useState(null),[h,p]=N.useState(null),[m,g]=N.useState(null),[y,v]=N.useState(0),[b,_]=N.useState(0),[w,S]=N.useState(!1),[T,A]=N.useState(!1),k=Ro(t,I=>u(I));return E.jsx(dst,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:w,onScrollbarXEnabledChange:S,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:T,onScrollbarYEnabledChange:A,onCornerWidthChange:v,onCornerHeightChange:_},children:E.jsx(Fe,{...o,ref:k,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});GAe.displayName="@mantine/core/ScrollAreaRoot";function YAe(e,t){const n=e/t;return Number.isNaN(n)?0:n}function EL(e){const t=YAe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function KAe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function gst(e,[t,n]){return Math.min(n,Math.max(t,e))}function Spe(e,t,n="ltr"){const r=EL(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=gst(e,u);return KAe([0,o],[0,a])(l)}function yst(e,t,n,r="ltr"){const i=EL(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return KAe([u,l],f)(e)}function XAe(e,t){return e>0&&e<t}function PM(e){return e?parseInt(e,10):0}function Iw(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[vst,QAe]=mu("ScrollAreaScrollbar was not found in tree"),JAe=N.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=Yd(),[h,p]=N.useState(null),m=Ro(t,A=>p(A)),g=N.useRef(null),y=N.useRef(""),{viewport:v}=d,b=n.content-n.viewport,_=A1(l),w=A1(a),S=bL(c,10),T=A=>{if(g.current){const k=A.clientX-g.current.left,I=A.clientY-g.current.top;u({x:k,y:I})}};return N.useEffect(()=>{const A=k=>{const I=k.target;(h==null?void 0:h.contains(I))&&_(k,b)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[v,h,b,_]),N.useEffect(w,[n,w]),rC(h,S),rC(d.content,S),E.jsx(vst,{value:{scrollbar:h,hasThumb:r,onThumbChange:A1(i),onThumbPointerUp:A1(s),onThumbPositionChange:w,onThumbPointerDown:A1(o)},children:E.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:Iw(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",T(A))}),onPointerMove:Iw(e.onPointerMove,T),onPointerUp:Iw(e.onPointerUp,A=>{const k=A.target;k.hasPointerCapture(A.pointerId)&&k.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),bst=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Yd(),[a,u]=N.useState(),l=N.useRef(null),c=Ro(t,l,o.onScrollbarXChange);return N.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),E.jsx(JAe,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${EL(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),XAe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:PM(a.paddingLeft),paddingEnd:PM(a.paddingRight)}})}})}),xst=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Yd(),[a,u]=N.useState(),l=N.useRef(null),c=Ro(t,l,o.onScrollbarYChange);return N.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),E.jsx(JAe,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${EL(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),XAe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:PM(a.paddingTop),paddingEnd:PM(a.paddingBottom)}})}})}),dZ=N.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=by(),s=Yd(),o=N.useRef(null),a=N.useRef(0),[u,l]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=YAe(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>yst(h,a.current,u,p);return n==="horizontal"?E.jsx(bst,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=Spe(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?E.jsx(xst,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=Spe(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),ZAe=N.forwardRef((e,t)=>{const n=Yd(),{forceMount:r,...i}=e,[s,o]=N.useState(!1),a=e.orientation==="horizontal",u=bL(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return rC(n.viewport,u),rC(n.content,u),r||s?E.jsx(dZ,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),wst=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Yd(),[s,o]=N.useState(!1);return N.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?E.jsx(ZAe,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),_st=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Yd(),s=e.orientation==="horizontal",[o,a]=N.useState("hidden"),u=bL(()=>a("idle"),100);return N.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),N.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?E.jsx(dZ,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Iw(e.onPointerEnter,()=>a("interacting")),onPointerLeave:Iw(e.onPointerLeave,()=>a("idle"))}):null}),Cpe=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Yd(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return N.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?E.jsx(wst,{...r,ref:t,forceMount:n}):i.type==="scroll"?E.jsx(_st,{...r,ref:t,forceMount:n}):i.type==="auto"?E.jsx(ZAe,{...r,ref:t,forceMount:n}):i.type==="always"?E.jsx(dZ,{...r,ref:t}):null});function Est(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const Sst=N.forwardRef((e,t)=>{const{style:n,...r}=e,i=Yd(),s=QAe(),{onThumbPositionChange:o}=s,a=Ro(t,c=>s.onThumbChange(c)),u=N.useRef(),l=bL(()=>{u.current&&(u.current(),u.current=void 0)},100);return N.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=Est(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),E.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:Iw(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:Iw(e.onPointerUp,s.onThumbPointerUp)})}),Tpe=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=QAe();return n||i.hasThumb?E.jsx(Sst,{ref:t,...r}):null}),eDe=N.forwardRef(({children:e,style:t,...n},r)=>{const i=Yd(),s=Ro(r,i.onViewportChange);return E.jsx(Fe,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:E.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});eDe.displayName="@mantine/core/ScrollAreaViewport";var hZ={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const tDe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},Cst=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":ze(t)}}),Yg=wt((e,t)=>{const n=Qe("ScrollArea",tDe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,_]=N.useState(!1),w=Gt({name:"ScrollArea",props:n,classes:hZ,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Cst});return E.jsxs(GAe,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...w("root"),...v,children:[E.jsx(eDe,{...d,...w("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:S=>{var T;(T=d==null?void 0:d.onScroll)==null||T.call(d,S),p==null||p({x:S.currentTarget.scrollLeft,y:S.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&E.jsx(Cpe,{...w("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),children:E.jsx(Tpe,{...w("thumb")})}),(y==="xy"||y==="y")&&E.jsx(Cpe,{...w("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),children:E.jsx(Tpe,{...w("thumb")})}),E.jsx(pst,{...w("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});Yg.displayName="@mantine/core/ScrollArea";const pZ=wt((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=Qe("ScrollAreaAutosize",tDe,e);return E.jsx(Fe,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:E.jsx(Fe,{style:{display:"flex",flexDirection:"column",flex:1},children:E.jsx(Yg,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});Yg.classes=hZ;pZ.displayName="@mantine/core/ScrollAreaAutosize";pZ.classes=hZ;Yg.Autosize=pZ;var nDe={root:"m_87cf2631"};const Tst={__staticSelector:"UnstyledButton"},Ff=ya((e,t)=>{const n=Qe("UnstyledButton",Tst,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=Gt({name:s,props:n,classes:nDe,className:r,style:l,classNames:a,styles:u,unstyled:o});return E.jsx(Fe,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});Ff.classes=nDe;Ff.displayName="@mantine/core/UnstyledButton";var rDe={root:"m_515a97f8"};const Ast={},mZ=wt((e,t)=>{const n=Qe("VisuallyHidden",Ast,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=Gt({name:"VisuallyHidden",classes:rDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return E.jsx(Fe,{component:"span",ref:t,...c("root"),...l})});mZ.classes=rDe;mZ.displayName="@mantine/core/VisuallyHidden";var iDe={root:"m_1b7284a3"};const Dst={},Ist=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Zi(t),"--paper-shadow":nZ(n)}}),ET=ya((e,t)=>{const n=Qe("Paper",Dst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=Gt({name:"Paper",props:n,classes:iDe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Ist});return E.jsx(Fe,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});ET.classes=iDe;ET.displayName="@mantine/core/Paper";function ST(e){return sDe(e)?(e.nodeName||"").toLowerCase():"#document"}function Nc(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function xy(e){var t;return(t=(sDe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function sDe(e){return e instanceof Node||e instanceof Nc(e).Node}function Ls(e){return e instanceof Element||e instanceof Nc(e).Element}function Mf(e){return e instanceof HTMLElement||e instanceof Nc(e).HTMLElement}function uG(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Nc(e).ShadowRoot}function oN(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Ld(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function kst(e){return["table","td","th"].includes(ST(e))}function gZ(e){const t=yZ(),n=Ld(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Rst(e){let t=Kg(e);for(;Mf(t)&&!Tv(t);){if(gZ(t))return t;t=Kg(t)}return null}function yZ(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Tv(e){return["html","body","#document"].includes(ST(e))}function Ld(e){return Nc(e).getComputedStyle(e)}function SL(e){return Ls(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Kg(e){if(ST(e)==="html")return e;const t=e.assignedSlot||e.parentNode||uG(e)&&e.host||xy(e);return uG(t)?t.host:t}function oDe(e){const t=Kg(e);return Tv(t)?e.ownerDocument?e.ownerDocument.body:e.body:Mf(t)&&oN(t)?t:oDe(t)}function Rg(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=oDe(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Nc(i);return s?t.concat(o,o.visualViewport||[],oN(i)?i:[],o.frameElement&&n?Rg(o.frameElement):[]):t.concat(i,Rg(i,[],n))}function Ape(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function wR(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&uG(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function aDe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function uDe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function Nst(e){return Fst()?!1:!Dpe()&&e.width===0&&e.height===0||Dpe()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Pst(){return/apple/i.test(navigator.vendor)}function Dpe(){const e=/android/i;return e.test(aDe())||e.test(uDe())}function Ost(){return aDe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Fst(){return uDe().includes("jsdom/")}function lG(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function Mst(e){return"nativeEvent"in e}function $st(e){return e.matches("html,body")}function cw(e){return(e==null?void 0:e.ownerDocument)||document}function mz(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function b2(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Lst="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Bst(e){return Mf(e)&&e.matches(Lst)}const xf=Math.min,Bu=Math.max,OM=Math.round,i4=Math.floor,Av=e=>({x:e,y:e}),jst={left:"right",right:"left",bottom:"top",top:"bottom"},Ust={start:"end",end:"start"};function cG(e,t,n){return Bu(e,xf(t,n))}function Xg(e,t){return typeof e=="function"?e(t):e}function fp(e){return e.split("-")[0]}function CT(e){return e.split("-")[1]}function vZ(e){return e==="x"?"y":"x"}function bZ(e){return e==="y"?"height":"width"}function $_(e){return["top","bottom"].includes(fp(e))?"y":"x"}function xZ(e){return vZ($_(e))}function zst(e,t,n){n===void 0&&(n=!1);const r=CT(e),i=xZ(e),s=bZ(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=FM(o)),[o,FM(o)]}function Vst(e){const t=FM(e);return[fG(e),t,fG(t)]}function fG(e){return e.replace(/start|end/g,t=>Ust[t])}function Hst(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function qst(e,t,n,r){const i=CT(e);let s=Hst(fp(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(fG)))),s}function FM(e){return e.replace(/left|right|bottom|top/g,t=>jst[t])}function Wst(e){return{top:0,right:0,bottom:0,left:0,...e}}function wZ(e){return typeof e!="number"?Wst(e):{top:e,right:e,bottom:e,left:e}}function iC(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Ipe(e,t,n){let{reference:r,floating:i}=e;const s=$_(t),o=xZ(t),a=bZ(o),u=fp(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(CT(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const Gst=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=Ipe(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:_,reset:w}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],..._}},w&&p<=50&&(p++,typeof w=="object"&&(w.placement&&(d=w.placement),w.rects&&(l=w.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):w.rects),{x:c,y:f}=Ipe(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function _Z(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=Xg(t,e),p=wZ(h),g=a[d?f==="floating"?"reference":"floating":f],y=iC(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),_=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},w=iC(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-w.top+p.top)/_.y,bottom:(w.bottom-y.bottom+p.bottom)/_.y,left:(y.left-w.left+p.left)/_.x,right:(w.right-y.right+p.right)/_.x}}const Yst=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=Xg(e,t)||{};if(l==null)return{};const f=wZ(c),d={x:n,y:r},h=xZ(i),p=bZ(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",_=s.reference[p]+s.reference[h]-d[h]-s.floating[p],w=d[h]-s.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let T=S?S[b]:0;(!T||!await(o.isElement==null?void 0:o.isElement(S)))&&(T=a.floating[b]||s.floating[p]);const A=_/2-w/2,k=T/2-m[p]/2-1,I=xf(f[y],k),R=xf(f[v],k),F=I,O=T-m[p]-R,L=T/2-m[p]/2+A,H=cG(F,L,O),U=!u.arrow&&CT(i)!=null&&L!==H&&s.reference[p]/2-(L<F?I:R)-m[p]/2<0,G=U?L<F?L-F:L-O:0;return{[h]:d[h]+G,data:{[h]:H,centerOffset:L-H-G,...U&&{alignmentOffset:G}},reset:U}}}),Kst=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Xg(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=fp(i),v=fp(a)===a,b=await(u.isRTL==null?void 0:u.isRTL(l.floating)),_=d||(v||!m?[FM(a)]:Vst(a));!d&&p!=="none"&&_.push(...qst(a,m,p,b));const w=[a,..._],S=await _Z(t,g),T=[];let A=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&T.push(S[y]),f){const F=zst(i,o,b);T.push(S[F[0]],S[F[1]])}if(A=[...A,{placement:i,overflows:T}],!T.every(F=>F<=0)){var k,I;const F=(((k=s.flip)==null?void 0:k.index)||0)+1,O=w[F];if(O)return{data:{index:F,overflows:A},reset:{placement:O}};let L=(I=A.filter(H=>H.overflows[0]<=0).sort((H,U)=>H.overflows[1]-U.overflows[1])[0])==null?void 0:I.placement;if(!L)switch(h){case"bestFit":{var R;const H=(R=A.map(U=>[U.placement,U.overflows.filter(G=>G>0).reduce((G,Y)=>G+Y,0)]).sort((U,G)=>U[1]-G[1])[0])==null?void 0:R[0];H&&(L=H);break}case"initialPlacement":L=a;break}if(i!==L)return{reset:{placement:L}}}return{}}}};function lDe(e){const t=xf(...e.map(s=>s.left)),n=xf(...e.map(s=>s.top)),r=Bu(...e.map(s=>s.right)),i=Bu(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function Xst(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>iC(lDe(i)))}const Qst=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=Xg(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=Xst(c),d=iC(lDe(c)),h=wZ(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if($_(n)==="y"){const I=f[0],R=f[f.length-1],F=fp(n)==="top",O=I.top,L=R.bottom,H=F?I.left:R.left,U=F?I.right:R.right,G=U-H,Y=L-O;return{top:O,bottom:L,left:H,right:U,width:G,height:Y,x:H,y:O}}const g=fp(n)==="left",y=Bu(...f.map(I=>I.right)),v=xf(...f.map(I=>I.left)),b=f.filter(I=>g?I.left===v:I.right===y),_=b[0].top,w=b[b.length-1].bottom,S=v,T=y,A=T-S,k=w-_;return{top:_,bottom:w,left:S,right:T,width:A,height:k,x:S,y:_}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function Jst(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=fp(n),a=CT(n),u=$_(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=Xg(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const Zst=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await Jst(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},eot=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=Xg(e,t),l={x:n,y:r},c=await _Z(t,u),f=$_(fp(i)),d=vZ(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=cG(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=cG(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},tot=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=Xg(e,t),c={x:n,y:r},f=$_(i),d=vZ(f);let h=c[d],p=c[f];const m=Xg(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",_=s.reference[d]-s.floating[b]+g.mainAxis,w=s.reference[d]+s.reference[b]-g.mainAxis;h<_?h=_:h>w&&(h=w)}if(l){var y,v;const b=d==="y"?"width":"height",_=["top","left"].includes(fp(i)),w=s.reference[f]-s.floating[b]+(_&&((y=o.offset)==null?void 0:y[f])||0)+(_?0:g.crossAxis),S=s.reference[f]+s.reference[b]+(_?0:((v=o.offset)==null?void 0:v[f])||0)-(_?g.crossAxis:0);p<w?p=w:p>S&&(p=S)}return{[d]:h,[f]:p}}}},not=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=Xg(e,t),u=await _Z(t,a),l=fp(n),c=CT(n),f=$_(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=xf(h-u[p],g),b=xf(d-u[m],y),_=!t.middlewareData.shift;let w=v,S=b;if(f?S=c||_?xf(b,y):y:w=c||_?xf(v,g):g,_&&!c){const A=Bu(u.left,0),k=Bu(u.right,0),I=Bu(u.top,0),R=Bu(u.bottom,0);f?S=d-2*(A!==0||k!==0?A+k:Bu(u.left,u.right)):w=h-2*(I!==0||R!==0?I+R:Bu(u.top,u.bottom))}await o({...t,availableWidth:S,availableHeight:w});const T=await i.getDimensions(s.floating);return d!==T.width||h!==T.height?{reset:{rects:!0}}:{}}}};function cDe(e){const t=Ld(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Mf(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=OM(n)!==s||OM(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function EZ(e){return Ls(e)?e:e.contextElement}function pS(e){const t=EZ(e);if(!Mf(t))return Av(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=cDe(t);let o=(s?OM(n.width):n.width)/r,a=(s?OM(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const rot=Av(0);function fDe(e){const t=Nc(e);return!yZ()||!t.visualViewport?rot:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function iot(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Nc(e)?!1:t}function Gw(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=EZ(e);let o=Av(1);t&&(r?Ls(r)&&(o=pS(r)):o=pS(e));const a=iot(s,n,r)?fDe(s):Av(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Nc(s),h=r&&Ls(r)?Nc(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=pS(m),y=m.getBoundingClientRect(),v=Ld(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,_=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=_,p=Nc(m),m=p.frameElement}}return iC({width:c,height:f,x:u,y:l})}const sot=[":popover-open",":modal"];function SZ(e){return sot.some(t=>{try{return e.matches(t)}catch{return!1}})}function oot(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=xy(r),a=t?SZ(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=Av(1);const c=Av(0),f=Mf(r);if((f||!f&&!s)&&((ST(r)!=="body"||oN(o))&&(u=SL(r)),Mf(r))){const d=Gw(r);l=pS(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function aot(e){return Array.from(e.getClientRects())}function dDe(e){return Gw(xy(e)).left+SL(e).scrollLeft}function uot(e){const t=xy(e),n=SL(e),r=e.ownerDocument.body,i=Bu(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Bu(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+dDe(e);const a=-n.scrollTop;return Ld(r).direction==="rtl"&&(o+=Bu(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function lot(e,t){const n=Nc(e),r=xy(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=yZ();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function cot(e,t){const n=Gw(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Mf(e)?pS(e):Av(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function kpe(e,t,n){let r;if(t==="viewport")r=lot(e,n);else if(t==="document")r=uot(xy(e));else if(Ls(t))r=cot(t,n);else{const i=fDe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return iC(r)}function hDe(e,t){const n=Kg(e);return n===t||!Ls(n)||Tv(n)?!1:Ld(n).position==="fixed"||hDe(n,t)}function fot(e,t){const n=t.get(e);if(n)return n;let r=Rg(e,[],!1).filter(a=>Ls(a)&&ST(a)!=="body"),i=null;const s=Ld(e).position==="fixed";let o=s?Kg(e):e;for(;Ls(o)&&!Tv(o);){const a=Ld(o),u=gZ(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||oN(o)&&!u&&hDe(e,o))?r=r.filter(c=>c!==o):i=a,o=Kg(o)}return t.set(e,r),r}function dot(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?SZ(t)?[]:fot(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=kpe(t,c,i);return l.top=Bu(f.top,l.top),l.right=xf(f.right,l.right),l.bottom=xf(f.bottom,l.bottom),l.left=Bu(f.left,l.left),l},kpe(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function hot(e){const{width:t,height:n}=cDe(e);return{width:t,height:n}}function pot(e,t,n){const r=Mf(t),i=xy(t),s=n==="fixed",o=Gw(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=Av(0);if(r||!r&&!s)if((ST(t)!=="body"||oN(i))&&(a=SL(t)),r){const f=Gw(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=dDe(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function gz(e){return Ld(e).position==="static"}function Rpe(e,t){return!Mf(e)||Ld(e).position==="fixed"?null:t?t(e):e.offsetParent}function pDe(e,t){const n=Nc(e);if(SZ(e))return n;if(!Mf(e)){let i=Kg(e);for(;i&&!Tv(i);){if(Ls(i)&&!gz(i))return i;i=Kg(i)}return n}let r=Rpe(e,t);for(;r&&kst(r)&&gz(r);)r=Rpe(r,t);return r&&Tv(r)&&gz(r)&&!gZ(r)?n:r||Rst(e)||n}const mot=async function(e){const t=this.getOffsetParent||pDe,n=this.getDimensions,r=await n(e.floating);return{reference:pot(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function got(e){return Ld(e).direction==="rtl"}const yot={convertOffsetParentRelativeRectToViewportRelativeRect:oot,getDocumentElement:xy,getClippingRect:dot,getOffsetParent:pDe,getElementRects:mot,getClientRects:aot,getDimensions:hot,getScale:pS,isElement:Ls,isRTL:got};function vot(e,t){let n=null,r;const i=xy(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=i4(c),p=i4(i.clientWidth-(l+f)),m=i4(i.clientHeight-(c+d)),g=i4(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:Bu(0,xf(1,u))||1};let b=!0;function _(w){const S=w[0].intersectionRatio;if(S!==u){if(!b)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(_,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(_,v)}n.observe(e)}return o(!0),s}function bot(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=EZ(e),c=i||s?[...l?Rg(l):[],...Rg(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?vot(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?Gw(e):null;u&&g();function g(){const y=Gw(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const xot=Zst,wot=eot,_ot=Kst,Eot=not,Npe=Yst,Sot=Qst,Cot=tot,Tot=(e,t,n)=>{const r=new Map,i={platform:yot,...n},s={...i.platform,_c:r};return Gst(e,t,{...i,platform:s})};var X6=typeof document<"u"?N.useLayoutEffect:N.useEffect;function MM(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!MM(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!MM(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function mDe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ppe(e,t){const n=mDe(e);return Math.round(t*n)/n}function Ope(e){const t=N.useRef(e);return X6(()=>{t.current=e}),t}function Aot(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=N.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=N.useState(r);MM(d,r)||h(r);const[p,m]=N.useState(null),[g,y]=N.useState(null),v=N.useCallback(G=>{G!==S.current&&(S.current=G,m(G))},[]),b=N.useCallback(G=>{G!==T.current&&(T.current=G,y(G))},[]),_=s||p,w=o||g,S=N.useRef(null),T=N.useRef(null),A=N.useRef(c),k=u!=null,I=Ope(u),R=Ope(i),F=N.useCallback(()=>{if(!S.current||!T.current)return;const G={placement:t,strategy:n,middleware:d};R.current&&(G.platform=R.current),Tot(S.current,T.current,G).then(Y=>{const J={...Y,isPositioned:!0};O.current&&!MM(A.current,J)&&(A.current=J,nN.flushSync(()=>{f(J)}))})},[d,t,n,R]);X6(()=>{l===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(G=>({...G,isPositioned:!1})))},[l]);const O=N.useRef(!1);X6(()=>(O.current=!0,()=>{O.current=!1}),[]),X6(()=>{if(_&&(S.current=_),w&&(T.current=w),_&&w){if(I.current)return I.current(_,w,F);F()}},[_,w,F,I,k]);const L=N.useMemo(()=>({reference:S,floating:T,setReference:v,setFloating:b}),[v,b]),H=N.useMemo(()=>({reference:_,floating:w}),[_,w]),U=N.useMemo(()=>{const G={position:n,left:0,top:0};if(!H.floating)return G;const Y=Ppe(H.floating,c.x),J=Ppe(H.floating,c.y);return a?{...G,transform:"translate("+Y+"px, "+J+"px)",...mDe(H.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Y,top:J}},[n,a,H.floating,c.x,c.y]);return N.useMemo(()=>({...c,update:F,refs:L,elements:H,floatingStyles:U}),[c,F,L,H,U])}const Dot=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Npe({element:r.current,padding:i}).fn(n):{}:r?Npe({element:r,padding:i}).fn(n):{}}}},gDe=(e,t)=>({...xot(e),options:[e,t]}),CZ=(e,t)=>({...wot(e),options:[e,t]}),Fpe=(e,t)=>({...Cot(e),options:[e,t]}),dG=(e,t)=>({..._ot(e),options:[e,t]}),Iot=(e,t)=>({...Eot(e),options:[e,t]}),hG=(e,t)=>({...Sot(e),options:[e,t]}),yDe=(e,t)=>({...Dot(e),options:[e,t]}),vDe={...iM},kot=vDe.useInsertionEffect,Rot=kot||(e=>e());function D1(e){const t=N.useRef(()=>{});return Rot(()=>{t.current=e}),N.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Am=typeof document<"u"?N.useLayoutEffect:N.useEffect;let Mpe=!1,Not=0;const $pe=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Not++;function Pot(){const[e,t]=N.useState(()=>Mpe?$pe():void 0);return Am(()=>{e==null&&t($pe())},[]),N.useEffect(()=>{Mpe=!0},[]),e}const Oot=vDe.useId,bDe=Oot||Pot;function Fot(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const Mot=N.createContext(null),$ot=N.createContext(null),TZ=()=>{var e;return((e=N.useContext(Mot))==null?void 0:e.id)||null},AZ=()=>N.useContext($ot);function DZ(e){return"data-floating-ui-"+e}function Lpe(e){const t=N.useRef(e);return Am(()=>{t.current=e}),t}const Bpe=DZ("safe-polygon");function Q6(e,t,n){return n&&!lG(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function Lot(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=AZ(),m=TZ(),g=Lpe(c),y=Lpe(l),v=N.useRef(),b=N.useRef(-1),_=N.useRef(),w=N.useRef(-1),S=N.useRef(!0),T=N.useRef(!1),A=N.useRef(()=>{}),k=N.useCallback(()=>{var O;const L=(O=i.current.openEvent)==null?void 0:O.type;return(L==null?void 0:L.includes("mouse"))&&L!=="mousedown"},[i]);N.useEffect(()=>{if(!u)return;function O(L){let{open:H}=L;H||(clearTimeout(b.current),clearTimeout(w.current),S.current=!0)}return s.on("openchange",O),()=>{s.off("openchange",O)}},[u,s]),N.useEffect(()=>{if(!u||!g.current||!n)return;function O(H){k()&&r(!1,H,"hover")}const L=cw(a).documentElement;return L.addEventListener("mouseleave",O),()=>{L.removeEventListener("mouseleave",O)}},[a,n,r,u,g,k]);const I=N.useCallback(function(O,L,H){L===void 0&&(L=!0),H===void 0&&(H="hover");const U=Q6(y.current,"close",v.current);U&&!_.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,O,H),U)):L&&(clearTimeout(b.current),r(!1,O,H))},[y,r]),R=D1(()=>{A.current(),_.current=void 0}),F=D1(()=>{if(T.current){const O=cw(a).body;O.style.pointerEvents="",O.removeAttribute(Bpe),T.current=!1}});return N.useEffect(()=>{if(!u)return;function O(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function L(G){if(clearTimeout(b.current),S.current=!1,f&&!lG(v.current)||d>0&&!Q6(y.current,"open"))return;const Y=Q6(y.current,"open",v.current);Y?b.current=window.setTimeout(()=>{r(!0,G,"hover")},Y):r(!0,G,"hover")}function H(G){if(O())return;A.current();const Y=cw(a);if(clearTimeout(w.current),g.current&&i.current.floatingContext){n||clearTimeout(b.current),_.current=g.current({...i.current.floatingContext,tree:p,x:G.clientX,y:G.clientY,onClose(){F(),R(),I(G,!0,"safe-polygon")}});const $=_.current;Y.addEventListener("mousemove",$),A.current=()=>{Y.removeEventListener("mousemove",$)};return}(v.current==="touch"?!wR(a,G.relatedTarget):!0)&&I(G)}function U(G){O()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:G.clientX,y:G.clientY,onClose(){F(),R(),I(G)}})(G))}if(Ls(o)){const G=o;return n&&G.addEventListener("mouseleave",U),a==null||a.addEventListener("mouseleave",U),h&&G.addEventListener("mousemove",L,{once:!0}),G.addEventListener("mouseenter",L),G.addEventListener("mouseleave",H),()=>{n&&G.removeEventListener("mouseleave",U),a==null||a.removeEventListener("mouseleave",U),h&&G.removeEventListener("mousemove",L),G.removeEventListener("mouseenter",L),G.removeEventListener("mouseleave",H)}}},[o,a,u,e,f,d,h,I,R,F,r,n,p,y,g,i]),Am(()=>{var O;if(u&&n&&(O=g.current)!=null&&O.__options.blockPointerEvents&&k()){const H=cw(a).body;if(H.setAttribute(Bpe,""),H.style.pointerEvents="none",T.current=!0,Ls(o)&&a){var L;const U=o,G=p==null||(L=p.nodesRef.current.find(Y=>Y.id===m))==null||(L=L.context)==null?void 0:L.elements.floating;return G&&(G.style.pointerEvents=""),U.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{U.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,k]),Am(()=>{n||(v.current=void 0,R(),F())},[n,R,F]),N.useEffect(()=>()=>{R(),clearTimeout(b.current),clearTimeout(w.current),F()},[u,o,R,F]),N.useMemo(()=>{if(!u)return{};function O(L){v.current=L.pointerType}return{reference:{onPointerDown:O,onPointerEnter:O,onMouseMove(L){function H(){S.current||r(!0,L.nativeEvent,"hover")}f&&!lG(v.current)||n||d===0||(clearTimeout(w.current),v.current==="touch"?H():w.current=window.setTimeout(H,d))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave(L){I(L.nativeEvent,!1)}}}},[u,f,n,d,r,I])}const pG=()=>{},xDe=N.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:pG,setState:pG,isInstantPhase:!1}),wDe=()=>N.useContext(xDe);function Bot(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=N.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=N.useRef(null),a=N.useCallback(u=>{s({currentId:u})},[]);return Am(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),N.createElement(xDe.Provider,{value:N.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function jot(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=wDe(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return Am(()=>{u&&(f({delay:{open:1,close:Q6(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),Am(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),Am(()=>{l===pG||!n||l(o)},[n,l,o]),a}function yz(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const Uot={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},zot={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},jpe=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function Vot(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=AZ(),v=D1(typeof c=="function"?c:()=>!1),b=typeof c=="function"?v:c,_=N.useRef(!1),w=N.useRef(!1),{escapeKey:S,outsidePress:T}=jpe(m),{escapeKey:A,outsidePress:k}=jpe(g),I=D1(L=>{var H;if(!n||!u||!l||L.key!=="Escape")return;const U=(H=a.current.floatingContext)==null?void 0:H.nodeId,G=y?yz(y.nodesRef.current,U):[];if(!S&&(L.stopPropagation(),G.length>0)){let Y=!0;if(G.forEach(J=>{var $;if(($=J.context)!=null&&$.open&&!J.context.dataRef.current.__escapeKeyBubbles){Y=!1;return}}),!Y)return}r(!1,Mst(L)?L.nativeEvent:L,"escape-key")}),R=D1(L=>{var H;const U=()=>{var G;I(L),(G=b2(L))==null||G.removeEventListener("keydown",U)};(H=b2(L))==null||H.addEventListener("keydown",U)}),F=D1(L=>{var H;const U=_.current;_.current=!1;const G=w.current;if(w.current=!1,f==="click"&&G||U||typeof b=="function"&&!b(L))return;const Y=b2(L),J="["+DZ("inert")+"]",$=cw(o).querySelectorAll(J);let j=Ls(Y)?Y:null;for(;j&&!Tv(j);){const Z=Kg(j);if(Tv(Z)||!Ls(Z))break;j=Z}if($.length&&Ls(Y)&&!$st(Y)&&!wR(Y,o)&&Array.from($).every(Z=>!wR(j,Z)))return;if(Mf(Y)&&o){const Z=Y.clientWidth>0&&Y.scrollWidth>Y.clientWidth,re=Y.clientHeight>0&&Y.scrollHeight>Y.clientHeight;let xe=re&&L.offsetX>Y.clientWidth;if(re&&Ld(Y).direction==="rtl"&&(xe=L.offsetX<=Y.offsetWidth-Y.clientWidth),xe||Z&&L.offsetY>Y.clientHeight)return}const W=(H=a.current.floatingContext)==null?void 0:H.nodeId,B=y&&yz(y.nodesRef.current,W).some(Z=>{var re;return mz(L,(re=Z.context)==null?void 0:re.elements.floating)});if(mz(L,o)||mz(L,s)||B)return;const q=y?yz(y.nodesRef.current,W):[];if(q.length>0){let Z=!0;if(q.forEach(re=>{var xe;if((xe=re.context)!=null&&xe.open&&!re.context.dataRef.current.__outsidePressBubbles){Z=!1;return}}),!Z)return}r(!1,L,"outside-press")}),O=D1(L=>{var H;const U=()=>{var G;F(L),(G=b2(L))==null||G.removeEventListener(f,U)};(H=b2(L))==null||H.addEventListener(f,U)});return N.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=S,a.current.__outsidePressBubbles=T;function L(G){r(!1,G,"ancestor-scroll")}const H=cw(o);l&&H.addEventListener("keydown",A?R:I,A),b&&H.addEventListener(f,k?O:F,k);let U=[];return p&&(Ls(s)&&(U=Rg(s)),Ls(o)&&(U=U.concat(Rg(o))),!Ls(i)&&i&&i.contextElement&&(U=U.concat(Rg(i.contextElement)))),U=U.filter(G=>{var Y;return G!==((Y=H.defaultView)==null?void 0:Y.visualViewport)}),U.forEach(G=>{G.addEventListener("scroll",L,{passive:!0})}),()=>{l&&H.removeEventListener("keydown",A?R:I,A),b&&H.removeEventListener(f,k?O:F,k),U.forEach(G=>{G.removeEventListener("scroll",L)})}},[a,o,s,i,l,b,f,n,r,p,u,S,T,I,A,R,F,k,O]),N.useEffect(()=>{_.current=!1},[b,f]),N.useMemo(()=>u?{reference:{onKeyDown:I,[Uot[h]]:L=>{d&&r(!1,L.nativeEvent,"reference-press")}},floating:{onKeyDown:I,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[zot[f]]:()=>{_.current=!0}}}:{},[u,d,f,h,r,I])}function Hot(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=bDe(),s=N.useRef({}),[o]=N.useState(()=>Fot()),a=TZ()!=null,[u,l]=N.useState(r.reference),c=D1((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=N.useMemo(()=>({setPositionReference:l}),[]),d=N.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return N.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function IZ(e){e===void 0&&(e={});const{nodeId:t}=e,n=Hot({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=N.useState(null),[a,u]=N.useState(null),c=(i==null?void 0:i.reference)||s,f=N.useRef(null),d=AZ();Am(()=>{c&&(f.current=c)},[c]);const h=Aot({...e,elements:{...i,...a&&{reference:a}}}),p=N.useCallback(b=>{const _=Ls(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(_),h.refs.setReference(_)},[h.refs]),m=N.useCallback(b=>{(Ls(b)||b===null)&&(f.current=b,o(b)),(Ls(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!Ls(b))&&h.refs.setReference(b)},[h.refs]),g=N.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=N.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=N.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return Am(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(_=>_.id===t);b&&(b.context=v)}),N.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function qot(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=N.useRef(!1),c=N.useRef(),f=N.useRef(!0);return N.useEffect(()=>{if(!a)return;const d=Nc(o);function h(){!n&&Mf(o)&&o===Ape(cw(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),N.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),N.useEffect(()=>()=>{clearTimeout(c.current)},[]),N.useMemo(()=>a?{reference:{onPointerDown(d){Nst(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=b2(d.nativeEvent);if(u&&Ls(h))try{if(Pst()&&Ost())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!Bst(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=Ls(h)&&h.hasAttribute(DZ("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=Ape(o?o.ownerDocument:document);!h&&g===o||wR((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||wR(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const Upe="active",zpe="selected";function vz(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Upe]:o,[zpe]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Upe,zpe].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function Wot(e){e===void 0&&(e=[]);const t=e,n=N.useCallback(s=>vz(s,e,"reference"),t),r=N.useCallback(s=>vz(s,e,"floating"),t),i=N.useCallback(s=>vz(s,e,"item"),e.map(s=>s==null?void 0:s.item));return N.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const Got=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Yot(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=Got.get(o))!=null?n:o,u=bDe(),c=TZ()!=null;return N.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function _De(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Vpe(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Hpe(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const Kot={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Xot({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:ze(t),height:ze(t),transform:"rotate(45deg)",position:"absolute",[Kot[u]]:ze(r)},f=ze(-t/2);return u==="left"?{...c,...Vpe(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...Vpe(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...Hpe(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...Hpe(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const kZ=N.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=by();return s?E.jsx("div",{...l,ref:c,style:{...u,...Xot({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});kZ.displayName="@mantine/core/FloatingArrow";const[Qot,EDe]=mu("Popover component was not found in the tree");function CL({children:e,active:t=!0,refProp:n="ref"}){const r=Ort(t),i=Ro(r,e==null?void 0:e.ref);return gb(e)?N.cloneElement(e,{[n]:i}):e}function SDe(e){return E.jsx(mZ,{tabIndex:-1,"data-autofocus":!0,...e})}CL.displayName="@mantine/core/FocusTrap";SDe.displayName="@mantine/core/FocusTrapInitialFocus";CL.InitialFocus=SDe;function Jot(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const Zot={},CDe=N.forwardRef((e,t)=>{const{children:n,target:r,...i}=Qe("Portal",Zot,e),[s,o]=N.useState(!1),a=N.useRef(null);return O_(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:Jot(i),iZ(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:nN.createPortal(E.jsx(E.Fragment,{children:n}),a.current)});CDe.displayName="@mantine/core/Portal";function TT({withinPortal:e=!0,children:t,...n}){return e?E.jsx(CDe,{...n,children:t}):E.jsx(E.Fragment,{children:t})}TT.displayName="@mantine/core/OptionalPortal";const yD=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${ze(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),s4={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${ze(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${ze(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${ze(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${ze(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${ze(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${ze(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${ze(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${ze(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...yD("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...yD("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...yD("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...yD("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...yD("top"),common:{transformOrigin:"top right"}}},qpe={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function eat({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in s4?{transitionProperty:s4[e].transitionProperty,...i,...s4[e].common,...s4[e][qpe[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[qpe[t]]}}function tat({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=No(),l=xL(),c=u.respectReducedMotion?l:!1,[f,d]=N.useState(c?0:e),[h,p]=N.useState(r?"entered":"exited"),m=N.useRef(-1),g=N.useRef(-1),y=v=>{const b=v?i:s,_=v?o:a;window.clearTimeout(m.current);const w=c?0:v?e:t;d(w),w===0?(typeof b=="function"&&b(),typeof _=="function"&&_(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{fI.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof b=="function"&&b(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof _=="function"&&_(),p(v?"entered":"exited")},w)})})};return Um(()=>{y(r)},[r]),N.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function wy({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=tat({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?E.jsx(E.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:E.jsx(E.Fragment,{children:s(eat({transition:t,duration:f,state:d,timingFunction:h}))})}wy.displayName="@mantine/core/Transition";var TDe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const nat={},RZ=wt((e,t)=>{var g,y,v,b;const n=Qe("PopoverDropdown",nat,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=EDe(),h=DAe({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=Ro(t,d.floating);return d.disabled?null:E.jsx(TT,{...d.portalProps,withinPortal:d.withinPortal,children:E.jsx(wy,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:_=>E.jsx(CL,{active:d.trapFocus,children:E.jsxs(Fe,{...p,...f,variant:u,ref:m,onKeyDownCapture:wrt(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{..._,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:ze(d.width)},i]}),children:[o,E.jsx(kZ,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});RZ.classes=TDe;RZ.displayName="@mantine/core/PopoverDropdown";const rat={refProp:"ref",popupType:"dialog"},ADe=wt((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=Qe("PopoverTarget",rat,e);if(!gb(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=EDe(),u=Ro(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return N.cloneElement(n,{...o,...l,...a.targetProps,className:Ao(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});ADe.displayName="@mantine/core/PopoverTarget";function DDe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=N.useState(0);N.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return bot(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),Um(()=>{t.update()},r),Um(()=>{s(o=>o+1)},[e])}function iat(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function sat(e,t){const n=iat(e.middlewares),r=[gDe(e.offset)];return n.shift&&r.push(CZ(typeof n.shift=="boolean"?{limiter:Fpe(),padding:5}:{limiter:Fpe(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?dG():dG(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?hG():hG(n.inline)),r.push(yDe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(Iot({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function oat(e){const[t,n]=Ba({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=IZ({strategy:e.strategy,placement:e.position,middleware:sat(e,()=>s)});return DDe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),Um(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),Um(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const aat={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:_p("popover"),__staticSelector:"Popover",width:"max-content"},uat=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Zi(t),"--popover-shadow":nZ(n)}});function Pc(e){var Ie,Ve,ft,_t,Mt,st;const t=Qe("Popover",aat,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:_,portalProps:w,closeOnEscape:S,clickOutsideEvents:T,trapFocus:A,onClose:k,onOpen:I,onChange:R,zIndex:F,radius:O,shadow:L,id:H,defaultOpened:U,__staticSelector:G,withRoles:Y,disabled:J,returnFocus:$,variant:j,keepMounted:W,vars:B,floatingStrategy:q,...Z}=t,re=Gt({name:G,props:t,classes:TDe,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:B,varsResolver:uat}),xe=N.useRef(null),[pe,Te]=N.useState(null),[ke,it]=N.useState(null),{dir:Re}=by(),ut=ol(H),Ke=oat({middlewares:c,width:l,position:_De(Re,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:xe,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:U,onChange:R,onOpen:I,onClose:k,strategy:q});Srt(()=>b&&Ke.onClose(),T,[pe,ke]);const Ct=N.useCallback(X=>{Te(X),Ke.floating.refs.setReference(X)},[Ke.floating.refs.setReference]),gt=N.useCallback(X=>{it(X),Ke.floating.refs.setFloating(X)},[Ke.floating.refs.setFloating]);return E.jsx(Qot,{value:{returnFocus:$,disabled:J,controlled:Ke.controlled,reference:Ct,floating:gt,x:Ke.floating.x,y:Ke.floating.y,arrowX:(ft=(Ve=(Ie=Ke.floating)==null?void 0:Ie.middlewareData)==null?void 0:Ve.arrow)==null?void 0:ft.x,arrowY:(st=(Mt=(_t=Ke.floating)==null?void 0:_t.middlewareData)==null?void 0:Mt.arrow)==null?void 0:st.y,opened:Ke.opened,arrowRef:xe,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ke.floating.placement,trapFocus:A,withinPortal:_,portalProps:w,zIndex:F,radius:O,shadow:L,closeOnEscape:S,onClose:Ke.onClose,onToggle:Ke.onToggle,getTargetId:()=>`${ut}-target`,getDropdownId:()=>`${ut}-dropdown`,withRoles:Y,targetProps:Z,__staticSelector:G,classNames:y,styles:v,unstyled:g,variant:j,keepMounted:W,getStyles:re},children:n})}Pc.Target=ADe;Pc.Dropdown=RZ;Pc.displayName="@mantine/core/Popover";Pc.extend=e=>e;var qh={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const lat=N.forwardRef(({className:e,...t},n)=>E.jsxs(Fe,{component:"span",className:Ao(qh.barsLoader,e),...t,ref:n,children:[E.jsx("span",{className:qh.bar}),E.jsx("span",{className:qh.bar}),E.jsx("span",{className:qh.bar})]})),cat=N.forwardRef(({className:e,...t},n)=>E.jsxs(Fe,{component:"span",className:Ao(qh.dotsLoader,e),...t,ref:n,children:[E.jsx("span",{className:qh.dot}),E.jsx("span",{className:qh.dot}),E.jsx("span",{className:qh.dot})]})),fat=N.forwardRef(({className:e,...t},n)=>E.jsx(Fe,{component:"span",className:Ao(qh.ovalLoader,e),...t,ref:n})),IDe={bars:lat,oval:fat,dots:cat},dat={loaders:IDe,type:"oval"},hat=(e,{size:t,color:n})=>({root:{"--loader-size":ur(t,"loader-size"),"--loader-color":n?Ki(n,e):void 0}}),Qc=wt((e,t)=>{const n=Qe("Loader",dat,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=Gt({name:"Loader",props:n,classes:qh,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:hat});return p?E.jsx(Fe,{...g("root"),ref:t,...m,children:p}):E.jsx(Fe,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});Qc.defaultLoaders=IDe;Qc.classes=qh;Qc.displayName="@mantine/core/Loader";var TL={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const Wpe={orientation:"horizontal"},pat=(e,{borderWidth:t})=>({group:{"--ai-border-width":ze(t)}}),NZ=wt((e,t)=>{const n=Qe("ActionIconGroup",Wpe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Qe("ActionIconGroup",Wpe,e),p=Gt({name:"ActionIconGroup",props:n,classes:TL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:pat,rootSelector:"group"});return E.jsx(Fe,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});NZ.classes=TL;NZ.displayName="@mantine/core/ActionIconGroup";const mat={},gat=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":ur(t,"ai-size"),"--ai-radius":n===void 0?void 0:Zi(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},L_=ya((e,t)=>{const n=Qe("ActionIcon",mat,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:_,mod:w,...S}=n,T=Gt({name:["ActionIcon",p],props:n,className:r,style:u,classes:TL,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:gat});return E.jsxs(Ff,{...T("root",{active:!v&&!l&&!b}),...S,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},w],children:[E.jsx(wy,{mounted:!!l,transition:"slide-down",duration:150,children:A=>E.jsx(Fe,{component:"span",...T("loader",{style:A}),"aria-hidden":!0,children:E.jsx(Qc,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),E.jsx(Fe,{component:"span",mod:{loading:l},...T("icon"),children:y})]})});L_.classes=TL;L_.displayName="@mantine/core/ActionIcon";L_.Group=NZ;const kDe=N.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>E.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:E.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));kDe.displayName="@mantine/core/CloseIcon";var RDe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const yat={variant:"subtle"},vat=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":ur(t,"cb-size"),"--cb-radius":n===void 0?void 0:Zi(n),"--cb-icon-size":ze(r)}}),bb=ya((e,t)=>{const n=Qe("CloseButton",yat,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=Gt({name:"CloseButton",props:n,className:a,style:l,classes:RDe,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:vat});return E.jsxs(Ff,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||E.jsx(kDe,{}),i]})});bb.classes=RDe;bb.displayName="@mantine/core/CloseButton";function bat(e){return N.Children.toArray(e).filter(Boolean)}var NDe={root:"m_4081bf90"};const xat={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},wat=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":qo(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),$i=wt((e,t)=>{const n=Qe("Group",xat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,_=bat(u),w=_.length,S=qo(l??"md"),A={childWidth:`calc(${100/w}% - (${S} - ${S} / ${w}))`},k=Gt({name:"Group",props:n,stylesCtx:A,className:i,style:s,classes:NDe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:wat});return E.jsx(Fe,{...k("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:_})});$i.classes=NDe;$i.displayName="@mantine/core/Group";var PDe={root:"m_9814e45f"};const _at={zIndex:_p("modal")},Eat=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Kp(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${ze(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Zi(s),"--overlay-z-index":o==null?void 0:o.toString()}}),_R=ya((e,t)=>{const n=Qe("Overlay",_at,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,_=Gt({name:"Overlay",props:n,classes:PDe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Eat});return E.jsx(Fe,{ref:t,..._("root"),mod:[{center:c,fixed:l},v],...b,children:f})});_R.classes=PDe;_R.displayName="@mantine/core/Overlay";const[Sat,_y]=mu("ModalBase component was not found in tree");function Cat({opened:e,transitionDuration:t}){const[n,r]=N.useState(e),i=N.useRef(),o=xL()?0:t;return N.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function Tat({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=ol(e),[u,l]=N.useState(!1),[c,f]=N.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=Cat({opened:n,transitionDuration:d});return NAe("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),DAe({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const Aat=N.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},_)=>{const{_id:w,titleMounted:S,bodyMounted:T,shouldLockScroll:A,setTitleMounted:k,setBodyMounted:I}=Tat({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return E.jsx(TT,{...c,withinPortal:l,children:E.jsx(Sat,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${w}-title`,getBodyId:()=>`${w}-body`,titleMounted:S,bodyMounted:T,setTitleMounted:k,setBodyMounted:I,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:E.jsx(nC,{enabled:A&&f,...v,children:E.jsx(Fe,{ref:_,...b,__vars:{...g,"--mb-z-index":(h||_p("modal")).toString(),"--mb-shadow":nZ(p),"--mb-padding":qo(m)},children:d})})})})});function Dat(){const e=_y();return N.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var sC={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const ODe=N.forwardRef(({className:e,...t},n)=>{const r=Dat(),i=_y();return E.jsx(Fe,{ref:n,...t,id:r,className:Ao({[sC.body]:!i.unstyled},e)})});ODe.displayName="@mantine/core/ModalBaseBody";const FDe=N.forwardRef(({className:e,onClick:t,...n},r)=>{const i=_y();return E.jsx(bb,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Ao({[sC.close]:!i.unstyled},e),unstyled:i.unstyled})});FDe.displayName="@mantine/core/ModalBaseCloseButton";const Iat=N.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=_y();return E.jsx(wy,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>E.jsx("div",{...n,className:Ao({[sC.inner]:!a.unstyled},n.className),children:E.jsx(CL,{active:a.opened&&a.trapFocus,children:E.jsx(ET,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:Ao({[sC.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),MDe=N.forwardRef(({className:e,...t},n)=>{const r=_y();return E.jsx(Fe,{component:"header",ref:n,className:Ao({[sC.header]:!r.unstyled},e),...t})});MDe.displayName="@mantine/core/ModalBaseHeader";const kat={duration:200,timingFunction:"ease",transition:"fade"};function Rat(e){const t=_y();return{...kat,...t.transitionProps,...e}}const $De=N.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=_y(),o=Rat(t);return E.jsx(wy,{mounted:s.opened,...o,transition:"fade",children:a=>E.jsx(_R,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});$De.displayName="@mantine/core/ModalBaseOverlay";function Nat(){const e=_y();return N.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const LDe=N.forwardRef(({className:e,...t},n)=>{const r=Nat(),i=_y();return E.jsx(Fe,{component:"h2",ref:n,className:Ao({[sC.title]:!i.unstyled},e),...t,id:r})});LDe.displayName="@mantine/core/ModalBaseTitle";function Pat({children:e}){return E.jsx(E.Fragment,{children:e})}const[Oat,AT]=wT({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Kd={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Gpe={},Fat=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${Pl(t)} - ${ze(2)})`}}),AL=wt((e,t)=>{const n=Qe("InputDescription",Gpe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=Qe("InputDescription",Gpe,n),p=AT(),m=Gt({name:["InputWrapper",c],props:n,classes:Kd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:Fat}),g=f&&(p==null?void 0:p.getStyles)||m;return E.jsx(Fe,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});AL.classes=Kd;AL.displayName="@mantine/core/InputDescription";const Mat={},$at=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${Pl(t)} - ${ze(2)})`}}),DL=wt((e,t)=>{const n=Qe("InputError",Mat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=Gt({name:["InputWrapper",c],props:n,classes:Kd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:$at}),m=AT(),g=f&&(m==null?void 0:m.getStyles)||p;return E.jsx(Fe,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});DL.classes=Kd;DL.displayName="@mantine/core/InputError";const Ype={labelElement:"label"},Lat=(e,{size:t})=>({label:{"--input-label-size":Pl(t),"--input-asterisk-color":void 0}}),IL=wt((e,t)=>{const n=Qe("InputLabel",Ype,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=Qe("InputLabel",Ype,n),b=Gt({name:["InputWrapper",m],props:n,classes:Kd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:Lat}),_=AT(),w=(_==null?void 0:_.getStyles)||b;return E.jsxs(Fe,{...w("label",_!=null&&_.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:S=>{h==null||h(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...v,children:[p,f&&E.jsx("span",{...w("required"),"aria-hidden":!0,children:" *"})]})});IL.classes=Kd;IL.displayName="@mantine/core/InputLabel";const Kpe={},PZ=wt((e,t)=>{const n=Qe("InputPlaceholder",Kpe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=Qe("InputPlaceholder",Kpe,n),p=Gt({name:["InputPlaceholder",l],props:n,classes:Kd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return E.jsx(Fe,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});PZ.classes=Kd;PZ.displayName="@mantine/core/InputPlaceholder";function Bat(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const jat={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},Uat=(e,{size:t})=>({label:{"--input-label-size":Pl(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${Pl(t)} - ${ze(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${Pl(t)} - ${ze(2)})`}}),OZ=wt((e,t)=>{const n=Qe("InputWrapper",jat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:_,children:w,withAsterisk:S,id:T,required:A,__stylesApiProps:k,mod:I,...R}=n,F=Gt({name:["InputWrapper",f],props:k||n,classes:Kd,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Uat}),O={size:l,variant:c,__staticSelector:f},L=ol(T),H=typeof S=="boolean"?S:A,U=(b==null?void 0:b.id)||`${L}-error`,G=(v==null?void 0:v.id)||`${L}-description`,Y=L,J=!!m&&typeof m!="boolean",$=!!g,j=`${J?U:""} ${$?G:""}`,W=j.trim().length>0?j.trim():void 0,B=(y==null?void 0:y.id)||`${L}-label`,q=p&&E.jsx(IL,{labelElement:_,id:B,htmlFor:Y,required:H,...O,...y,children:p},"label"),Z=$&&E.jsx(AL,{...v,...O,size:(v==null?void 0:v.size)||O.size,id:(v==null?void 0:v.id)||G,children:g},"description"),re=E.jsx(N.Fragment,{children:d(w)},"input"),xe=J&&N.createElement(DL,{...b,...O,size:(b==null?void 0:b.size)||O.size,key:"error",id:(b==null?void 0:b.id)||U},m),pe=h.map(Te=>{switch(Te){case"label":return q;case"input":return re;case"description":return Z;case"error":return xe;default:return null}});return E.jsx(Oat,{value:{getStyles:F,describedBy:W,inputId:Y,labelId:B,...Bat(h,{hasDescription:$,hasError:J})},children:E.jsx(Fe,{ref:t,variant:c,size:l,mod:[{error:!!m},I],...F("root"),...R,children:pe})})});OZ.classes=Kd;OZ.displayName="@mantine/core/InputWrapper";const zat={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},Vat=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":ur(t.size,"input-height"),"--input-fz":Pl(t.size),"--input-radius":t.radius===void 0?void 0:Zi(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?ze(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?ze(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?ur(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),mo=ya((e,t)=>{const n=Qe("Input",zat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:_,rightSectionPointerEvents:w,leftSectionPointerEvents:S,variant:T,vars:A,pointer:k,multiline:I,radius:R,id:F,withAria:O,withErrorStyles:L,mod:H,inputSize:U,...G}=n,{styleProps:Y,rest:J}=M_(G),$=AT(),j={offsetBottom:$==null?void 0:$.offsetBottom,offsetTop:$==null?void 0:$.offsetTop},W=Gt({name:["Input",l],props:c||n,classes:Kd,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:j,rootSelector:"wrapper",vars:A,varsResolver:Vat}),B=O?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":$==null?void 0:$.describedBy,id:($==null?void 0:$.inputId)||F}:{};return E.jsxs(Fe,{...W("wrapper"),...Y,...d,mod:[{error:!!h&&L,pointer:k,disabled:p,multiline:I,"data-with-right-section":!!v,"data-with-left-section":!!m},H],variant:T,size:f,children:[m&&E.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),E.jsx(Fe,{component:"input",...J,...B,ref:t,required:u,mod:{disabled:p,error:!!h&&L},variant:T,__size:U,...W("input")}),v&&E.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});mo.classes=Kd;mo.Wrapper=OZ;mo.Label=IL;mo.Error=DL;mo.Description=AL;mo.Placeholder=PZ;mo.displayName="@mantine/core/Input";function Hat(e,t,n){const r=Qe(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:_,inputContainer:w,inputWrapperOrder:S,withAsterisk:T,variant:A,vars:k,mod:I,...R}=r,{styleProps:F,rest:O}=M_(R),L={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:_,inputContainer:w,inputWrapperOrder:S,withAsterisk:T,variant:A,id:v,mod:I,...y};return{...O,classNames:u,styles:l,unstyled:f,wrapperProps:{...L,...F},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:A,id:v}}}const qat={__staticSelector:"InputBase",withAria:!0},Xd=ya((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=Hat("InputBase",qat,e);return E.jsx(mo.Wrapper,{...r,children:E.jsx(mo,{...n,...i,ref:t})})});Xd.classes={...mo.classes,...mo.Wrapper.classes};Xd.displayName="@mantine/core/InputBase";const Wat={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var BDe={root:"m_8bffd616"};const Gat={},Jt=ya((e,t)=>{const n=Qe("Flex",Gat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=Gt({name:"Flex",classes:BDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=No(),b=sN(),_=zAe({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:Wat});return E.jsxs(E.Fragment,{children:[_.hasResponsiveStyles&&E.jsx(F_,{selector:`.${b}`,styles:_.styles,media:_.media}),E.jsx(Fe,{ref:t,...y("root",{className:b,style:mb(_.inlineStyles)}),...g})]})});Jt.classes=BDe;Jt.displayName="@mantine/core/Flex";function Yat(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function Kat({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=N.useRef(),[s,o]=N.useState(!1),[a,u]=N.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=N.useRef(),d=N.useRef();return N.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),N.useEffect(()=>{if(t){const h=p=>{Yat(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),qrt(()=>{FAe()!=="test"&&o(!0)},20,{autoInvoke:!0}),Wrt(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var jDe={root:"m_96b553a6"};const Xat={},Qat=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),FZ=wt((e,t)=>{const n=Qe("FloatingIndicator",Xat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=Gt({name:"FloatingIndicator",classes:jDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Qat}),g=N.useRef(null),{initialized:y,hidden:v}=Kat({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),b=Ro(t,g);return!l||!c?null:E.jsx(Fe,{ref:b,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});FZ.displayName="@mantine/core/FloatingIndicator";FZ.classes=jDe;const[Jat,MZ]=mu("Accordion component was not found in the tree");function kL({style:e,size:t=16,...n}){return E.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:ze(t),height:ze(t),display:"block"},...n,children:E.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}kL.displayName="@mantine/core/AccordionChevron";const[Zat,UDe]=mu("Accordion.Item component was not found in the tree");var aN={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const eut={},$Z=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=Qe("AccordionControl",eut,e),{value:m}=UDe(),g=MZ(),y=g.isItemActive(m),v=typeof g.order=="number",b=`h${g.order}`,_=E.jsxs(Ff,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:w=>{l==null||l(w),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:tZ({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[E.jsx(Fe,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),E.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&E.jsx(Fe,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return v?E.jsx(b,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:_}):_});$Z.displayName="@mantine/core/AccordionControl";$Z.classes=aN;const tut={},LZ=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=Qe("AccordionItem",tut,e),c=MZ();return E.jsx(Zat,{value:{value:a},children:E.jsx(Fe,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});LZ.displayName="@mantine/core/AccordionItem";LZ.classes=aN;const nut={},BZ=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=Qe("AccordionPanel",nut,e),{value:l}=UDe(),c=MZ();return E.jsx(_L,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:E.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});BZ.displayName="@mantine/core/AccordionPanel";BZ.classes=aN;const rut={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:E.jsx(kL,{})},iut=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:ze(n),"--accordion-radius":r===void 0?void 0:Zi(r)}});function fc(e){const t=Qe("Accordion",rut,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:b,chevron:_,variant:w,radius:S,...T}=t,A=ol(h),[k,I]=Ba({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),R=L=>Array.isArray(k)?k.includes(L):L===k,F=L=>{const H=Array.isArray(k)?k.includes(L)?k.filter(U=>U!==L):[...k,L]:L===k?null:L;I(H)},O=Gt({name:"Accordion",classes:aN,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:iut});return E.jsx(Jat,{value:{isItemActive:R,onChange:F,getControlId:kM(`${A}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:kM(`${A}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:b,chevron:_,loop:p,getStyles:O,variant:w,unstyled:o},children:E.jsx(Fe,{...O("root"),id:A,...T,variant:w,"data-accordion":!0,children:u})})}const sut=e=>e;fc.extend=sut;fc.classes=aN;fc.displayName="@mantine/core/Accordion";fc.Item=LZ;fc.Panel=BZ;fc.Control=$Z;fc.Chevron=kL;var zDe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const out={},aut=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Zi(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},Ng=wt((e,t)=>{const n=Qe("Alert",out,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,..._}=n,w=Gt({name:"Alert",classes:zDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aut}),S=ol(h),T=f&&`${S}-title`||void 0,A=`${S}-body`;return E.jsx(Fe,{id:S,...w("root",{variant:v}),variant:v,ref:t,..._,role:"alert","aria-describedby":A,"aria-labelledby":T,children:E.jsxs("div",{...w("wrapper"),children:[p&&E.jsx("div",{...w("icon"),children:p}),E.jsxs("div",{...w("body"),children:[f&&E.jsx("div",{...w("title"),"data-with-close-button":m||void 0,children:E.jsx("span",{id:T,...w("label"),children:f})}),d&&E.jsx("div",{id:A,...w("message"),"data-variant":v,children:d})]}),m&&E.jsx(bb,{...w("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});Ng.classes=zDe;Ng.displayName="@mantine/core/Alert";var VDe={root:"m_b6d8b162"};function uut(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const lut={inherit:!1},cut=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":Pl(i),"--text-lh":AAe(i),"--text-gradient":t==="gradient"?sG(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Ki(s,e):void 0}}),tt=ya((e,t)=>{const n=Qe("Text",lut,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,_=Gt({name:["Text",l],props:n,classes:VDe,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:cut});return E.jsx(Fe,{..._("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":uut(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});tt.classes=VDe;tt.displayName="@mantine/core/Text";var HDe={root:"m_849cf0da"};const fut={underline:"hover"},xb=ya((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=Qe("Anchor",fut,e);return E.jsx(tt,{component:"a",ref:t,className:Ao({[HDe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});xb.classes=HDe;xb.displayName="@mantine/core/Anchor";const[dut,DT]=mu("AppShell was not found in tree");var wb={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const hut={},jZ=wt((e,t)=>{const n=Qe("AppShellAside",hut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=DT();return h.disabled?null:E.jsx(Fe,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});jZ.classes=wb;jZ.displayName="@mantine/core/AppShellAside";const put={},UZ=wt((e,t)=>{var p;const n=Qe("AppShellFooter",put,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=DT();return h.disabled?null:E.jsx(Fe,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Ao({[nC.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});UZ.classes=wb;UZ.displayName="@mantine/core/AppShellFooter";const mut={},zZ=wt((e,t)=>{var p;const n=Qe("AppShellHeader",mut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=DT();return h.disabled?null:E.jsx(Fe,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Ao({[nC.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});zZ.classes=wb;zZ.displayName="@mantine/core/AppShellHeader";const gut={},VZ=wt((e,t)=>{const n=Qe("AppShellMain",gut,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=DT();return E.jsx(Fe,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});VZ.classes=wb;VZ.displayName="@mantine/core/AppShellMain";function uN(e){return typeof e=="object"?e.base:e}function lN(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function cN(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function yut({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),lN(s)){const f=ze(uN(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(cN(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=ze(s.base),e["--app-shell-aside-offset"]=ze(s.base)),us(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=ze(s[f]),t[f]["--app-shell-aside-offset"]=ze(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=rZ(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function vut({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(lN(r)){const o=ze(uN(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}cN(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=ze(r.base),s&&(e["--app-shell-footer-offset"]=ze(r.base))),us(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=ze(r[o]),s&&(t[o]["--app-shell-footer-offset"]=ze(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function but({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(lN(r)){const o=ze(uN(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}cN(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=ze(r.base),s&&(e["--app-shell-header-offset"]=ze(r.base))),us(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=ze(r[o]),s&&(t[o]["--app-shell-header-offset"]=ze(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function xut({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),lN(s)){const f=ze(uN(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(cN(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=ze(s.base),e["--app-shell-navbar-offset"]=ze(s.base)),us(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=ze(s[f]),t[f]["--app-shell-navbar-offset"]=ze(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=rZ(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function bz(e){return Number(e)===0?"0px":qo(e)}function wut({padding:e,baseStyles:t,minMediaStyles:n}){lN(e)&&(t["--app-shell-padding"]=bz(uN(e))),cN(e)&&(e.base&&(t["--app-shell-padding"]=bz(e.base)),us(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=bz(e[r]))}))}function _ut({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};xut({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),yut({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),but({baseStyles:u,minMediaStyles:o,header:t}),vut({baseStyles:u,minMediaStyles:o,footer:n}),wut({baseStyles:u,minMediaStyles:o,padding:i});const l=bR(us(o),s).map(d=>({query:`(min-width: ${IM(d.px)})`,styles:o[d.value]})),c=bR(us(a),s).map(d=>({query:`(max-width: ${IM(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function Eut({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=No(),o=yb(),{media:a,baseStyles:u}=_ut({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return E.jsx(F_,{media:a,styles:u,selector:o.cssVariablesSelector})}const Sut={},HZ=wt((e,t)=>{const n=Qe("AppShellNavbar",Sut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=DT();return h.disabled?null:E.jsx(Fe,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});HZ.classes=wb;HZ.displayName="@mantine/core/AppShellNavbar";const Cut={},qZ=ya((e,t)=>{const n=Qe("AppShellSection",Cut,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=DT();return E.jsx(Fe,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});qZ.classes=wb;qZ.displayName="@mantine/core/AppShellSection";function Tut({transitionDuration:e,disabled:t}){const[n,r]=N.useState(!0),i=N.useRef(),s=N.useRef();return NAe("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),O_(()=>{N.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const Aut={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:_p("app")},Dut=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),Yi=wt((e,t)=>{const n=Qe("AppShell",Aut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:_,mod:w,...S}=n,T=Gt({name:"AppShell",classes:wb,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Dut}),A=Tut({disabled:y,transitionDuration:d});return E.jsxs(dut,{value:{getStyles:T,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:_},children:[E.jsx(Eut,{navbar:l,header:p,aside:v,footer:b,padding:f}),E.jsx(Fe,{ref:t,...T("root"),mod:[{resizing:A,layout:g,disabled:y},w],...S})]})});Yi.classes=wb;Yi.displayName="@mantine/core/AppShell";Yi.Navbar=HZ;Yi.Header=zZ;Yi.Main=VZ;Yi.Aside=jZ;Yi.Footer=UZ;Yi.Section=qZ;function qDe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>qDe(t))}:e}function WDe(e){return e?e.map(t=>qDe(t)):[]}function WZ(e){return e.reduce((t,n)=>"group"in n?{...t,...WZ(n.items)}:(t[n.value]=n,t),{})}var Bc={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const Iut={error:null},kut=(e,{size:t})=>({chevron:{"--combobox-chevron-size":ur(t,"combobox-chevron-size")}}),GZ=wt((e,t)=>{const n=Qe("ComboboxChevron",Iut,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=Gt({name:"ComboboxChevron",classes:Bc,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:kut,rootSelector:"chevron"});return E.jsx(Fe,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:E.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});GZ.classes=Bc;GZ.displayName="@mantine/core/ComboboxChevron";const[Rut,Qd]=mu("Combobox component was not found in tree"),GDe=N.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>E.jsx(bb,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));GDe.displayName="@mantine/core/ComboboxClearButton";const Nut={},YZ=wt((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=Qe("ComboboxDropdown",Nut,e),u=Qd();return E.jsx(Pc.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});YZ.classes=Bc;YZ.displayName="@mantine/core/ComboboxDropdown";const Put={refProp:"ref"},YDe=wt((e,t)=>{const{children:n,refProp:r}=Qe("ComboboxDropdownTarget",Put,e);if(Qd(),!gb(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return E.jsx(Pc.Target,{ref:t,refProp:r,children:n})});YDe.displayName="@mantine/core/ComboboxDropdownTarget";const Out={},KZ=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Qe("ComboboxEmpty",Out,e),u=Qd();return E.jsx(Fe,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});KZ.classes=Bc;KZ.displayName="@mantine/core/ComboboxEmpty";function XZ({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Qd(),[a,u]=N.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const Fut={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},KDe=wt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Qe("ComboboxEventsTarget",Fut,e);if(!gb(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Qd(),f=XZ({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return N.cloneElement(n,{...f,...l,[r]:Ro(t,c.store.targetRef,n==null?void 0:n.ref)})});KDe.displayName="@mantine/core/ComboboxEventsTarget";const Mut={},QZ=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Qe("ComboboxFooter",Mut,e),u=Qd();return E.jsx(Fe,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});QZ.classes=Bc;QZ.displayName="@mantine/core/ComboboxFooter";const $ut={},JZ=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=Qe("ComboboxGroup",$ut,e),c=Qd();return E.jsxs(Fe,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&E.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});JZ.classes=Bc;JZ.displayName="@mantine/core/ComboboxGroup";const Lut={},ZZ=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Qe("ComboboxHeader",Lut,e),u=Qd();return E.jsx(Fe,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});ZZ.classes=Bc;ZZ.displayName="@mantine/core/ComboboxHeader";function XDe({value:e,valuesDivider:t=",",...n}){return E.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}XDe.displayName="@mantine/core/ComboboxHiddenInput";const But={},eee=wt((e,t)=>{const n=Qe("ComboboxOption",But,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=Qd(),v=N.useId(),b=l||v;return E.jsx(Fe,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:_=>{var w;h?_.preventDefault():((w=y.onOptionSubmit)==null||w.call(y,n.value,n),u==null||u(_))},onMouseDown:_=>{_.preventDefault(),f==null||f(_)},onMouseOver:_=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(_)}})});eee.classes=Bc;eee.displayName="@mantine/core/ComboboxOption";const jut={},tee=wt((e,t)=>{const n=Qe("ComboboxOptions",jut,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=Qd(),d=ol(a);return N.useEffect(()=>{f.store.setListId(d)},[d]),E.jsx(Fe,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});tee.classes=Bc;tee.displayName="@mantine/core/ComboboxOptions";const Uut={withAriaAttributes:!0,withKeyboardNavigation:!0},nee=wt((e,t)=>{const n=Qe("ComboboxSearch",Uut,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=Qd(),h=d.getStyles("search"),p=XZ({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return E.jsx(mo,{ref:Ro(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});nee.classes=Bc;nee.displayName="@mantine/core/ComboboxSearch";const zut={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},QDe=wt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Qe("ComboboxTarget",zut,e);if(!gb(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Qd(),f=XZ({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=N.cloneElement(n,{...f,...l});return E.jsx(Pc.Target,{ref:Ro(t,c.store.targetRef),children:d})});QDe.displayName="@mantine/core/ComboboxTarget";function Vut(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function Hut(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function qut(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function ree({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=Ba({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=N.useRef(null),c=N.useRef(-1),f=N.useRef(null),d=N.useRef(null),h=N.useRef(-1),p=N.useRef(-1),m=N.useRef(-1),g=N.useCallback((U="unknown")=>{a||(u(!0),i==null||i(U))},[u,i,a]),y=N.useCallback((U="unknown")=>{a&&(u(!1),r==null||r(U))},[u,r,a]),v=N.useCallback((U="unknown")=>{a?y(U):g(U)},[y,g,a]),b=N.useCallback(()=>{const U=document.querySelector(`#${l.current} [data-combobox-selected]`);U==null||U.removeAttribute("data-combobox-selected"),U==null||U.removeAttribute("aria-selected")},[]),_=N.useCallback(U=>{const G=document.getElementById(l.current),Y=G==null?void 0:G.querySelectorAll("[data-combobox-option]");if(!Y)return null;const J=U>=Y.length?0:U<0?Y.length-1:U;return c.current=J,Y!=null&&Y[J]&&!Y[J].hasAttribute("data-combobox-disabled")?(b(),Y[J].setAttribute("data-combobox-selected","true"),Y[J].setAttribute("aria-selected","true"),Y[J].scrollIntoView({block:"nearest",behavior:o}),Y[J].id):null},[o,b]),w=N.useCallback(()=>{const U=document.querySelector(`#${l.current} [data-combobox-active]`);if(U){const G=document.querySelectorAll(`#${l.current} [data-combobox-option]`),Y=Array.from(G).findIndex(J=>J===U);return _(Y)}return _(0)},[_]),S=N.useCallback(()=>_(Hut(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[_,s]),T=N.useCallback(()=>_(Vut(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[_,s]),A=N.useCallback(()=>_(qut(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[_]),k=N.useCallback((U="selected",G)=>{m.current=window.setTimeout(()=>{var $;const Y=document.querySelectorAll(`#${l.current} [data-combobox-option]`),J=Array.from(Y).findIndex(j=>j.hasAttribute(`data-combobox-${U}`));c.current=J,G!=null&&G.scrollIntoView&&(($=Y[J])==null||$.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),I=N.useCallback(()=>{c.current=-1,b()},[b]),R=N.useCallback(()=>{const U=document.querySelectorAll(`#${l.current} [data-combobox-option]`),G=U==null?void 0:U[c.current];G==null||G.click()},[]),F=N.useCallback(U=>{l.current=U},[]),O=N.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),L=N.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),H=N.useCallback(()=>c.current,[]);return N.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:H,selectOption:_,selectFirstOption:A,selectActiveOption:w,selectNextOption:S,selectPreviousOption:T,resetSelectedOption:I,updateSelectedOptionIndex:k,listId:l.current,setListId:F,clickSelectedOption:R,searchRef:f,focusSearchInput:O,targetRef:d,focusTarget:L}}const Wut={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},Gut=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":Pl(t),"--combobox-option-padding":ur(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:ze(n),"--combobox-option-fz":Pl(t),"--combobox-option-padding":ur(t,"combobox-option-padding")}});function Gr(e){const t=Qe("Combobox",Wut,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=ree(),y=o||g,v=Gt({name:h||"Combobox",classes:Bc,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:Gut}),b=()=>{l==null||l(),y.closeDropdown()};return E.jsx(Rut,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:E.jsx(Pc,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const Yut=e=>e;Gr.extend=Yut;Gr.classes=Bc;Gr.displayName="@mantine/core/Combobox";Gr.Target=QDe;Gr.Dropdown=YZ;Gr.Options=tee;Gr.Option=eee;Gr.Search=nee;Gr.Empty=KZ;Gr.Chevron=GZ;Gr.Footer=QZ;Gr.Header=ZZ;Gr.EventsTarget=KDe;Gr.DropdownTarget=YDe;Gr.Group=JZ;Gr.ClearButton=GDe;Gr.HiddenInput=XDe;var JDe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const ZDe=JDe,RL=N.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,..._},w)=>{const S=Gt({name:e,props:t,className:n,style:y,classes:JDe,classNames:r,styles:i,unstyled:s});return E.jsx(Fe,{...S("root"),ref:w,__vars:{"--label-fz":Pl(d),"--label-lh":ur(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,..._,children:E.jsxs(Fe,{component:p,htmlFor:p==="label"?l:void 0,...S("body"),children:[o,E.jsxs("div",{...S("labelWrapper"),"data-disabled":c||void 0,children:[a&&E.jsx(Fe,{component:m,htmlFor:m==="label"?l:void 0,...S("label"),"data-disabled":c||void 0,children:a}),u&&E.jsx(mo.Description,{size:d,__inheritStyles:!1,...S("description"),children:u}),f&&typeof f!="boolean"&&E.jsx(mo.Error,{size:d,__inheritStyles:!1,...S("error"),children:f})]})]})})});RL.displayName="@mantine/core/InlineInput";const eIe=N.createContext(null),Kut=eIe.Provider,tIe=()=>N.useContext(eIe),[Xut,Qut]=wT();var nIe={card:"m_26775b0a"};const Jut={withBorder:!0},Zut=(e,{radius:t})=>({card:{"--card-radius":Zi(t)}}),iee=wt((e,t)=>{const n=Qe("CheckboxCard",Jut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=Gt({name:"CheckboxCard",classes:nIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Zut,rootSelector:"card"}),g=tIe(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return E.jsx(Xut,{value:{checked:y},children:E.jsx(Ff,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});iee.displayName="@mantine/core/CheckboxCard";iee.classes=nIe;function see({children:e,role:t}){const n=AT();return n?E.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):E.jsx(E.Fragment,{children:e})}const elt={},oee=wt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Qe("CheckboxGroup",elt,e),[c,f]=Ba({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return E.jsx(Kut,{value:{value:c,onChange:d,size:s},children:E.jsx(mo.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:E.jsx(see,{role:"group",children:a})})})});oee.classes=mo.Wrapper.classes;oee.displayName="@mantine/core/CheckboxGroup";function rIe({size:e,style:t,...n}){const r=e!==void 0?{width:ze(e),height:ze(e),...t}:t;return E.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:E.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function iIe({indeterminate:e,...t}){return e?E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:E.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):E.jsx(rIe,{...t})}var sIe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const tlt={icon:iIe},nlt=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=c0({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":ur(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Zi(t),"--checkbox-color":s==="outline"?u:Ki(n,e),"--checkbox-icon-color":i?Ki(i,e):_T(o,e)?vb({color:n,theme:e,autoContrast:o}):void 0}}},aee=wt((e,t)=>{const n=Qe("CheckboxIndicator",tlt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,_=l,w=Gt({name:"CheckboxIndicator",classes:sIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nlt,rootSelector:"indicator"}),S=Qut(),T=typeof m=="boolean"||typeof c=="boolean"?m||c:(S==null?void 0:S.checked)||!1;return E.jsx(Fe,{ref:t,...w("indicator",{variant:y}),variant:y,mod:[{checked:T,disabled:v},g],...b,children:E.jsx(_,{indeterminate:c,...w("icon")})})});aee.displayName="@mantine/core/CheckboxIndicator";aee.classes=sIe;var oIe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const rlt={labelPosition:"right",icon:iIe},ilt=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=c0({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":ur(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Zi(t),"--checkbox-color":s==="outline"?u:Ki(n,e),"--checkbox-icon-color":i?Ki(i,e):_T(o,e)?vb({color:n,theme:e,autoContrast:o}):void 0}}},Ec=wt((e,t)=>{const n=Qe("Checkbox",rlt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:_,variant:w,indeterminate:S,icon:T,rootRef:A,iconColor:k,onChange:I,autoContrast:R,mod:F,...O}=n,L=tIe(),H=d||(L==null?void 0:L.size),U=T,G=Gt({name:"Checkbox",props:n,classes:oIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ilt}),{styleProps:Y,rest:J}=M_(O),$=ol(f),j=L?{checked:L.value.includes(J.value),onChange:W=>{L.onChange(W),I==null||I(W)}}:{};return E.jsx(RL,{...G("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:$,size:H,labelPosition:y,label:c,description:v,error:b,disabled:_,classNames:r,styles:o,unstyled:a,"data-checked":j.checked||g||void 0,variant:w,ref:A,mod:F,...Y,...p,children:E.jsxs(Fe,{...G("inner"),mod:{"data-label-position":y},children:[E.jsx(Fe,{component:"input",id:$,ref:t,checked:g,disabled:_,mod:{error:!!b,indeterminate:S},...G("input",{focusable:!0,variant:w}),onChange:I,...J,...j,type:"checkbox"}),E.jsx(U,{indeterminate:S,...G("icon")})]})})});Ec.classes={...oIe,...ZDe};Ec.displayName="@mantine/core/Checkbox";Ec.Group=oee;Ec.Indicator=aee;Ec.Card=iee;function oC(e){return"group"in e}function aIe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;oC(o)&&i.push({group:o.group,items:aIe({options:o.items,search:t,limit:n-i.length})}),oC(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function slt(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function uIe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(oC(n))uIe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function olt(e,t){return Array.isArray(e)?e.includes(t):e===t}function lIe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!oC(e)){const a=olt(n,e.value),u=t&&a&&E.jsx(rIe,{className:Bc.optionsDropdownCheckIcon}),l=E.jsxs(E.Fragment,{children:[r==="left"&&u,E.jsx("span",{children:e.label}),r==="right"&&u]});return E.jsx(Gr.Option,{value:e.value,disabled:e.disabled,className:Ao({[Bc.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>E.jsx(lIe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return E.jsx(Gr.Group,{label:e.group,children:o})}function cIe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){uIe(e);const b=typeof i=="string"?(r||aIe)({options:e,search:u?i:"",limit:s??1/0}):e,_=slt(b),w=b.map(S=>E.jsx(lIe,{data:S,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},oC(S)?S.group:S.value));return E.jsx(Gr.Dropdown,{hidden:t||n&&_,children:E.jsxs(Gr.Options,{labelledBy:p,"aria-label":y,children:[a?E.jsx(Yg.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:w}):w,_&&d&&E.jsx(Gr.Empty,{children:d})]})})}var fIe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const alt={},ult=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":ur(s,"badge-height"),"--badge-padding-x":ur(s,"badge-padding-x"),"--badge-fz":ur(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Zi(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Ki(n,e):void 0}}},av=ya((e,t)=>{const n=Qe("Badge",alt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,..._}=n,w=Gt({name:"Badge",props:n,classes:fIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ult});return E.jsxs(Fe,{variant:m,mod:[{block:g,circle:v},b],...w("root",{variant:m}),ref:t,..._,children:[d&&E.jsx("span",{...w("section"),"data-position":"left",children:d}),E.jsx("span",{...w("label"),children:p}),h&&E.jsx("span",{...w("section"),"data-position":"right",children:h})]})});av.classes=fIe;av.displayName="@mantine/core/Badge";var NL={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const Xpe={orientation:"horizontal"},llt=(e,{borderWidth:t})=>({group:{"--button-border-width":ze(t)}}),uee=wt((e,t)=>{const n=Qe("ButtonGroup",Xpe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Qe("ButtonGroup",Xpe,e),p=Gt({name:"ButtonGroup",props:n,classes:NL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:llt,rootSelector:"group"});return E.jsx(Fe,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});uee.classes=NL;uee.displayName="@mantine/core/ButtonGroup";const clt={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${ze(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},flt={},dlt=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":ur(s,"button-height"),"--button-padding-x":ur(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?Pl(s.replace("compact-","")):Pl(s),"--button-radius":t===void 0?void 0:Zi(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},_n=ya((e,t)=>{const n=Qe("Button",flt,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":_,autoContrast:w,mod:S,...T}=n,A=Gt({name:"Button",props:n,classes:NL,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:dlt}),k=!!l,I=!!c;return E.jsxs(Ff,{ref:t,...A("root",{active:!a&&!p&&!_}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||_,loading:p,block:f,"with-left-section":k,"with-right-section":I},S],...T,children:[E.jsx(wy,{mounted:!!p,transition:clt,duration:150,children:R=>E.jsx(Fe,{component:"span",...A("loader",{style:R}),"aria-hidden":!0,children:E.jsx(Qc,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),E.jsxs("span",{...A("inner"),children:[l&&E.jsx(Fe,{component:"span",...A("section"),mod:{position:"left"},children:l}),E.jsx(Fe,{component:"span",mod:{loading:p},...A("label"),children:u}),c&&E.jsx(Fe,{component:"span",...A("section"),mod:{position:"right"},children:c})]})]})});_n.classes=NL;_n.displayName="@mantine/core/Button";_n.Group=uee;const[hlt,plt]=mu("Card component was not found in tree");var lee={root:"m_e615b15f",section:"m_599a2148"};const mlt={},PL=ya((e,t)=>{const n=Qe("CardSection",mlt,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=plt();return E.jsx(Fe,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});PL.classes=lee;PL.displayName="@mantine/core/CardSection";const glt={},ylt=(e,{padding:t})=>({root:{"--card-padding":qo(t)}}),IT=ya((e,t)=>{const n=Qe("Card",glt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=Gt({name:"Card",props:n,classes:lee,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ylt}),h=N.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===PL?N.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return E.jsx(hlt,{value:{getStyles:d},children:E.jsx(ET,{ref:t,unstyled:a,...d("root"),...f,children:p})})});IT.classes=lee;IT.displayName="@mantine/core/Card";IT.Section=PL;var dIe={root:"m_4451eb3a"};const vlt={},ma=ya((e,t)=>{const n=Qe("Center",vlt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=Gt({name:"Center",props:n,classes:dIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return E.jsx(Fe,{ref:t,mod:[{inline:l},c],...d("root"),...f})});ma.classes=dIe;ma.displayName="@mantine/core/Center";var hIe={root:"m_b183c0a2"};const blt={},xlt=(e,{color:t})=>({root:{"--code-bg":t?Ki(t,e):void 0}}),ck=wt((e,t)=>{const n=Qe("Code",blt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=Gt({name:"Code",props:n,classes:hIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xlt});return E.jsx(Fe,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});ck.classes=hIe;ck.displayName="@mantine/core/Code";var pIe={root:"m_7485cace"};const wlt={},_lt=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:ur(t,"container-size")}}),Bd=wt((e,t)=>{const n=Qe("Container",wlt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=Gt({name:"Container",classes:pIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_lt});return E.jsx(Fe,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});Bd.classes=pIe;Bd.displayName="@mantine/core/Container";var mIe={root:"m_3eebeb36",label:"m_9e365f20"};const Elt={orientation:"horizontal"},Slt=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Ki(t,e):void 0,"--divider-border-style":n,"--divider-size":ur(r,"divider-size")}}),kT=wt((e,t)=>{const n=Qe("Divider",Elt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=Gt({name:"Divider",classes:mIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Slt});return E.jsx(Fe,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&E.jsx(Fe,{component:"span",mod:{position:d},...m("label"),children:f})})});kT.classes=mIe;kT.displayName="@mantine/core/Divider";function Clt({open:e,close:t,openDelay:n,closeDelay:r}){const i=N.useRef(-1),s=N.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return N.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[Tlt,gIe]=mu("Grid component was not found in tree"),mG=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,Qpe=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":mG(e,t),Jpe=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},Zpe=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function Alt({span:e,order:t,offset:n,selector:r}){var d;const i=No(),s=gIe(),a=Hh(e)===void 0?12:Hh(e),u=mb({"--col-order":(d=Hh(t))==null?void 0:d.toString(),"--col-flex-grow":Jpe(a,s.grow),"--col-flex-basis":mG(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":Qpe(a,s.columns,s.grow),"--col-offset":Zpe(Hh(n),s.columns)}),l=us(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=Jpe(e[p],s.grow),h[p]["--col-flex-basis"]=mG(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=Qpe(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=Zpe(n[p],s.columns)),h},{}),f=bR(us(l),i).filter(h=>us(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return E.jsx(F_,{styles:u,media:f,selector:r})}var cee={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const Dlt={span:12},fee=wt((e,t)=>{const n=Qe("GridCol",Dlt,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=gIe(),h=sN();return E.jsxs(E.Fragment,{children:[E.jsx(Alt,{selector:`.${h}`,span:u,order:l,offset:c}),E.jsx(Fe,{ref:t,...d.getStyles("col",{className:Ao(i,h),style:s,classNames:r,styles:o}),...f})]})});fee.classes=cee;fee.displayName="@mantine/core/GridCol";function Ilt({gutter:e,selector:t}){const n=No(),r=mb({"--grid-gutter":qo(Hh(e))}),i=us(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=qo(e[u])),a),{}),o=bR(us(i),n).filter(a=>us(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return E.jsx(F_,{styles:r,media:o,selector:t})}const klt={gutter:"md",grow:!1,columns:12},Rlt=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),wf=wt((e,t)=>{const n=Qe("Grid",klt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=Gt({name:"Grid",classes:cee,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Rlt}),y=sN();return E.jsxs(Tlt,{value:{getStyles:g,grow:l,columns:f},children:[E.jsx(Ilt,{selector:`.${y}`,...n}),E.jsx(Fe,{ref:t,...g("root",{className:y}),...m,children:E.jsx("div",{...g("inner"),children:p})})]})});wf.classes=cee;wf.displayName="@mantine/core/Grid";wf.Col=fee;var yIe={root:"m_9e117634"};const Nlt={},Plt=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Zi(t),"--image-object-fit":n}}),_b=ya((e,t)=>{const n=Qe("Image",Nlt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=N.useState(!c);N.useEffect(()=>y(!c),[c]);const v=Gt({name:"Image",classes:yIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Plt});return g&&h?E.jsx(Fe,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):E.jsx(Fe,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});_b.classes=yIe;_b.displayName="@mantine/core/Image";function aC(){return aC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aC.apply(null,arguments)}function dee(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var Olt=N.useLayoutEffect,Flt=function(t){var n=N.useRef(t);return Olt(function(){n.current=t}),n},eme=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},Mlt=function(t,n){var r=N.useRef();return N.useCallback(function(i){t.current=i,r.current&&eme(r.current,null),r.current=n,n&&eme(n,i)},[n])},tme={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},$lt=function(t){Object.keys(tme).forEach(function(n){t.style.setProperty(n,tme[n],"important")})},nme=$lt,gl=null,rme=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Llt(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),gl||(gl=document.createElement("textarea"),gl.setAttribute("tabindex","-1"),gl.setAttribute("aria-hidden","true"),nme(gl)),gl.parentNode===null&&document.body.appendChild(gl);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;gl.style[h]=o[h]}),nme(gl),gl.value=t;var u=rme(gl,e);gl.value=t,u=rme(gl,e),gl.value="x";var l=gl.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var ime=function(){},Blt=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},jlt=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Ult=!!document.documentElement.currentStyle,zlt=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=Blt(jlt,n),i=r.boxSizing;if(i==="")return null;Ult&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},Vlt=zlt;function vIe(e,t,n){var r=Flt(n);N.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var Hlt=function(t){vIe(window,"resize",t)},qlt=function(t){vIe(document.fonts,"loadingdone",t)},Wlt=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],Glt=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?ime:o,u=t.onHeightChange,l=u===void 0?ime:u,c=dee(t,Wlt),f=c.value!==void 0,d=N.useRef(null),h=Mlt(d,n),p=N.useRef(0),m=N.useRef(),g=function(){var b=d.current,_=r&&m.current?m.current:Vlt(b);if(_){m.current=_;var w=Llt(_,b.value||b.placeholder||"x",s,i),S=w[0],T=w[1];p.current!==S&&(p.current=S,b.style.setProperty("height",S+"px","important"),l(S,{rowHeight:T}))}},y=function(b){f||g(),a(b)};return N.useLayoutEffect(g),Hlt(g),qlt(g),N.createElement("textarea",aC({},c,{onChange:y,ref:h}))},Ylt=N.forwardRef(Glt);const Klt={},hee=wt((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=Qe("Textarea",Klt,e),u=n&&FAe()!=="test",l=u?{maxRows:r,minRows:i}:{};return E.jsx(Xd,{component:u?Ylt:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});hee.classes=Xd.classes;hee.displayName="@mantine/core/Textarea";const[Xlt,Qlt]=mu("List component was not found in tree");var pee={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const Jlt={},mee=wt((e,t)=>{const n=Qe("ListItem",Jlt,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=Qlt(),h=u||d.icon,p={classNames:r,styles:o};return E.jsx(Fe,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:E.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&E.jsx("span",{...d.getStyles("itemIcon",p),children:h}),E.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});mee.classes=pee;mee.displayName="@mantine/core/ListItem";const Zlt={type:"unordered"},ect=(e,{size:t,spacing:n})=>({root:{"--list-fz":Pl(t),"--list-lh":AAe(t),"--list-spacing":qo(n)}}),Uu=wt((e,t)=>{const n=Qe("List",Zlt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=Gt({name:"List",classes:pee,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ect});return E.jsx(Xlt,{value:{center:p,icon:d,getStyles:v},children:E.jsx(Fe,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});Uu.classes=pee;Uu.displayName="@mantine/core/List";Uu.Item=mee;var bIe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const sme={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:_p("overlay")},tct=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),$f=wt((e,t)=>{const n=Qe("LoadingOverlay",sme,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=No(),g=Gt({name:"LoadingOverlay",classes:bIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:tct}),y={...sme.overlayProps,...f};return E.jsx(wy,{transition:"fade",...l,mounted:!!d,children:v=>E.jsxs(Fe,{...g("root",{style:v}),ref:t,...p,children:[E.jsx(Qc,{...g("loader"),unstyled:a,...c}),E.jsx(_R,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),E.jsx(_R,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});$f.classes=bIe;$f.displayName="@mantine/core/LoadingOverlay";const[nct,fN]=mu("Menu component was not found in the tree");var RT={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const rct={},gee=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Qe("MenuDivider",rct,e),u=fN();return E.jsx(Fe,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});gee.classes=RT;gee.displayName="@mantine/core/MenuDivider";const ict={},yee=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=Qe("MenuDropdown",ict,e),f=N.useRef(null),d=fN(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=yg(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=yg(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return E.jsxs(Pc.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:Ro(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[E.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});yee.classes=RT;yee.displayName="@mantine/core/MenuDropdown";const sct={},vee=ya((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=Qe("MenuItem",sct,e),p=fN(),m=No(),{dir:g}=by(),y=N.useRef(),v=p.getItemIndex(y.current),b=h,_=yg(b.onMouseLeave,()=>p.setHovered(-1)),w=yg(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),S=yg(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),T=yg(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),A=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,k=a?c0({color:a,theme:m}):null;return E.jsxs(Ff,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:T,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:Ro(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:w,onMouseLeave:_,onClick:S,onKeyDown:tZ({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":k!=null&&k.isThemeColor&&(k==null?void 0:k.shade)===void 0?`var(--mantine-color-${k.color}-6)`:A==null?void 0:A.color,"--menu-item-hover":A==null?void 0:A.hover},children:[l&&E.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&E.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&E.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});vee.classes=RT;vee.displayName="@mantine/core/MenuItem";const oct={},bee=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Qe("MenuLabel",oct,e),u=fN();return E.jsx(Fe,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});bee.classes=RT;bee.displayName="@mantine/core/MenuLabel";const act={refProp:"ref"},xIe=N.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=Qe("MenuTarget",act,e);if(!gb(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=fN(),o=yg(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=yg(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=yg(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return E.jsx(Pc.Target,{refProp:r,popupType:"menu",ref:t,...i,children:N.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});xIe.displayName="@mantine/core/MenuTarget";const uct={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function El(e){const t=Qe("Menu",uct,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:_,keepMounted:w,...S}=t,T=Gt({name:"Menu",classes:RT,props:t,classNames:m,styles:g,unstyled:y}),[A,{setHovered:k,resetHovered:I}]=Ert(),[R,F]=Ba({value:s,defaultValue:o,finalValue:!1,onChange:u}),[O,L]=N.useState(!1),H=()=>{F(!1),L(!1),R&&(i==null||i())},U=()=>{F(!0),!R&&(r==null||r())},G=()=>{R?H():U()},{openDropdown:Y,closeDropdown:J}=Clt({open:U,close:H,closeDelay:p,openDelay:h}),$=B=>_rt("[data-menu-item]","[data-menu-dropdown]",B),{resolvedClassNames:j,resolvedStyles:W}=iN({classNames:m,styles:g,props:t});return Um(()=>{I()},[R]),E.jsx(nct,{value:{getStyles:T,opened:R,toggleDropdown:G,getItemIndex:$,hovered:A,setHovered:k,openedViaClick:O,setOpenedViaClick:L,closeOnItemClick:l,closeDropdown:d==="click"?H:J,openDropdown:d==="click"?U:Y,closeDropdownImmediately:H,loop:c,trigger:d,unstyled:y,menuItemTabIndex:_},children:E.jsx(Pc,{...S,opened:R,onChange:G,defaultOpened:o,trapFocus:w?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:j,styles:W,unstyled:y,variant:v,keepMounted:w,children:n})})}El.extend=e=>e;El.classes=RT;El.displayName="@mantine/core/Menu";El.Item=vee;El.Label=bee;El.Dropdown=yee;El.Target=xIe;El.Divider=gee;const[lct,NT]=mu("Modal component was not found in tree");var Ey={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const cct={},OL=wt((e,t)=>{const n=Qe("ModalBody",cct,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=NT();return E.jsx(ODe,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});OL.classes=Ey;OL.displayName="@mantine/core/ModalBody";const fct={},FL=wt((e,t)=>{const n=Qe("ModalCloseButton",fct,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=NT();return E.jsx(FDe,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});FL.classes=Ey;FL.displayName="@mantine/core/ModalCloseButton";const dct={},ML=wt((e,t)=>{const n=Qe("ModalContent",dct,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=NT(),f=c.scrollAreaComponent||Pat;return E.jsx(Iat,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:E.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${ze(c.yOffset)} * 2))`},children:u})})});ML.classes=Ey;ML.displayName="@mantine/core/ModalContent";const hct={},$L=wt((e,t)=>{const n=Qe("ModalHeader",hct,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=NT();return E.jsx(MDe,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});$L.classes=Ey;$L.displayName="@mantine/core/ModalHeader";const pct={},LL=wt((e,t)=>{const n=Qe("ModalOverlay",pct,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=NT();return E.jsx($De,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});LL.classes=Ey;LL.displayName="@mantine/core/ModalOverlay";const mct={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:_p("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},gct=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Zi(t),"--modal-size":ur(n,"modal-size"),"--modal-y-offset":ze(r),"--modal-x-offset":ze(i)}}),BL=wt((e,t)=>{const n=Qe("ModalRoot",mct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=Gt({name:m,classes:Ey,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gct});return E.jsx(lct,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:E.jsx(Aat,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});BL.classes=Ey;BL.displayName="@mantine/core/ModalRoot";const yct={},jL=wt((e,t)=>{const n=Qe("ModalTitle",yct,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=NT();return E.jsx(LDe,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});jL.classes=Ey;jL.displayName="@mantine/core/ModalTitle";const vct={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:_p("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},ho=wt((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=Qe("Modal",vct,e),c=!!n||s;return E.jsxs(BL,{ref:t,radius:u,...l,children:[r&&E.jsx(LL,{...i}),E.jsxs(ML,{radius:u,children:[c&&E.jsxs($L,{children:[n&&E.jsx(jL,{children:n}),s&&E.jsx(FL,{...o})]}),E.jsx(OL,{children:a})]})]})});ho.classes=Ey;ho.displayName="@mantine/core/Modal";ho.Root=BL;ho.Overlay=LL;ho.Content=ML;ho.Body=OL;ho.Header=$L;ho.Title=jL;ho.CloseButton=FL;const[bct,xee]=wT(),[xct,wct]=wT();var UL={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const _ct={},Ect=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?ur(t):ur(n,"pg-gap")}}),wee=wt((e,t)=>{const n=Qe("PillGroup",_ct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=xee(),h=(d==null?void 0:d.size)||l||void 0,p=Gt({name:"PillGroup",classes:UL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Ect,stylesCtx:{size:h},rootSelector:"group"});return E.jsx(xct,{value:{size:h,disabled:c},children:E.jsx(Fe,{ref:t,size:h,...p("group"),...f})})});wee.classes=UL;wee.displayName="@mantine/core/PillGroup";const Sct={variant:"default"},Cct=(e,{radius:t},{size:n})=>({root:{"--pill-fz":ur(n,"pill-fz"),"--pill-height":ur(n,"pill-height"),"--pill-radius":t===void 0?void 0:Zi(t)}}),ER=wt((e,t)=>{const n=Qe("Pill",Sct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=wct(),_=xee(),w=m||(b==null?void 0:b.size)||void 0,S=(_==null?void 0:_.variant)==="filled"?"contrast":l||"default",T=Gt({name:"Pill",classes:UL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Cct,stylesCtx:{size:w}});return E.jsxs(Fe,{component:"span",ref:t,variant:S,size:w,...T("root",{variant:S}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[E.jsx("span",{...T("label"),children:c}),f&&E.jsx(bb,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...T("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:A=>{var k;A.preventDefault(),A.stopPropagation(),(k=h==null?void 0:h.onMouseDown)==null||k.call(h,A)},onClick:A=>{var k;A.stopPropagation(),d==null||d(),(k=h==null?void 0:h.onClick)==null||k.call(h,A)}})]})});ER.classes=UL;ER.displayName="@mantine/core/Pill";ER.Group=wee;var wIe={field:"m_45c4369d"};const Tct={type:"visible"},_ee=wt((e,t)=>{const n=Qe("PillsInputField",Tct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=xee(),g=AT(),y=Gt({name:"PillsInputField",classes:wIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return E.jsx(Fe,{component:"input",ref:Ro(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});_ee.classes=wIe;_ee.displayName="@mantine/core/PillsInputField";const Act={},$M=wt((e,t)=>{const n=Qe("PillsInput",Act,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=N.useRef();return E.jsx(bct,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:E.jsx(Xd,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});$M.displayName="@mantine/core/PillsInput";$M.Field=_ee;function Dct({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(oC(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const Ict={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},Eee=wt((e,t)=>{const n=Qe("MultiSelect",Ict,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:_,onOptionSubmit:w,comboboxProps:S,filter:T,limit:A,withScrollArea:k,maxDropdownHeight:I,searchValue:R,defaultSearchValue:F,onSearchChange:O,readOnly:L,disabled:H,onFocus:U,onBlur:G,onPaste:Y,radius:J,rightSection:$,rightSectionWidth:j,rightSectionPointerEvents:W,rightSectionProps:B,leftSection:q,leftSectionWidth:Z,leftSectionPointerEvents:re,leftSectionProps:xe,inputContainer:pe,inputWrapperOrder:Te,withAsterisk:ke,labelProps:it,descriptionProps:Re,errorProps:ut,wrapperProps:Ke,description:Ct,label:gt,error:Ie,maxValues:Ve,searchable:ft,nothingFoundMessage:_t,withCheckIcon:Mt,checkIconPosition:st,hidePickedOptions:X,withErrorStyles:de,name:we,form:ae,id:he,clearable:Ee,clearButtonProps:$e,hiddenInputProps:Be,placeholder:lt,hiddenInputValuesDivider:Je,required:Xt,mod:fn,renderOption:Wt,onRemove:an,onClear:Sn,scrollAreaProps:Mn,...ki}=n,di=ol(he),Li=WDe(m),As=WZ(Li),Lr=ree({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),Lr.resetSelectedOption()}}),{styleProps:ls,rest:{type:ll,autoComplete:Fo,...Ha}}=M_(ki),[Rr,Ri]=Ba({value:c,defaultValue:f,finalValue:[],onChange:d}),[hi,Vs]=Ba({value:R,defaultValue:F,finalValue:"",onChange:O}),ri=Gt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Ni,resolvedStyles:ve}=iN({props:n,styles:o,classNames:r}),ce=Dt=>{h==null||h(Dt),Dt.key===" "&&!ft&&(Dt.preventDefault(),Lr.toggleDropdown()),Dt.key==="Backspace"&&hi.length===0&&Rr.length>0&&(an==null||an(Rr[Rr.length-1]),Ri(Rr.slice(0,Rr.length-1)))},_e=Rr.map((Dt,Ht)=>{var bn,rr;return E.jsx(ER,{withRemoveButton:!L&&!((bn=As[Dt])!=null&&bn.disabled),onRemove:()=>{Ri(Rr.filter(mr=>Dt!==mr)),an==null||an(Dt)},unstyled:a,disabled:H,...ri("pill"),children:((rr=As[Dt])==null?void 0:rr.label)||Dt},`${Dt}-${Ht}`)});N.useEffect(()=>{_&&Lr.selectFirstOption()},[_,Rr]);const Ue=Ee&&Rr.length>0&&!H&&!L&&E.jsx(Gr.ClearButton,{size:l,...$e,onClear:()=>{Sn==null||Sn(),Ri([]),Vs("")}}),je=Dct({data:Li,value:Rr});return E.jsxs(E.Fragment,{children:[E.jsxs(Gr,{store:Lr,classNames:Ni,styles:ve,unstyled:a,size:l,readOnly:L,__staticSelector:"MultiSelect",onOptionSubmit:Dt=>{w==null||w(Dt),Vs(""),Lr.updateSelectedOptionIndex("selected"),Rr.includes(As[Dt].value)?(Ri(Rr.filter(Ht=>Ht!==As[Dt].value)),an==null||an(As[Dt].value)):Rr.length<Ve&&Ri([...Rr,As[Dt].value])},...S,children:[E.jsx(Gr.DropdownTarget,{children:E.jsx($M,{...ls,__staticSelector:"MultiSelect",classNames:Ni,styles:ve,unstyled:a,size:l,className:i,style:s,variant:p,disabled:H,radius:J,rightSection:$||Ue||E.jsx(Gr.Chevron,{size:l,error:Ie,unstyled:a}),rightSectionPointerEvents:W||(Ue?"all":"none"),rightSectionWidth:j,rightSectionProps:B,leftSection:q,leftSectionWidth:Z,leftSectionPointerEvents:re,leftSectionProps:xe,inputContainer:pe,inputWrapperOrder:Te,withAsterisk:ke,labelProps:it,descriptionProps:Re,errorProps:ut,wrapperProps:Ke,description:Ct,label:gt,error:Ie,multiline:!0,withErrorStyles:de,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Ue?"all":"none"),multiline:!0},pointer:!ft,onClick:()=>ft?Lr.openDropdown():Lr.toggleDropdown(),"data-expanded":Lr.dropdownOpened||void 0,id:di,required:Xt,mod:fn,children:E.jsxs(ER.Group,{disabled:H,unstyled:a,...ri("pillsList"),children:[_e,E.jsx(Gr.EventsTarget,{autoComplete:Fo,children:E.jsx($M.Field,{...Ha,ref:t,id:di,placeholder:lt,type:!ft&&!lt?"hidden":"visible",...ri("inputField"),unstyled:a,onFocus:Dt=>{U==null||U(Dt),ft&&Lr.openDropdown()},onBlur:Dt=>{G==null||G(Dt),Lr.closeDropdown(),Vs("")},onKeyDown:ce,value:hi,onChange:Dt=>{Vs(Dt.currentTarget.value),ft&&Lr.openDropdown(),_&&Lr.selectFirstOption()},disabled:H,readOnly:L||!ft,pointer:!ft})})]})})}),E.jsx(cIe,{data:X?je:Li,hidden:L||H,filter:T,search:hi,limit:A,hiddenWhenEmpty:!ft||!_t||X&&je.length===0&&hi.trim().length===0,withScrollArea:k,maxDropdownHeight:I,filterOptions:ft,value:Rr,checkIconPosition:st,withCheckIcon:Mt,nothingFoundMessage:_t,unstyled:a,labelId:gt?`${di}-label`:void 0,"aria-label":gt?void 0:ki["aria-label"],renderOption:Wt,scrollAreaProps:Mn})]}),E.jsx(Gr.HiddenInput,{name:we,valuesDivider:Je,value:Rr,form:ae,disabled:H,...Be})]})});Eee.classes={...Xd.classes,...Gr.classes};Eee.displayName="@mantine/core/MultiSelect";var _Ie={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const kct={},Rct=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":qo(r)}}},zL=ya((e,t)=>{const n=Qe("NavLink",kct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:b,disableRightSectionRotation:_,noWrap:w,childrenOffset:S,onKeyDown:T,autoContrast:A,mod:k,...I}=n,R=Gt({name:"NavLink",props:n,classes:_Ie,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Rct}),[F,O]=Ba({value:l,defaultValue:c,finalValue:!1,onChange:f}),L=!!d,H=U=>{h==null||h(U),L&&(U.preventDefault(),O(!F))};return E.jsxs(E.Fragment,{children:[E.jsxs(Ff,{...R("root"),component:"a",ref:t,onClick:H,onKeyDown:U=>{T==null||T(U),U.nativeEvent.code==="Space"&&L&&(U.preventDefault(),O(!F))},unstyled:a,mod:[{disabled:m,active:p,expanded:F},k],...I,children:[g&&E.jsx(Fe,{component:"span",...R("section"),mod:{position:"left"},children:g}),E.jsxs(Fe,{...R("body"),mod:{"no-wrap":w},children:[E.jsx(Fe,{component:"span",...R("label"),children:v}),E.jsx(Fe,{component:"span",mod:{active:p},...R("description"),children:b})]}),(L||y)&&E.jsx(Fe,{...R("section"),component:"span",mod:{rotate:F&&!_,position:"right"},children:L?y||E.jsx(kL,{...R("chevron")}):y})]}),E.jsx(_L,{in:F,...R("collapse"),children:E.jsx("div",{...R("children"),children:d})})]})});zL.classes=_Ie;zL.displayName="@mantine/core/NavLink";var EIe={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const Nct={withCloseButton:!0},Pct=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Zi(t),"--notification-color":n?Ki(n,e):void 0}}),See=wt((e,t)=>{const n=Qe("Notification",Nct,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:y,variant:v,vars:b,mod:_,...w}=n,S=Gt({name:"Notification",classes:EIe,props:n,className:r,style:m,classNames:p,styles:g,unstyled:y,vars:b,varsResolver:Pct});return E.jsxs(Fe,{...S("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},_],ref:t,variant:v,...w,role:"alert",children:[c&&!o&&E.jsx("div",{...S("icon"),children:c}),o&&E.jsx(Qc,{size:28,color:i,...S("loader")}),E.jsxs("div",{...S("body"),children:[l&&E.jsx("div",{...S("title"),children:l}),E.jsx(Fe,{...S("description"),mod:{"data-with-title":!!l},children:f})]}),a&&E.jsx(bb,{iconSize:16,color:"gray",...h,unstyled:y,onClick:d,...S("closeButton")})]})});See.classes=EIe;See.displayName="@mantine/core/Notification";function SIe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var SR;(function(e){e.event="event",e.props="prop"})(SR||(SR={}));function I1(){}function Oct(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function CR(e){return!!(e||"").match(/\d/)}function mS(e){return e==null}function Fct(e){return typeof e=="number"&&isNaN(e)}function CIe(e){return mS(e)||Fct(e)||typeof e=="number"&&!isFinite(e)}function TIe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Mct(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function $ct(e,t,n){var r=Mct(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function Lct(e){var t=N.useRef(e);t.current=e;var n=N.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function Cee(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function Bct(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function AIe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function ome(e,t){return Array(t+1).join(e)}function DIe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+ome("0",Math.abs(o))+i:o>=a?i=i+ome("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function ame(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=Cee(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=AIe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function Wx(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var IIe=Oct(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),jct=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function Uct(e,t,n){return Math.min(Math.max(e,t),n)}function xz(e){return Math.max(e.selectionStart,e.selectionEnd)}function zct(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Vct(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function Hct(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function qct(e,t,n,r,i,s,o){o===void 0&&(o=Hct);var a=i.findIndex(function(_){return _}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function ume(e,t,n,r){var i=e.length;if(t=Uct(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function Wct(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(CR(e[n])||CR(e[n-1]));return t}function kIe(e,t,n,r,i,s){s===void 0&&(s=I1);var o=Lct(function(p,m){var g,y;return CIe(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?DIe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=N.useState(function(){return o(mS(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;mS(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return N.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function Gct(e){return e.replace(/[^0-9]/g,"")}function Yct(e){return e}function Kct(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=Yct);var a=e.removeFormatting;a===void 0&&(a=Gct);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=I1);var h=e.onKeyDown;h===void 0&&(h=I1);var p=e.onMouseUp;p===void 0&&(p=I1);var m=e.onFocus;m===void 0&&(m=I1);var g=e.onBlur;g===void 0&&(g=I1);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=Wct);var b=e.isValidInputCharacter;b===void 0&&(b=CR);var _=e.isCharacterSame,w=SIe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),S=kIe(y,u,!!l,o,a,c),T=S[0],A=T.formattedValue,k=T.numAsString,I=S[1],R=N.useRef(),F=N.useRef({formattedValue:A,numAsString:k}),O=function(Ie,Ve){F.current={formattedValue:Ie.formattedValue,numAsString:Ie.value},I(Ie,Ve)},L=N.useState(!1),H=L[0],U=L[1],G=N.useRef(null),Y=N.useRef({setCaretTimeout:null,focusTimeout:null});N.useEffect(function(){return U(!0),function(){clearTimeout(Y.current.setCaretTimeout),clearTimeout(Y.current.focusTimeout)}},[]);var J=o,$=function(Ie,Ve){var ft=parseFloat(Ve);return{formattedValue:Ie,value:Ve,floatValue:isNaN(ft)?void 0:ft}},j=function(Ie,Ve,ft){Ie.selectionStart===0&&Ie.selectionEnd===Ie.value.length||(Wx(Ie,Ve),Y.current.setCaretTimeout=setTimeout(function(){Ie.value===ft&&Ie.selectionStart!==Ve&&Wx(Ie,Ve)},0))},W=function(Ie,Ve,ft){return ume(Ie,Ve,v(Ie),ft)},B=function(Ie,Ve,ft){var _t=v(Ve),Mt=qct(Ve,A,Ie,ft,_t,b,_);return Mt=ume(Ve,Mt,_t),Mt},q=function(Ie){var Ve=Ie.formattedValue;Ve===void 0&&(Ve="");var ft=Ie.input,_t=Ie.source,Mt=Ie.event,st=Ie.numAsString,X;if(ft){var de=Ie.inputValue||ft.value,we=xz(ft);ft.value=Ve,X=B(de,Ve,we),X!==void 0&&j(ft,X,Ve)}Ve!==A&&O($(Ve,st),{event:Mt,source:_t})};N.useEffect(function(){var Ie=F.current,Ve=Ie.formattedValue,ft=Ie.numAsString;(A!==Ve||k!==ft)&&O($(A,k),{event:void 0,source:SR.props})},[A,k]);var Z=G.current?xz(G.current):void 0,re=typeof window<"u"?N.useLayoutEffect:N.useEffect;re(function(){var Ie=G.current;if(A!==F.current.formattedValue&&Ie){var Ve=B(F.current.formattedValue,A,Z);Ie.value=A,j(Ie,Ve,A)}},[A]);var xe=function(Ie,Ve,ft){var _t=Ve.target,Mt=R.current?jct(R.current,_t.selectionEnd):IIe(A,Ie),st=Object.assign(Object.assign({},Mt),{lastValue:A}),X=a(Ie,st),de=J(X);if(X=a(de,void 0),f&&!f($(de,X))){var we=Ve.target,ae=xz(we),he=B(Ie,A,ae);return we.value=A,j(we,he,A),!1}return q({formattedValue:de,numAsString:X,inputValue:Ie,event:Ve,source:ft,input:Ve.target}),!0},pe=function(Ie,Ve){Ve===void 0&&(Ve=0);var ft=Ie.selectionStart,_t=Ie.selectionEnd;R.current={selectionStart:ft,selectionEnd:_t+Ve}},Te=function(Ie){var Ve=Ie.target,ft=Ve.value,_t=xe(ft,Ie,SR.event);_t&&d(Ie),R.current=void 0},ke=function(Ie){var Ve=Ie.target,ft=Ie.key,_t=Ve.selectionStart,Mt=Ve.selectionEnd,st=Ve.value;st===void 0&&(st="");var X;ft==="ArrowLeft"||ft==="Backspace"?X=Math.max(_t-1,0):ft==="ArrowRight"?X=Math.min(_t+1,st.length):ft==="Delete"&&(X=_t);var de=0;ft==="Delete"&&_t===Mt&&(de=1);var we=ft==="ArrowLeft"||ft==="ArrowRight";if(X===void 0||_t!==Mt&&!we){h(Ie),pe(Ve,de);return}var ae=X;if(we){var he=ft==="ArrowLeft"?"left":"right";ae=W(st,X,he),ae!==X&&Ie.preventDefault()}else ft==="Delete"&&!b(st[X])?ae=W(st,X,"right"):ft==="Backspace"&&!b(st[X])&&(ae=W(st,X,"left"));ae!==X&&j(Ve,ae,st),h(Ie),pe(Ve,de)},it=function(Ie){var Ve=Ie.target,ft=function(){var _t=Ve.selectionStart,Mt=Ve.selectionEnd,st=Ve.value;if(st===void 0&&(st=""),_t===Mt){var X=W(st,_t);X!==_t&&j(Ve,X,st)}};ft(),requestAnimationFrame(function(){ft()}),p(Ie),pe(Ve)},Re=function(Ie){Ie.persist&&Ie.persist();var Ve=Ie.target,ft=Ie.currentTarget;G.current=Ve,Y.current.focusTimeout=setTimeout(function(){var _t=Ve.selectionStart,Mt=Ve.selectionEnd,st=Ve.value;st===void 0&&(st="");var X=W(st,_t);X!==_t&&!(_t===0&&Mt===st.length)&&j(Ve,X,st),m(Object.assign(Object.assign({},Ie),{currentTarget:ft}))},0)},ut=function(Ie){G.current=null,clearTimeout(Y.current.focusTimeout),clearTimeout(Y.current.setCaretTimeout),g(Ie)},Ke=H&&zct()?"numeric":void 0,Ct=Object.assign({inputMode:Ke},w,{type:t,value:A,onChange:Te,onKeyDown:ke,onMouseUp:it,onFocus:Re,onBlur:ut});if(n==="text")return i?yi.createElement(yi.Fragment,null,i(A,w)||null):yi.createElement("span",Object.assign({},w,{ref:s}),A);if(r){var gt=r;return yi.createElement(gt,Object.assign({},Ct,{ref:s}))}return yi.createElement("input",Object.assign({},Ct,{ref:s}))}function lme(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=VL(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=Cee(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=AIe(p,n,!!r)),l&&(h=$ct(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function VL(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function Xct(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function Qct(e,t){return new RegExp("(^-)|[0-9]|"+TIe(e),"g")}function Jct(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function Zct(e,t,n){var r;t===void 0&&(t=Vct(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=VL(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(CR(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(G,Y,J){var $=!1,j=!1;s.startsWith("-")?$=!1:G.startsWith("--")?($=!1,j=!0):o.startsWith("-")&&G.length===o.length?$=!1:G[0]==="-"&&($=!0);var W=$?1:0;return j&&(W=2),W&&(G=G.substring(W),Y-=W,J-=W),{value:G,start:Y,end:J,hasNegation:$}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var _=y(t.lastValue,u.start,u.end),w=_.start,S=_.end,T=_.value,A=e.substring(c,f);e.length&&T.length&&(w>T.length-o.length||S<s.length)&&!(A&&o.startsWith(A))&&(e=T);var k=0;e.startsWith(s)?k+=s.length:c<s.length&&(k=c),e=e.substring(k),f-=k;var I=e.length,R=e.length-o.length;e.endsWith(o)?I=R:(f>R||f>e.length-o.length)&&(I=f),e=e.substring(0,I),e=Xct(b?"-"+e:e,i),e=(e.match(Qct(p))||[]).join("");var F=e.indexOf(p);e=e.replace(new RegExp(TIe(p),"g"),function(G,Y){return Y===F?".":""});var O=Cee(e,i),L=O.beforeDecimal,H=O.afterDecimal,U=O.addNegation;return l.end-l.start<u.end-u.start&&L===""&&m&&!parseFloat(H)&&(e=U?"-":""),e}function eft(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function tft(e){var t=VL(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function nft(e){e=tft(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=I1);var s=e.onBlur;s===void 0&&(s=I1);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=SIe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=VL(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(U){return lme(U,e)},b=function(U,G){return Zct(U,G,e)},_=mS(f)?c:f,w=d??Jct(_,l,t);mS(f)?mS(c)||(w=w||typeof c=="number"):w=w||typeof f=="number";var S=function(U){return CIe(U)?U:(typeof U=="number"&&(U=DIe(U)),w&&typeof a=="number"?ame(U,a,!!u):U)},T=kIe(S(f),S(c),!!w,v,b,h),A=T[0],k=A.numAsString,I=A.formattedValue,R=T[1],F=function(U){var G=U.target,Y=U.key,J=G.selectionStart,$=G.selectionEnd,j=G.value;if(j===void 0&&(j=""),(Y==="Backspace"||Y==="Delete")&&$<l.length){U.preventDefault();return}if(J!==$){i(U);return}Y==="Backspace"&&j[0]==="-"&&J===l.length+1&&n&&Wx(G,1),a&&u&&(Y==="Backspace"&&j[J-1]===g?(Wx(G,J-1),U.preventDefault()):Y==="Delete"&&j[J]===g&&U.preventDefault()),y!=null&&y.includes(Y)&&j[J]===g&&Wx(G,J+1);var W=o===!0?",":o;Y==="Backspace"&&j[J-1]===W&&Wx(G,J-1),Y==="Delete"&&j[J]===W&&Wx(G,J+1),i(U)},O=function(U){var G=k;if(G.match(/\d/g)||(G=""),r||(G=Bct(G)),u&&a&&(G=ame(G,a,u)),G!==k){var Y=lme(G,e);R({formattedValue:Y,value:G,floatValue:parseFloat(G)},{event:U,source:SR.event})}s(U)},L=function(U){return U===g?!0:CR(U)},H=function(U){var G=U.currentValue,Y=U.lastValue,J=U.formattedValue,$=U.currentValueIndex,j=U.formattedValueIndex,W=G[$],B=J[j],q=IIe(Y,G),Z=q.to;return $>=Z.start&&$<Z.end&&y&&y.includes(W)&&B===g?!0:W===B};return Object.assign(Object.assign({},p),{value:I,valueIsNumericString:!1,isValidInputCharacter:L,isCharacterSame:H,onValueChange:R,format:v,removeFormatting:b,getCaretBoundary:function(U){return eft(U,e)},onKeyDown:F,onBlur:O})}function rft(e){var t=nft(e);return yi.createElement(Kct,Object.assign({},t))}function cme({direction:e,style:t,...n}){return E.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:E.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var gG={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const ift=/^(0\.0*|-0(\.0*)?)$/,sft=/^-?0\d+(\.\d+)?\.?$/;function oft(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function fme(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const aft={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},uft=(e,{size:t})=>({controls:{"--ni-chevron-size":ur(t,"ni-chevron-size")}}),Tee=wt((e,t)=>{const n=Qe("NumberInput",aft,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:_,decimalScale:w,onKeyDown:S,onKeyDownCapture:T,handlersRef:A,startValue:k,disabled:I,rightSectionPointerEvents:R,allowNegative:F,readOnly:O,size:L,rightSectionWidth:H,stepHoldInterval:U,stepHoldDelay:G,allowLeadingZeros:Y,withKeyboardEvents:J,trimLeadingZeroesOnBlur:$,...j}=n,W=Gt({name:"NumberInput",classes:gG,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:uft}),{resolvedClassNames:B,resolvedStyles:q}=iN({classNames:i,styles:s,props:n}),[Z,re]=Ba({value:c,defaultValue:f,onChange:u}),xe=G!==void 0&&U!==void 0,pe=N.useRef(null),Te=N.useRef(null),ke=N.useRef(0),it=(X,de)=>{de.source==="event"&&re(oft(X.floatValue)&&!ift.test(X.value)&&!(Y&&sft.test(X.value))?X.floatValue:X.value),l==null||l(X,de)},Re=X=>{const de=String(X).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return de?Math.max(0,(de[1]?de[1].length:0)-(de[2]?+de[2]:0)):0},ut=X=>{pe.current&&typeof X<"u"&&pe.current.setSelectionRange(X,X)},Ke=N.useRef();Ke.current=()=>{let X;const de=Re(Z),we=Re(p),ae=Math.max(de,we),he=10**ae;if(typeof Z!="number"||Number.isNaN(Z))X=vg(k,h,d);else if(d!==void 0){const $e=(Math.round(Z*he)+Math.round(p*he))/he;X=$e<=d?$e:d}else X=(Math.round(Z*he)+Math.round(p*he))/he;const Ee=X.toFixed(ae);re(parseFloat(Ee)),l==null||l({floatValue:parseFloat(Ee),formattedValue:Ee,value:Ee},{source:"increment"}),setTimeout(()=>{var $e;return ut(($e=pe.current)==null?void 0:$e.value.length)},0)};const Ct=N.useRef();Ct.current=()=>{let X;const de=h!==void 0?h:F?Number.MIN_SAFE_INTEGER:0,we=Re(Z),ae=Re(p),he=Math.max(we,ae),Ee=10**he;if(typeof Z!="number"||Number.isNaN(Z))X=vg(k,de,d);else{const Be=(Math.round(Z*Ee)-Math.round(p*Ee))/Ee;X=de!==void 0&&Be<de?de:Be}const $e=X.toFixed(he);re(parseFloat($e)),l==null||l({floatValue:parseFloat($e),formattedValue:$e,value:$e},{source:"decrement"}),setTimeout(()=>{var Be;return ut((Be=pe.current)==null?void 0:Be.value.length)},0)};const gt=X=>{S==null||S(X),!(O||!J)&&(X.key==="ArrowUp"&&(X.preventDefault(),Ke.current()),X.key==="ArrowDown"&&(X.preventDefault(),Ct.current()))},Ie=X=>{if(T==null||T(X),X.key==="Backspace"){const de=pe.current;de.selectionStart===0&&de.selectionStart===de.selectionEnd&&(X.preventDefault(),window.setTimeout(()=>ut(0),0))}};iZ(A,{increment:Ke.current,decrement:Ct.current});const Ve=X=>{X?Ke.current():Ct.current(),ke.current+=1},ft=X=>{if(Ve(X),xe){const de=typeof U=="number"?U:U(ke.current);Te.current=window.setTimeout(()=>ft(X),de)}},_t=(X,de)=>{var we;X.preventDefault(),(we=pe.current)==null||we.focus(),Ve(de),xe&&(Te.current=window.setTimeout(()=>ft(de),G))},Mt=()=>{Te.current&&window.clearTimeout(Te.current),Te.current=null,ke.current=0},st=E.jsxs("div",{...W("controls"),children:[E.jsx(Ff,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:I||typeof Z=="number"&&d!==void 0&&Z>=d,mod:{direction:"up"},onMouseDown:X=>X.preventDefault(),onPointerDown:X=>{_t(X,!0)},onPointerUp:Mt,onPointerLeave:Mt,children:E.jsx(cme,{direction:"up"})}),E.jsx(Ff,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:I||typeof Z=="number"&&h!==void 0&&Z<=h,mod:{direction:"down"},onMouseDown:X=>X.preventDefault(),onPointerDown:X=>{_t(X,!1)},onPointerUp:Mt,onPointerLeave:Mt,children:E.jsx(cme,{direction:"down"})})]});return E.jsx(Xd,{component:rft,allowNegative:F,className:Ao(gG.root,r),size:L,...j,readOnly:O,disabled:I,value:Z,getInputRef:Ro(t,pe),onValueChange:it,rightSection:m||O?g:g||st,classNames:B,styles:q,unstyled:o,__staticSelector:"NumberInput",decimalScale:_?w:0,onKeyDown:gt,onKeyDownCapture:Ie,rightSectionPointerEvents:R??(I?"none":void 0),rightSectionWidth:H??`var(--ni-right-section-width-${L||"sm"})`,allowLeadingZeros:Y,onBlur:X=>{if(b==null||b(X),v==="blur"&&typeof Z=="number"&&vg(Z,h,d)!==Z&&re(vg(Z,h,d)),$&&typeof Z=="string"){const de=Z.replace(/^0+/,""),we=parseFloat(de);re(Number.isNaN(we)?de:we)}},isAllowed:X=>v==="strict"?y?y(X)&&fme(X.floatValue,h,d):fme(X.floatValue,h,d):y?y(X):!0})});Tee.classes={...Xd.classes,...gG};Tee.displayName="@mantine/core/NumberInput";const[lft,RIe]=mu("Progress.Root component was not found in tree");var dN={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const cft={},Aee=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Qe("ProgressLabel",cft,e),u=RIe();return E.jsx(Fe,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});Aee.classes=dN;Aee.displayName="@mantine/core/ProgressLabel";const fft={},dft=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":ur(t,"progress-size"),"--progress-radius":n===void 0?void 0:Zi(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),HL=wt((e,t)=>{const n=Qe("ProgressRoot",fft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=Gt({name:"Progress",classes:dN,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dft});return E.jsx(lft,{value:{getStyles:d,autoContrast:l},children:E.jsx(Fe,{ref:t,...d("root"),...f})})});HL.classes=dN;HL.displayName="@mantine/core/ProgressRoot";const hft={withAria:!0},qL=wt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=Qe("ProgressSection",hft,e),p=RIe(),m=No(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return E.jsx(Fe,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Ki(l,m),"--progress-label-color":_T(p.autoContrast,m)?vb({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});qL.classes=dN;qL.displayName="@mantine/core/ProgressSection";const pft={},PT=wt((e,t)=>{const n=Qe("Progress",pft,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=iN({classNames:i,styles:s,props:n});return E.jsx(HL,{ref:t,classNames:d,styles:h,vars:o,...f,children:E.jsx(qL,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});PT.classes=dN;PT.displayName="@mantine/core/Progress";PT.Section=qL;PT.Root=HL;PT.Label=Aee;const[mft,NIe]=wT(),[gft,yft]=wT();var PIe={card:"m_9dc8ae12"};const vft={withBorder:!0},bft=(e,{radius:t})=>({card:{"--card-radius":Zi(t)}}),Dee=wt((e,t)=>{const n=Qe("RadioCard",vft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=Gt({name:"RadioCard",classes:PIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:bft,rootSelector:"card"}),{dir:v}=by(),b=NIe(),_=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,w=p||(b==null?void 0:b.name),S=T=>{if(m==null||m(T),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(T.nativeEvent.code)){T.preventDefault();const A=Array.from(document.querySelectorAll(`[role="radio"][name="${w||"__mantine"}"]`)),k=A.findIndex(F=>F===T.target),I=k+1>=A.length?0:k+1,R=k-1<0?A.length-1:k-1;T.nativeEvent.code==="ArrowDown"&&(A[I].focus(),A[I].click()),T.nativeEvent.code==="ArrowUp"&&(A[R].focus(),A[R].click()),T.nativeEvent.code==="ArrowLeft"&&(A[v==="ltr"?R:I].focus(),A[v==="ltr"?R:I].click()),T.nativeEvent.code==="ArrowRight"&&(A[v==="ltr"?I:R].focus(),A[v==="ltr"?I:R].click())}};return E.jsx(gft,{value:{checked:_},children:E.jsx(Ff,{ref:t,mod:[{"with-border":f,checked:_},c],...y("card"),...g,role:"radio","aria-checked":_,name:w,onClick:T=>{h==null||h(T),b==null||b.onChange(d||"")},onKeyDown:S})})});Dee.displayName="@mantine/core/RadioCard";Dee.classes=PIe;const xft={},Iee=wt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=Qe("RadioGroup",xft,e),f=ol(u),[d,h]=Ba({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return E.jsx(mft,{value:{value:d,onChange:p,size:s,name:f},children:E.jsx(mo.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:E.jsx(see,{role:"radiogroup",children:a})})})});Iee.classes=mo.Wrapper.classes;Iee.displayName="@mantine/core/RadioGroup";function OIe({size:e,style:t,...n}){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:ze(e),height:ze(e),...t},"aria-hidden":!0,...n,children:E.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var FIe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const wft={icon:OIe},_ft=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=c0({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":ur(r,"radio-size"),"--radio-radius":t===void 0?void 0:Zi(t),"--radio-color":s==="outline"?u:Ki(n,e),"--radio-icon-size":ur(r,"radio-icon-size"),"--radio-icon-color":i?Ki(i,e):_T(o,e)?vb({color:n,theme:e,autoContrast:o}):void 0}}},kee=wt((e,t)=>{const n=Qe("RadioIndicator",wft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,_=Gt({name:"RadioIndicator",classes:FIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_ft,rootSelector:"indicator"}),w=yft(),S=typeof p=="boolean"?p:(w==null?void 0:w.checked)||!1;return E.jsx(Fe,{ref:t,..._("indicator",{variant:g}),variant:g,mod:[{checked:S,disabled:y},m],...v,children:E.jsx(b,{..._("icon")})})});kee.displayName="@mantine/core/RadioIndicator";kee.classes=FIe;var MIe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const Eft={labelPosition:"right"},Sft=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=c0({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":ur(t,"radio-size"),"--radio-radius":n===void 0?void 0:Zi(n),"--radio-color":s==="outline"?u:Ki(r,e),"--radio-icon-color":i?Ki(i,e):_T(o,e)?vb({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":ur(t,"radio-icon-size")}}},Qg=wt((e,t)=>{const n=Qe("Radio",Eft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:_=OIe,rootRef:w,iconColor:S,onChange:T,mod:A,...k}=n,I=Gt({name:"Radio",classes:MIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Sft}),R=NIe(),F=(R==null?void 0:R.size)??c,O=n.size?c:F,{styleProps:L,rest:H}=M_(k),U=ol(l),G=R?{checked:R.value===H.value,name:H.name??R.name,onChange:Y=>{R.onChange(Y),T==null||T(Y)}}:{};return E.jsx(RL,{...I("root"),__staticSelector:"Radio",__stylesApiProps:n,id:U,size:O,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":G.checked||void 0,variant:y,ref:w,mod:A,...L,...b,children:E.jsxs(Fe,{...I("inner"),mod:{"label-position":d},children:[E.jsx(Fe,{...I("radio",{focusable:!0,variant:y}),onChange:T,...H,...G,component:"input",mod:{error:!!p},ref:t,id:U,disabled:v,type:"radio"}),E.jsx(_,{...I("icon"),"aria-hidden":!0})]})})});Qg.classes=MIe;Qg.displayName="@mantine/core/Radio";Qg.Group=Iee;Qg.Card=Dee;Qg.Indicator=kee;const Cft={duration:100,transition:"fade"};function Tft(e,t){return{...Cft,...t,...e}}function Aft({offset:e,position:t}){const[n,r]=N.useState(!1),i=N.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=IZ({placement:t,middleware:[CZ({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=N.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return N.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=Rg(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var WL={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const Dft={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:_p("popover")},Ift=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Zi(t),"--tooltip-bg":n?Ki(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Ree=wt((e,t)=>{const n=Qe("TooltipFloating",Dft,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:b,vars:_,portalProps:w,...S}=n,T=No(),A=Gt({name:"TooltipFloating",props:n,classes:WL,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:_,varsResolver:Ift}),{handleMouseMove:k,x:I,y:R,opened:F,boundaryRef:O,floating:L,setOpened:H}=Aft({offset:p,position:m});if(!gb(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const U=Ro(O,r.ref,t),G=J=>{var $,j;(j=($=r.props).onMouseEnter)==null||j.call($,J),k(J),H(!0)},Y=J=>{var $,j;(j=($=r.props).onMouseLeave)==null||j.call($,J),H(!1)};return E.jsxs(E.Fragment,{children:[E.jsx(TT,{...w,withinPortal:s,children:E.jsx(Fe,{...S,...A("tooltip",{style:{...fZ(o,T),zIndex:y,display:!v&&F?"block":"none",top:(R&&Math.round(R))??"",left:(I&&Math.round(I))??""}}),variant:b,ref:L,mod:{multiline:g},children:h})}),N.cloneElement(r,{...r.props,[i]:U,onMouseEnter:G,onMouseLeave:Y})]})});Ree.classes=WL;Ree.displayName="@mantine/core/TooltipFloating";const $Ie=N.createContext(!1),kft=$Ie.Provider,Rft=()=>N.useContext($Ie),Nft={openDelay:0,closeDelay:0};function LIe(e){const{openDelay:t,closeDelay:n,children:r}=Qe("TooltipGroup",Nft,e);return E.jsx(kft,{value:!0,children:E.jsx(Bot,{delay:{open:t,close:n},children:r})})}LIe.displayName="@mantine/core/TooltipGroup";function Pft(e){var S,T,A;const[t,n]=N.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=Rft(),o=ol(),{delay:a,currentId:u,setCurrentId:l}=wDe(),c=N.useCallback(k=>{n(k),k&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=IZ({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[gDe(e.offset),CZ({padding:8}),dG(),yDe({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[hG()]:[]]}),{getReferenceProps:b,getFloatingProps:_}=Wot([Lot(h,{enabled:(S=e.events)==null?void 0:S.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((T=e.events)!=null&&T.touch)}),qot(h,{enabled:(A=e.events)==null?void 0:A.focus,visibleOnly:!0}),Yot(h,{role:"tooltip"}),Vot(h,{enabled:typeof e.opened>"u"}),jot(h,{id:o})]);DDe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),Um(()=>{var k;(k=e.onPositionChange)==null||k.call(e,g)},[g]);const w=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:_,getReferenceProps:b,isGroupPhase:w,opened:i,placement:g}}const dme={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:_p("popover"),positionDependencies:[]},Oft=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Zi(t),"--tooltip-bg":n?Ki(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),xs=wt((e,t)=>{const n=Qe("Tooltip",dme,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:b,arrowSize:_,arrowOffset:w,arrowRadius:S,arrowPosition:T,offset:A,transitionProps:k,multiline:I,events:R,zIndex:F,disabled:O,positionDependencies:L,onClick:H,onMouseEnter:U,onMouseLeave:G,inline:Y,variant:J,keepMounted:$,vars:j,portalProps:W,mod:B,floatingStrategy:q,...Z}=Qe("Tooltip",dme,n),{dir:re}=by(),xe=N.useRef(null),pe=Pft({position:_De(re,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:R,arrowRef:xe,arrowOffset:w,offset:typeof A=="number"?A+(b?_/2:0):A,positionDependencies:[...L,r],inline:Y,strategy:q}),Te=Gt({name:"Tooltip",props:n,classes:WL,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:j,varsResolver:Oft});if(!gb(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ke=Ro(pe.reference,r.ref,t),it=Tft(k,{duration:100,transition:"fade"});return E.jsxs(E.Fragment,{children:[E.jsx(TT,{...W,withinPortal:f,children:E.jsx(wy,{...it,keepMounted:$,mounted:!O&&!!pe.opened,duration:pe.isGroupPhase?10:it.duration,children:Re=>E.jsxs(Fe,{...Z,variant:J,mod:[{multiline:I},B],...pe.getFloatingProps({ref:pe.floating,className:Te("tooltip").className,style:{...Te("tooltip").style,...Re,zIndex:F,top:pe.y??0,left:pe.x??0}}),children:[o,E.jsx(kZ,{ref:xe,arrowX:pe.arrowX,arrowY:pe.arrowY,visible:b,position:pe.placement,arrowSize:_,arrowOffset:w,arrowRadius:S,arrowPosition:T,...Te("arrow")})]})})}),N.cloneElement(r,pe.getReferenceProps({onClick:H,onMouseEnter:U,onMouseLeave:G,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:ke,className:Ao(v,r.props.className),...r.props}))]})});xs.classes=WL;xs.displayName="@mantine/core/Tooltip";xs.Floating=Ree;xs.Group=LIe;var BIe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const Fft={withItemsBorders:!0},Mft=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Zi(t),"--sc-color":n?Ki(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":ur(i,"sc-padding"),"--sc-font-size":Pl(i)}}),GL=wt((e,t)=>{var re,xe;const n=Qe("SegmentedControl",Fft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:b,color:_,transitionDuration:w,transitionTimingFunction:S,variant:T,autoContrast:A,withItemsBorders:k,mod:I,...R}=n,F=Gt({name:"SegmentedControl",props:n,classes:BIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Mft}),O=No(),L=l.map(pe=>typeof pe=="string"?{label:pe,value:pe}:pe),H=Grt(),[U,G]=N.useState(null),[Y,J]=N.useState({}),$=(pe,Te)=>{Y[Te]=pe,J(Y)},[j,W]=Ba({value:c,defaultValue:f,finalValue:Array.isArray(l)?((re=L.find(pe=>!pe.disabled))==null?void 0:re.value)??((xe=l[0])==null?void 0:xe.value)??null:null,onChange:d}),B=ol(p),q=L.map(pe=>N.createElement(Fe,{...F("control"),mod:{active:j===pe.value,orientation:v},key:pe.value},N.createElement("input",{...F("input"),disabled:m||pe.disabled,type:"radio",name:B,value:pe.value,id:`${B}-${pe.value}`,checked:j===pe.value,onChange:()=>!g&&W(pe.value),"data-focus-ring":O.focusRing,key:`${pe.value}-input`}),N.createElement(Fe,{component:"label",...F("label"),mod:{active:j===pe.value&&!(m||pe.disabled),disabled:m||pe.disabled,"read-only":g},htmlFor:`${B}-${pe.value}`,ref:Te=>$(Te,pe.value),__vars:{"--sc-label-color":_!==void 0?vb({color:_,theme:O,autoContrast:A}):void 0},key:`${pe.value}-label`},E.jsx("span",{...F("innerLabel"),children:pe.label})))),Z=Ro(t,pe=>G(pe));return l.length===0?null:E.jsxs(Fe,{...F("root"),variant:T,size:h,ref:Z,mod:[{"full-width":y,orientation:v,initialized:H,"with-items-borders":k},I],...R,role:"radiogroup",children:[typeof j=="string"&&E.jsx(FZ,{target:Y[j],parent:U,component:"span",transitionDuration:"var(--sc-transition-duration)",...F("indicator")}),q]})});GL.classes=BIe;GL.displayName="@mantine/core/SegmentedControl";const $ft={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},OT=wt((e,t)=>{const n=Qe("Select",$ft,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:_,readOnly:w,disabled:S,filter:T,limit:A,withScrollArea:k,maxDropdownHeight:I,size:R,searchable:F,rightSection:O,checkIconPosition:L,withCheckIcon:H,nothingFoundMessage:U,name:G,form:Y,searchValue:J,defaultSearchValue:$,onSearchChange:j,allowDeselect:W,error:B,rightSectionPointerEvents:q,id:Z,clearable:re,clearButtonProps:xe,hiddenInputProps:pe,renderOption:Te,onClear:ke,autoComplete:it,scrollAreaProps:Re,...ut}=n,Ke=N.useMemo(()=>WDe(m),[m]),Ct=N.useMemo(()=>WZ(Ke),[Ke]),gt=ol(Z),[Ie,Ve,ft]=Ba({value:g,defaultValue:y,finalValue:null,onChange:p}),_t=typeof Ie=="string"?Ct[Ie]:void 0,[Mt,st]=Ba({value:J,defaultValue:$,finalValue:_t?_t.label:"",onChange:j}),X=ree({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),X.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),X.resetSelectedOption()}}),{resolvedClassNames:de,resolvedStyles:we}=iN({props:n,styles:i,classNames:r});N.useEffect(()=>{v&&X.selectFirstOption()},[v,Ie]),N.useEffect(()=>{g===null&&st(""),typeof g=="string"&&_t&&st(_t.label)},[g,_t]);const ae=re&&!!Ie&&!S&&!w&&E.jsx(Gr.ClearButton,{size:R,...xe,onClear:()=>{Ve(null,null),st(""),ke==null||ke()}});return E.jsxs(E.Fragment,{children:[E.jsxs(Gr,{store:X,__staticSelector:"Select",classNames:de,styles:we,unstyled:s,readOnly:w,onOptionSubmit:he=>{b==null||b(he);const Ee=W&&Ct[he].value===Ie?null:Ct[he],$e=Ee?Ee.value:null;Ve($e,Ee),!ft&&st(typeof $e=="string"&&(Ee==null?void 0:Ee.label)||""),X.closeDropdown()},size:R,..._,children:[E.jsx(Gr.Target,{targetType:F?"input":"button",autoComplete:it,children:E.jsx(Xd,{id:gt,ref:t,rightSection:O||ae||E.jsx(Gr.Chevron,{size:R,error:B,unstyled:s}),rightSectionPointerEvents:q||(ae?"all":"none"),...ut,size:R,__staticSelector:"Select",disabled:S,readOnly:w||!F,value:Mt,onChange:he=>{st(he.currentTarget.value),X.openDropdown(),v&&X.selectFirstOption()},onFocus:he=>{F&&X.openDropdown(),f==null||f(he)},onBlur:he=>{var Ee;F&&X.closeDropdown(),st(Ie!=null&&((Ee=Ct[Ie])==null?void 0:Ee.label)||""),d==null||d(he)},onClick:he=>{F?X.openDropdown():X.toggleDropdown(),h==null||h(he)},classNames:de,styles:we,unstyled:s,pointer:!F,error:B})}),E.jsx(cIe,{data:Ke,hidden:w||S,filter:T,search:Mt,limit:A,hiddenWhenEmpty:!F||!U,withScrollArea:k,maxDropdownHeight:I,filterOptions:F&&(_t==null?void 0:_t.label)!==Mt,value:Ie,checkIconPosition:L,withCheckIcon:H,nothingFoundMessage:U,unstyled:s,labelId:ut.label?`${gt}-label`:void 0,"aria-label":ut.label?void 0:ut["aria-label"],renderOption:Te,scrollAreaProps:Re})]}),E.jsx(Gr.HiddenInput,{value:Ie,name:G,form:Y,disabled:S,...pe})]})});OT.classes={...Xd.classes,...Gr.classes};OT.displayName="@mantine/core/Select";function Lft({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=No(),s=t===void 0?e:t,o=mb({"--sg-spacing-x":qo(Hh(e)),"--sg-spacing-y":qo(Hh(s)),"--sg-cols":(c=Hh(n))==null?void 0:c.toString()}),a=us(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=qo(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=qo(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=bR(us(a),i).filter(f=>us(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return E.jsx(F_,{styles:o,media:l,selector:r})}function wz(e){return typeof e=="object"&&e!==null?us(e):[]}function Bft(e){return e.sort((t,n)=>vR(t)-vR(n))}function jft({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...wz(e),...wz(t),...wz(n)]));return Bft(r)}function Uft({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=mb({"--sg-spacing-x":qo(Hh(e)),"--sg-spacing-y":qo(Hh(i)),"--sg-cols":(l=Hh(n))==null?void 0:l.toString()}),o=jft({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=qo(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=qo(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return E.jsx(F_,{styles:s,container:u,selector:r})}var jIe={container:"m_925c2d2c",root:"m_2415a157"};const zft={cols:1,spacing:"md",type:"media"},Nee=wt((e,t)=>{const n=Qe("SimpleGrid",zft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=Gt({name:"SimpleGrid",classes:jIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=sN();return d==="container"?E.jsxs(E.Fragment,{children:[E.jsx(Uft,{...n,selector:`.${m}`}),E.jsx("div",{...p("container"),children:E.jsx(Fe,{ref:t,...p("root",{className:m}),...h})})]}):E.jsxs(E.Fragment,{children:[E.jsx(Lft,{...n,selector:`.${m}`}),E.jsx(Fe,{ref:t,...p("root",{className:m}),...h})]})});Nee.classes=jIe;Nee.displayName="@mantine/core/SimpleGrid";const[UIe,YL]=mu("SliderProvider was not found in tree"),Pee=N.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=YL();return E.jsx(Fe,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});Pee.displayName="@mantine/core/SliderRoot";const LM=N.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=YL(),[b,_]=N.useState(!1),w=l||s||b||h&&p;return E.jsxs(Fe,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{_(!0),typeof f=="function"&&f()},onBlur:()=>{_(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:S=>S.stopPropagation(),children:[m,E.jsx(wy,{mounted:i!=null&&!!w,transition:"fade",duration:0,...u,children:S=>E.jsx("div",{...v("label",{style:S}),children:i})})]})});LM.displayName="@mantine/core/SliderThumb";function BM({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function Vft({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function zIe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=YL();if(!e)return null;const u=e.map((l,c)=>N.createElement(Fe,{...a("markWrapper"),__vars:{"--mark-offset":`${BM({value:l.value,min:t,max:n})}%`},key:c},E.jsx(Fe,{...a("mark"),mod:{filled:Vft({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&E.jsx("div",{...a("markLabel"),children:l.label})));return E.jsx("div",{children:u})}zIe.displayName="@mantine/core/SliderMarks";function Oee({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=YL();return E.jsx(E.Fragment,{children:E.jsx(Fe,{...u("trackContainer"),mod:{disabled:r},...o,children:E.jsxs(Fe,{...u("track"),mod:{inverted:s,disabled:r},children:[E.jsx(Fe,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,E.jsx(zIe,{...a,offset:i,disabled:r,inverted:s})]})})})}Oee.displayName="@mantine/core/SliderTrack";function yG({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function vd(e,t){return parseFloat(e.toFixed(t))}function VIe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var KL={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const Hft={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},qft=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":ur(t,"slider-size"),"--slider-color":n?Ki(n,e):void 0,"--slider-radius":i===void 0?void 0:Zi(i),"--slider-thumb-size":r!==void 0?ze(r):"calc(var(--slider-size) * 2)"}}),FT=wt((e,t)=>{const n=Qe("Slider",Hft,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:_,thumbChildren:w,disabled:S,unstyled:T,scale:A,inverted:k,className:I,style:R,vars:F,hiddenInputProps:O,...L}=n,H=Gt({name:"Slider",props:n,classes:KL,classNames:r,className:I,styles:i,style:R,vars:F,varsResolver:qft,unstyled:T}),{dir:U}=by(),[G,Y]=N.useState(!1),[J,$]=Ba({value:typeof s=="number"?vg(s,l,c):s,defaultValue:typeof h=="number"?vg(h,l,c):h,finalValue:vg(0,l,c),onChange:o}),j=N.useRef(J),W=N.useRef(),B=N.useRef(),q=BM({value:J,min:l,max:c}),Z=A(J),re=typeof g=="function"?g(Z):g,xe=d??VIe(f),pe=N.useCallback(({x:Re})=>{if(!S){const ut=yG({value:Re,min:l,max:c,step:f,precision:xe});$(ut),j.current=ut}},[S,l,c,f,xe,$]),{ref:Te,active:ke}=OAe(pe,{onScrubEnd:()=>a==null?void 0:a(j.current)},U),it=Re=>{var ut,Ke,Ct,gt,Ie,Ve;if(!S)switch(Re.key){case"ArrowUp":{Re.preventDefault(),(ut=B.current)==null||ut.focus();const ft=vd(Math.min(Math.max(J+f,l),c),xe);$(ft),a==null||a(ft);break}case"ArrowRight":{Re.preventDefault(),(Ke=B.current)==null||Ke.focus();const ft=vd(Math.min(Math.max(U==="rtl"?J-f:J+f,l),c),xe);$(ft),a==null||a(ft);break}case"ArrowDown":{Re.preventDefault(),(Ct=B.current)==null||Ct.focus();const ft=vd(Math.min(Math.max(J-f,l),c),xe);$(ft),a==null||a(ft);break}case"ArrowLeft":{Re.preventDefault(),(gt=B.current)==null||gt.focus();const ft=vd(Math.min(Math.max(U==="rtl"?J+f:J-f,l),c),xe);$(ft),a==null||a(ft);break}case"Home":{Re.preventDefault(),(Ie=B.current)==null||Ie.focus(),$(l),a==null||a(l);break}case"End":{Re.preventDefault(),(Ve=B.current)==null||Ve.focus(),$(c),a==null||a(c);break}}};return E.jsx(UIe,{value:{getStyles:H},children:E.jsxs(Pee,{...L,ref:Ro(t,W),onKeyDownCapture:it,onMouseDownCapture:()=>{var Re;return(Re=W.current)==null?void 0:Re.focus()},size:u,disabled:S,children:[E.jsx(Oee,{inverted:k,offset:0,filled:q,marks:m,min:l,max:c,value:Z,disabled:S,containerProps:{ref:Te,onMouseEnter:_?()=>Y(!0):void 0,onMouseLeave:_?()=>Y(!1):void 0},children:E.jsx(LM,{max:c,min:l,value:Z,position:q,dragging:ke,label:re,ref:B,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:_,isHovered:G,disabled:S,children:w})}),E.jsx("input",{type:"hidden",name:p,value:Z,...O})]})})});FT.classes=KL;FT.displayName="@mantine/core/Slider";function Wft(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const Gft=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":ur(t,"slider-size"),"--slider-color":n?Ki(n,e):void 0,"--slider-radius":i===void 0?void 0:Zi(i),"--slider-thumb-size":r!==void 0?ze(r):"calc(var(--slider-size) * 2)"}}),Yft={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},uC=wt((e,t)=>{const n=Qe("RangeSlider",Yft,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:b,labelAlwaysOn:_,thumbFromLabel:w,thumbToLabel:S,showLabelOnHover:T,thumbChildren:A,disabled:k,unstyled:I,scale:R,inverted:F,className:O,style:L,vars:H,hiddenInputProps:U,...G}=n,Y=Gt({name:"Slider",props:n,classes:KL,classNames:r,className:O,styles:i,style:L,vars:H,varsResolver:Gft,unstyled:I}),{dir:J}=by(),[$,j]=N.useState(-1),[W,B]=N.useState(!1),[q,Z]=Ba({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),re=N.useRef(q),xe=N.useRef([]),pe=N.useRef(void 0),Te=[BM({value:q[0],min:l,max:c}),BM({value:q[1],min:l,max:c})],ke=p??VIe(h),it=st=>{Z(st),re.current=st};N.useEffect(()=>{Array.isArray(s)&&(re.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const Re=(st,X,de)=>{const we=[...re.current];we[X]=st,X===0&&(st>we[1]-(f-1e-9)&&(we[1]=Math.min(st+f,c)),st>(c-(f-1e-9)||l)&&(we[X]=re.current[X]),we[1]-st>d&&(we[1]=st+d)),X===1&&(st<we[0]+f&&(we[0]=Math.max(st-f,l)),st<we[0]+f&&(we[X]=re.current[X]),st-we[0]>d&&(we[0]=st-d)),we[0]=vd(we[0],ke),we[1]=vd(we[1],ke),it(we),de&&(a==null||a(re.current))},ut=st=>{if(!k){const X=yG({value:st,min:l,max:c,step:h,precision:ke});Re(X,pe.current,!1)}},{ref:Ke,active:Ct}=OAe(({x:st})=>ut(st),{onScrubEnd:()=>a==null?void 0:a(re.current)},J);function gt(st){pe.current=st}const Ie=st=>{Ke.current.focus();const X=Ke.current.getBoundingClientRect(),de=Wft(st.nativeEvent),we=yG({value:de-X.left,max:c,min:l,step:h,containerWidth:X.width}),ae=Math.abs(q[0]-we)>Math.abs(q[1]-we)?1:0,he=J==="ltr"?ae:ae===1?0:1;pe.current=he},Ve=()=>$!==1&&$!==0?(j(0),0):$,ft=st=>{if(!k)switch(st.key){case"ArrowUp":{st.preventDefault();const X=Ve();xe.current[X].focus(),Re(vd(Math.min(Math.max(re.current[X]+h,l),c),ke),X,!0);break}case"ArrowRight":{st.preventDefault();const X=Ve();xe.current[X].focus(),Re(vd(Math.min(Math.max(J==="rtl"?re.current[X]-h:re.current[X]+h,l),c),ke),X,!0);break}case"ArrowDown":{st.preventDefault();const X=Ve();xe.current[X].focus(),Re(vd(Math.min(Math.max(re.current[X]-h,l),c),ke),X,!0);break}case"ArrowLeft":{st.preventDefault();const X=Ve();xe.current[X].focus(),Re(vd(Math.min(Math.max(J==="rtl"?re.current[X]+h:re.current[X]-h,l),c),ke),X,!0);break}}},_t={max:c,min:l,size:u,labelTransitionProps:b,labelAlwaysOn:_,onBlur:()=>j(-1)},Mt=Array.isArray(A);return E.jsx(UIe,{value:{getStyles:Y},children:E.jsxs(Pee,{...G,size:u,ref:t,disabled:k,children:[E.jsxs(Oee,{offset:Te[0],marksOffset:q[0],filled:Te[1]-Te[0],marks:y,inverted:F,min:l,max:c,value:q[1],disabled:k,containerProps:{ref:Ke,onMouseEnter:T?()=>B(!0):void 0,onMouseLeave:T?()=>B(!1):void 0,onTouchStartCapture:Ie,onTouchEndCapture:()=>{pe.current=-1},onMouseDownCapture:Ie,onMouseUpCapture:()=>{pe.current=-1},onKeyDownCapture:ft},children:[E.jsx(LM,{..._t,value:R(q[0]),position:Te[0],dragging:Ct,label:typeof v=="function"?v(vd(R(q[0]),ke)):v,ref:st=>{xe.current[0]=st},thumbLabel:w,onMouseDown:()=>gt(0),onFocus:()=>j(0),showLabelOnHover:T,isHovered:W,disabled:k,children:Mt?A[0]:A}),E.jsx(LM,{..._t,thumbLabel:S,value:R(q[1]),position:Te[1],dragging:Ct,label:typeof v=="function"?v(vd(R(q[1]),ke)):v,ref:st=>{xe.current[1]=st},onMouseDown:()=>gt(1),onFocus:()=>j(1),showLabelOnHover:T,isHovered:W,disabled:k,children:Mt?A[1]:A})]}),E.jsx("input",{type:"hidden",name:`${g}_from`,value:q[0],...U}),E.jsx("input",{type:"hidden",name:`${g}_to`,value:q[1],...U})]})})});uC.classes=KL;uC.displayName="@mantine/core/RangeSlider";const Kft={},If=wt((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=Qe("Space",Kft,e);return E.jsx(Fe,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});If.displayName="@mantine/core/Space";var HIe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const Xft={maxHeight:100,initialState:!1},Qft=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),Fee=wt((e,t)=>{const n=Qe("Spoiler",Xft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=Gt({name:"Spoiler",classes:HIe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Qft}),b=ol(g),_=`${b}-region`,[w,S]=N.useState(l),{ref:T,height:A}=jrt(),k=w?f:d,I=k!==null&&c<A;return E.jsxs(Fe,{...v("root"),id:b,ref:t,"data-has-spoiler":I||void 0,...y,children:[I&&E.jsx(xb,{component:"button",type:"button",ref:p,onClick:()=>S(R=>!R),"aria-expanded":w,"aria-controls":_,...v("control"),children:k}),E.jsx("div",{...v("content",{style:{maxHeight:w?A?ze(A):void 0:ze(c)}}),"data-reduce-motion":!0,role:"region",id:_,children:E.jsx("div",{ref:T,children:h})})]})});Fee.classes=HIe;Fee.displayName="@mantine/core/Spoiler";var qIe={root:"m_6d731127"};const Jft={gap:"md",align:"stretch",justify:"flex-start"},Zft=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":qo(t),"--stack-align":n,"--stack-justify":r}}),Ys=wt((e,t)=>{const n=Qe("Stack",Jft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=Gt({name:"Stack",props:n,classes:qIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Zft});return E.jsx(Fe,{ref:t,...p("root"),variant:d,...h})});Ys.classes=qIe;Ys.displayName="@mantine/core/Stack";const WIe=N.createContext(null),edt=WIe.Provider,tdt=()=>N.useContext(WIe),ndt={},Mee=wt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Qe("SwitchGroup",ndt,e),[c,f]=Ba({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return E.jsx(edt,{value:{value:c,onChange:d,size:s},children:E.jsx(mo.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:E.jsx(see,{role:"group",children:a})})})});Mee.classes=mo.Wrapper.classes;Mee.displayName="@mantine/core/SwitchGroup";var GIe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const rdt={labelPosition:"right"},idt=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Zi(t),"--switch-height":ur(r,"switch-height"),"--switch-width":ur(r,"switch-width"),"--switch-thumb-size":ur(r,"switch-thumb-size"),"--switch-label-font-size":ur(r,"switch-label-font-size"),"--switch-track-label-padding":ur(r,"switch-track-label-padding"),"--switch-color":n?Ki(n,e):void 0}}),gS=wt((e,t)=>{const n=Qe("Switch",rdt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:b,defaultChecked:_,onChange:w,labelPosition:S,description:T,error:A,disabled:k,variant:I,rootRef:R,mod:F,...O}=n,L=tdt(),H=p||(L==null?void 0:L.size),U=Gt({name:"Switch",props:n,classes:GIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:idt}),{styleProps:G,rest:Y}=M_(O),J=ol(h),$=L?{checked:L.value.includes(Y.value),onChange:L.onChange}:{},[j,W]=Ba({value:$.checked??b,defaultValue:_,finalValue:!1});return E.jsxs(RL,{...U("root"),__staticSelector:"Switch",__stylesApiProps:n,id:J,size:H,labelPosition:S,label:c,description:T,error:A,disabled:k,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":$.checked||void 0,variant:I,ref:R,mod:F,...G,...g,children:[E.jsx("input",{...Y,disabled:k,checked:j,onChange:B=>{var q;L?(q=$.onChange)==null||q.call($,B):w==null||w(B),W(B.currentTarget.checked)},id:J,ref:t,type:"checkbox",role:"switch",...U("input")}),E.jsxs(Fe,{"aria-hidden":"true",mod:{error:A,"label-position":S},...U("track"),children:[E.jsx(Fe,{component:"span",mod:"reduce-motion",...U("thumb"),children:v}),E.jsx("span",{...U("trackLabel"),children:j?d:f})]})]})});gS.classes={...GIe,...ZDe};gS.displayName="@mantine/core/Switch";gS.Group=Mee;const[sdt,odt]=mu("Table component was not found in the tree");var hN={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function adt(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function B_(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=wt((i,s)=>{const o=Qe(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=odt();return E.jsx(Fe,{component:e,ref:s,...adt(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=hN,r}const vG=B_("th",{columnBorder:!0}),YIe=B_("td",{columnBorder:!0}),J6=B_("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),KIe=B_("thead",{stickyHeader:!0}),XIe=B_("tbody"),QIe=B_("tfoot"),JIe=B_("caption",{captionSide:!0});function $ee({data:e}){return E.jsxs(E.Fragment,{children:[e.caption&&E.jsx(JIe,{children:e.caption}),e.head&&E.jsx(KIe,{children:E.jsx(J6,{children:e.head.map((t,n)=>E.jsx(vG,{children:t},n))})}),e.body&&E.jsx(XIe,{children:e.body.map((t,n)=>E.jsx(J6,{children:t.map((r,i)=>E.jsx(YIe,{children:r},i))},n))}),e.foot&&E.jsx(QIe,{children:E.jsx(J6,{children:e.foot.map((t,n)=>E.jsx(vG,{children:t},n))})})]})}$ee.displayName="@mantine/core/TableDataRenderer";const udt={type:"scrollarea"},ldt=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":ze(t),"--table-overflow":n==="native"?"auto":void 0}}),Lee=wt((e,t)=>{const n=Qe("TableScrollContainer",udt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=Gt({name:"TableScrollContainer",classes:hN,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ldt,rootSelector:"scrollContainer"});return E.jsx(Fe,{component:f==="scrollarea"?Yg:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:E.jsx("div",{...h("scrollContainerInner"),children:l})})});Lee.classes=hN;Lee.displayName="@mantine/core/TableScrollContainer";const cdt={withRowBorders:!0,verticalSpacing:7},fdt=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":qo(r),"--table-vertical-spacing":qo(i),"--table-border-color":s?Ki(s,e):void 0,"--table-striped-color":u&&o?Ki(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Ki(a,e):void 0,"--table-sticky-header-offset":f?ze(c):void 0}}),wn=wt((e,t)=>{const n=Qe("Table",cdt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:_,variant:w,data:S,children:T,stickyHeader:A,stickyHeaderOffset:k,mod:I,...R}=n,F=Gt({name:"Table",props:n,className:i,style:s,classes:hN,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:fdt});return E.jsx(sdt,{value:{getStyles:F,stickyHeader:A,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:E.jsx(Fe,{component:"table",variant:w,ref:t,mod:[{"data-with-table-border":v},I],...F("table"),...R,children:T||!!S&&E.jsx($ee,{data:S})})})});wn.classes=hN;wn.displayName="@mantine/core/Table";wn.Td=YIe;wn.Th=vG;wn.Tr=J6;wn.Thead=KIe;wn.Tbody=XIe;wn.Tfoot=QIe;wn.Caption=JIe;wn.ScrollContainer=Lee;wn.DataRenderer=$ee;const[ddt,Bee]=mu("Tabs component was not found in the tree");var pN={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const hdt={},jee=wt((e,t)=>{const n=Qe("TabsList",hdt,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=Bee();return E.jsx(Fe,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});jee.classes=pN;jee.displayName="@mantine/core/TabsList";const pdt={},Uee=wt((e,t)=>{const n=Qe("TabsPanel",pdt,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=Bee(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return E.jsx(Fe,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});Uee.classes=pN;Uee.displayName="@mantine/core/TabsPanel";const mdt={},zee=wt((e,t)=>{const n=Qe("TabsTab",mdt,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=No(),{dir:b}=by(),_=Bee(),w=a===_.value,S=A=>{_.onChange(_.allowTabDeactivation&&a===_.value?null:a),u==null||u(A)},T={classNames:h,styles:p,props:n};return E.jsxs(Ff,{...y,..._.getStyles("tab",{className:r,style:d,variant:_.variant,...T}),disabled:c,unstyled:_.unstyled,variant:_.variant,mod:[{active:w,disabled:c,orientation:_.orientation,inverted:_.inverted,placement:_.orientation==="vertical"&&_.placement},g],ref:t,role:"tab",id:_.getTabId(a),"aria-selected":w,tabIndex:w||_.value===null?0:-1,"aria-controls":_.getPanelId(a),onClick:S,__vars:{"--tabs-color":f?Ki(f,v):void 0},onKeyDown:tZ({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:_.activateTabWithKeyboard,loop:_.loop,orientation:_.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&E.jsx("span",{..._.getStyles("tabSection",T),"data-position":"left",children:o}),i&&E.jsx("span",{..._.getStyles("tabLabel",T),children:i}),s&&E.jsx("span",{..._.getStyles("tabSection",T),"data-position":"right",children:s})]})});zee.classes=pN;zee.displayName="@mantine/core/TabsTab";const hme="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",gdt={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},ydt=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Zi(t),"--tabs-color":Ki(n,e),"--tabs-text-color":_T(r,e)?vb({color:n,theme:e,autoContrast:r}):void 0}}),Hr=wt((e,t)=>{const n=Qe("Tabs",gdt,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:_,className:w,style:S,vars:T,autoContrast:A,mod:k,...I}=n,R=ol(l),[F,O]=Ba({value:i,defaultValue:r,finalValue:null,onChange:s}),L=Gt({name:"Tabs",props:n,classes:pN,className:w,style:S,classNames:v,styles:b,unstyled:_,vars:T,varsResolver:ydt});return E.jsx(ddt,{value:{placement:g,value:F,orientation:o,id:R,loop:u,activateTabWithKeyboard:c,getTabId:kM(`${R}-tab`,hme),getPanelId:kM(`${R}-panel`,hme),onChange:O,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:_,getStyles:L},children:E.jsx(Fe,{ref:t,id:R,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},k],...L("root"),...I,children:a})})});Hr.classes=pN;Hr.displayName="@mantine/core/Tabs";Hr.Tab=zee;Hr.Panel=Uee;Hr.List=jee;const vdt={},bg=wt((e,t)=>{const n=Qe("TextInput",vdt,e);return E.jsx(Xd,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});bg.classes=Xd.classes;bg.displayName="@mantine/core/TextInput";const bdt=["h1","h2","h3","h4","h5","h6"];function xdt(e,t){const n=t!==void 0?t:`h${e}`;return bdt.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:ze(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var ZIe={root:"m_8a5d1357"};const wdt={order:1},_dt=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=xdt(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},lo=wt((e,t)=>{const n=Qe("Title",wdt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=Gt({name:"Title",props:n,classes:ZIe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:_dt});return[1,2,3,4,5,6].includes(u)?E.jsx(Fe,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});lo.classes=ZIe;lo.displayName="@mantine/core/Title";function Edt(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function Sdt(e){return N.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function Cdt(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const Tdt=()=>Edt({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),j_=Tdt(),Adt=(e=j_)=>Sdt(e);function MT(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=Cdt(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function Ddt(e,t=j_){const n=e.id||hS();return MT(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function eke(e,t=j_){return MT(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function Idt(e,t=j_){return MT(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function kdt(e=j_){MT(e,()=>[])}function Rdt(e=j_){MT(e,t=>t.slice(0,e.getState().limit))}const U_={show:Ddt,hide:eke,update:Idt,clean:kdt,cleanQueue:Rdt,updateState:MT};function bG(e,t){return bG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},bG(e,t)}function tke(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,bG(e,t)}var nke={exports:{}},Ndt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Pdt=Ndt,Odt=Pdt;function rke(){}function ike(){}ike.resetWarningCache=rke;var Fdt=function(){function e(r,i,s,o,a,u){if(u!==Odt){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ike,resetWarningCache:rke};return n.PropTypes=n,n};nke.exports=Fdt();var Mdt=nke.exports;const pme=l0(Mdt),mme={disabled:!1},jM=yi.createContext(null);var $dt=function(t){return t.scrollTop},dI="unmounted",kx="exited",Rx="entering",x2="entered",xG="exiting",Sy=function(e){tke(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=kx,s.appearStatus=Rx):u=x2:r.unmountOnExit||r.mountOnEnter?u=dI:u=kx,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===dI?{status:kx}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Rx&&o!==x2&&(s=Rx):(o===Rx||o===x2)&&(s=xG)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Rx){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:fI.findDOMNode(this);o&&$dt(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===kx&&this.setState({status:dI})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[fI.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||mme.disabled){this.safeSetState({status:x2},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:Rx},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:x2},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:fI.findDOMNode(this);if(!s||mme.disabled){this.safeSetState({status:kx},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:xG},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:kx},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:fI.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===dI)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=dee(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return yi.createElement(jM.Provider,{value:null},typeof o=="function"?o(i,a):yi.cloneElement(yi.Children.only(o),a))},t}(yi.Component);Sy.contextType=jM;Sy.propTypes={};function qE(){}Sy.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:qE,onEntering:qE,onEntered:qE,onExit:qE,onExiting:qE,onExited:qE};Sy.UNMOUNTED=dI;Sy.EXITED=kx;Sy.ENTERING=Rx;Sy.ENTERED=x2;Sy.EXITING=xG;function Ldt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vee(e,t){var n=function(s){return t&&N.isValidElement(s)?t(s):s},r=Object.create(null);return e&&N.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function Bdt(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function fw(e,t,n){return n[t]!=null?n[t]:e.props[t]}function jdt(e,t){return Vee(e.children,function(n){return N.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:fw(n,"appear",e),enter:fw(n,"enter",e),exit:fw(n,"exit",e)})})}function Udt(e,t,n){var r=Vee(e.children),i=Bdt(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(N.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=N.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=N.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:fw(o,"exit",e),enter:fw(o,"enter",e)}):!u&&a&&!c?i[s]=N.cloneElement(o,{in:!1}):u&&a&&N.isValidElement(l)&&(i[s]=N.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:fw(o,"exit",e),enter:fw(o,"enter",e)}))}}),i}var zdt=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Vdt={component:"div",childFactory:function(t){return t}},g1=function(e){tke(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(Ldt(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?jdt(i,a):Udt(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=Vee(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=aC({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=dee(i,["component","childFactory"]),u=this.state.contextValue,l=zdt(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?yi.createElement(jM.Provider,{value:u},l):yi.createElement(jM.Provider,{value:u},yi.createElement(s,a,l))},t}(yi.Component);g1.propTypes={};g1.defaultProps=Vdt;const ske=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function Hdt(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),ske.reduce((n,r)=>(n[r]=[],n),{}))}const gme={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},qdt={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function Wdt({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:gme[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:qdt[o]},l={opacity:0,maxHeight:0,transform:gme[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function Gdt(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const oke=N.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=Gdt(n,e.autoClose),l=N.useRef(-1),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return N.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),N.useEffect(()=>(d(),c),[u]),E.jsx(See,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});oke.displayName="@mantine/notifications/NotificationContainer";var ake={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const Ydt=Sy,Kdt={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:_p("overlay"),store:j_,withinPortal:!0},Xdt=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":ze(n)}}),Cy=wt((e,t)=>{const n=Qe("Notifications",Kdt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:y,withinPortal:v,...b}=n,_=No(),w=Adt(g),S=Mrt(),T=xL(),A=N.useRef({}),k=N.useRef(0),R=(_.respectReducedMotion?T:!1)?1:f,F=Gt({name:"Notifications",classes:ake,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Xdt});N.useEffect(()=>{g==null||g.updateState(H=>({...H,limit:p||5,defaultPosition:l}))},[p,l]),Um(()=>{w.notifications.length>k.current&&setTimeout(()=>S(),0),k.current=w.notifications.length},[w.notifications]);const O=Hdt(w.notifications,l),L=ske.reduce((H,U)=>(H[U]=O[U].map(({style:G,...Y})=>E.jsx(Ydt,{timeout:R,onEnter:()=>A.current[Y.id].offsetHeight,nodeRef:{current:A.current[Y.id]},children:J=>E.jsx(oke,{ref:$=>{A.current[Y.id]=$},data:Y,onHide:$=>eke($,g),autoClose:c,...F("notification",{style:{...Wdt({state:J,position:U,transitionDuration:R,maxHeight:h}),...G}})})},Y.id)),H),{});return E.jsxs(TT,{withinPortal:v,...y,children:[E.jsx(Fe,{...F("root"),"data-position":"top-center",ref:t,...b,children:E.jsx(g1,{children:L["top-center"]})}),E.jsx(Fe,{...F("root"),"data-position":"top-left",...b,children:E.jsx(g1,{children:L["top-left"]})}),E.jsx(Fe,{...F("root",{className:nC.classNames.fullWidth}),"data-position":"top-right",...b,children:E.jsx(g1,{children:L["top-right"]})}),E.jsx(Fe,{...F("root",{className:nC.classNames.fullWidth}),"data-position":"bottom-right",...b,children:E.jsx(g1,{children:L["bottom-right"]})}),E.jsx(Fe,{...F("root"),"data-position":"bottom-left",...b,children:E.jsx(g1,{children:L["bottom-left"]})}),E.jsx(Fe,{...F("root"),"data-position":"bottom-center",...b,children:E.jsx(g1,{children:L["bottom-center"]})})]})});Cy.classes=ake;Cy.displayName="@mantine/notifications/Notifications";Cy.show=U_.show;Cy.hide=U_.hide;Cy.update=U_.update;Cy.clean=U_.clean;Cy.cleanQueue=U_.cleanQueue;Cy.updateState=U_.updateState;const uke=N.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Po=()=>N.useContext(uke);function Qdt({children:e}){const[t,n]=N.useState(void 0),r=N.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return E.jsx(uke.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function TR(){return TR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TR.apply(this,arguments)}var L1;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(L1||(L1={}));const yme="popstate";function Jdt(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return wG("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:cke(i)}return eht(t,n,null,e)}function To(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function lke(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Zdt(){return Math.random().toString(36).substr(2,8)}function vme(e,t){return{usr:e.state,key:e.key,idx:t}}function wG(e,t,n,r){return n===void 0&&(n=null),TR({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?$T(t):t,{state:n,key:t&&t.key||r||Zdt()})}function cke(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function $T(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function eht(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=L1.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(TR({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=L1.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=L1.Push;let v=wG(m.location,g,y);l=c()+1;let b=vme(v,l),_=m.createHref(v);try{o.pushState(b,"",_)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(_)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=L1.Replace;let v=wG(m.location,g,y);l=c();let b=vme(v,l),_=m.createHref(v);o.replaceState(b,"",_),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:cke(g);return v=v.replace(/ $/,"%20"),To(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(yme,f),u=g,()=>{i.removeEventListener(yme,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var bme;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(bme||(bme={}));function tht(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?$T(t):t,i=hke(r.pathname||"/",n);if(i==null)return null;let s=fke(e);nht(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=pht(i);o=fht(s[a],u)}return o}function fke(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(To(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=uv([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(To(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),fke(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:lht(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of dke(s.path))i(s,o,u)}),t}function dke(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=dke(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function nht(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:cht(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const rht=/^:[\w-]+$/,iht=3,sht=2,oht=1,aht=10,uht=-2,xme=e=>e==="*";function lht(e,t){let n=e.split("/"),r=n.length;return n.some(xme)&&(r+=uht),t&&(r+=sht),n.filter(i=>!xme(i)).reduce((i,s)=>i+(rht.test(s)?iht:s===""?oht:aht),r)}function cht(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function fht(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=dht({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:uv([i,c.pathname]),pathnameBase:vht(uv([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=uv([i,c.pathnameBase]))}return s}function dht(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=hht(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function hht(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),lke(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function pht(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return lke(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function hke(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function mht(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?$T(e):e;return{pathname:n?n.startsWith("/")?n:ght(n,t):t,search:bht(r),hash:xht(i)}}function ght(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function _z(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yht(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Hee(e,t){let n=yht(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function qee(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=$T(e):(i=TR({},e),To(!i.pathname||!i.pathname.includes("?"),_z("?","pathname","search",i)),To(!i.pathname||!i.pathname.includes("#"),_z("#","pathname","hash",i)),To(!i.search||!i.search.includes("#"),_z("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=mht(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const uv=e=>e.join("/").replace(/\/\/+/g,"/"),vht=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),bht=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,xht=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function wht(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const pke=["post","put","patch","delete"];new Set(pke);const _ht=["get",...pke];new Set(_ht);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function AR(){return AR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AR.apply(this,arguments)}const Wee=N.createContext(null),Eht=N.createContext(null),z_=N.createContext(null),XL=N.createContext(null),f0=N.createContext({outlet:null,matches:[],isDataRoute:!1}),mke=N.createContext(null);function gke(e,t){let{relative:n}={};LT()||To(!1);let{basename:r,navigator:i}=N.useContext(z_),{hash:s,pathname:o,search:a}=Aht(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:uv([r,o])),i.createHref({pathname:u,search:a,hash:s})}function LT(){return N.useContext(XL)!=null}function Eb(){return LT()||To(!1),N.useContext(XL).location}function yke(e){N.useContext(z_).static||N.useLayoutEffect(e)}function Ep(){let{isDataRoute:e}=N.useContext(f0);return e?Lht():Sht()}function Sht(){LT()||To(!1);let e=N.useContext(Wee),{basename:t,future:n,navigator:r}=N.useContext(z_),{matches:i}=N.useContext(f0),{pathname:s}=Eb(),o=JSON.stringify(Hee(i,n.v7_relativeSplatPath)),a=N.useRef(!1);return yke(()=>{a.current=!0}),N.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=qee(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:uv([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const Cht=N.createContext(null);function Tht(e){let t=N.useContext(f0).outlet;return t&&N.createElement(Cht.Provider,{value:e},t)}function zm(){let{matches:e}=N.useContext(f0),t=e[e.length-1];return t?t.params:{}}function Aht(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=N.useContext(z_),{matches:i}=N.useContext(f0),{pathname:s}=Eb(),o=JSON.stringify(Hee(i,r.v7_relativeSplatPath));return N.useMemo(()=>qee(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function vke(e,t){return Dht(e,t)}function Dht(e,t,n,r){LT()||To(!1);let{navigator:i}=N.useContext(z_),{matches:s}=N.useContext(f0),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=Eb(),c;if(t){var f;let g=typeof t=="string"?$T(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||To(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=tht(e,{pathname:h}),m=Pht(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:uv([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:uv([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?N.createElement(XL.Provider,{value:{location:AR({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:L1.Pop}},m):m}function Iht(){let e=$ht(),t=wht(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),n?N.createElement("pre",{style:i},n):null,null)}const kht=N.createElement(Iht,null);class Rht extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?N.createElement(f0.Provider,{value:this.props.routeContext},N.createElement(mke.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Nht(e){let{routeContext:t,match:n,children:r}=e,i=N.useContext(Wee);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(f0.Provider,{value:t},r)}function Pht(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||To(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||kht,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=N.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,N.createElement(Nht,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?N.createElement(Rht,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var bke=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(bke||{}),UM=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(UM||{});function Oht(e){let t=N.useContext(Wee);return t||To(!1),t}function Fht(e){let t=N.useContext(Eht);return t||To(!1),t}function Mht(e){let t=N.useContext(f0);return t||To(!1),t}function xke(e){let t=Mht(),n=t.matches[t.matches.length-1];return n.route.id||To(!1),n.route.id}function $ht(){var e;let t=N.useContext(mke),n=Fht(UM.UseRouteError),r=xke(UM.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Lht(){let{router:e}=Oht(bke.UseNavigateStable),t=xke(UM.UseNavigateStable),n=N.useRef(!1);return yke(()=>{n.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,AR({fromRouteId:t},s)))},[e,t])}function Gee(e){let{to:t,replace:n,state:r,relative:i}=e;LT()||To(!1);let{future:s,static:o}=N.useContext(z_),{matches:a}=N.useContext(f0),{pathname:u}=Eb(),l=Ep(),c=qee(t,Hee(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return N.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function Bht(e){return Tht(e.context)}function Nx(e){To(!1)}function jht(e){let{basename:t="/",children:n=null,location:r,navigationType:i=L1.Pop,navigator:s,static:o=!1,future:a}=e;LT()&&To(!1);let u=t.replace(/^\/*/,"/"),l=N.useMemo(()=>({basename:u,navigator:s,static:o,future:AR({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=$T(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=N.useMemo(()=>{let g=hke(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:N.createElement(z_.Provider,{value:l},N.createElement(XL.Provider,{children:n,value:m}))}function Uht(e){let{children:t,location:n}=e;return vke(_G(t),n)}new Promise(()=>{});function _G(e,t){t===void 0&&(t=[]);let n=[];return N.Children.forEach(e,(r,i)=>{if(!N.isValidElement(r))return;let s=[...t,i];if(r.type===N.Fragment){n.push.apply(n,_G(r.props.children,s));return}r.type!==Nx&&To(!1),!r.props.index||!r.props.children||To(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=_G(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function EG(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function zht(e,t){let n=EG(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const Vht="6";try{window.__reactRouterVersion=Vht}catch{}const Hht="startTransition",wme=iM[Hht];function qht(e){let{basename:t,children:n,future:r,window:i}=e,s=N.useRef();s.current==null&&(s.current=Jdt({window:i,v5Compat:!0}));let o=s.current,[a,u]=N.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=N.useCallback(f=>{l&&wme?wme(()=>u(f)):u(f)},[u,l]);return N.useLayoutEffect(()=>o.listen(c),[o,c]),N.createElement(jht,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var _me;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(_me||(_me={}));var Eme;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Eme||(Eme={}));function Sb(e){let t=N.useRef(EG(e)),n=N.useRef(!1),r=Eb(),i=N.useMemo(()=>zht(r.search,n.current?null:t.current),[r.search]),s=Ep(),o=N.useCallback((a,u)=>{const l=EG(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const Yee=N.createContext(null);Yee.displayName="@mantine/modals/ModalsContext";function Wht(){const e=N.useContext(Yee);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function Ght({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=Wht(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return E.jsxs(E.Fragment,{children:[l&&E.jsx(Fe,{mb:"md",children:l}),E.jsxs($i,{justify:"flex-end",...o,children:[E.jsx(_n,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),E.jsx(_n,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[Yht,QL]=Qrt("mantine-modals");QL("openModal");QL("closeModal");QL("closeAllModals");const Sme=QL("openConfirmModal");function Cme(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function Kht(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;Cme(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{Cme(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function Xht(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function Qht({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=N.useReducer(Kht,{modals:[],current:null}),o=N.useRef(i);o.current=i;const a=N.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=N.useCallback(({modalId:g,...y})=>{const v=g||hS();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=N.useCallback(({modalId:g,...y})=>{const v=g||hS();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=N.useCallback((g,{modalId:y,...v})=>{const b=y||hS();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=N.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);Yht({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:E.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=Xht(g.props);return{modalProps:y,content:E.jsx(Ght,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:E.jsx(E.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return E.jsxs(Yee.Provider,{value:d,children:[E.jsx(ho,{zIndex:_p("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jht={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=(e,t,n,r)=>{const i=N.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>N.createElement("svg",{ref:f,...Jht[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>N.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zht=Yn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ept=Yn("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fk=Yn("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tme=Yn("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ame=Yn("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tpt=Yn("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var npt=Yn("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rpt=Yn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ipt=Yn("outline","brand-python","IconBrandPython",[["path",{d:"M12 9h-7a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h3",key:"svg-0"}],["path",{d:"M12 15h7a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-3",key:"svg-1"}],["path",{d:"M8 9v-4a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v5a2 2 0 0 1 -2 2h-4a2 2 0 0 0 -2 2v5a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4",key:"svg-2"}],["path",{d:"M11 6l0 .01",key:"svg-3"}],["path",{d:"M13 18l0 .01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var spt=Yn("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var opt=Yn("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wke=Yn("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _ke=Yn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var apt=Yn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dme=Yn("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var upt=Yn("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lpt=Yn("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cpt=Yn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fpt=Yn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dpt=Yn("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hpt=Yn("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kee=Yn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ppt=Yn("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mpt=Yn("outline","list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gpt=Yn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ypt=Yn("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vpt=Yn("outline","package-import","IconPackageImport",[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M22 18h-7",key:"svg-4"}],["path",{d:"M18 15l-3 3l3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bpt=Yn("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xpt=Yn("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Eke=Yn("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wpt=Yn("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _pt=Yn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ept=Yn("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Spt=Yn("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cpt=Yn("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ske=Yn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tpt=Yn("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cke=Yn("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Apt=Yn("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tke=Yn("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xee=Yn("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ime=Yn("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qee=Yn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dpt=Yn("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ipt=Yn("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kpt=Yn("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function Ake(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Ll="/vis-decode/";function kme(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function Dke(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Rpt=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Npt=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Ppt={};function Rme(e,t){return(Ppt.jsx?Npt:Rpt).test(e)}const Opt=/[ \t\n\f\r]/g;function Fpt(e){return typeof e=="object"?e.type==="text"?Nme(e.value):!1:Nme(e)}function Nme(e){return e.replace(Opt,"")===""}let mN=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};mN.prototype.property={};mN.prototype.normal={};mN.prototype.space=null;function Ike(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new mN(n,r,t)}function DR(e){return e.toLowerCase()}let Jd=class{constructor(t,n){this.property=t,this.attribute=n}};Jd.prototype.space=null;Jd.prototype.boolean=!1;Jd.prototype.booleanish=!1;Jd.prototype.overloadedBoolean=!1;Jd.prototype.number=!1;Jd.prototype.commaSeparated=!1;Jd.prototype.spaceSeparated=!1;Jd.prototype.commaOrSpaceSeparated=!1;Jd.prototype.mustUseProperty=!1;Jd.prototype.defined=!1;let Mpt=0;const sr=V_(),Bo=V_(),kke=V_(),Rt=V_(),fs=V_(),yS=V_(),lf=V_();function V_(){return 2**++Mpt}const SG=Object.freeze(Object.defineProperty({__proto__:null,boolean:sr,booleanish:Bo,commaOrSpaceSeparated:lf,commaSeparated:yS,number:Rt,overloadedBoolean:kke,spaceSeparated:fs},Symbol.toStringTag,{value:"Module"})),Ez=Object.keys(SG);class Jee extends Jd{constructor(t,n,r,i){let s=-1;if(super(t,n),Pme(this,"space",i),typeof r=="number")for(;++s<Ez.length;){const o=Ez[s];Pme(this,Ez[s],(r&SG[o])===SG[o])}}}Jee.prototype.defined=!0;function Pme(e,t,n){n&&(e[t]=n)}const $pt={}.hasOwnProperty;function BT(e){const t={},n={};let r;for(r in e.properties)if($pt.call(e.properties,r)){const i=e.properties[r],s=new Jee(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[DR(r)]=r,n[DR(s.attribute)]=r}return new mN(t,n,e.space)}const Rke=BT({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Nke=BT({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Pke(e,t){return t in e?e[t]:t}function Oke(e,t){return Pke(e,t.toLowerCase())}const Fke=BT({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Oke,properties:{xmlns:null,xmlnsXLink:null}}),Mke=BT({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Bo,ariaAutoComplete:null,ariaBusy:Bo,ariaChecked:Bo,ariaColCount:Rt,ariaColIndex:Rt,ariaColSpan:Rt,ariaControls:fs,ariaCurrent:null,ariaDescribedBy:fs,ariaDetails:null,ariaDisabled:Bo,ariaDropEffect:fs,ariaErrorMessage:null,ariaExpanded:Bo,ariaFlowTo:fs,ariaGrabbed:Bo,ariaHasPopup:null,ariaHidden:Bo,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:fs,ariaLevel:Rt,ariaLive:null,ariaModal:Bo,ariaMultiLine:Bo,ariaMultiSelectable:Bo,ariaOrientation:null,ariaOwns:fs,ariaPlaceholder:null,ariaPosInSet:Rt,ariaPressed:Bo,ariaReadOnly:Bo,ariaRelevant:null,ariaRequired:Bo,ariaRoleDescription:fs,ariaRowCount:Rt,ariaRowIndex:Rt,ariaRowSpan:Rt,ariaSelected:Bo,ariaSetSize:Rt,ariaSort:null,ariaValueMax:Rt,ariaValueMin:Rt,ariaValueNow:Rt,ariaValueText:null,role:null}}),Lpt=BT({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Oke,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:yS,acceptCharset:fs,accessKey:fs,action:null,allow:null,allowFullScreen:sr,allowPaymentRequest:sr,allowUserMedia:sr,alt:null,as:null,async:sr,autoCapitalize:null,autoComplete:fs,autoFocus:sr,autoPlay:sr,blocking:fs,capture:null,charSet:null,checked:sr,cite:null,className:fs,cols:Rt,colSpan:null,content:null,contentEditable:Bo,controls:sr,controlsList:fs,coords:Rt|yS,crossOrigin:null,data:null,dateTime:null,decoding:null,default:sr,defer:sr,dir:null,dirName:null,disabled:sr,download:kke,draggable:Bo,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:sr,formTarget:null,headers:fs,height:Rt,hidden:sr,high:Rt,href:null,hrefLang:null,htmlFor:fs,httpEquiv:fs,id:null,imageSizes:null,imageSrcSet:null,inert:sr,inputMode:null,integrity:null,is:null,isMap:sr,itemId:null,itemProp:fs,itemRef:fs,itemScope:sr,itemType:fs,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:sr,low:Rt,manifest:null,max:null,maxLength:Rt,media:null,method:null,min:null,minLength:Rt,multiple:sr,muted:sr,name:null,nonce:null,noModule:sr,noValidate:sr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:sr,optimum:Rt,pattern:null,ping:fs,placeholder:null,playsInline:sr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:sr,referrerPolicy:null,rel:fs,required:sr,reversed:sr,rows:Rt,rowSpan:Rt,sandbox:fs,scope:null,scoped:sr,seamless:sr,selected:sr,shadowRootClonable:sr,shadowRootDelegatesFocus:sr,shadowRootMode:null,shape:null,size:Rt,sizes:null,slot:null,span:Rt,spellCheck:Bo,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Rt,step:null,style:null,tabIndex:Rt,target:null,title:null,translate:null,type:null,typeMustMatch:sr,useMap:null,value:Bo,width:Rt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:fs,axis:null,background:null,bgColor:null,border:Rt,borderColor:null,bottomMargin:Rt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:sr,declare:sr,event:null,face:null,frame:null,frameBorder:null,hSpace:Rt,leftMargin:Rt,link:null,longDesc:null,lowSrc:null,marginHeight:Rt,marginWidth:Rt,noResize:sr,noHref:sr,noShade:sr,noWrap:sr,object:null,profile:null,prompt:null,rev:null,rightMargin:Rt,rules:null,scheme:null,scrolling:Bo,standby:null,summary:null,text:null,topMargin:Rt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Rt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:sr,disableRemotePlayback:sr,prefix:null,property:null,results:Rt,security:null,unselectable:null}}),Bpt=BT({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Pke,properties:{about:lf,accentHeight:Rt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Rt,amplitude:Rt,arabicForm:null,ascent:Rt,attributeName:null,attributeType:null,azimuth:Rt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Rt,by:null,calcMode:null,capHeight:Rt,className:fs,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Rt,diffuseConstant:Rt,direction:null,display:null,dur:null,divisor:Rt,dominantBaseline:null,download:sr,dx:null,dy:null,edgeMode:null,editable:null,elevation:Rt,enableBackground:null,end:null,event:null,exponent:Rt,externalResourcesRequired:null,fill:null,fillOpacity:Rt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:yS,g2:yS,glyphName:yS,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Rt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Rt,horizOriginX:Rt,horizOriginY:Rt,id:null,ideographic:Rt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Rt,k:Rt,k1:Rt,k2:Rt,k3:Rt,k4:Rt,kernelMatrix:lf,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Rt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Rt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Rt,overlineThickness:Rt,paintOrder:null,panose1:null,path:null,pathLength:Rt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:fs,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Rt,pointsAtY:Rt,pointsAtZ:Rt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:lf,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:lf,rev:lf,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:lf,requiredFeatures:lf,requiredFonts:lf,requiredFormats:lf,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Rt,specularExponent:Rt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Rt,strikethroughThickness:Rt,string:null,stroke:null,strokeDashArray:lf,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Rt,strokeOpacity:Rt,strokeWidth:null,style:null,surfaceScale:Rt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:lf,tabIndex:Rt,tableValues:null,target:null,targetX:Rt,targetY:Rt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:lf,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Rt,underlineThickness:Rt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Rt,values:null,vAlphabetic:Rt,vMathematical:Rt,vectorEffect:null,vHanging:Rt,vIdeographic:Rt,version:null,vertAdvY:Rt,vertOriginX:Rt,vertOriginY:Rt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Rt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),jpt=/^data[-\w.:]+$/i,Ome=/-[a-z]/g,Upt=/[A-Z]/g;function JL(e,t){const n=DR(t);let r=t,i=Jd;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&jpt.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Ome,Vpt);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Ome.test(s)){let o=s.replace(Upt,zpt);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=Jee}return new i(r,t)}function zpt(e){return"-"+e.toLowerCase()}function Vpt(e){return e.charAt(1).toUpperCase()}const Hpt={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},gN=Ike([Nke,Rke,Fke,Mke,Lpt],"html"),Cb=Ike([Nke,Rke,Fke,Mke,Bpt],"svg");function Fme(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function $ke(e){return e.join(" ").trim()}var Lke={},Mme=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,qpt=/\n/g,Wpt=/^\s*/,Gpt=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Ypt=/^:\s*/,Kpt=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Xpt=/^[;\s]*/,Qpt=/^\s+|\s+$/g,Jpt=`
`,$me="/",Lme="*",Gx="",Zpt="comment",emt="declaration",tmt=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(qpt);m&&(n+=m.length);var g=p.lastIndexOf(Jpt);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(Wpt)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!($me!=e.charAt(0)||Lme!=e.charAt(1))){for(var m=2;Gx!=e.charAt(m)&&(Lme!=e.charAt(m)||$me!=e.charAt(m+1));)++m;if(m+=2,Gx===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:Zpt,comment:g})}}function d(){var p=s(),m=u(Gpt);if(m){if(f(),!u(Ypt))return a("property missing ':'");var g=u(Kpt),y=p({type:emt,property:Bme(m[0].replace(Mme,Gx)),value:g?Bme(g[0].replace(Mme,Gx)):Gx});return u(Xpt),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function Bme(e){return e?e.replace(Qpt,Gx):Gx}var nmt=on&&on.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lke,"__esModule",{value:!0});var rmt=nmt(tmt);function imt(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,rmt.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var jme=Lke.default=imt;const smt=jme.default||jme,ZL=Bke("end"),d0=Bke("start");function Bke(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function omt(e){const t=d0(e),n=ZL(e);if(t&&n)return{start:t,end:n}}function dk(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Ume(e.position):"start"in e||"end"in e?Ume(e):"line"in e||"column"in e?CG(e):""}function CG(e){return zme(e&&e.line)+":"+zme(e&&e.column)}function Ume(e){return CG(e&&e.start)+"-"+CG(e&&e.end)}function zme(e){return e&&typeof e=="number"?e:1}class al extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=dk(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}al.prototype.file="";al.prototype.name="";al.prototype.reason="";al.prototype.message="";al.prototype.stack="";al.prototype.column=void 0;al.prototype.line=void 0;al.prototype.ancestors=void 0;al.prototype.cause=void 0;al.prototype.fatal=void 0;al.prototype.place=void 0;al.prototype.ruleId=void 0;al.prototype.source=void 0;const Zee={}.hasOwnProperty,amt=new Map,umt=/[A-Z]/g,lmt=/-([a-z])/g,cmt=new Set(["table","tbody","thead","tfoot","tr"]),fmt=new Set(["td","th"]),jke="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function dmt(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=xmt(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=bmt(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Cb:gN,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=Uke(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function Uke(e,t,n){if(t.type==="element")return hmt(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return pmt(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return gmt(e,t,n);if(t.type==="mdxjsEsm")return mmt(e,t);if(t.type==="root")return ymt(e,t,n);if(t.type==="text")return vmt(e,t)}function hmt(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Cb,e.schema=i),e.ancestors.push(t);const s=Vke(e,t.tagName,!1),o=wmt(e,t);let a=tte(e,t);return cmt.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!Fpt(u):!0})),zke(e,o,s,t),ete(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function pmt(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}IR(e,t.position)}function mmt(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);IR(e,t.position)}function gmt(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Cb,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:Vke(e,t.name,!0),o=_mt(e,t),a=tte(e,t);return zke(e,o,s,t),ete(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function ymt(e,t,n){const r={};return ete(r,tte(e,t)),e.create(t,e.Fragment,r,n)}function vmt(e,t){return t.value}function zke(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function ete(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function bmt(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function xmt(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=d0(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function wmt(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&Zee.call(t.properties,i)){const s=Emt(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&fmt.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function _mt(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else IR(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else IR(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function tte(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:amt;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=Uke(e,s,o);a!==void 0&&n.push(a)}return n}function Emt(e,t,n){const r=JL(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Dke(n):$ke(n)),r.property==="style"){let i=typeof n=="object"?n:Smt(e,String(n));return e.stylePropertyNameCase==="css"&&(i=Cmt(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?Hpt[r.property]||r.property:r.attribute,n]}}function Smt(e,t){const n={};try{smt(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new al("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=jke+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(lmt,Amt)),n[o]=s}}function Vke(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=Rme(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Rme(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return Zee.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);IR(e)}function IR(e,t){const n=new al("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=jke+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Cmt(e){const t={};let n;for(n in e)Zee.call(e,n)&&(t[Tmt(n)]=e[n]);return t}function Tmt(e){let t=e.replace(umt,Dmt);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Amt(e,t){return t.toUpperCase()}function Dmt(e){return"-"+e.toLowerCase()}const Sz={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Imt={};function kmt(e,t){const n=Imt,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Hke(e,r,i)}function Hke(e,t,n){if(Rmt(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Vme(e.children,t,n)}return Array.isArray(e)?Vme(e,t,n):""}function Vme(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Hke(e[i],t,n);return r.join("")}function Rmt(e){return!!(e&&typeof e=="object")}const Hme=document.createElement("i");function nte(e){const t="&"+e+";";Hme.innerHTML=t;const n=Hme.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Jg(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function _d(e,t){return e.length>0?(Jg(e,e.length,0,t),e):t}const qme={}.hasOwnProperty;function Nmt(e){const t={};let n=-1;for(;++n<e.length;)Pmt(t,e[n]);return t}function Pmt(e,t){let n;for(n in t){const i=(qme.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){qme.call(i,o)||(i[o]=[]);const a=s[o];Omt(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Omt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Jg(e,0,0,r)}function qke(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function vS(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const am=Tb(/[A-Za-z]/),_f=Tb(/[\dA-Za-z]/),Fmt=Tb(/[#-'*+\--9=?A-Z^-~]/);function TG(e){return e!==null&&(e<32||e===127)}const AG=Tb(/\d/),Mmt=Tb(/[\dA-Fa-f]/),$mt=Tb(/[!-/:-@[-`{-~]/);function Un(e){return e!==null&&e<-2}function Oc(e){return e!==null&&(e<0||e===32)}function Ai(e){return e===-2||e===-1||e===32}const Lmt=Tb(new RegExp("\\p{P}|\\p{S}","u")),Bmt=Tb(/\s/);function Tb(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function jT(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&_f(e.charCodeAt(n+1))&&_f(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function hs(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return Ai(u)?(e.enter(n),a(u)):t(u)}function a(u){return Ai(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const jmt={tokenize:Umt};function Umt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),hs(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Un(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const zmt={tokenize:Vmt},Wme={tokenize:Hmt};function Vmt(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const _=n[r];return t.containerState=_[1],e.attempt(_[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const _=t.events.length;let w=_,S;for(;w--;)if(t.events[w][0]==="exit"&&t.events[w][1].type==="chunkFlow"){S=t.events[w][1].end;break}y(r);let T=_;for(;T<t.events.length;)t.events[T][1].end=Object.assign({},S),T++;return Jg(t.events,w+1,0,t.events.slice(_)),t.events.length=T,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Wme,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(Wme,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return Un(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,_){const w=t.sliceStream(b);if(_&&w.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(w),t.parser.lazy[b.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const T=t.events.length;let A=T,k,I;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){if(k){I=t.events[A][1].end;break}k=!0}for(y(r),S=T;S<t.events.length;)t.events[S][1].end=Object.assign({},I),S++;Jg(t.events,A+1,0,t.events.slice(T)),t.events.length=S}}function y(b){let _=n.length;for(;_-- >b;){const w=n[_];t.containerState=w[1],w[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Hmt(e,t,n){return hs(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Gme(e){if(e===null||Oc(e)||Bmt(e))return 1;if(Lmt(e))return 2}function rte(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const DG={name:"attention",tokenize:Wmt,resolveAll:qmt};function qmt(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Yme(f,-u),Yme(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=_d(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=_d(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=_d(l,rte(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=_d(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=_d(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Jg(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Wmt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Gme(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Gme(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Yme(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Gmt={name:"autolink",tokenize:Ymt};function Ymt(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return am(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||_f(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||_f(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||TG(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):Fmt(h)?(e.consume(h),l):n(h)}function c(h){return _f(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||_f(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const eB={tokenize:Kmt,partial:!0};function Kmt(e,t,n){return r;function r(s){return Ai(s)?hs(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Un(s)?t(s):n(s)}}const Wke={name:"blockQuote",tokenize:Xmt,continuation:{tokenize:Qmt},exit:Jmt};function Xmt(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Ai(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function Qmt(e,t,n){const r=this;return i;function i(o){return Ai(o)?hs(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(Wke,t,n)(o)}}function Jmt(e){e.exit("blockQuote")}const Gke={name:"characterEscape",tokenize:Zmt};function Zmt(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return $mt(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Yke={name:"characterReference",tokenize:e0t};function e0t(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=_f,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=Mmt,c):(e.enter("characterReferenceValue"),s=7,o=AG,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===_f&&!nte(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const Kme={tokenize:n0t,partial:!0},Xme={name:"codeFenced",tokenize:t0t,concrete:!0};function t0t(e,t,n){const r=this,i={tokenize:w,partial:!0};let s=0,o=0,a;return u;function u(S){return l(S)}function l(S){const T=r.events[r.events.length-1];return s=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,a=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(S)}function c(S){return S===a?(o++,e.consume(S),c):o<3?n(S):(e.exit("codeFencedFenceSequence"),Ai(S)?hs(e,f,"whitespace")(S):f(S))}function f(S){return S===null||Un(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(Kme,m,_)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(S))}function d(S){return S===null||Un(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(S)):Ai(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),hs(e,h,"whitespace")(S)):S===96&&S===a?n(S):(e.consume(S),d)}function h(S){return S===null||Un(S)?f(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(S))}function p(S){return S===null||Un(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(S)):S===96&&S===a?n(S):(e.consume(S),p)}function m(S){return e.attempt(i,_,g)(S)}function g(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),y}function y(S){return s>0&&Ai(S)?hs(e,v,"linePrefix",s+1)(S):v(S)}function v(S){return S===null||Un(S)?e.check(Kme,m,_)(S):(e.enter("codeFlowValue"),b(S))}function b(S){return S===null||Un(S)?(e.exit("codeFlowValue"),v(S)):(e.consume(S),b)}function _(S){return e.exit("codeFenced"),t(S)}function w(S,T,A){let k=0;return I;function I(H){return S.enter("lineEnding"),S.consume(H),S.exit("lineEnding"),R}function R(H){return S.enter("codeFencedFence"),Ai(H)?hs(S,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(H):F(H)}function F(H){return H===a?(S.enter("codeFencedFenceSequence"),O(H)):A(H)}function O(H){return H===a?(k++,S.consume(H),O):k>=o?(S.exit("codeFencedFenceSequence"),Ai(H)?hs(S,L,"whitespace")(H):L(H)):A(H)}function L(H){return H===null||Un(H)?(S.exit("codeFencedFence"),T(H)):A(H)}}}function n0t(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Cz={name:"codeIndented",tokenize:i0t},r0t={tokenize:s0t,partial:!0};function i0t(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),hs(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Un(l)?e.attempt(r0t,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Un(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function s0t(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Un(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):hs(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Un(o)?i(o):n(o)}}const o0t={name:"codeText",tokenize:l0t,resolve:a0t,previous:u0t};function a0t(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function u0t(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function l0t(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):Un(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Un(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class c0t{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&vD(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),vD(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),vD(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);vD(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);vD(this.left,n.reverse())}}}function vD(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Kke(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new c0t(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,f0t(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return Jg(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function f0t(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const d0t={tokenize:m0t,resolve:p0t},h0t={tokenize:g0t,partial:!0};function p0t(e){return Kke(e),e}function m0t(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Un(a)?e.check(h0t,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function g0t(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),hs(e,s,"linePrefix")}function s(o){if(o===null||Un(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function Xke(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||TG(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||Un(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||Oc(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||TG(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function Qke(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Un(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Un(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!Ai(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function Jke(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Un(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),hs(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Un(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function hk(e,t){let n;return r;function r(i){return Un(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Ai(i)?hs(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const y0t={name:"definition",tokenize:b0t},v0t={tokenize:x0t,partial:!0};function b0t(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return Qke.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=vS(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Oc(h)?hk(e,l)(h):l(h)}function l(h){return Xke(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(v0t,f,f)(h)}function f(h){return Ai(h)?hs(e,d,"whitespace")(h):d(h)}function d(h){return h===null||Un(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function x0t(e,t,n){return r;function r(a){return Oc(a)?hk(e,i)(a):n(a)}function i(a){return Jke(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Ai(a)?hs(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Un(a)?t(a):n(a)}}const w0t={name:"hardBreakEscape",tokenize:_0t};function _0t(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Un(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const E0t={name:"headingAtx",tokenize:C0t,resolve:S0t};function S0t(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Jg(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function C0t(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Oc(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Un(c)?(e.exit("atxHeading"),t(c)):Ai(c)?hs(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Oc(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const T0t=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Qme=["pre","script","style","textarea"],A0t={name:"htmlFlow",tokenize:R0t,resolveTo:k0t,concrete:!0},D0t={tokenize:P0t,partial:!0},I0t={tokenize:N0t,partial:!0};function k0t(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function R0t(e,t,n){const r=this;let i,s,o,a,u;return l;function l(B){return c(B)}function c(B){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(B),f}function f(B){return B===33?(e.consume(B),d):B===47?(e.consume(B),s=!0,m):B===63?(e.consume(B),i=3,r.interrupt?t:$):am(B)?(e.consume(B),o=String.fromCharCode(B),g):n(B)}function d(B){return B===45?(e.consume(B),i=2,h):B===91?(e.consume(B),i=5,a=0,p):am(B)?(e.consume(B),i=4,r.interrupt?t:$):n(B)}function h(B){return B===45?(e.consume(B),r.interrupt?t:$):n(B)}function p(B){const q="CDATA[";return B===q.charCodeAt(a++)?(e.consume(B),a===q.length?r.interrupt?t:F:p):n(B)}function m(B){return am(B)?(e.consume(B),o=String.fromCharCode(B),g):n(B)}function g(B){if(B===null||B===47||B===62||Oc(B)){const q=B===47,Z=o.toLowerCase();return!q&&!s&&Qme.includes(Z)?(i=1,r.interrupt?t(B):F(B)):T0t.includes(o.toLowerCase())?(i=6,q?(e.consume(B),y):r.interrupt?t(B):F(B)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(B):s?v(B):b(B))}return B===45||_f(B)?(e.consume(B),o+=String.fromCharCode(B),g):n(B)}function y(B){return B===62?(e.consume(B),r.interrupt?t:F):n(B)}function v(B){return Ai(B)?(e.consume(B),v):I(B)}function b(B){return B===47?(e.consume(B),I):B===58||B===95||am(B)?(e.consume(B),_):Ai(B)?(e.consume(B),b):I(B)}function _(B){return B===45||B===46||B===58||B===95||_f(B)?(e.consume(B),_):w(B)}function w(B){return B===61?(e.consume(B),S):Ai(B)?(e.consume(B),w):b(B)}function S(B){return B===null||B===60||B===61||B===62||B===96?n(B):B===34||B===39?(e.consume(B),u=B,T):Ai(B)?(e.consume(B),S):A(B)}function T(B){return B===u?(e.consume(B),u=null,k):B===null||Un(B)?n(B):(e.consume(B),T)}function A(B){return B===null||B===34||B===39||B===47||B===60||B===61||B===62||B===96||Oc(B)?w(B):(e.consume(B),A)}function k(B){return B===47||B===62||Ai(B)?b(B):n(B)}function I(B){return B===62?(e.consume(B),R):n(B)}function R(B){return B===null||Un(B)?F(B):Ai(B)?(e.consume(B),R):n(B)}function F(B){return B===45&&i===2?(e.consume(B),U):B===60&&i===1?(e.consume(B),G):B===62&&i===4?(e.consume(B),j):B===63&&i===3?(e.consume(B),$):B===93&&i===5?(e.consume(B),J):Un(B)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(D0t,W,O)(B)):B===null||Un(B)?(e.exit("htmlFlowData"),O(B)):(e.consume(B),F)}function O(B){return e.check(I0t,L,W)(B)}function L(B){return e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),H}function H(B){return B===null||Un(B)?O(B):(e.enter("htmlFlowData"),F(B))}function U(B){return B===45?(e.consume(B),$):F(B)}function G(B){return B===47?(e.consume(B),o="",Y):F(B)}function Y(B){if(B===62){const q=o.toLowerCase();return Qme.includes(q)?(e.consume(B),j):F(B)}return am(B)&&o.length<8?(e.consume(B),o+=String.fromCharCode(B),Y):F(B)}function J(B){return B===93?(e.consume(B),$):F(B)}function $(B){return B===62?(e.consume(B),j):B===45&&i===2?(e.consume(B),$):F(B)}function j(B){return B===null||Un(B)?(e.exit("htmlFlowData"),W(B)):(e.consume(B),j)}function W(B){return e.exit("htmlFlow"),t(B)}}function N0t(e,t,n){const r=this;return i;function i(o){return Un(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function P0t(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(eB,t,n)}}const O0t={name:"htmlText",tokenize:F0t};function F0t(e,t,n){const r=this;let i,s,o;return a;function a($){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume($),u}function u($){return $===33?(e.consume($),l):$===47?(e.consume($),w):$===63?(e.consume($),b):am($)?(e.consume($),A):n($)}function l($){return $===45?(e.consume($),c):$===91?(e.consume($),s=0,p):am($)?(e.consume($),v):n($)}function c($){return $===45?(e.consume($),h):n($)}function f($){return $===null?n($):$===45?(e.consume($),d):Un($)?(o=f,G($)):(e.consume($),f)}function d($){return $===45?(e.consume($),h):f($)}function h($){return $===62?U($):$===45?d($):f($)}function p($){const j="CDATA[";return $===j.charCodeAt(s++)?(e.consume($),s===j.length?m:p):n($)}function m($){return $===null?n($):$===93?(e.consume($),g):Un($)?(o=m,G($)):(e.consume($),m)}function g($){return $===93?(e.consume($),y):m($)}function y($){return $===62?U($):$===93?(e.consume($),y):m($)}function v($){return $===null||$===62?U($):Un($)?(o=v,G($)):(e.consume($),v)}function b($){return $===null?n($):$===63?(e.consume($),_):Un($)?(o=b,G($)):(e.consume($),b)}function _($){return $===62?U($):b($)}function w($){return am($)?(e.consume($),S):n($)}function S($){return $===45||_f($)?(e.consume($),S):T($)}function T($){return Un($)?(o=T,G($)):Ai($)?(e.consume($),T):U($)}function A($){return $===45||_f($)?(e.consume($),A):$===47||$===62||Oc($)?k($):n($)}function k($){return $===47?(e.consume($),U):$===58||$===95||am($)?(e.consume($),I):Un($)?(o=k,G($)):Ai($)?(e.consume($),k):U($)}function I($){return $===45||$===46||$===58||$===95||_f($)?(e.consume($),I):R($)}function R($){return $===61?(e.consume($),F):Un($)?(o=R,G($)):Ai($)?(e.consume($),R):k($)}function F($){return $===null||$===60||$===61||$===62||$===96?n($):$===34||$===39?(e.consume($),i=$,O):Un($)?(o=F,G($)):Ai($)?(e.consume($),F):(e.consume($),L)}function O($){return $===i?(e.consume($),i=void 0,H):$===null?n($):Un($)?(o=O,G($)):(e.consume($),O)}function L($){return $===null||$===34||$===39||$===60||$===61||$===96?n($):$===47||$===62||Oc($)?k($):(e.consume($),L)}function H($){return $===47||$===62||Oc($)?k($):n($)}function U($){return $===62?(e.consume($),e.exit("htmlTextData"),e.exit("htmlText"),t):n($)}function G($){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),Y}function Y($){return Ai($)?hs(e,J,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):J($)}function J($){return e.enter("htmlTextData"),o($)}}const ite={name:"labelEnd",tokenize:U0t,resolveTo:j0t,resolveAll:B0t},M0t={tokenize:z0t},$0t={tokenize:V0t},L0t={tokenize:H0t};function B0t(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function j0t(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=_d(a,e.slice(s+1,s+r+3)),a=_d(a,[["enter",c,t]]),a=_d(a,rte(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=_d(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=_d(a,e.slice(o+1)),a=_d(a,[["exit",u,t]]),Jg(e,s,e.length,a),e}function U0t(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(vS(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(M0t,c,o?c:f)(d):d===91?e.attempt($0t,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(L0t,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function z0t(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Oc(f)?hk(e,s)(f):s(f)}function s(f){return f===41?c(f):Xke(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Oc(f)?hk(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?Jke(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Oc(f)?hk(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function V0t(e,t,n){const r=this;return i;function i(a){return Qke.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(vS(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function H0t(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const q0t={name:"labelStartImage",tokenize:W0t,resolveAll:ite.resolveAll};function W0t(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const G0t={name:"labelStartLink",tokenize:Y0t,resolveAll:ite.resolveAll};function Y0t(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Tz={name:"lineEnding",tokenize:K0t};function K0t(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),hs(e,t,"linePrefix")}}const Z6={name:"thematicBreak",tokenize:X0t};function X0t(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||Un(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),Ai(l)?hs(e,a,"whitespace")(l):a(l))}}const ac={name:"list",tokenize:Z0t,continuation:{tokenize:egt},exit:ngt},Q0t={tokenize:rgt,partial:!0},J0t={tokenize:tgt,partial:!0};function Z0t(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:AG(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(Z6,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return AG(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(eB,r.interrupt?n:c,e.attempt(Q0t,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return Ai(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function egt(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(eB,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,hs(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Ai(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(J0t,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,hs(e,e.attempt(ac,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function tgt(e,t,n){const r=this;return hs(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function ngt(e){e.exit(this.containerState.type)}function rgt(e,t,n){const r=this;return hs(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Ai(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Jme={name:"setextUnderline",tokenize:sgt,resolveTo:igt};function igt(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function sgt(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),Ai(l)?hs(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||Un(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const ogt={tokenize:agt};function agt(e){const t=this,n=e.attempt(eB,r,e.attempt(this.parser.constructs.flowInitial,i,hs(e,e.attempt(this.parser.constructs.flow,i,e.attempt(d0t,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const ugt={resolveAll:eRe()},lgt=Zke("string"),cgt=Zke("text");function Zke(e){return{tokenize:t,resolveAll:eRe(e==="text"?fgt:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function eRe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function fgt(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function dgt(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:_,attempt:T(w),check:T(S),interrupt:T(S,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(R){return o=_d(o,R),g(),o[o.length-1]!==null?[]:(A(t,0),l.events=rte(s,l.events,l),l.events)}function d(R,F){return pgt(h(R),F)}function h(R){return hgt(o,R)}function p(){const{line:R,column:F,offset:O,_index:L,_bufferIndex:H}=r;return{line:R,column:F,offset:O,_index:L,_bufferIndex:H}}function m(R){i[R.line]=R.column,I()}function g(){let R;for(;r._index<o.length;){const F=o[r._index];if(typeof F=="string")for(R=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===R&&r._bufferIndex<F.length;)y(F.charCodeAt(r._bufferIndex));else y(F)}}function y(R){c=c(R)}function v(R){Un(R)?(r.line++,r.column=1,r.offset+=R===-3?2:1,I()):R!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=R}function b(R,F){const O=F||{};return O.type=R,O.start=p(),l.events.push(["enter",O,l]),a.push(O),O}function _(R){const F=a.pop();return F.end=p(),l.events.push(["exit",F,l]),F}function w(R,F){A(R,F.from)}function S(R,F){F.restore()}function T(R,F){return O;function O(L,H,U){let G,Y,J,$;return Array.isArray(L)?W(L):"tokenize"in L?W([L]):j(L);function j(re){return xe;function xe(pe){const Te=pe!==null&&re[pe],ke=pe!==null&&re.null,it=[...Array.isArray(Te)?Te:Te?[Te]:[],...Array.isArray(ke)?ke:ke?[ke]:[]];return W(it)(pe)}}function W(re){return G=re,Y=0,re.length===0?U:B(re[Y])}function B(re){return xe;function xe(pe){return $=k(),J=re,re.partial||(l.currentConstruct=re),re.name&&l.parser.constructs.disable.null.includes(re.name)?Z():re.tokenize.call(F?Object.assign(Object.create(l),F):l,u,q,Z)(pe)}}function q(re){return R(J,$),H}function Z(re){return $.restore(),++Y<G.length?B(G[Y]):U}}}function A(R,F){R.resolveAll&&!s.includes(R)&&s.push(R),R.resolve&&Jg(l.events,F,l.events.length-F,R.resolve(l.events.slice(F),l)),R.resolveTo&&(l.events=R.resolveTo(l.events,l))}function k(){const R=p(),F=l.previous,O=l.currentConstruct,L=l.events.length,H=Array.from(a);return{restore:U,from:L};function U(){r=R,l.previous=F,l.currentConstruct=O,l.events.length=L,a=H,I()}}function I(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function hgt(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function pgt(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const mgt={42:ac,43:ac,45:ac,48:ac,49:ac,50:ac,51:ac,52:ac,53:ac,54:ac,55:ac,56:ac,57:ac,62:Wke},ggt={91:y0t},ygt={[-2]:Cz,[-1]:Cz,32:Cz},vgt={35:E0t,42:Z6,45:[Jme,Z6],60:A0t,61:Jme,95:Z6,96:Xme,126:Xme},bgt={38:Yke,92:Gke},xgt={[-5]:Tz,[-4]:Tz,[-3]:Tz,33:q0t,38:Yke,42:DG,60:[Gmt,O0t],91:G0t,92:[w0t,Gke],93:ite,95:DG,96:o0t},wgt={null:[DG,ugt]},_gt={null:[42,95]},Egt={null:[]},Sgt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:_gt,contentInitial:ggt,disable:Egt,document:mgt,flow:vgt,flowInitial:ygt,insideSpan:wgt,string:bgt,text:xgt},Symbol.toStringTag,{value:"Module"}));function Cgt(e){const n=Nmt([Sgt,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(jmt),document:i(zmt),flow:i(ogt),string:i(lgt),text:i(cgt)};return r;function i(s){return o;function o(a){return dgt(r,s,a)}}}function Tgt(e){for(;!Kke(e););return e}const Zme=/[\0\t\n\r]/g;function Agt(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Zme.lastIndex=f,l=Zme.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const Dgt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Igt(e){return e.replace(Dgt,kgt)}function kgt(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return qke(n.slice(s?2:1),s?16:10)}return nte(n)||e}const tRe={}.hasOwnProperty;function Rgt(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Ngt(n)(Tgt(Cgt(n).document().write(Agt()(e,t,!0))))}function Ngt(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ft),autolinkProtocol:k,autolinkEmail:k,atxHeading:s(Ct),blockQuote:s(ke),characterEscape:k,characterReference:k,codeFenced:s(it),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(it,o),codeText:s(Re,o),codeTextData:k,data:k,codeFlowValue:k,definition:s(ut),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ke),hardBreakEscape:s(gt),hardBreakTrailing:s(gt),htmlFlow:s(Ie,o),htmlFlowData:k,htmlText:s(Ie,o),htmlTextData:k,image:s(Ve),label:o,link:s(ft),listItem:s(Mt),listItemValue:d,listOrdered:s(_t,f),listUnordered:s(_t),paragraph:s(st),reference:B,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Ct),strong:s(X),thematicBreak:s(we)},exit:{atxHeading:u(),atxHeadingSequence:w,autolink:u(),autolinkEmail:Te,autolinkProtocol:pe,blockQuote:u(),characterEscapeValue:I,characterReferenceMarkerHexadecimal:Z,characterReferenceMarkerNumeric:Z,characterReferenceValue:re,characterReference:xe,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:I,codeIndented:u(y),codeText:u(H),codeTextData:I,data:I,definition:u(),definitionDestinationString:_,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(F),hardBreakTrailing:u(F),htmlFlow:u(O),htmlFlowData:I,htmlText:u(L),htmlTextData:I,image:u(G),label:J,labelText:Y,lineEnding:R,link:u(U),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:q,resourceDestinationString:$,resourceTitleString:j,resource:W,setextHeading:u(A),setextHeadingLineSequence:T,setextHeadingText:S,strong:u(),thematicBreak:u()}};nRe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ae){let he={type:"root",children:[]};const Ee={stack:[he],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},$e=[];let Be=-1;for(;++Be<ae.length;)if(ae[Be][1].type==="listOrdered"||ae[Be][1].type==="listUnordered")if(ae[Be][0]==="enter")$e.push(Be);else{const lt=$e.pop();Be=i(ae,lt,Be)}for(Be=-1;++Be<ae.length;){const lt=t[ae[Be][0]];tRe.call(lt,ae[Be][1].type)&&lt[ae[Be][1].type].call(Object.assign({sliceSerialize:ae[Be][2].sliceSerialize},Ee),ae[Be][1])}if(Ee.tokenStack.length>0){const lt=Ee.tokenStack[Ee.tokenStack.length-1];(lt[1]||e0e).call(Ee,void 0,lt[0])}for(he.position={start:e1(ae.length>0?ae[0][1].start:{line:1,column:1,offset:0}),end:e1(ae.length>0?ae[ae.length-2][1].end:{line:1,column:1,offset:0})},Be=-1;++Be<t.transforms.length;)he=t.transforms[Be](he)||he;return he}function i(ae,he,Ee){let $e=he-1,Be=-1,lt=!1,Je,Xt,fn,Wt;for(;++$e<=Ee;){const an=ae[$e];switch(an[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{an[0]==="enter"?Be++:Be--,Wt=void 0;break}case"lineEndingBlank":{an[0]==="enter"&&(Je&&!Wt&&!Be&&!fn&&(fn=$e),Wt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Wt=void 0}if(!Be&&an[0]==="enter"&&an[1].type==="listItemPrefix"||Be===-1&&an[0]==="exit"&&(an[1].type==="listUnordered"||an[1].type==="listOrdered")){if(Je){let Sn=$e;for(Xt=void 0;Sn--;){const Mn=ae[Sn];if(Mn[1].type==="lineEnding"||Mn[1].type==="lineEndingBlank"){if(Mn[0]==="exit")continue;Xt&&(ae[Xt][1].type="lineEndingBlank",lt=!0),Mn[1].type="lineEnding",Xt=Sn}else if(!(Mn[1].type==="linePrefix"||Mn[1].type==="blockQuotePrefix"||Mn[1].type==="blockQuotePrefixWhitespace"||Mn[1].type==="blockQuoteMarker"||Mn[1].type==="listItemIndent"))break}fn&&(!Xt||fn<Xt)&&(Je._spread=!0),Je.end=Object.assign({},Xt?ae[Xt][1].start:an[1].end),ae.splice(Xt||$e,0,["exit",Je,an[2]]),$e++,Ee++}if(an[1].type==="listItemPrefix"){const Sn={type:"listItem",_spread:!1,start:Object.assign({},an[1].start),end:void 0};Je=Sn,ae.splice($e,0,["enter",Sn,an[2]]),$e++,Ee++,fn=void 0,Wt=!0}}}return ae[he][1]._spread=lt,Ee}function s(ae,he){return Ee;function Ee($e){a.call(this,ae($e),$e),he&&he.call(this,$e)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(ae,he,Ee){this.stack[this.stack.length-1].children.push(ae),this.stack.push(ae),this.tokenStack.push([he,Ee]),ae.position={start:e1(he.start),end:void 0}}function u(ae){return he;function he(Ee){ae&&ae.call(this,Ee),l.call(this,Ee)}}function l(ae,he){const Ee=this.stack.pop(),$e=this.tokenStack.pop();if($e)$e[0].type!==ae.type&&(he?he.call(this,ae,$e[0]):($e[1]||e0e).call(this,ae,$e[0]));else throw new Error("Cannot close `"+ae.type+"` ("+dk({start:ae.start,end:ae.end})+"): its not open");Ee.position.end=e1(ae.end)}function c(){return kmt(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(ae){if(this.data.expectingFirstListItemValue){const he=this.stack[this.stack.length-2];he.start=Number.parseInt(this.sliceSerialize(ae),10),this.data.expectingFirstListItemValue=void 0}}function h(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.lang=ae}function p(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.meta=ae}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.value=ae.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.value=ae.replace(/(\r?\n|\r)$/g,"")}function v(ae){const he=this.resume(),Ee=this.stack[this.stack.length-1];Ee.label=he,Ee.identifier=vS(this.sliceSerialize(ae)).toLowerCase()}function b(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.title=ae}function _(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.url=ae}function w(ae){const he=this.stack[this.stack.length-1];if(!he.depth){const Ee=this.sliceSerialize(ae).length;he.depth=Ee}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function T(ae){const he=this.stack[this.stack.length-1];he.depth=this.sliceSerialize(ae).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function k(ae){const Ee=this.stack[this.stack.length-1].children;let $e=Ee[Ee.length-1];(!$e||$e.type!=="text")&&($e=de(),$e.position={start:e1(ae.start),end:void 0},Ee.push($e)),this.stack.push($e)}function I(ae){const he=this.stack.pop();he.value+=this.sliceSerialize(ae),he.position.end=e1(ae.end)}function R(ae){const he=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ee=he.children[he.children.length-1];Ee.position.end=e1(ae.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(he.type)&&(k.call(this,ae),I.call(this,ae))}function F(){this.data.atHardBreak=!0}function O(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.value=ae}function L(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.value=ae}function H(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.value=ae}function U(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const he=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=he,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function G(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const he=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=he,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function Y(ae){const he=this.sliceSerialize(ae),Ee=this.stack[this.stack.length-2];Ee.label=Igt(he),Ee.identifier=vS(he).toLowerCase()}function J(){const ae=this.stack[this.stack.length-1],he=this.resume(),Ee=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ee.type==="link"){const $e=ae.children;Ee.children=$e}else Ee.alt=he}function $(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.url=ae}function j(){const ae=this.resume(),he=this.stack[this.stack.length-1];he.title=ae}function W(){this.data.inReference=void 0}function B(){this.data.referenceType="collapsed"}function q(ae){const he=this.resume(),Ee=this.stack[this.stack.length-1];Ee.label=he,Ee.identifier=vS(this.sliceSerialize(ae)).toLowerCase(),this.data.referenceType="full"}function Z(ae){this.data.characterReferenceType=ae.type}function re(ae){const he=this.sliceSerialize(ae),Ee=this.data.characterReferenceType;let $e;Ee?($e=qke(he,Ee==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):$e=nte(he);const Be=this.stack[this.stack.length-1];Be.value+=$e}function xe(ae){const he=this.stack.pop();he.position.end=e1(ae.end)}function pe(ae){I.call(this,ae);const he=this.stack[this.stack.length-1];he.url=this.sliceSerialize(ae)}function Te(ae){I.call(this,ae);const he=this.stack[this.stack.length-1];he.url="mailto:"+this.sliceSerialize(ae)}function ke(){return{type:"blockquote",children:[]}}function it(){return{type:"code",lang:null,meta:null,value:""}}function Re(){return{type:"inlineCode",value:""}}function ut(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ke(){return{type:"emphasis",children:[]}}function Ct(){return{type:"heading",depth:0,children:[]}}function gt(){return{type:"break"}}function Ie(){return{type:"html",value:""}}function Ve(){return{type:"image",title:null,url:"",alt:null}}function ft(){return{type:"link",title:null,url:"",children:[]}}function _t(ae){return{type:"list",ordered:ae.type==="listOrdered",start:null,spread:ae._spread,children:[]}}function Mt(ae){return{type:"listItem",spread:ae._spread,checked:null,children:[]}}function st(){return{type:"paragraph",children:[]}}function X(){return{type:"strong",children:[]}}function de(){return{type:"text",value:""}}function we(){return{type:"thematicBreak"}}}function e1(e){return{line:e.line,column:e.column,offset:e.offset}}function nRe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?nRe(e,r):Pgt(e,r)}}function Pgt(e,t){let n;for(n in t)if(tRe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function e0e(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+dk({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+dk({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+dk({start:t.start,end:t.end})+") is still open")}function Ogt(e){const t=this;t.parser=n;function n(r){return Rgt(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Fgt(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Mgt(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function $gt(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function Lgt(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Bgt(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function jgt(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=jT(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function Ugt(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function zgt(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function rRe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Vgt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return rRe(e,t);const i={src:jT(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function Hgt(e,t){const n={src:jT(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function qgt(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Wgt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return rRe(e,t);const i={href:jT(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Ggt(e,t){const n={href:jT(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Ygt(e,t,n){const r=e.all(t),i=n?Kgt(n):iRe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function Kgt(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=iRe(n[r])}return t}function iRe(e){const t=e.spread;return t??e.children.length>1}function Xgt(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function Qgt(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Jgt(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Zgt(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function eyt(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=d0(t.children[1]),u=ZL(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function tyt(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function nyt(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const t0e=9,n0e=32;function ryt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(r0e(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(r0e(t.slice(i),i>0,!1)),s.join("")}function r0e(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===t0e||s===n0e;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===t0e||s===n0e;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function iyt(e,t){const n={type:"text",value:ryt(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function syt(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const oyt={blockquote:Fgt,break:Mgt,code:$gt,delete:Lgt,emphasis:Bgt,footnoteReference:jgt,heading:Ugt,html:zgt,imageReference:Vgt,image:Hgt,inlineCode:qgt,linkReference:Wgt,link:Ggt,listItem:Ygt,list:Xgt,paragraph:Qgt,root:Jgt,strong:Zgt,table:eyt,tableCell:nyt,tableRow:tyt,text:iyt,thematicBreak:syt,toml:o4,yaml:o4,definition:o4,footnoteDefinition:o4};function o4(){}const sRe=-1,tB=0,zM=1,VM=2,ste=3,ote=4,ate=5,ute=6,oRe=7,aRe=8,i0e=typeof self=="object"?self:globalThis,ayt=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case tB:case sRe:return n(o,i);case zM:{const a=n([],i);for(const u of o)a.push(r(u));return a}case VM:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case ste:return n(new Date(o),i);case ote:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case ate:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case ute:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case oRe:{const{name:a,message:u}=o;return n(new i0e[a](u),i)}case aRe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new i0e[s](o),i)};return r},s0e=e=>ayt(new Map,e)(0),WE="",{toString:uyt}={},{keys:lyt}=Object,bD=e=>{const t=typeof e;if(t!=="object"||!e)return[tB,t];const n=uyt.call(e).slice(8,-1);switch(n){case"Array":return[zM,WE];case"Object":return[VM,WE];case"Date":return[ste,WE];case"RegExp":return[ote,WE];case"Map":return[ate,WE];case"Set":return[ute,WE]}return n.includes("Array")?[zM,n]:n.includes("Error")?[oRe,n]:[VM,n]},a4=([e,t])=>e===tB&&(t==="function"||t==="symbol"),cyt=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=bD(o);switch(a){case tB:{let c=o;switch(u){case"bigint":a=aRe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([sRe],o)}return i([a,c],o)}case zM:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case VM:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of lyt(o))(e||!a4(bD(o[d])))&&c.push([s(d),s(o[d])]);return f}case ste:return i([a,o.toISOString()],o);case ote:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case ate:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(a4(bD(d))||a4(bD(h))))&&c.push([s(d),s(h)]);return f}case ute:{const c=[],f=i([a,c],o);for(const d of o)(e||!a4(bD(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},o0e=(e,{json:t,lossy:n}={})=>{const r=[];return cyt(!(t||n),!!t,new Map,r)(e),r},lC=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?s0e(o0e(e,t)):structuredClone(e):(e,t)=>s0e(o0e(e,t));function fyt(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function dyt(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function hyt(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||fyt,r=e.options.footnoteBackLabel||dyt,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=jT(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...lC(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const uRe=function(e){if(e==null)return yyt;if(typeof e=="function")return nB(e);if(typeof e=="object")return Array.isArray(e)?pyt(e):myt(e);if(typeof e=="string")return gyt(e);throw new Error("Expected function, string, or object as test")};function pyt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=uRe(e[n]);return nB(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function myt(e){const t=e;return nB(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function gyt(e){return nB(t);function t(n){return n&&n.type===e}}function nB(e){return t;function t(n,r,i){return!!(vyt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function yyt(){return!0}function vyt(e){return e!==null&&typeof e=="object"&&"type"in e}const lRe=[],byt=!0,a0e=!1,xyt="skip";function wyt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=uRe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=lRe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=_yt(n(u,c)),h[0]===a0e))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==xyt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===a0e)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function _yt(e){return Array.isArray(e)?e:typeof e=="number"?[byt,e]:e==null?lRe:[e]}function lte(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),wyt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const IG={}.hasOwnProperty,Eyt={};function Syt(e,t){const n=t||Eyt,r=new Map,i=new Map,s=new Map,o={...oyt,...n.handlers},a={all:l,applyData:Tyt,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:Cyt,wrap:Dyt};return lte(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(IG.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=lC(g);return y.children=a.all(c),y}return lC(c)}return(a.options.unknownHandler||Ayt)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=u0e(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=u0e(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function Cyt(e,t){e.position&&(t.position=omt(e))}function Tyt(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,lC(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Ayt(e,t){const n=t.data||{},r="value"in t&&!(IG.call(n,"hProperties")||IG.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Dyt(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function u0e(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function l0e(e,t){const n=Syt(e,t),r=n.one(e,void 0),i=hyt(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Iyt(e,t){return e&&"run"in e?async function(n,r){const i=l0e(n,{file:r,...t});await e.run(i,r)}:function(n,r){return l0e(n,{file:r,...t||e})}}function c0e(e){if(e)throw e}var eF=Object.prototype.hasOwnProperty,cRe=Object.prototype.toString,f0e=Object.defineProperty,d0e=Object.getOwnPropertyDescriptor,h0e=function(t){return typeof Array.isArray=="function"?Array.isArray(t):cRe.call(t)==="[object Array]"},p0e=function(t){if(!t||cRe.call(t)!=="[object Object]")return!1;var n=eF.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&eF.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||eF.call(t,i)},m0e=function(t,n){f0e&&n.name==="__proto__"?f0e(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},g0e=function(t,n){if(n==="__proto__")if(eF.call(t,n)){if(d0e)return d0e(t,n).value}else return;return t[n]},kyt=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=g0e(a,n),i=g0e(t,n),a!==i&&(c&&i&&(p0e(i)||(s=h0e(i)))?(s?(s=!1,o=r&&h0e(r)?r:[]):o=r&&p0e(r)?r:{},m0e(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&m0e(a,{name:n,newValue:i}));return a};const Az=l0(kyt);function kG(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Ryt(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?Nyt(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Nyt(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Xp={basename:Pyt,dirname:Oyt,extname:Fyt,join:Myt,sep:"/"};function Pyt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');yN(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Oyt(e){if(yN(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Fyt(e){yN(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Myt(...e){let t=-1,n;for(;++t<e.length;)yN(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":$yt(n)}function $yt(e){yN(e);const t=e.codePointAt(0)===47;let n=Lyt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Lyt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function yN(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Byt={cwd:jyt};function jyt(){return"/"}function RG(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Uyt(e){if(typeof e=="string")e=new URL(e);else if(!RG(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return zyt(e)}function zyt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Dz=["history","path","basename","stem","extname","dirname"];class fRe{constructor(t){let n;t?RG(t)?n={path:t}:typeof t=="string"||Vyt(t)?n={value:t}:n=t:n={},this.cwd=Byt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Dz.length;){const s=Dz[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Dz.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Xp.basename(this.path):void 0}set basename(t){kz(t,"basename"),Iz(t,"basename"),this.path=Xp.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Xp.dirname(this.path):void 0}set dirname(t){y0e(this.basename,"dirname"),this.path=Xp.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Xp.extname(this.path):void 0}set extname(t){if(Iz(t,"extname"),y0e(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Xp.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){RG(t)&&(t=Uyt(t)),kz(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Xp.basename(this.path,this.extname):void 0}set stem(t){kz(t,"stem"),Iz(t,"stem"),this.path=Xp.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new al(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Iz(e,t){if(e&&e.includes(Xp.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Xp.sep+"`")}function kz(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function y0e(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Vyt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Hyt=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},qyt={}.hasOwnProperty;class cte extends Hyt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Ryt()}copy(){const t=new cte;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Az(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Pz("data",this.frozen),this.namespace[t]=n,this):qyt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Pz("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=u4(t),r=this.parser||this.Parser;return Rz("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Rz("process",this.parser||this.Parser),Nz("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=u4(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);Yyt(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),Rz("processSync",this.parser||this.Parser),Nz("processSync",this.compiler||this.Compiler),this.process(t,i),b0e("processSync","process",n),r;function i(s,o){n=!0,c0e(s),r=o}}run(t,n,r){v0e(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=u4(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),b0e("runSync","run",r),i;function s(o,a){c0e(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=u4(n),i=this.compiler||this.Compiler;return Nz("stringify",i),v0e(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(Pz("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=Az(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];kG(m)&&kG(h)&&(h=Az(!0,m,h)),r[d]=[l,h,...p]}}}}const Wyt=new cte().freeze();function Rz(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Nz(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Pz(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function v0e(e){if(!kG(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function b0e(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function u4(e){return Gyt(e)?e:new fRe(e)}function Gyt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Yyt(e){return typeof e=="string"||Kyt(e)}function Kyt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Xyt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",x0e=[],w0e={allowDangerousHtml:!0},Qyt=/^(https?|ircs?|mailto|xmpp)$/i,Jyt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Zyt(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||x0e,u=e.remarkPlugins||x0e,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...w0e}:w0e,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||e1t,h=Wyt().use(Ogt).use(u).use(Iyt,l).use(a),p=new fRe;typeof r=="string"&&(p.value=r);for(const v of Jyt)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+Xyt+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),lte(g,y),dmt(g,{Fragment:E.Fragment,components:s,ignoreInvalidStyle:!0,jsx:E.jsx,jsxs:E.jsxs,passKeys:!0,passNode:!0});function y(v,b,_){if(v.type==="raw"&&_&&typeof b=="number")return c?_.children.splice(b,1):_.children[b]={type:"text",value:v.value},b;if(v.type==="element"){let w;for(w in Sz)if(Object.hasOwn(Sz,w)&&Object.hasOwn(v.properties,w)){const S=v.properties[w],T=Sz[w];(T===null||T.includes(v.tagName))&&(v.properties[w]=d(String(S||""),w,v))}}if(v.type==="element"){let w=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!w&&n&&typeof b=="number"&&(w=!n(v,b,_)),w&&_&&typeof b=="number")return f&&v.children?_.children.splice(b,1,...v.children):_.children.splice(b,1),b}}}function e1t(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||Qyt.test(e.slice(0,t))?e:""}const _0e=/[#.]/g;function t1t(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){_0e.lastIndex=i;const a=_0e.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const n1t=new Set(["button","menu","reset","submit"]),NG={}.hasOwnProperty;function dRe(e,t,n){const r=n&&o1t(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=t1t(s,t),l.tagName=l.tagName.toLowerCase(),r&&NG.call(r,l.tagName)&&(l.tagName=r[l.tagName]),r1t(o,l.tagName)){let c;for(c in o)NG.call(o,c)&&i1t(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)PG(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function r1t(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?n1t.has(e.type.toLowerCase()):!("value"in e)}function i1t(e,t,n,r){const i=JL(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Fme(r):i.commaSeparated?o=kme(r):i.commaOrSpaceSeparated?o=Fme(kme(r).join(" ")):o=E0e(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?s1t(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=E0e(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function PG(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)PG(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?PG(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function E0e(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||DR(n)===DR(t)))return!0}return n}function s1t(e){const t=[];let n;for(n in e)NG.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function o1t(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const a1t=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],u1t=dRe(gN,"div"),l1t=dRe(Cb,"g",a1t),Oz=/\r?\n|\r/g;function c1t(e){const t=String(e),n=[];for(Oz.lastIndex=0;Oz.test(t);)n.push(Oz.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const dw={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},hRe={}.hasOwnProperty,f1t=Object.prototype;function d1t(e,t){const n=t;return fte({file:n.file||void 0,location:!1,schema:n.space==="svg"?Cb:gN,verbose:n.verbose||!1},e)}function fte(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},tF(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:pRe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=c1t(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},tF(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},tF(e,r,n),n}default:return n=h1t(e,t),n}}function pRe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=fte(e,t[n]);r.push(i)}return r}function h1t(e,t){const n=e.schema;e.schema=t.namespaceURI===dw.svg?Cb:gN;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;hRe.call(f1t,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?l1t:u1t)(t.tagName,i,pRe(e,t.childNodes));if(tF(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&W2(u.startTag),c=u&&u.endTag&&W2(u.endTag),f=fte(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function tF(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=p1t(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function p1t(e,t,n){const r=W2(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)hRe.call(n.attrs,o)&&(s[JL(e.schema,o).property]=W2(n.attrs[o]));n.startTag;const a=W2(n.startTag),u=n.endTag?W2(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function W2(e){const t=S0e({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=S0e({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function S0e(e){return e.line&&e.column?e:void 0}const C0e={}.hasOwnProperty;function mRe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&C0e.call(i,e)){const u=String(i[e]);o=C0e.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const m1t={}.hasOwnProperty,gRe=mRe("type",{handlers:{root:y1t,element:_1t,text:x1t,comment:w1t,doctype:b1t}});function g1t(e,t){const r=t.space;return gRe(e,r==="svg"?Cb:gN)}function y1t(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=dte(e.children,n,t),UT(e,n),n}function v1t(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=dte(e.children,n,t),UT(e,n),n}function b1t(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return UT(e,t),t}function x1t(e){const t={nodeName:"#text",value:e.value,parentNode:null};return UT(e,t),t}function w1t(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return UT(e,t),t}function _1t(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Cb);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&m1t.call(e.properties,s)){const u=E1t(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:dw[o],childNodes:[],parentNode:null};return a.childNodes=dte(e.children,a,r),UT(e,a),e.tagName==="template"&&e.content&&(a.content=v1t(e.content,r)),a}function E1t(e,t,n){const r=JL(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?Dke(n):$ke(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=dw[r.space]}return i}function dte(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=gRe(e[r],n);s.parentNode=t,i.push(s)}return i}function UT(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const S1t=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],C1t=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Rs="";var oe;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(oe=oe||(oe={}));const ic={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function yRe(e){return e>=55296&&e<=57343}function T1t(e){return e>=56320&&e<=57343}function A1t(e,t){return(e-55296)*1024+9216+t}function vRe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function bRe(e){return e>=64976&&e<=65007||C1t.has(e)}var We;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(We=We||(We={}));const D1t=65536;class I1t{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=D1t,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(T1t(n))return this.pos++,this._addGap(),A1t(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,oe.EOF;return this._err(We.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,oe.EOF;const r=this.html.charCodeAt(n);return r===oe.CARRIAGE_RETURN?oe.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,oe.EOF;let t=this.html.charCodeAt(this.pos);return t===oe.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,oe.LINE_FEED):t===oe.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,yRe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===oe.LINE_FEED||t===oe.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){vRe(t)?this._err(We.controlCharacterInInputStream):bRe(t)&&this._err(We.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var _r;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(_r=_r||(_r={}));function xRe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const o1=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),k1t=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var Fz;const R1t=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),N1t=(Fz=String.fromCodePoint)!==null&&Fz!==void 0?Fz:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function P1t(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=R1t.get(e))!==null&&t!==void 0?t:e}var ka;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(ka||(ka={}));const O1t=32;var bm;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(bm||(bm={}));function OG(e){return e>=ka.ZERO&&e<=ka.NINE}function F1t(e){return e>=ka.UPPER_A&&e<=ka.UPPER_F||e>=ka.LOWER_A&&e<=ka.LOWER_F}function M1t(e){return e>=ka.UPPER_A&&e<=ka.UPPER_Z||e>=ka.LOWER_A&&e<=ka.LOWER_Z||OG(e)}function $1t(e){return e===ka.EQUALS||M1t(e)}var Ea;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ea||(Ea={}));var Yx;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Yx||(Yx={}));class L1t{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ea.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Yx.Strict}startEntity(t){this.decodeMode=t,this.state=Ea.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ea.EntityStart:return t.charCodeAt(n)===ka.NUM?(this.state=Ea.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ea.NamedEntity,this.stateNamedEntity(t,n));case Ea.NumericStart:return this.stateNumericStart(t,n);case Ea.NumericDecimal:return this.stateNumericDecimal(t,n);case Ea.NumericHex:return this.stateNumericHex(t,n);case Ea.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|O1t)===ka.LOWER_X?(this.state=Ea.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ea.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(OG(i)||F1t(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(OG(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===ka.SEMI)this.consumed+=1;else if(this.decodeMode===Yx.Strict)return 0;return this.emitCodePoint(P1t(this.result),this.consumed),this.errors&&(t!==ka.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&bm.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=_Re(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Yx.Attribute&&(s===0||$1t(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&bm.VALUE_LENGTH)>>14,s!==0){if(o===ka.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Yx.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&bm.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~bm.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ea.NamedEntity:return this.result!==0&&(this.decodeMode!==Yx.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ea.NumericDecimal:return this.emitNumericEntity(0,2);case Ea.NumericHex:return this.emitNumericEntity(0,3);case Ea.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ea.EntityStart:return 0}}}function wRe(e){let t="";const n=new L1t(e,r=>t+=N1t(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function _Re(e,t,n,r){const i=(t&bm.BRANCH_LENGTH)>>7,s=t&bm.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}wRe(o1);wRe(k1t);var ot;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(ot=ot||(ot={}));var lv;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(lv=lv||(lv={}));var pf;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(pf=pf||(pf={}));var Le;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Le=Le||(Le={}));var M;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(M=M||(M={}));const B1t=new Map([[Le.A,M.A],[Le.ADDRESS,M.ADDRESS],[Le.ANNOTATION_XML,M.ANNOTATION_XML],[Le.APPLET,M.APPLET],[Le.AREA,M.AREA],[Le.ARTICLE,M.ARTICLE],[Le.ASIDE,M.ASIDE],[Le.B,M.B],[Le.BASE,M.BASE],[Le.BASEFONT,M.BASEFONT],[Le.BGSOUND,M.BGSOUND],[Le.BIG,M.BIG],[Le.BLOCKQUOTE,M.BLOCKQUOTE],[Le.BODY,M.BODY],[Le.BR,M.BR],[Le.BUTTON,M.BUTTON],[Le.CAPTION,M.CAPTION],[Le.CENTER,M.CENTER],[Le.CODE,M.CODE],[Le.COL,M.COL],[Le.COLGROUP,M.COLGROUP],[Le.DD,M.DD],[Le.DESC,M.DESC],[Le.DETAILS,M.DETAILS],[Le.DIALOG,M.DIALOG],[Le.DIR,M.DIR],[Le.DIV,M.DIV],[Le.DL,M.DL],[Le.DT,M.DT],[Le.EM,M.EM],[Le.EMBED,M.EMBED],[Le.FIELDSET,M.FIELDSET],[Le.FIGCAPTION,M.FIGCAPTION],[Le.FIGURE,M.FIGURE],[Le.FONT,M.FONT],[Le.FOOTER,M.FOOTER],[Le.FOREIGN_OBJECT,M.FOREIGN_OBJECT],[Le.FORM,M.FORM],[Le.FRAME,M.FRAME],[Le.FRAMESET,M.FRAMESET],[Le.H1,M.H1],[Le.H2,M.H2],[Le.H3,M.H3],[Le.H4,M.H4],[Le.H5,M.H5],[Le.H6,M.H6],[Le.HEAD,M.HEAD],[Le.HEADER,M.HEADER],[Le.HGROUP,M.HGROUP],[Le.HR,M.HR],[Le.HTML,M.HTML],[Le.I,M.I],[Le.IMG,M.IMG],[Le.IMAGE,M.IMAGE],[Le.INPUT,M.INPUT],[Le.IFRAME,M.IFRAME],[Le.KEYGEN,M.KEYGEN],[Le.LABEL,M.LABEL],[Le.LI,M.LI],[Le.LINK,M.LINK],[Le.LISTING,M.LISTING],[Le.MAIN,M.MAIN],[Le.MALIGNMARK,M.MALIGNMARK],[Le.MARQUEE,M.MARQUEE],[Le.MATH,M.MATH],[Le.MENU,M.MENU],[Le.META,M.META],[Le.MGLYPH,M.MGLYPH],[Le.MI,M.MI],[Le.MO,M.MO],[Le.MN,M.MN],[Le.MS,M.MS],[Le.MTEXT,M.MTEXT],[Le.NAV,M.NAV],[Le.NOBR,M.NOBR],[Le.NOFRAMES,M.NOFRAMES],[Le.NOEMBED,M.NOEMBED],[Le.NOSCRIPT,M.NOSCRIPT],[Le.OBJECT,M.OBJECT],[Le.OL,M.OL],[Le.OPTGROUP,M.OPTGROUP],[Le.OPTION,M.OPTION],[Le.P,M.P],[Le.PARAM,M.PARAM],[Le.PLAINTEXT,M.PLAINTEXT],[Le.PRE,M.PRE],[Le.RB,M.RB],[Le.RP,M.RP],[Le.RT,M.RT],[Le.RTC,M.RTC],[Le.RUBY,M.RUBY],[Le.S,M.S],[Le.SCRIPT,M.SCRIPT],[Le.SECTION,M.SECTION],[Le.SELECT,M.SELECT],[Le.SOURCE,M.SOURCE],[Le.SMALL,M.SMALL],[Le.SPAN,M.SPAN],[Le.STRIKE,M.STRIKE],[Le.STRONG,M.STRONG],[Le.STYLE,M.STYLE],[Le.SUB,M.SUB],[Le.SUMMARY,M.SUMMARY],[Le.SUP,M.SUP],[Le.TABLE,M.TABLE],[Le.TBODY,M.TBODY],[Le.TEMPLATE,M.TEMPLATE],[Le.TEXTAREA,M.TEXTAREA],[Le.TFOOT,M.TFOOT],[Le.TD,M.TD],[Le.TH,M.TH],[Le.THEAD,M.THEAD],[Le.TITLE,M.TITLE],[Le.TR,M.TR],[Le.TRACK,M.TRACK],[Le.TT,M.TT],[Le.U,M.U],[Le.UL,M.UL],[Le.SVG,M.SVG],[Le.VAR,M.VAR],[Le.WBR,M.WBR],[Le.XMP,M.XMP]]);function zT(e){var t;return(t=B1t.get(e))!==null&&t!==void 0?t:M.UNKNOWN}const St=M,j1t={[ot.HTML]:new Set([St.ADDRESS,St.APPLET,St.AREA,St.ARTICLE,St.ASIDE,St.BASE,St.BASEFONT,St.BGSOUND,St.BLOCKQUOTE,St.BODY,St.BR,St.BUTTON,St.CAPTION,St.CENTER,St.COL,St.COLGROUP,St.DD,St.DETAILS,St.DIR,St.DIV,St.DL,St.DT,St.EMBED,St.FIELDSET,St.FIGCAPTION,St.FIGURE,St.FOOTER,St.FORM,St.FRAME,St.FRAMESET,St.H1,St.H2,St.H3,St.H4,St.H5,St.H6,St.HEAD,St.HEADER,St.HGROUP,St.HR,St.HTML,St.IFRAME,St.IMG,St.INPUT,St.LI,St.LINK,St.LISTING,St.MAIN,St.MARQUEE,St.MENU,St.META,St.NAV,St.NOEMBED,St.NOFRAMES,St.NOSCRIPT,St.OBJECT,St.OL,St.P,St.PARAM,St.PLAINTEXT,St.PRE,St.SCRIPT,St.SECTION,St.SELECT,St.SOURCE,St.STYLE,St.SUMMARY,St.TABLE,St.TBODY,St.TD,St.TEMPLATE,St.TEXTAREA,St.TFOOT,St.TH,St.THEAD,St.TITLE,St.TR,St.TRACK,St.UL,St.WBR,St.XMP]),[ot.MATHML]:new Set([St.MI,St.MO,St.MN,St.MS,St.MTEXT,St.ANNOTATION_XML]),[ot.SVG]:new Set([St.TITLE,St.FOREIGN_OBJECT,St.DESC]),[ot.XLINK]:new Set,[ot.XML]:new Set,[ot.XMLNS]:new Set};function ERe(e){return e===St.H1||e===St.H2||e===St.H3||e===St.H4||e===St.H5||e===St.H6}Le.STYLE,Le.SCRIPT,Le.XMP,Le.IFRAME,Le.NOEMBED,Le.NOFRAMES,Le.PLAINTEXT;const U1t=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var le;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(le||(le={}));const Co={DATA:le.DATA,RCDATA:le.RCDATA,RAWTEXT:le.RAWTEXT,SCRIPT_DATA:le.SCRIPT_DATA,PLAINTEXT:le.PLAINTEXT,CDATA_SECTION:le.CDATA_SECTION};function pk(e){return e>=oe.DIGIT_0&&e<=oe.DIGIT_9}function hI(e){return e>=oe.LATIN_CAPITAL_A&&e<=oe.LATIN_CAPITAL_Z}function z1t(e){return e>=oe.LATIN_SMALL_A&&e<=oe.LATIN_SMALL_Z}function a1(e){return z1t(e)||hI(e)}function FG(e){return a1(e)||pk(e)}function SRe(e){return e>=oe.LATIN_CAPITAL_A&&e<=oe.LATIN_CAPITAL_F}function CRe(e){return e>=oe.LATIN_SMALL_A&&e<=oe.LATIN_SMALL_F}function V1t(e){return pk(e)||SRe(e)||CRe(e)}function l4(e){return e+32}function TRe(e){return e===oe.SPACE||e===oe.LINE_FEED||e===oe.TABULATION||e===oe.FORM_FEED}function H1t(e){return e===oe.EQUALS_SIGN||FG(e)}function T0e(e){return TRe(e)||e===oe.SOLIDUS||e===oe.GREATER_THAN_SIGN}class q1t{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=le.DATA,this.returnState=le.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new I1t(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:_r.START_TAG,tagName:"",tagID:M.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:_r.END_TAG,tagName:"",tagID:M.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:_r.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:_r.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(xRe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(We.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=zT(t.tagName),t.type===_r.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(We.endTagWithAttributes),t.selfClosing&&this._err(We.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case _r.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case _r.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case _r.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:_r.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=TRe(t)?_r.WHITESPACE_CHARACTER:t===oe.NULL?_r.NULL_CHARACTER:_r.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(_r.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=o1[0];s>=0&&(s=_Re(o1,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=o1[s];const a=o&bm.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==oe.SEMICOLON&&this._isCharacterReferenceInAttribute()&&H1t(this.preprocessor.peek(1))?(n=[oe.AMPERSAND],s+=u):(n=u===0?[o1[s]&~bm.VALUE_LENGTH]:u===1?[o1[++s]]:[o1[++s],o1[++s]],r=0,i=t!==oe.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(We.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===le.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===le.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===le.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case le.DATA:{this._stateData(t);break}case le.RCDATA:{this._stateRcdata(t);break}case le.RAWTEXT:{this._stateRawtext(t);break}case le.SCRIPT_DATA:{this._stateScriptData(t);break}case le.PLAINTEXT:{this._statePlaintext(t);break}case le.TAG_OPEN:{this._stateTagOpen(t);break}case le.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case le.TAG_NAME:{this._stateTagName(t);break}case le.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case le.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case le.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case le.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case le.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case le.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case le.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case le.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case le.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case le.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case le.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case le.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case le.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case le.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case le.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case le.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case le.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case le.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case le.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case le.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case le.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case le.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case le.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case le.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case le.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case le.BOGUS_COMMENT:{this._stateBogusComment(t);break}case le.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case le.COMMENT_START:{this._stateCommentStart(t);break}case le.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case le.COMMENT:{this._stateComment(t);break}case le.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case le.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case le.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case le.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case le.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case le.COMMENT_END:{this._stateCommentEnd(t);break}case le.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case le.DOCTYPE:{this._stateDoctype(t);break}case le.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case le.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case le.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case le.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case le.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case le.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case le.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case le.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case le.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case le.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case le.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case le.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case le.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case le.CDATA_SECTION:{this._stateCdataSection(t);break}case le.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case le.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case le.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case le.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case le.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case le.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case le.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case le.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case le.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case le.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case oe.LESS_THAN_SIGN:{this.state=le.TAG_OPEN;break}case oe.AMPERSAND:{this.returnState=le.DATA,this.state=le.CHARACTER_REFERENCE;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this._emitCodePoint(t);break}case oe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case oe.AMPERSAND:{this.returnState=le.RCDATA,this.state=le.CHARACTER_REFERENCE;break}case oe.LESS_THAN_SIGN:{this.state=le.RCDATA_LESS_THAN_SIGN;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Rs);break}case oe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case oe.LESS_THAN_SIGN:{this.state=le.RAWTEXT_LESS_THAN_SIGN;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Rs);break}case oe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case oe.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_LESS_THAN_SIGN;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Rs);break}case oe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case oe.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Rs);break}case oe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(a1(t))this._createStartTagToken(),this.state=le.TAG_NAME,this._stateTagName(t);else switch(t){case oe.EXCLAMATION_MARK:{this.state=le.MARKUP_DECLARATION_OPEN;break}case oe.SOLIDUS:{this.state=le.END_TAG_OPEN;break}case oe.QUESTION_MARK:{this._err(We.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=le.BOGUS_COMMENT,this._stateBogusComment(t);break}case oe.EOF:{this._err(We.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(We.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=le.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(a1(t))this._createEndTagToken(),this.state=le.TAG_NAME,this._stateTagName(t);else switch(t){case oe.GREATER_THAN_SIGN:{this._err(We.missingEndTagName),this.state=le.DATA;break}case oe.EOF:{this._err(We.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(We.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=le.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=le.BEFORE_ATTRIBUTE_NAME;break}case oe.SOLIDUS:{this.state=le.SELF_CLOSING_START_TAG;break}case oe.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentTagToken();break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.tagName+=Rs;break}case oe.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(hI(t)?l4(t):t)}}_stateRcdataLessThanSign(t){t===oe.SOLIDUS?this.state=le.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=le.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){a1(t)?(this.state=le.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=le.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=le.BEFORE_ATTRIBUTE_NAME,!1;case oe.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=le.SELF_CLOSING_START_TAG,!1;case oe.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=le.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===oe.SOLIDUS?this.state=le.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=le.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){a1(t)?(this.state=le.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=le.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case oe.SOLIDUS:{this.state=le.SCRIPT_DATA_END_TAG_OPEN;break}case oe.EXCLAMATION_MARK:{this.state=le.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=le.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){a1(t)?(this.state=le.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===oe.HYPHEN_MINUS?(this.state=le.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===oe.HYPHEN_MINUS?(this.state=le.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case oe.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Rs);break}case oe.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case oe.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_ESCAPED,this._emitChars(Rs);break}case oe.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case oe.HYPHEN_MINUS:{this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case oe.GREATER_THAN_SIGN:{this.state=le.SCRIPT_DATA,this._emitChars(">");break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_ESCAPED,this._emitChars(Rs);break}case oe.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===oe.SOLIDUS?this.state=le.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:a1(t)?(this._emitChars("<"),this.state=le.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){a1(t)?(this.state=le.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(ic.SCRIPT,!1)&&T0e(this.preprocessor.peek(ic.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<ic.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case oe.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Rs);break}case oe.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case oe.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Rs);break}case oe.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case oe.HYPHEN_MINUS:{this._emitChars("-");break}case oe.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case oe.GREATER_THAN_SIGN:{this.state=le.SCRIPT_DATA,this._emitChars(">");break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Rs);break}case oe.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===oe.SOLIDUS?(this.state=le.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(ic.SCRIPT,!1)&&T0e(this.preprocessor.peek(ic.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<ic.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=le.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.SOLIDUS:case oe.GREATER_THAN_SIGN:case oe.EOF:{this.state=le.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case oe.EQUALS_SIGN:{this._err(We.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=le.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=le.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:case oe.SOLIDUS:case oe.GREATER_THAN_SIGN:case oe.EOF:{this._leaveAttrName(),this.state=le.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case oe.EQUALS_SIGN:{this._leaveAttrName(),this.state=le.BEFORE_ATTRIBUTE_VALUE;break}case oe.QUOTATION_MARK:case oe.APOSTROPHE:case oe.LESS_THAN_SIGN:{this._err(We.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.currentAttr.name+=Rs;break}default:this.currentAttr.name+=String.fromCodePoint(hI(t)?l4(t):t)}}_stateAfterAttributeName(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.SOLIDUS:{this.state=le.SELF_CLOSING_START_TAG;break}case oe.EQUALS_SIGN:{this.state=le.BEFORE_ATTRIBUTE_VALUE;break}case oe.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentTagToken();break}case oe.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=le.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.QUOTATION_MARK:{this.state=le.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{this.state=le.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case oe.GREATER_THAN_SIGN:{this._err(We.missingAttributeValue),this.state=le.DATA,this.emitCurrentTagToken();break}default:this.state=le.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case oe.QUOTATION_MARK:{this.state=le.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case oe.AMPERSAND:{this.returnState=le.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=le.CHARACTER_REFERENCE;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.currentAttr.value+=Rs;break}case oe.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case oe.APOSTROPHE:{this.state=le.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case oe.AMPERSAND:{this.returnState=le.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=le.CHARACTER_REFERENCE;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.currentAttr.value+=Rs;break}case oe.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this._leaveAttrValue(),this.state=le.BEFORE_ATTRIBUTE_NAME;break}case oe.AMPERSAND:{this.returnState=le.ATTRIBUTE_VALUE_UNQUOTED,this.state=le.CHARACTER_REFERENCE;break}case oe.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=le.DATA,this.emitCurrentTagToken();break}case oe.NULL:{this._err(We.unexpectedNullCharacter),this.currentAttr.value+=Rs;break}case oe.QUOTATION_MARK:case oe.APOSTROPHE:case oe.LESS_THAN_SIGN:case oe.EQUALS_SIGN:case oe.GRAVE_ACCENT:{this._err(We.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case oe.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this._leaveAttrValue(),this.state=le.BEFORE_ATTRIBUTE_NAME;break}case oe.SOLIDUS:{this._leaveAttrValue(),this.state=le.SELF_CLOSING_START_TAG;break}case oe.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=le.DATA,this.emitCurrentTagToken();break}case oe.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this._err(We.missingWhitespaceBetweenAttributes),this.state=le.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case oe.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=le.DATA,this.emitCurrentTagToken();break}case oe.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this._err(We.unexpectedSolidusInTag),this.state=le.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case oe.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentComment(n);break}case oe.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.data+=Rs;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(ic.DASH_DASH,!0)?(this._createCommentToken(ic.DASH_DASH.length+1),this.state=le.COMMENT_START):this._consumeSequenceIfMatch(ic.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(ic.DOCTYPE.length+1),this.state=le.DOCTYPE):this._consumeSequenceIfMatch(ic.CDATA_START,!0)?this.inForeignNode?this.state=le.CDATA_SECTION:(this._err(We.cdataInHtmlContent),this._createCommentToken(ic.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=le.BOGUS_COMMENT):this._ensureHibernation()||(this._err(We.incorrectlyOpenedComment),this._createCommentToken(2),this.state=le.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case oe.HYPHEN_MINUS:{this.state=le.COMMENT_START_DASH;break}case oe.GREATER_THAN_SIGN:{this._err(We.abruptClosingOfEmptyComment),this.state=le.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=le.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case oe.HYPHEN_MINUS:{this.state=le.COMMENT_END;break}case oe.GREATER_THAN_SIGN:{this._err(We.abruptClosingOfEmptyComment),this.state=le.DATA,this.emitCurrentComment(n);break}case oe.EOF:{this._err(We.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=le.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case oe.HYPHEN_MINUS:{this.state=le.COMMENT_END_DASH;break}case oe.LESS_THAN_SIGN:{n.data+="<",this.state=le.COMMENT_LESS_THAN_SIGN;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.data+=Rs;break}case oe.EOF:{this._err(We.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case oe.EXCLAMATION_MARK:{n.data+="!",this.state=le.COMMENT_LESS_THAN_SIGN_BANG;break}case oe.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=le.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===oe.HYPHEN_MINUS?this.state=le.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=le.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===oe.HYPHEN_MINUS?this.state=le.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=le.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==oe.GREATER_THAN_SIGN&&t!==oe.EOF&&this._err(We.nestedComment),this.state=le.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case oe.HYPHEN_MINUS:{this.state=le.COMMENT_END;break}case oe.EOF:{this._err(We.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=le.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case oe.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentComment(n);break}case oe.EXCLAMATION_MARK:{this.state=le.COMMENT_END_BANG;break}case oe.HYPHEN_MINUS:{n.data+="-";break}case oe.EOF:{this._err(We.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=le.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case oe.HYPHEN_MINUS:{n.data+="--!",this.state=le.COMMENT_END_DASH;break}case oe.GREATER_THAN_SIGN:{this._err(We.incorrectlyClosedComment),this.state=le.DATA,this.emitCurrentComment(n);break}case oe.EOF:{this._err(We.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=le.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=le.BEFORE_DOCTYPE_NAME;break}case oe.GREATER_THAN_SIGN:{this.state=le.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case oe.EOF:{this._err(We.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingWhitespaceBeforeDoctypeName),this.state=le.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(hI(t))this._createDoctypeToken(String.fromCharCode(l4(t))),this.state=le.DOCTYPE_NAME;else switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.NULL:{this._err(We.unexpectedNullCharacter),this._createDoctypeToken(Rs),this.state=le.DOCTYPE_NAME;break}case oe.GREATER_THAN_SIGN:{this._err(We.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.EOF:{this._err(We.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=le.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=le.AFTER_DOCTYPE_NAME;break}case oe.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentDoctype(n);break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.name+=Rs;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(hI(t)?l4(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentDoctype(n);break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(ic.PUBLIC,!1)?this.state=le.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(ic.SYSTEM,!1)?this.state=le.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(We.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=le.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case oe.QUOTATION_MARK:{this._err(We.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{this._err(We.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case oe.GREATER_THAN_SIGN:{this._err(We.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.QUOTATION_MARK:{n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case oe.GREATER_THAN_SIGN:{this._err(We.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case oe.QUOTATION_MARK:{this.state=le.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.publicId+=Rs;break}case oe.GREATER_THAN_SIGN:{this._err(We.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case oe.APOSTROPHE:{this.state=le.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.publicId+=Rs;break}case oe.GREATER_THAN_SIGN:{this._err(We.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=le.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case oe.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentDoctype(n);break}case oe.QUOTATION_MARK:{this._err(We.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{this._err(We.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.QUOTATION_MARK:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:{this.state=le.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case oe.QUOTATION_MARK:{this._err(We.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{this._err(We.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case oe.GREATER_THAN_SIGN:{this._err(We.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.QUOTATION_MARK:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case oe.APOSTROPHE:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case oe.GREATER_THAN_SIGN:{this._err(We.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case oe.QUOTATION_MARK:{this.state=le.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.systemId+=Rs;break}case oe.GREATER_THAN_SIGN:{this._err(We.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case oe.APOSTROPHE:{this.state=le.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case oe.NULL:{this._err(We.unexpectedNullCharacter),n.systemId+=Rs;break}case oe.GREATER_THAN_SIGN:{this._err(We.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case oe.SPACE:case oe.LINE_FEED:case oe.TABULATION:case oe.FORM_FEED:break;case oe.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case oe.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=le.DATA;break}case oe.NULL:{this._err(We.unexpectedNullCharacter);break}case oe.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case oe.RIGHT_SQUARE_BRACKET:{this.state=le.CDATA_SECTION_BRACKET;break}case oe.EOF:{this._err(We.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===oe.RIGHT_SQUARE_BRACKET?this.state=le.CDATA_SECTION_END:(this._emitChars("]"),this.state=le.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case oe.GREATER_THAN_SIGN:{this.state=le.DATA;break}case oe.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=le.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===oe.NUMBER_SIGN?this.state=le.NUMERIC_CHARACTER_REFERENCE:FG(t)?(this.state=le.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(oe.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(oe.AMPERSAND),this.state=le.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){FG(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===oe.SEMICOLON&&this._err(We.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===oe.LATIN_SMALL_X||t===oe.LATIN_CAPITAL_X?this.state=le.HEXADEMICAL_CHARACTER_REFERENCE_START:pk(t)?(this.state=le.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(We.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(oe.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(oe.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){V1t(t)?(this.state=le.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(We.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(oe.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(oe.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){SRe(t)?this.charRefCode=this.charRefCode*16+t-55:CRe(t)?this.charRefCode=this.charRefCode*16+t-87:pk(t)?this.charRefCode=this.charRefCode*16+t-48:t===oe.SEMICOLON?this.state=le.NUMERIC_CHARACTER_REFERENCE_END:(this._err(We.missingSemicolonAfterCharacterReference),this.state=le.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){pk(t)?this.charRefCode=this.charRefCode*10+t-48:t===oe.SEMICOLON?this.state=le.NUMERIC_CHARACTER_REFERENCE_END:(this._err(We.missingSemicolonAfterCharacterReference),this.state=le.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===oe.NULL)this._err(We.nullCharacterReference),this.charRefCode=oe.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(We.characterReferenceOutsideUnicodeRange),this.charRefCode=oe.REPLACEMENT_CHARACTER;else if(yRe(this.charRefCode))this._err(We.surrogateCharacterReference),this.charRefCode=oe.REPLACEMENT_CHARACTER;else if(bRe(this.charRefCode))this._err(We.noncharacterCharacterReference);else if(vRe(this.charRefCode)||this.charRefCode===oe.CARRIAGE_RETURN){this._err(We.controlCharacterReference);const n=U1t.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const ARe=new Set([M.DD,M.DT,M.LI,M.OPTGROUP,M.OPTION,M.P,M.RB,M.RP,M.RT,M.RTC]),A0e=new Set([...ARe,M.CAPTION,M.COLGROUP,M.TBODY,M.TD,M.TFOOT,M.TH,M.THEAD,M.TR]),c4=new Map([[M.APPLET,ot.HTML],[M.CAPTION,ot.HTML],[M.HTML,ot.HTML],[M.MARQUEE,ot.HTML],[M.OBJECT,ot.HTML],[M.TABLE,ot.HTML],[M.TD,ot.HTML],[M.TEMPLATE,ot.HTML],[M.TH,ot.HTML],[M.ANNOTATION_XML,ot.MATHML],[M.MI,ot.MATHML],[M.MN,ot.MATHML],[M.MO,ot.MATHML],[M.MS,ot.MATHML],[M.MTEXT,ot.MATHML],[M.DESC,ot.SVG],[M.FOREIGN_OBJECT,ot.SVG],[M.TITLE,ot.SVG]]),W1t=[M.H1,M.H2,M.H3,M.H4,M.H5,M.H6],G1t=[M.TR,M.TEMPLATE,M.HTML],Y1t=[M.TBODY,M.TFOOT,M.THEAD,M.TEMPLATE,M.HTML],K1t=[M.TABLE,M.TEMPLATE,M.HTML],X1t=[M.TD,M.TH];class Q1t{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=M.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===M.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===ot.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==ot.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(W1t,ot.HTML)}popUntilTableCellPopped(){this.popUntilPopped(X1t,ot.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(K1t,ot.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Y1t,ot.HTML)}clearBackToTableRowContext(){this.clearBackTo(G1t,ot.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===M.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===M.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ot.HTML)return!0;if(c4.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(ERe(n)&&r===ot.HTML)return!0;if(c4.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ot.HTML)return!0;if((r===M.UL||r===M.OL)&&i===ot.HTML||c4.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ot.HTML)return!0;if(r===M.BUTTON&&i===ot.HTML||c4.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===ot.HTML){if(r===t)return!0;if(r===M.TABLE||r===M.TEMPLATE||r===M.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===ot.HTML){if(n===M.TBODY||n===M.THEAD||n===M.TFOOT)return!0;if(n===M.TABLE||n===M.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===ot.HTML){if(r===t)return!0;if(r!==M.OPTION&&r!==M.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;ARe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;A0e.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&A0e.has(this.currentTagId);)this.pop()}}const Mz=3;var Fh;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Fh=Fh||(Fh={}));const D0e={type:Fh.Marker};class J1t{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===Fh.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<Mz)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<Mz)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=Mz&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(D0e)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Fh.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Fh.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(D0e);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Fh.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Fh.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Fh.Element&&n.element===t)}}function I0e(e){return{nodeName:"#text",value:e,parentNode:null}}const w2={createDocument(){return{nodeName:"#document",mode:pf.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};w2.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(w2.isTextNode(n)){n.value+=t;return}}w2.appendChild(e,I0e(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&w2.isTextNode(r)?r.value+=t:w2.insertBefore(e,I0e(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},DRe="html",Z1t="about:legacy-compat",evt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",IRe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],tvt=[...IRe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],nvt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),kRe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],rvt=[...kRe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function k0e(e,t){return t.some(n=>e.startsWith(n))}function ivt(e){return e.name===DRe&&e.publicId===null&&(e.systemId===null||e.systemId===Z1t)}function svt(e){if(e.name!==DRe)return pf.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===evt)return pf.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),nvt.has(n))return pf.QUIRKS;let r=t===null?tvt:IRe;if(k0e(n,r))return pf.QUIRKS;if(r=t===null?kRe:rvt,k0e(n,r))return pf.LIMITED_QUIRKS}return pf.NO_QUIRKS}const R0e={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},ovt="definitionurl",avt="definitionURL",uvt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),lvt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:ot.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:ot.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:ot.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:ot.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:ot.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:ot.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:ot.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:ot.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:ot.XML}],["xml:space",{prefix:"xml",name:"space",namespace:ot.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:ot.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:ot.XMLNS}]]),cvt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),fvt=new Set([M.B,M.BIG,M.BLOCKQUOTE,M.BODY,M.BR,M.CENTER,M.CODE,M.DD,M.DIV,M.DL,M.DT,M.EM,M.EMBED,M.H1,M.H2,M.H3,M.H4,M.H5,M.H6,M.HEAD,M.HR,M.I,M.IMG,M.LI,M.LISTING,M.MENU,M.META,M.NOBR,M.OL,M.P,M.PRE,M.RUBY,M.S,M.SMALL,M.SPAN,M.STRONG,M.STRIKE,M.SUB,M.SUP,M.TABLE,M.TT,M.U,M.UL,M.VAR]);function dvt(e){const t=e.tagID;return t===M.FONT&&e.attrs.some(({name:r})=>r===lv.COLOR||r===lv.SIZE||r===lv.FACE)||fvt.has(t)}function RRe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===ovt){e.attrs[t].name=avt;break}}function NRe(e){for(let t=0;t<e.attrs.length;t++){const n=uvt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function hte(e){for(let t=0;t<e.attrs.length;t++){const n=lvt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function hvt(e){const t=cvt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=zT(e.tagName))}function pvt(e,t){return t===ot.MATHML&&(e===M.MI||e===M.MO||e===M.MN||e===M.MS||e===M.MTEXT)}function mvt(e,t,n){if(t===ot.MATHML&&e===M.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===lv.ENCODING){const i=n[r].value.toLowerCase();return i===R0e.TEXT_HTML||i===R0e.APPLICATION_XML}}return t===ot.SVG&&(e===M.FOREIGN_OBJECT||e===M.DESC||e===M.TITLE)}function gvt(e,t,n,r){return(!r||r===ot.HTML)&&mvt(e,t,n)||(!r||r===ot.MATHML)&&pvt(e,t)}const yvt="hidden",vvt=8,bvt=3;var ye;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ye||(ye={}));const xvt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},PRe=new Set([M.TABLE,M.TBODY,M.TFOOT,M.THEAD,M.TR]),N0e={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:w2,onParseError:null};let P0e=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ye.INITIAL,this.originalInsertionMode=ye.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...N0e,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new q1t(this.options,this),this.activeFormattingElements=new J1t(this.treeAdapter),this.fragmentContextID=r?zT(this.treeAdapter.getTagName(r)):M.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Q1t(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...N0e,...n};t??(t=r.treeAdapter.createElement(Le.TEMPLATE,ot.HTML,[]));const i=r.treeAdapter.createElement("documentmock",ot.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===M.TEMPLATE&&s.tmplInsertionModeStack.unshift(ye.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:xvt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===ot.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,ot.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ye.TEXT}switchToPlaintextParsing(){this.insertionMode=ye.TEXT,this.originalInsertionMode=ye.IN_BODY,this.tokenizer.state=Co.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Le.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==ot.HTML))switch(this.fragmentContextID){case M.TITLE:case M.TEXTAREA:{this.tokenizer.state=Co.RCDATA;break}case M.STYLE:case M.XMP:case M.IFRAME:case M.NOEMBED:case M.NOFRAMES:case M.NOSCRIPT:{this.tokenizer.state=Co.RAWTEXT;break}case M.SCRIPT:{this.tokenizer.state=Co.SCRIPT_DATA;break}case M.PLAINTEXT:{this.tokenizer.state=Co.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,ot.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,ot.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Le.HTML,ot.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,M.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===_r.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===M.SVG&&this.treeAdapter.getTagName(n)===Le.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===ot.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===M.MGLYPH||t.tagID===M.MALIGNMARK)&&!this._isIntegrationPoint(r,n,ot.HTML)}_processToken(t){switch(t.type){case _r.CHARACTER:{this.onCharacter(t);break}case _r.NULL_CHARACTER:{this.onNullCharacter(t);break}case _r.COMMENT:{this.onComment(t);break}case _r.DOCTYPE:{this.onDoctype(t);break}case _r.START_TAG:{this._processStartTag(t);break}case _r.END_TAG:{this.onEndTag(t);break}case _r.EOF:{this.onEof(t);break}case _r.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return gvt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Fh.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ye.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(M.P),this.openElements.popUntilTagNamePopped(M.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case M.TR:{this.insertionMode=ye.IN_ROW;return}case M.TBODY:case M.THEAD:case M.TFOOT:{this.insertionMode=ye.IN_TABLE_BODY;return}case M.CAPTION:{this.insertionMode=ye.IN_CAPTION;return}case M.COLGROUP:{this.insertionMode=ye.IN_COLUMN_GROUP;return}case M.TABLE:{this.insertionMode=ye.IN_TABLE;return}case M.BODY:{this.insertionMode=ye.IN_BODY;return}case M.FRAMESET:{this.insertionMode=ye.IN_FRAMESET;return}case M.SELECT:{this._resetInsertionModeForSelect(t);return}case M.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case M.HTML:{this.insertionMode=this.headElement?ye.AFTER_HEAD:ye.BEFORE_HEAD;return}case M.TD:case M.TH:{if(t>0){this.insertionMode=ye.IN_CELL;return}break}case M.HEAD:{if(t>0){this.insertionMode=ye.IN_HEAD;return}break}}this.insertionMode=ye.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===M.TEMPLATE)break;if(r===M.TABLE){this.insertionMode=ye.IN_SELECT_IN_TABLE;return}}this.insertionMode=ye.IN_SELECT}_isElementCausesFosterParenting(t){return PRe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case M.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===ot.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case M.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return j1t[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Xbt(this,t);return}switch(this.insertionMode){case ye.INITIAL:{xD(this,t);break}case ye.BEFORE_HTML:{mk(this,t);break}case ye.BEFORE_HEAD:{gk(this,t);break}case ye.IN_HEAD:{yk(this,t);break}case ye.IN_HEAD_NO_SCRIPT:{vk(this,t);break}case ye.AFTER_HEAD:{bk(this,t);break}case ye.IN_BODY:case ye.IN_CAPTION:case ye.IN_CELL:case ye.IN_TEMPLATE:{FRe(this,t);break}case ye.TEXT:case ye.IN_SELECT:case ye.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ye.IN_TABLE:case ye.IN_TABLE_BODY:case ye.IN_ROW:{$z(this,t);break}case ye.IN_TABLE_TEXT:{URe(this,t);break}case ye.IN_COLUMN_GROUP:{HM(this,t);break}case ye.AFTER_BODY:{qM(this,t);break}case ye.AFTER_AFTER_BODY:{nF(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Kbt(this,t);return}switch(this.insertionMode){case ye.INITIAL:{xD(this,t);break}case ye.BEFORE_HTML:{mk(this,t);break}case ye.BEFORE_HEAD:{gk(this,t);break}case ye.IN_HEAD:{yk(this,t);break}case ye.IN_HEAD_NO_SCRIPT:{vk(this,t);break}case ye.AFTER_HEAD:{bk(this,t);break}case ye.TEXT:{this._insertCharacters(t);break}case ye.IN_TABLE:case ye.IN_TABLE_BODY:case ye.IN_ROW:{$z(this,t);break}case ye.IN_COLUMN_GROUP:{HM(this,t);break}case ye.AFTER_BODY:{qM(this,t);break}case ye.AFTER_AFTER_BODY:{nF(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){MG(this,t);return}switch(this.insertionMode){case ye.INITIAL:case ye.BEFORE_HTML:case ye.BEFORE_HEAD:case ye.IN_HEAD:case ye.IN_HEAD_NO_SCRIPT:case ye.AFTER_HEAD:case ye.IN_BODY:case ye.IN_TABLE:case ye.IN_CAPTION:case ye.IN_COLUMN_GROUP:case ye.IN_TABLE_BODY:case ye.IN_ROW:case ye.IN_CELL:case ye.IN_SELECT:case ye.IN_SELECT_IN_TABLE:case ye.IN_TEMPLATE:case ye.IN_FRAMESET:case ye.AFTER_FRAMESET:{MG(this,t);break}case ye.IN_TABLE_TEXT:{wD(this,t);break}case ye.AFTER_BODY:{Avt(this,t);break}case ye.AFTER_AFTER_BODY:case ye.AFTER_AFTER_FRAMESET:{Dvt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ye.INITIAL:{Ivt(this,t);break}case ye.BEFORE_HEAD:case ye.IN_HEAD:case ye.IN_HEAD_NO_SCRIPT:case ye.AFTER_HEAD:{this._err(t,We.misplacedDoctype);break}case ye.IN_TABLE_TEXT:{wD(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,We.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?Qbt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ye.INITIAL:{xD(this,t);break}case ye.BEFORE_HTML:{kvt(this,t);break}case ye.BEFORE_HEAD:{Nvt(this,t);break}case ye.IN_HEAD:{Sp(this,t);break}case ye.IN_HEAD_NO_SCRIPT:{Fvt(this,t);break}case ye.AFTER_HEAD:{$vt(this,t);break}case ye.IN_BODY:{ul(this,t);break}case ye.IN_TABLE:{cC(this,t);break}case ye.IN_TABLE_TEXT:{wD(this,t);break}case ye.IN_CAPTION:{Pbt(this,t);break}case ye.IN_COLUMN_GROUP:{gte(this,t);break}case ye.IN_TABLE_BODY:{sB(this,t);break}case ye.IN_ROW:{oB(this,t);break}case ye.IN_CELL:{Mbt(this,t);break}case ye.IN_SELECT:{HRe(this,t);break}case ye.IN_SELECT_IN_TABLE:{Lbt(this,t);break}case ye.IN_TEMPLATE:{jbt(this,t);break}case ye.AFTER_BODY:{zbt(this,t);break}case ye.IN_FRAMESET:{Vbt(this,t);break}case ye.AFTER_FRAMESET:{qbt(this,t);break}case ye.AFTER_AFTER_BODY:{Gbt(this,t);break}case ye.AFTER_AFTER_FRAMESET:{Ybt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?Jbt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ye.INITIAL:{xD(this,t);break}case ye.BEFORE_HTML:{Rvt(this,t);break}case ye.BEFORE_HEAD:{Pvt(this,t);break}case ye.IN_HEAD:{Ovt(this,t);break}case ye.IN_HEAD_NO_SCRIPT:{Mvt(this,t);break}case ye.AFTER_HEAD:{Lvt(this,t);break}case ye.IN_BODY:{iB(this,t);break}case ye.TEXT:{Ebt(this,t);break}case ye.IN_TABLE:{kR(this,t);break}case ye.IN_TABLE_TEXT:{wD(this,t);break}case ye.IN_CAPTION:{Obt(this,t);break}case ye.IN_COLUMN_GROUP:{Fbt(this,t);break}case ye.IN_TABLE_BODY:{$G(this,t);break}case ye.IN_ROW:{VRe(this,t);break}case ye.IN_CELL:{$bt(this,t);break}case ye.IN_SELECT:{qRe(this,t);break}case ye.IN_SELECT_IN_TABLE:{Bbt(this,t);break}case ye.IN_TEMPLATE:{Ubt(this,t);break}case ye.AFTER_BODY:{GRe(this,t);break}case ye.IN_FRAMESET:{Hbt(this,t);break}case ye.AFTER_FRAMESET:{Wbt(this,t);break}case ye.AFTER_AFTER_BODY:{nF(this,t);break}}}onEof(t){switch(this.insertionMode){case ye.INITIAL:{xD(this,t);break}case ye.BEFORE_HTML:{mk(this,t);break}case ye.BEFORE_HEAD:{gk(this,t);break}case ye.IN_HEAD:{yk(this,t);break}case ye.IN_HEAD_NO_SCRIPT:{vk(this,t);break}case ye.AFTER_HEAD:{bk(this,t);break}case ye.IN_BODY:case ye.IN_TABLE:case ye.IN_CAPTION:case ye.IN_COLUMN_GROUP:case ye.IN_TABLE_BODY:case ye.IN_ROW:case ye.IN_CELL:case ye.IN_SELECT:case ye.IN_SELECT_IN_TABLE:{BRe(this,t);break}case ye.TEXT:{Sbt(this,t);break}case ye.IN_TABLE_TEXT:{wD(this,t);break}case ye.IN_TEMPLATE:{WRe(this,t);break}case ye.AFTER_BODY:case ye.IN_FRAMESET:case ye.AFTER_FRAMESET:case ye.AFTER_AFTER_BODY:case ye.AFTER_AFTER_FRAMESET:{mte(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===oe.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ye.IN_HEAD:case ye.IN_HEAD_NO_SCRIPT:case ye.AFTER_HEAD:case ye.TEXT:case ye.IN_COLUMN_GROUP:case ye.IN_SELECT:case ye.IN_SELECT_IN_TABLE:case ye.IN_FRAMESET:case ye.AFTER_FRAMESET:{this._insertCharacters(t);break}case ye.IN_BODY:case ye.IN_CAPTION:case ye.IN_CELL:case ye.IN_TEMPLATE:case ye.AFTER_BODY:case ye.AFTER_AFTER_BODY:case ye.AFTER_AFTER_FRAMESET:{ORe(this,t);break}case ye.IN_TABLE:case ye.IN_TABLE_BODY:case ye.IN_ROW:{$z(this,t);break}case ye.IN_TABLE_TEXT:{jRe(this,t);break}}}};function wvt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):LRe(e,t),n}function _vt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function Evt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=bvt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=Svt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function Svt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function Cvt(e,t,n){const r=e.treeAdapter.getTagName(t),i=zT(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===M.TEMPLATE&&s===ot.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Tvt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function pte(e,t){for(let n=0;n<vvt;n++){const r=wvt(e,t);if(!r)break;const i=_vt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=Evt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&Cvt(e,o,s),Tvt(e,i,r)}}function MG(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Avt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Dvt(e,t){e._appendCommentNode(t,e.document)}function mte(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Ivt(e,t){e._setDocumentType(t);const n=t.forceQuirks?pf.QUIRKS:svt(t);ivt(t)||e._err(t,We.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ye.BEFORE_HTML}function xD(e,t){e._err(t,We.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,pf.QUIRKS),e.insertionMode=ye.BEFORE_HTML,e._processToken(t)}function kvt(e,t){t.tagID===M.HTML?(e._insertElement(t,ot.HTML),e.insertionMode=ye.BEFORE_HEAD):mk(e,t)}function Rvt(e,t){const n=t.tagID;(n===M.HTML||n===M.HEAD||n===M.BODY||n===M.BR)&&mk(e,t)}function mk(e,t){e._insertFakeRootElement(),e.insertionMode=ye.BEFORE_HEAD,e._processToken(t)}function Nvt(e,t){switch(t.tagID){case M.HTML:{ul(e,t);break}case M.HEAD:{e._insertElement(t,ot.HTML),e.headElement=e.openElements.current,e.insertionMode=ye.IN_HEAD;break}default:gk(e,t)}}function Pvt(e,t){const n=t.tagID;n===M.HEAD||n===M.BODY||n===M.HTML||n===M.BR?gk(e,t):e._err(t,We.endTagWithoutMatchingOpenElement)}function gk(e,t){e._insertFakeElement(Le.HEAD,M.HEAD),e.headElement=e.openElements.current,e.insertionMode=ye.IN_HEAD,e._processToken(t)}function Sp(e,t){switch(t.tagID){case M.HTML:{ul(e,t);break}case M.BASE:case M.BASEFONT:case M.BGSOUND:case M.LINK:case M.META:{e._appendElement(t,ot.HTML),t.ackSelfClosing=!0;break}case M.TITLE:{e._switchToTextParsing(t,Co.RCDATA);break}case M.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Co.RAWTEXT):(e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_HEAD_NO_SCRIPT);break}case M.NOFRAMES:case M.STYLE:{e._switchToTextParsing(t,Co.RAWTEXT);break}case M.SCRIPT:{e._switchToTextParsing(t,Co.SCRIPT_DATA);break}case M.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ye.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ye.IN_TEMPLATE);break}case M.HEAD:{e._err(t,We.misplacedStartTagForHeadElement);break}default:yk(e,t)}}function Ovt(e,t){switch(t.tagID){case M.HEAD:{e.openElements.pop(),e.insertionMode=ye.AFTER_HEAD;break}case M.BODY:case M.BR:case M.HTML:{yk(e,t);break}case M.TEMPLATE:{H_(e,t);break}default:e._err(t,We.endTagWithoutMatchingOpenElement)}}function H_(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==M.TEMPLATE&&e._err(t,We.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(M.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,We.endTagWithoutMatchingOpenElement)}function yk(e,t){e.openElements.pop(),e.insertionMode=ye.AFTER_HEAD,e._processToken(t)}function Fvt(e,t){switch(t.tagID){case M.HTML:{ul(e,t);break}case M.BASEFONT:case M.BGSOUND:case M.HEAD:case M.LINK:case M.META:case M.NOFRAMES:case M.STYLE:{Sp(e,t);break}case M.NOSCRIPT:{e._err(t,We.nestedNoscriptInHead);break}default:vk(e,t)}}function Mvt(e,t){switch(t.tagID){case M.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ye.IN_HEAD;break}case M.BR:{vk(e,t);break}default:e._err(t,We.endTagWithoutMatchingOpenElement)}}function vk(e,t){const n=t.type===_r.EOF?We.openElementsLeftAfterEof:We.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ye.IN_HEAD,e._processToken(t)}function $vt(e,t){switch(t.tagID){case M.HTML:{ul(e,t);break}case M.BODY:{e._insertElement(t,ot.HTML),e.framesetOk=!1,e.insertionMode=ye.IN_BODY;break}case M.FRAMESET:{e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_FRAMESET;break}case M.BASE:case M.BASEFONT:case M.BGSOUND:case M.LINK:case M.META:case M.NOFRAMES:case M.SCRIPT:case M.STYLE:case M.TEMPLATE:case M.TITLE:{e._err(t,We.abandonedHeadElementChild),e.openElements.push(e.headElement,M.HEAD),Sp(e,t),e.openElements.remove(e.headElement);break}case M.HEAD:{e._err(t,We.misplacedStartTagForHeadElement);break}default:bk(e,t)}}function Lvt(e,t){switch(t.tagID){case M.BODY:case M.HTML:case M.BR:{bk(e,t);break}case M.TEMPLATE:{H_(e,t);break}default:e._err(t,We.endTagWithoutMatchingOpenElement)}}function bk(e,t){e._insertFakeElement(Le.BODY,M.BODY),e.insertionMode=ye.IN_BODY,rB(e,t)}function rB(e,t){switch(t.type){case _r.CHARACTER:{FRe(e,t);break}case _r.WHITESPACE_CHARACTER:{ORe(e,t);break}case _r.COMMENT:{MG(e,t);break}case _r.START_TAG:{ul(e,t);break}case _r.END_TAG:{iB(e,t);break}case _r.EOF:{BRe(e,t);break}}}function ORe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function FRe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Bvt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function jvt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Uvt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_FRAMESET)}function zvt(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,ot.HTML)}function Vvt(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),ERe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,ot.HTML)}function Hvt(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,ot.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function qvt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,ot.HTML),n||(e.formElement=e.openElements.current))}function Wvt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===M.LI&&i===M.LI||(n===M.DD||n===M.DT)&&(i===M.DD||i===M.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==M.ADDRESS&&i!==M.DIV&&i!==M.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,ot.HTML)}function Gvt(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,ot.HTML),e.tokenizer.state=Co.PLAINTEXT}function Yvt(e,t){e.openElements.hasInScope(M.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(M.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.framesetOk=!1}function Kvt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Le.A);n&&(pte(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Xvt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Qvt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(M.NOBR)&&(pte(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,ot.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Jvt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Zvt(e,t){e.treeAdapter.getDocumentMode(e.document)!==pf.QUIRKS&&e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._insertElement(t,ot.HTML),e.framesetOk=!1,e.insertionMode=ye.IN_TABLE}function MRe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,ot.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function $Re(e){const t=xRe(e,lv.TYPE);return t!=null&&t.toLowerCase()===yvt}function ebt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,ot.HTML),$Re(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function tbt(e,t){e._appendElement(t,ot.HTML),t.ackSelfClosing=!0}function nbt(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._appendElement(t,ot.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function rbt(e,t){t.tagName=Le.IMG,t.tagID=M.IMG,MRe(e,t)}function ibt(e,t){e._insertElement(t,ot.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Co.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ye.TEXT}function sbt(e,t){e.openElements.hasInButtonScope(M.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Co.RAWTEXT)}function obt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Co.RAWTEXT)}function O0e(e,t){e._switchToTextParsing(t,Co.RAWTEXT)}function abt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ye.IN_TABLE||e.insertionMode===ye.IN_CAPTION||e.insertionMode===ye.IN_TABLE_BODY||e.insertionMode===ye.IN_ROW||e.insertionMode===ye.IN_CELL?ye.IN_SELECT_IN_TABLE:ye.IN_SELECT}function ubt(e,t){e.openElements.currentTagId===M.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML)}function lbt(e,t){e.openElements.hasInScope(M.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,ot.HTML)}function cbt(e,t){e.openElements.hasInScope(M.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(M.RTC),e._insertElement(t,ot.HTML)}function fbt(e,t){e._reconstructActiveFormattingElements(),RRe(t),hte(t),t.selfClosing?e._appendElement(t,ot.MATHML):e._insertElement(t,ot.MATHML),t.ackSelfClosing=!0}function dbt(e,t){e._reconstructActiveFormattingElements(),NRe(t),hte(t),t.selfClosing?e._appendElement(t,ot.SVG):e._insertElement(t,ot.SVG),t.ackSelfClosing=!0}function F0e(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML)}function ul(e,t){switch(t.tagID){case M.I:case M.S:case M.B:case M.U:case M.EM:case M.TT:case M.BIG:case M.CODE:case M.FONT:case M.SMALL:case M.STRIKE:case M.STRONG:{Xvt(e,t);break}case M.A:{Kvt(e,t);break}case M.H1:case M.H2:case M.H3:case M.H4:case M.H5:case M.H6:{Vvt(e,t);break}case M.P:case M.DL:case M.OL:case M.UL:case M.DIV:case M.DIR:case M.NAV:case M.MAIN:case M.MENU:case M.ASIDE:case M.CENTER:case M.FIGURE:case M.FOOTER:case M.HEADER:case M.HGROUP:case M.DIALOG:case M.DETAILS:case M.ADDRESS:case M.ARTICLE:case M.SECTION:case M.SUMMARY:case M.FIELDSET:case M.BLOCKQUOTE:case M.FIGCAPTION:{zvt(e,t);break}case M.LI:case M.DD:case M.DT:{Wvt(e,t);break}case M.BR:case M.IMG:case M.WBR:case M.AREA:case M.EMBED:case M.KEYGEN:{MRe(e,t);break}case M.HR:{nbt(e,t);break}case M.RB:case M.RTC:{lbt(e,t);break}case M.RT:case M.RP:{cbt(e,t);break}case M.PRE:case M.LISTING:{Hvt(e,t);break}case M.XMP:{sbt(e,t);break}case M.SVG:{dbt(e,t);break}case M.HTML:{Bvt(e,t);break}case M.BASE:case M.LINK:case M.META:case M.STYLE:case M.TITLE:case M.SCRIPT:case M.BGSOUND:case M.BASEFONT:case M.TEMPLATE:{Sp(e,t);break}case M.BODY:{jvt(e,t);break}case M.FORM:{qvt(e,t);break}case M.NOBR:{Qvt(e,t);break}case M.MATH:{fbt(e,t);break}case M.TABLE:{Zvt(e,t);break}case M.INPUT:{ebt(e,t);break}case M.PARAM:case M.TRACK:case M.SOURCE:{tbt(e,t);break}case M.IMAGE:{rbt(e,t);break}case M.BUTTON:{Yvt(e,t);break}case M.APPLET:case M.OBJECT:case M.MARQUEE:{Jvt(e,t);break}case M.IFRAME:{obt(e,t);break}case M.SELECT:{abt(e,t);break}case M.OPTION:case M.OPTGROUP:{ubt(e,t);break}case M.NOEMBED:{O0e(e,t);break}case M.FRAMESET:{Uvt(e,t);break}case M.TEXTAREA:{ibt(e,t);break}case M.NOSCRIPT:{e.options.scriptingEnabled?O0e(e,t):F0e(e,t);break}case M.PLAINTEXT:{Gvt(e,t);break}case M.COL:case M.TH:case M.TD:case M.TR:case M.HEAD:case M.FRAME:case M.TBODY:case M.TFOOT:case M.THEAD:case M.CAPTION:case M.COLGROUP:break;default:F0e(e,t)}}function hbt(e,t){if(e.openElements.hasInScope(M.BODY)&&(e.insertionMode=ye.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function pbt(e,t){e.openElements.hasInScope(M.BODY)&&(e.insertionMode=ye.AFTER_BODY,GRe(e,t))}function mbt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function gbt(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(M.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(M.FORM):n&&e.openElements.remove(n))}function ybt(e){e.openElements.hasInButtonScope(M.P)||e._insertFakeElement(Le.P,M.P),e._closePElement()}function vbt(e){e.openElements.hasInListItemScope(M.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(M.LI),e.openElements.popUntilTagNamePopped(M.LI))}function bbt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function xbt(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function wbt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function _bt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Le.BR,M.BR),e.openElements.pop(),e.framesetOk=!1}function LRe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==M.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function iB(e,t){switch(t.tagID){case M.A:case M.B:case M.I:case M.S:case M.U:case M.EM:case M.TT:case M.BIG:case M.CODE:case M.FONT:case M.NOBR:case M.SMALL:case M.STRIKE:case M.STRONG:{pte(e,t);break}case M.P:{ybt(e);break}case M.DL:case M.UL:case M.OL:case M.DIR:case M.DIV:case M.NAV:case M.PRE:case M.MAIN:case M.MENU:case M.ASIDE:case M.BUTTON:case M.CENTER:case M.FIGURE:case M.FOOTER:case M.HEADER:case M.HGROUP:case M.DIALOG:case M.ADDRESS:case M.ARTICLE:case M.DETAILS:case M.SECTION:case M.SUMMARY:case M.LISTING:case M.FIELDSET:case M.BLOCKQUOTE:case M.FIGCAPTION:{mbt(e,t);break}case M.LI:{vbt(e);break}case M.DD:case M.DT:{bbt(e,t);break}case M.H1:case M.H2:case M.H3:case M.H4:case M.H5:case M.H6:{xbt(e);break}case M.BR:{_bt(e);break}case M.BODY:{hbt(e,t);break}case M.HTML:{pbt(e,t);break}case M.FORM:{gbt(e);break}case M.APPLET:case M.OBJECT:case M.MARQUEE:{wbt(e,t);break}case M.TEMPLATE:{H_(e,t);break}default:LRe(e,t)}}function BRe(e,t){e.tmplInsertionModeStack.length>0?WRe(e,t):mte(e,t)}function Ebt(e,t){var n;t.tagID===M.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Sbt(e,t){e._err(t,We.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function $z(e,t){if(PRe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ye.IN_TABLE_TEXT,t.type){case _r.CHARACTER:{URe(e,t);break}case _r.WHITESPACE_CHARACTER:{jRe(e,t);break}}else vN(e,t)}function Cbt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_CAPTION}function Tbt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_COLUMN_GROUP}function Abt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Le.COLGROUP,M.COLGROUP),e.insertionMode=ye.IN_COLUMN_GROUP,gte(e,t)}function Dbt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_TABLE_BODY}function Ibt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Le.TBODY,M.TBODY),e.insertionMode=ye.IN_TABLE_BODY,sB(e,t)}function kbt(e,t){e.openElements.hasInTableScope(M.TABLE)&&(e.openElements.popUntilTagNamePopped(M.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Rbt(e,t){$Re(t)?e._appendElement(t,ot.HTML):vN(e,t),t.ackSelfClosing=!0}function Nbt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,ot.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function cC(e,t){switch(t.tagID){case M.TD:case M.TH:case M.TR:{Ibt(e,t);break}case M.STYLE:case M.SCRIPT:case M.TEMPLATE:{Sp(e,t);break}case M.COL:{Abt(e,t);break}case M.FORM:{Nbt(e,t);break}case M.TABLE:{kbt(e,t);break}case M.TBODY:case M.TFOOT:case M.THEAD:{Dbt(e,t);break}case M.INPUT:{Rbt(e,t);break}case M.CAPTION:{Cbt(e,t);break}case M.COLGROUP:{Tbt(e,t);break}default:vN(e,t)}}function kR(e,t){switch(t.tagID){case M.TABLE:{e.openElements.hasInTableScope(M.TABLE)&&(e.openElements.popUntilTagNamePopped(M.TABLE),e._resetInsertionMode());break}case M.TEMPLATE:{H_(e,t);break}case M.BODY:case M.CAPTION:case M.COL:case M.COLGROUP:case M.HTML:case M.TBODY:case M.TD:case M.TFOOT:case M.TH:case M.THEAD:case M.TR:break;default:vN(e,t)}}function vN(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,rB(e,t),e.fosterParentingEnabled=n}function jRe(e,t){e.pendingCharacterTokens.push(t)}function URe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function wD(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)vN(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const zRe=new Set([M.CAPTION,M.COL,M.COLGROUP,M.TBODY,M.TD,M.TFOOT,M.TH,M.THEAD,M.TR]);function Pbt(e,t){const n=t.tagID;zRe.has(n)?e.openElements.hasInTableScope(M.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(M.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ye.IN_TABLE,cC(e,t)):ul(e,t)}function Obt(e,t){const n=t.tagID;switch(n){case M.CAPTION:case M.TABLE:{e.openElements.hasInTableScope(M.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(M.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ye.IN_TABLE,n===M.TABLE&&kR(e,t));break}case M.BODY:case M.COL:case M.COLGROUP:case M.HTML:case M.TBODY:case M.TD:case M.TFOOT:case M.TH:case M.THEAD:case M.TR:break;default:iB(e,t)}}function gte(e,t){switch(t.tagID){case M.HTML:{ul(e,t);break}case M.COL:{e._appendElement(t,ot.HTML),t.ackSelfClosing=!0;break}case M.TEMPLATE:{Sp(e,t);break}default:HM(e,t)}}function Fbt(e,t){switch(t.tagID){case M.COLGROUP:{e.openElements.currentTagId===M.COLGROUP&&(e.openElements.pop(),e.insertionMode=ye.IN_TABLE);break}case M.TEMPLATE:{H_(e,t);break}case M.COL:break;default:HM(e,t)}}function HM(e,t){e.openElements.currentTagId===M.COLGROUP&&(e.openElements.pop(),e.insertionMode=ye.IN_TABLE,e._processToken(t))}function sB(e,t){switch(t.tagID){case M.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_ROW;break}case M.TH:case M.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Le.TR,M.TR),e.insertionMode=ye.IN_ROW,oB(e,t);break}case M.CAPTION:case M.COL:case M.COLGROUP:case M.TBODY:case M.TFOOT:case M.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ye.IN_TABLE,cC(e,t));break}default:cC(e,t)}}function $G(e,t){const n=t.tagID;switch(t.tagID){case M.TBODY:case M.TFOOT:case M.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ye.IN_TABLE);break}case M.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ye.IN_TABLE,kR(e,t));break}case M.BODY:case M.CAPTION:case M.COL:case M.COLGROUP:case M.HTML:case M.TD:case M.TH:case M.TR:break;default:kR(e,t)}}function oB(e,t){switch(t.tagID){case M.TH:case M.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,ot.HTML),e.insertionMode=ye.IN_CELL,e.activeFormattingElements.insertMarker();break}case M.CAPTION:case M.COL:case M.COLGROUP:case M.TBODY:case M.TFOOT:case M.THEAD:case M.TR:{e.openElements.hasInTableScope(M.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ye.IN_TABLE_BODY,sB(e,t));break}default:cC(e,t)}}function VRe(e,t){switch(t.tagID){case M.TR:{e.openElements.hasInTableScope(M.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ye.IN_TABLE_BODY);break}case M.TABLE:{e.openElements.hasInTableScope(M.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ye.IN_TABLE_BODY,$G(e,t));break}case M.TBODY:case M.TFOOT:case M.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(M.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ye.IN_TABLE_BODY,$G(e,t));break}case M.BODY:case M.CAPTION:case M.COL:case M.COLGROUP:case M.HTML:case M.TD:case M.TH:break;default:kR(e,t)}}function Mbt(e,t){const n=t.tagID;zRe.has(n)?(e.openElements.hasInTableScope(M.TD)||e.openElements.hasInTableScope(M.TH))&&(e._closeTableCell(),oB(e,t)):ul(e,t)}function $bt(e,t){const n=t.tagID;switch(n){case M.TD:case M.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ye.IN_ROW);break}case M.TABLE:case M.TBODY:case M.TFOOT:case M.THEAD:case M.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),VRe(e,t));break}case M.BODY:case M.CAPTION:case M.COL:case M.COLGROUP:case M.HTML:break;default:iB(e,t)}}function HRe(e,t){switch(t.tagID){case M.HTML:{ul(e,t);break}case M.OPTION:{e.openElements.currentTagId===M.OPTION&&e.openElements.pop(),e._insertElement(t,ot.HTML);break}case M.OPTGROUP:{e.openElements.currentTagId===M.OPTION&&e.openElements.pop(),e.openElements.currentTagId===M.OPTGROUP&&e.openElements.pop(),e._insertElement(t,ot.HTML);break}case M.INPUT:case M.KEYGEN:case M.TEXTAREA:case M.SELECT:{e.openElements.hasInSelectScope(M.SELECT)&&(e.openElements.popUntilTagNamePopped(M.SELECT),e._resetInsertionMode(),t.tagID!==M.SELECT&&e._processStartTag(t));break}case M.SCRIPT:case M.TEMPLATE:{Sp(e,t);break}}}function qRe(e,t){switch(t.tagID){case M.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===M.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===M.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===M.OPTGROUP&&e.openElements.pop();break}case M.OPTION:{e.openElements.currentTagId===M.OPTION&&e.openElements.pop();break}case M.SELECT:{e.openElements.hasInSelectScope(M.SELECT)&&(e.openElements.popUntilTagNamePopped(M.SELECT),e._resetInsertionMode());break}case M.TEMPLATE:{H_(e,t);break}}}function Lbt(e,t){const n=t.tagID;n===M.CAPTION||n===M.TABLE||n===M.TBODY||n===M.TFOOT||n===M.THEAD||n===M.TR||n===M.TD||n===M.TH?(e.openElements.popUntilTagNamePopped(M.SELECT),e._resetInsertionMode(),e._processStartTag(t)):HRe(e,t)}function Bbt(e,t){const n=t.tagID;n===M.CAPTION||n===M.TABLE||n===M.TBODY||n===M.TFOOT||n===M.THEAD||n===M.TR||n===M.TD||n===M.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(M.SELECT),e._resetInsertionMode(),e.onEndTag(t)):qRe(e,t)}function jbt(e,t){switch(t.tagID){case M.BASE:case M.BASEFONT:case M.BGSOUND:case M.LINK:case M.META:case M.NOFRAMES:case M.SCRIPT:case M.STYLE:case M.TEMPLATE:case M.TITLE:{Sp(e,t);break}case M.CAPTION:case M.COLGROUP:case M.TBODY:case M.TFOOT:case M.THEAD:{e.tmplInsertionModeStack[0]=ye.IN_TABLE,e.insertionMode=ye.IN_TABLE,cC(e,t);break}case M.COL:{e.tmplInsertionModeStack[0]=ye.IN_COLUMN_GROUP,e.insertionMode=ye.IN_COLUMN_GROUP,gte(e,t);break}case M.TR:{e.tmplInsertionModeStack[0]=ye.IN_TABLE_BODY,e.insertionMode=ye.IN_TABLE_BODY,sB(e,t);break}case M.TD:case M.TH:{e.tmplInsertionModeStack[0]=ye.IN_ROW,e.insertionMode=ye.IN_ROW,oB(e,t);break}default:e.tmplInsertionModeStack[0]=ye.IN_BODY,e.insertionMode=ye.IN_BODY,ul(e,t)}}function Ubt(e,t){t.tagID===M.TEMPLATE&&H_(e,t)}function WRe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(M.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):mte(e,t)}function zbt(e,t){t.tagID===M.HTML?ul(e,t):qM(e,t)}function GRe(e,t){var n;if(t.tagID===M.HTML){if(e.fragmentContext||(e.insertionMode=ye.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===M.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else qM(e,t)}function qM(e,t){e.insertionMode=ye.IN_BODY,rB(e,t)}function Vbt(e,t){switch(t.tagID){case M.HTML:{ul(e,t);break}case M.FRAMESET:{e._insertElement(t,ot.HTML);break}case M.FRAME:{e._appendElement(t,ot.HTML),t.ackSelfClosing=!0;break}case M.NOFRAMES:{Sp(e,t);break}}}function Hbt(e,t){t.tagID===M.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==M.FRAMESET&&(e.insertionMode=ye.AFTER_FRAMESET))}function qbt(e,t){switch(t.tagID){case M.HTML:{ul(e,t);break}case M.NOFRAMES:{Sp(e,t);break}}}function Wbt(e,t){t.tagID===M.HTML&&(e.insertionMode=ye.AFTER_AFTER_FRAMESET)}function Gbt(e,t){t.tagID===M.HTML?ul(e,t):nF(e,t)}function nF(e,t){e.insertionMode=ye.IN_BODY,rB(e,t)}function Ybt(e,t){switch(t.tagID){case M.HTML:{ul(e,t);break}case M.NOFRAMES:{Sp(e,t);break}}}function Kbt(e,t){t.chars=Rs,e._insertCharacters(t)}function Xbt(e,t){e._insertCharacters(t),e.framesetOk=!1}function YRe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==ot.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Qbt(e,t){if(dvt(t))YRe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===ot.MATHML?RRe(t):r===ot.SVG&&(hvt(t),NRe(t)),hte(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function Jbt(e,t){if(t.tagID===M.P||t.tagID===M.BR){YRe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===ot.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Le.AREA,Le.BASE,Le.BASEFONT,Le.BGSOUND,Le.BR,Le.COL,Le.EMBED,Le.FRAME,Le.HR,Le.IMG,Le.INPUT,Le.KEYGEN,Le.LINK,Le.META,Le.PARAM,Le.SOURCE,Le.TRACK,Le.WBR;const Zbt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),M0e={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function KRe(e,t){const n=lxt(e),r=mRe("type",{handlers:{root:ext,element:txt,text:nxt,comment:QRe,doctype:rxt,raw:sxt},unknown:oxt}),i={parser:n?new P0e(M0e):P0e.getFragmentParser(void 0,M0e),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),VT(i,d0());const s=n?i.parser.document:i.parser.getFragment(),o=d1t(s,{file:i.options.file});return i.stitches&&lte(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function XRe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function ext(e,t){XRe(e.children,t)}function txt(e,t){axt(e,t),XRe(e.children,t),uxt(e,t)}function nxt(e,t){const n={type:_r.CHARACTER,chars:e.value,location:bN(e)};VT(t,d0(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function rxt(e,t){const n={type:_r.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:bN(e)};VT(t,d0(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function ixt(e,t){t.stitches=!0;const n=cxt(e);if("children"in e&&"children"in n){const r=KRe({type:"root",children:e.children},t.options);n.children=r.children}QRe({type:"comment",value:{stitch:n}},t)}function QRe(e,t){const n=e.value,r={type:_r.COMMENT,data:n,location:bN(e)};VT(t,d0(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function sxt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,JRe(t,d0(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function oxt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))ixt(n,t);else{let r="";throw Zbt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function VT(e,t){JRe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Co.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function JRe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function axt(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===Co.PLAINTEXT)return;VT(t,d0(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:dw.html;i===dw.html&&n==="svg"&&(i=dw.svg);const s=g1t({...e,children:[]},{space:i===dw.svg?"svg":"html"}),o={type:_r.START_TAG,tagName:n,tagID:zT(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:bN(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function uxt(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&S1t.includes(n)||t.parser.tokenizer.state===Co.PLAINTEXT)return;VT(t,ZL(e));const r={type:_r.END_TAG,tagName:n,tagID:zT(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:bN(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Co.RCDATA||t.parser.tokenizer.state===Co.RAWTEXT||t.parser.tokenizer.state===Co.SCRIPT_DATA)&&(t.parser.tokenizer.state=Co.DATA)}function lxt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function bN(e){const t=d0(e)||{line:void 0,column:void 0,offset:void 0},n=ZL(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function cxt(e){return"children"in e?lC({...e,children:[]}):lC(e)}function fxt(e){return function(t,n){return KRe(t,{...e,file:n})}}function Zu({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return E.jsx(_b,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return E.jsx(tt,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return E.jsx(lo,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return E.jsx(lo,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return E.jsx(lo,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return E.jsx(lo,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return E.jsx(lo,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return E.jsx(lo,{...s,order:6,...s,pb:12})},a({node:i,...s}){return E.jsx(xb,{...s,ref:void 0})},ul({node:i,...s}){return E.jsx(Uu,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return E.jsx(Uu,{type:"ordered",withPadding:!0,...o,pb:8})}};return E.jsx(Zyt,{components:n,rehypePlugins:[fxt],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function rF({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return E.jsx(Zu,{text:n})}const GE=14;function dxt({completed:e,inProgress:t,rejected:n}){return E.jsxs(Jt,{ml:4,gap:4,children:[E.jsx(xs,{label:"Completed",children:E.jsx(av,{variant:"light",color:"green",leftSection:E.jsx(_ke,{width:GE,height:GE,style:{paddingTop:1}}),pb:1,children:e})}),E.jsx(xs,{label:"In Progress",children:E.jsx(av,{variant:"light",color:"orange",leftSection:E.jsx(Eke,{width:GE,height:GE,style:{paddingTop:1}}),pb:1,children:t})}),E.jsx(xs,{label:"Rejected",children:E.jsx(av,{variant:"light",color:"red",leftSection:E.jsx(Qee,{width:GE,height:GE,style:{paddingTop:1}}),pb:1,children:n})})]})}const hxt="https://github.com/revisit-studies/study/tree/main/public/";function pxt({configName:e,config:t,url:n}){const{storageEngine:r}=Po(),[i,s]=N.useState(null);N.useEffect(()=>{r&&r.getParticipantsStatusCounts(e).then(f=>{s(f)})},[e,r]);const{minTime:o,maxTime:a}=N.useMemo(()=>{if(!i)return{minTime:null,maxTime:null};if(!i.minTime||!i.maxTime)return{minTime:null,maxTime:null};const f=typeof i.minTime=="number"?new Date(i.minTime):i.minTime.toDate(),d=typeof i.maxTime=="number"?new Date(i.maxTime):i.maxTime.toDate();return{minTime:f.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"}),maxTime:d.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})}},[i]),[u,l]=N.useState(null);N.useEffect(()=>{r&&r.getModes(e).then(f=>{l(f)})},[e,r]);const c=N.useMemo(()=>u?u.dataCollectionEnabled?i&&(i.inProgress>0||i.completed>0)?"Collecting Data":"Ready to Collect Data":"Data Collection Disabled":"Unknown",[u,i]);return E.jsx(IT,{shadow:"sm",radius:"md",my:"sm",withBorder:!0,children:t.errors.length>0?E.jsxs(E.Fragment,{children:[E.jsx(tt,{fw:"bold",children:e}),E.jsxs(Jt,{align:"center",direction:"row",children:[E.jsx(fk,{color:"red"}),E.jsx(tt,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),E.jsx(rF,{issues:t.errors,type:"error"}),t.warnings.length>0&&E.jsxs(E.Fragment,{children:[E.jsxs(Jt,{align:"center",direction:"row",children:[E.jsx(fk,{color:"orange"}),E.jsx(tt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),E.jsx(rF,{issues:t.warnings,type:"warning"})]})]}):E.jsxs(E.Fragment,{children:[E.jsx(Jt,{direction:"row",justify:"space-between",children:E.jsx(tt,{fw:"bold",children:t.studyMetadata.title})}),E.jsxs(tt,{c:"dimmed",children:[E.jsx(tt,{span:!0,fw:500,children:"Authors: "}),t.studyMetadata.authors.join(", ")]}),E.jsx(tt,{c:"dimmed",children:t.studyMetadata.description}),E.jsx(tt,{c:"dimmed",ta:"right",style:{paddingRight:5},children:E.jsxs(xb,{target:"_blank",onClick:f=>f.stopPropagation(),href:`${hxt}${n}`,children:["View source:"," ",n,E.jsx(dpt,{style:{width:ze(18),height:ze(18),marginLeft:ze(2),marginBottom:ze(-3)}})]})}),t.warnings.length>0&&E.jsxs(E.Fragment,{children:[E.jsxs(Jt,{align:"center",direction:"row",children:[E.jsx(fk,{color:"orange"}),E.jsx(tt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),E.jsx(rF,{issues:t.warnings,type:"warning"})]}),E.jsx(kT,{my:"md"}),E.jsxs(Jt,{direction:"row",gap:"sm",children:[E.jsxs(tt,{fw:"bold",size:"sm",opacity:.7,children:["Study Status:"," ",c]}),i&&E.jsx(dxt,{completed:i.completed,inProgress:i.inProgress,rejected:i.rejected})]}),o&&a&&E.jsxs(tt,{c:"dimmed",mt:4,children:["Activity:"," ",o," ",""," ",a]}),E.jsxs(Jt,{direction:"row",align:"end",gap:"sm",mt:"md",children:[E.jsx(_n,{leftSection:E.jsx(wke,{}),style:{marginLeft:"auto"},variant:"default",component:"a",href:`${Ll}analysis/stats/${n}`,children:"Analyze & Manage Study"}),E.jsx(_n,{leftSection:E.jsx(mpt,{}),component:"a",href:`${Ll}${n}`,children:"Go to Study"})]})]})},e)}function YE({configNames:e,studyConfigs:t}){return e.map(n=>{const r=t[n];if(!r)return null;const i=Ake(n);return E.jsx(pxt,{configName:n,config:r,url:i},n)})}function mxt({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=n.filter(l=>l.startsWith("demo-")),i=n.filter(l=>l.startsWith("tutorial-")),s=n.filter(l=>l.startsWith("example-")),o=n.filter(l=>l.startsWith("test-")),a=n.filter(l=>l.startsWith("library-")),u=n.filter(l=>!l.startsWith("demo-")&&!l.startsWith("tutorial-")&&!l.startsWith("example-")&&!l.startsWith("test-")&&!l.startsWith("library-"));return E.jsx(Yi.Main,{children:E.jsxs(Bd,{size:"sm",px:0,children:[E.jsx(_b,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Ll}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),E.jsxs(Hr,{variant:"outline",defaultValue:u.length>0?"Others":"Demos",children:[E.jsxs(Hr.List,{children:[u.length>0&&E.jsx(Hr.Tab,{value:"Others",children:"Your Studies"}),E.jsx(Hr.Tab,{value:"Demos",children:"Demo Studies"}),E.jsx(Hr.Tab,{value:"Examples",children:"Example Studies"}),E.jsx(Hr.Tab,{value:"Tutorials",children:"Tutorials"}),E.jsx(Hr.Tab,{value:"Tests",children:"Tests"}),E.jsx(Hr.Tab,{value:"Libraries",children:"Libraries"})]}),u.length>0&&E.jsx(Hr.Panel,{value:"Others",children:E.jsx(YE,{configNames:u,studyConfigs:t})}),E.jsxs(Hr.Panel,{value:"Demos",children:[E.jsx(tt,{c:"dimmed",mt:"sm",children:"These studies show off individual features of the reVISit platform."}),E.jsx(YE,{configNames:r,studyConfigs:t})]}),E.jsxs(Hr.Panel,{value:"Examples",children:[E.jsx(tt,{c:"dimmed",mt:"sm",children:"These are full studies that demonstrate the capabilities of the reVISit platform."}),E.jsx(YE,{configNames:s,studyConfigs:t})]}),E.jsxs(Hr.Panel,{value:"Tutorials",children:[E.jsx(tt,{c:"dimmed",mt:"sm",children:"These studies are designed to help you learn how to use the reVISit platform."}),E.jsx(YE,{configNames:i,studyConfigs:t})]}),E.jsxs(Hr.Panel,{value:"Tests",children:[E.jsx(tt,{c:"dimmed",mt:"sm",children:"These studies exist for testing purposes."}),E.jsx(YE,{configNames:o,studyConfigs:t})]}),E.jsxs(Hr.Panel,{value:"Libraries",children:[E.jsx(tt,{c:"dimmed",mt:"sm",children:"Here you can see an example of every library that we publish"}),E.jsx(YE,{configNames:a,studyConfigs:t})]})]})]})})}var ZRe={exports:{}},e3e={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xN=N;function gxt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yxt=typeof Object.is=="function"?Object.is:gxt,vxt=xN.useSyncExternalStore,bxt=xN.useRef,xxt=xN.useEffect,wxt=xN.useMemo,_xt=xN.useDebugValue;e3e.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=bxt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=wxt(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,yxt(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=vxt(e,s[0],s[1]);return xxt(function(){o.hasValue=!0,o.value=a},[a]),_xt(a),a};ZRe.exports=e3e;var Ext=ZRe.exports,Ef="default"in iM?yi:iM,$0e=Symbol.for("react-redux-context"),L0e=typeof globalThis<"u"?globalThis:{};function Sxt(){if(!Ef.createContext)return{};const e=L0e[$0e]??(L0e[$0e]=new Map);let t=e.get(Ef.createContext);return t||(t=Ef.createContext(null),e.set(Ef.createContext,t)),t}var Dv=Sxt(),Cxt=()=>{throw new Error("uSES not initialized!")};function yte(e=Dv){return function(){return Ef.useContext(e)}}var t3e=yte(),n3e=Cxt,Txt=e=>{n3e=e},Axt=(e,t)=>e===t;function Dxt(e=Dv){const t=e===Dv?t3e:yte(e),n=(r,i={})=>{const{equalityFn:s=Axt,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();Ef.useRef(!0);const d=Ef.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=n3e(u.addNestedSub,a.getState,l||a.getState,d,s);return Ef.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var Ixt=Dxt();function kxt(e){e()}function Rxt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){kxt(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var B0e={notify(){},get:()=>[]};function Nxt(e,t){let n,r=B0e,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Rxt())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=B0e)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var Pxt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Oxt=typeof navigator<"u"&&navigator.product==="ReactNative",Fxt=Pxt||Oxt?Ef.useLayoutEffect:Ef.useEffect;function Mxt({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Ef.useMemo(()=>{const l=Nxt(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=Ef.useMemo(()=>e.getState(),[e]);Fxt(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||Dv;return Ef.createElement(u.Provider,{value:o},n)}var $xt=Mxt;function r3e(e=Dv){const t=e===Dv?t3e:yte(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var Lxt=r3e();function Bxt(e=Dv){const t=e===Dv?Lxt:r3e(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var i3e=Bxt();Txt(Ext.useSyncExternalStoreWithSelector);function Qa(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var jxt=typeof Symbol=="function"&&Symbol.observable||"@@observable",j0e=jxt,Lz=()=>Math.random().toString(36).substring(7).split("").join("."),Uxt={INIT:`@@redux/INIT${Lz()}`,REPLACE:`@@redux/REPLACE${Lz()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Lz()}`},WM=Uxt;function vte(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function s3e(e,t,n){if(typeof e!="function")throw new Error(Qa(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Qa(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Qa(1));return n(s3e)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(Qa(3));return i}function f(g){if(typeof g!="function")throw new Error(Qa(4));if(u)throw new Error(Qa(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(Qa(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!vte(g))throw new Error(Qa(7));if(typeof g.type>"u")throw new Error(Qa(8));if(typeof g.type!="string")throw new Error(Qa(17));if(u)throw new Error(Qa(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(Qa(10));r=g,d({type:WM.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Qa(11));function v(){const _=y;_.next&&_.next(c())}return v(),{unsubscribe:g(v)}},[j0e](){return this}}}return d({type:WM.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[j0e]:p}}function zxt(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:WM.INIT})>"u")throw new Error(Qa(12));if(typeof n(void 0,{type:WM.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Qa(13))})}function Vxt(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{zxt(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(Qa(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function GM(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Hxt(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Qa(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=GM(...a)(i.dispatch),{...i,dispatch:s}}}function qxt(e){return vte(e)&&"type"in e&&typeof e.type=="string"}var o3e=Symbol.for("immer-nothing"),U0e=Symbol.for("immer-draftable"),Lf=Symbol.for("immer-state");function $h(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var fC=Object.getPrototypeOf;function Iv(e){return!!e&&!!e[Lf]}function Zg(e){var t;return e?a3e(e)||Array.isArray(e)||!!e[U0e]||!!((t=e.constructor)!=null&&t[U0e])||uB(e)||lB(e):!1}var Wxt=Object.prototype.constructor.toString();function a3e(e){if(!e||typeof e!="object")return!1;const t=fC(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Wxt}function YM(e,t){aB(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function aB(e){const t=e[Lf];return t?t.type_:Array.isArray(e)?1:uB(e)?2:lB(e)?3:0}function LG(e,t){return aB(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function u3e(e,t,n){const r=aB(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Gxt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function uB(e){return e instanceof Map}function lB(e){return e instanceof Set}function Px(e){return e.copy_||e.base_}function BG(e,t){if(uB(e))return new Map(e);if(lB(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=a3e(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Lf];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(fC(e),r)}else{const r=fC(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function bte(e,t=!1){return cB(e)||Iv(e)||!Zg(e)||(aB(e)>1&&(e.set=e.add=e.clear=e.delete=Yxt),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>bte(r,!0))),e}function Yxt(){$h(2)}function cB(e){return Object.isFrozen(e)}var Kxt={};function Yw(e){const t=Kxt[e];return t||$h(0,e),t}var RR;function l3e(){return RR}function Xxt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function z0e(e,t){t&&(Yw("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function jG(e){UG(e),e.drafts_.forEach(Qxt),e.drafts_=null}function UG(e){e===RR&&(RR=e.parent_)}function V0e(e){return RR=Xxt(RR,e)}function Qxt(e){const t=e[Lf];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function H0e(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Lf].modified_&&(jG(t),$h(4)),Zg(e)&&(e=KM(t,e),t.parent_||XM(t,e)),t.patches_&&Yw("Patches").generateReplacementPatches_(n[Lf].base_,e,t.patches_,t.inversePatches_)):e=KM(t,n,[]),jG(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==o3e?e:void 0}function KM(e,t,n){if(cB(t))return t;const r=t[Lf];if(!r)return YM(t,(i,s)=>q0e(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return XM(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),YM(s,(a,u)=>q0e(e,r,i,a,u,n,o)),XM(e,i,!1),n&&e.patches_&&Yw("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function q0e(e,t,n,r,i,s,o){if(Iv(i)){const a=s&&t&&t.type_!==3&&!LG(t.assigned_,r)?s.concat(r):void 0,u=KM(e,i,a);if(u3e(n,r,u),Iv(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Zg(i)&&!cB(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;KM(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&XM(e,i)}}function XM(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&bte(t,n)}function Jxt(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:l3e(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=xte;n&&(i=[r],s=NR);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var xte={get(e,t){if(t===Lf)return e;const n=Px(e);if(!LG(n,t))return Zxt(e,n,t);const r=n[t];return e.finalized_||!Zg(r)?r:r===Bz(e.base_,t)?(jz(e),e.copy_[t]=VG(r,e)):r},has(e,t){return t in Px(e)},ownKeys(e){return Reflect.ownKeys(Px(e))},set(e,t,n){const r=c3e(Px(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Bz(Px(e),t),s=i==null?void 0:i[Lf];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Gxt(n,i)&&(n!==void 0||LG(e.base_,t)))return!0;jz(e),zG(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Bz(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,jz(e),zG(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Px(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){$h(11)},getPrototypeOf(e){return fC(e.base_)},setPrototypeOf(){$h(12)}},NR={};YM(xte,(e,t)=>{NR[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});NR.deleteProperty=function(e,t){return NR.set.call(this,e,t,void 0)};NR.set=function(e,t,n){return xte.set.call(this,e[0],t,n,e[0])};function Bz(e,t){const n=e[Lf];return(n?Px(n):e)[t]}function Zxt(e,t,n){var i;const r=c3e(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function c3e(e,t){if(!(t in e))return;let n=fC(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=fC(n)}}function zG(e){e.modified_||(e.modified_=!0,e.parent_&&zG(e.parent_))}function jz(e){e.copy_||(e.copy_=BG(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var ewt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&$h(6),r!==void 0&&typeof r!="function"&&$h(7);let i;if(Zg(t)){const s=V0e(this),o=VG(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?jG(s):UG(s)}return z0e(s,r),H0e(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===o3e&&(i=void 0),this.autoFreeze_&&bte(i,!0),r){const s=[],o=[];Yw("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else $h(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Zg(e)||$h(8),Iv(e)&&(e=f3e(e));const t=V0e(this),n=VG(e,void 0);return n[Lf].isManual_=!0,UG(t),n}finishDraft(e,t){const n=e&&e[Lf];(!n||!n.isManual_)&&$h(9);const{scope_:r}=n;return z0e(r,t),H0e(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Yw("Patches").applyPatches_;return Iv(e)?r(e,t):this.produce(e,i=>r(i,t))}};function VG(e,t){const n=uB(e)?Yw("MapSet").proxyMap_(e,t):lB(e)?Yw("MapSet").proxySet_(e,t):Jxt(e,t);return(t?t.scope_:l3e()).drafts_.push(n),n}function f3e(e){return Iv(e)||$h(10,e),d3e(e)}function d3e(e){if(!Zg(e)||cB(e))return e;const t=e[Lf];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=BG(e,t.scope_.immer_.useStrictShallowCopy_)}else n=BG(e,!0);return YM(n,(r,i)=>{u3e(n,r,d3e(i))}),t&&(t.finalized_=!1),n}var Bf=new ewt,h3e=Bf.produce;Bf.produceWithPatches.bind(Bf);Bf.setAutoFreeze.bind(Bf);Bf.setUseStrictShallowCopy.bind(Bf);Bf.applyPatches.bind(Bf);Bf.createDraft.bind(Bf);Bf.finishDraft.bind(Bf);function twt(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function nwt(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function rwt(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var W0e=e=>Array.isArray(e)?e:[e];function iwt(e){const t=Array.isArray(e[0])?e[0]:e;return rwt(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function swt(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var owt=class{constructor(e){this.value=e}deref(){return this.value}},awt=typeof WeakRef<"u"?WeakRef:owt,uwt=0,G0e=1;function f4(){return{s:uwt,v:void 0,o:null,p:null}}function wte(e,t={}){let n=f4();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=f4(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=f4(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===G0e)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new awt(c):c}return l.s=G0e,l.v=c,c}return o.clearCache=()=>{n=f4(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function p3e(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),twt(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=wte,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=W0e(d),y=W0e(p),v=iwt(i),b=f(function(){return s++,l.apply(null,arguments)},...g),_=h(function(){o++;const S=swt(v,arguments);return a=b.apply(null,S),a},...y);return Object.assign(_,{resultFunc:l,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var m3e=p3e(wte),lwt=Object.assign((e,t=m3e)=>{nwt(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>lwt});function g3e(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var cwt=g3e(),fwt=g3e,dwt=(...e)=>{const t=p3e(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(Iv(o)?f3e(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};dwt(wte);var hwt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?GM:GM.apply(null,arguments)};function dC(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Fc(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>qxt(r)&&r.type===e,n}var y3e=class pI extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,pI.prototype)}static get[Symbol.species](){return pI}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new pI(...t[0].concat(this)):new pI(...t.concat(this))}};function Y0e(e){return Zg(e)?h3e(e,()=>{}):e}function K0e(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(Fc(10));const r=n.insert(t,e);return e.set(t,r),r}function pwt(e){return typeof e=="boolean"}var mwt=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new y3e;return n&&(pwt(n)?o.push(cwt):o.push(fwt(n.extraArgument))),o},gwt="RTK_autoBatch",v3e=e=>t=>{setTimeout(t,e)},ywt=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:v3e(10),vwt=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?ywt:e.type==="callback"?e.queueNotification:v3e(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[gwt]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},bwt=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new y3e(e);return r&&i.push(vwt(typeof r=="object"?r:void 0)),i};function xwt(e){const t=mwt(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e;let a;if(typeof n=="function")a=n;else if(vte(n))a=Vxt(n);else throw new Error(Fc(1));let u;typeof r=="function"?u=r(t):u=t();let l=GM;i&&(l=hwt({trace:!1,...typeof i=="object"&&i}));const c=Hxt(...u),f=bwt(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return s3e(a,s,h)}function b3e(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Fc(28));if(a in t)throw new Error(Fc(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function wwt(e){return typeof e=="function"}function _wt(e,t){let[n,r,i]=b3e(t),s;if(wwt(e))s=()=>Y0e(e());else{const a=Y0e(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(Iv(c)){const h=f(c,u);return h===void 0?c:h}else{if(Zg(c))return h3e(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(Fc(9))}return d}}return c},a)}return o.getInitialState=s,o}var Ewt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Swt=(e=21)=>{let t="",n=e;for(;n--;)t+=Ewt[Math.random()*64|0];return t},Cwt=Symbol.for("rtk-slice-createasyncthunk");function Twt(e,t){return`${e}/${t}`}function Awt({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Cwt];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Fc(11));const a=(typeof i.reducers=="function"?i.reducers(kwt()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(b,_){const w=typeof b=="string"?b:b.type;if(!w)throw new Error(Fc(12));if(w in l.sliceCaseReducersByType)throw new Error(Fc(13));return l.sliceCaseReducersByType[w]=_,c},addMatcher(b,_){return l.sliceMatchers.push({matcher:b,reducer:_}),c},exposeAction(b,_){return l.actionCreators[b]=_,c},exposeCaseReducer(b,_){return l.sliceCaseReducersByName[b]=_,c}};u.forEach(b=>{const _=a[b],w={reducerName:b,type:Twt(s,b),createNotation:typeof i.reducers=="function"};Nwt(_)?Owt(w,_,c,t):Rwt(w,_,c)});function f(){const[b={},_=[],w=void 0]=typeof i.extraReducers=="function"?b3e(i.extraReducers):[i.extraReducers],S={...b,...l.sliceCaseReducersByType};return _wt(i.initialState,T=>{for(let A in S)T.addCase(A,S[A]);for(let A of l.sliceMatchers)T.addMatcher(A.matcher,A.reducer);for(let A of _)T.addMatcher(A.matcher,A.reducer);w&&T.addDefaultCase(w)})}const d=b=>b,h=new Map;let p;function m(b,_){return p||(p=f()),p(b,_)}function g(){return p||(p=f()),p.getInitialState()}function y(b,_=!1){function w(T){let A=T[b];return typeof A>"u"&&_&&(A=g()),A}function S(T=d){const A=K0e(h,_,{insert:()=>new WeakMap});return K0e(A,T,{insert:()=>{const k={};for(const[I,R]of Object.entries(i.selectors??{}))k[I]=Dwt(R,T,g,_);return k}})}return{reducerPath:b,getSelectors:S,get selectors(){return S(w)},selectSlice:w}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(b,{reducerPath:_,...w}={}){const S=_??o;return b.inject({reducerPath:S,reducer:m},w),{...v,...y(S,!0)}}};return v}}function Dwt(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Iwt=Awt();function kwt(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Rwt({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Pwt(r))throw new Error(Fc(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?dC(e,o):dC(e))}function Nwt(e){return e._reducerDefinitionType==="asyncThunk"}function Pwt(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Owt({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Fc(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||d4,pending:a||d4,rejected:u||d4,settled:l||d4})}function d4(){}var Fwt=(e,t)=>{if(typeof e!="function")throw new Error(Fc(32))},_te="listenerMiddleware",Mwt=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=dC(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Fc(21));return Fwt(s),{predicate:i,type:t,effect:s}},$wt=Object.assign(e=>{const{type:t,predicate:n,effect:r}=Mwt(e);return{id:Swt(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Fc(22))}}},{withTypes:()=>$wt}),Lwt=Object.assign(dC(`${_te}/add`),{withTypes:()=>Lwt});dC(`${_te}/removeAll`);var Bwt=Object.assign(dC(`${_te}/remove`),{withTypes:()=>Bwt});function Fc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function dp(e){return e.components.flatMap(t=>typeof t=="string"?t:dp(t))}function x3e(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:x3e(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function w3e(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+dp(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+dp(e).length-1}];r+=1}else{const o=w3e(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function Ete(e,t){const n=w3e(e,t,0);return typeof n=="number"?null:n}function _3e(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=_3e(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function jwt(e,t){const n=_3e(e,t,0);return n.found?n.distance:-1}function E3e(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...E3e(i,`${t}-${s}`))}),n}function Ste(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>Ste(n,`${t}-${r}`))}}async function Uwt(e,t,n,r,i,s,o){const a=dp(n),u=Object.fromEntries(a.filter(p=>p!=="end").map((p,m)=>[`${p}_${m}`,{answer:{},incorrectAnswers:{},startTime:0,endTime:-1,provenanceGraph:void 0,windowEvents:[],timedOut:!1,helpButtonClickedCount:0}])),l=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),c=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),f={studyId:e,isRecording:!1,answers:Object.keys(i).length>0?i:u,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?c:l,iframeAnswers:{},iframeProvenance:null,metadata:r,analysisProvState:null,analysisIsPlaying:!1,analysisHasAudio:!1,analysisHasProvenance:!1,modes:s,matrixAnswers:{},participantId:o},d=Iwt({name:"storeSlice",initialState:f,reducers:{setConfig(p,m){p.config=m.payload},setIsRecording(p,m){p.isRecording=m.payload},toggleStudyBrowser:p=>{p.showStudyBrowser=!p.showStudyBrowser},toggleShowHelpText:p=>{p.showHelpText=!p.showHelpText},setAlertModal:(p,m)=>{p.alertModal=m.payload},setIframeAnswers:(p,m)=>{p.iframeAnswers=m.payload},setIframeProvenance:(p,m)=>{p.iframeProvenance=m.payload},saveAnalysisState(p,{payload:m}){p.analysisProvState=m},setAnalysisIsPlaying(p,{payload:m}){p.analysisIsPlaying=m},setAnalysisHasAudio(p,{payload:m}){p.analysisHasAudio=m},setAnalysisHasProvenance(p,{payload:m}){p.analysisHasProvenance=m},setMatrixAnswersRadio:(p,m)=>{if(m.payload){const{responseId:g,questionKey:y,val:v}=m.payload;p.matrixAnswers={...p.matrixAnswers,[g]:{...p.matrixAnswers[g],[y]:v}}}else p.matrixAnswers={}},setMatrixAnswersCheckbox:(p,m)=>{var g;if(m.payload){const{responseId:y,questionKey:v,value:b,isChecked:_,choiceOptions:w}=m.payload,S=((g=p.matrixAnswers[y])==null?void 0:g[v])??"";let T="";_?S.length>0?T=[...S.split("|"),b].sort((A,k)=>w.map(I=>I.value).indexOf(A)-w.map(I=>I.value).indexOf(k)).join("|"):T=`${b}`:T=S.split("|").filter(A=>A!==b).join("|"),p.matrixAnswers={...p.matrixAnswers,[y]:{...p.matrixAnswers[y],[v]:T}}}else p.matrixAnswers={}},updateResponseBlockValidation:(p,{payload:m})=>{p.trialValidation[m.identifier]||(p.trialValidation[m.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),p.trialValidation[m.identifier][m.location]={valid:m.status,values:m.values},m.provenanceGraph&&(p.trialValidation[m.identifier].provenanceGraph=m.provenanceGraph)},saveTrialAnswer(p,{payload:m}){const{identifier:g,answer:y,startTime:v,endTime:b,provenanceGraph:_,windowEvents:w,timedOut:S,incorrectAnswers:T,helpButtonClickedCount:A}=m;p.answers[g]={incorrectAnswers:T,answer:y,startTime:v,endTime:b,provenanceGraph:_,windowEvents:w,timedOut:S,helpButtonClickedCount:A}},incrementHelpCounter(p,{payload:m}){const{identifier:g}=m;p.answers[g].helpButtonClickedCount+=1},saveIncorrectAnswer(p,{payload:m}){const{identifier:g,answer:y,question:v}=m;p.answers[v].incorrectAnswers||(p.answers[v].incorrectAnswers={}),p.answers[v].incorrectAnswers[g]||(p.answers[v].incorrectAnswers[g]={id:g,value:[]}),p.answers[v].incorrectAnswers[g].value.push(y)}}});return{store:xwt({reducer:d.reducer,preloadedState:f}),actions:d.actions}}const S3e=N.createContext(null);function Bl(){return N.useContext(S3e).actions}const Jc=i3e,vi=Ixt;function zwt(e){return vi(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}const Vwt=m3e(e=>e.sequence,e=>dp(e));function Cte(){return vi(Vwt)}var C3e={exports:{}};function mI(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Uz={exports:{}};const Hwt={},qwt=Object.freeze(Object.defineProperty({__proto__:null,default:Hwt},Symbol.toStringTag,{value:"Module"})),T3e=set(qwt);var X0e;function Xr(){return X0e||(X0e=1,function(e,t){(function(n,r){e.exports=r()})(on,function(){var n=n||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof on<"u"&&on.crypto&&(s=on.crypto),!s&&typeof mI=="function")try{s=T3e}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function v(){}return function(b){var _;return v.prototype=b,_=new v,v.prototype=null,_}}(),u={},l=u.lib={},c=l.Base=function(){return{extend:function(v){var b=a(this);return v&&b.mixIn(v),(!b.hasOwnProperty("init")||this.init===b.init)&&(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var v=this.extend();return v.init.apply(v,arguments),v},init:function(){},mixIn:function(v){for(var b in v)v.hasOwnProperty(b)&&(this[b]=v[b]);v.hasOwnProperty("toString")&&(this.toString=v.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=c.extend({init:function(v,b){v=this.words=v||[],b!=i?this.sigBytes=b:this.sigBytes=v.length*4},toString:function(v){return(v||h).stringify(this)},concat:function(v){var b=this.words,_=v.words,w=this.sigBytes,S=v.sigBytes;if(this.clamp(),w%4)for(var T=0;T<S;T++){var A=_[T>>>2]>>>24-T%4*8&255;b[w+T>>>2]|=A<<24-(w+T)%4*8}else for(var k=0;k<S;k+=4)b[w+k>>>2]=_[k>>>2];return this.sigBytes+=S,this},clamp:function(){var v=this.words,b=this.sigBytes;v[b>>>2]&=4294967295<<32-b%4*8,v.length=r.ceil(b/4)},clone:function(){var v=c.clone.call(this);return v.words=this.words.slice(0),v},random:function(v){for(var b=[],_=0;_<v;_+=4)b.push(o());return new f.init(b,v)}}),d=u.enc={},h=d.Hex={stringify:function(v){for(var b=v.words,_=v.sigBytes,w=[],S=0;S<_;S++){var T=b[S>>>2]>>>24-S%4*8&255;w.push((T>>>4).toString(16)),w.push((T&15).toString(16))}return w.join("")},parse:function(v){for(var b=v.length,_=[],w=0;w<b;w+=2)_[w>>>3]|=parseInt(v.substr(w,2),16)<<24-w%8*4;return new f.init(_,b/2)}},p=d.Latin1={stringify:function(v){for(var b=v.words,_=v.sigBytes,w=[],S=0;S<_;S++){var T=b[S>>>2]>>>24-S%4*8&255;w.push(String.fromCharCode(T))}return w.join("")},parse:function(v){for(var b=v.length,_=[],w=0;w<b;w++)_[w>>>2]|=(v.charCodeAt(w)&255)<<24-w%4*8;return new f.init(_,b)}},m=d.Utf8={stringify:function(v){try{return decodeURIComponent(escape(p.stringify(v)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(v){return p.parse(unescape(encodeURIComponent(v)))}},g=l.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(v){typeof v=="string"&&(v=m.parse(v)),this._data.concat(v),this._nDataBytes+=v.sigBytes},_process:function(v){var b,_=this._data,w=_.words,S=_.sigBytes,T=this.blockSize,A=T*4,k=S/A;v?k=r.ceil(k):k=r.max((k|0)-this._minBufferSize,0);var I=k*T,R=r.min(I*4,S);if(I){for(var F=0;F<I;F+=T)this._doProcessBlock(w,F);b=w.splice(0,I),_.sigBytes-=R}return new f.init(b,R)},clone:function(){var v=c.clone.call(this);return v._data=this._data.clone(),v},_minBufferSize:0});l.Hasher=g.extend({cfg:c.extend(),init:function(v){this.cfg=this.cfg.extend(v),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(v){return this._append(v),this._process(),this},finalize:function(v){v&&this._append(v);var b=this._doFinalize();return b},blockSize:16,_createHelper:function(v){return function(b,_){return new v.init(_).finalize(b)}},_createHmacHelper:function(v){return function(b,_){return new y.HMAC.init(v,_).finalize(b)}}});var y=u.algo={};return u}(Math);return n})}(Uz)),Uz.exports}var zz={exports:{}},Q0e;function fB(){return Q0e||(Q0e=1,function(e,t){(function(n,r){e.exports=r(Xr())})(on,function(n){return function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=i.x64={};u.Word=o.extend({init:function(l,c){this.high=l,this.low=c}}),u.WordArray=o.extend({init:function(l,c){l=this.words=l||[],c!=r?this.sigBytes=c:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,c=l.length,f=[],d=0;d<c;d++){var h=l[d];f.push(h.high),f.push(h.low)}return a.create(f,this.sigBytes)},clone:function(){for(var l=o.clone.call(this),c=l.words=this.words.slice(0),f=c.length,d=0;d<f;d++)c[d]=c[d].clone();return l}})}(),n})}(zz)),zz.exports}var Vz={exports:{}},J0e;function Wwt(){return J0e||(J0e=1,function(e,t){(function(n,r){e.exports=r(Xr())})(on,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,s=i.WordArray,o=s.init,a=s.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var l=u.byteLength,c=[],f=0;f<l;f++)c[f>>>2]|=u[f]<<24-f%4*8;o.call(this,c,l)}else o.apply(this,arguments)};a.prototype=s}}(),n.lib.WordArray})}(Vz)),Vz.exports}var Hz={exports:{}},Z0e;function Gwt(){return Z0e||(Z0e=1,function(e,t){(function(n,r){e.exports=r(Xr())})(on,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=l[d>>>2]>>>16-d%4*8&65535;f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=u.charCodeAt(f)<<16-f%2*16;return s.create(c,l*2)}},o.Utf16LE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=a(l[d>>>2]>>>16-d%4*8&65535);f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=a(u.charCodeAt(f)<<16-f%2*16);return s.create(c,l*2)}};function a(u){return u<<8&4278255360|u>>>8&16711935}}(),n.enc.Utf16})}(Hz)),Hz.exports}var qz={exports:{}},ege;function q_(){return ege||(ege=1,function(e,t){(function(n,r){e.exports=r(Xr())})(on,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64={stringify:function(u){var l=u.words,c=u.sigBytes,f=this._map;u.clamp();for(var d=[],h=0;h<c;h+=3)for(var p=l[h>>>2]>>>24-h%4*8&255,m=l[h+1>>>2]>>>24-(h+1)%4*8&255,g=l[h+2>>>2]>>>24-(h+2)%4*8&255,y=p<<16|m<<8|g,v=0;v<4&&h+v*.75<c;v++)d.push(f.charAt(y>>>6*(3-v)&63));var b=f.charAt(64);if(b)for(;d.length%4;)d.push(b);return d.join("")},parse:function(u){var l=u.length,c=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<c.length;d++)f[c.charCodeAt(d)]=d}var h=c.charAt(64);if(h){var p=u.indexOf(h);p!==-1&&(l=p)}return a(u,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64})}(qz)),qz.exports}var Wz={exports:{}},tge;function Ywt(){return tge||(tge=1,function(e,t){(function(n,r){e.exports=r(Xr())})(on,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64url={stringify:function(u,l){l===void 0&&(l=!0);var c=u.words,f=u.sigBytes,d=l?this._safe_map:this._map;u.clamp();for(var h=[],p=0;p<f;p+=3)for(var m=c[p>>>2]>>>24-p%4*8&255,g=c[p+1>>>2]>>>24-(p+1)%4*8&255,y=c[p+2>>>2]>>>24-(p+2)%4*8&255,v=m<<16|g<<8|y,b=0;b<4&&p+b*.75<f;b++)h.push(d.charAt(v>>>6*(3-b)&63));var _=d.charAt(64);if(_)for(;h.length%4;)h.push(_);return h.join("")},parse:function(u,l){l===void 0&&(l=!0);var c=u.length,f=l?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<f.length;h++)d[f.charCodeAt(h)]=h}var p=f.charAt(64);if(p){var m=u.indexOf(p);m!==-1&&(c=m)}return a(u,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64url})}(Wz)),Wz.exports}var Gz={exports:{}},nge;function W_(){return nge||(nge=1,function(e,t){(function(n,r){e.exports=r(Xr())})(on,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[];(function(){for(var m=0;m<64;m++)l[m]=r.abs(r.sin(m+1))*4294967296|0})();var c=u.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,g){for(var y=0;y<16;y++){var v=g+y,b=m[v];m[v]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var _=this._hash.words,w=m[g+0],S=m[g+1],T=m[g+2],A=m[g+3],k=m[g+4],I=m[g+5],R=m[g+6],F=m[g+7],O=m[g+8],L=m[g+9],H=m[g+10],U=m[g+11],G=m[g+12],Y=m[g+13],J=m[g+14],$=m[g+15],j=_[0],W=_[1],B=_[2],q=_[3];j=f(j,W,B,q,w,7,l[0]),q=f(q,j,W,B,S,12,l[1]),B=f(B,q,j,W,T,17,l[2]),W=f(W,B,q,j,A,22,l[3]),j=f(j,W,B,q,k,7,l[4]),q=f(q,j,W,B,I,12,l[5]),B=f(B,q,j,W,R,17,l[6]),W=f(W,B,q,j,F,22,l[7]),j=f(j,W,B,q,O,7,l[8]),q=f(q,j,W,B,L,12,l[9]),B=f(B,q,j,W,H,17,l[10]),W=f(W,B,q,j,U,22,l[11]),j=f(j,W,B,q,G,7,l[12]),q=f(q,j,W,B,Y,12,l[13]),B=f(B,q,j,W,J,17,l[14]),W=f(W,B,q,j,$,22,l[15]),j=d(j,W,B,q,S,5,l[16]),q=d(q,j,W,B,R,9,l[17]),B=d(B,q,j,W,U,14,l[18]),W=d(W,B,q,j,w,20,l[19]),j=d(j,W,B,q,I,5,l[20]),q=d(q,j,W,B,H,9,l[21]),B=d(B,q,j,W,$,14,l[22]),W=d(W,B,q,j,k,20,l[23]),j=d(j,W,B,q,L,5,l[24]),q=d(q,j,W,B,J,9,l[25]),B=d(B,q,j,W,A,14,l[26]),W=d(W,B,q,j,O,20,l[27]),j=d(j,W,B,q,Y,5,l[28]),q=d(q,j,W,B,T,9,l[29]),B=d(B,q,j,W,F,14,l[30]),W=d(W,B,q,j,G,20,l[31]),j=h(j,W,B,q,I,4,l[32]),q=h(q,j,W,B,O,11,l[33]),B=h(B,q,j,W,U,16,l[34]),W=h(W,B,q,j,J,23,l[35]),j=h(j,W,B,q,S,4,l[36]),q=h(q,j,W,B,k,11,l[37]),B=h(B,q,j,W,F,16,l[38]),W=h(W,B,q,j,H,23,l[39]),j=h(j,W,B,q,Y,4,l[40]),q=h(q,j,W,B,w,11,l[41]),B=h(B,q,j,W,A,16,l[42]),W=h(W,B,q,j,R,23,l[43]),j=h(j,W,B,q,L,4,l[44]),q=h(q,j,W,B,G,11,l[45]),B=h(B,q,j,W,$,16,l[46]),W=h(W,B,q,j,T,23,l[47]),j=p(j,W,B,q,w,6,l[48]),q=p(q,j,W,B,F,10,l[49]),B=p(B,q,j,W,J,15,l[50]),W=p(W,B,q,j,I,21,l[51]),j=p(j,W,B,q,G,6,l[52]),q=p(q,j,W,B,A,10,l[53]),B=p(B,q,j,W,H,15,l[54]),W=p(W,B,q,j,S,21,l[55]),j=p(j,W,B,q,O,6,l[56]),q=p(q,j,W,B,$,10,l[57]),B=p(B,q,j,W,R,15,l[58]),W=p(W,B,q,j,Y,21,l[59]),j=p(j,W,B,q,k,6,l[60]),q=p(q,j,W,B,U,10,l[61]),B=p(B,q,j,W,T,15,l[62]),W=p(W,B,q,j,L,21,l[63]),_[0]=_[0]+j|0,_[1]=_[1]+W|0,_[2]=_[2]+B|0,_[3]=_[3]+q|0},_doFinalize:function(){var m=this._data,g=m.words,y=this._nDataBytes*8,v=m.sigBytes*8;g[v>>>5]|=128<<24-v%32;var b=r.floor(y/4294967296),_=y;g[(v+64>>>9<<4)+15]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,g[(v+64>>>9<<4)+14]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,m.sigBytes=(g.length+1)*4,this._process();for(var w=this._hash,S=w.words,T=0;T<4;T++){var A=S[T];S[T]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}return w},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});function f(m,g,y,v,b,_,w){var S=m+(g&y|~g&v)+b+w;return(S<<_|S>>>32-_)+g}function d(m,g,y,v,b,_,w){var S=m+(g&v|y&~v)+b+w;return(S<<_|S>>>32-_)+g}function h(m,g,y,v,b,_,w){var S=m+(g^y^v)+b+w;return(S<<_|S>>>32-_)+g}function p(m,g,y,v,b,_,w){var S=m+(y^(g|~v))+b+w;return(S<<_|S>>>32-_)+g}i.MD5=a._createHelper(c),i.HmacMD5=a._createHmacHelper(c)}(Math),n.MD5})}(Gz)),Gz.exports}var Yz={exports:{}},rge;function A3e(){return rge||(rge=1,function(e,t){(function(n,r){e.exports=r(Xr())})(on,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.Hasher,a=r.algo,u=[],l=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,f){for(var d=this._hash.words,h=d[0],p=d[1],m=d[2],g=d[3],y=d[4],v=0;v<80;v++){if(v<16)u[v]=c[f+v]|0;else{var b=u[v-3]^u[v-8]^u[v-14]^u[v-16];u[v]=b<<1|b>>>31}var _=(h<<5|h>>>27)+y+u[v];v<20?_+=(p&m|~p&g)+1518500249:v<40?_+=(p^m^g)+1859775393:v<60?_+=(p&m|p&g|m&g)-1894007588:_+=(p^m^g)-899497514,y=g,g=m,m=p<<30|p>>>2,p=h,h=_}d[0]=d[0]+h|0,d[1]=d[1]+p|0,d[2]=d[2]+m|0,d[3]=d[3]+g|0,d[4]=d[4]+y|0},_doFinalize:function(){var c=this._data,f=c.words,d=this._nDataBytes*8,h=c.sigBytes*8;return f[h>>>5]|=128<<24-h%32,f[(h+64>>>9<<4)+14]=Math.floor(d/4294967296),f[(h+64>>>9<<4)+15]=d,c.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var c=o.clone.call(this);return c._hash=this._hash.clone(),c}});r.SHA1=o._createHelper(l),r.HmacSHA1=o._createHmacHelper(l)}(),n.SHA1})}(Yz)),Yz.exports}var Kz={exports:{}},ige;function Tte(){return ige||(ige=1,function(e,t){(function(n,r){e.exports=r(Xr())})(on,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[],c=[];(function(){function h(y){for(var v=r.sqrt(y),b=2;b<=v;b++)if(!(y%b))return!1;return!0}function p(y){return(y-(y|0))*4294967296|0}for(var m=2,g=0;g<64;)h(m)&&(g<8&&(l[g]=p(r.pow(m,1/2))),c[g]=p(r.pow(m,1/3)),g++),m++})();var f=[],d=u.SHA256=a.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(h,p){for(var m=this._hash.words,g=m[0],y=m[1],v=m[2],b=m[3],_=m[4],w=m[5],S=m[6],T=m[7],A=0;A<64;A++){if(A<16)f[A]=h[p+A]|0;else{var k=f[A-15],I=(k<<25|k>>>7)^(k<<14|k>>>18)^k>>>3,R=f[A-2],F=(R<<15|R>>>17)^(R<<13|R>>>19)^R>>>10;f[A]=I+f[A-7]+F+f[A-16]}var O=_&w^~_&S,L=g&y^g&v^y&v,H=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),U=(_<<26|_>>>6)^(_<<21|_>>>11)^(_<<7|_>>>25),G=T+U+O+c[A]+f[A],Y=H+L;T=S,S=w,w=_,_=b+G|0,b=v,v=y,y=g,g=G+Y|0}m[0]=m[0]+g|0,m[1]=m[1]+y|0,m[2]=m[2]+v|0,m[3]=m[3]+b|0,m[4]=m[4]+_|0,m[5]=m[5]+w|0,m[6]=m[6]+S|0,m[7]=m[7]+T|0},_doFinalize:function(){var h=this._data,p=h.words,m=this._nDataBytes*8,g=h.sigBytes*8;return p[g>>>5]|=128<<24-g%32,p[(g+64>>>9<<4)+14]=r.floor(m/4294967296),p[(g+64>>>9<<4)+15]=m,h.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});i.SHA256=a._createHelper(d),i.HmacSHA256=a._createHmacHelper(d)}(Math),n.SHA256})}(Kz)),Kz.exports}var Xz={exports:{}},sge;function Kwt(){return sge||(sge=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Tte())})(on,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.algo,a=o.SHA256,u=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});r.SHA224=a._createHelper(u),r.HmacSHA224=a._createHmacHelper(u)}(),n.SHA224})}(Xz)),Xz.exports}var Qz={exports:{}},oge;function D3e(){return oge||(oge=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),fB())})(on,function(n){return function(){var r=n,i=r.lib,s=i.Hasher,o=r.x64,a=o.Word,u=o.WordArray,l=r.algo;function c(){return a.create.apply(a,arguments)}var f=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var p=0;p<80;p++)d[p]=c()})();var h=l.SHA512=s.extend({_doReset:function(){this._hash=new u.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(p,m){for(var g=this._hash.words,y=g[0],v=g[1],b=g[2],_=g[3],w=g[4],S=g[5],T=g[6],A=g[7],k=y.high,I=y.low,R=v.high,F=v.low,O=b.high,L=b.low,H=_.high,U=_.low,G=w.high,Y=w.low,J=S.high,$=S.low,j=T.high,W=T.low,B=A.high,q=A.low,Z=k,re=I,xe=R,pe=F,Te=O,ke=L,it=H,Re=U,ut=G,Ke=Y,Ct=J,gt=$,Ie=j,Ve=W,ft=B,_t=q,Mt=0;Mt<80;Mt++){var st,X,de=d[Mt];if(Mt<16)X=de.high=p[m+Mt*2]|0,st=de.low=p[m+Mt*2+1]|0;else{var we=d[Mt-15],ae=we.high,he=we.low,Ee=(ae>>>1|he<<31)^(ae>>>8|he<<24)^ae>>>7,$e=(he>>>1|ae<<31)^(he>>>8|ae<<24)^(he>>>7|ae<<25),Be=d[Mt-2],lt=Be.high,Je=Be.low,Xt=(lt>>>19|Je<<13)^(lt<<3|Je>>>29)^lt>>>6,fn=(Je>>>19|lt<<13)^(Je<<3|lt>>>29)^(Je>>>6|lt<<26),Wt=d[Mt-7],an=Wt.high,Sn=Wt.low,Mn=d[Mt-16],ki=Mn.high,di=Mn.low;st=$e+Sn,X=Ee+an+(st>>>0<$e>>>0?1:0),st=st+fn,X=X+Xt+(st>>>0<fn>>>0?1:0),st=st+di,X=X+ki+(st>>>0<di>>>0?1:0),de.high=X,de.low=st}var Li=ut&Ct^~ut&Ie,As=Ke&gt^~Ke&Ve,Lr=Z&xe^Z&Te^xe&Te,ls=re&pe^re&ke^pe&ke,ll=(Z>>>28|re<<4)^(Z<<30|re>>>2)^(Z<<25|re>>>7),Fo=(re>>>28|Z<<4)^(re<<30|Z>>>2)^(re<<25|Z>>>7),Ha=(ut>>>14|Ke<<18)^(ut>>>18|Ke<<14)^(ut<<23|Ke>>>9),Rr=(Ke>>>14|ut<<18)^(Ke>>>18|ut<<14)^(Ke<<23|ut>>>9),Ri=f[Mt],hi=Ri.high,Vs=Ri.low,ri=_t+Rr,Ni=ft+Ha+(ri>>>0<_t>>>0?1:0),ri=ri+As,Ni=Ni+Li+(ri>>>0<As>>>0?1:0),ri=ri+Vs,Ni=Ni+hi+(ri>>>0<Vs>>>0?1:0),ri=ri+st,Ni=Ni+X+(ri>>>0<st>>>0?1:0),ve=Fo+ls,ce=ll+Lr+(ve>>>0<Fo>>>0?1:0);ft=Ie,_t=Ve,Ie=Ct,Ve=gt,Ct=ut,gt=Ke,Ke=Re+ri|0,ut=it+Ni+(Ke>>>0<Re>>>0?1:0)|0,it=Te,Re=ke,Te=xe,ke=pe,xe=Z,pe=re,re=ri+ve|0,Z=Ni+ce+(re>>>0<ri>>>0?1:0)|0}I=y.low=I+re,y.high=k+Z+(I>>>0<re>>>0?1:0),F=v.low=F+pe,v.high=R+xe+(F>>>0<pe>>>0?1:0),L=b.low=L+ke,b.high=O+Te+(L>>>0<ke>>>0?1:0),U=_.low=U+Re,_.high=H+it+(U>>>0<Re>>>0?1:0),Y=w.low=Y+Ke,w.high=G+ut+(Y>>>0<Ke>>>0?1:0),$=S.low=$+gt,S.high=J+Ct+($>>>0<gt>>>0?1:0),W=T.low=W+Ve,T.high=j+Ie+(W>>>0<Ve>>>0?1:0),q=A.low=q+_t,A.high=B+ft+(q>>>0<_t>>>0?1:0)},_doFinalize:function(){var p=this._data,m=p.words,g=this._nDataBytes*8,y=p.sigBytes*8;m[y>>>5]|=128<<24-y%32,m[(y+128>>>10<<5)+30]=Math.floor(g/4294967296),m[(y+128>>>10<<5)+31]=g,p.sigBytes=m.length*4,this._process();var v=this._hash.toX32();return v},clone:function(){var p=s.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});r.SHA512=s._createHelper(h),r.HmacSHA512=s._createHmacHelper(h)}(),n.SHA512})}(Qz)),Qz.exports}var Jz={exports:{}},age;function Xwt(){return age||(age=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),fB(),D3e())})(on,function(n){return function(){var r=n,i=r.x64,s=i.Word,o=i.WordArray,a=r.algo,u=a.SHA512,l=a.SHA384=u.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var c=u._doFinalize.call(this);return c.sigBytes-=16,c}});r.SHA384=u._createHelper(l),r.HmacSHA384=u._createHmacHelper(l)}(),n.SHA384})}(Jz)),Jz.exports}var Zz={exports:{}},uge;function Qwt(){return uge||(uge=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),fB())})(on,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.x64,l=u.Word,c=i.algo,f=[],d=[],h=[];(function(){for(var g=1,y=0,v=0;v<24;v++){f[g+5*y]=(v+1)*(v+2)/2%64;var b=y%5,_=(2*g+3*y)%5;g=b,y=_}for(var g=0;g<5;g++)for(var y=0;y<5;y++)d[g+5*y]=y+(2*g+3*y)%5*5;for(var w=1,S=0;S<24;S++){for(var T=0,A=0,k=0;k<7;k++){if(w&1){var I=(1<<k)-1;I<32?A^=1<<I:T^=1<<I-32}w&128?w=w<<1^113:w<<=1}h[S]=l.create(T,A)}})();var p=[];(function(){for(var g=0;g<25;g++)p[g]=l.create()})();var m=c.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],y=0;y<25;y++)g[y]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,y){for(var v=this._state,b=this.blockSize/2,_=0;_<b;_++){var w=g[y+2*_],S=g[y+2*_+1];w=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360;var T=v[_];T.high^=S,T.low^=w}for(var A=0;A<24;A++){for(var k=0;k<5;k++){for(var I=0,R=0,F=0;F<5;F++){var T=v[k+5*F];I^=T.high,R^=T.low}var O=p[k];O.high=I,O.low=R}for(var k=0;k<5;k++)for(var L=p[(k+4)%5],H=p[(k+1)%5],U=H.high,G=H.low,I=L.high^(U<<1|G>>>31),R=L.low^(G<<1|U>>>31),F=0;F<5;F++){var T=v[k+5*F];T.high^=I,T.low^=R}for(var Y=1;Y<25;Y++){var I,R,T=v[Y],J=T.high,$=T.low,j=f[Y];j<32?(I=J<<j|$>>>32-j,R=$<<j|J>>>32-j):(I=$<<j-32|J>>>64-j,R=J<<j-32|$>>>64-j);var W=p[d[Y]];W.high=I,W.low=R}var B=p[0],q=v[0];B.high=q.high,B.low=q.low;for(var k=0;k<5;k++)for(var F=0;F<5;F++){var Y=k+5*F,T=v[Y],Z=p[Y],re=p[(k+1)%5+5*F],xe=p[(k+2)%5+5*F];T.high=Z.high^~re.high&xe.high,T.low=Z.low^~re.low&xe.low}var T=v[0],pe=h[A];T.high^=pe.high,T.low^=pe.low}},_doFinalize:function(){var g=this._data,y=g.words;this._nDataBytes*8;var v=g.sigBytes*8,b=this.blockSize*32;y[v>>>5]|=1<<24-v%32,y[(r.ceil((v+1)/b)*b>>>5)-1]|=128,g.sigBytes=y.length*4,this._process();for(var _=this._state,w=this.cfg.outputLength/8,S=w/8,T=[],A=0;A<S;A++){var k=_[A],I=k.high,R=k.low;I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,T.push(R),T.push(I)}return new o.init(T,w)},clone:function(){for(var g=a.clone.call(this),y=g._state=this._state.slice(0),v=0;v<25;v++)y[v]=y[v].clone();return g}});i.SHA3=a._createHelper(m),i.HmacSHA3=a._createHmacHelper(m)}(Math),n.SHA3})}(Zz)),Zz.exports}var eV={exports:{}},lge;function Jwt(){return lge||(lge=1,function(e,t){(function(n,r){e.exports=r(Xr())})(on,function(n){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),m=u.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(S,T){for(var A=0;A<16;A++){var k=T+A,I=S[k];S[k]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360}var R=this._hash.words,F=h.words,O=p.words,L=l.words,H=c.words,U=f.words,G=d.words,Y,J,$,j,W,B,q,Z,re,xe;B=Y=R[0],q=J=R[1],Z=$=R[2],re=j=R[3],xe=W=R[4];for(var pe,A=0;A<80;A+=1)pe=Y+S[T+L[A]]|0,A<16?pe+=g(J,$,j)+F[0]:A<32?pe+=y(J,$,j)+F[1]:A<48?pe+=v(J,$,j)+F[2]:A<64?pe+=b(J,$,j)+F[3]:pe+=_(J,$,j)+F[4],pe=pe|0,pe=w(pe,U[A]),pe=pe+W|0,Y=W,W=j,j=w($,10),$=J,J=pe,pe=B+S[T+H[A]]|0,A<16?pe+=_(q,Z,re)+O[0]:A<32?pe+=b(q,Z,re)+O[1]:A<48?pe+=v(q,Z,re)+O[2]:A<64?pe+=y(q,Z,re)+O[3]:pe+=g(q,Z,re)+O[4],pe=pe|0,pe=w(pe,G[A]),pe=pe+xe|0,B=xe,xe=re,re=w(Z,10),Z=q,q=pe;pe=R[1]+$+re|0,R[1]=R[2]+j+xe|0,R[2]=R[3]+W+B|0,R[3]=R[4]+Y+q|0,R[4]=R[0]+J+Z|0,R[0]=pe},_doFinalize:function(){var S=this._data,T=S.words,A=this._nDataBytes*8,k=S.sigBytes*8;T[k>>>5]|=128<<24-k%32,T[(k+64>>>9<<4)+14]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,S.sigBytes=(T.length+1)*4,this._process();for(var I=this._hash,R=I.words,F=0;F<5;F++){var O=R[F];R[F]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}return I},clone:function(){var S=a.clone.call(this);return S._hash=this._hash.clone(),S}});function g(S,T,A){return S^T^A}function y(S,T,A){return S&T|~S&A}function v(S,T,A){return(S|~T)^A}function b(S,T,A){return S&A|T&~A}function _(S,T,A){return S^(T|~A)}function w(S,T){return S<<T|S>>>32-T}i.RIPEMD160=a._createHelper(m),i.HmacRIPEMD160=a._createHmacHelper(m)}(),n.RIPEMD160})}(eV)),eV.exports}var tV={exports:{}},cge;function Ate(){return cge||(cge=1,function(e,t){(function(n,r){e.exports=r(Xr())})(on,function(n){(function(){var r=n,i=r.lib,s=i.Base,o=r.enc,a=o.Utf8,u=r.algo;u.HMAC=s.extend({init:function(l,c){l=this._hasher=new l.init,typeof c=="string"&&(c=a.parse(c));var f=l.blockSize,d=f*4;c.sigBytes>d&&(c=l.finalize(c)),c.clamp();for(var h=this._oKey=c.clone(),p=this._iKey=c.clone(),m=h.words,g=p.words,y=0;y<f;y++)m[y]^=1549556828,g[y]^=909522486;h.sigBytes=p.sigBytes=d,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var c=this._hasher,f=c.finalize(l);c.reset();var d=c.finalize(this._oKey.clone().concat(f));return d}})})()})}(tV)),tV.exports}var nV={exports:{}},fge;function Zwt(){return fge||(fge=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Tte(),Ate())})(on,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.SHA256,l=a.HMAC,c=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,d){for(var h=this.cfg,p=l.create(h.hasher,f),m=o.create(),g=o.create([1]),y=m.words,v=g.words,b=h.keySize,_=h.iterations;y.length<b;){var w=p.update(d).finalize(g);p.reset();for(var S=w.words,T=S.length,A=w,k=1;k<_;k++){A=p.finalize(A),p.reset();for(var I=A.words,R=0;R<T;R++)S[R]^=I[R]}m.concat(w),v[0]++}return m.sigBytes=b*4,m}});r.PBKDF2=function(f,d,h){return c.create(h).compute(f,d)}}(),n.PBKDF2})}(nV)),nV.exports}var rV={exports:{}},dge;function Ab(){return dge||(dge=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),A3e(),Ate())})(on,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.MD5,l=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,f){for(var d,h=this.cfg,p=h.hasher.create(),m=o.create(),g=m.words,y=h.keySize,v=h.iterations;g.length<y;){d&&p.update(d),d=p.update(c).finalize(f),p.reset();for(var b=1;b<v;b++)d=p.finalize(d),p.reset();m.concat(d)}return m.sigBytes=y*4,m}});r.EvpKDF=function(c,f,d){return l.create(d).compute(c,f)}}(),n.EvpKDF})}(rV)),rV.exports}var iV={exports:{}},hge;function Ua(){return hge||(hge=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ab())})(on,function(n){n.lib.Cipher||function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=s.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var c=l.Base64,f=i.algo,d=f.EvpKDF,h=s.Cipher=u.extend({cfg:o.extend(),createEncryptor:function(I,R){return this.create(this._ENC_XFORM_MODE,I,R)},createDecryptor:function(I,R){return this.create(this._DEC_XFORM_MODE,I,R)},init:function(I,R,F){this.cfg=this.cfg.extend(F),this._xformMode=I,this._key=R,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(I){return this._append(I),this._process()},finalize:function(I){I&&this._append(I);var R=this._doFinalize();return R},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function I(R){return typeof R=="string"?k:S}return function(R){return{encrypt:function(F,O,L){return I(O).encrypt(R,F,O,L)},decrypt:function(F,O,L){return I(O).decrypt(R,F,O,L)}}}}()});s.StreamCipher=h.extend({_doFinalize:function(){var I=this._process(!0);return I},blockSize:1});var p=i.mode={},m=s.BlockCipherMode=o.extend({createEncryptor:function(I,R){return this.Encryptor.create(I,R)},createDecryptor:function(I,R){return this.Decryptor.create(I,R)},init:function(I,R){this._cipher=I,this._iv=R}}),g=p.CBC=function(){var I=m.extend();I.Encryptor=I.extend({processBlock:function(F,O){var L=this._cipher,H=L.blockSize;R.call(this,F,O,H),L.encryptBlock(F,O),this._prevBlock=F.slice(O,O+H)}}),I.Decryptor=I.extend({processBlock:function(F,O){var L=this._cipher,H=L.blockSize,U=F.slice(O,O+H);L.decryptBlock(F,O),R.call(this,F,O,H),this._prevBlock=U}});function R(F,O,L){var H,U=this._iv;U?(H=U,this._iv=r):H=this._prevBlock;for(var G=0;G<L;G++)F[O+G]^=H[G]}return I}(),y=i.pad={},v=y.Pkcs7={pad:function(I,R){for(var F=R*4,O=F-I.sigBytes%F,L=O<<24|O<<16|O<<8|O,H=[],U=0;U<O;U+=4)H.push(L);var G=a.create(H,O);I.concat(G)},unpad:function(I){var R=I.words[I.sigBytes-1>>>2]&255;I.sigBytes-=R}};s.BlockCipher=h.extend({cfg:h.cfg.extend({mode:g,padding:v}),reset:function(){var I;h.reset.call(this);var R=this.cfg,F=R.iv,O=R.mode;this._xformMode==this._ENC_XFORM_MODE?I=O.createEncryptor:(I=O.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==I?this._mode.init(this,F&&F.words):(this._mode=I.call(O,this,F&&F.words),this._mode.__creator=I)},_doProcessBlock:function(I,R){this._mode.processBlock(I,R)},_doFinalize:function(){var I,R=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(R.pad(this._data,this.blockSize),I=this._process(!0)):(I=this._process(!0),R.unpad(I)),I},blockSize:128/32});var b=s.CipherParams=o.extend({init:function(I){this.mixIn(I)},toString:function(I){return(I||this.formatter).stringify(this)}}),_=i.format={},w=_.OpenSSL={stringify:function(I){var R,F=I.ciphertext,O=I.salt;return O?R=a.create([1398893684,1701076831]).concat(O).concat(F):R=F,R.toString(c)},parse:function(I){var R,F=c.parse(I),O=F.words;return O[0]==1398893684&&O[1]==1701076831&&(R=a.create(O.slice(2,4)),O.splice(0,4),F.sigBytes-=16),b.create({ciphertext:F,salt:R})}},S=s.SerializableCipher=o.extend({cfg:o.extend({format:w}),encrypt:function(I,R,F,O){O=this.cfg.extend(O);var L=I.createEncryptor(F,O),H=L.finalize(R),U=L.cfg;return b.create({ciphertext:H,key:F,iv:U.iv,algorithm:I,mode:U.mode,padding:U.padding,blockSize:I.blockSize,formatter:O.format})},decrypt:function(I,R,F,O){O=this.cfg.extend(O),R=this._parse(R,O.format);var L=I.createDecryptor(F,O).finalize(R.ciphertext);return L},_parse:function(I,R){return typeof I=="string"?R.parse(I,this):I}}),T=i.kdf={},A=T.OpenSSL={execute:function(I,R,F,O,L){if(O||(O=a.random(64/8)),L)var H=d.create({keySize:R+F,hasher:L}).compute(I,O);else var H=d.create({keySize:R+F}).compute(I,O);var U=a.create(H.words.slice(R),F*4);return H.sigBytes=R*4,b.create({key:H,iv:U,salt:O})}},k=s.PasswordBasedCipher=S.extend({cfg:S.cfg.extend({kdf:A}),encrypt:function(I,R,F,O){O=this.cfg.extend(O);var L=O.kdf.execute(F,I.keySize,I.ivSize,O.salt,O.hasher);O.iv=L.iv;var H=S.encrypt.call(this,I,R,L.key,O);return H.mixIn(L),H},decrypt:function(I,R,F,O){O=this.cfg.extend(O),R=this._parse(R,O.format);var L=O.kdf.execute(F,I.keySize,I.ivSize,R.salt,O.hasher);O.iv=L.iv;var H=S.decrypt.call(this,I,R,L.key,O);return H}})}()})}(iV)),iV.exports}var sV={exports:{}},pge;function e_t(){return pge||(pge=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ua())})(on,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize;i.call(this,s,o,u,a),this._prevBlock=s.slice(o,o+u)}}),r.Decryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=s.slice(o,o+u);i.call(this,s,o,u,a),this._prevBlock=l}});function i(s,o,a,u){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,u.encryptBlock(l,0);for(var f=0;f<a;f++)s[o+f]^=l[f]}return r}(),n.mode.CFB})}(sV)),sV.exports}var oV={exports:{}},mge;function t_t(){return mge||(mge=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ua())})(on,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var f=c.slice(0);a.encryptBlock(f,0),c[u-1]=c[u-1]+1|0;for(var d=0;d<u;d++)s[o+d]^=f[d]}});return r.Decryptor=i,r}(),n.mode.CTR})}(oV)),oV.exports}var aV={exports:{}},gge;function n_t(){return gge||(gge=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ua())})(on,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var u=a>>16&255,l=a>>8&255,c=a&255;u===255?(u=0,l===255?(l=0,c===255?c=0:++c):++l):++u,a=0,a+=u<<16,a+=l<<8,a+=c}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,u){var l=this._cipher,c=l.blockSize,f=this._iv,d=this._counter;f&&(d=this._counter=f.slice(0),this._iv=void 0),s(d);var h=d.slice(0);l.encryptBlock(h,0);for(var p=0;p<c;p++)a[u+p]^=h[p]}});return r.Decryptor=o,r}(),n.mode.CTRGladman})}(aV)),aV.exports}var uV={exports:{}},yge;function r_t(){return yge||(yge=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ua())})(on,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(c,0);for(var f=0;f<u;f++)s[o+f]^=c[f]}});return r.Decryptor=i,r}(),n.mode.OFB})}(uV)),uV.exports}var lV={exports:{}},vge;function i_t(){return vge||(vge=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ua())})(on,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),n.mode.ECB})}(lV)),lV.exports}var cV={exports:{}},bge;function s_t(){return bge||(bge=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ua())})(on,function(n){return n.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,o=i*4,a=o-s%o,u=s+a-1;r.clamp(),r.words[u>>>2]|=a<<24-u%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(cV)),cV.exports}var fV={exports:{}},xge;function o_t(){return xge||(xge=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ua())})(on,function(n){return n.pad.Iso10126={pad:function(r,i){var s=i*4,o=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(fV)),fV.exports}var dV={exports:{}},wge;function a_t(){return wge||(wge=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ua())})(on,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(dV)),dV.exports}var hV={exports:{}},_ge;function u_t(){return _ge||(_ge=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ua())})(on,function(n){return n.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})}(hV)),hV.exports}var pV={exports:{}},Ege;function l_t(){return Ege||(Ege=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ua())})(on,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(pV)),pV.exports}var mV={exports:{}},Sge;function c_t(){return Sge||(Sge=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ua())})(on,function(n){return function(r){var i=n,s=i.lib,o=s.CipherParams,a=i.enc,u=a.Hex,l=i.format;l.Hex={stringify:function(c){return c.ciphertext.toString(u)},parse:function(c){var f=u.parse(c);return o.create({ciphertext:f})}}}(),n.format.Hex})}(mV)),mV.exports}var gV={exports:{}},Cge;function f_t(){return Cge||(Cge=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),q_(),W_(),Ab(),Ua())})(on,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo,a=[],u=[],l=[],c=[],f=[],d=[],h=[],p=[],m=[],g=[];(function(){for(var b=[],_=0;_<256;_++)_<128?b[_]=_<<1:b[_]=_<<1^283;for(var w=0,S=0,_=0;_<256;_++){var T=S^S<<1^S<<2^S<<3^S<<4;T=T>>>8^T&255^99,a[w]=T,u[T]=w;var A=b[w],k=b[A],I=b[k],R=b[T]*257^T*16843008;l[w]=R<<24|R>>>8,c[w]=R<<16|R>>>16,f[w]=R<<8|R>>>24,d[w]=R;var R=I*16843009^k*65537^A*257^w*16843008;h[T]=R<<24|R>>>8,p[T]=R<<16|R>>>16,m[T]=R<<8|R>>>24,g[T]=R,w?(w=A^b[b[b[I^A]]],S^=b[b[S]]):w=S=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],v=o.AES=s.extend({_doReset:function(){var b;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var _=this._keyPriorReset=this._key,w=_.words,S=_.sigBytes/4,T=this._nRounds=S+6,A=(T+1)*4,k=this._keySchedule=[],I=0;I<A;I++)I<S?k[I]=w[I]:(b=k[I-1],I%S?S>6&&I%S==4&&(b=a[b>>>24]<<24|a[b>>>16&255]<<16|a[b>>>8&255]<<8|a[b&255]):(b=b<<8|b>>>24,b=a[b>>>24]<<24|a[b>>>16&255]<<16|a[b>>>8&255]<<8|a[b&255],b^=y[I/S|0]<<24),k[I]=k[I-S]^b);for(var R=this._invKeySchedule=[],F=0;F<A;F++){var I=A-F;if(F%4)var b=k[I];else var b=k[I-4];F<4||I<=4?R[F]=b:R[F]=h[a[b>>>24]]^p[a[b>>>16&255]]^m[a[b>>>8&255]]^g[a[b&255]]}}},encryptBlock:function(b,_){this._doCryptBlock(b,_,this._keySchedule,l,c,f,d,a)},decryptBlock:function(b,_){var w=b[_+1];b[_+1]=b[_+3],b[_+3]=w,this._doCryptBlock(b,_,this._invKeySchedule,h,p,m,g,u);var w=b[_+1];b[_+1]=b[_+3],b[_+3]=w},_doCryptBlock:function(b,_,w,S,T,A,k,I){for(var R=this._nRounds,F=b[_]^w[0],O=b[_+1]^w[1],L=b[_+2]^w[2],H=b[_+3]^w[3],U=4,G=1;G<R;G++){var Y=S[F>>>24]^T[O>>>16&255]^A[L>>>8&255]^k[H&255]^w[U++],J=S[O>>>24]^T[L>>>16&255]^A[H>>>8&255]^k[F&255]^w[U++],$=S[L>>>24]^T[H>>>16&255]^A[F>>>8&255]^k[O&255]^w[U++],j=S[H>>>24]^T[F>>>16&255]^A[O>>>8&255]^k[L&255]^w[U++];F=Y,O=J,L=$,H=j}var Y=(I[F>>>24]<<24|I[O>>>16&255]<<16|I[L>>>8&255]<<8|I[H&255])^w[U++],J=(I[O>>>24]<<24|I[L>>>16&255]<<16|I[H>>>8&255]<<8|I[F&255])^w[U++],$=(I[L>>>24]<<24|I[H>>>16&255]<<16|I[F>>>8&255]<<8|I[O&255])^w[U++],j=(I[H>>>24]<<24|I[F>>>16&255]<<16|I[O>>>8&255]<<8|I[L&255])^w[U++];b[_]=Y,b[_+1]=J,b[_+2]=$,b[_+3]=j},keySize:256/32});r.AES=s._createHelper(v)}(),n.AES})}(gV)),gV.exports}var yV={exports:{}},Tge;function d_t(){return Tge||(Tge=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),q_(),W_(),Ab(),Ua())})(on,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.BlockCipher,a=r.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=o.extend({_doReset:function(){for(var y=this._key,v=y.words,b=[],_=0;_<56;_++){var w=u[_]-1;b[_]=v[w>>>5]>>>31-w%32&1}for(var S=this._subKeys=[],T=0;T<16;T++){for(var A=S[T]=[],k=c[T],_=0;_<24;_++)A[_/6|0]|=b[(l[_]-1+k)%28]<<31-_%6,A[4+(_/6|0)]|=b[28+(l[_+24]-1+k)%28]<<31-_%6;A[0]=A[0]<<1|A[0]>>>31;for(var _=1;_<7;_++)A[_]=A[_]>>>(_-1)*4+3;A[7]=A[7]<<5|A[7]>>>27}for(var I=this._invSubKeys=[],_=0;_<16;_++)I[_]=S[15-_]},encryptBlock:function(y,v){this._doCryptBlock(y,v,this._subKeys)},decryptBlock:function(y,v){this._doCryptBlock(y,v,this._invSubKeys)},_doCryptBlock:function(y,v,b){this._lBlock=y[v],this._rBlock=y[v+1],p.call(this,4,252645135),p.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),p.call(this,1,1431655765);for(var _=0;_<16;_++){for(var w=b[_],S=this._lBlock,T=this._rBlock,A=0,k=0;k<8;k++)A|=f[k][((T^w[k])&d[k])>>>0];this._lBlock=T,this._rBlock=S^A}var I=this._lBlock;this._lBlock=this._rBlock,this._rBlock=I,p.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),y[v]=this._lBlock,y[v+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(y,v){var b=(this._lBlock>>>y^this._rBlock)&v;this._rBlock^=b,this._lBlock^=b<<y}function m(y,v){var b=(this._rBlock>>>y^this._lBlock)&v;this._lBlock^=b,this._rBlock^=b<<y}r.DES=o._createHelper(h);var g=a.TripleDES=o.extend({_doReset:function(){var y=this._key,v=y.words;if(v.length!==2&&v.length!==4&&v.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var b=v.slice(0,2),_=v.length<4?v.slice(0,2):v.slice(2,4),w=v.length<6?v.slice(0,2):v.slice(4,6);this._des1=h.createEncryptor(s.create(b)),this._des2=h.createEncryptor(s.create(_)),this._des3=h.createEncryptor(s.create(w))},encryptBlock:function(y,v){this._des1.encryptBlock(y,v),this._des2.decryptBlock(y,v),this._des3.encryptBlock(y,v)},decryptBlock:function(y,v){this._des3.decryptBlock(y,v),this._des2.encryptBlock(y,v),this._des1.decryptBlock(y,v)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(g)}(),n.TripleDES})}(yV)),yV.exports}var vV={exports:{}},Age;function h_t(){return Age||(Age=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),q_(),W_(),Ab(),Ua())})(on,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=o.RC4=s.extend({_doReset:function(){for(var c=this._key,f=c.words,d=c.sigBytes,h=this._S=[],p=0;p<256;p++)h[p]=p;for(var p=0,m=0;p<256;p++){var g=p%d,y=f[g>>>2]>>>24-g%4*8&255;m=(m+h[p]+y)%256;var v=h[p];h[p]=h[m],h[m]=v}this._i=this._j=0},_doProcessBlock:function(c,f){c[f]^=u.call(this)},keySize:256/32,ivSize:0});function u(){for(var c=this._S,f=this._i,d=this._j,h=0,p=0;p<4;p++){f=(f+1)%256,d=(d+c[f])%256;var m=c[f];c[f]=c[d],c[d]=m,h|=c[(c[f]+c[d])%256]<<24-p*8}return this._i=f,this._j=d,h}r.RC4=s._createHelper(a);var l=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)u.call(this)}});r.RC4Drop=s._createHelper(l)}(),n.RC4})}(vV)),vV.exports}var bV={exports:{}},Dge;function p_t(){return Dge||(Dge=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),q_(),W_(),Ab(),Ua())})(on,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.Rabbit=s.extend({_doReset:function(){for(var d=this._key.words,h=this.cfg.iv,p=0;p<4;p++)d[p]=(d[p]<<8|d[p]>>>24)&16711935|(d[p]<<24|d[p]>>>8)&4278255360;var m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var p=0;p<4;p++)f.call(this);for(var p=0;p<8;p++)g[p]^=m[p+4&7];if(h){var y=h.words,v=y[0],b=y[1],_=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,w=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,S=_>>>16|w&4294901760,T=w<<16|_&65535;g[0]^=_,g[1]^=S,g[2]^=w,g[3]^=T,g[4]^=_,g[5]^=S,g[6]^=w,g[7]^=T;for(var p=0;p<4;p++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,y=m>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.Rabbit=s._createHelper(c)}(),n.Rabbit})}(bV)),bV.exports}var xV={exports:{}},Ige;function m_t(){return Ige||(Ige=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),q_(),W_(),Ab(),Ua())})(on,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.RabbitLegacy=s.extend({_doReset:function(){var d=this._key.words,h=this.cfg.iv,p=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],m=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)f.call(this);for(var g=0;g<8;g++)m[g]^=p[g+4&7];if(h){var y=h.words,v=y[0],b=y[1],_=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,w=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,S=_>>>16|w&4294901760,T=w<<16|_&65535;m[0]^=_,m[1]^=S,m[2]^=w,m[3]^=T,m[4]^=_,m[5]^=S,m[6]^=w,m[7]^=T;for(var g=0;g<4;g++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,y=m>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.RabbitLegacy=s._createHelper(c)}(),n.RabbitLegacy})}(xV)),xV.exports}var wV={exports:{}},kge;function g_t(){return kge||(kge=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),q_(),W_(),Ab(),Ua())})(on,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo;const a=16,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function f(g,y){let v=y>>24&255,b=y>>16&255,_=y>>8&255,w=y&255,S=g.sbox[0][v]+g.sbox[1][b];return S=S^g.sbox[2][_],S=S+g.sbox[3][w],S}function d(g,y,v){let b=y,_=v,w;for(let S=0;S<a;++S)b=b^g.pbox[S],_=f(g,b)^_,w=b,b=_,_=w;return w=b,b=_,_=w,_=_^g.pbox[a],b=b^g.pbox[a+1],{left:b,right:_}}function h(g,y,v){let b=y,_=v,w;for(let S=a+1;S>1;--S)b=b^g.pbox[S],_=f(g,b)^_,w=b,b=_,_=w;return w=b,b=_,_=w,_=_^g.pbox[1],b=b^g.pbox[0],{left:b,right:_}}function p(g,y,v){for(let T=0;T<4;T++){g.sbox[T]=[];for(let A=0;A<256;A++)g.sbox[T][A]=l[T][A]}let b=0;for(let T=0;T<a+2;T++)g.pbox[T]=u[T]^y[b],b++,b>=v&&(b=0);let _=0,w=0,S=0;for(let T=0;T<a+2;T+=2)S=d(g,_,w),_=S.left,w=S.right,g.pbox[T]=_,g.pbox[T+1]=w;for(let T=0;T<4;T++)for(let A=0;A<256;A+=2)S=d(g,_,w),_=S.left,w=S.right,g.sbox[T][A]=_,g.sbox[T][A+1]=w;return!0}var m=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,y=g.words,v=g.sigBytes/4;p(c,y,v)}},encryptBlock:function(g,y){var v=d(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},decryptBlock:function(g,y){var v=h(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(m)}(),n.Blowfish})}(wV)),wV.exports}(function(e,t){(function(n,r,i){e.exports=r(Xr(),fB(),Wwt(),Gwt(),q_(),Ywt(),W_(),A3e(),Tte(),Kwt(),D3e(),Xwt(),Qwt(),Jwt(),Ate(),Zwt(),Ab(),Ua(),e_t(),t_t(),n_t(),r_t(),i_t(),s_t(),o_t(),a_t(),u_t(),l_t(),c_t(),f_t(),d_t(),h_t(),p_t(),m_t(),g_t())})(on,function(n){return n})})(C3e);var HG=C3e.exports;function Lh(e){const t=HG.AES.encrypt(e.toString(),"notSecret").toString();return btoa(t)}function y_t(e){const t=HG.AES.decrypt(atob(e),"notSecret").toString(HG.enc.Utf8);return parseInt(t,10)}function G_(){const{studyId:e}=zm();return`${e}`}function Zd(){const{index:e}=zm();return e===void 0?0:e.startsWith("reviewer-")?e:y_t(e)}function eh(){const e=Zd(),t=Cte();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var QM={exports:{}};QM.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",_="[object RegExp]",w="[object Set]",S="[object String]",T="[object Undefined]",A="[object WeakMap]",k="[object ArrayBuffer]",I="[object DataView]",R="[object Float32Array]",F="[object Float64Array]",O="[object Int8Array]",L="[object Int16Array]",H="[object Int32Array]",U="[object Uint8Array]",G="[object Uint8ClampedArray]",Y="[object Uint16Array]",J="[object Uint32Array]",$=/[\\^$.*+?()[\]{}|]/g,j=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,B={};B[R]=B[F]=B[O]=B[L]=B[H]=B[U]=B[G]=B[Y]=B[J]=!0,B[a]=B[u]=B[k]=B[c]=B[I]=B[f]=B[d]=B[h]=B[m]=B[g]=B[v]=B[_]=B[w]=B[S]=B[A]=!1;var q=typeof on=="object"&&on&&on.Object===Object&&on,Z=typeof self=="object"&&self&&self.Object===Object&&self,re=q||Z||Function("return this")(),xe=t&&!t.nodeType&&t,pe=xe&&!0&&e&&!e.nodeType&&e,Te=pe&&pe.exports===xe,ke=Te&&q.process,it=function(){try{var fe=pe&&pe.require&&pe.require("util").types;return fe||ke&&ke.binding&&ke.binding("util")}catch{}}(),Re=it&&it.isTypedArray;function ut(fe,Se,He){switch(He.length){case 0:return fe.call(Se);case 1:return fe.call(Se,He[0]);case 2:return fe.call(Se,He[0],He[1]);case 3:return fe.call(Se,He[0],He[1],He[2])}return fe.apply(Se,He)}function Ke(fe,Se){for(var He=-1,Qt=Array(fe);++He<fe;)Qt[He]=Se(He);return Qt}function Ct(fe){return function(Se){return fe(Se)}}function gt(fe,Se){return fe==null?void 0:fe[Se]}function Ie(fe,Se){return function(He){return fe(Se(He))}}var Ve=Array.prototype,ft=Function.prototype,_t=Object.prototype,Mt=re["__core-js_shared__"],st=ft.toString,X=_t.hasOwnProperty,de=function(){var fe=/[^.]+$/.exec(Mt&&Mt.keys&&Mt.keys.IE_PROTO||"");return fe?"Symbol(src)_1."+fe:""}(),we=_t.toString,ae=st.call(Object),he=RegExp("^"+st.call(X).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ee=Te?re.Buffer:void 0,$e=re.Symbol,Be=re.Uint8Array;Ee&&Ee.allocUnsafe;var lt=Ie(Object.getPrototypeOf,Object),Je=Object.create,Xt=_t.propertyIsEnumerable,fn=Ve.splice,Wt=$e?$e.toStringTag:void 0,an=function(){try{var fe=yt(Object,"defineProperty");return fe({},"",{}),fe}catch{}}(),Sn=Ee?Ee.isBuffer:void 0,Mn=Math.max,ki=Date.now,di=yt(re,"Map"),Li=yt(Object,"create"),As=function(){function fe(){}return function(Se){if(!lh(Se))return{};if(Je)return Je(Se);fe.prototype=Se;var He=new fe;return fe.prototype=void 0,He}}();function Lr(fe){var Se=-1,He=fe==null?0:fe.length;for(this.clear();++Se<He;){var Qt=fe[Se];this.set(Qt[0],Qt[1])}}function ls(){this.__data__=Li?Li(null):{},this.size=0}function ll(fe){var Se=this.has(fe)&&delete this.__data__[fe];return this.size-=Se?1:0,Se}function Fo(fe){var Se=this.__data__;if(Li){var He=Se[fe];return He===r?void 0:He}return X.call(Se,fe)?Se[fe]:void 0}function Ha(fe){var Se=this.__data__;return Li?Se[fe]!==void 0:X.call(Se,fe)}function Rr(fe,Se){var He=this.__data__;return this.size+=this.has(fe)?0:1,He[fe]=Li&&Se===void 0?r:Se,this}Lr.prototype.clear=ls,Lr.prototype.delete=ll,Lr.prototype.get=Fo,Lr.prototype.has=Ha,Lr.prototype.set=Rr;function Ri(fe){var Se=-1,He=fe==null?0:fe.length;for(this.clear();++Se<He;){var Qt=fe[Se];this.set(Qt[0],Qt[1])}}function hi(){this.__data__=[],this.size=0}function Vs(fe){var Se=this.__data__,He=ir(Se,fe);if(He<0)return!1;var Qt=Se.length-1;return He==Qt?Se.pop():fn.call(Se,He,1),--this.size,!0}function ri(fe){var Se=this.__data__,He=ir(Se,fe);return He<0?void 0:Se[He][1]}function Ni(fe){return ir(this.__data__,fe)>-1}function ve(fe,Se){var He=this.__data__,Qt=ir(He,fe);return Qt<0?(++this.size,He.push([fe,Se])):He[Qt][1]=Se,this}Ri.prototype.clear=hi,Ri.prototype.delete=Vs,Ri.prototype.get=ri,Ri.prototype.has=Ni,Ri.prototype.set=ve;function ce(fe){var Se=-1,He=fe==null?0:fe.length;for(this.clear();++Se<He;){var Qt=fe[Se];this.set(Qt[0],Qt[1])}}function _e(){this.size=0,this.__data__={hash:new Lr,map:new(di||Ri),string:new Lr}}function Ue(fe){var Se=pt(this,fe).delete(fe);return this.size-=Se?1:0,Se}function je(fe){return pt(this,fe).get(fe)}function Dt(fe){return pt(this,fe).has(fe)}function Ht(fe,Se){var He=pt(this,fe),Qt=He.size;return He.set(fe,Se),this.size+=He.size==Qt?0:1,this}ce.prototype.clear=_e,ce.prototype.delete=Ue,ce.prototype.get=je,ce.prototype.has=Dt,ce.prototype.set=Ht;function bn(fe){var Se=this.__data__=new Ri(fe);this.size=Se.size}function rr(){this.__data__=new Ri,this.size=0}function mr(fe){var Se=this.__data__,He=Se.delete(fe);return this.size=Se.size,He}function jn(fe){return this.__data__.get(fe)}function Ar(fe){return this.__data__.has(fe)}function ii(fe,Se){var He=this.__data__;if(He instanceof Ri){var Qt=He.__data__;if(!di||Qt.length<n-1)return Qt.push([fe,Se]),this.size=++He.size,this;He=this.__data__=new ce(Qt)}return He.set(fe,Se),this.size=He.size,this}bn.prototype.clear=rr,bn.prototype.delete=mr,bn.prototype.get=jn,bn.prototype.has=Ar,bn.prototype.set=ii;function dn(fe,Se){var He=ah(fe),Qt=!He&&vu(fe),xr=!He&&!Qt&&uh(fe),ai=!He&&!Qt&&!xr&&wE(fe),Bi=He||Qt||xr||ai,xn=Bi?Ke(fe.length,String):[],Ei=xn.length;for(var ji in fe)Bi&&(ji=="length"||xr&&(ji=="offset"||ji=="parent")||ai&&(ji=="buffer"||ji=="byteLength"||ji=="byteOffset")||zt(ji,Ei))||xn.push(ji);return xn}function Dr(fe,Se,He){(He!==void 0&&!cl(fe[Se],He)||He===void 0&&!(Se in fe))&&un(fe,Se,He)}function Qr(fe,Se,He){var Qt=fe[Se];(!(X.call(fe,Se)&&cl(Qt,He))||He===void 0&&!(Se in fe))&&un(fe,Se,He)}function ir(fe,Se){for(var He=fe.length;He--;)if(cl(fe[He][0],Se))return He;return-1}function un(fe,Se,He){Se=="__proto__"&&an?an(fe,Se,{configurable:!0,enumerable:!0,value:He,writable:!0}):fe[Se]=He}var Br=Xe();function Pi(fe){return fe==null?fe===void 0?T:y:Wt&&Wt in Object(fe)?vt(fe):Ko(fe)}function Ds(fe){return xa(fe)&&Pi(fe)==a}function _i(fe){if(!lh(fe)||gr(fe))return!1;var Se=ex(fe)?he:j;return Se.test(Jb(fe))}function ns(fe){return xa(fe)&&xE(fe.length)&&!!B[Pi(fe)]}function Yo(fe){if(!lh(fe))return Nr(fe);var Se=si(fe),He=[];for(var Qt in fe)Qt=="constructor"&&(Se||!X.call(fe,Qt))||He.push(Qt);return He}function qa(fe,Se,He,Qt,xr){fe!==Se&&Br(Se,function(ai,Bi){if(xr||(xr=new bn),lh(ai))Mo(fe,Se,Bi,He,qa,Qt,xr);else{var xn=Qt?Qt(oh(fe,Bi),ai,Bi+"",fe,Se,xr):void 0;xn===void 0&&(xn=ai),Dr(fe,Bi,xn)}},k0)}function Mo(fe,Se,He,Qt,xr,ai,Bi){var xn=oh(fe,He),Ei=oh(Se,He),ji=Bi.get(Ei);if(ji){Dr(fe,He,ji);return}var Xo=ai?ai(xn,Ei,He+"",fe,Se,Bi):void 0,ch=Xo===void 0;if(ch){var Zs=ah(Ei),R0=!Zs&&uh(Ei),N0=!Zs&&!R0&&wE(Ei);Xo=Ei,Zs||R0||N0?ah(xn)?Xo=xn:Zb(xn)?Xo=De(xn):R0?(ch=!1,Xo=te(Ei)):N0?(ch=!1,Xo=ue(Ei)):Xo=[]:HA(Ei)||vu(Ei)?(Xo=xn,vu(xn)?Xo=I0(xn):(!lh(xn)||ex(xn))&&(Xo=It(Ei))):ch=!1}ch&&(Bi.set(Ei,Xo),xr(Xo,Ei,Qt,ai,Bi),Bi.delete(Ei)),Dr(fe,He,Xo)}function Jl(fe,Se){return zy(nf(fe,Se,jr),fe+"")}var Jf=an?function(fe,Se){return an(fe,"toString",{configurable:!0,enumerable:!1,value:oi(Se),writable:!0})}:jr;function te(fe,Se){return fe.slice()}function be(fe){var Se=new fe.constructor(fe.byteLength);return new Be(Se).set(new Be(fe)),Se}function ue(fe,Se){var He=be(fe.buffer);return new fe.constructor(He,fe.byteOffset,fe.length)}function De(fe,Se){var He=-1,Qt=fe.length;for(Se||(Se=Array(Qt));++He<Qt;)Se[He]=fe[He];return Se}function Pe(fe,Se,He,Qt){var xr=!He;He||(He={});for(var ai=-1,Bi=Se.length;++ai<Bi;){var xn=Se[ai],Ei=void 0;Ei===void 0&&(Ei=fe[xn]),xr?un(He,xn,Ei):Qr(He,xn,Ei)}return He}function Ae(fe){return Jl(function(Se,He){var Qt=-1,xr=He.length,ai=xr>1?He[xr-1]:void 0,Bi=xr>2?He[2]:void 0;for(ai=fe.length>3&&typeof ai=="function"?(xr--,ai):void 0,Bi&&Xn(He[0],He[1],Bi)&&(ai=xr<3?void 0:ai,xr=1),Se=Object(Se);++Qt<xr;){var xn=He[Qt];xn&&fe(Se,xn,Qt,ai)}return Se})}function Xe(fe){return function(Se,He,Qt){for(var xr=-1,ai=Object(Se),Bi=Qt(Se),xn=Bi.length;xn--;){var Ei=Bi[++xr];if(He(ai[Ei],Ei,ai)===!1)break}return Se}}function pt(fe,Se){var He=fe.__data__;return nn(Se)?He[typeof Se=="string"?"string":"hash"]:He.map}function yt(fe,Se){var He=gt(fe,Se);return _i(He)?He:void 0}function vt(fe){var Se=X.call(fe,Wt),He=fe[Wt];try{fe[Wt]=void 0;var Qt=!0}catch{}var xr=we.call(fe);return Qt&&(Se?fe[Wt]=He:delete fe[Wt]),xr}function It(fe){return typeof fe.constructor=="function"&&!si(fe)?As(lt(fe)):{}}function zt(fe,Se){var He=typeof fe;return Se=Se??o,!!Se&&(He=="number"||He!="symbol"&&W.test(fe))&&fe>-1&&fe%1==0&&fe<Se}function Xn(fe,Se,He){if(!lh(He))return!1;var Qt=typeof Se;return(Qt=="number"?Vy(He)&&zt(Se,He.length):Qt=="string"&&Se in He)?cl(He[Se],fe):!1}function nn(fe){var Se=typeof fe;return Se=="string"||Se=="number"||Se=="symbol"||Se=="boolean"?fe!=="__proto__":fe===null}function gr(fe){return!!de&&de in fe}function si(fe){var Se=fe&&fe.constructor,He=typeof Se=="function"&&Se.prototype||_t;return fe===He}function Nr(fe){var Se=[];if(fe!=null)for(var He in Object(fe))Se.push(He);return Se}function Ko(fe){return we.call(fe)}function nf(fe,Se,He){return Se=Mn(Se===void 0?fe.length-1:Se,0),function(){for(var Qt=arguments,xr=-1,ai=Mn(Qt.length-Se,0),Bi=Array(ai);++xr<ai;)Bi[xr]=Qt[Se+xr];xr=-1;for(var xn=Array(Se+1);++xr<Se;)xn[xr]=Qt[xr];return xn[Se]=He(Bi),ut(fe,this,xn)}}function oh(fe,Se){if(!(Se==="constructor"&&typeof fe[Se]=="function")&&Se!="__proto__")return fe[Se]}var zy=$p(Jf);function $p(fe){var Se=0,He=0;return function(){var Qt=ki(),xr=s-(Qt-He);if(He=Qt,xr>0){if(++Se>=i)return arguments[0]}else Se=0;return fe.apply(void 0,arguments)}}function Jb(fe){if(fe!=null){try{return st.call(fe)}catch{}try{return fe+""}catch{}}return""}function cl(fe,Se){return fe===Se||fe!==fe&&Se!==Se}var vu=Ds(function(){return arguments}())?Ds:function(fe){return xa(fe)&&X.call(fe,"callee")&&!Xt.call(fe,"callee")},ah=Array.isArray;function Vy(fe){return fe!=null&&xE(fe.length)&&!ex(fe)}function Zb(fe){return xa(fe)&&Vy(fe)}var uh=Sn||EE;function ex(fe){if(!lh(fe))return!1;var Se=Pi(fe);return Se==h||Se==p||Se==l||Se==b}function xE(fe){return typeof fe=="number"&&fe>-1&&fe%1==0&&fe<=o}function lh(fe){var Se=typeof fe;return fe!=null&&(Se=="object"||Se=="function")}function xa(fe){return fe!=null&&typeof fe=="object"}function HA(fe){if(!xa(fe)||Pi(fe)!=v)return!1;var Se=lt(fe);if(Se===null)return!0;var He=X.call(Se,"constructor")&&Se.constructor;return typeof He=="function"&&He instanceof He&&st.call(He)==ae}var wE=Re?Ct(Re):ns;function I0(fe){return Pe(fe,k0(fe))}function k0(fe){return Vy(fe)?dn(fe):Yo(fe)}var _E=Ae(function(fe,Se,He){qa(fe,Se,He)});function oi(fe){return function(){return fe}}function jr(fe){return fe}function EE(){return!1}e.exports=_E})(QM,QM.exports);var v_t=QM.exports;const Dte=l0(v_t);function Pg(e){return structuredClone(e)}function Ite(){const e=Zd(),n=`${eh()}_${e}`;return vi(i=>i.answers[n])}const I3e=N.createContext(null);function b_t(){const e=N.useContext(I3e);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function ey(){return vi(e=>e.config)}function HT(){const[e]=Sb();return!!e.get("participantId")}function Rge(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function k3e(){const e=Zd(),t=Cte(),r=`${eh()}_${e}`,i=vi(k=>k.trialValidation),s=vi(k=>k.sequence),o=vi(k=>k.answers),a=vi(k=>k.modes),u=Jc(),{saveTrialAnswer:l,setIframeAnswers:c,setMatrixAnswersRadio:f,setMatrixAnswersCheckbox:d}=Bl(),{storageEngine:h}=Po(),p=G_(),m=N.useMemo(()=>a.dataCollectionEnabled,[a]),g=zwt(r),y=HT(),v=typeof e!="number"||y||!g,b=Ite(),_=Ep(),w=ey(),S=N.useMemo(()=>Date.now(),[]),T=b_t(),A=N.useCallback((k=!0)=>{if(typeof e!="number")return;const I=Pg(i[r]),R=Object.values(I).reduce((j,W)=>Object.hasOwn(W,"values")?{...j,...W.values}:j,{}),{provenanceGraph:F}=I,O=Date.now(),{incorrectAnswers:L,helpButtonClickedCount:H}=b,U=T&&"current"in T&&T.current?T.current.splice(0,T.current.length):[];if(m&&b.endTime===-1){const j={answer:k?R:{},startTime:S,endTime:O,incorrectAnswers:L,provenanceGraph:F,windowEvents:U,timedOut:!k,helpButtonClickedCount:H};u(l({identifier:r,...j})),h&&h.saveAnswers({...o,[r]:j}),u(c({})),u(d(null)),u(f(null))}let G=e+1;const Y=Ete(s,e),J=Y!==null&&Y.some(j=>Object.hasOwn(j.currentBlock,"skip")&&j.currentBlock.skip!==void 0),$={...o,[r]:{answer:R,startTime:S,endTime:O,provenanceGraph:F,windowEvents:U}};J&&[...Y.flatMap(W=>W.currentBlock.skip?W.currentBlock.skip.map(B=>({...B,firstIndex:W.firstIndex,lastIndex:W.lastIndex})):[])].some(W=>{let B=!1;const q=Object.fromEntries(Object.entries($).filter(([re])=>{const xe=parseInt(re.slice(re.lastIndexOf("_")+1),10);return xe>=W.firstIndex&&xe<=e})),Z=W.check!=="block"?Object.entries(q).filter(([re])=>re.slice(0,re.lastIndexOf("_"))===W.name):Object.entries(q);if(Z.length===0)return!1;if(Z.some(([re,xe])=>!xe))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(W,null,2)}`);if(W.check==="response"||W.check==="responses"){const[re,xe]=Z[0];W.check==="response"?B=W.comparison==="equal"?W.value===xe.answer[W.responseId]:W.value!==xe.answer[W.responseId]:B=!Rge(xe.answer,re,w.components[re.slice(0,re.lastIndexOf("_"))],w)}else if(W.check==="block"||W.check==="repeatedComponent"){if(Z.length<W.value)return!1;const re=Z.map(([Te,ke])=>Rge(ke.answer,Te,w.components[Te.slice(0,Te.lastIndexOf("_"))],w)),xe=re.filter(Te=>Te).length,pe=re.length-xe;B=W.condition==="numCorrect"&&xe===W.value||W.condition==="numIncorrect"&&pe===W.value}if(B){const re=t.indexOf(W.to),xe=re===-1?jwt(s,W.to):-1;return G=re===-1?xe:re,!0}return!1}),_(`/${p}/${Lh(G)}${window.location.search}`)},[e,i,r,T,m,b,s,o,S,_,p,u,l,h,c,d,f,w,t]);return{isNextDisabled:v,goToNextStep:A}}function x_t({label:e="Next",disabled:t=!1,onClick:n,configInUse:r}){const{isNextDisabled:i,goToNextStep:s}=k3e(),o=ey(),a=Ep(),u=N.useCallback(()=>{n&&n(),s()},[s,n]),l=r==null?void 0:r.nextButtonDisableTime,c=(r==null?void 0:r.nextButtonEnableTime)||0,[f,d]=N.useState(void 0);N.useEffect(()=>{let p=0;const m=setInterval(()=>{p+=100,d(p)},100);return()=>{clearInterval(m)}},[]),N.useEffect(()=>{f&&l&&f>=l&&o.uiConfig.timeoutReject&&a("./__timeout")},[l,f,a,o.uiConfig.timeoutReject]);const h=N.useMemo(()=>{const p=l&&f?f<=l:!0,m=f?f>=c:!0;return p&&m},[l,c,f]);return E.jsxs(E.Fragment,{children:[E.jsx(_n,{type:"submit",disabled:t||i||!h,onClick:u,children:e}),c>0&&f&&f<c&&E.jsxs(Ng,{mt:"md",title:"Please wait",color:"blue",icon:E.jsx(Kee,{}),children:["The next button will be enabled in"," ",Math.ceil((c-f)/1e3)," ","seconds."]}),l&&f&&l-f<1e4&&(l-f>0?E.jsxs(Ng,{mt:"md",title:"Next button disables soon",color:"yellow",icon:E.jsx(fk,{}),children:["The next button disables in"," ",Math.ceil((l-f)/1e3)," ","seconds."]}):!o.uiConfig.timeoutReject&&E.jsxs(Ng,{mt:"md",title:"Next button disabled",color:"red",icon:E.jsx(fk,{}),children:["The next button has timed out and is now disabled.",E.jsx($i,{justify:"right",mt:"sm",children:E.jsx(_n,{onClick:()=>s(!1),variant:"link",color:"red",children:"Proceed"})})]}))]})}function w_t(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const __t=typeof window<"u"?N.useLayoutEffect:N.useEffect;function Ga(e,t){__t(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function E_t(e,t){e&&w_t(e),Ga(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),Ga(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),Ga(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),Ga(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),Ga(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),Ga(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),Ga(`mantine-form:${e}:clear-errors`,t.clearErrors),Ga(`mantine-form:${e}:reset`,t.reset),Ga(`mantine-form:${e}:validate`,t.validate),Ga(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),Ga(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),Ga(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),Ga(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),Ga(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),Ga(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),Ga(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),Ga(`mantine-form:${e}:reset-touched`,t.resetTouched)}function S_t(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function qG(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function C_t(e){const[t,n]=N.useState(qG(e)),r=N.useRef(t),i=N.useCallback(u=>{n(l=>{const c=qG(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=N.useCallback(()=>i({}),[]),o=N.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=N.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function R3e(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Nge(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Pge(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=R3e(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Nge(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Nge(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function T_t(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Oge(e,t,n){typeof n.value=="object"&&(n.value=G2(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function G2(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(G2(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(G2(a),G2(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(G2(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Oge(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Oge(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function N3e(e){return typeof e!="string"?[]:e.split(".")}function Sc(e,t){const n=N3e(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function dB(e,t,n){const r=N3e(e);if(r.length===0)return n;const i=G2(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function A_t(e,{from:t,to:n},r){const i=Sc(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),dB(e,s,r)}function D_t(e,t,n,r){const i=Sc(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),dB(e,s,r)}function I_t(e,t,n){const r=Sc(e,n);return Array.isArray(r)?dB(e,r.filter((i,s)=>s!==t),n):n}function k_t({$values:e,$errors:t,$status:n}){const r=N.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>T_t(o,a,u)),e.setValues({values:A_t(o,a,e.refValues.current),updateState:!0})},[]),i=N.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Pge(o,a,u,-1)),e.setValues({values:I_t(o,a,e.refValues.current),updateState:!0})},[]),s=N.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>Pge(o,u,l,1)),e.setValues({values:D_t(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var kte=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const iF=l0(kte);function h4(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function R_t({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=N.useState(t),[o,a]=N.useState(e),u=N.useRef(t),l=N.useRef(e),c=N.useCallback(w=>{const S=typeof w=="function"?w(u.current):w;u.current=S,n==="controlled"&&s(S)},[]),f=N.useCallback(w=>{const S=typeof w=="function"?w(l.current):w;l.current=S,n==="controlled"&&a(S)},[]),d=N.useCallback(()=>c({}),[]),h=w=>{const S=w?{...w,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(S),f({})},p=N.useCallback((w,S)=>{c(T=>h4(T,w)===S?T:{...T,[w]:S})},[]),m=N.useCallback((w,S)=>{f(T=>h4(T,w)===S?T:{...T,[w]:S})},[]),g=N.useCallback(w=>h4(u.current,w),[]),y=N.useCallback(w=>f(S=>{if(typeof w!="string")return S;const T=R3e(w,S);return delete T[w],iF(T,S)?S:T}),[]),v=N.useCallback(w=>{if(w){const T=Sc(w,l.current);if(typeof T=="boolean")return T;const A=Sc(w,r.refValues.current),k=Sc(w,r.valuesSnapshot.current);return!iF(A,k)}return Object.keys(l.current).length>0?h4(l.current):!iF(r.refValues.current,r.valuesSnapshot.current)},[]),b=N.useCallback(()=>l.current,[]),_=N.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:_}}function N_t({initialValues:e,onValuesChange:t,mode:n}){const r=N.useRef(!1),[i,s]=N.useState(e||{}),o=N.useRef(i),a=N.useRef(i),u=N.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,_=y?{...v,...b}:b;o.current=_,g&&s(_),t==null||t(_,v),m==null||m.filter(Boolean).forEach(w=>w({updatedValues:_,previousValues:v}))},[t]),l=N.useCallback(p=>{var y;const m=Sc(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=dB(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(_=>_({path:p.path,updatedValues:b,previousValues:v}))}},[]),c=N.useCallback(p=>{a.current=p},[]),f=N.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=N.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=N.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function P_t({$status:e}){const t=N.useRef({}),n=N.useCallback((i,s)=>{N.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=N.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Sc(i,o.previousValues),value:Sc(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Fge(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Mge(e){const t=qG(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function WG(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Sc(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>WG(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||WG(o,t,a,i)),i},r)}function GG(e,t){return Mge(typeof e=="function"?e(t):WG(e,t))}function p4(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=GG(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const O_t="__MANTINE_FORM_INDEX__";function $ge(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${O_t}`)):!1:!1}function P3e({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=C_t(r),p=N_t({initialValues:n,onValuesChange:l,mode:t}),m=R_t({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=k_t({$values:p,$errors:h,$status:m}),y=P_t({$status:m}),[v,b]=N.useState(0),[_,w]=N.useState({}),S=N.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b($=>$+1)},[]),T=N.useCallback($=>{p.initialize($,()=>t==="uncontrolled"&&b(j=>j+1))},[]),A=N.useCallback(($,j,W)=>{const B=$ge($,a);m.clearFieldDirty($),m.setFieldTouched($,!0),!B&&o&&h.clearFieldError($),p.setFieldValue({path:$,value:j,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers($),B?q=>{const Z=p4($,d,q.updatedValues);Z.hasError?h.setFieldError($,Z.error):h.clearFieldError($)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>w(q=>({...q,[$]:(q[$]||0)+1})):null]})},[l,d]),k=N.useCallback($=>{const j=p.refValues.current;p.setValues({values:$,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const B=Sc(W,p.refValues.current),q=Sc(W,j);B!==q&&y.getFieldSubscribers(W).forEach(Z=>Z({previousValues:j,updatedValues:p.refValues.current}))})},[l,o]),I=N.useCallback(()=>{const $=GG(d,p.refValues.current);return h.setErrors($.errors),$},[d]),R=N.useCallback($=>{const j=p4($,d,p.refValues.current);return j.hasError?h.setFieldError($,j.error):h.clearFieldError($),j},[d]),F=($,{type:j="input",withError:W=!0,withFocus:B=!0,...q}={})=>{const re={onChange:S_t(xe=>A($,xe,{forceUpdate:!1})),"data-path":Fge(e,$)};return W&&(re.error=h.errorsState[$]),j==="checkbox"?re[t==="controlled"?"checked":"defaultChecked"]=Sc($,p.refValues.current):re[t==="controlled"?"value":"defaultValue"]=Sc($,p.refValues.current),B&&(re.onFocus=()=>m.setFieldTouched($,!0),re.onBlur=()=>{if($ge($,u)){const xe=p4($,d,p.refValues.current);xe.hasError?h.setFieldError($,xe.error):h.clearFieldError($)}}),Object.assign(re,f==null?void 0:f({inputProps:re,field:$,options:{type:j,withError:W,withFocus:B,...q},form:J}))},O=($,j)=>W=>{W==null||W.preventDefault();const B=I();B.hasErrors?j==null||j(B.errors,p.refValues.current,W):$==null||$(c(p.refValues.current),W)},L=$=>c($||p.refValues.current),H=N.useCallback($=>{$.preventDefault(),S()},[]),U=N.useCallback($=>$?!p4($,d,p.refValues.current).hasError:!GG(d,p.refValues.current).hasErrors,[d]),G=$=>`${v}-${$}-${_[$]||0}`,Y=N.useCallback($=>document.querySelector(`[data-path="${Fge(e,$)}"]`),[]),J={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:T,setValues:k,setFieldValue:A,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:S,validate:I,validateField:R,getInputProps:F,onSubmit:O,onReset:H,isValid:U,getTransformedValues:L,key:G,getInputNode:Y};return E_t(e,J),J}function F_t(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function M_t(e){return F_t(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function O3e(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const $_t=new URLSearchParams(window.location.search),L_t=(e,t)=>{let n={};return e.forEach(r=>{const i=t[r.id];if(i)n={...n,[r.id]:i};else{let s="";r.paramCapture?s=$_t.get(r.paramCapture):r.type==="iframe"?s=[]:(r.type==="matrix-radio"||r.type==="matrix-checkbox")&&(s=Object.fromEntries(r.questionOptions.map(o=>[o,""]))),n={...n,[r.id]:s}}}),{...n}},B_t=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return Object.values(r).every(i=>i!=="")?null:"Empty Input";if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return n.type==="checkbox"?O3e(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function j_t(e,t,n){const[r,i]=N.useState(null),s=P3e({initialValues:L_t(e,n),validate:B_t(e)});return N.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Y_(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=O3e(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function U_t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=a.map(c=>typeof c=="string"?{value:c,label:c}:c);return E.jsx(Ec.Group,{label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(Zu,{text:s,required:o})})]}),description:u,...n,error:Y_(e,n,l),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:E.jsx($i,{mt:"xs",children:l.map(c=>E.jsx(Ec,{disabled:t,value:c.value,label:c.label},c.value))})})}function z_t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return E.jsx(OT,{disabled:t,label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(Zu,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:Y_(e,n,c)})}function V_t({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return E.jsx(mo.Wrapper,{label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${n}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(Zu,{text:i,required:s})})]}),description:o,size:"md",children:t.value&&E.jsx(Uu,{children:Array.isArray(t.value)?t.value.map(a=>E.jsx(Uu.Item,{children:a},a)):E.jsx(Uu.Item,{children:t.value})})})}function F3e({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,stretch:s}){const{prompt:o,required:a,options:u,leftLabel:l,rightLabel:c,secondaryText:f}=e,d=u.map(h=>typeof h=="string"?{value:h,label:h}:h);return E.jsx(Qg.Group,{name:`radioInput${e.id}`,label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(Zu,{text:o,required:a})})]}),description:f,...n,error:Y_(e,n,d),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:E.jsxs($i,{mt:"md",gap:"lg",style:{display:"flex",alignItems:"flex-end",justifyContent:s?"space-around":"inherit"},children:[l?E.jsx(tt,{children:l}):null,d.map(h=>E.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[E.jsx(tt,{children:h.label}),E.jsx(Qg,{disabled:t,value:h.value,label:h.label,styles:{label:{display:"none"}}})]},h.label)),E.jsx(tt,{children:c})]})},e.id)}function H_t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return E.jsx(F3e,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i,stretch:!0})}function q_t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return E.jsx(Tee,{disabled:t,placeholder:l,label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(Zu,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:Y_(e,n)})}function W_t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,[l,c]=N.useMemo(()=>[Math.min(...a.map(d=>d.value)),Math.max(...a.map(d=>d.value))],[a]),f=Y_(e,n);return E.jsx(mo.Wrapper,{label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(Zu,{text:s,required:o})})]}),description:u,error:f,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:E.jsx(FT,{disabled:t,marks:a,min:l,max:c,...n,h:40})})}function G_t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return E.jsx(bg,{disabled:t,placeholder:s,label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(Zu,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Y_(e,n)})}function Y_t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return E.jsx(hee,{disabled:t,placeholder:s,label:E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${r}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(Zu,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Y_(e,n)})}function K_t({_choices:e,_n:t,idx:n,question:r,answer:i,onChange:s,disabled:o}){return E.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(a=>E.jsx(Ec,{disabled:o,checked:i.value[r.label].split("|").includes(a.value),onChange:u=>s(u,r.label,a),value:a.value},`${a.label}-${n}`))})}function X_t({_choices:e,_n:t,idx:n,question:r,response:i,answer:s,onChange:o,disabled:a}){return E.jsx(Qg.Group,{name:`radioInput${i.id}-${n}`,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))",flex:1},onChange:u=>o(u,r.label),value:s.value[r.label],children:E.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(u=>E.jsx(Qg,{disabled:a,value:u.value},`${u.label}-${n}`))})},`${i.id}-${n}`)}function Q_t({response:e,answer:t,index:n,disabled:r,enumerateQuestions:i}){const{setMatrixAnswersRadio:s,setMatrixAnswersCheckbox:o}=Bl(),a=Jc(),{answerOptions:u,questionOptions:l,prompt:c,required:f}=e,h=typeof u=="string"?{likely5:["Highly Unlikely","Unlikely","Neutral","Likely","Highly Likely"],likely7:["Highly Unlikely","Unlikely","Slightly Unlikely","Neutral","Slightly Likely","Likely","Highly Likely"],satisfaction5:["Highly Unsatisfied","Unsatisfied","Neutral","Satisfied","Highly Satisfied"],satisfaction7:["Highly Unsatisfied","Unsatisfied","Slightly Unsatisfied","Neutral","Slightly Satisfied","Satisfied","Highly Satisfied"]}[u].map(b=>({value:b,label:b})):u.map(b=>typeof b=="string"?{value:b,label:b}:b),p=l.map(b=>typeof b=="string"?{value:b,label:b}:b),m=(b,_)=>{const w={type:"radio",questionKey:_,val:b,responseId:e.id};a(s(w))},g=(b,_,w)=>{const S=b.target.checked,T={questionKey:_,responseId:e.id,value:w.value,label:w.label,isChecked:S,choiceOptions:h};a(o(T))},y=h.length,v=p.length;return E.jsxs(E.Fragment,{children:[E.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:0,children:[i&&E.jsx(Fe,{style:{minWidth:"fit-content"},children:`${n}. `}),E.jsx(Fe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:E.jsx(Zu,{text:c,required:f})})]}),E.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto 1fr",margin:"40px 100px 100px 100px"},children:[E.jsx("div",{style:{borderBottom:"1px solid var(--mantine-color-dark-0)",borderRight:"1px solid var(--mantine-color-dark-0)"}}),E.jsx("div",{style:{height:"100%",display:"grid",gridTemplateColumns:`repeat(${y}, 1fr)`,alignItems:"center",justifyItems:"center",borderBottom:"1px solid var(--mantine-color-dark-0)"},children:h.map((b,_)=>E.jsx(tt,{style:{fontWeight:"bold",textAlign:"center",fontSize:"0.8em"},mb:"sm",ml:"xs",mr:"xs",children:b.label},`choice-${_}-label`))}),E.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${v}, 1fr)`},children:p.map((b,_)=>E.jsx(tt,{style:{height:"60px",display:"flex",alignItems:"center",borderRight:"1px solid var(--mantine-color-dark-0)",backgroundColor:`${(_+1)%2===0?"var(--mantine-color-gray-2)":"white"}`,paddingLeft:"10px"},children:b.label},`question-${_}-label`))}),E.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${v},1fr)`},children:p.map((b,_)=>E.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",backgroundColor:`${(_+1)%2===0?"var(--mantine-color-gray-2)":"white"}`},children:e.type==="matrix-radio"?E.jsx(X_t,{disabled:r,idx:_,question:b,answer:t,_choices:h,_n:y,onChange:m,response:e}):E.jsx(K_t,{disabled:r,idx:_,question:b,answer:t,_choices:h,_n:y,onChange:g})},`question-${_}`))})]})]})}function J_t({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=Sb(),u=ey().uiConfig.enumerateQuestions??!1,l=N.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return E.jsxs(Fe,{mb:"md",children:[e.type==="numerical"&&E.jsx(q_t,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&E.jsx(G_t,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&E.jsx(Y_t,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&E.jsx(H_t,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&E.jsx(z_t,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&E.jsx(W_t,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&E.jsx(F3e,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&E.jsx(U_t,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&E.jsx(V_t,{response:e,answer:i,index:r,enumerateQuestions:u}),(e.type==="matrix-radio"||e.type==="matrix-checkbox")&&E.jsx(Q_t,{disabled:l,response:e,answer:i,index:r,enumerateQuestions:u})]})}function JM({config:e,location:t,status:n,style:r}){var $;const{storageEngine:i}=Po(),s=Jc(),{updateResponseBlockValidation:o,toggleShowHelpText:a,saveIncorrectAnswer:u,incrementHelpCounter:l}=Bl(),c=Zd(),f=eh(),d=n==null?void 0:n.answer,h=G_(),p=Ep(),m=e,g=N.useMemo(()=>{var j;return((j=m==null?void 0:m.response)==null?void 0:j.filter(W=>W.location?W.location===t:t==="belowStimulus"))||[]},[m==null?void 0:m.response,t]),y=N.useMemo(()=>g.map(j=>({...j,required:j.required===void 0?!0:j.required})),[g]),v=j_t(y,c,d||{}),[b,_]=N.useState(void 0),w=vi(j=>j.iframeAnswers),S=vi(j=>j.iframeProvenance),T=vi(j=>j.matrixAnswers),A=(m==null?void 0:m.provideFeedback)&&((($=m==null?void 0:m.correctAnswer)==null?void 0:$.length)||0)>0,k=(m==null?void 0:m.allowFailedTraining)===void 0?!0:m.allowFailedTraining,[I,R]=N.useState(0),F=(m==null?void 0:m.trainingAttempts)||2,[O,L]=N.useState(!1),H=t===((m==null?void 0:m.nextButtonLocation)||"belowStimulus");N.useEffect(()=>{const j=y.find(W=>W.type==="iframe");if(w&&j){const W=j.id;v.setValues({...v.values,[W]:w[W]})}},[w]),N.useEffect(()=>{S&&_(S)},[S]),N.useEffect(()=>{const j=y.filter(W=>W.type==="matrix-radio"||W.type==="matrix-checkbox");if(T&&j.length>0){const W={...v.values};j.forEach(B=>{const{id:q}=B;W[q]={...v.getInputProps(q).value,...T[q]}}),v.setValues(W)}},[T]),N.useEffect(()=>{s(o({location:t,identifier:`${f}_${c}`,status:v.isValid(),values:Pg(v.values),provenanceGraph:b}))},[v.values,f,c,t,s,o,b]);const[U,G]=N.useState(Object.fromEntries(y.map(j=>[j.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),Y=(j,W,B,q,Z)=>{G(re=>({...re,[j]:{visible:W,title:B,message:q,color:Z}}))},J=()=>{const j=I+1;R(j);const W=Object.fromEntries(y.map(B=>{var re,xe;const q=(xe=(re=m.correctAnswer)==null?void 0:re.find(pe=>pe.id===B.id))==null?void 0:xe.answer,Z=v.values[B.id];return[B.id,Array.isArray(Z)?typeof q=="string"?Z.length===1&&q===Z[0]:Z.length===q.length&&Z.every(pe=>q.includes(pe)):q===Z]}));A&&(y.forEach(B=>{var q;if(W[B.id]&&!((q=U[B.id])!=null&&q.message.includes("You've failed to answer this question correctly")))Y(B.id,!0,"Correct Answer","You have answered the question correctly.","green");else{s(u({question:`${f}_${c}`,identifier:B.id,answer:v.values[B.id]}));let Z="";F===-1?Z="Please try again.":j>=F?(Z=`You didn't answer this question correctly after ${F} attempts. ${k?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!k&&i&&i.rejectCurrentParticipant(h,"Failed training").then(()=>{setTimeout(()=>{p("./__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{p("./__trainingFailed")},5e3)})):F-j===1?Z="Please try again. You have 1 attempt left.":Z=`Please try again. You have ${F-j} attempts left.`,Y(B.id,!0,"Incorrect Answer",Z,"red")}}),L(k&&j>=F||Object.values(W).every(B=>B)&&j<=F))};return E.jsxs("div",{style:r,children:[y.map((j,W)=>{var q,Z;const B=(Z=(q=m.correctAnswer)==null?void 0:q.find(re=>re.id===j.id))==null?void 0:Z.answer;return E.jsx(yi.Fragment,{children:j.hidden?"":E.jsxs(E.Fragment,{children:[E.jsx(J_t,{storedAnswer:d?d[j.id]:void 0,answer:{...v.getInputProps(j.id,{type:j.type==="checkbox"?"checkbox":"input"})},response:j,index:W+1}),U[j.id].visible&&E.jsxs(Ng,{mb:"md",title:U[j.id].title,color:U[j.id].color,children:[U[j.id].message," ",U[j.id].message.includes("Please try again")&&E.jsxs(E.Fragment,{children:[E.jsx("br",{}),E.jsx("br",{}),"If you're unsure"," ",E.jsx(xb,{style:{fontSize:14},onClick:()=>{s(a()),s(l({identifier:`${f}_${c}`}))},children:"review the help text."})," "]}),E.jsx("br",{}),E.jsx("br",{}),I>=F&&F>=0&&B&&` The correct answer was: ${B}.`]})]})},`${j.id}-${c}`)}),E.jsxs($i,{justify:"right",gap:"xs",children:[A&&H&&E.jsx(_n,{onClick:()=>J(),disabled:!v.isValid()||I>=F&&F>=0,children:"Check Answer"}),H&&E.jsx(x_t,{disabled:A&&!O||!v.isValid(),label:m.nextButtonText||"Next",configInUse:m})]})]})}const _D="@REVISIT_COMMS",Z_t={minHeight:"500px",width:"100%",border:0};function eEt({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=Bl(),r=Jc(),i=i3e(),s=N.useRef(null),o=N.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=eh(),u=Ep(),l=N.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${_D}/${c}`,iframeId:o,message:f},"*")},[s,o]);return N.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${_D}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${_D}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${_D}/ANSWERS`:r(t(d.message));break;case`${_D}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),E.jsx("iframe",{ref:s,src:e.path.startsWith("http")?e.path:`${Ll}${e.path}?trialid=${a}&id=${o}`,style:Z_t})}async function Rte(e){const n=await(await fetch(`${Ll}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}async function tEt(e){const t=await fetch(`${Ll}${e}`);let n;try{n=await t.json()}catch(r){console.error("Invalid JSON:",r)}return n}function kv({email:e,path:t}){const n=Eb();return E.jsxs(Bd,{fluid:!0,my:50,maw:800,mx:"auto",children:[E.jsx(lo,{order:2,children:E.jsx(tt,{span:!0,c:"orange",children:"404"})}),E.jsxs(tt,{children:[E.jsx(tt,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),E.jsx(If,{h:"lg"}),E.jsxs(Uu,{children:[E.jsx(Uu.Item,{children:E.jsx(tt,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),E.jsx(Uu.Item,{children:E.jsxs(tt,{children:["If you're a participant, please contact the study administrator"," ",e&&E.jsxs(E.Fragment,{children:["at"," ",E.jsxs(xb,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const nEt={maxWidth:"100%"};function rEt({currentConfig:e}){const t={...nEt,...e.style},[n,r]=N.useState(!0),[i,s]=N.useState(!1);return N.useEffect(()=>{async function o(){const a=await Rte(e.path);s(!!a),r(!1)}o()},[e]),n||i?E.jsx(_b,{mx:"auto",src:`${Ll}${e.path}`,style:t}):E.jsx(kv,{path:e.path})}function Og(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function iEt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Db(e){let t,n,r;e.length!==2?(t=Og,n=(a,u)=>Og(e(a),u),r=(a,u)=>e(a)-u):(t=e===Og||e===iEt?e:sEt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function sEt(){return 0}function M3e(e){return e===null?NaN:+e}function*oEt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const $3e=Db(Og),Rv=$3e.right,aEt=$3e.left;Db(M3e).center;function uEt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function lEt(e,t){const n=uEt(e,t);return n&&Math.sqrt(n)}function PR(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Ol{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Lge extends Map{constructor(t,n=j3e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(YG(this,t))}has(t){return super.has(YG(this,t))}set(t,n){return super.set(L3e(this,t),n)}delete(t){return super.delete(B3e(this,t))}}class ZM extends Set{constructor(t,n=j3e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(YG(this,t))}add(t){return super.add(L3e(this,t))}delete(t){return super.delete(B3e(this,t))}}function YG({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function L3e({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function B3e({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function j3e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function cEt(e,t){return Array.from(t,n=>e[n])}function fEt(e=Og){if(e===Og)return U3e;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function U3e(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const dEt=Math.sqrt(50),hEt=Math.sqrt(10),pEt=Math.sqrt(2);function e8(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=dEt?10:s>=hEt?5:s>=pEt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?e8(e,t,n*2):[a,u,l]}function KG(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?e8(t,e,n):e8(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function XG(e,t,n){return t=+t,e=+e,n=+n,e8(e,t,n)[2]}function Nv(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?XG(t,e,n):XG(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function tp(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function OR(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function z3e(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?U3e:fEt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));z3e(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(ED(e,n,t),i(e[r],s)>0&&ED(e,n,r);o<a;){for(ED(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?ED(e,n,a):(++a,ED(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function ED(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function QG(e,t,n){if(e=Float64Array.from(oEt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return OR(e);if(t>=1)return tp(e);var r,i=(r-1)*t,s=Math.floor(i),o=tp(z3e(e,s).subarray(0,s+1)),a=OR(e.subarray(s+1));return o+(a-o)*(i-s)}}function V3e(e,t,n=M3e){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function mEt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function H3e(e,t){return QG(e,.5,t)}function*gEt(e){for(const t of e)yield*t}function q3e(e){return Array.from(gEt(e))}function Cc(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function W3e(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function yEt(e,...t){e=new ZM(e),t=t.map(vEt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function vEt(e){return e instanceof ZM?e:new ZM(e)}function bEt(...e){const t=new ZM;for(const n of e)for(const r of n)t.add(r);return t}function xEt(e){return e}var _V=1,EV=2,JG=3,gI=4,Bge=1e-6;function wEt(e){return"translate("+e+",0)"}function _Et(e){return"translate(0,"+e+")"}function EEt(e){return t=>+e(t)}function SEt(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function CEt(){return!this.__axis}function G3e(e,t){var n=[],r=null,i=null,s=6,o=6,a=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===_V||e===gI?-1:1,c=e===gI||e===EV?"x":"y",f=e===_V||e===JG?wEt:_Et;function d(h){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),m=i??(t.tickFormat?t.tickFormat.apply(t,n):xEt),g=Math.max(s,0)+a,y=t.range(),v=+y[0]+u,b=+y[y.length-1]+u,_=(t.bandwidth?SEt:EEt)(t.copy(),u),w=h.selection?h.selection():h,S=w.selectAll(".domain").data([null]),T=w.selectAll(".tick").data(p,t).order(),A=T.exit(),k=T.enter().append("g").attr("class","tick"),I=T.select("line"),R=T.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(k),I=I.merge(k.append("line").attr("stroke","currentColor").attr(c+"2",l*s)),R=R.merge(k.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",e===_V?"0em":e===JG?"0.71em":"0.32em")),h!==w&&(S=S.transition(h),T=T.transition(h),I=I.transition(h),R=R.transition(h),A=A.transition(h).attr("opacity",Bge).attr("transform",function(F){return isFinite(F=_(F))?f(F+u):this.getAttribute("transform")}),k.attr("opacity",Bge).attr("transform",function(F){var O=this.parentNode.__axis;return f((O&&isFinite(O=O(F))?O:_(F))+u)})),A.remove(),S.attr("d",e===gI||e===EV?o?"M"+l*o+","+v+"H"+u+"V"+b+"H"+l*o:"M"+u+","+v+"V"+b:o?"M"+v+","+l*o+"V"+u+"H"+b+"V"+l*o:"M"+v+","+u+"H"+b),T.attr("opacity",1).attr("transform",function(F){return f(_(F)+u)}),I.attr(c+"2",l*s),R.attr(c,l*g).text(m),w.filter(CEt).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===EV?"start":e===gI?"end":"middle"),w.each(function(){this.__axis=_})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(s=o=+h,d):s},d.tickSizeInner=function(h){return arguments.length?(s=+h,d):s},d.tickSizeOuter=function(h){return arguments.length?(o=+h,d):o},d.tickPadding=function(h){return arguments.length?(a=+h,d):a},d.offset=function(h){return arguments.length?(u=+h,d):u},d}function TEt(e){return G3e(JG,e)}function AEt(e){return G3e(gI,e)}var DEt={value:()=>{}};function hB(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new sF(n)}function sF(e){this._=e}function IEt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}sF.prototype=hB.prototype={constructor:sF,on:function(e,t){var n=this._,r=IEt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=kEt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=jge(n[i],e.name,t);else if(t==null)for(i in n)n[i]=jge(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new sF(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function kEt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function jge(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=DEt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ZG="http://www.w3.org/1999/xhtml";const Uge={svg:"http://www.w3.org/2000/svg",xhtml:ZG,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function pB(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Uge.hasOwnProperty(t)?{space:Uge[t],local:e}:e}function REt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ZG&&t.documentElement.namespaceURI===ZG?t.createElement(e):t.createElementNS(n,e)}}function NEt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Y3e(e){var t=pB(e);return(t.local?NEt:REt)(t)}function PEt(){}function Nte(e){return e==null?PEt:function(){return this.querySelector(e)}}function OEt(e){typeof e!="function"&&(e=Nte(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new jl(r,this._parents)}function K3e(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function FEt(){return[]}function X3e(e){return e==null?FEt:function(){return this.querySelectorAll(e)}}function MEt(e){return function(){return K3e(e.apply(this,arguments))}}function $Et(e){typeof e=="function"?e=MEt(e):e=X3e(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new jl(r,i)}function Q3e(e){return function(){return this.matches(e)}}function J3e(e){return function(t){return t.matches(e)}}var LEt=Array.prototype.find;function BEt(e){return function(){return LEt.call(this.children,e)}}function jEt(){return this.firstElementChild}function UEt(e){return this.select(e==null?jEt:BEt(typeof e=="function"?e:J3e(e)))}var zEt=Array.prototype.filter;function VEt(){return Array.from(this.children)}function HEt(e){return function(){return zEt.call(this.children,e)}}function qEt(e){return this.selectAll(e==null?VEt:HEt(typeof e=="function"?e:J3e(e)))}function WEt(e){typeof e!="function"&&(e=Q3e(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new jl(r,this._parents)}function Z3e(e){return new Array(e.length)}function GEt(){return new jl(this._enter||this._groups.map(Z3e),this._parents)}function t8(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}t8.prototype={constructor:t8,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function YEt(e){return function(){return e}}function KEt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new t8(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function XEt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new t8(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function QEt(e){return e.__data__}function JEt(e,t){if(!arguments.length)return Array.from(this,QEt);var n=t?XEt:KEt,r=this._parents,i=this._groups;typeof e!="function"&&(e=YEt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=ZEt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,b=0,_,w;v<p;++v)if(_=m[v]){for(v>=b&&(b=v+1);!(w=g[b])&&++b<p;);_._next=w||null}}return o=new jl(o,r),o._enter=a,o._exit=u,o}function ZEt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function e2t(){return new jl(this._exit||this._groups.map(Z3e),this._parents)}function t2t(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function n2t(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new jl(a,this._parents)}function r2t(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function i2t(e){e||(e=s2t);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new jl(i,this._parents).order()}function s2t(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function o2t(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function a2t(){return Array.from(this)}function u2t(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function l2t(){let e=0;for(const t of this)++e;return e}function c2t(){return!this.node()}function f2t(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function d2t(e){return function(){this.removeAttribute(e)}}function h2t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function p2t(e,t){return function(){this.setAttribute(e,t)}}function m2t(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function g2t(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function y2t(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function v2t(e,t){var n=pB(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?h2t:d2t:typeof t=="function"?n.local?y2t:g2t:n.local?m2t:p2t)(n,t))}function eNe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function b2t(e){return function(){this.style.removeProperty(e)}}function x2t(e,t,n){return function(){this.style.setProperty(e,t,n)}}function w2t(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function _2t(e,t,n){return arguments.length>1?this.each((t==null?b2t:typeof t=="function"?w2t:x2t)(e,t,n??"")):hC(this.node(),e)}function hC(e,t){return e.style.getPropertyValue(t)||eNe(e).getComputedStyle(e,null).getPropertyValue(t)}function E2t(e){return function(){delete this[e]}}function S2t(e,t){return function(){this[e]=t}}function C2t(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function T2t(e,t){return arguments.length>1?this.each((t==null?E2t:typeof t=="function"?C2t:S2t)(e,t)):this.node()[e]}function tNe(e){return e.trim().split(/^|\s+/)}function Pte(e){return e.classList||new nNe(e)}function nNe(e){this._node=e,this._names=tNe(e.getAttribute("class")||"")}nNe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function rNe(e,t){for(var n=Pte(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function iNe(e,t){for(var n=Pte(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function A2t(e){return function(){rNe(this,e)}}function D2t(e){return function(){iNe(this,e)}}function I2t(e,t){return function(){(t.apply(this,arguments)?rNe:iNe)(this,e)}}function k2t(e,t){var n=tNe(e+"");if(arguments.length<2){for(var r=Pte(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?I2t:t?A2t:D2t)(n,t))}function R2t(){this.textContent=""}function N2t(e){return function(){this.textContent=e}}function P2t(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function O2t(e){return arguments.length?this.each(e==null?R2t:(typeof e=="function"?P2t:N2t)(e)):this.node().textContent}function F2t(){this.innerHTML=""}function M2t(e){return function(){this.innerHTML=e}}function $2t(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function L2t(e){return arguments.length?this.each(e==null?F2t:(typeof e=="function"?$2t:M2t)(e)):this.node().innerHTML}function B2t(){this.nextSibling&&this.parentNode.appendChild(this)}function j2t(){return this.each(B2t)}function U2t(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function z2t(){return this.each(U2t)}function V2t(e){var t=typeof e=="function"?e:Y3e(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function H2t(){return null}function q2t(e,t){var n=typeof e=="function"?e:Y3e(e),r=t==null?H2t:typeof t=="function"?t:Nte(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function W2t(){var e=this.parentNode;e&&e.removeChild(this)}function G2t(){return this.each(W2t)}function Y2t(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function K2t(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function X2t(e){return this.select(e?K2t:Y2t)}function Q2t(e){return arguments.length?this.property("__data__",e):this.node().__data__}function J2t(e){return function(t){e.call(this,t,this.__data__)}}function Z2t(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function eSt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function tSt(e,t,n){return function(){var r=this.__on,i,s=J2t(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function nSt(e,t,n){var r=Z2t(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?tSt:eSt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function sNe(e,t,n){var r=eNe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function rSt(e,t){return function(){return sNe(this,e,t)}}function iSt(e,t){return function(){return sNe(this,e,t.apply(this,arguments))}}function sSt(e,t){return this.each((typeof t=="function"?iSt:rSt)(e,t))}function*oSt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var Ote=[null];function jl(e,t){this._groups=e,this._parents=t}function wN(){return new jl([[document.documentElement]],Ote)}function aSt(){return this}jl.prototype=wN.prototype={constructor:jl,select:OEt,selectAll:$Et,selectChild:UEt,selectChildren:qEt,filter:WEt,data:JEt,enter:GEt,exit:e2t,join:t2t,merge:n2t,selection:aSt,order:r2t,sort:i2t,call:o2t,nodes:a2t,node:u2t,size:l2t,empty:c2t,each:f2t,attr:v2t,style:_2t,property:T2t,classed:k2t,text:O2t,html:L2t,raise:j2t,lower:z2t,append:V2t,insert:q2t,remove:G2t,clone:X2t,datum:Q2t,on:nSt,dispatch:sSt,[Symbol.iterator]:oSt};function ei(e){return typeof e=="string"?new jl([[document.querySelector(e)]],[document.documentElement]):new jl([[e]],Ote)}function uSt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function n8(e,t){if(e=uSt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function oNe(e){return typeof e=="string"?new jl([document.querySelectorAll(e)],[document.documentElement]):new jl([K3e(e)],Ote)}const eY={capture:!0,passive:!1};function tY(e){e.preventDefault(),e.stopImmediatePropagation()}function lSt(e){var t=e.document.documentElement,n=ei(e).on("dragstart.drag",tY,eY);"onselectstart"in t?n.on("selectstart.drag",tY,eY):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function cSt(e,t){var n=e.document.documentElement,r=ei(e).on("dragstart.drag",null);t&&(r.on("click.drag",tY,eY),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function qT(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function _N(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ib(){}var Kw=.7,pC=1/Kw,bS="\\s*([+-]?\\d+)\\s*",FR="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Dm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fSt=/^#([0-9a-f]{3,8})$/,dSt=new RegExp(`^rgb\\(${bS},${bS},${bS}\\)$`),hSt=new RegExp(`^rgb\\(${Dm},${Dm},${Dm}\\)$`),pSt=new RegExp(`^rgba\\(${bS},${bS},${bS},${FR}\\)$`),mSt=new RegExp(`^rgba\\(${Dm},${Dm},${Dm},${FR}\\)$`),gSt=new RegExp(`^hsl\\(${FR},${Dm},${Dm}\\)$`),ySt=new RegExp(`^hsla\\(${FR},${Dm},${Dm},${FR}\\)$`),zge={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qT(Ib,Xw,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Vge,formatHex:Vge,formatHex8:vSt,formatHsl:bSt,formatRgb:Hge,toString:Hge});function Vge(){return this.rgb().formatHex()}function vSt(){return this.rgb().formatHex8()}function bSt(){return aNe(this).formatHsl()}function Hge(){return this.rgb().formatRgb()}function Xw(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=fSt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?qge(t):n===3?new Na(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?m4(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?m4(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=dSt.exec(e))?new Na(t[1],t[2],t[3],1):(t=hSt.exec(e))?new Na(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pSt.exec(e))?m4(t[1],t[2],t[3],t[4]):(t=mSt.exec(e))?m4(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gSt.exec(e))?Yge(t[1],t[2]/100,t[3]/100,1):(t=ySt.exec(e))?Yge(t[1],t[2]/100,t[3]/100,t[4]):zge.hasOwnProperty(e)?qge(zge[e]):e==="transparent"?new Na(NaN,NaN,NaN,0):null}function qge(e){return new Na(e>>16&255,e>>8&255,e&255,1)}function m4(e,t,n,r){return r<=0&&(e=t=n=NaN),new Na(e,t,n,r)}function Fte(e){return e instanceof Ib||(e=Xw(e)),e?(e=e.rgb(),new Na(e.r,e.g,e.b,e.opacity)):new Na}function Pv(e,t,n,r){return arguments.length===1?Fte(e):new Na(e,t,n,r??1)}function Na(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}qT(Na,Pv,_N(Ib,{brighter(e){return e=e==null?pC:Math.pow(pC,e),new Na(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Kw:Math.pow(Kw,e),new Na(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Na(kw(this.r),kw(this.g),kw(this.b),r8(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wge,formatHex:Wge,formatHex8:xSt,formatRgb:Gge,toString:Gge}));function Wge(){return`#${hw(this.r)}${hw(this.g)}${hw(this.b)}`}function xSt(){return`#${hw(this.r)}${hw(this.g)}${hw(this.b)}${hw((isNaN(this.opacity)?1:this.opacity)*255)}`}function Gge(){const e=r8(this.opacity);return`${e===1?"rgb(":"rgba("}${kw(this.r)}, ${kw(this.g)}, ${kw(this.b)}${e===1?")":`, ${e})`}`}function r8(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function kw(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hw(e){return e=kw(e),(e<16?"0":"")+e.toString(16)}function Yge(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Bh(e,t,n,r)}function aNe(e){if(e instanceof Bh)return new Bh(e.h,e.s,e.l,e.opacity);if(e instanceof Ib||(e=Xw(e)),!e)return new Bh;if(e instanceof Bh)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new Bh(o,a,u,e.opacity)}function i8(e,t,n,r){return arguments.length===1?aNe(e):new Bh(e,t,n,r??1)}function Bh(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}qT(Bh,i8,_N(Ib,{brighter(e){return e=e==null?pC:Math.pow(pC,e),new Bh(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Kw:Math.pow(Kw,e),new Bh(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Na(SV(e>=240?e-240:e+120,i,r),SV(e,i,r),SV(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Bh(Kge(this.h),g4(this.s),g4(this.l),r8(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=r8(this.opacity);return`${e===1?"hsl(":"hsla("}${Kge(this.h)}, ${g4(this.s)*100}%, ${g4(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Kge(e){return e=(e||0)%360,e<0?e+360:e}function g4(e){return Math.max(0,Math.min(1,e||0))}function SV(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const uNe=Math.PI/180,lNe=180/Math.PI,s8=18,cNe=.96422,fNe=1,dNe=.82521,hNe=4/29,xS=6/29,pNe=3*xS*xS,wSt=xS*xS*xS;function mNe(e){if(e instanceof Im)return new Im(e.l,e.a,e.b,e.opacity);if(e instanceof xg)return gNe(e);e instanceof Na||(e=Fte(e));var t=DV(e.r),n=DV(e.g),r=DV(e.b),i=CV((.2225045*t+.7168786*n+.0606169*r)/fNe),s,o;return t===n&&n===r?s=o=i:(s=CV((.4360747*t+.3850649*n+.1430804*r)/cNe),o=CV((.0139322*t+.0971045*n+.7141733*r)/dNe)),new Im(116*i-16,500*(s-i),200*(i-o),e.opacity)}function o8(e,t,n,r){return arguments.length===1?mNe(e):new Im(e,t,n,r??1)}function Im(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}qT(Im,o8,_N(Ib,{brighter(e){return new Im(this.l+s8*(e??1),this.a,this.b,this.opacity)},darker(e){return new Im(this.l-s8*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=cNe*TV(t),e=fNe*TV(e),n=dNe*TV(n),new Na(AV(3.1338561*t-1.6168667*e-.4906146*n),AV(-.9787684*t+1.9161415*e+.033454*n),AV(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function CV(e){return e>wSt?Math.pow(e,1/3):e/pNe+hNe}function TV(e){return e>xS?e*e*e:pNe*(e-hNe)}function AV(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function DV(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function _St(e){if(e instanceof xg)return new xg(e.h,e.c,e.l,e.opacity);if(e instanceof Im||(e=mNe(e)),e.a===0&&e.b===0)return new xg(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*lNe;return new xg(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function a8(e,t,n,r){return arguments.length===1?_St(e):new xg(e,t,n,r??1)}function xg(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function gNe(e){if(isNaN(e.h))return new Im(e.l,0,0,e.opacity);var t=e.h*uNe;return new Im(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}qT(xg,a8,_N(Ib,{brighter(e){return new xg(this.h,this.c,this.l+s8*(e??1),this.opacity)},darker(e){return new xg(this.h,this.c,this.l-s8*(e??1),this.opacity)},rgb(){return gNe(this).rgb()}}));var yNe=-.14861,Mte=1.78277,$te=-.29227,mB=-.90649,MR=1.97294,Xge=MR*mB,Qge=MR*Mte,Jge=Mte*$te-mB*yNe;function ESt(e){if(e instanceof Rw)return new Rw(e.h,e.s,e.l,e.opacity);e instanceof Na||(e=Fte(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Jge*r+Xge*t-Qge*n)/(Jge+Xge-Qge),s=r-i,o=(MR*(n-i)-$te*s)/mB,a=Math.sqrt(o*o+s*s)/(MR*i*(1-i)),u=a?Math.atan2(o,s)*lNe-120:NaN;return new Rw(u<0?u+360:u,a,i,e.opacity)}function nY(e,t,n,r){return arguments.length===1?ESt(e):new Rw(e,t,n,r??1)}function Rw(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}qT(Rw,nY,_N(Ib,{brighter(e){return e=e==null?pC:Math.pow(pC,e),new Rw(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Kw:Math.pow(Kw,e),new Rw(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*uNe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Na(255*(t+n*(yNe*r+Mte*i)),255*(t+n*($te*r+mB*i)),255*(t+n*(MR*r)),this.opacity)}}));function vNe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function bNe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return vNe((n-r/t)*t,o,i,s,a)}}function xNe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return vNe((n-r/t)*t,i,s,o,a)}}const gB=e=>()=>e;function wNe(e,t){return function(n){return e+n*t}}function SSt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function yB(e,t){var n=t-e;return n?wNe(e,n>180||n<-180?n-360*Math.round(n/360):n):gB(isNaN(e)?t:e)}function CSt(e){return(e=+e)==1?Pa:function(t,n){return n-t?SSt(t,n,e):gB(isNaN(t)?n:t)}}function Pa(e,t){var n=t-e;return n?wNe(e,n):gB(isNaN(e)?t:e)}const $R=function e(t){var n=CSt(t);function r(i,s){var o=n((i=Pv(i)).r,(s=Pv(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=Pa(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function _Ne(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Pv(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var TSt=_Ne(bNe),ASt=_Ne(xNe);function Lte(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function ENe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function DSt(e,t){return(ENe(t)?Lte:SNe)(e,t)}function SNe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Ty(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function CNe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ed(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function TNe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Ty(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var rY=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,IV=new RegExp(rY.source,"g");function ISt(e){return function(){return e}}function kSt(e){return function(t){return e(t)+""}}function Bte(e,t){var n=rY.lastIndex=IV.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=rY.exec(e))&&(i=IV.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Ed(r,i)})),n=IV.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?kSt(u[0].x):ISt(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Ty(e,t){var n=typeof t,r;return t==null||n==="boolean"?gB(t):(n==="number"?Ed:n==="string"?(r=Xw(t))?(t=r,$R):Bte:t instanceof Xw?$R:t instanceof Date?CNe:ENe(t)?Lte:Array.isArray(t)?SNe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?TNe:Ed)(e,t)}function RSt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function NSt(e,t){var n=yB(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function EN(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Zge=180/Math.PI,iY={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ANe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Zge,skewX:Math.atan(u)*Zge,scaleX:o,scaleY:a}}var y4;function PSt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?iY:ANe(t.a,t.b,t.c,t.d,t.e,t.f)}function OSt(e){return e==null||(y4||(y4=document.createElementNS("http://www.w3.org/2000/svg","g")),y4.setAttribute("transform",e),!(e=y4.transform.baseVal.consolidate()))?iY:(e=e.matrix,ANe(e.a,e.b,e.c,e.d,e.e,e.f))}function DNe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Ed(l,f)},{i:m-2,x:Ed(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Ed(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Ed(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Ed(l,f)},{i:m-2,x:Ed(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var INe=DNe(PSt,"px, ","px)","deg)"),kNe=DNe(OSt,", ",")",")"),FSt=1e-12;function eye(e){return((e=Math.exp(e))+1/e)/2}function MSt(e){return((e=Math.exp(e))-1/e)/2}function $St(e){return((e=Math.exp(2*e))-1)/(e+1)}const LSt=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<FSt)y=Math.log(d/l)/t,g=function(T){return[a+T*h,u+T*p,l*Math.exp(t*T*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),_=(d*d-l*l-r*m)/(2*d*n*v),w=Math.log(Math.sqrt(b*b+1)-b),S=Math.log(Math.sqrt(_*_+1)-_);y=(S-w)/t,g=function(T){var A=T*y,k=eye(w),I=l/(n*v)*(k*$St(t*A+w)-MSt(w));return[a+I*h,u+I*p,l*k/eye(t*A+w)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function RNe(e){return function(t,n){var r=e((t=i8(t)).h,(n=i8(n)).h),i=Pa(t.s,n.s),s=Pa(t.l,n.l),o=Pa(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const BSt=RNe(yB);var jSt=RNe(Pa);function USt(e,t){var n=Pa((e=o8(e)).l,(t=o8(t)).l),r=Pa(e.a,t.a),i=Pa(e.b,t.b),s=Pa(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function NNe(e){return function(t,n){var r=e((t=a8(t)).h,(n=a8(n)).h),i=Pa(t.c,n.c),s=Pa(t.l,n.l),o=Pa(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const zSt=NNe(yB);var VSt=NNe(Pa);function PNe(e){return function t(n){n=+n;function r(i,s){var o=e((i=nY(i)).h,(s=nY(s)).h),a=Pa(i.s,s.s),u=Pa(i.l,s.l),l=Pa(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const HSt=PNe(yB);var qSt=PNe(Pa);function jte(e,t){t===void 0&&(t=e,e=Ty);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function WSt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const GSt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Ty,interpolateArray:DSt,interpolateBasis:bNe,interpolateBasisClosed:xNe,interpolateCubehelix:HSt,interpolateCubehelixLong:qSt,interpolateDate:CNe,interpolateDiscrete:RSt,interpolateHcl:zSt,interpolateHclLong:VSt,interpolateHsl:BSt,interpolateHslLong:jSt,interpolateHue:NSt,interpolateLab:USt,interpolateNumber:Ed,interpolateNumberArray:Lte,interpolateObject:TNe,interpolateRgb:$R,interpolateRgbBasis:TSt,interpolateRgbBasisClosed:ASt,interpolateRound:EN,interpolateString:Bte,interpolateTransformCss:INe,interpolateTransformSvg:kNe,interpolateZoom:LSt,piecewise:jte,quantize:WSt},Symbol.toStringTag,{value:"Module"}));var mC=0,yI=0,SD=0,ONe=1e3,u8,vI,l8=0,Qw=0,vB=0,LR=typeof performance=="object"&&performance.now?performance:Date,FNe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function bB(){return Qw||(FNe(YSt),Qw=LR.now()+vB)}function YSt(){Qw=0}function BR(){this._call=this._time=this._next=null}BR.prototype=Ute.prototype={constructor:BR,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?bB():+n)+(t==null?0:+t),!this._next&&vI!==this&&(vI?vI._next=this:u8=this,vI=this),this._call=e,this._time=n,sY()},stop:function(){this._call&&(this._call=null,this._time=1/0,sY())}};function Ute(e,t,n){var r=new BR;return r.restart(e,t,n),r}function KSt(){bB(),++mC;for(var e=u8,t;e;)(t=Qw-e._time)>=0&&e._call.call(void 0,t),e=e._next;--mC}function tye(){Qw=(l8=LR.now())+vB,mC=yI=0;try{KSt()}finally{mC=0,QSt(),Qw=0}}function XSt(){var e=LR.now(),t=e-l8;t>ONe&&(vB-=t,l8=e)}function QSt(){for(var e,t=u8,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:u8=n);vI=e,sY(r)}function sY(e){if(!mC){yI&&(yI=clearTimeout(yI));var t=e-Qw;t>24?(e<1/0&&(yI=setTimeout(tye,e-LR.now()-vB)),SD&&(SD=clearInterval(SD))):(SD||(l8=LR.now(),SD=setInterval(XSt,ONe)),mC=1,FNe(tye))}}function nye(e,t,n){var r=new BR;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function JSt(e,t,n){var r=new BR,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?bB():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var ZSt=hB("start","end","cancel","interrupt"),eCt=[],MNe=0,rye=1,oY=2,oF=3,iye=4,aY=5,aF=6;function xB(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;tCt(e,n,{name:t,index:r,group:i,on:ZSt,tween:eCt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:MNe})}function zte(e,t){var n=Cp(e,t);if(n.state>MNe)throw new Error("too late; already scheduled");return n}function h0(e,t){var n=Cp(e,t);if(n.state>oF)throw new Error("too late; already running");return n}function Cp(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function tCt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Ute(s,0,n.time);function s(l){n.state=rye,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==rye)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===oF)return nye(o);h.state===iye?(h.state=aF,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=aF,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(nye(function(){n.state===oF&&(n.state=iye,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=oY,n.on.call("start",e,e.__data__,n.index,n.group),n.state===oY){for(n.state=oF,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=aY,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===aY&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=aF,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function uY(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>oY&&r.state<aY,r.state=aF,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function nCt(e){return this.each(function(){uY(this,e)})}function rCt(e,t){var n,r;return function(){var i=h0(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function iCt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=h0(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function sCt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Cp(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?rCt:iCt)(n,e,t))}function Vte(e,t,n){var r=e._id;return e.each(function(){var i=h0(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Cp(i,r).value[t]}}function $Ne(e,t){var n;return(typeof t=="number"?Ed:t instanceof Xw?$R:(n=Xw(t))?(t=n,$R):Bte)(e,t)}function oCt(e){return function(){this.removeAttribute(e)}}function aCt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function uCt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function lCt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function cCt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function fCt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function dCt(e,t){var n=pB(e),r=n==="transform"?kNe:$Ne;return this.attrTween(e,typeof t=="function"?(n.local?fCt:cCt)(n,r,Vte(this,"attr."+e,t)):t==null?(n.local?aCt:oCt)(n):(n.local?lCt:uCt)(n,r,t))}function hCt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function pCt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function mCt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&pCt(e,s)),n}return i._value=t,i}function gCt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&hCt(e,s)),n}return i._value=t,i}function yCt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=pB(e);return this.tween(n,(r.local?mCt:gCt)(r,t))}function vCt(e,t){return function(){zte(this,e).delay=+t.apply(this,arguments)}}function bCt(e,t){return t=+t,function(){zte(this,e).delay=t}}function xCt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?vCt:bCt)(t,e)):Cp(this.node(),t).delay}function wCt(e,t){return function(){h0(this,e).duration=+t.apply(this,arguments)}}function _Ct(e,t){return t=+t,function(){h0(this,e).duration=t}}function ECt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?wCt:_Ct)(t,e)):Cp(this.node(),t).duration}function SCt(e,t){if(typeof t!="function")throw new Error;return function(){h0(this,e).ease=t}}function CCt(e){var t=this._id;return arguments.length?this.each(SCt(t,e)):Cp(this.node(),t).ease}function TCt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;h0(this,e).ease=n}}function ACt(e){if(typeof e!="function")throw new Error;return this.each(TCt(this._id,e))}function DCt(e){typeof e!="function"&&(e=Q3e(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new ty(r,this._parents,this._name,this._id)}function ICt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new ty(o,this._parents,this._name,this._id)}function kCt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function RCt(e,t,n){var r,i,s=kCt(t)?zte:h0;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function NCt(e,t){var n=this._id;return arguments.length<2?Cp(this.node(),n).on.on(e):this.each(RCt(n,e,t))}function PCt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function OCt(){return this.on("end.remove",PCt(this._id))}function FCt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Nte(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,xB(l[d],t,n,d,l,Cp(c,n)));return new ty(s,this._parents,t,n)}function MCt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=X3e(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Cp(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&xB(h,t,n,m,d,p);s.push(d),o.push(c)}return new ty(s,o,t,n)}var $Ct=wN.prototype.constructor;function LCt(){return new $Ct(this._groups,this._parents)}function BCt(e,t){var n,r,i;return function(){var s=hC(this,e),o=(this.style.removeProperty(e),hC(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function LNe(e){return function(){this.style.removeProperty(e)}}function jCt(e,t,n){var r,i=n+"",s;return function(){var o=hC(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function UCt(e,t,n){var r,i,s;return function(){var o=hC(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),hC(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function zCt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=h0(this,e),l=u.on,c=u.value[s]==null?a||(a=LNe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function VCt(e,t,n){var r=(e+="")=="transform"?INe:$Ne;return t==null?this.styleTween(e,BCt(e,r)).on("end.style."+e,LNe(e)):typeof t=="function"?this.styleTween(e,UCt(e,r,Vte(this,"style."+e,t))).each(zCt(this._id,e)):this.styleTween(e,jCt(e,r,t),n).on("end.style."+e,null)}function HCt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function qCt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&HCt(e,o,n)),r}return s._value=t,s}function WCt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,qCt(e,t,n??""))}function GCt(e){return function(){this.textContent=e}}function YCt(e){return function(){var t=e(this);this.textContent=t??""}}function KCt(e){return this.tween("text",typeof e=="function"?YCt(Vte(this,"text",e)):GCt(e==null?"":e+""))}function XCt(e){return function(t){this.textContent=e.call(this,t)}}function QCt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&XCt(i)),t}return r._value=e,r}function JCt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,QCt(e))}function ZCt(){for(var e=this._name,t=this._id,n=BNe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Cp(u,t);xB(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ty(r,this._parents,e,n)}function eTt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=h0(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var tTt=0;function ty(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function BNe(){return++tTt}var V0=wN.prototype;ty.prototype={constructor:ty,select:FCt,selectAll:MCt,selectChild:V0.selectChild,selectChildren:V0.selectChildren,filter:DCt,merge:ICt,selection:LCt,transition:ZCt,call:V0.call,nodes:V0.nodes,node:V0.node,size:V0.size,empty:V0.empty,each:V0.each,on:NCt,attr:dCt,attrTween:yCt,style:VCt,styleTween:WCt,text:KCt,textTween:JCt,remove:OCt,tween:sCt,delay:xCt,duration:ECt,ease:CCt,easeVarying:ACt,end:eTt,[Symbol.iterator]:V0[Symbol.iterator]};const nTt=e=>+e;function rTt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var iTt={time:null,delay:0,duration:250,ease:rTt};function sTt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function oTt(e){var t,n;e instanceof ty?(t=e._id,e=e._name):(t=BNe(),(n=iTt).time=bB(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&xB(u,e,t,l,o,n||sTt(u,t));return new ty(r,this._parents,e,t)}wN.prototype.interrupt=nCt;wN.prototype.transition=oTt;const kV=e=>()=>e;function aTt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function uTt(e){e.stopImmediatePropagation()}function RV(e){e.preventDefault(),e.stopImmediatePropagation()}var sye={name:"drag"},NV={name:"space"},KE={name:"handle"},XE={name:"center"};const{abs:oye,max:Cu,min:Tu}=Math;function aye(e){return[+e[0],+e[1]]}function lY(e){return[aye(e[0]),aye(e[1])]}var uF={name:"x",handles:["w","e"].map(jR),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},lF={name:"y",handles:["n","s"].map(jR),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},lTt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(jR),input:function(e){return e==null?null:lY(e)},output:function(e){return e}},H0={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},uye={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},lye={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},cTt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},fTt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function jR(e){return{type:e}}function dTt(e){return!e.ctrlKey&&!e.button}function hTt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function pTt(){return navigator.maxTouchPoints||"ontouchstart"in this}function PV(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function mTt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function jNe(){return Hte(uF)}function UNe(){return Hte(lF)}function zNe(){return Hte(lTt)}function Hte(e){var t=hTt,n=dTt,r=pTt,i=!0,s=hB("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([jR("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",H0.overlay).merge(y).each(function(){var b=PV(this).extent;ei(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([jR("selection")]).enter().append("rect").attr("class","selection").attr("cursor",H0.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(b){return b.type});v.exit().remove(),v.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return H0[b.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,_=b.__brush,w=c(b,arguments),S=_.selection,T=e.input(typeof y=="function"?y.apply(this,arguments):y,_.extent),A=Ty(S,T);function k(I){_.selection=I===1&&T===null?null:A(I),l.call(b),w.brush()}return S!==null&&T!==null?k:k(1)}):g.each(function(){var b=this,_=arguments,w=b.__brush,S=e.input(typeof y=="function"?y.apply(b,_):y,w.extent),T=c(b,_).beforestart();uY(b),w.selection=S===null?null:S,l.call(b),T.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=ei(this),y=PV(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var b=g.__brush.emitter;return b&&(!v||!b.clean)?b:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var b=ei(this.that).datum();s.call(g,this.that,new aTt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),b)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,b=(i&&g.metaKey?v="overlay":v)==="selection"?sye:i&&g.altKey?XE:KE,_=e===lF?null:cTt[v],w=e===uF?null:fTt[v],S=PV(y),T=S.extent,A=S.selection,k=T[0][0],I,R,F=T[0][1],O,L,H=T[1][0],U,G,Y=T[1][1],J,$,j=0,W=0,B,q=_&&w&&i&&g.shiftKey,Z,re,xe=Array.from(g.touches||[g],Ie=>{const Ve=Ie.identifier;return Ie=n8(Ie,y),Ie.point0=Ie.slice(),Ie.identifier=Ve,Ie});uY(y);var pe=c(y,arguments,!0).beforestart();if(v==="overlay"){A&&(B=!0);const Ie=[xe[0],xe[1]||xe[0]];S.selection=A=[[I=e===lF?k:Tu(Ie[0][0],Ie[1][0]),O=e===uF?F:Tu(Ie[0][1],Ie[1][1])],[U=e===lF?H:Cu(Ie[0][0],Ie[1][0]),J=e===uF?Y:Cu(Ie[0][1],Ie[1][1])]],xe.length>1&&ut(g)}else I=A[0][0],O=A[0][1],U=A[1][0],J=A[1][1];R=I,L=O,G=U,$=J;var Te=ei(y).attr("pointer-events","none"),ke=Te.selectAll(".overlay").attr("cursor",H0[v]);if(g.touches)pe.moved=Re,pe.ended=Ke;else{var it=ei(g.view).on("mousemove.brush",Re,!0).on("mouseup.brush",Ke,!0);i&&it.on("keydown.brush",Ct,!0).on("keyup.brush",gt,!0),lSt(g.view)}l.call(y),pe.start(g,b.name);function Re(Ie){for(const Ve of Ie.changedTouches||[Ie])for(const ft of xe)ft.identifier===Ve.identifier&&(ft.cur=n8(Ve,y));if(q&&!Z&&!re&&xe.length===1){const Ve=xe[0];oye(Ve.cur[0]-Ve[0])>oye(Ve.cur[1]-Ve[1])?re=!0:Z=!0}for(const Ve of xe)Ve.cur&&(Ve[0]=Ve.cur[0],Ve[1]=Ve.cur[1]);B=!0,RV(Ie),ut(Ie)}function ut(Ie){const Ve=xe[0],ft=Ve.point0;var _t;switch(j=Ve[0]-ft[0],W=Ve[1]-ft[1],b){case NV:case sye:{_&&(j=Cu(k-I,Tu(H-U,j)),R=I+j,G=U+j),w&&(W=Cu(F-O,Tu(Y-J,W)),L=O+W,$=J+W);break}case KE:{xe[1]?(_&&(R=Cu(k,Tu(H,xe[0][0])),G=Cu(k,Tu(H,xe[1][0])),_=1),w&&(L=Cu(F,Tu(Y,xe[0][1])),$=Cu(F,Tu(Y,xe[1][1])),w=1)):(_<0?(j=Cu(k-I,Tu(H-I,j)),R=I+j,G=U):_>0&&(j=Cu(k-U,Tu(H-U,j)),R=I,G=U+j),w<0?(W=Cu(F-O,Tu(Y-O,W)),L=O+W,$=J):w>0&&(W=Cu(F-J,Tu(Y-J,W)),L=O,$=J+W));break}case XE:{_&&(R=Cu(k,Tu(H,I-j*_)),G=Cu(k,Tu(H,U+j*_))),w&&(L=Cu(F,Tu(Y,O-W*w)),$=Cu(F,Tu(Y,J+W*w)));break}}G<R&&(_*=-1,_t=I,I=U,U=_t,_t=R,R=G,G=_t,v in uye&&ke.attr("cursor",H0[v=uye[v]])),$<L&&(w*=-1,_t=O,O=J,J=_t,_t=L,L=$,$=_t,v in lye&&ke.attr("cursor",H0[v=lye[v]])),S.selection&&(A=S.selection),Z&&(R=A[0][0],G=A[1][0]),re&&(L=A[0][1],$=A[1][1]),(A[0][0]!==R||A[0][1]!==L||A[1][0]!==G||A[1][1]!==$)&&(S.selection=[[R,L],[G,$]],l.call(y),pe.brush(Ie,b.name))}function Ke(Ie){if(uTt(Ie),Ie.touches){if(Ie.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else cSt(Ie.view,B),it.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Te.attr("pointer-events","all"),ke.attr("cursor",H0.overlay),S.selection&&(A=S.selection),mTt(A)&&(S.selection=null,l.call(y)),pe.end(Ie,b.name)}function Ct(Ie){switch(Ie.keyCode){case 16:{q=_&&w;break}case 18:{b===KE&&(_&&(U=G-j*_,I=R+j*_),w&&(J=$-W*w,O=L+W*w),b=XE,ut(Ie));break}case 32:{(b===KE||b===XE)&&(_<0?U=G-j:_>0&&(I=R-j),w<0?J=$-W:w>0&&(O=L-W),b=NV,ke.attr("cursor",H0.selection),ut(Ie));break}default:return}RV(Ie)}function gt(Ie){switch(Ie.keyCode){case 16:{q&&(Z=re=q=!1,ut(Ie));break}case 18:{b===XE&&(_<0?U=G:_>0&&(I=R),w<0?J=$:w>0&&(O=L),b=KE,ut(Ie));break}case 32:{b===NV&&(Ie.altKey?(_&&(U=G-j*_,I=R+j*_),w&&(J=$-W*w,O=L+W*w),b=XE):(_<0?U=G:_>0&&(I=R),w<0?J=$:w>0&&(O=L),b=KE),ke.attr("cursor",H0[v]),ut(Ie));break}default:return}RV(Ie)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=lY(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:kV(lY(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:kV(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:kV(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const cY=Math.PI,fY=2*cY,Ox=1e-6,gTt=fY-Ox;function VNe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function yTt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return VNe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let qte=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?VNe:yTt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Ox)if(!(Math.abs(f*u-l*c)>Ox)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((cY-Math.acos((m+d-g)/(2*y*v)))/2),_=b/v,w=b/y;Math.abs(_-1)>Ox&&this._append`L${t+_*c},${n+_*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+w*u},${this._y1=n+w*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Ox||Math.abs(this._y1-c)>Ox)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%fY+fY),d>gTt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Ox&&this._append`A${r},${r},0,${+(d>=cY)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function wB(){return new qte}wB.prototype=qte.prototype;const Fg=11102230246251565e-32,Au=134217729,vTt=(3+8*Fg)*Fg;function OV(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function bTt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function SN(e){return new Float64Array(e)}const xTt=(3+16*Fg)*Fg,wTt=(2+12*Fg)*Fg,_Tt=(9+64*Fg)*Fg*Fg,QE=SN(4),cye=SN(8),fye=SN(12),dye=SN(16),yl=SN(4);function ETt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,_,w,S,T,A;const k=e-i,I=n-i,R=t-s,F=r-s;_=k*F,d=Au*k,h=d-(d-k),p=k-h,d=Au*F,m=d-(d-F),g=F-m,w=p*g-(_-h*m-p*m-h*g),S=R*I,d=Au*R,h=d-(d-R),p=R-h,d=Au*I,m=d-(d-I),g=I-m,T=p*g-(S-h*m-p*m-h*g),y=w-T,f=w-y,QE[0]=w-(y+f)+(f-T),v=_+y,f=v-_,b=_-(v-f)+(y-f),y=b-S,f=b-y,QE[1]=b-(y+f)+(f-S),A=v+y,f=A-v,QE[2]=v-(A-f)+(y-f),QE[3]=A;let O=bTt(4,QE),L=wTt*o;if(O>=L||-O>=L||(f=e-k,a=e-(k+f)+(f-i),f=n-I,l=n-(I+f)+(f-i),f=t-R,u=t-(R+f)+(f-s),f=r-F,c=r-(F+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(L=_Tt*o+vTt*Math.abs(O),O+=k*c+F*a-(R*l+I*u),O>=L||-O>=L))return O;_=a*F,d=Au*a,h=d-(d-a),p=a-h,d=Au*F,m=d-(d-F),g=F-m,w=p*g-(_-h*m-p*m-h*g),S=u*I,d=Au*u,h=d-(d-u),p=u-h,d=Au*I,m=d-(d-I),g=I-m,T=p*g-(S-h*m-p*m-h*g),y=w-T,f=w-y,yl[0]=w-(y+f)+(f-T),v=_+y,f=v-_,b=_-(v-f)+(y-f),y=b-S,f=b-y,yl[1]=b-(y+f)+(f-S),A=v+y,f=A-v,yl[2]=v-(A-f)+(y-f),yl[3]=A;const H=OV(4,QE,4,yl,cye);_=k*c,d=Au*k,h=d-(d-k),p=k-h,d=Au*c,m=d-(d-c),g=c-m,w=p*g-(_-h*m-p*m-h*g),S=R*l,d=Au*R,h=d-(d-R),p=R-h,d=Au*l,m=d-(d-l),g=l-m,T=p*g-(S-h*m-p*m-h*g),y=w-T,f=w-y,yl[0]=w-(y+f)+(f-T),v=_+y,f=v-_,b=_-(v-f)+(y-f),y=b-S,f=b-y,yl[1]=b-(y+f)+(f-S),A=v+y,f=A-v,yl[2]=v-(A-f)+(y-f),yl[3]=A;const U=OV(H,cye,4,yl,fye);_=a*c,d=Au*a,h=d-(d-a),p=a-h,d=Au*c,m=d-(d-c),g=c-m,w=p*g-(_-h*m-p*m-h*g),S=u*l,d=Au*u,h=d-(d-u),p=u-h,d=Au*l,m=d-(d-l),g=l-m,T=p*g-(S-h*m-p*m-h*g),y=w-T,f=w-y,yl[0]=w-(y+f)+(f-T),v=_+y,f=v-_,b=_-(v-f)+(y-f),y=b-S,f=b-y,yl[1]=b-(y+f)+(f-S),A=v+y,f=A-v,yl[2]=v-(A-f)+(y-f),yl[3]=A;const G=OV(U,fye,4,yl,dye);return dye[G-1]}function v4(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=xTt*l?u:-ETt(e,t,n,r,i,s,l)}const hye=Math.pow(2,-52),b4=new Uint32Array(512);class c8{static from(t,n=DTt,r=ITt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new c8(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let k=0;k<o;k++){const I=t[2*k],R=t[2*k+1];I<a&&(a=I),R<u&&(u=R),I>l&&(l=I),R>c&&(c=R),this._ids[k]=k}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let k=0,I=1/0;k<o;k++){const R=FV(f,d,t[2*k],t[2*k+1]);R<I&&(h=k,I=R)}const g=t[2*h],y=t[2*h+1];for(let k=0,I=1/0;k<o;k++){if(k===h)continue;const R=FV(g,y,t[2*k],t[2*k+1]);R<I&&R>0&&(p=k,I=R)}let v=t[2*p],b=t[2*p+1],_=1/0;for(let k=0;k<o;k++){if(k===h||k===p)continue;const I=TTt(g,y,v,b,t[2*k],t[2*k+1]);I<_&&(m=k,_=I)}let w=t[2*m],S=t[2*m+1];if(_===1/0){for(let R=0;R<o;R++)this._dists[R]=t[2*R]-t[0]||t[2*R+1]-t[1];Y2(this._ids,this._dists,0,o-1);const k=new Uint32Array(o);let I=0;for(let R=0,F=-1/0;R<o;R++){const O=this._ids[R],L=this._dists[O];L>F&&(k[I++]=O,F=L)}this.hull=k.subarray(0,I),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(v4(g,y,v,b,w,S)<0){const k=p,I=v,R=b;p=m,v=w,b=S,m=k,w=I,S=R}const T=ATt(g,y,v,b,w,S);this._cx=T.x,this._cy=T.y;for(let k=0;k<o;k++)this._dists[k]=FV(t[2*k],t[2*k+1],T.x,T.y);Y2(this._ids,this._dists,0,o-1),this._hullStart=h;let A=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(w,S)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let k=0,I,R;k<this._ids.length;k++){const F=this._ids[k],O=t[2*F],L=t[2*F+1];if(k>0&&Math.abs(O-I)<=hye&&Math.abs(L-R)<=hye||(I=O,R=L,F===h||F===p||F===m))continue;let H=0;for(let $=0,j=this._hashKey(O,L);$<this._hashSize&&(H=s[(j+$)%this._hashSize],!(H!==-1&&H!==r[H]));$++);H=n[H];let U=H,G;for(;G=r[U],v4(O,L,t[2*U],t[2*U+1],t[2*G],t[2*G+1])>=0;)if(U=G,U===H){U=-1;break}if(U===-1)continue;let Y=this._addTriangle(U,F,r[U],-1,-1,i[U]);i[F]=this._legalize(Y+2),i[U]=Y,A++;let J=r[U];for(;G=r[J],v4(O,L,t[2*J],t[2*J+1],t[2*G],t[2*G+1])<0;)Y=this._addTriangle(J,F,G,i[F],-1,i[J]),i[F]=this._legalize(Y+2),r[J]=J,A--,J=G;if(U===H)for(;G=n[U],v4(O,L,t[2*G],t[2*G+1],t[2*U],t[2*U+1])<0;)Y=this._addTriangle(G,F,U,-1,i[U],i[G]),this._legalize(Y+2),i[G]=Y,r[U]=U,A--,U=G;this._hullStart=n[F]=U,r[U]=n[J]=F,r[F]=J,s[this._hashKey(O,L)]=F,s[this._hashKey(t[2*U],t[2*U+1])]=U}this.hull=new Uint32Array(A);for(let k=0,I=this._hullStart;k<A;k++)this.hull[k]=I,I=r[I];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(STt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=b4[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(CTt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<b4.length&&(b4[s++]=v)}else{if(s===0)break;t=b4[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function STt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function FV(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function CTt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function TTt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function ATt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function Y2(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;CD(e,i,s),t[e[n]]>t[e[r]]&&CD(e,n,r),t[e[s]]>t[e[r]]&&CD(e,s,r),t[e[n]]>t[e[s]]&&CD(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;CD(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Y2(e,t,s,r),Y2(e,t,n,o-1)):(Y2(e,t,n,o-1),Y2(e,t,s,r))}}function CD(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function DTt(e){return e[0]}function ITt(e){return e[1]}const pye=1e-6;class pw{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>pye||Math.abs(this._y1-s)>pye)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class dY{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let kTt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const _=r[m]*2,w=r[m+1]*2,S=r[m+2]*2,T=t[_],A=t[_+1],k=t[w],I=t[w+1],R=t[S],F=t[S+1],O=k-T,L=I-A,H=R-T,U=F-A,G=(O*U-L*H)*2;if(Math.abs(G)<1e-9){if(s===void 0){s=o=0;for(const J of n)s+=t[J*2],o+=t[J*2+1];s/=n.length,o/=n.length}const Y=1e9*Math.sign((s-T)*U-(o-A)*H);v=(T+R)/2-Y*U,b=(A+F)/2+Y*H}else{const Y=1/G,J=O*O+L*L,$=H*H+U*U;v=T+(U*J-L*$)*Y,b=A+(O*$-H*J)*Y}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new pw:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new pw:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new pw:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new dY;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const RTt=2*Math.PI,JE=Math.pow;function NTt(e){return e[0]}function PTt(e){return e[1]}function OTt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function FTt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Wte{static from(t,n=NTt,r=PTt,i){return new Wte("length"in t?MTt(t,n,r,i):Float64Array.from($Tt(t,n,r,i)))}constructor(t){this._delaunator=new c8(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&OTt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=FTt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new c8(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new kTt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=JE(n-l[t*2],2)+JE(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=JE(n-l[p*2],2)+JE(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&JE(n-l[h*2],2)+JE(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new pw:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new pw:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,RTt)}return r&&r.value()}renderHull(t){const n=t==null?t=new pw:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new dY;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new pw:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new dY;return this.renderTriangle(t,n),n.value()}}function MTt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*$Tt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var mye={},MV={},$V=34,TD=10,LV=13;function HNe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function LTt(e,t){var n=HNe(e);return function(r,i){return t(n(r),i,e)}}function gye(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function uc(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function BTt(e){return e<0?"-"+uc(-e,6):e>9999?"+"+uc(e,6):uc(e,4)}function jTt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":BTt(e.getUTCFullYear())+"-"+uc(e.getUTCMonth()+1,2)+"-"+uc(e.getUTCDate(),2)+(i?"T"+uc(t,2)+":"+uc(n,2)+":"+uc(r,2)+"."+uc(i,3)+"Z":r?"T"+uc(t,2)+":"+uc(n,2)+":"+uc(r,2)+"Z":n||t?"T"+uc(t,2)+":"+uc(n,2)+"Z":"")}function qNe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?LTt(g,d):HNe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===TD&&--p,f.charCodeAt(p-1)===LV&&--p;function _(){if(v)return MV;if(b)return b=!1,mye;var S,T=m,A;if(f.charCodeAt(T)===$V){for(;m++<p&&f.charCodeAt(m)!==$V||f.charCodeAt(++m)===$V;);return(S=m)>=p?v=!0:(A=f.charCodeAt(m++))===TD?b=!0:A===LV&&(b=!0,f.charCodeAt(m)===TD&&++m),f.slice(T+1,S-1).replace(/""/g,'"')}for(;m<p;){if((A=f.charCodeAt(S=m++))===TD)b=!0;else if(A===LV)b=!0,f.charCodeAt(m)===TD&&++m;else if(A!==n)continue;return f.slice(T,S)}return v=!0,f.slice(T,p)}for(;(y=_())!==MV;){for(var w=[];y!==mye&&y!==MV;)w.push(y),y=_();d&&(w=d(w,g++))==null||h.push(w)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=gye(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=gye(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?jTt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var UTt=qNe(","),zTt=UTt.parse;function VTt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function HTt(e,t){return fetch(e,t).then(VTt)}function qTt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),HTt(t,n).then(function(i){return e(i,r)})}}var WNe=qTt(zTt);function WTt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function GTt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return GNe(this.cover(t,n),t,n,e)}function GNe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function YTt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)GNe(this,o[n],a[n],e[n]);return this}function KTt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function XTt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function QTt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Dl(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function JTt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Dl(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new Dl(h[3],g,y,u,l),new Dl(h[2],o,y,g,l),new Dl(h[1],g,a,u,y),new Dl(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),_=v*v+b*b;if(_<n){var w=Math.sqrt(n=_);i=e-w,s=t-w,c=e+w,f=t+w,r=h.data}}return r}function ZTt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function eAt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function tAt(){return this._root}function nAt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function rAt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Dl(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Dl(i,l,c,a,u)),(i=r[2])&&t.push(new Dl(i,s,c,l,u)),(i=r[1])&&t.push(new Dl(i,l,o,a,c)),(i=r[0])&&t.push(new Dl(i,s,o,l,c))}return this}function iAt(e){var t=[],n=[],r;for(this._root&&t.push(new Dl(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Dl(s,o,a,c,f)),(s=i[1])&&t.push(new Dl(s,c,a,u,f)),(s=i[2])&&t.push(new Dl(s,o,f,c,l)),(s=i[3])&&t.push(new Dl(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function sAt(e){return e[0]}function oAt(e){return arguments.length?(this._x=e,this):this._x}function aAt(e){return e[1]}function uAt(e){return arguments.length?(this._y=e,this):this._y}function Gte(e,t,n){var r=new Yte(t??sAt,n??aAt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function Yte(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function yye(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Yl=Gte.prototype=Yte.prototype;Yl.copy=function(){var e=new Yte(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=yye(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=yye(r));return e};Yl.add=GTt;Yl.addAll=YTt;Yl.cover=KTt;Yl.data=XTt;Yl.extent=QTt;Yl.find=JTt;Yl.remove=ZTt;Yl.removeAll=eAt;Yl.root=tAt;Yl.size=nAt;Yl.visit=rAt;Yl.visitAfter=iAt;Yl.x=oAt;Yl.y=uAt;function kl(e){return function(){return e}}function B1(e){return(e()-.5)*1e-6}function lAt(e){return e.x+e.vx}function cAt(e){return e.y+e.vy}function fAt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=kl(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=Gte(t,lAt,cAt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,_,w,S,T){var A=b.data,k=b.r,I=m+k;if(A){if(A.index>d.index){var R=h-A.x-A.vx,F=p-A.y-A.vy,O=R*R+F*F;O<I*I&&(R===0&&(R=B1(r),O+=R*R),F===0&&(F=B1(r),O+=F*F),O=(I-(O=Math.sqrt(O)))/O*i,d.vx+=(R*=O)*(I=(k*=k)/(g+k)),d.vy+=(F*=O)*I,A.vx-=R*(I=1-I),A.vy-=F*I)}return}return _>h+I||S<h-I||w>p+I||T<p-I}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:kl(+l),u(),o):e},o}function dAt(e){return e.index}function vye(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function hAt(e){var t=dAt,n=f,r,i=kl(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,_,w,S,T,A,k,I;b<v;++b)_=e[b],w=_.source,S=_.target,T=S.x+S.vx-w.x-w.vx||B1(l),A=S.y+S.vy-w.y-w.vy||B1(l),k=Math.sqrt(T*T+A*A),k=(k-s[b])/k*g*r[b],T*=k,A*=k,S.vx-=T*(I=u[b]),S.vy-=A*I,w.vx+=T*(I=1-I),w.vy+=A*I}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((w,S)=>[t(w,S,o),w])),_;for(g=0,a=new Array(y);g<v;++g)_=e[g],_.index=g,typeof _.source!="object"&&(_.source=vye(b,_.source)),typeof _.target!="object"&&(_.target=vye(b,_.target)),a[_.source.index]=(a[_.source.index]||0)+1,a[_.target.index]=(a[_.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)_=e[g],u[g]=a[_.source.index]/(a[_.source.index]+a[_.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:kl(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:kl(+g),m(),d):i},d}const pAt=1664525,mAt=1013904223,bye=4294967296;function gAt(){let e=1;return()=>(e=(pAt*e+mAt)%bye)/bye}function yAt(e){return e.x}function vAt(e){return e.y}var bAt=10,xAt=Math.PI*(3-Math.sqrt(5));function wAt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=Ute(f),l=hB("tick","end"),c=gAt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(_){_(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=bAt*Math.sqrt(.5+m),b=m*xAt;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,_,w,S,T,A;for(y==null?y=1/0:y*=y,v=0;v<b;++v)T=e[v],_=m-T.x,w=g-T.y,S=_*_+w*w,S<y&&(A=T,y=S);return A},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function _At(){var e,t,n,r,i=kl(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=Gte(e,yAt,vAt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,_;if(h.length){for(v=b=_=0;_<4;++_)(m=h[_])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,_=y*y+v*v;if(b*b/u<_)return _<a&&(y===0&&(y=B1(n),_+=y*y),v===0&&(v=B1(n),_+=v*v),_<o&&(_=Math.sqrt(o*_)),t.vx+=y*h.value*r/_,t.vy+=v*h.value*r/_),!0;if(h.length||_>=a)return;(h.data!==t||h.next)&&(y===0&&(y=B1(n),_+=y*y),v===0&&(v=B1(n),_+=v*v),_<o&&(_=Math.sqrt(o*_)));do h.data!==t&&(b=s[h.data.index]*r/_,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:kl(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function EAt(e){var t=kl(.1),n,r,i;typeof e!="function"&&(e=kl(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:kl(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:kl(+a),o(),s):e},s}function SAt(e){var t=kl(.1),n,r,i;typeof e!="function"&&(e=kl(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:kl(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:kl(+a),o(),s):e},s}function CAt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function f8(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function gC(e){return e=f8(Math.abs(e)),e?e[1]:NaN}function TAt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function AAt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var DAt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Jw(e){if(!(t=DAt.exec(e)))throw new Error("invalid format: "+e);var t;return new Kte({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Jw.prototype=Kte.prototype;function Kte(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Kte.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function IAt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var YNe;function kAt(e,t){var n=f8(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(YNe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+f8(e,Math.max(0,t+s-1))[0]}function xye(e,t){var n=f8(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const wye={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:CAt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>xye(e*100,t),r:xye,s:kAt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function _ye(e){return e}var Eye=Array.prototype.map,Sye=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function KNe(e){var t=e.grouping===void 0||e.thousands===void 0?_ye:TAt(Eye.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?_ye:AAt(Eye.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Jw(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,_=f.trim,w=f.type;w==="n"?(v=!0,w="g"):wye[w]||(b===void 0&&(b=12),_=!0,w="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",T=m==="$"?r:/[%p]/.test(w)?o:"",A=wye[w],k=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function I(R){var F=S,O=T,L,H,U;if(w==="c")O=A(R)+O,R="";else{R=+R;var G=R<0||1/R<0;if(R=isNaN(R)?u:A(Math.abs(R),b),_&&(R=IAt(R)),G&&+R==0&&p!=="+"&&(G=!1),F=(G?p==="("?p:a:p==="-"||p==="("?"":p)+F,O=(w==="s"?Sye[8+YNe/3]:"")+O+(G&&p==="("?")":""),k){for(L=-1,H=R.length;++L<H;)if(U=R.charCodeAt(L),48>U||U>57){O=(U===46?i+R.slice(L+1):R.slice(L))+O,R=R.slice(0,L);break}}}v&&!g&&(R=t(R,1/0));var Y=F.length+R.length+O.length,J=Y<y?new Array(y-Y+1).join(d):"";switch(v&&g&&(R=t(J+R,J.length?y-O.length:1/0),J=""),h){case"<":R=F+R+O+J;break;case"=":R=F+J+R+O;break;case"^":R=J.slice(0,Y=J.length>>1)+F+R+O+J.slice(Y);break;default:R=J+F+R+O;break}return s(R)}return I.toString=function(){return f+""},I}function c(f,d){var h=l((f=Jw(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(gC(d)/3)))*3,m=Math.pow(10,-p),g=Sye[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var x4,kb,Xte;RAt({thousands:",",grouping:[3],currency:["$",""]});function RAt(e){return x4=KNe(e),kb=x4.format,Xte=x4.formatPrefix,x4}function XNe(e){return Math.max(0,-gC(Math.abs(e)))}function QNe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(gC(t)/3)))*3-gC(Math.abs(e)))}function JNe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,gC(t)-gC(e))+1}var Tn=1e-6,hY=1e-12,Cr=Math.PI,fo=Cr/2,d8=Cr/4,Ul=Cr*2,_o=180/Cr,Er=Cr/180,Yr=Math.abs,WT=Math.atan,jd=Math.atan2,Cn=Math.cos,w4=Math.ceil,ZNe=Math.exp,pY=Math.hypot,h8=Math.log,BV=Math.pow,gn=Math.sin,Id=Math.sign||function(e){return e>0?1:e<0?-1:0},zl=Math.sqrt,Qte=Math.tan;function ePe(e){return e>1?0:e<-1?Cr:Math.acos(e)}function jc(e){return e>1?fo:e<-1?-fo:Math.asin(e)}function iu(){}function p8(e,t){e&&Tye.hasOwnProperty(e.type)&&Tye[e.type](e,t)}var Cye={Feature:function(e,t){p8(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)p8(n[r].geometry,t)}},Tye={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){mY(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)mY(n[r],t,0)},Polygon:function(e,t){Aye(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Aye(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)p8(n[r],t)}};function mY(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Aye(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)mY(e[n],t,1);t.polygonEnd()}function lg(e,t){e&&Cye.hasOwnProperty(e.type)?Cye[e.type](e,t):p8(e,t)}var m8=new Ol,g8=new Ol,tPe,nPe,gY,yY,vY,Vm={point:iu,lineStart:iu,lineEnd:iu,polygonStart:function(){m8=new Ol,Vm.lineStart=NAt,Vm.lineEnd=PAt},polygonEnd:function(){var e=+m8;g8.add(e<0?Ul+e:e),this.lineStart=this.lineEnd=this.point=iu},sphere:function(){g8.add(Ul)}};function NAt(){Vm.point=OAt}function PAt(){rPe(tPe,nPe)}function OAt(e,t){Vm.point=rPe,tPe=e,nPe=t,e*=Er,t*=Er,gY=e,yY=Cn(t=t/2+d8),vY=gn(t)}function rPe(e,t){e*=Er,t*=Er,t=t/2+d8;var n=e-gY,r=n>=0?1:-1,i=r*n,s=Cn(t),o=gn(t),a=vY*o,u=yY*s+a*Cn(i),l=a*r*gn(i);m8.add(jd(l,u)),gY=e,yY=s,vY=o}function FAt(e){return g8=new Ol,lg(e,Vm),g8*2}function y8(e){return[jd(e[1],e[0]),jc(e[2])]}function Zw(e){var t=e[0],n=e[1],r=Cn(n);return[r*Cn(t),r*gn(t),gn(n)]}function _4(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function yC(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function jV(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function E4(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function v8(e){var t=zl(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var qs,gc,to,mf,Fx,iPe,sPe,wS,xk,y1,ny,rg={point:bY,lineStart:Dye,lineEnd:Iye,polygonStart:function(){rg.point=aPe,rg.lineStart=MAt,rg.lineEnd=$At,xk=new Ol,Vm.polygonStart()},polygonEnd:function(){Vm.polygonEnd(),rg.point=bY,rg.lineStart=Dye,rg.lineEnd=Iye,m8<0?(qs=-(to=180),gc=-(mf=90)):xk>Tn?mf=90:xk<-1e-6&&(gc=-90),ny[0]=qs,ny[1]=to},sphere:function(){qs=-(to=180),gc=-(mf=90)}};function bY(e,t){y1.push(ny=[qs=e,to=e]),t<gc&&(gc=t),t>mf&&(mf=t)}function oPe(e,t){var n=Zw([e*Er,t*Er]);if(wS){var r=yC(wS,n),i=[r[1],-r[0],0],s=yC(i,r);v8(s),s=y8(s);var o=e-Fx,a=o>0?1:-1,u=s[0]*_o*a,l,c=Yr(o)>180;c^(a*Fx<u&&u<a*e)?(l=s[1]*_o,l>mf&&(mf=l)):(u=(u+360)%360-180,c^(a*Fx<u&&u<a*e)?(l=-s[1]*_o,l<gc&&(gc=l)):(t<gc&&(gc=t),t>mf&&(mf=t))),c?e<Fx?hf(qs,e)>hf(qs,to)&&(to=e):hf(e,to)>hf(qs,to)&&(qs=e):to>=qs?(e<qs&&(qs=e),e>to&&(to=e)):e>Fx?hf(qs,e)>hf(qs,to)&&(to=e):hf(e,to)>hf(qs,to)&&(qs=e)}else y1.push(ny=[qs=e,to=e]);t<gc&&(gc=t),t>mf&&(mf=t),wS=n,Fx=e}function Dye(){rg.point=oPe}function Iye(){ny[0]=qs,ny[1]=to,rg.point=bY,wS=null}function aPe(e,t){if(wS){var n=e-Fx;xk.add(Yr(n)>180?n+(n>0?360:-360):n)}else iPe=e,sPe=t;Vm.point(e,t),oPe(e,t)}function MAt(){Vm.lineStart()}function $At(){aPe(iPe,sPe),Vm.lineEnd(),Yr(xk)>Tn&&(qs=-(to=180)),ny[0]=qs,ny[1]=to,wS=null}function hf(e,t){return(t-=e)<0?t+360:t}function LAt(e,t){return e[0]-t[0]}function kye(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function BAt(e){var t,n,r,i,s,o,a;if(mf=to=-(qs=gc=1/0),y1=[],lg(e,rg),n=y1.length){for(y1.sort(LAt),t=1,r=y1[0],s=[r];t<n;++t)i=y1[t],kye(r,i[0])||kye(r,i[1])?(hf(r[0],i[1])>hf(r[0],r[1])&&(r[1]=i[1]),hf(i[0],r[1])>hf(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=hf(r[1],i[0]))>o&&(o=a,qs=i[0],to=r[1])}return y1=ny=null,qs===1/0||gc===1/0?[[NaN,NaN],[NaN,NaN]]:[[qs,gc],[to,mf]]}var bI,b8,x8,w8,_8,E8,S8,C8,xY,wY,_Y,uPe,lPe,Cl,Tl,Al,Wh={sphere:iu,point:Jte,lineStart:Rye,lineEnd:Nye,polygonStart:function(){Wh.lineStart=zAt,Wh.lineEnd=VAt},polygonEnd:function(){Wh.lineStart=Rye,Wh.lineEnd=Nye}};function Jte(e,t){e*=Er,t*=Er;var n=Cn(t);CN(n*Cn(e),n*gn(e),gn(t))}function CN(e,t,n){++bI,x8+=(e-x8)/bI,w8+=(t-w8)/bI,_8+=(n-_8)/bI}function Rye(){Wh.point=jAt}function jAt(e,t){e*=Er,t*=Er;var n=Cn(t);Cl=n*Cn(e),Tl=n*gn(e),Al=gn(t),Wh.point=UAt,CN(Cl,Tl,Al)}function UAt(e,t){e*=Er,t*=Er;var n=Cn(t),r=n*Cn(e),i=n*gn(e),s=gn(t),o=jd(zl((o=Tl*s-Al*i)*o+(o=Al*r-Cl*s)*o+(o=Cl*i-Tl*r)*o),Cl*r+Tl*i+Al*s);b8+=o,E8+=o*(Cl+(Cl=r)),S8+=o*(Tl+(Tl=i)),C8+=o*(Al+(Al=s)),CN(Cl,Tl,Al)}function Nye(){Wh.point=Jte}function zAt(){Wh.point=HAt}function VAt(){cPe(uPe,lPe),Wh.point=Jte}function HAt(e,t){uPe=e,lPe=t,e*=Er,t*=Er,Wh.point=cPe;var n=Cn(t);Cl=n*Cn(e),Tl=n*gn(e),Al=gn(t),CN(Cl,Tl,Al)}function cPe(e,t){e*=Er,t*=Er;var n=Cn(t),r=n*Cn(e),i=n*gn(e),s=gn(t),o=Tl*s-Al*i,a=Al*r-Cl*s,u=Cl*i-Tl*r,l=pY(o,a,u),c=jc(l),f=l&&-c/l;xY.add(f*o),wY.add(f*a),_Y.add(f*u),b8+=c,E8+=c*(Cl+(Cl=r)),S8+=c*(Tl+(Tl=i)),C8+=c*(Al+(Al=s)),CN(Cl,Tl,Al)}function qAt(e){bI=b8=x8=w8=_8=E8=S8=C8=0,xY=new Ol,wY=new Ol,_Y=new Ol,lg(e,Wh);var t=+xY,n=+wY,r=+_Y,i=pY(t,n,r);return i<hY&&(t=E8,n=S8,r=C8,b8<Tn&&(t=x8,n=w8,r=_8),i=pY(t,n,r),i<hY)?[NaN,NaN]:[jd(n,t)*_o,jc(r/i)*_o]}function EY(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function SY(e,t){return Yr(e)>Cr&&(e-=Math.round(e/Ul)*Ul),[e,t]}SY.invert=SY;function fPe(e,t,n){return(e%=Ul)?t||n?EY(Oye(e),Fye(t,n)):Oye(e):t||n?Fye(t,n):SY}function Pye(e){return function(t,n){return t+=e,Yr(t)>Cr&&(t-=Math.round(t/Ul)*Ul),[t,n]}}function Oye(e){var t=Pye(e);return t.invert=Pye(-e),t}function Fye(e,t){var n=Cn(e),r=gn(e),i=Cn(t),s=gn(t);function o(a,u){var l=Cn(u),c=Cn(a)*l,f=gn(a)*l,d=gn(u),h=d*n+c*r;return[jd(f*i-h*s,c*n-d*r),jc(h*i+f*s)]}return o.invert=function(a,u){var l=Cn(u),c=Cn(a)*l,f=gn(a)*l,d=gn(u),h=d*i-f*s;return[jd(f*i+d*s,c*n+h*r),jc(h*n-c*r)]},o}function WAt(e){e=fPe(e[0]*Er,e[1]*Er,e.length>2?e[2]*Er:0);function t(n){return n=e(n[0]*Er,n[1]*Er),n[0]*=_o,n[1]*=_o,n}return t.invert=function(n){return n=e.invert(n[0]*Er,n[1]*Er),n[0]*=_o,n[1]*=_o,n},t}function GAt(e,t,n,r,i,s){if(n){var o=Cn(t),a=gn(t),u=r*n;i==null?(i=t+r*Ul,s=t-u/2):(i=Mye(o,i),s=Mye(o,s),(r>0?i<s:i>s)&&(i+=r*Ul));for(var l,c=i;r>0?c>s:c<s;c-=u)l=y8([o,-a*Cn(c),-a*gn(c)]),e.point(l[0],l[1])}}function Mye(e,t){t=Zw(t),t[0]-=e,v8(t);var n=ePe(-t[1]);return((-t[2]<0?-n:n)+Ul-Tn)%Ul}function dPe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:iu,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function cF(e,t){return Yr(e[0]-t[0])<Tn&&Yr(e[1]-t[1])<Tn}function S4(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function hPe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(cF(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Tn}s.push(v=new S4(g,p,null,!0)),o.push(v.o=new S4(g,null,v,!1)),s.push(v=new S4(y,p,null,!1)),o.push(v.o=new S4(y,null,v,!0))}}),!!s.length){for(o.sort(t),$ye(s),$ye(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function $ye(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function UV(e){return Yr(e[0])<=Cr?e[0]:Id(e[0])*((Yr(e[0])+Cr)%Ul-Cr)}function YAt(e,t){var n=UV(t),r=t[1],i=gn(r),s=[gn(n),-Cn(n),0],o=0,a=0,u=new Ol;i===1?r=fo+Tn:i===-1&&(r=-fo-Tn);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=UV(h),m=h[1]/2+d8,g=gn(m),y=Cn(m),v=0;v<d;++v,p=_,g=S,y=T,h=b){var b=f[v],_=UV(b),w=b[1]/2+d8,S=gn(w),T=Cn(w),A=_-p,k=A>=0?1:-1,I=k*A,R=I>Cr,F=g*S;if(u.add(jd(F*k*gn(I),y*T+F*Cn(I))),o+=R?A+k*Ul:A,R^p>=n^_>=n){var O=yC(Zw(h),Zw(b));v8(O);var L=yC(s,O);v8(L);var H=(R^A>=0?-1:1)*jc(L[2]);(r>H||r===H&&(O[0]||O[1]))&&(a+=R^A>=0?1:-1)}}return(o<-1e-6||o<Tn&&u<-1e-12)^a&1}function pPe(e,t,n,r){return function(i){var s=t(i),o=dPe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=q3e(c);var _=YAt(l,r);c.length?(u||(i.polygonStart(),u=!0),hPe(c,XAt,_,n,i)):_&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(_,w){e(_,w)&&i.point(_,w)}function p(_,w){s.point(_,w)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(_,w){f.push([_,w]),a.point(_,w)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var _=a.clean(),w=o.result(),S,T=w.length,A,k,I;if(f.pop(),l.push(f),f=null,!!T){if(_&1){if(k=w[0],(A=k.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),S=0;S<A;++S)i.point((I=k[S])[0],I[1]);i.lineEnd()}return}T>1&&_&2&&w.push(w.pop().concat(w.shift())),c.push(w.filter(KAt))}}return d}}function KAt(e){return e.length>1}function XAt(e,t){return((e=e.x)[0]<0?e[1]-fo-Tn:fo-e[1])-((t=t.x)[0]<0?t[1]-fo-Tn:fo-t[1])}const Lye=pPe(function(){return!0},QAt,ZAt,[-Cr,-fo]);function QAt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Cr:-Cr,u=Yr(s-t);Yr(u-Cr)<Tn?(e.point(t,n=(n+o)/2>0?fo:-fo),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Cr&&(Yr(t-r)<Tn&&(t-=r*Tn),Yr(s-a)<Tn&&(s-=a*Tn),n=JAt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function JAt(e,t,n,r){var i,s,o=gn(e-n);return Yr(o)>Tn?WT((gn(t)*(s=Cn(r))*gn(n)-gn(r)*(i=Cn(t))*gn(e))/(i*s*o)):(t+r)/2}function ZAt(e,t,n,r){var i;if(e==null)i=n*fo,r.point(-Cr,i),r.point(0,i),r.point(Cr,i),r.point(Cr,0),r.point(Cr,-i),r.point(0,-i),r.point(-Cr,-i),r.point(-Cr,0),r.point(-Cr,i);else if(Yr(e[0]-t[0])>Tn){var s=e[0]<t[0]?Cr:-Cr;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function eDt(e){var t=Cn(e),n=2*Er,r=t>0,i=Yr(t)>Tn;function s(c,f,d,h){GAt(h,e,n,d,c,f)}function o(c,f){return Cn(c)*Cn(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,_=o(g,y),w=r?_?0:l(g,y):_?l(g+(g<0?Cr:-Cr),y):0;if(!f&&(p=h=_)&&c.lineStart(),_!==h&&(b=u(f,v),(!b||cF(f,b)||cF(v,b))&&(v[2]=1)),_!==h)m=0,_?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^_){var S;!(w&d)&&(S=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}_&&(!f||!cF(f,v))&&c.point(v[0],v[1]),f=v,h=_,d=w},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=Zw(c),p=Zw(f),m=[1,0,0],g=yC(h,p),y=_4(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var _=t*y/b,w=-t*v/b,S=yC(m,g),T=E4(m,_),A=E4(g,w);jV(T,A);var k=S,I=_4(T,k),R=_4(k,k),F=I*I-R*(_4(T,T)-1);if(!(F<0)){var O=zl(F),L=E4(k,(-I-O)/R);if(jV(L,T),L=y8(L),!d)return L;var H=c[0],U=f[0],G=c[1],Y=f[1],J;U<H&&(J=H,H=U,U=J);var $=U-H,j=Yr($-Cr)<Tn,W=j||$<Tn;if(!j&&Y<G&&(J=G,G=Y,Y=J),W?j?G+Y>0^L[1]<(Yr(L[0]-H)<Tn?G:Y):G<=L[1]&&L[1]<=Y:$>Cr^(H<=L[0]&&L[0]<=U)){var B=E4(k,(-I+O)/R);return jV(B,T),[L,y8(B)]}}}function l(c,f){var d=r?e:Cr-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return pPe(o,a,s,r?[0,-e]:[-Cr,e-Cr])}function tDt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var C4=1e9,T4=-1e9;function mPe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Yr(l[0]-e)<Tn?c>0?0:3:Yr(l[0]-n)<Tn?c>0?2:1:Yr(l[1]-t)<Tn?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=dPe(),d,h,p,m,g,y,v,b,_,w,S,T={point:A,lineStart:F,lineEnd:O,polygonStart:I,polygonEnd:R};function A(H,U){i(H,U)&&c.point(H,U)}function k(){for(var H=0,U=0,G=h.length;U<G;++U)for(var Y=h[U],J=1,$=Y.length,j=Y[0],W,B,q=j[0],Z=j[1];J<$;++J)W=q,B=Z,j=Y[J],q=j[0],Z=j[1],B<=r?Z>r&&(q-W)*(r-B)>(Z-B)*(e-W)&&++H:Z<=r&&(q-W)*(r-B)<(Z-B)*(e-W)&&--H;return H}function I(){c=f,d=[],h=[],S=!0}function R(){var H=k(),U=S&&H,G=(d=q3e(d)).length;(U||G)&&(l.polygonStart(),U&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),G&&hPe(d,a,H,s,l),l.polygonEnd()),c=l,d=h=p=null}function F(){T.point=L,h&&h.push(p=[]),w=!0,_=!1,v=b=NaN}function O(){d&&(L(m,g),y&&_&&f.rejoin(),d.push(f.result())),T.point=A,_&&c.lineEnd()}function L(H,U){var G=i(H,U);if(h&&p.push([H,U]),w)m=H,g=U,y=G,w=!1,G&&(c.lineStart(),c.point(H,U));else if(G&&_)c.point(H,U);else{var Y=[v=Math.max(T4,Math.min(C4,v)),b=Math.max(T4,Math.min(C4,b))],J=[H=Math.max(T4,Math.min(C4,H)),U=Math.max(T4,Math.min(C4,U))];tDt(Y,J,e,t,n,r)?(_||(c.lineStart(),c.point(Y[0],Y[1])),c.point(J[0],J[1]),G||c.lineEnd(),S=!1):G&&(c.lineStart(),c.point(H,U),S=!1)}v=H,b=U,_=G}return T}}function Bye(e,t,n){var r=Cc(e,t-Tn,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function jye(e,t,n){var r=Cc(e,t-Tn,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function nDt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Cc(w4(r/c)*c,n,c).map(p).concat(Cc(w4(a/f)*f,o,f).map(m)).concat(Cc(w4(t/u)*u,e,u).filter(function(b){return Yr(b%c)>Tn}).map(d)).concat(Cc(w4(s/l)*l,i,l).filter(function(b){return Yr(b%f)>Tn}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=Bye(s,i,90),h=jye(t,e,g),p=Bye(a,o,90),m=jye(r,n,g),y):g},y.extentMajor([[-180,-90+Tn],[180,90-Tn]]).extentMinor([[-180,-80-Tn],[180,80+Tn]])}const UR=e=>e;var zV=new Ol,CY=new Ol,gPe,yPe,TY,AY,cg={point:iu,lineStart:iu,lineEnd:iu,polygonStart:function(){cg.lineStart=rDt,cg.lineEnd=sDt},polygonEnd:function(){cg.lineStart=cg.lineEnd=cg.point=iu,zV.add(Yr(CY)),CY=new Ol},result:function(){var e=zV/2;return zV=new Ol,e}};function rDt(){cg.point=iDt}function iDt(e,t){cg.point=vPe,gPe=TY=e,yPe=AY=t}function vPe(e,t){CY.add(AY*e-TY*t),TY=e,AY=t}function sDt(){vPe(gPe,yPe)}var vC=1/0,T8=vC,zR=-vC,A8=zR,D8={point:oDt,lineStart:iu,lineEnd:iu,polygonStart:iu,polygonEnd:iu,result:function(){var e=[[vC,T8],[zR,A8]];return zR=A8=-(T8=vC=1/0),e}};function oDt(e,t){e<vC&&(vC=e),e>zR&&(zR=e),t<T8&&(T8=t),t>A8&&(A8=t)}var DY=0,IY=0,xI=0,I8=0,k8=0,K2=0,kY=0,RY=0,wI=0,bPe,xPe,um,lm,Td={point:e_,lineStart:Uye,lineEnd:zye,polygonStart:function(){Td.lineStart=lDt,Td.lineEnd=cDt},polygonEnd:function(){Td.point=e_,Td.lineStart=Uye,Td.lineEnd=zye},result:function(){var e=wI?[kY/wI,RY/wI]:K2?[I8/K2,k8/K2]:xI?[DY/xI,IY/xI]:[NaN,NaN];return DY=IY=xI=I8=k8=K2=kY=RY=wI=0,e}};function e_(e,t){DY+=e,IY+=t,++xI}function Uye(){Td.point=aDt}function aDt(e,t){Td.point=uDt,e_(um=e,lm=t)}function uDt(e,t){var n=e-um,r=t-lm,i=zl(n*n+r*r);I8+=i*(um+e)/2,k8+=i*(lm+t)/2,K2+=i,e_(um=e,lm=t)}function zye(){Td.point=e_}function lDt(){Td.point=fDt}function cDt(){wPe(bPe,xPe)}function fDt(e,t){Td.point=wPe,e_(bPe=um=e,xPe=lm=t)}function wPe(e,t){var n=e-um,r=t-lm,i=zl(n*n+r*r);I8+=i*(um+e)/2,k8+=i*(lm+t)/2,K2+=i,i=lm*e-um*t,kY+=i*(um+e),RY+=i*(lm+t),wI+=i*3,e_(um=e,lm=t)}function _Pe(e){this._context=e}_Pe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ul);break}}},result:iu};var NY=new Ol,VV,EPe,SPe,_I,EI,VR={point:iu,lineStart:function(){VR.point=dDt},lineEnd:function(){VV&&CPe(EPe,SPe),VR.point=iu},polygonStart:function(){VV=!0},polygonEnd:function(){VV=null},result:function(){var e=+NY;return NY=new Ol,e}};function dDt(e,t){VR.point=CPe,EPe=_I=e,SPe=EI=t}function CPe(e,t){_I-=e,EI-=t,NY.add(zl(_I*_I+EI*EI)),_I=e,EI=t}let Vye,R8,Hye,qye;class Wye{constructor(t){this._append=t==null?TPe:hDt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Hye||this._append!==R8){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Hye=r,R8=this._append,qye=this._,this._=i}this._+=qye;break}}}result(){const t=this._;return this._="",t.length?t:null}}function TPe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function hDt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return TPe;if(t!==Vye){const n=10**t;Vye=t,R8=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return R8}function APe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),lg(a,i(s))),s.result()}return o.area=function(a){return lg(a,i(cg)),cg.result()},o.measure=function(a){return lg(a,i(VR)),VR.result()},o.bounds=function(a){return lg(a,i(D8)),D8.result()},o.centroid=function(a){return lg(a,i(Td)),Td.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,UR):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Wye(n)):new _Pe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new Wye(n)),o},o.projection(e).digits(n).context(t)}function _B(e){return function(t){var n=new PY;for(var r in e)n[r]=e[r];return n.stream=t,n}}function PY(){}PY.prototype={constructor:PY,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Zte(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),lg(n,e.stream(D8)),t(D8.result()),r!=null&&e.clipExtent(r),e}function EB(e,t,n){return Zte(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function ene(e,t,n){return EB(e,[[0,0],t],n)}function tne(e,t,n){return Zte(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function nne(e,t,n){return Zte(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Gye=16,pDt=Cn(30*Er);function Yye(e,t){return+t?gDt(e,t):mDt(e)}function mDt(e){return _B({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function gDt(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var _=o+d,w=a+h,S=u+p,T=zl(_*_+w*w+S*S),A=jc(S/=T),k=Yr(Yr(S)-1)<Tn||Yr(s-f)<Tn?(s+f)/2:jd(w,_),I=e(k,A),R=I[0],F=I[1],O=R-r,L=F-i,H=v*O-y*L;(H*H/b>t||Yr((y*O+v*L)/b-.5)>.3||o*d+a*h+u*p<pDt)&&(n(r,i,s,o,a,u,R,F,k,_/=T,w/=T,S,m,g),g.point(R,F),n(R,F,k,_,w,S,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:_,polygonStart:function(){r.polygonStart(),g.lineStart=w},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(A,k){A=e(A,k),r.point(A[0],A[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(A,k){var I=Zw([A,k]),R=e(A,k);n(f,d,c,h,p,m,f=R[0],d=R[1],c=A,h=I[0],p=I[1],m=I[2],Gye,r),r.point(f,d)}function _(){g.point=y,r.lineEnd()}function w(){v(),g.point=S,g.lineEnd=T}function S(A,k){b(i=A,k),s=f,o=d,a=h,u=p,l=m,g.point=b}function T(){n(f,d,c,h,p,m,s,o,i,a,u,l,Gye,r),g.lineEnd=_,_()}return g}}var yDt=_B({point:function(e,t){this.stream.point(e*Er,t*Er)}});function vDt(e){return _B({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function bDt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Kye(e,t,n,r,i,s){if(!s)return bDt(e,t,n,r,i);var o=Cn(s),a=gn(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function p0(e){return DPe(function(){return e})()}function DPe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Lye,g=null,y,v,b,_=UR,w=.5,S,T,A,k,I;function R(H){return A(H[0]*Er,H[1]*Er)}function F(H){return H=A.invert(H[0],H[1]),H&&[H[0]*_o,H[1]*_o]}R.stream=function(H){return k&&I===H?k:k=yDt(vDt(c)(m(S(_(I=H)))))},R.preclip=function(H){return arguments.length?(m=H,p=void 0,L()):m},R.postclip=function(H){return arguments.length?(_=H,g=y=v=b=null,L()):_},R.clipAngle=function(H){return arguments.length?(m=+H?eDt(p=H*Er):(p=null,Lye),L()):p*_o},R.clipExtent=function(H){return arguments.length?(_=H==null?(g=y=v=b=null,UR):mPe(g=+H[0][0],y=+H[0][1],v=+H[1][0],b=+H[1][1]),L()):g==null?null:[[g,y],[v,b]]},R.scale=function(H){return arguments.length?(n=+H,O()):n},R.translate=function(H){return arguments.length?(r=+H[0],i=+H[1],O()):[r,i]},R.center=function(H){return arguments.length?(s=H[0]%360*Er,o=H[1]%360*Er,O()):[s*_o,o*_o]},R.rotate=function(H){return arguments.length?(a=H[0]%360*Er,u=H[1]%360*Er,l=H.length>2?H[2]%360*Er:0,O()):[a*_o,u*_o,l*_o]},R.angle=function(H){return arguments.length?(f=H%360*Er,O()):f*_o},R.reflectX=function(H){return arguments.length?(d=H?-1:1,O()):d<0},R.reflectY=function(H){return arguments.length?(h=H?-1:1,O()):h<0},R.precision=function(H){return arguments.length?(S=Yye(T,w=H*H),L()):zl(w)},R.fitExtent=function(H,U){return EB(R,H,U)},R.fitSize=function(H,U){return ene(R,H,U)},R.fitWidth=function(H,U){return tne(R,H,U)},R.fitHeight=function(H,U){return nne(R,H,U)};function O(){var H=Kye(n,0,0,d,h,f).apply(null,t(s,o)),U=Kye(n,r-H[0],i-H[1],d,h,f);return c=fPe(a,u,l),T=EY(t,U),A=EY(c,T),S=Yye(T,w),L()}function L(){return k=I=null,R}return function(){return t=e.apply(this,arguments),R.invert=t.invert&&F,O()}}function rne(e){var t=0,n=Cr/3,r=DPe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Er,n=s[1]*Er):[t*_o,n*_o]},i}function xDt(e){var t=Cn(e);function n(r,i){return[r*t,gn(i)/t]}return n.invert=function(r,i){return[r/t,jc(i*t)]},n}function wDt(e,t){var n=gn(e),r=(n+gn(t))/2;if(Yr(r)<Tn)return xDt(e);var i=1+n*(2*r-n),s=zl(i)/r;function o(a,u){var l=zl(i-2*r*gn(u))/r;return[l*gn(a*=r),s-l*Cn(a)]}return o.invert=function(a,u){var l=s-u,c=jd(a,Yr(l))*Id(l);return l*r<0&&(c-=Cr*Id(a)*Id(l)),[c/r,jc((i-(a*a+l*l)*r*r)/(2*r))]},o}function N8(){return rne(wDt).scale(155.424).center([0,33.6442])}function IPe(){return N8().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function _Dt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function EDt(){var e,t,n=IPe(),r,i=N8().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=N8().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=_Dt([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Tn,m+.12*h+Tn],[p-.214*h-Tn,m+.234*h-Tn]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Tn,m+.166*h+Tn],[p-.115*h-Tn,m+.234*h-Tn]]).stream(l),f()},c.fitExtent=function(d,h){return EB(c,d,h)},c.fitSize=function(d,h){return ene(c,d,h)},c.fitWidth=function(d,h){return tne(c,d,h)},c.fitHeight=function(d,h){return nne(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function kPe(e){return function(t,n){var r=Cn(t),i=Cn(n),s=e(r*i);return s===1/0?[2,0]:[s*i*gn(t),s*gn(n)]}}function TN(e){return function(t,n){var r=zl(t*t+n*n),i=e(r),s=gn(i),o=Cn(i);return[jd(t*s,r*o),jc(r&&n*s/r)]}}var RPe=kPe(function(e){return zl(2/(1+e))});RPe.invert=TN(function(e){return 2*jc(e/2)});function SDt(){return p0(RPe).scale(124.75).clipAngle(180-.001)}var NPe=kPe(function(e){return(e=ePe(e))&&e/gn(e)});NPe.invert=TN(function(e){return e});function CDt(){return p0(NPe).scale(79.4188).clipAngle(180-.001)}function SB(e,t){return[e,h8(Qte((fo+t)/2))]}SB.invert=function(e,t){return[e,2*WT(ZNe(t))-fo]};function TDt(){return PPe(SB).scale(961/Ul)}function PPe(e){var t=p0(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Cr*r(),d=t(WAt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===SB?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function A4(e){return Qte((fo+e)/2)}function ADt(e,t){var n=Cn(e),r=e===t?gn(e):h8(n/Cn(t))/h8(A4(t)/A4(e)),i=n*BV(A4(e),r)/r;if(!r)return SB;function s(o,a){i>0?a<-fo+Tn&&(a=-fo+Tn):a>fo-Tn&&(a=fo-Tn);var u=i/BV(A4(a),r);return[u*gn(r*o),i-u*Cn(r*o)]}return s.invert=function(o,a){var u=i-a,l=Id(r)*zl(o*o+u*u),c=jd(o,Yr(u))*Id(u);return u*r<0&&(c-=Cr*Id(o)*Id(u)),[c/r,2*WT(BV(i/l,1/r))-fo]},s}function DDt(){return rne(ADt).scale(109.5).parallels([30,30])}function P8(e,t){return[e,t]}P8.invert=P8;function IDt(){return p0(P8).scale(152.63)}function kDt(e,t){var n=Cn(e),r=e===t?gn(e):(n-Cn(t))/(t-e),i=n/r+e;if(Yr(r)<Tn)return P8;function s(o,a){var u=i-a,l=r*o;return[u*gn(l),i-u*Cn(l)]}return s.invert=function(o,a){var u=i-a,l=jd(o,Yr(u))*Id(u);return u*r<0&&(l-=Cr*Id(o)*Id(u)),[l/r,i-Id(r)*zl(o*o+u*u)]},s}function RDt(){return rne(kDt).scale(131.154).center([0,13.9389])}var wk=1.340264,_k=-.081106,Ek=893e-6,Sk=.003796,O8=zl(3)/2,NDt=12;function OPe(e,t){var n=jc(O8*gn(t)),r=n*n,i=r*r*r;return[e*Cn(n)/(O8*(wk+3*_k*r+i*(7*Ek+9*Sk*r))),n*(wk+_k*r+i*(Ek+Sk*r))]}OPe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<NDt&&(a=n*(wk+_k*r+i*(Ek+Sk*r))-t,u=wk+3*_k*r+i*(7*Ek+9*Sk*r),n-=o=a/u,r=n*n,i=r*r*r,!(Yr(o)<hY));++s);return[O8*e*(wk+3*_k*r+i*(7*Ek+9*Sk*r))/Cn(n),jc(gn(n)/O8)]};function PDt(){return p0(OPe).scale(177.158)}function FPe(e,t){var n=Cn(t),r=Cn(e)*n;return[n*gn(e)/r,gn(t)/r]}FPe.invert=TN(WT);function ODt(){return p0(FPe).scale(144.049).clipAngle(60)}function FDt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=_B({point:function(_,w){var S=b([_,w]);this.stream.point(S[0],S[1])}}),m=UR,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(_){var w=_[0]*d,S=_[1]*h;if(s){var T=S*o-w*a;w=w*o+S*a,S=T}return[w+t,S+n]}return b.invert=function(_){var w=_[0]-t,S=_[1]-n;if(s){var T=S*o+w*a;w=w*o-S*a,S=T}return[w/d,S/h]},b.stream=function(_){return g&&y===_?g:g=p(m(y=_))},b.postclip=function(_){return arguments.length?(m=_,u=l=c=f=null,v()):m},b.clipExtent=function(_){return arguments.length?(m=_==null?(u=l=c=f=null,UR):mPe(u=+_[0][0],l=+_[0][1],c=+_[1][0],f=+_[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(_){return arguments.length?(e=+_,v()):e},b.translate=function(_){return arguments.length?(t=+_[0],n=+_[1],v()):[t,n]},b.angle=function(_){return arguments.length?(s=_%360*Er,a=gn(s),o=Cn(s),v()):s*_o},b.reflectX=function(_){return arguments.length?(r=_?-1:1,v()):r<0},b.reflectY=function(_){return arguments.length?(i=_?-1:1,v()):i<0},b.fitExtent=function(_,w){return EB(b,_,w)},b.fitSize=function(_,w){return ene(b,_,w)},b.fitWidth=function(_,w){return tne(b,_,w)},b.fitHeight=function(_,w){return nne(b,_,w)},b}function MPe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}MPe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Yr(i)>Tn&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function MDt(){return p0(MPe).scale(175.295)}function $Pe(e,t){return[Cn(t)*gn(e),gn(t)]}$Pe.invert=TN(jc);function $Dt(){return p0($Pe).scale(249.5).clipAngle(90+Tn)}function LPe(e,t){var n=Cn(t),r=1+Cn(e)*n;return[n*gn(e)/r,gn(t)/r]}LPe.invert=TN(function(e){return 2*WT(e)});function LDt(){return p0(LPe).scale(250).clipAngle(142)}function BPe(e,t){return[h8(Qte((fo+t)/2)),-e]}BPe.invert=function(e,t){return[-t,2*WT(ZNe(e))-fo]};function BDt(){var e=PPe(BPe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function jDt(e,t){return e.parent===t.parent?1:2}function UDt(e){return e.reduce(zDt,0)/e.length}function zDt(e,t){return e+t.x}function VDt(e){return 1+e.reduce(HDt,0)}function HDt(e,t){return Math.max(e,t.y)}function qDt(e){for(var t;t=e.children;)e=t[0];return e}function WDt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function GDt(){var e=jDt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=UDt(h),d.y=VDt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=qDt(s),l=WDt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function YDt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function KDt(){return this.eachAfter(YDt)}function XDt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function QDt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function JDt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function ZDt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function eIt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function tIt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function nIt(e){for(var t=this,n=rIt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function rIt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function iIt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function sIt(){return Array.from(this)}function oIt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function aIt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*uIt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function CB(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=fIt)):t===void 0&&(t=cIt);for(var n=new bC(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new bC(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(jPe)}function lIt(){return CB(this).eachBefore(dIt)}function cIt(e){return e.children}function fIt(e){return Array.isArray(e)?e[1]:null}function dIt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function jPe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function bC(e){this.data=e,this.depth=this.height=0,this.parent=null}bC.prototype=CB.prototype={constructor:bC,count:KDt,each:XDt,eachAfter:JDt,eachBefore:QDt,find:ZDt,sum:eIt,sort:tIt,path:nIt,ancestors:iIt,descendants:sIt,leaves:oIt,links:aIt,copy:lIt,[Symbol.iterator]:uIt};function fF(e){return e==null?null:UPe(e)}function UPe(e){if(typeof e!="function")throw new Error;return e}function Kx(){return 0}function _2(e){return function(){return e}}const hIt=1664525,pIt=1013904223,Xye=4294967296;function mIt(){let e=1;return()=>(e=(hIt*e+pIt)%Xye)/Xye}function gIt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function yIt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function vIt(e,t){for(var n=0,r=(e=yIt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&zPe(o,s)?++n:(o=xIt(i=bIt(i,s)),n=0);return o}function bIt(e,t){var n,r;if(HV(t,e))return[t];for(n=0;n<e.length;++n)if(D4(t,e[n])&&HV(SI(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(D4(SI(e[n],e[r]),t)&&D4(SI(e[n],t),e[r])&&D4(SI(e[r],t),e[n])&&HV(VPe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function D4(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function zPe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function HV(e,t){for(var n=0;n<t.length;++n)if(!zPe(e,t[n]))return!1;return!0}function xIt(e){switch(e.length){case 1:return wIt(e[0]);case 2:return SI(e[0],e[1]);case 3:return VPe(e[0],e[1],e[2])}}function wIt(e){return{x:e.x,y:e.y,r:e.r}}function SI(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function VPe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,_=v-l*l-c*c+f*f,w=h*p-d*m,S=(p*_-m*b)/(w*2)-r,T=(m*g-p*y)/w,A=(h*b-d*_)/(w*2)-i,k=(d*y-h*g)/w,I=T*T+k*k-1,R=2*(s+S*T+A*k),F=S*S+A*A-s*s,O=-(Math.abs(I)>1e-6?(R+Math.sqrt(R*R-4*I*F))/(2*I):F/R);return{x:r+S+T*O,y:i+A+k*O,r:O}}function Qye(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function Jye(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Zye(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function I4(e){this._=e,this.next=null,this.previous=null}function _It(e,t){if(!(s=(e=gIt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Qye(r,n,i=e[2]),n=new I4(n),r=new I4(r),i=new I4(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){Qye(n._,r._,i=e[u]),i=new I4(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(Jye(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(Jye(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=Zye(n);(i=i.next)!==r;)(a=Zye(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=vIt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function EIt(e){return Math.sqrt(e.value)}function HPe(){var e=null,t=1,n=1,r=Kx;function i(s){const o=mIt();return s.x=t/2,s.y=n/2,e?s.eachBefore(e1e(e)).eachAfter(qV(r,.5,o)).eachBefore(t1e(1)):s.eachBefore(e1e(EIt)).eachAfter(qV(Kx,1,o)).eachAfter(qV(r,s.r/Math.min(t,n),o)).eachBefore(t1e(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=fF(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:_2(+s),i):r},i}function e1e(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function qV(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=_It(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function t1e(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function qPe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function AN(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function SIt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(qPe),o}function s(o,a){return function(u){u.children&&AN(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var CIt={depth:-1},n1e={},WV={};function TIt(e){return e.id}function AIt(e){return e.parentId}function r1e(){var e=TIt,t=AIt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((_,w)=>DIt(n(_,w,i))),v=y.map(i1e),b=new Set(y).add("");for(const _ of v)b.has(_)||(b.add(_),y.push(_),v.push(i1e(_)),s.push(WV));o=(_,w)=>y[w],a=(_,w)=>v[w]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new bC(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?n1e:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===n1e)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===WV&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===WV);--y)h.data=null}if(f.parent=CIt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(jPe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=fF(i),r):e},r.parentId=function(i){return arguments.length?(t=fF(i),r):t},r.path=function(i){return arguments.length?(n=fF(i),r):n},r}function DIt(e){e=`${e}`;let t=e.length;return OY(e,t-1)&&!OY(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function i1e(e){let t=e.length;if(t<2)return"";for(;--t>1&&!OY(e,t););return e.slice(0,t)}function OY(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function IIt(e,t){return e.parent===t.parent?1:2}function GV(e){var t=e.children;return t?t[0]:e.t}function YV(e){var t=e.children;return t?t[t.length-1]:e.t}function kIt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function RIt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function NIt(e,t,n){return e.a.parent===t.parent?e.a:n}function dF(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}dF.prototype=Object.create(bC.prototype);function PIt(e){for(var t=new dF(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new dF(s[o],o)),i.parent=n;return(t.parent=new dF(null,0)).children=[t],t}function OIt(){var e=IIt,t=1,n=1,r=null;function i(l){var c=PIt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){RIt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,_;p=YV(p),d=GV(d),p&&d;)m=GV(m),h=YV(h),h.a=l,_=p.z+v-d.z-g+e(p._,d._),_>0&&(kIt(NIt(p,l,f),l,_),g+=_,y+=_),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!YV(h)&&(h.t=p,h.m+=v-y),d&&!GV(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function TB(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var WPe=(1+Math.sqrt(5))/2;function GPe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,_,w,S;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,w=Math.max(p/h,h/p)/(m*e),S=g*g*w,_=Math.max(v/S,S/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),S=g*g*w,b=Math.max(v/S,S/y),b>_){g-=l;break}_=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?AN(u,n,r,i,m?r+=p*g/m:s):TB(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const YPe=function e(t){function n(r,i,s,o,a){GPe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(WPe);function FIt(){var e=YPe,t=!1,n=1,r=1,i=[0],s=Kx,o=Kx,a=Kx,u=Kx,l=Kx;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(qPe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=UPe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:_2(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:_2(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:_2(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:_2(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:_2(+d),c):l},c}function MIt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],_=h/2+b,w=f+1,S=d-1;w<S;){var T=w+S>>>1;l[T]<_?w=T+1:S=T}_-l[w-1]<l[w]-_&&f+1<w&&--w;var A=l[w]-b,k=h-A;if(g-p>y-m){var I=h?(p*k+g*A)/h:g;c(f,w,A,p,m,I,y),c(w,d,k,I,m,g,y)}else{var R=h?(m*k+y*A)/h:y;c(f,w,A,p,m,g,R),c(w,d,k,p,R,g,y)}}}function $It(e,t,n,r,i){(e.depth&1?TB:AN)(e,t,n,r,i)}const LIt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?AN(l,i,s,o,m?s+=(a-s)*l.value/m:a):TB(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=GPe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(WPe);function Tp(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Rb(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const FY=Symbol("implicit");function Nb(){var e=new Lge,t=[],n=[],r=FY;function i(s){let o=e.get(s);if(o===void 0){if(r!==FY)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Lge;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Nb(t,n).unknown(r)},Tp.apply(i,arguments),i}function GT(){var e=Nb().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Cc(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return GT(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},Tp.apply(f(),arguments)}function BIt(e){return function(){return e}}function MY(e){return+e}var s1e=[0,1];function Tc(e){return e}function $Y(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:BIt(isNaN(t)?NaN:.5)}function jIt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function UIt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=$Y(i,r),s=n(o,s)):(r=$Y(r,i),s=n(s,o)),function(a){return s(r(a))}}function zIt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=$Y(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=Rv(e,a,1,r)-1;return s[u](i[u](a))}}function DN(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function AB(){var e=s1e,t=s1e,n=Ty,r,i,s,o=Tc,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Tc&&(o=jIt(e[0],e[d-1])),a=d>2?zIt:UIt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),Ed)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,MY),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=EN,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Tc,c()):o!==Tc},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function KPe(){return AB()(Tc,Tc)}function XPe(e,t,n,r){var i=Nv(e,t,n),s;switch(r=Jw(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=QNe(i,o))&&(r.precision=s),Xte(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=JNe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=XNe(i))&&(r.precision=s-(r.type==="%")*2);break}}return kb(r)}function K_(e){var t=e.domain;return e.ticks=function(n){var r=t();return KG(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return XPe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=XG(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function el(){var e=KPe();return e.copy=function(){return DN(e,el())},Tp.apply(e,arguments),K_(e)}function QPe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,MY),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return QPe(e).unknown(t)},e=arguments.length?Array.from(e,MY):[0,1],K_(n)}function JPe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function o1e(e){return Math.log(e)}function a1e(e){return Math.exp(e)}function VIt(e){return-Math.log(-e)}function HIt(e){return-Math.exp(-e)}function qIt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function WIt(e){return e===10?qIt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function GIt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function u1e(e){return(t,n)=>-e(-t,n)}function ine(e){const t=e(o1e,a1e),n=t.domain;let r=10,i,s;function o(){return i=GIt(r),s=WIt(r),n()[0]<0?(i=u1e(i),s=u1e(s),e(VIt,HIt)):e(o1e,a1e),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=KG(l,c,g))}else y=KG(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Jw(u)).precision==null&&(u.trim=!0),u=kb(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(JPe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function ZPe(){const e=ine(AB()).domain([1,10]);return e.copy=()=>DN(e,ZPe()).base(e.base()),Tp.apply(e,arguments),e}function l1e(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function c1e(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function sne(e){var t=1,n=e(l1e(t),c1e(t));return n.constant=function(r){return arguments.length?e(l1e(t=+r),c1e(t)):t},K_(n)}function eOe(){var e=sne(AB());return e.copy=function(){return DN(e,eOe()).constant(e.constant())},Tp.apply(e,arguments)}function f1e(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function YIt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function KIt(e){return e<0?-e*e:e*e}function one(e){var t=e(Tc,Tc),n=1;function r(){return n===1?e(Tc,Tc):n===.5?e(YIt,KIt):e(f1e(n),f1e(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},K_(t)}function ane(){var e=one(AB());return e.copy=function(){return DN(e,ane()).exponent(e.exponent())},Tp.apply(e,arguments),e}function XIt(){return ane.apply(null,arguments).exponent(.5)}function tOe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=V3e(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[Rv(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Og),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return tOe().domain(e).range(t).unknown(r)},Tp.apply(s,arguments)}function nOe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[Rv(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return nOe().domain([e,t]).range(i).unknown(s)},Tp.apply(K_(o),arguments)}function rOe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[Rv(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return rOe().domain(e).range(t).unknown(n)},Tp.apply(i,arguments)}const KV=new Date,XV=new Date;function va(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>va(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(KV.setTime(+s),XV.setTime(+o),e(KV),e(XV),Math.floor(n(KV,XV))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const xC=va(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);xC.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?va(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):xC);xC.range;const wg=1e3,kd=wg*60,_g=kd*60,ry=_g*24,une=ry*7,d1e=ry*30,QV=ry*365,Eg=va(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*wg)},(e,t)=>(t-e)/wg,e=>e.getUTCSeconds());Eg.range;const DB=va(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*wg)},(e,t)=>{e.setTime(+e+t*kd)},(e,t)=>(t-e)/kd,e=>e.getMinutes());DB.range;const IB=va(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*kd)},(e,t)=>(t-e)/kd,e=>e.getUTCMinutes());IB.range;const kB=va(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*wg-e.getMinutes()*kd)},(e,t)=>{e.setTime(+e+t*_g)},(e,t)=>(t-e)/_g,e=>e.getHours());kB.range;const RB=va(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*_g)},(e,t)=>(t-e)/_g,e=>e.getUTCHours());RB.range;const Mg=va(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*kd)/ry,e=>e.getDate()-1);Mg.range;const cv=va(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ry,e=>e.getUTCDate()-1);cv.range;const iOe=va(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ry,e=>Math.floor(e/ry));iOe.range;function X_(e){return va(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*kd)/une)}const YT=X_(0),F8=X_(1),QIt=X_(2),JIt=X_(3),wC=X_(4),ZIt=X_(5),ekt=X_(6);YT.range;F8.range;QIt.range;JIt.range;wC.range;ZIt.range;ekt.range;function Q_(e){return va(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/une)}const KT=Q_(0),M8=Q_(1),tkt=Q_(2),nkt=Q_(3),_C=Q_(4),rkt=Q_(5),ikt=Q_(6);KT.range;M8.range;tkt.range;nkt.range;_C.range;rkt.range;ikt.range;const HR=va(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());HR.range;const qR=va(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());qR.range;const Hm=va(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Hm.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:va(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Hm.range;const qm=va(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());qm.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:va(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});qm.range;function sOe(e,t,n,r,i,s){const o=[[Eg,1,wg],[Eg,5,5*wg],[Eg,15,15*wg],[Eg,30,30*wg],[s,1,kd],[s,5,5*kd],[s,15,15*kd],[s,30,30*kd],[i,1,_g],[i,3,3*_g],[i,6,6*_g],[i,12,12*_g],[r,1,ry],[r,2,2*ry],[n,1,une],[t,1,d1e],[t,3,3*d1e],[e,1,QV]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=Db(([,,g])=>g).right(o,d);if(h===o.length)return e.every(Nv(l/QV,c/QV,f));if(h===0)return xC.every(Math.max(Nv(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[skt,okt]=sOe(qm,qR,KT,iOe,RB,IB),[akt,ukt]=sOe(Hm,HR,YT,Mg,kB,DB);function JV(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ZV(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function AD(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function oOe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=DD(i),c=ID(i),f=DD(s),d=ID(s),h=DD(o),p=ID(o),m=DD(a),g=ID(a),y=DD(u),v=ID(u),b={a:G,A:Y,b:J,B:$,c:null,d:v1e,e:v1e,f:Rkt,g:Ukt,G:Vkt,H:Dkt,I:Ikt,j:kkt,L:aOe,m:Nkt,M:Pkt,p:j,q:W,Q:w1e,s:_1e,S:Okt,u:Fkt,U:Mkt,V:$kt,w:Lkt,W:Bkt,x:null,X:null,y:jkt,Y:zkt,Z:Hkt,"%":x1e},_={a:B,A:q,b:Z,B:re,c:null,d:b1e,e:b1e,f:Ykt,g:iRt,G:oRt,H:qkt,I:Wkt,j:Gkt,L:lOe,m:Kkt,M:Xkt,p:xe,q:pe,Q:w1e,s:_1e,S:Qkt,u:Jkt,U:Zkt,V:eRt,w:tRt,W:nRt,x:null,X:null,y:rRt,Y:sRt,Z:aRt,"%":x1e},w={a:I,A:R,b:F,B:O,c:L,d:g1e,e:g1e,f:Skt,g:m1e,G:p1e,H:y1e,I:y1e,j:xkt,L:Ekt,m:bkt,M:wkt,p:k,q:vkt,Q:Tkt,s:Akt,S:_kt,u:hkt,U:pkt,V:mkt,w:dkt,W:gkt,x:H,X:U,y:m1e,Y:p1e,Z:ykt,"%":Ckt};b.x=S(n,b),b.X=S(r,b),b.c=S(t,b),_.x=S(n,_),_.X=S(r,_),_.c=S(t,_);function S(Te,ke){return function(it){var Re=[],ut=-1,Ke=0,Ct=Te.length,gt,Ie,Ve;for(it instanceof Date||(it=new Date(+it));++ut<Ct;)Te.charCodeAt(ut)===37&&(Re.push(Te.slice(Ke,ut)),(Ie=h1e[gt=Te.charAt(++ut)])!=null?gt=Te.charAt(++ut):Ie=gt==="e"?" ":"0",(Ve=ke[gt])&&(gt=Ve(it,Ie)),Re.push(gt),Ke=ut+1);return Re.push(Te.slice(Ke,ut)),Re.join("")}}function T(Te,ke){return function(it){var Re=AD(1900,void 0,1),ut=A(Re,Te,it+="",0),Ke,Ct;if(ut!=it.length)return null;if("Q"in Re)return new Date(Re.Q);if("s"in Re)return new Date(Re.s*1e3+("L"in Re?Re.L:0));if(ke&&!("Z"in Re)&&(Re.Z=0),"p"in Re&&(Re.H=Re.H%12+Re.p*12),Re.m===void 0&&(Re.m="q"in Re?Re.q:0),"V"in Re){if(Re.V<1||Re.V>53)return null;"w"in Re||(Re.w=1),"Z"in Re?(Ke=ZV(AD(Re.y,0,1)),Ct=Ke.getUTCDay(),Ke=Ct>4||Ct===0?M8.ceil(Ke):M8(Ke),Ke=cv.offset(Ke,(Re.V-1)*7),Re.y=Ke.getUTCFullYear(),Re.m=Ke.getUTCMonth(),Re.d=Ke.getUTCDate()+(Re.w+6)%7):(Ke=JV(AD(Re.y,0,1)),Ct=Ke.getDay(),Ke=Ct>4||Ct===0?F8.ceil(Ke):F8(Ke),Ke=Mg.offset(Ke,(Re.V-1)*7),Re.y=Ke.getFullYear(),Re.m=Ke.getMonth(),Re.d=Ke.getDate()+(Re.w+6)%7)}else("W"in Re||"U"in Re)&&("w"in Re||(Re.w="u"in Re?Re.u%7:"W"in Re?1:0),Ct="Z"in Re?ZV(AD(Re.y,0,1)).getUTCDay():JV(AD(Re.y,0,1)).getDay(),Re.m=0,Re.d="W"in Re?(Re.w+6)%7+Re.W*7-(Ct+5)%7:Re.w+Re.U*7-(Ct+6)%7);return"Z"in Re?(Re.H+=Re.Z/100|0,Re.M+=Re.Z%100,ZV(Re)):JV(Re)}}function A(Te,ke,it,Re){for(var ut=0,Ke=ke.length,Ct=it.length,gt,Ie;ut<Ke;){if(Re>=Ct)return-1;if(gt=ke.charCodeAt(ut++),gt===37){if(gt=ke.charAt(ut++),Ie=w[gt in h1e?ke.charAt(ut++):gt],!Ie||(Re=Ie(Te,it,Re))<0)return-1}else if(gt!=it.charCodeAt(Re++))return-1}return Re}function k(Te,ke,it){var Re=l.exec(ke.slice(it));return Re?(Te.p=c.get(Re[0].toLowerCase()),it+Re[0].length):-1}function I(Te,ke,it){var Re=h.exec(ke.slice(it));return Re?(Te.w=p.get(Re[0].toLowerCase()),it+Re[0].length):-1}function R(Te,ke,it){var Re=f.exec(ke.slice(it));return Re?(Te.w=d.get(Re[0].toLowerCase()),it+Re[0].length):-1}function F(Te,ke,it){var Re=y.exec(ke.slice(it));return Re?(Te.m=v.get(Re[0].toLowerCase()),it+Re[0].length):-1}function O(Te,ke,it){var Re=m.exec(ke.slice(it));return Re?(Te.m=g.get(Re[0].toLowerCase()),it+Re[0].length):-1}function L(Te,ke,it){return A(Te,t,ke,it)}function H(Te,ke,it){return A(Te,n,ke,it)}function U(Te,ke,it){return A(Te,r,ke,it)}function G(Te){return o[Te.getDay()]}function Y(Te){return s[Te.getDay()]}function J(Te){return u[Te.getMonth()]}function $(Te){return a[Te.getMonth()]}function j(Te){return i[+(Te.getHours()>=12)]}function W(Te){return 1+~~(Te.getMonth()/3)}function B(Te){return o[Te.getUTCDay()]}function q(Te){return s[Te.getUTCDay()]}function Z(Te){return u[Te.getUTCMonth()]}function re(Te){return a[Te.getUTCMonth()]}function xe(Te){return i[+(Te.getUTCHours()>=12)]}function pe(Te){return 1+~~(Te.getUTCMonth()/3)}return{format:function(Te){var ke=S(Te+="",b);return ke.toString=function(){return Te},ke},parse:function(Te){var ke=T(Te+="",!1);return ke.toString=function(){return Te},ke},utcFormat:function(Te){var ke=S(Te+="",_);return ke.toString=function(){return Te},ke},utcParse:function(Te){var ke=T(Te+="",!0);return ke.toString=function(){return Te},ke}}}var h1e={"-":"",_:" ",0:"0"},za=/^\s*\d+/,lkt=/^%/,ckt=/[\\^$*+?|[\]().{}]/g;function bi(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function fkt(e){return e.replace(ckt,"\\$&")}function DD(e){return new RegExp("^(?:"+e.map(fkt).join("|")+")","i")}function ID(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function dkt(e,t,n){var r=za.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function hkt(e,t,n){var r=za.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function pkt(e,t,n){var r=za.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function mkt(e,t,n){var r=za.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function gkt(e,t,n){var r=za.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function p1e(e,t,n){var r=za.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function m1e(e,t,n){var r=za.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ykt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function vkt(e,t,n){var r=za.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function bkt(e,t,n){var r=za.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function g1e(e,t,n){var r=za.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function xkt(e,t,n){var r=za.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function y1e(e,t,n){var r=za.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function wkt(e,t,n){var r=za.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function _kt(e,t,n){var r=za.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Ekt(e,t,n){var r=za.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Skt(e,t,n){var r=za.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ckt(e,t,n){var r=lkt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Tkt(e,t,n){var r=za.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Akt(e,t,n){var r=za.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function v1e(e,t){return bi(e.getDate(),t,2)}function Dkt(e,t){return bi(e.getHours(),t,2)}function Ikt(e,t){return bi(e.getHours()%12||12,t,2)}function kkt(e,t){return bi(1+Mg.count(Hm(e),e),t,3)}function aOe(e,t){return bi(e.getMilliseconds(),t,3)}function Rkt(e,t){return aOe(e,t)+"000"}function Nkt(e,t){return bi(e.getMonth()+1,t,2)}function Pkt(e,t){return bi(e.getMinutes(),t,2)}function Okt(e,t){return bi(e.getSeconds(),t,2)}function Fkt(e){var t=e.getDay();return t===0?7:t}function Mkt(e,t){return bi(YT.count(Hm(e)-1,e),t,2)}function uOe(e){var t=e.getDay();return t>=4||t===0?wC(e):wC.ceil(e)}function $kt(e,t){return e=uOe(e),bi(wC.count(Hm(e),e)+(Hm(e).getDay()===4),t,2)}function Lkt(e){return e.getDay()}function Bkt(e,t){return bi(F8.count(Hm(e)-1,e),t,2)}function jkt(e,t){return bi(e.getFullYear()%100,t,2)}function Ukt(e,t){return e=uOe(e),bi(e.getFullYear()%100,t,2)}function zkt(e,t){return bi(e.getFullYear()%1e4,t,4)}function Vkt(e,t){var n=e.getDay();return e=n>=4||n===0?wC(e):wC.ceil(e),bi(e.getFullYear()%1e4,t,4)}function Hkt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+bi(t/60|0,"0",2)+bi(t%60,"0",2)}function b1e(e,t){return bi(e.getUTCDate(),t,2)}function qkt(e,t){return bi(e.getUTCHours(),t,2)}function Wkt(e,t){return bi(e.getUTCHours()%12||12,t,2)}function Gkt(e,t){return bi(1+cv.count(qm(e),e),t,3)}function lOe(e,t){return bi(e.getUTCMilliseconds(),t,3)}function Ykt(e,t){return lOe(e,t)+"000"}function Kkt(e,t){return bi(e.getUTCMonth()+1,t,2)}function Xkt(e,t){return bi(e.getUTCMinutes(),t,2)}function Qkt(e,t){return bi(e.getUTCSeconds(),t,2)}function Jkt(e){var t=e.getUTCDay();return t===0?7:t}function Zkt(e,t){return bi(KT.count(qm(e)-1,e),t,2)}function cOe(e){var t=e.getUTCDay();return t>=4||t===0?_C(e):_C.ceil(e)}function eRt(e,t){return e=cOe(e),bi(_C.count(qm(e),e)+(qm(e).getUTCDay()===4),t,2)}function tRt(e){return e.getUTCDay()}function nRt(e,t){return bi(M8.count(qm(e)-1,e),t,2)}function rRt(e,t){return bi(e.getUTCFullYear()%100,t,2)}function iRt(e,t){return e=cOe(e),bi(e.getUTCFullYear()%100,t,2)}function sRt(e,t){return bi(e.getUTCFullYear()%1e4,t,4)}function oRt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?_C(e):_C.ceil(e),bi(e.getUTCFullYear()%1e4,t,4)}function aRt(){return"+0000"}function x1e(){return"%"}function w1e(e){return+e}function _1e(e){return Math.floor(+e/1e3)}var ZE,lne,fOe,IN,dOe;uRt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function uRt(e){return ZE=oOe(e),lne=ZE.format,fOe=ZE.parse,IN=ZE.utcFormat,dOe=ZE.utcParse,ZE}function lRt(e){return new Date(e)}function cRt(e){return e instanceof Date?+e:+new Date(+e)}function cne(e,t,n,r,i,s,o,a,u,l){var c=KPe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),_=l("%Y");function w(S){return(u(S)<S?h:a(S)<S?p:o(S)<S?m:s(S)<S?g:r(S)<S?i(S)<S?y:v:n(S)<S?b:_)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?d(Array.from(S,cRt)):d().map(lRt)},c.ticks=function(S){var T=d();return e(T[0],T[T.length-1],S??10)},c.tickFormat=function(S,T){return T==null?w:l(T)},c.nice=function(S){var T=d();return(!S||typeof S.range!="function")&&(S=t(T[0],T[T.length-1],S??10)),S?d(JPe(T,S)):c},c.copy=function(){return DN(c,cne(e,t,n,r,i,s,o,a,u,l))},c}function fne(){return Tp.apply(cne(akt,ukt,Hm,HR,YT,Mg,kB,DB,Eg,lne).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function fRt(){return Tp.apply(cne(skt,okt,qm,qR,KT,cv,RB,IB,Eg,IN).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function NB(){var e=0,t=1,n,r,i,s,o=Tc,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Ty),l.rangeRound=c(EN),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Pb(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function dne(){var e=K_(NB()(Tc));return e.copy=function(){return Pb(e,dne())},Rb.apply(e,arguments)}function hOe(){var e=ine(NB()).domain([1,10]);return e.copy=function(){return Pb(e,hOe()).base(e.base())},Rb.apply(e,arguments)}function pOe(){var e=sne(NB());return e.copy=function(){return Pb(e,pOe()).constant(e.constant())},Rb.apply(e,arguments)}function hne(){var e=one(NB());return e.copy=function(){return Pb(e,hne()).exponent(e.exponent())},Rb.apply(e,arguments)}function dRt(){return hne.apply(null,arguments).exponent(.5)}function PB(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Tc,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=jte(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(Ty),h.rangeRound=p(EN),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function mOe(){var e=K_(PB()(Tc));return e.copy=function(){return Pb(e,mOe())},Rb.apply(e,arguments)}function gOe(){var e=ine(PB()).domain([.1,1,10]);return e.copy=function(){return Pb(e,gOe()).base(e.base())},Rb.apply(e,arguments)}function yOe(){var e=sne(PB());return e.copy=function(){return Pb(e,yOe()).constant(e.constant())},Rb.apply(e,arguments)}function pne(){var e=one(PB());return e.copy=function(){return Pb(e,pne()).exponent(e.exponent())},Rb.apply(e,arguments)}function hRt(){return pne.apply(null,arguments).exponent(.5)}function Ap(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const pRt=Ap("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),mRt=Ap("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),gRt=Ap("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),yRt=Ap("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),vRt=Ap("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),bRt=Ap("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),xRt=Ap("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),wRt=Ap("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),_Rt=Ap("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),ERt=Ap("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),OB=Ap("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function hr(e){return function(){return e}}const E1e=Math.abs,Du=Math.atan2,mx=Math.cos,SRt=Math.max,eH=Math.min,zp=Math.sin,mw=Math.sqrt,Pu=1e-12,EC=Math.PI,$8=EC/2,Ck=2*EC;function CRt(e){return e>1?0:e<-1?EC:Math.acos(e)}function S1e(e){return e>=1?$8:e<=-1?-$8:Math.asin(e)}function FB(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new qte(t)}function TRt(e){return e.innerRadius}function ARt(e){return e.outerRadius}function DRt(e){return e.startAngle}function IRt(e){return e.endAngle}function kRt(e){return e&&e.padAngle}function RRt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<Pu))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function k4(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/mw(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,_=v*v+b*b,w=i-s,S=d*m-p*h,T=(b<0?-1:1)*mw(SRt(0,w*w*_-S*S)),A=(S*b-v*T)/_,k=(-S*v-b*T)/_,I=(S*b+v*T)/_,R=(-S*v+b*T)/_,F=A-g,O=k-y,L=I-g,H=R-y;return F*F+O*O>L*L+H*H&&(A=I,k=R),{cx:A,cy:k,x01:-c,y01:-f,x11:A*(i/w-1),y11:k*(i/w-1)}}function LY(){var e=TRt,t=ARt,n=hr(0),r=null,i=DRt,s=IRt,o=kRt,a=null,u=FB(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-$8,m=s.apply(this,arguments)-$8,g=E1e(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>Pu))a.moveTo(0,0);else if(g>Ck-Pu)a.moveTo(h*mx(p),h*zp(p)),a.arc(0,0,h,p,m,!y),d>Pu&&(a.moveTo(d*mx(m),d*zp(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,_=p,w=m,S=g,T=g,A=o.apply(this,arguments)/2,k=A>Pu&&(r?+r.apply(this,arguments):mw(d*d+h*h)),I=eH(E1e(h-d)/2,+n.apply(this,arguments)),R=I,F=I,O,L;if(k>Pu){var H=S1e(k/d*zp(A)),U=S1e(k/h*zp(A));(S-=H*2)>Pu?(H*=y?1:-1,_+=H,w-=H):(S=0,_=w=(p+m)/2),(T-=U*2)>Pu?(U*=y?1:-1,v+=U,b-=U):(T=0,v=b=(p+m)/2)}var G=h*mx(v),Y=h*zp(v),J=d*mx(w),$=d*zp(w);if(I>Pu){var j=h*mx(b),W=h*zp(b),B=d*mx(_),q=d*zp(_),Z;if(g<EC)if(Z=RRt(G,Y,B,q,j,W,J,$)){var re=G-Z[0],xe=Y-Z[1],pe=j-Z[0],Te=W-Z[1],ke=1/zp(CRt((re*pe+xe*Te)/(mw(re*re+xe*xe)*mw(pe*pe+Te*Te)))/2),it=mw(Z[0]*Z[0]+Z[1]*Z[1]);R=eH(I,(d-it)/(ke-1)),F=eH(I,(h-it)/(ke+1))}else R=F=0}T>Pu?F>Pu?(O=k4(B,q,G,Y,h,F,y),L=k4(j,W,J,$,h,F,y),a.moveTo(O.cx+O.x01,O.cy+O.y01),F<I?a.arc(O.cx,O.cy,F,Du(O.y01,O.x01),Du(L.y01,L.x01),!y):(a.arc(O.cx,O.cy,F,Du(O.y01,O.x01),Du(O.y11,O.x11),!y),a.arc(0,0,h,Du(O.cy+O.y11,O.cx+O.x11),Du(L.cy+L.y11,L.cx+L.x11),!y),a.arc(L.cx,L.cy,F,Du(L.y11,L.x11),Du(L.y01,L.x01),!y))):(a.moveTo(G,Y),a.arc(0,0,h,v,b,!y)):a.moveTo(G,Y),!(d>Pu)||!(S>Pu)?a.lineTo(J,$):R>Pu?(O=k4(J,$,j,W,d,-R,y),L=k4(G,Y,B,q,d,-R,y),a.lineTo(O.cx+O.x01,O.cy+O.y01),R<I?a.arc(O.cx,O.cy,R,Du(O.y01,O.x01),Du(L.y01,L.x01),!y):(a.arc(O.cx,O.cy,R,Du(O.y01,O.x01),Du(O.y11,O.x11),!y),a.arc(0,0,d,Du(O.cy+O.y11,O.cx+O.x11),Du(L.cy+L.y11,L.cx+L.x11),y),a.arc(L.cx,L.cy,R,Du(L.y11,L.x11),Du(L.y01,L.x01),!y))):a.arc(0,0,d,w,_,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-EC/2;return[mx(f)*c,zp(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:hr(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:hr(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:hr(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:hr(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:hr(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:hr(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:hr(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function MB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function vOe(e){this._context=e}vOe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function mne(e){return new vOe(e)}function bOe(e){return e[0]}function xOe(e){return e[1]}function gne(e,t){var n=hr(!0),r=null,i=mne,s=null,o=FB(a);e=typeof e=="function"?e:e===void 0?bOe:hr(e),t=typeof t=="function"?t:t===void 0?xOe:hr(t);function a(u){var l,c=(u=MB(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:hr(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:hr(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:hr(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function wOe(e,t,n){var r=null,i=hr(!0),s=null,o=mne,a=null,u=FB(l);e=typeof e=="function"?e:e===void 0?bOe:hr(+e),t=typeof t=="function"?t:hr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?xOe:hr(+n);function l(f){var d,h,p,m=(f=MB(f)).length,g,y=!1,v,b=new Array(m),_=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],_[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),_[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):_[d]))}if(v)return a=null,v+""||null}function c(){return gne().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:hr(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:hr(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:hr(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:hr(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:hr(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:hr(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:hr(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function NRt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function PRt(e){return e}function ORt(){var e=PRt,t=NRt,n=null,r=hr(0),i=hr(Ck),s=hr(0);function o(a){var u,l=(a=MB(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(Ck,Math.max(-Ck,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),b=v*(g<0?-1:1),_;for(u=0;u<l;++u)(_=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=_);for(t!=null?h.sort(function(w,S){return t(p[w],p[S])}):n!=null&&h.sort(function(w,S){return n(a[w],a[S])}),u=0,f=d?(g-l*b)/d:0;u<l;++u,m=y)c=h[u],_=p[c],y=m+(_>0?_*f:0)+b,p[c]={data:a[c],index:u,value:_,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:hr(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:hr(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:hr(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:hr(+a),o):s},o}const FRt={draw(e,t){const n=mw(t/EC);e.moveTo(n,0),e.arc(0,0,n,0,Ck)}};function MRt(e,t){let n=null,r=FB(i);e=typeof e=="function"?e:hr(e||FRt),t=typeof t=="function"?t:hr(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:hr(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:hr(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Ov(){}function L8(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function $B(e){this._context=e}$B.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:L8(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:L8(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $Rt(e){return new $B(e)}function _Oe(e){this._context=e}_Oe.prototype={areaStart:Ov,areaEnd:Ov,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:L8(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function LRt(e){return new _Oe(e)}function EOe(e){this._context=e}EOe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:L8(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function BRt(e){return new EOe(e)}function SOe(e,t){this._basis=new $B(e),this._beta=t}SOe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const jRt=function e(t){function n(r){return t===1?new $B(r):new SOe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function B8(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function yne(e,t){this._context=e,this._k=(1-t)/6}yne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:B8(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:B8(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const URt=function e(t){function n(r){return new yne(r,t)}return n.tension=function(r){return e(+r)},n}(0);function vne(e,t){this._context=e,this._k=(1-t)/6}vne.prototype={areaStart:Ov,areaEnd:Ov,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:B8(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const zRt=function e(t){function n(r){return new vne(r,t)}return n.tension=function(r){return e(+r)},n}(0);function bne(e,t){this._context=e,this._k=(1-t)/6}bne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:B8(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const VRt=function e(t){function n(r){return new bne(r,t)}return n.tension=function(r){return e(+r)},n}(0);function xne(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Pu){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Pu){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function COe(e,t){this._context=e,this._alpha=t}COe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:xne(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const HRt=function e(t){function n(r){return t?new COe(r,t):new yne(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function TOe(e,t){this._context=e,this._alpha=t}TOe.prototype={areaStart:Ov,areaEnd:Ov,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:xne(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qRt=function e(t){function n(r){return t?new TOe(r,t):new vne(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function AOe(e,t){this._context=e,this._alpha=t}AOe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:xne(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const WRt=function e(t){function n(r){return t?new AOe(r,t):new bne(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function DOe(e){this._context=e}DOe.prototype={areaStart:Ov,areaEnd:Ov,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function GRt(e){return new DOe(e)}function C1e(e){return e<0?-1:1}function T1e(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(C1e(s)+C1e(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function A1e(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function tH(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function j8(e){this._context=e}j8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:tH(this,this._t0,A1e(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,tH(this,A1e(this,n=T1e(this,e,t)),n);break;default:tH(this,this._t0,n=T1e(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function IOe(e){this._context=new kOe(e)}(IOe.prototype=Object.create(j8.prototype)).point=function(e,t){j8.prototype.point.call(this,t,e)};function kOe(e){this._context=e}kOe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function YRt(e){return new j8(e)}function KRt(e){return new IOe(e)}function ROe(e){this._context=e}ROe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=D1e(e),i=D1e(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function D1e(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function XRt(e){return new ROe(e)}function LB(e,t){this._context=e,this._t=t}LB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function QRt(e){return new LB(e,.5)}function JRt(e){return new LB(e,0)}function ZRt(e){return new LB(e,1)}function I1e(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function k1e(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function e3t(e,t){return e[t]}function t3t(e){const t=[];return t.key=e,t}function n3t(){var e=hr([]),t=k1e,n=I1e,r=e3t;function i(s){var o=Array.from(e.apply(this,arguments),t3t),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=MB(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:hr(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:hr(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?k1e:typeof s=="function"?s:hr(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??I1e,i):n},i}function CI(e,t,n){this.k=e,this.x=t,this.y=n}CI.prototype={constructor:CI,scale:function(e){return e===1?this:new CI(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new CI(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};CI.prototype;function jh(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Fv(e){return!!e&&!!e[Fs]}function iy(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===f3t}(e)||Array.isArray(e)||!!e[$1e]||!!(!((t=e.constructor)===null||t===void 0)&&t[$1e])||wne(e)||_ne(e))}function t_(e,t,n){n===void 0&&(n=!1),XT(e)===0?(n?Object.keys:ES)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function XT(e){var t=e[Fs];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:wne(e)?2:_ne(e)?3:0}function _S(e,t){return XT(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function r3t(e,t){return XT(e)===2?e.get(t):e[t]}function NOe(e,t,n){var r=XT(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function POe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function wne(e){return l3t&&e instanceof Map}function _ne(e){return c3t&&e instanceof Set}function Mx(e){return e.o||e.t}function Ene(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=FOe(e);delete t[Fs];for(var n=ES(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Sne(e,t){return t===void 0&&(t=!1),Cne(e)||Fv(e)||!iy(e)||(XT(e)>1&&(e.set=e.add=e.clear=e.delete=i3t),Object.freeze(e),t&&t_(e,function(n,r){return Sne(r,!0)},!0)),e}function i3t(){jh(2)}function Cne(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function km(e){var t=zY[e];return t||jh(18,e),t}function s3t(e,t){zY[e]||(zY[e]=t)}function BY(){return WR}function nH(e,t){t&&(km("Patches"),e.u=[],e.s=[],e.v=t)}function U8(e){jY(e),e.p.forEach(o3t),e.p=null}function jY(e){e===WR&&(WR=e.l)}function R1e(e){return WR={p:[],l:WR,h:e,m:!0,_:0}}function o3t(e){var t=e[Fs];t.i===0||t.i===1?t.j():t.g=!0}function rH(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||km("ES5").S(t,e,r),r?(n[Fs].P&&(U8(t),jh(4)),iy(e)&&(e=z8(t,e),t.l||V8(t,e)),t.u&&km("Patches").M(n[Fs].t,e,t.u,t.s)):e=z8(t,n,[]),U8(t),t.u&&t.v(t.u,t.s),e!==OOe?e:void 0}function z8(e,t,n){if(Cne(t))return t;var r=t[Fs];if(!r)return t_(t,function(a,u){return N1e(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return V8(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Ene(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),t_(s,function(a,u){return N1e(e,r,i,a,u,n,o)}),V8(e,i,!1),n&&e.u&&km("Patches").N(r,n,e.u,e.s)}return r.o}function N1e(e,t,n,r,i,s,o){if(Fv(i)){var a=z8(e,i,s&&t&&t.i!==3&&!_S(t.R,r)?s.concat(r):void 0);if(NOe(n,r,a),!Fv(a))return;e.m=!1}else o&&n.add(i);if(iy(i)&&!Cne(i)){if(!e.h.D&&e._<1)return;z8(e,i),t&&t.A.l||V8(e,i)}}function V8(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&Sne(t,n)}function iH(e,t){var n=e[Fs];return(n?Mx(n):e)[t]}function P1e(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function k1(e){e.P||(e.P=!0,e.l&&k1(e.l))}function sH(e){e.o||(e.o=Ene(e.t))}function UY(e,t,n){var r=wne(t)?km("MapSet").F(t,n):_ne(t)?km("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:BY(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=GR;o&&(u=[a],l=TI);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):km("ES5").J(t,n);return(n?n.A:BY()).p.push(r),r}function a3t(e){return Fv(e)||jh(22,e),function t(n){if(!iy(n))return n;var r,i=n[Fs],s=XT(n);if(i){if(!i.P&&(i.i<4||!km("ES5").K(i)))return i.t;i.I=!0,r=O1e(n,s),i.I=!1}else r=O1e(n,s);return t_(r,function(o,a){i&&r3t(i.t,o)===a||NOe(r,o,t(a))}),s===3?new Set(r):r}(e)}function O1e(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Ene(e)}function u3t(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[Fs];return GR.get(u,s)},set:function(u){var l=this[Fs];GR.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Fs];if(!a.P)switch(a.i){case 5:r(a)&&k1(a);break;case 4:n(a)&&k1(a)}}}function n(s){for(var o=s.t,a=s.k,u=ES(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==Fs){var f=o[c];if(f===void 0&&!_S(o,c))return!0;var d=a[c],h=d&&d[Fs];if(h?h.t!==f:!POe(d,f))return!0}}var p=!!o[Fs];return u.length!==ES(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};s3t("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=FOe(f);delete p[Fs];for(var m=ES(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:BY(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,Fs,{value:l,writable:!0}),u},S:function(s,o,a){a?Fv(o)&&o[Fs].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[Fs];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)t_(d,function(b){b!==Fs&&(f[b]!==void 0||_S(f,b)?h[b]||u(d[b]):(h[b]=!0,k1(c)))}),t_(f,function(b){d[b]!==void 0||_S(d,b)||(h[b]=!1,k1(c))});else if(p===5){if(r(c)&&(k1(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var F1e,WR,Tne=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",l3t=typeof Map<"u",c3t=typeof Set<"u",M1e=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",OOe=Tne?Symbol.for("immer-nothing"):((F1e={})["immer-nothing"]=!0,F1e),$1e=Tne?Symbol.for("immer-draftable"):"__$immer_draftable",Fs=Tne?Symbol.for("immer-state"):"__$immer_state",f3t=""+Object.prototype.constructor,ES=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,FOe=Object.getOwnPropertyDescriptors||function(e){var t={};return ES(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},zY={},GR={get:function(e,t){if(t===Fs)return e;var n=Mx(e);if(!_S(n,t))return function(i,s,o){var a,u=P1e(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!iy(r)?r:r===iH(e.t,t)?(sH(e),e.o[t]=UY(e.A.h,r,e)):r},has:function(e,t){return t in Mx(e)},ownKeys:function(e){return Reflect.ownKeys(Mx(e))},set:function(e,t,n){var r=P1e(Mx(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=iH(Mx(e),t),s=i==null?void 0:i[Fs];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(POe(n,i)&&(n!==void 0||_S(e.t,t)))return!0;sH(e),k1(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return iH(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,sH(e),k1(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Mx(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){jh(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){jh(12)}},TI={};t_(GR,function(e,t){TI[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),TI.deleteProperty=function(e,t){return TI.set.call(this,e,t,void 0)},TI.set=function(e,t,n){return GR.set.call(this,e[0],t,n,e[0])};var d3t=function(){function e(n){var r=this;this.O=M1e,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(_){var w;return(w=s).call.apply(w,[g,_].concat(v))})}}var l;if(typeof s!="function"&&jh(6),o!==void 0&&typeof o!="function"&&jh(7),iy(i)){var c=R1e(r),f=UY(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?U8(c):jY(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return nH(c,o),rH(m,c)},function(m){throw U8(c),m}):(nH(c,o),rH(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===OOe&&(l=void 0),r.D&&Sne(l,!0),o){var h=[],p=[];km("Patches").M(i,l,h,p),o(h,p)}return l}jh(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){iy(n)||jh(8),Fv(n)&&(n=a3t(n));var r=R1e(this),i=UY(this,n,void 0);return i[Fs].C=!0,jY(r),i},t.finishDraft=function(n,r){var i=n&&n[Fs],s=i.A;return nH(s,r),rH(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!M1e&&jh(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=km("Patches").$;return Fv(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),jf=new d3t,MOe=jf.produce;jf.produceWithPatches.bind(jf);jf.setAutoFreeze.bind(jf);jf.setUseProxies.bind(jf);jf.applyPatches.bind(jf);jf.createDraft.bind(jf);jf.finishDraft.bind(jf);function YR(e){"@babel/helpers - typeof";return YR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},YR(e)}function h3t(e,t){if(YR(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(YR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p3t(e){var t=h3t(e,"string");return YR(t)=="symbol"?t:t+""}function m3t(e,t,n){return(t=p3t(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L1e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function B1e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L1e(Object(n),!0).forEach(function(r){m3t(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L1e(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fu(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var j1e=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),oH=function(){return Math.random().toString(36).substring(7).split("").join(".")},H8={INIT:"@@redux/INIT"+oH(),REPLACE:"@@redux/REPLACE"+oH(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+oH()}};function g3t(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function $Oe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Fu(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Fu(1));return n($Oe)(e,t)}if(typeof e!="function")throw new Error(Fu(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(Fu(3));return s}function f(m){if(typeof m!="function")throw new Error(Fu(4));if(u)throw new Error(Fu(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(Fu(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!g3t(m))throw new Error(Fu(7));if(typeof m.type>"u")throw new Error(Fu(8));if(u)throw new Error(Fu(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(Fu(10));i=m,d({type:H8.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Fu(11));function b(){v.next&&v.next(c())}b();var _=g(b);return{unsubscribe:_}}},m[j1e]=function(){return this},m}return d({type:H8.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[j1e]=p,r}function y3t(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:H8.INIT});if(typeof r>"u")throw new Error(Fu(12));if(typeof n(void 0,{type:H8.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Fu(13))})}function v3t(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{y3t(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(Fu(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function q8(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function b3t(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Fu(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=q8.apply(void 0,a)(i.dispatch),B1e(B1e({},i),{},{dispatch:s})}}}function LOe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var VY=LOe();VY.withExtraArgument=LOe;var BOe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kN=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},n_=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},x3t=Object.defineProperty,w3t=Object.defineProperties,_3t=Object.getOwnPropertyDescriptors,U1e=Object.getOwnPropertySymbols,E3t=Object.prototype.hasOwnProperty,S3t=Object.prototype.propertyIsEnumerable,z1e=function(e,t,n){return t in e?x3t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},fv=function(e,t){for(var n in t||(t={}))E3t.call(t,n)&&z1e(e,n,t[n]);if(U1e)for(var r=0,i=U1e(t);r<i.length;r++){var n=i[r];S3t.call(t,n)&&z1e(e,n,t[n])}return e},aH=function(e,t){return w3t(e,_3t(t))},RN=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},C3t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?q8:q8.apply(null,arguments)};function jOe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var T3t=function(e){return e&&typeof e.match=="function"};function Rm(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return fv(fv({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function A3t(e){return jOe(e)&&"type"in e}var D3t=function(e){BOe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,n_([void 0],n[0].concat(this)))):new(t.bind.apply(t,n_([void 0],n.concat(this))))},t}(Array),I3t=function(e){BOe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,n_([void 0],n[0].concat(this)))):new(t.bind.apply(t,n_([void 0],n.concat(this))))},t}(Array);function HY(e){return iy(e)?MOe(e,function(){}):e}function k3t(e){return typeof e=="boolean"}function R3t(){return function(t){return N3t(t)}}function N3t(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new D3t;return n&&(k3t(n)?r.push(VY):r.push(VY.withExtraArgument(n.extraArgument))),r}function P3t(e){var t=R3t(),n=e,r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(jOe(i))h=v3t(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=b3t.apply(void 0,p),g=q8;u&&(g=C3t(fv({trace:!1},typeof u=="object"&&u)));var y=new I3t(m),v=y;Array.isArray(d)?v=n_([m],d):typeof d=="function"&&(v=d(y));var b=g.apply(void 0,v);return $Oe(h,c,b)}function UOe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function O3t(e){return typeof e=="function"}function F3t(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?UOe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(O3t(e))u=function(){return HY(e())};else{var l=HY(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=n_([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(Fv(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(iy(p))return MOe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function M3t(e,t){return e+"/"+t}function $3t(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n=typeof e.initialState=="function"?e.initialState:HY(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=M3t(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?Rm(d,p):Rm(d)});function u(){var c=typeof e.extraReducers=="function"?UOe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=fv(fv({},d),o);return F3t(n,function(v){for(var b in y)v.addCase(b,y[b]);for(var _=0,w=p;_<w.length;_++){var S=w[_];v.addMatcher(S.matcher,S.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var L3t="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",zOe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=L3t[Math.random()*64|0];return t},B3t=["name","message","stack","code"],uH=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),V1e=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),j3t=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=B3t;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Rm(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:aH(fv({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=Rm(t+"/pending",function(l,c,f){return{payload:void 0,meta:aH(fv({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=Rm(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||j3t)(l||"Rejected"),meta:aH(fv({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):zOe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return RN(this,null,function(){var v,b,_,w,S,T,A;return kN(this,function(k){switch(k.label){case 0:return k.trys.push([0,4,,5]),w=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),z3t(w)?[4,w]:[3,2];case 1:w=k.sent(),k.label=2;case 2:if(w===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(I,R){return p.signal.addEventListener("abort",function(){return R({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([S,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(I,R){return new uH(I,R)},fulfillWithValue:function(I,R){return new V1e(I,R)}})).then(function(I){if(I instanceof uH)throw I;return I instanceof V1e?i(I.payload,h,l,I.meta):i(I,h,l)})])];case 3:return _=k.sent(),[3,5];case 4:return T=k.sent(),_=T instanceof uH?o(null,h,l,T.payload,T.meta):o(T,h,l),[3,5];case 5:return A=r&&!r.dispatchConditionRejection&&o.match(_)&&_.meta.condition,A||c(_),[2,_]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(U3t)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function U3t(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function z3t(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var V3t=function(e,t){return T3t(e)?e.match(t):e(t)};function H1e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return V3t(r,n)})}}var Ane=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},qY=function(){},VOe=function(e,t){return t===void 0&&(t=qY),e.catch(t),e},HOe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},SS=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},H3t="task",qOe="listener",WOe="completed",Dne="cancelled",q3t="task-"+Dne,W3t="task-"+WOe,GOe=qOe+"-"+Dne,G3t=qOe+"-"+WOe,BB=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=H3t+" "+Dne+" (reason: "+t+")"}return e}(),CS=function(e){if(e.aborted)throw new BB(e.reason)};function YOe(e,t){var n=qY;return new Promise(function(r,i){var s=function(){return i(new BB(e.reason))};if(e.aborted){s();return}n=HOe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=qY})}var Y3t=function(e,t){return RN(void 0,null,function(){var n,r;return kN(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof BB?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},W8=function(e){return function(t){return VOe(YOe(e,t).then(function(n){return CS(e),n}))}},KOe=function(e){var t=W8(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},K3t=Object.assign,q1e={},NN="listenerMiddleware",X3t=function(e,t){var n=function(r){return HOe(e,function(){return SS(r,e.reason)})};return function(r,i){Ane(r,"taskExecutor");var s=new AbortController;n(s);var o=Y3t(function(){return RN(void 0,null,function(){var a;return kN(this,function(u){switch(u.label){case 0:return CS(e),CS(s.signal),[4,r({pause:W8(s.signal),delay:KOe(s.signal),signal:s.signal})];case 1:return a=u.sent(),CS(s.signal),[2,a]}})})},function(){return SS(s,W3t)});return i!=null&&i.autoJoin&&t.push(o),{result:W8(e)(o),cancel:function(){SS(s,q3t)}}}},Q3t=function(e,t){var n=function(r,i){return RN(void 0,null,function(){var s,o,a,u;return kN(this,function(l){switch(l.label){case 0:CS(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,YOe(t,Promise.race(a))];case 2:return u=l.sent(),CS(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return VOe(n(r,i))}},XOe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Rm(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return Ane(s,"options.listener"),{predicate:i,type:t,effect:s}},J3t=function(e){var t=XOe(e),n=t.type,r=t.predicate,i=t.effect,s=zOe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},WY=function(e){e.pending.forEach(function(t){SS(t,GOe)})},Z3t=function(e){return function(){e.forEach(WY),e.clear()}},W1e=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},eNt=Rm(NN+"/add"),tNt=Rm(NN+"/removeAll"),nNt=Rm(NN+"/remove"),rNt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,n_([NN+"/error"],e))};function iNt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?rNt:i;Ane(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&WY(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=J3t(h)),o(p)},l=function(h){var p=XOe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(b){var _=typeof m=="string"?b.type===m:b.predicate===y;return _&&b.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&WY(v)),!!v},c=function(h,p,m,g){return RN(t,null,function(){var y,v,b,_;return kN(this,function(w){switch(w.label){case 0:y=new AbortController,v=Q3t(u,y.signal),b=[],w.label=1;case 1:return w.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,K3t({},m,{getOriginalState:g,condition:function(S,T){return v(S,T).then(Boolean)},take:v,delay:KOe(y.signal),pause:W8(y.signal),extra:r,signal:y.signal,fork:X3t(y.signal,b),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(S,T,A){S!==y&&(SS(S,GOe),A.delete(S))})}})))];case 2:return w.sent(),[3,6];case 3:return _=w.sent(),_ instanceof BB||W1e(s,_,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return w.sent(),SS(y,G3t),h.pending.delete(y),[7];case 6:return[2]}})})},f=Z3t(n),d=function(h){return function(p){return function(m){if(!A3t(m))return p(m);if(eNt.match(m))return u(m.payload);if(tNt.match(m)){f();return}if(nNt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===q1e)throw new Error(NN+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var b=h.getState(),_=Array.from(n.values()),w=0,S=_;w<S.length;w++){var T=S[w],A=!1;try{A=T.predicate(m,b,g)}catch(k){A=!1,W1e(s,k,{raisedBy:"predicate"})}A&&c(T,m,h,y)}}finally{g=q1e}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var G1e;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);u3t();function sNt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let R4;const oNt=new Uint8Array(16);function aNt(){if(!R4&&(R4=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!R4))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return R4(oNt)}const Ya=[];for(let e=0;e<256;++e)Ya.push((e+256).toString(16).slice(1));function uNt(e,t=0){return(Ya[e[t+0]]+Ya[e[t+1]]+Ya[e[t+2]]+Ya[e[t+3]]+"-"+Ya[e[t+4]]+Ya[e[t+5]]+"-"+Ya[e[t+6]]+Ya[e[t+7]]+"-"+Ya[e[t+8]]+Ya[e[t+9]]+"-"+Ya[e[t+10]]+Ya[e[t+11]]+Ya[e[t+12]]+Ya[e[t+13]]+Ya[e[t+14]]+Ya[e[t+15]]).toLowerCase()}const lNt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Y1e={randomUUID:lNt};function K1e(e,t,n){if(Y1e.randomUUID&&!e)return Y1e.randomUUID();e=e||{};const r=e.random||(e.rng||aNt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,uNt(r)}class Nm{static get(){let t=K1e();for(;this.ids.has(t);)t=K1e();return this.ids.set(t,!0),t}}Nm.ids=new Map;function np(e){return"parent"in e}function cNt(e){return!np(e)}function fNt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:Nm.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:Nm.get(),createdOn:Date.now(),val:r}]:[];return{id:Nm.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function dNt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:Nm.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:Nm.get(),createdOn:Date.now(),val:s}]:[];return{id:Nm.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function ao(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=wNt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r_(e){return!!e&&!!e[Uf]}function Mv(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===_Nt}(e)||Array.isArray(e)||!!e[Tk]||!!(!((t=e.constructor)===null||t===void 0)&&t[Tk])||jB(e)||UB(e))}function SC(e,t,n){n===void 0&&(n=!1),$v(e)===0?(n?Object.keys:One)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function $v(e){var t=e[Uf];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:jB(e)?2:UB(e)?3:0}function KR(e,t){return $v(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function hF(e,t){return $v(e)===2?e.get(t):e[t]}function QOe(e,t,n){var r=$v(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function hNt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function jB(e){return bNt&&e instanceof Map}function UB(e){return xNt&&e instanceof Set}function $x(e){return e.o||e.t}function Ine(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ENt(e);delete t[Uf];for(var n=One(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function kne(e,t){return t===void 0&&(t=!1),Rne(e)||r_(e)||!Mv(e)||($v(e)>1&&(e.set=e.add=e.clear=e.delete=pNt),Object.freeze(e),t&&SC(e,function(n,r){return kne(r,!0)},!0)),e}function pNt(){ao(2)}function Rne(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Pm(e){var t=XY[e];return t||ao(18,e),t}function mNt(e,t){XY[e]||(XY[e]=t)}function X1e(){return{}.NODE_ENV==="production"||CC||ao(0),CC}function lH(e,t){t&&(Pm("Patches"),e.u=[],e.s=[],e.v=t)}function G8(e){GY(e),e.p.forEach(gNt),e.p=null}function GY(e){e===CC&&(CC=e.l)}function Q1e(e){return CC={p:[],l:CC,h:e,m:!0,_:0}}function gNt(e){var t=e[Uf];t.i===0||t.i===1?t.j():t.O=!0}function cH(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Pm("ES5").S(t,e,r),r?(n[Uf].P&&(G8(t),ao(4)),Mv(e)&&(e=Y8(t,e),t.l||K8(t,e)),t.u&&Pm("Patches").M(n[Uf].t,e,t.u,t.s)):e=Y8(t,n,[]),G8(t),t.u&&t.v(t.u,t.s),e!==Pne?e:void 0}function Y8(e,t,n){if(Rne(t))return t;var r=t[Uf];if(!r)return SC(t,function(s,o){return J1e(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return K8(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Ine(r.k):r.o;SC(r.i===3?new Set(i):i,function(s,o){return J1e(e,r,i,s,o,n)}),K8(e,i,!1),n&&e.u&&Pm("Patches").R(r,n,e.u,e.s)}return r.o}function J1e(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&ao(5),r_(i)){var o=Y8(e,i,s&&t&&t.i!==3&&!KR(t.D,r)?s.concat(r):void 0);if(QOe(n,r,o),!r_(o))return;e.m=!1}if(Mv(i)&&!Rne(i)){if(!e.h.F&&e._<1)return;Y8(e,i),t&&t.A.l||K8(e,i)}}function K8(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&kne(t,n)}function fH(e,t){var n=e[Uf];return(n?$x(n):e)[t]}function Z1e(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function YY(e){e.P||(e.P=!0,e.l&&YY(e.l))}function dH(e){e.o||(e.o=Ine(e.t))}function KY(e,t,n){var r=jB(t)?Pm("MapSet").N(t,n):UB(t)?Pm("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:X1e(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=QY;o&&(u=[a],l=AI);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Pm("ES5").J(t,n);return(n?n.A:X1e()).p.push(r),r}function yNt(e){return r_(e)||ao(22,e),function t(n){if(!Mv(n))return n;var r,i=n[Uf],s=$v(n);if(i){if(!i.P&&(i.i<4||!Pm("ES5").K(i)))return i.t;i.I=!0,r=eve(n,s),i.I=!1}else r=eve(n,s);return SC(r,function(o,a){i&&hF(i.t,o)===a||QOe(r,o,t(a))}),s===3?new Set(r):r}(e)}function eve(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Ine(e)}function vNt(){function e(r){if(!Mv(r))return r;if(Array.isArray(r))return r.map(e);if(jB(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(UB(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return KR(r,Tk)&&(i[Tk]=r[Tk]),i}function t(r){return r_(r)?e(r):r}var n="add";mNt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=$v(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||ao(24),typeof u=="function"&&f==="prototype"&&ao(24),typeof(u=hF(u,f))!="object"&&ao(15,o.join("/"))}var d=$v(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:ao(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:ao(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;SC(a.D,function(h,p){var m=hF(f,h),g=hF(d,h),y=p?KR(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var b=u.concat([v]);l.push({op:n,path:b,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===Pne?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var tve,CC,Nne=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",bNt=typeof Map<"u",xNt=typeof Set<"u",nve=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Pne=Nne?Symbol.for("immer-nothing"):((tve={})["immer-nothing"]=!0,tve),Tk=Nne?Symbol.for("immer-draftable"):"__$immer_draftable",Uf=Nne?Symbol.for("immer-state"):"__$immer_state",wNt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},_Nt=""+Object.prototype.constructor,One=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ENt=Object.getOwnPropertyDescriptors||function(e){var t={};return One(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},XY={},QY={get:function(e,t){if(t===Uf)return e;var n=$x(e);if(!KR(n,t))return function(i,s,o){var a,u=Z1e(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Mv(r)?r:r===fH(e.t,t)?(dH(e),e.o[t]=KY(e.A.h,r,e)):r},has:function(e,t){return t in $x(e)},ownKeys:function(e){return Reflect.ownKeys($x(e))},set:function(e,t,n){var r=Z1e($x(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=fH($x(e),t),s=i==null?void 0:i[Uf];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(hNt(n,i)&&(n!==void 0||KR(e.t,t)))return!0;dH(e),YY(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return fH(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,dH(e),YY(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=$x(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){ao(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){ao(12)}},AI={};SC(QY,function(e,t){AI[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),AI.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&ao(13),AI.set.call(this,e,t,void 0)},AI.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&ao(14),QY.set.call(this,e[0],t,n,e[0])};var SNt=function(){function e(n){var r=this;this.g=nve,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(_){var w;return(w=s).call.apply(w,[g,_].concat(v))})}}var l;if(typeof s!="function"&&ao(6),o!==void 0&&typeof o!="function"&&ao(7),Mv(i)){var c=Q1e(r),f=KY(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?G8(c):GY(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return lH(c,o),cH(m,c)},function(m){throw G8(c),m}):(lH(c,o),cH(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===Pne&&(l=void 0),r.F&&kne(l,!0),o){var h=[],p=[];Pm("Patches").M(i,l,h,p),o(h,p)}return l}ao(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Mv(n)||ao(8),r_(n)&&(n=yNt(n));var r=Q1e(this),i=KY(this,n,void 0);return i[Uf].C=!0,GY(r),i},t.finishDraft=function(n,r){var i=n&&n[Uf];({}).NODE_ENV!=="production"&&(i&&i.C||ao(9),i.I&&ao(10));var s=i.A;return lH(s,r),cH(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!nve&&ao(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Pm("Patches").$;return r_(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),zf=new SNt,CNt=zf.produce;zf.produceWithPatches.bind(zf);zf.setAutoFreeze.bind(zf);zf.setUseProxies.bind(zf);zf.applyPatches.bind(zf);zf.createDraft.bind(zf);zf.finishDraft.bind(zf);function TNt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=fNt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return $3t({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:Nm.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:Nm.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function ANt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=TNt(e),s=iNt();s.startListening({matcher:H1e(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=H1e(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=P3t({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:Nm.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var DNt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),INt=Object.prototype.hasOwnProperty;function JY(e,t){return INt.call(e,t)}function ZY(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)JY(e,i)&&r.push(i);return r}function Ac(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function eK(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Lx(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function JOe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function tK(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(tK(e[t]))return!0}else if(typeof e=="object"){for(var r=ZY(e),i=r.length,s=0;s<i;s++)if(tK(e[r[s]]))return!0}}return!1}function rve(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var ZOe=function(e){DNt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,rve(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=rve(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),ro=ZOe,kNt=Ac,X2={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=X8(n,this.path);r&&(r=Ac(r));var i=Nw(n,{op:"remove",path:this.from}).removed;return Nw(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=X8(n,this.from);return Nw(n,{op:"add",path:this.path,value:Ac(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:XR(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},RNt={add:function(e,t,n){return eK(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:X2.move,copy:X2.copy,test:X2.test,_get:X2._get};function X8(e,t){if(t=="")return e;var n={op:"_get",path:t};return Nw(e,n),n.value}function Nw(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):Q8(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=X8(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=XR(e,t.value),o.test===!1)throw new ro("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new ro("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Ac(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=Q8;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=JOe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!eK(h))throw new ro("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);eK(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new ro("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=RNt[t.op].call(t,l,h,e);if(o.test===!1)throw new ro("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=X2[t.op].call(t,l,h,e);if(o.test===!1)throw new ro("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new ro("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function zB(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new ro("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Ac(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Nw(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function NNt(e,t,n){var r=Nw(e,t);if(r.test===!1)throw new ro("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function Q8(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new ro("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(X2[e.op]){if(typeof e.path!="string")throw new ro("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new ro('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new ro("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new ro("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&tK(e.value))throw new ro("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new ro("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new ro("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=e4e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new ro("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new ro("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function e4e(e,t,n){try{if(!Array.isArray(e))throw new ro("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)zB(Ac(t),Ac(e),n||!0);else{n=n||Q8;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof ro)return i;throw i}}function XR(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!XR(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!XR(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const PNt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:ro,_areEquals:XR,applyOperation:Nw,applyPatch:zB,applyReducer:NNt,deepClone:kNt,getValueByPointer:X8,validate:e4e,validator:Q8},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Fne=new WeakMap,ONt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),FNt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function MNt(e){return Fne.get(e)}function $Nt(e,t){return e.observers.get(t)}function LNt(e,t){e.observers.delete(t.callback)}function BNt(e,t){t.unobserve()}function jNt(e,t){var n=[],r,i=MNt(e);if(!i)i=new ONt(e),Fne.set(e,i);else{var s=$Nt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Ac(e),t){r.callback=t,r.next=null;var o=function(){nK(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){nK(r),clearTimeout(r.next),LNt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new FNt(t,r)),r}function nK(e,t){t===void 0&&(t=!1);var n=Fne.get(e.object);Mne(n.value,e.object,e.patches,"",t),e.patches.length&&zB(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Mne(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=ZY(t),o=ZY(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(JY(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?Mne(c,f,n,r+"/"+Lx(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Lx(l),value:Ac(c)}),n.push({op:"replace",path:r+"/"+Lx(l),value:Ac(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Lx(l),value:Ac(c)}),n.push({op:"remove",path:r+"/"+Lx(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!JY(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Lx(l),value:Ac(t[l])})}}}function t4e(e,t,n){n===void 0&&(n=!1);var r=[];return Mne(e,t,r,"",n),r}const UNt=Object.freeze(Object.defineProperty({__proto__:null,compare:t4e,generate:nK,observe:jNt,unobserve:BNt},Symbol.toStringTag,{value:"Module"}));Object.assign({},PNt,UNt,{JsonPatchError:ZOe,deepClone:Ac,escapePathComponent:Lx,unescapePathComponent:JOe});var DI=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(DI||{});function pF(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=n4e(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=pF(i,t);return zB(a,Ac(o),!0,!1).newDocument}function zNt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function QT({registry:e,initialState:t}){let n=!1;const r=sNt(),i=ANt(t);function s(c){return i.backend.nodes[c]}r.listen(DI.TRAVERSAL_START,()=>{n=!0}),r.listen(DI.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return pF(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=pF(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=t4e(y,f);if(zNt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const b=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:b}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=dNt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=pF(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(DI.TRAVERSAL_START);const f=n4e(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);HNt(p,m)?np(p)&&d.push(...p.sideEffects.undo):np(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(DI.TRAVERSAL_END)},undo(){const{current:c}=i;return np(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return r4e(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function VNt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;np(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)np(r)&&(r=n[r.parent]),np(i)&&(i=n[i.parent]);return r.id}function n4e(e,t,n){const r=VNt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),np(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),np(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function HNt(e,t){if(np(e)&&e.parent===t.id)return!0;if(np(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function r4e(e,t){return{...e,children:e.children.map(n=>r4e(t[n],t)),name:`${e.label}`}}vNt();function qNt(e){return e.length===2?CNt(e):e}class Ob{static create(){return new Ob}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:qNt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Rm(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}const ive=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},JT=e=>{const t=N.useRef(null),n=ive(e),[r,i]=N.useState(0),[s,o]=N.useState(0);N.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=ive({...n,width:n.width||r,height:n.height||s});return[t,a]},WNt=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:JT},Symbol.toStringTag,{value:"Module"})),GNt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function YNt({parameters:e,setAnswer:t}){const[n,r]=JT(GNt),[i,s]=N.useState(100),[o,a]=N.useState(100),[u,l]=N.useState(e.speed),{taskid:c}=e,{actions:f,trrack:d}=N.useMemo(()=>{const p=Ob.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=QT({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=N.useCallback(p=>{const m=ei("#movingCircle"),g=ei("#clickAccuracySvg"),y=n8(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],b=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+b,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:b}})},[f,t,c,d]);return N.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;ei(n.current).select("circle").transition().duration(y).ease(nTt).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:E.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:E.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[E.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),E.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),E.jsxs(Fe,{children:["Adjust speed (px/s):",E.jsx(FT,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const KNt=Object.freeze(Object.defineProperty({__proto__:null,default:YNt},Symbol.toStringTag,{value:"Module"}));function $ne({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=N.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=N.useCallback(c=>(s?IN("%B"):kb(".2s"))(c),[s]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:E.jsx(ma,{children:E.jsx($i,{gap:3,children:E.jsx(tt,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?E.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>E.jsxs("g",{transform:`translate(${f}, ${n})`,children:[E.jsx("line",{y2:"6",stroke:"currentColor"}),o?E.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,E.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:E.jsx(ma,{children:E.jsx(xs,{withinPortal:!0,label:c,children:E.jsx(tt,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const XNt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:$ne},Symbol.toStringTag,{value:"Module"}));function i4e({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=N.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:E.jsx(ma,{children:E.jsx($i,{gap:3,children:E.jsx(tt,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?E.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>E.jsxs("g",{transform:`translate(${n}, ${l})`,children:[E.jsx("line",{x2:"-6",stroke:"currentColor"}),s?E.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,E.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:E.jsx("foreignObject",{width:a,height:20,children:E.jsx($i,{style:{width:"100%",height:"100%"},justify:"right",children:E.jsx(tt,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const QNt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:i4e},Symbol.toStringTag,{value:"Module"})),ad={top:15,left:100,right:50,bottom:50};function rK({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=Df(),o=N.useMemo(()=>s-ad.left-ad.right,[s]),a=N.useMemo(()=>i-ad.top-ad.bottom,[i]),u=N.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Nb(OB).domain(d)},[n,t.category]),l=N.useMemo(()=>e?el([ad.left,o+ad.left]).domain([0,tp(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=N.useMemo(()=>e?GT([ad.top,a+ad.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=N.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:E.jsxs("g",{children:[E.jsx("rect",{x:ad.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-ad.left},h),E.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?E.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E.jsx($ne,{xScale:l,yRange:c.range(),vertPosition:a+ad.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?E.jsx(i4e,{yScale:c,horizontalPosition:ad.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):E.jsx(Qc,{})}const JNt=Object.freeze(Object.defineProperty({__proto__:null,Bar:rK,default:rK},Symbol.toStringTag,{value:"Module"})),pi=Array.isArray;function Uc(e){return e!=null?pi(e)?e:[e]:[]}function ZNt(e=0,t=1/0){return`${sve(e)} < row_number() && row_number() <= ${sve(t)}`}function sve(e){return e<0?`count() + ${e}`:e}class s4e{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(ZNt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Uc(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function pr(e){throw Error(e)}function Vl(e){return typeof e=="number"}function Ts(e){return typeof e=="function"}function VB(e,t){const n=Array(e);if(Ts(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let ePt=class extends s4e{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){pr("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){pr("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){pr("Not implemented")}getter(t){pr("Not implemented")}objects(t){pr("Not implemented")}object(t){pr("Not implemented")}[Symbol.iterator](){pr("Not implemented")}print(t={}){Vl(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=VB(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},tPt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},nPt=function(e){return e&&Ts(e.get)?e:new tPt(e)};function sy(e){return e instanceof Date}function tl(e){return e===Object(e)}function J8(e){return e instanceof RegExp}function gu(e){return typeof e=="string"}function rPt(e,t){const n=r=>pr(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?ove(e.entries(),t):sy(e)?n("Date"):J8(e)?n("RegExp"):gu(e)?n():pi(e)?iPt(e,t):Ts(e[Symbol.iterator])?sPt(e,t):tl(e)?ove(Object.entries(e),t):n()}function ove(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function iPt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function sPt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:oPt}=Object.prototype;function hp(e,t){return oPt.call(e,t)}function Qf(e){return e?new ave({...e.data()},e.columnNames()):new ave}class ave{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return hp(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const li=void 0,aPt=Object.getPrototypeOf(Int8Array);function PN(e){return e instanceof aPt}function gw(e){return pi(e)||PN(e)}function Gh(e){return e!=null&&e===e}const kD=e=>gw(e)||gu(e),uPt={compact:e=>gw(e)?e.filter(t=>Gh(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>kD(e)?e.includes(t,n):!1,indexof:(e,t)=>kD(e)?e.indexOf(t):-1,join:(e,t)=>gw(e)?e.join(t):li,lastindexof:(e,t)=>kD(e)?e.lastIndexOf(t):-1,length:e=>kD(e)?e.length:0,pluck:(e,t)=>gw(e)?e.map(n=>Gh(n)?n[t]:li):li,reverse:e=>gw(e)?e.slice().reverse():gu(e)?e.split("").reverse().join(""):li,slice:(e,t,n)=>kD(e)?e.slice(t,n):li};function lPt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function mF(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Vp=e=>(e<10?"0":"")+e,cPt=e=>e<0?"-"+mF(-e,6):e>9999?"+"+mF(e,6):mF(e,4);function o4e(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return cPt(e)+"-"+Vp(t+1)+"-"+Vp(n)+(!u||o?"T"+Vp(r)+":"+Vp(i)+":"+Vp(s)+"."+mF(o,3)+l:s?"T"+Vp(r)+":"+Vp(i)+":"+Vp(s)+l:i||r||!a?"T"+Vp(r)+":"+Vp(i)+l:"")}function a4e(e,t){return isNaN(e)?"Invalid Date":o4e(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function HB(e,t){return isNaN(e)?"Invalid Date":o4e(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const fPt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function dPt(e){return e.match(fPt)&&!isNaN(Date.parse(e))}function hPt(e,t=Date.parse){return dPt(e)?t(e):e}const u4e=6e4,l4e=864e5,c4e=6048e5,oo=new Date,uo=new Date,xo=e=>(oo.setTime(typeof e=="string"?hPt(e):e),oo);function pPt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function mPt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function gPt(e){uo.setTime(+e),uo.setHours(0,0,0,0),oo.setTime(+uo),oo.setMonth(0),oo.setDate(1);const t=(uo.getTimezoneOffset()-oo.getTimezoneOffset())*u4e;return Math.floor(1+(uo-oo-t)/l4e)}function yPt(e){uo.setTime(+e),uo.setUTCHours(0,0,0,0);const t=Date.UTC(uo.getUTCFullYear(),0,1);return Math.floor(1+(uo-t)/l4e)}function vPt(e,t){const n=t||0;uo.setTime(+e),uo.setDate(uo.getDate()-(uo.getDay()+7-n)%7),uo.setHours(0,0,0,0),oo.setTime(+e),oo.setMonth(0),oo.setDate(1),oo.setDate(1-(oo.getDay()+7-n)%7),oo.setHours(0,0,0,0);const r=(uo.getTimezoneOffset()-oo.getTimezoneOffset())*u4e;return Math.floor((1+(uo-oo)-r)/c4e)}function bPt(e,t){const n=t||0;return uo.setTime(+e),uo.setUTCDate(uo.getUTCDate()-(uo.getUTCDay()+7-n)%7),uo.setUTCHours(0,0,0,0),oo.setTime(+e),oo.setUTCMonth(0),oo.setUTCDate(1),oo.setUTCDate(1-(oo.getUTCDay()+7-n)%7),oo.setUTCHours(0,0,0,0),Math.floor((1+(uo-oo))/c4e)}const xPt={format_date:(e,t)=>a4e(xo(e),!t),format_utcdate:(e,t)=>HB(xo(e),!t),timestamp:e=>+xo(e),year:e=>xo(e).getFullYear(),quarter:e=>Math.floor(xo(e).getMonth()/3),month:e=>xo(e).getMonth(),date:e=>xo(e).getDate(),dayofweek:e=>xo(e).getDay(),hours:e=>xo(e).getHours(),minutes:e=>xo(e).getMinutes(),seconds:e=>xo(e).getSeconds(),milliseconds:e=>xo(e).getMilliseconds(),utcyear:e=>xo(e).getUTCFullYear(),utcquarter:e=>Math.floor(xo(e).getUTCMonth()/3),utcmonth:e=>xo(e).getUTCMonth(),utcdate:e=>xo(e).getUTCDate(),utcdayofweek:e=>xo(e).getUTCDay(),utchours:e=>xo(e).getUTCHours(),utcminutes:e=>xo(e).getUTCMinutes(),utcseconds:e=>xo(e).getUTCSeconds(),utcmilliseconds:e=>xo(e).getUTCMilliseconds(),datetime:pPt,dayofyear:gPt,week:vPt,utcdatetime:mPt,utcdayofyear:yPt,utcweek:bPt,now:Date.now};function Lne(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:sy(e)||sy(t)?+e==+t:J8(e)&&J8(t)?e+""==t+"":tl(e)&&tl(t)?wPt(e,t):!1}function wPt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return uve(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!uve(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!Lne(e[o],t[o]))return!1}return!0}function uve(e,t,n=Lne){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const _Pt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let EPt=Math.random;function ZT(){return EPt()}const SPt={random:ZT,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function Bne(e){return e instanceof Map}function CPt(e){return e instanceof Set}function gF(e){return Bne(e)||CPt(e)}function hH(e){return Array.from(e)}const TPt={has:(e,t)=>gF(e)?e.has(t):e!=null?hp(e,t):!1,keys:e=>Bne(e)?hH(e.keys()):e!=null?Object.keys(e):[],values:e=>gF(e)?hH(e.values()):e!=null?Object.values(e):[],entries:e=>gF(e)?hH(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):li};function APt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(hp(t,e))return t[e];return n!==void 0?n:e}function DPt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const IPt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},Q2={bin:lPt,equal:Lne,recode:APt,sequence:DPt,...uPt,...xPt,..._Pt,...SPt,...TPt,...IPt};function QR(e){return typeof e=="bigint"}function Wm(e){return e===void 0?e+"":QR(e)?e+"n":JSON.stringify(e)}function or(e,t=[],n=[]){return new kPt(e,Uc(t),Uc(n))}let kPt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${Wm(n)}]`),...this.params.map(Wm)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const f4e=e=>or("any",e),d4e=()=>or("count"),h4e=e=>or("array_agg",e),p4e=e=>or("array_agg_distinct",e),m4e=(e,t)=>or("map_agg",[e,t]),g4e=(e,t)=>or("object_agg",[e,t]),y4e=(e,t)=>or("entries_agg",[e,t]);({...Q2});function RPt(e,t){e=gF(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function NPt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function PPt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function OPt(e,t,n,r){const i=r==="map"||r===!0?m4e:r==="entries"?y4e:r==="object"?g4e:pr('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=RPt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:h4e(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const FPt="ArrayPattern",MPt="ArrowFunctionExpression",$Pt="FunctionExpression",dv="Identifier",eA="Literal",v4e="MemberExpression",LPt="ObjectExpression",b4e="ObjectPattern",x4e="Property",ON="Column",BPt="Constant",jPt="Dictionary",UPt="Function",zPt="Parameter",w4e="Op",cs=(e,t)=>{const n=VPt[e.type];return n?n(e,t):pr(`Unsupported expression construct: ${e.type}`)},pH=(e,t)=>"("+cs(e.left,t)+" "+e.operator+" "+cs(e.right,t)+")",mH=(e,t)=>"("+Qp(e.params,t)+")=>"+cs(e.body,t),lve=(e,t)=>cs(e.callee,t)+"("+Qp(e.arguments,t)+")",Qp=(e,t,n=",")=>e.map(r=>cs(r,t)).join(n),_4e=e=>e.computed?`[${Wm(e.name)}]`:`.${e.name}`,cve=(e,t,n)=>{const r=e.table||"";return`data${r}${_4e(e)}.${n}(${t.index}${r})`},VPt={Constant:e=>e.raw,Column:(e,t)=>cve(e,t,"get"),Dictionary:(e,t)=>cve(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${_4e(e)}`,Op:(e,t)=>`op(${Wm(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+cs(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=cs(e.object,t),i=cs(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:lve,NewExpression:(e,t)=>"new "+lve(e,t),ArrayExpression:(e,t)=>"["+Qp(e.elements,t)+"]",AssignmentExpression:pH,BinaryExpression:pH,LogicalExpression:pH,UnaryExpression:(e,t)=>"("+e.operator+cs(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+cs(e.test,t)+"?"+cs(e.consequent,t)+":"+cs(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Qp(e.properties,t)+"})",Property:(e,t)=>{const n=cs(e.key,t);return(e.computed?`[${n}]`:n)+":"+cs(e.value,t)},ArrowFunctionExpression:mH,FunctionExpression:mH,FunctionDeclaration:mH,ArrayPattern:(e,t)=>"["+Qp(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Qp(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Qp(e.declarations,t,","),VariableDeclarator:(e,t)=>cs(e.id,t)+"="+cs(e.init,t),SpreadElement:(e,t)=>"..."+cs(e.argument,t),BlockStatement:(e,t)=>"{"+Qp(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>cs(e.expression,t),IfStatement:(e,t)=>"if ("+cs(e.test,t)+")"+cs(e.consequent,t)+(e.alternate?" else "+cs(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+cs(e.discriminant,t)+") {"+Qp(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+cs(e.test,t):"default")+": "+Qp(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+cs(e.argument,t),Program:(e,t)=>cs(e.body[0],t)};function Z8(e,t={index:"row"}){return cs(e,t)}function HPt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function TC(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:sy(e)?+e:pi(e)||PN(e)?`[${e.map(TC)}]`:J8(e)?e+"":qPt(e)}function qPt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${TC(e[r])}`;return t+="}",t}function e5(e,t){const n=e.length;return n===1?(r,i)=>TC(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=TC(a)}return s}}function WPt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=TC(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=TC(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function ig(){}function GPt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function ea(e){return e.init=e.init||ig,e.add=e.add||ig,e.rem=e.rem||ig,e}function fve(e,t){return e.product_v=!1,e.product=t}const E4e={count:{create:()=>ea({value:e=>e.count}),param:[]},array_agg:{create:()=>ea({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>ea({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>ea({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>ea({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>ea({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:li}),param:[1]},valid:{create:()=>ea({value:e=>e.valid}),param:[1]},invalid:{create:()=>ea({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=WPt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>ea({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>ea({value:e=>{let t=li,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:li,add:(e,t)=>QR(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>fve(e,1),value:e=>e.valid?e.product_v?fve(e,GPt(e.list.values())):e.product:void 0,add:(e,t)=>QR(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:li,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>ea({value:e=>e.valid?e.mean:li}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):li,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>ea({value:e=>e.valid>1?e.dev/e.valid:li}),param:[1],req:["variance"]},stdev:{create:()=>ea({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):li}),param:[1],req:["variance"]},stdevp:{create:()=>ea({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):li}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=li,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===li)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=li,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===li)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>ea({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>ea({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):li,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>ea({value:e=>e.valid>1?e.cov/e.valid:li}),param:[2],req:["covariance"]},corr:{create:()=>ea({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):li}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>ea({value:i=>HPt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},dve={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},hve={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},S4e={row_number:{create(){return{init:ig,value:e=>e.index+1}},param:[]},rank:dve,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=dve.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:hve,ntile:{create(e){e=+e,e>0||pr("ntile num must be greater than zero.");const{init:t,value:n}=hve.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=li){return e=+e||1,{init:ig,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=li){return e=+e||1,{init:ig,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:ig,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:ig,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||pr("nth_value nth must be greater than zero."),{init:ig,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):li}}},param:[1,1]},fill_down:{create(e=li){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Gh(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=li){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=YPt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function YPt(e,t,n){for(const r=e.size;n<r;++n)if(Gh(e.value(n,t)))return n;return-1}function jne(e){return hp(E4e,e)}function Une(e){return hp(S4e,e)}function C4e(e){return hp(Q2,e)||e==="row_object"}function T4e(e){return jne(e)&&E4e[e]}function A4e(e){return Une(e)&&S4e[e]}function RD(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const zne={escape:(e,t,n)=>RD(e,t,n),expr:(e,t)=>RD(`(row,data,op)=>${e}`,Q2,t),expr2:(e,t)=>RD(`(row0,data0,row,data)=>${e}`,Q2,t),join:(e,t)=>RD(`(row1,data1,row2,data2)=>${e}`,Q2,t),param:(e,t)=>RD(e,Q2,t)},KPt={"==":1,"!=":1,"===":1,"!==":1};function D4e(e,t,n=0,r,i){if(e.type=ON,e.name=t,e.table=n,i&&r&&Ts(r.keyFor)){const s=KPt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===eA&&XPt(i,e,s,r.keyFor(s.value))}return e}function XPt(e,t,n,r){return r<0?(e.type=eA,e.value=!1,e.raw="false"):(t.type=jPt,n.value=r,n.raw=r+""),!0}function qB(e){return pi(e)?e:Bne(e)?e.entries():e?Object.entries(e):[]}const I4e="row_object";function k4e(e,t){e.type=LPt;const n=e.properties=[];for(const r of qB(t)){const[i,s]=pi(r)?r:[r,r];n.push({type:x4e,key:{type:eA,raw:Wm(s)},value:D4e({computed:!0},i)})}return e}function R4e(e){return Z8(k4e({},e))}function N4e(e){return zne.expr(R4e(e))}const QPt=new TextDecoder("utf-8"),iK=e=>QPt.decode(e),JPt=new TextEncoder,Vne=e=>JPt.encode(e),ZPt=e=>typeof e=="boolean",dc=e=>typeof e=="function",Fb=e=>e!=null&&Object(e)===e,WB=e=>Fb(e)&&dc(e.then),Hne=e=>Fb(e)&&dc(e[Symbol.iterator]),GB=e=>Fb(e)&&dc(e[Symbol.asyncIterator]),eOt=e=>Fb(e)&&"done"in e&&"value"in e,P4e=e=>"_getDOMStream"in e&&"_getNodeStream"in e,tOt=e=>Fb(e)&&dc(e.abort)&&dc(e.getWriter)&&!P4e(e),nOt=e=>Fb(e)&&dc(e.end)&&dc(e.write)&&ZPt(e.writable)&&!P4e(e),rOt=e=>Fb(e)&&dc(e.clear)&&dc(e.bytes)&&dc(e.position)&&dc(e.setPosition)&&dc(e.capacity)&&dc(e.getBufferIdentifier)&&dc(e.createLong),qne=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function iOt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function t5(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Gm(e,t){const n=iOt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?t5(o,s,a):o=s;break}t5(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Ca(e,t){let n=eOt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=Vne(n)),n instanceof ArrayBuffer?new e(n):n instanceof qne?new e(n):rOt(n)?Ca(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const ND=e=>Ca(Int32Array,e),Vi=e=>Ca(Uint8Array,e),sK=e=>(e.next(),e);function*sOt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof qne?n(t):Hne(t)?t:n(t);return yield*sK(function*(i){let s=null;do s=i.next(yield Ca(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const oOt=e=>sOt(Uint8Array,e);function O4e(e,t){return lw(this,arguments,function*(){if(WB(t))return yield Wr(yield Wr(yield*tz(lk(O4e(e,yield Wr(t))))));const r=function(o){return lw(this,arguments,function*(){yield yield Wr(yield Wr(o))})},i=function(o){return lw(this,arguments,function*(){yield Wr(yield*tz(lk(sK(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof qne?r(t):Hne(t)?i(t):GB(t)?t:r(t);return yield Wr(yield*tz(lk(sK(function(o){return lw(this,arguments,function*(){let a=null;do a=yield Wr(o.next(yield yield Wr(Ca(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Wr(new e)})}const aOt=e=>O4e(Uint8Array,e);function F4e(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function uOt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const pve={fromIterable(e){return N4(lOt(e))},fromAsyncIterable(e){return N4(cOt(e))},fromDOMStream(e){return N4(fOt(e))},fromNodeStream(e){return N4(hOt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},N4=e=>(e.next(),e);function*lOt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?Gm(r,o)[0]:([i,r,a]=Gm(r,o),i)}({cmd:s,size:o}=yield null);const l=oOt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function cOt(e){return lw(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Gm(i,a)[0]:([s,i,u]=Gm(i,a),s)}({cmd:o,size:a}=yield yield Wr(null));const c=aOt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Wr(c.next()):yield Wr(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Wr(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Wr(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Wr(c.return(new Uint8Array(0))))}return yield Wr(null)})}function fOt(e){return lw(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Gm(i,a)[0]:([s,i,u]=Gm(i,a),s)}({cmd:o,size:a}=yield yield Wr(null));const c=new dOt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Wr(c.read()):yield Wr(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Vi(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Wr(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Wr(c.cancel(f)))}finally{r===!1?yield Wr(c.cancel()):e.locked&&c.releaseLock()}return yield Wr(null)})}class dOt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return ug(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return ug(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Vi(n)),n})}}const gH=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function hOt(e){return lw(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?Gm(l,a)[0]:([c,l,u]=Gm(l,a),c)}if({cmd:o,size:a}=yield yield Wr(null),e.isTTY)return yield yield Wr(new Uint8Array(0)),yield Wr(null);try{n[0]=gH(e,"end"),n[1]=gH(e,"error");do{if(n[2]=gH(e,"readable"),[r,s]=yield Wr(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Vi(e.read(a-u)),c.byteLength<a-u&&(c=Vi(e.read()))):c=Vi(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Wr(f()));while(a<u)}while(!i)}finally{yield Wr(d(n,r==="error"?s:null))}return yield Wr(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Il;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Il||(Il={}));var zc;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(zc||(zc={}));var uu;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(uu||(uu={}));var Ym;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Ym||(Ym={}));var Rn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Rn||(Rn={}));var Km;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Km||(Km={}));var Da;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Da||(Da={}));var ge;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(ge||(ge={}));var J0;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(J0||(J0={}));const pOt=void 0;function i_(e){if(e===null)return"null";if(e===pOt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>i_(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const mOt=Symbol.for("isArrowBigNum");function Dp(e,...t){return t.length===0?Object.setPrototypeOf(Ca(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Dp.prototype[mOt]=!0;Dp.prototype.toJSON=function(){return`"${ZR(this)}"`};Dp.prototype.valueOf=function(){return M4e(this)};Dp.prototype.toString=function(){return ZR(this)};Dp.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return M4e(this);case"string":return ZR(this);case"default":return gOt(this)}return ZR(this)};function TS(...e){return Dp.apply(this,e)}function AS(...e){return Dp.apply(this,e)}function JR(...e){return Dp.apply(this,e)}Object.setPrototypeOf(TS.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(AS.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(JR.prototype,Object.create(Uint32Array.prototype));Object.assign(TS.prototype,Dp.prototype,{constructor:TS,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(AS.prototype,Dp.prototype,{constructor:AS,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(JR.prototype,Dp.prototype,{constructor:JR,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function M4e(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const ZR=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return yH(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return yH(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${yH(t)}`},gOt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:ZR(e);function yH(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class Wne{static new(t,n){switch(n){case!0:return new TS(t);case!1:return new AS(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new TS(t)}return t.byteLength===16?new JR(t):new AS(t)}static signed(t){return new TS(t)}static unsigned(t){return new AS(t)}static decimal(t){return new JR(t)}constructor(t,n){return Wne.new(t,n)}}function pp(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var $4e,L4e,B4e,j4e,U4e,z4e,V4e,H4e,q4e,W4e,G4e,Y4e,K4e,X4e,Q4e,J4e,Z4e,e6e,t6e,n6e;let vr=class oK{static isNull(t){return(t==null?void 0:t.typeId)===ge.Null}static isInt(t){return(t==null?void 0:t.typeId)===ge.Int}static isFloat(t){return(t==null?void 0:t.typeId)===ge.Float}static isBinary(t){return(t==null?void 0:t.typeId)===ge.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===ge.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===ge.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===ge.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===ge.Date}static isTime(t){return(t==null?void 0:t.typeId)===ge.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===ge.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===ge.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===ge.Duration}static isList(t){return(t==null?void 0:t.typeId)===ge.List}static isStruct(t){return(t==null?void 0:t.typeId)===ge.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===ge.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===ge.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===ge.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===ge.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===ge.Dictionary}static isDenseUnion(t){return oK.isUnion(t)&&t.mode===zc.Dense}static isSparseUnion(t){return oK.isUnion(t)&&t.mode===zc.Sparse}get typeId(){return ge.NONE}};$4e=Symbol.toStringTag;vr[$4e]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(vr.prototype);let oy=class extends vr{toString(){return"Null"}get typeId(){return ge.Null}};L4e=Symbol.toStringTag;oy[L4e]=(e=>e[Symbol.toStringTag]="Null")(oy.prototype);class Hl extends vr{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return ge.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}B4e=Symbol.toStringTag;Hl[B4e]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Hl.prototype);class Gne extends Hl{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class Yne extends Hl{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Lv extends Hl{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class Kne extends Hl{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class Xne extends Hl{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class Qne extends Hl{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class Jne extends Hl{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class Zne extends Hl{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(Gne.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(Yne.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Lv.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(Kne.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(Xne.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(Qne.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Jne.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(Zne.prototype,"ArrayType",{value:BigUint64Array});class Bv extends vr{constructor(t){super(),this.precision=t}get typeId(){return ge.Float}get ArrayType(){switch(this.precision){case uu.HALF:return Uint16Array;case uu.SINGLE:return Float32Array;case uu.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}j4e=Symbol.toStringTag;Bv[j4e]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Bv.prototype);class r6e extends Bv{constructor(){super(uu.HALF)}}class ere extends Bv{constructor(){super(uu.SINGLE)}}class tre extends Bv{constructor(){super(uu.DOUBLE)}}Object.defineProperty(r6e.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(ere.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(tre.prototype,"ArrayType",{value:Float64Array});let e3=class extends vr{constructor(){super()}get typeId(){return ge.Binary}toString(){return"Binary"}};U4e=Symbol.toStringTag;e3[U4e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(e3.prototype);let AC=class extends vr{constructor(){super()}get typeId(){return ge.Utf8}toString(){return"Utf8"}};z4e=Symbol.toStringTag;AC[z4e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(AC.prototype);let t3=class extends vr{constructor(){super()}get typeId(){return ge.Bool}toString(){return"Bool"}};V4e=Symbol.toStringTag;t3[V4e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(t3.prototype);let n5=class extends vr{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return ge.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};H4e=Symbol.toStringTag;n5[H4e]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(n5.prototype);class DC extends vr{constructor(t){super(),this.unit=t}get typeId(){return ge.Date}toString(){return`Date${(this.unit+1)*32}<${Ym[this.unit]}>`}}q4e=Symbol.toStringTag;DC[q4e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(DC.prototype);class yOt extends DC{constructor(){super(Ym.DAY)}}class vOt extends DC{constructor(){super(Ym.MILLISECOND)}}class ay extends vr{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return ge.Time}toString(){return`Time${this.bitWidth}<${Rn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}W4e=Symbol.toStringTag;ay[W4e]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(ay.prototype);class bOt extends ay{constructor(){super(Rn.SECOND,32)}}class xOt extends ay{constructor(){super(Rn.MILLISECOND,32)}}class wOt extends ay{constructor(){super(Rn.MICROSECOND,64)}}class _Ot extends ay{constructor(){super(Rn.NANOSECOND,64)}}class r5 extends vr{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return ge.Timestamp}toString(){return`Timestamp<${Rn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}G4e=Symbol.toStringTag;r5[G4e]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(r5.prototype);class IC extends vr{constructor(t){super(),this.unit=t}get typeId(){return ge.Interval}toString(){return`Interval<${Km[this.unit]}>`}}Y4e=Symbol.toStringTag;IC[Y4e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(IC.prototype);class EOt extends IC{constructor(){super(Km.DAY_TIME)}}class SOt extends IC{constructor(){super(Km.YEAR_MONTH)}}let i5=class extends vr{constructor(t){super(),this.unit=t}get typeId(){return ge.Duration}toString(){return`Duration<${Rn[this.unit]}>`}};K4e=Symbol.toStringTag;i5[K4e]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(i5.prototype);let kC=class extends vr{constructor(t){super(),this.children=[t]}get typeId(){return ge.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};X4e=Symbol.toStringTag;kC[X4e]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(kC.prototype);class zu extends vr{constructor(t){super(),this.children=t}get typeId(){return ge.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}Q4e=Symbol.toStringTag;zu[Q4e]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(zu.prototype);class n3 extends vr{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return ge.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}J4e=Symbol.toStringTag;n3[J4e]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(n3.prototype);let s5=class extends vr{constructor(t){super(),this.byteWidth=t}get typeId(){return ge.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};Z4e=Symbol.toStringTag;s5[Z4e]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(s5.prototype);let RC=class extends vr{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return ge.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};e6e=Symbol.toStringTag;RC[e6e]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(RC.prototype);class r3 extends vr{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return ge.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}t6e=Symbol.toStringTag;r3[t6e]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(r3.prototype);const COt=(e=>()=>++e)(-1);class jv extends vr{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?COt():pp(r)}get typeId(){return ge.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}n6e=Symbol.toStringTag;jv[n6e]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(jv.prototype);function em(e){const t=e;switch(e.typeId){case ge.Decimal:return e.bitWidth/32;case ge.Timestamp:return 2;case ge.Date:return 1+t.unit;case ge.Interval:return 1+t.unit;case ge.FixedSizeList:return t.listSize;case ge.FixedSizeBinary:return t.byteWidth;default:return 1}}class br{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return TOt(this,t,n)}getVisitFnByTypeId(t,n=!0){return E2(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function TOt(e,t,n=!0){return typeof t=="number"?E2(e,t,n):typeof t=="string"&&t in ge?E2(e,ge[t],n):t&&t instanceof vr?E2(e,mve(t),n):t!=null&&t.type&&t.type instanceof vr?E2(e,mve(t.type),n):E2(e,ge.NONE,n)}function E2(e,t,n=!0){let r=null;switch(t){case ge.Null:r=e.visitNull;break;case ge.Bool:r=e.visitBool;break;case ge.Int:r=e.visitInt;break;case ge.Int8:r=e.visitInt8||e.visitInt;break;case ge.Int16:r=e.visitInt16||e.visitInt;break;case ge.Int32:r=e.visitInt32||e.visitInt;break;case ge.Int64:r=e.visitInt64||e.visitInt;break;case ge.Uint8:r=e.visitUint8||e.visitInt;break;case ge.Uint16:r=e.visitUint16||e.visitInt;break;case ge.Uint32:r=e.visitUint32||e.visitInt;break;case ge.Uint64:r=e.visitUint64||e.visitInt;break;case ge.Float:r=e.visitFloat;break;case ge.Float16:r=e.visitFloat16||e.visitFloat;break;case ge.Float32:r=e.visitFloat32||e.visitFloat;break;case ge.Float64:r=e.visitFloat64||e.visitFloat;break;case ge.Utf8:r=e.visitUtf8;break;case ge.Binary:r=e.visitBinary;break;case ge.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case ge.Date:r=e.visitDate;break;case ge.DateDay:r=e.visitDateDay||e.visitDate;break;case ge.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case ge.Timestamp:r=e.visitTimestamp;break;case ge.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case ge.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case ge.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case ge.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case ge.Time:r=e.visitTime;break;case ge.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case ge.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case ge.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case ge.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case ge.Decimal:r=e.visitDecimal;break;case ge.List:r=e.visitList;break;case ge.Struct:r=e.visitStruct;break;case ge.Union:r=e.visitUnion;break;case ge.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case ge.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case ge.Dictionary:r=e.visitDictionary;break;case ge.Interval:r=e.visitInterval;break;case ge.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case ge.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case ge.Duration:r=e.visitDuration;break;case ge.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case ge.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case ge.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case ge.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case ge.FixedSizeList:r=e.visitFixedSizeList;break;case ge.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${ge[t]}'`)}function mve(e){switch(e.typeId){case ge.Null:return ge.Null;case ge.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?ge.Int8:ge.Uint8;case 16:return n?ge.Int16:ge.Uint16;case 32:return n?ge.Int32:ge.Uint32;case 64:return n?ge.Int64:ge.Uint64}return ge.Int}case ge.Float:switch(e.precision){case uu.HALF:return ge.Float16;case uu.SINGLE:return ge.Float32;case uu.DOUBLE:return ge.Float64}return ge.Float;case ge.Binary:return ge.Binary;case ge.Utf8:return ge.Utf8;case ge.Bool:return ge.Bool;case ge.Decimal:return ge.Decimal;case ge.Time:switch(e.unit){case Rn.SECOND:return ge.TimeSecond;case Rn.MILLISECOND:return ge.TimeMillisecond;case Rn.MICROSECOND:return ge.TimeMicrosecond;case Rn.NANOSECOND:return ge.TimeNanosecond}return ge.Time;case ge.Timestamp:switch(e.unit){case Rn.SECOND:return ge.TimestampSecond;case Rn.MILLISECOND:return ge.TimestampMillisecond;case Rn.MICROSECOND:return ge.TimestampMicrosecond;case Rn.NANOSECOND:return ge.TimestampNanosecond}return ge.Timestamp;case ge.Date:switch(e.unit){case Ym.DAY:return ge.DateDay;case Ym.MILLISECOND:return ge.DateMillisecond}return ge.Date;case ge.Interval:switch(e.unit){case Km.DAY_TIME:return ge.IntervalDayTime;case Km.YEAR_MONTH:return ge.IntervalYearMonth}return ge.Interval;case ge.Duration:switch(e.unit){case Rn.SECOND:return ge.DurationSecond;case Rn.MILLISECOND:return ge.DurationMillisecond;case Rn.MICROSECOND:return ge.DurationMicrosecond;case Rn.NANOSECOND:return ge.DurationNanosecond}return ge.Duration;case ge.Map:return ge.Map;case ge.List:return ge.List;case ge.Struct:return ge.Struct;case ge.Union:switch(e.mode){case zc.Dense:return ge.DenseUnion;case zc.Sparse:return ge.SparseUnion}return ge.Union;case ge.FixedSizeBinary:return ge.FixedSizeBinary;case ge.FixedSizeList:return ge.FixedSizeList;case ge.Dictionary:return ge.Dictionary}throw new Error(`Unrecognized type '${ge[e.typeId]}'`)}br.prototype.visitInt8=null;br.prototype.visitInt16=null;br.prototype.visitInt32=null;br.prototype.visitInt64=null;br.prototype.visitUint8=null;br.prototype.visitUint16=null;br.prototype.visitUint32=null;br.prototype.visitUint64=null;br.prototype.visitFloat16=null;br.prototype.visitFloat32=null;br.prototype.visitFloat64=null;br.prototype.visitDateDay=null;br.prototype.visitDateMillisecond=null;br.prototype.visitTimestampSecond=null;br.prototype.visitTimestampMillisecond=null;br.prototype.visitTimestampMicrosecond=null;br.prototype.visitTimestampNanosecond=null;br.prototype.visitTimeSecond=null;br.prototype.visitTimeMillisecond=null;br.prototype.visitTimeMicrosecond=null;br.prototype.visitTimeNanosecond=null;br.prototype.visitDenseUnion=null;br.prototype.visitSparseUnion=null;br.prototype.visitIntervalDayTime=null;br.prototype.visitIntervalYearMonth=null;br.prototype.visitDuration=null;br.prototype.visitDurationSecond=null;br.prototype.visitDurationMillisecond=null;br.prototype.visitDurationMicrosecond=null;br.prototype.visitDurationNanosecond=null;const i6e=new Float64Array(1),e2=new Uint32Array(i6e.buffer);function s6e(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function o6e(e){if(e!==e)return 32256;i6e[0]=e;const t=(e2[1]&2147483648)>>16&65535;let n=e2[1]&2146435072,r=0;return n>=1089470464?e2[0]>0?n=31744:(n=(n&2080374784)>>16,r=(e2[1]&1048575)>>10):n<=1056964608?(r=1048576+(e2[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(e2[1]&1048575)+512>>10),t|n|r&65535}class $n extends br{}function Vn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const AOt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},nre=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},DOt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},IOt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},a6e=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},kOt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Ay=({values:e},t,n)=>{e[t]=n},rre=({values:e},t,n)=>{e[t]=n},u6e=({values:e},t,n)=>{e[t]=o6e(n)},ROt=(e,t,n)=>{switch(e.type.precision){case uu.HALF:return u6e(e,t,n);case uu.SINGLE:case uu.DOUBLE:return rre(e,t,n)}},ire=({values:e},t,n)=>{AOt(e,t,n.valueOf())},sre=({values:e},t,n)=>{nre(e,t*2,n.valueOf())},l6e=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},NOt=({values:e,valueOffsets:t},n,r)=>a6e(e,t,n,r),POt=({values:e,valueOffsets:t},n,r)=>{a6e(e,t,n,Vne(r))},c6e=(e,t,n)=>{e.type.unit===Ym.DAY?ire(e,t,n):sre(e,t,n)},ore=({values:e},t,n)=>nre(e,t*2,n/1e3),are=({values:e},t,n)=>nre(e,t*2,n),ure=({values:e},t,n)=>DOt(e,t*2,n),lre=({values:e},t,n)=>IOt(e,t*2,n),f6e=(e,t,n)=>{switch(e.type.unit){case Rn.SECOND:return ore(e,t,n);case Rn.MILLISECOND:return are(e,t,n);case Rn.MICROSECOND:return ure(e,t,n);case Rn.NANOSECOND:return lre(e,t,n)}},cre=({values:e},t,n)=>{e[t]=n},fre=({values:e},t,n)=>{e[t]=n},dre=({values:e},t,n)=>{e[t]=n},hre=({values:e},t,n)=>{e[t]=n},d6e=(e,t,n)=>{switch(e.type.unit){case Rn.SECOND:return cre(e,t,n);case Rn.MILLISECOND:return fre(e,t,n);case Rn.MICROSECOND:return dre(e,t,n);case Rn.NANOSECOND:return hre(e,t,n)}},h6e=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},OOt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Ud.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},FOt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Ud.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},MOt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),$Ot=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),LOt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),BOt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),jOt=(e,t,n)=>{const r=e.type.children.map(s=>Ud.getVisitFn(s.type)),i=n instanceof Map?LOt(t,n):n instanceof mi?$Ot(t,n):Array.isArray(n)?MOt(t,n):BOt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},UOt=(e,t,n)=>{e.type.mode===zc.Dense?p6e(e,t,n):m6e(e,t,n)},p6e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Ud.visit(i,e.valueOffsets[t],n)},m6e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Ud.visit(i,t,n)},zOt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},g6e=(e,t,n)=>{e.type.unit===Km.DAY_TIME?pre(e,t,n):mre(e,t,n)},pre=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},mre=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},gre=({values:e},t,n)=>{e[t]=n},yre=({values:e},t,n)=>{e[t]=n},vre=({values:e},t,n)=>{e[t]=n},bre=({values:e},t,n)=>{e[t]=n},y6e=(e,t,n)=>{switch(e.type.unit){case Rn.SECOND:return gre(e,t,n);case Rn.MILLISECOND:return yre(e,t,n);case Rn.MICROSECOND:return vre(e,t,n);case Rn.NANOSECOND:return bre(e,t,n)}},VOt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Ud.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};$n.prototype.visitBool=Vn(kOt);$n.prototype.visitInt=Vn(Ay);$n.prototype.visitInt8=Vn(Ay);$n.prototype.visitInt16=Vn(Ay);$n.prototype.visitInt32=Vn(Ay);$n.prototype.visitInt64=Vn(Ay);$n.prototype.visitUint8=Vn(Ay);$n.prototype.visitUint16=Vn(Ay);$n.prototype.visitUint32=Vn(Ay);$n.prototype.visitUint64=Vn(Ay);$n.prototype.visitFloat=Vn(ROt);$n.prototype.visitFloat16=Vn(u6e);$n.prototype.visitFloat32=Vn(rre);$n.prototype.visitFloat64=Vn(rre);$n.prototype.visitUtf8=Vn(POt);$n.prototype.visitBinary=Vn(NOt);$n.prototype.visitFixedSizeBinary=Vn(l6e);$n.prototype.visitDate=Vn(c6e);$n.prototype.visitDateDay=Vn(ire);$n.prototype.visitDateMillisecond=Vn(sre);$n.prototype.visitTimestamp=Vn(f6e);$n.prototype.visitTimestampSecond=Vn(ore);$n.prototype.visitTimestampMillisecond=Vn(are);$n.prototype.visitTimestampMicrosecond=Vn(ure);$n.prototype.visitTimestampNanosecond=Vn(lre);$n.prototype.visitTime=Vn(d6e);$n.prototype.visitTimeSecond=Vn(cre);$n.prototype.visitTimeMillisecond=Vn(fre);$n.prototype.visitTimeMicrosecond=Vn(dre);$n.prototype.visitTimeNanosecond=Vn(hre);$n.prototype.visitDecimal=Vn(h6e);$n.prototype.visitList=Vn(OOt);$n.prototype.visitStruct=Vn(jOt);$n.prototype.visitUnion=Vn(UOt);$n.prototype.visitDenseUnion=Vn(p6e);$n.prototype.visitSparseUnion=Vn(m6e);$n.prototype.visitDictionary=Vn(zOt);$n.prototype.visitInterval=Vn(g6e);$n.prototype.visitIntervalDayTime=Vn(pre);$n.prototype.visitIntervalYearMonth=Vn(mre);$n.prototype.visitDuration=Vn(y6e);$n.prototype.visitDurationSecond=Vn(gre);$n.prototype.visitDurationMillisecond=Vn(yre);$n.prototype.visitDurationMicrosecond=Vn(vre);$n.prototype.visitDurationNanosecond=Vn(bre);$n.prototype.visitFixedSizeList=Vn(VOt);$n.prototype.visitMap=Vn(FOt);const Ud=new $n,Rh=Symbol.for("parent"),DS=Symbol.for("rowIndex");class xre{constructor(t,n){return this[Rh]=t,this[DS]=n,new Proxy(this,new qOt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[DS],n=this[Rh],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Vc.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${i_(t)}: ${i_(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new HOt(this[Rh],this[DS])}}class HOt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Vc.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(xre.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Rh]:{writable:!0,enumerable:!1,configurable:!1,value:null},[DS]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class qOt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Rh].type.children.map(n=>n.name)}has(t,n){return t[Rh].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Rh].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Rh].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Vc.visit(t[Rh].children[r],t[DS]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Rh].type.children.findIndex(s=>s.name===n);return i!==-1?(Ud.visit(t[Rh].children[i],t[DS],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class Nn extends br{}function Ln(e){return(t,n)=>t.getValid(n)?e(t,n):null}const WOt=(e,t)=>864e5*e[t],wre=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),GOt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,YOt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,v6e=e=>new Date(e),KOt=(e,t)=>v6e(WOt(e,t)),XOt=(e,t)=>v6e(wre(e,t)),QOt=(e,t)=>null,b6e=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},JOt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},x6e=({values:e},t)=>KOt(e,t),w6e=({values:e},t)=>XOt(e,t*2),Mb=({stride:e,values:t},n)=>t[e*n],ZOt=({stride:e,values:t},n)=>s6e(t[e*n]),_6e=({values:e},t)=>e[t],e4t=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),t4t=({values:e,valueOffsets:t},n)=>b6e(e,t,n),n4t=({values:e,valueOffsets:t},n)=>{const r=b6e(e,t,n);return r!==null?iK(r):null},r4t=({values:e},t)=>e[t],i4t=({type:e,values:t},n)=>e.precision!==uu.HALF?t[n]:s6e(t[n]),s4t=(e,t)=>e.type.unit===Ym.DAY?x6e(e,t):w6e(e,t),E6e=({values:e},t)=>1e3*wre(e,t*2),S6e=({values:e},t)=>wre(e,t*2),C6e=({values:e},t)=>GOt(e,t*2),T6e=({values:e},t)=>YOt(e,t*2),o4t=(e,t)=>{switch(e.type.unit){case Rn.SECOND:return E6e(e,t);case Rn.MILLISECOND:return S6e(e,t);case Rn.MICROSECOND:return C6e(e,t);case Rn.NANOSECOND:return T6e(e,t)}},A6e=({values:e},t)=>e[t],D6e=({values:e},t)=>e[t],I6e=({values:e},t)=>e[t],k6e=({values:e},t)=>e[t],a4t=(e,t)=>{switch(e.type.unit){case Rn.SECOND:return A6e(e,t);case Rn.MILLISECOND:return D6e(e,t);case Rn.MICROSECOND:return I6e(e,t);case Rn.NANOSECOND:return k6e(e,t)}},u4t=({values:e,stride:t},n)=>Wne.decimal(e.subarray(t*n,t*(n+1))),l4t=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new mi([u])},c4t=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new YB(o.slice(i,s-i))},f4t=(e,t)=>new xre(e,t),d4t=(e,t)=>e.type.mode===zc.Dense?R6e(e,t):N6e(e,t),R6e=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Vc.visit(r,e.valueOffsets[t])},N6e=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Vc.visit(r,t)},h4t=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},p4t=(e,t)=>e.type.unit===Km.DAY_TIME?P6e(e,t):O6e(e,t),P6e=({values:e},t)=>e.subarray(2*t,2*(t+1)),O6e=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},F6e=({values:e},t)=>e[t],M6e=({values:e},t)=>e[t],$6e=({values:e},t)=>e[t],L6e=({values:e},t)=>e[t],m4t=(e,t)=>{switch(e.type.unit){case Rn.SECOND:return F6e(e,t);case Rn.MILLISECOND:return M6e(e,t);case Rn.MICROSECOND:return $6e(e,t);case Rn.NANOSECOND:return L6e(e,t)}},g4t=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new mi([s])};Nn.prototype.visitNull=Ln(QOt);Nn.prototype.visitBool=Ln(JOt);Nn.prototype.visitInt=Ln(r4t);Nn.prototype.visitInt8=Ln(Mb);Nn.prototype.visitInt16=Ln(Mb);Nn.prototype.visitInt32=Ln(Mb);Nn.prototype.visitInt64=Ln(_6e);Nn.prototype.visitUint8=Ln(Mb);Nn.prototype.visitUint16=Ln(Mb);Nn.prototype.visitUint32=Ln(Mb);Nn.prototype.visitUint64=Ln(_6e);Nn.prototype.visitFloat=Ln(i4t);Nn.prototype.visitFloat16=Ln(ZOt);Nn.prototype.visitFloat32=Ln(Mb);Nn.prototype.visitFloat64=Ln(Mb);Nn.prototype.visitUtf8=Ln(n4t);Nn.prototype.visitBinary=Ln(t4t);Nn.prototype.visitFixedSizeBinary=Ln(e4t);Nn.prototype.visitDate=Ln(s4t);Nn.prototype.visitDateDay=Ln(x6e);Nn.prototype.visitDateMillisecond=Ln(w6e);Nn.prototype.visitTimestamp=Ln(o4t);Nn.prototype.visitTimestampSecond=Ln(E6e);Nn.prototype.visitTimestampMillisecond=Ln(S6e);Nn.prototype.visitTimestampMicrosecond=Ln(C6e);Nn.prototype.visitTimestampNanosecond=Ln(T6e);Nn.prototype.visitTime=Ln(a4t);Nn.prototype.visitTimeSecond=Ln(A6e);Nn.prototype.visitTimeMillisecond=Ln(D6e);Nn.prototype.visitTimeMicrosecond=Ln(I6e);Nn.prototype.visitTimeNanosecond=Ln(k6e);Nn.prototype.visitDecimal=Ln(u4t);Nn.prototype.visitList=Ln(l4t);Nn.prototype.visitStruct=Ln(f4t);Nn.prototype.visitUnion=Ln(d4t);Nn.prototype.visitDenseUnion=Ln(R6e);Nn.prototype.visitSparseUnion=Ln(N6e);Nn.prototype.visitDictionary=Ln(h4t);Nn.prototype.visitInterval=Ln(p4t);Nn.prototype.visitIntervalDayTime=Ln(P6e);Nn.prototype.visitIntervalYearMonth=Ln(O6e);Nn.prototype.visitDuration=Ln(m4t);Nn.prototype.visitDurationSecond=Ln(F6e);Nn.prototype.visitDurationMillisecond=Ln(M6e);Nn.prototype.visitDurationMicrosecond=Ln($6e);Nn.prototype.visitDurationNanosecond=Ln(L6e);Nn.prototype.visitFixedSizeList=Ln(g4t);Nn.prototype.visitMap=Ln(c4t);const Vc=new Nn,Uh=Symbol.for("keys"),IS=Symbol.for("vals");class YB{constructor(t){return this[Uh]=new mi([t.children[0]]).memoize(),this[IS]=t.children[1],new Proxy(this,new v4t)}[Symbol.iterator](){return new y4t(this[Uh],this[IS])}get size(){return this[Uh].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Uh],n=this[IS],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Vc.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${i_(t)}: ${i_(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class y4t{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Vc.visit(this.vals,t)]})}}class v4t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Uh].toArray().map(String)}has(t,n){return t[Uh].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Uh].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Uh].indexOf(n);if(r!==-1){const i=Vc.visit(Reflect.get(t,IS),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Uh].indexOf(n);return i!==-1?(Ud.visit(Reflect.get(t,IS),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(YB.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Uh]:{writable:!0,enumerable:!1,configurable:!1,value:null},[IS]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let gve;function B6e(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(gve=s,s=o,o=gve),o>i&&(o=i),r?r(e,s,o):[s,o]}const yve=e=>e!==e;function tA(e){if(typeof e!=="object"||e===null)return yve(e)?yve:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?uOt(e,n):!1:e instanceof Map?x4t(e):Array.isArray(e)?b4t(e):e instanceof mi?w4t(e):_4t(e,!0)}function b4t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=tA(e[n]);return KB(t)}function x4t(e){let t=-1;const n=[];for(const r of e.values())n[++t]=tA(r);return KB(n)}function w4t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=tA(e.get(n));return KB(t)}function _4t(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=tA(e[n[i]]);return KB(r,n)}function KB(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return E4t(e,n);case Map:return vve(e,n,n.keys());case YB:case xre:case Object:case void 0:return vve(e,n,t||Object.keys(n))}return n instanceof mi?S4t(e,n):!1}}function E4t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function S4t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function vve(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function j6e(e,t,n,r){return(n&1<<r)!==0}function C4t(e,t,n,r){return(n&1<<r)>>r}function o5(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):U6e(new _re(n,e,t,null,j6e)).subarray(0,r)),i}return n}function U6e(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class _re{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function aK(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new _re(e,t,n-t,e,C4t))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return aK(e,t,i)+aK(e,r,n)+T4t(e,i>>3,r-i>>3)}function T4t(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=vH(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=vH(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=vH(s.getUint8(i)),i+=1;return r}function vH(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const A4t=-1;class zi{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return vr.isSparseUnion(t)?this.children.some(n=>n.nullable):vr.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(vr.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=A4t&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-aK(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof zi?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=em(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(vr.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===zc.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(vr.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===zc.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(o5(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new zi(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===ge.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(o5(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[J0.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[J0.TYPE])&&(o[J0.TYPE]=s.subarray(t,t+n)),(s=o[J0.OFFSET])&&(o[J0.OFFSET]=s.subarray(t,t+n+1))||(s=o[J0.DATA])&&(o[J0.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}zi.prototype.children=Object.freeze([]);class Ak extends br{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new zi(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Ca(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Ca(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Ca(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.data),s=Vi(t.nullBitmap),o=ND(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new zi(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.data),s=Vi(t.nullBitmap),o=ND(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new zi(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Ca(n.ArrayType,t.data),{["length"]:o=s.length/em(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Ca(n.ArrayType,t.data),{["length"]:o=s.length/em(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Ca(n.ArrayType,t.data),{["length"]:o=s.length/em(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Ca(n.ArrayType,t.data),{["length"]:o=s.length/em(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Ca(n.ArrayType,t.data),{["length"]:o=s.length/em(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Vi(t.nullBitmap),o=ND(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new zi(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Vi(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Ca(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(vr.isSparseUnion(n))return new zi(n,r,o,a,[void 0,void 0,void 0,s],i);const u=ND(t.valueOffsets);return new zi(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Ca(n.indices.ArrayType,t.data),{["dictionary"]:o=new mi([new Ak().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new zi(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Ca(n.ArrayType,t.data),{["length"]:o=s.length/em(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Vi(t.nullBitmap),s=Ca(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new Ak().visit({type:n.valueType})}=t,s=Vi(t.nullBitmap),{["length"]:o=i.length/em(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new zi(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new Ak().visit({type:n.childType})}=t,s=Vi(t.nullBitmap),o=ND(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new zi(n,r,a,u,[o,void 0,s],[i])}}const D4t=new Ak;function $u(e){return D4t.visit(e)}class bve{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function z6e(e){return e.reduce((t,n)=>t+n.nullCount,0)}function V6e(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function H6e(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function Ere(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function Sre(e,t){return e.getValid(t)}function kS(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return Ere(r,this._offsets,n,t)}}function q6e(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=Ere(s,this._offsets,r,n);return t=void 0,o}}function W6e(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):Ere(s,this._offsets,i,n);return t=void 0,o}}class Pn extends br{}function I4t(e,t){return t===null&&e.length>0?0:-1}function k4t(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new _re(n,e.offset+(t||0),e.length,n,j6e)){if(!i)return r;++r}return-1}function Jn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case ge.Union:break;case ge.Dictionary:break;default:return k4t(e,n)}const r=Vc.getVisitFn(e),i=tA(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function G6e(e,t,n){const r=Vc.getVisitFn(e),i=tA(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Pn.prototype.visitNull=I4t;Pn.prototype.visitBool=Jn;Pn.prototype.visitInt=Jn;Pn.prototype.visitInt8=Jn;Pn.prototype.visitInt16=Jn;Pn.prototype.visitInt32=Jn;Pn.prototype.visitInt64=Jn;Pn.prototype.visitUint8=Jn;Pn.prototype.visitUint16=Jn;Pn.prototype.visitUint32=Jn;Pn.prototype.visitUint64=Jn;Pn.prototype.visitFloat=Jn;Pn.prototype.visitFloat16=Jn;Pn.prototype.visitFloat32=Jn;Pn.prototype.visitFloat64=Jn;Pn.prototype.visitUtf8=Jn;Pn.prototype.visitBinary=Jn;Pn.prototype.visitFixedSizeBinary=Jn;Pn.prototype.visitDate=Jn;Pn.prototype.visitDateDay=Jn;Pn.prototype.visitDateMillisecond=Jn;Pn.prototype.visitTimestamp=Jn;Pn.prototype.visitTimestampSecond=Jn;Pn.prototype.visitTimestampMillisecond=Jn;Pn.prototype.visitTimestampMicrosecond=Jn;Pn.prototype.visitTimestampNanosecond=Jn;Pn.prototype.visitTime=Jn;Pn.prototype.visitTimeSecond=Jn;Pn.prototype.visitTimeMillisecond=Jn;Pn.prototype.visitTimeMicrosecond=Jn;Pn.prototype.visitTimeNanosecond=Jn;Pn.prototype.visitDecimal=Jn;Pn.prototype.visitList=Jn;Pn.prototype.visitStruct=Jn;Pn.prototype.visitUnion=Jn;Pn.prototype.visitDenseUnion=G6e;Pn.prototype.visitSparseUnion=G6e;Pn.prototype.visitDictionary=Jn;Pn.prototype.visitInterval=Jn;Pn.prototype.visitIntervalDayTime=Jn;Pn.prototype.visitIntervalYearMonth=Jn;Pn.prototype.visitDuration=Jn;Pn.prototype.visitDurationSecond=Jn;Pn.prototype.visitDurationMillisecond=Jn;Pn.prototype.visitDurationMicrosecond=Jn;Pn.prototype.visitDurationNanosecond=Jn;Pn.prototype.visitFixedSizeList=Jn;Pn.prototype.visitMap=Jn;const a5=new Pn;class On extends br{}function Bn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===ge.Timestamp||t instanceof Hl&&t.bitWidth!==64||t instanceof ay&&t.bitWidth!==64||t instanceof Bv&&t.precision!==uu.HALF))return new bve(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new bve(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new R4t(o)})}class R4t{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}On.prototype.visitNull=Bn;On.prototype.visitBool=Bn;On.prototype.visitInt=Bn;On.prototype.visitInt8=Bn;On.prototype.visitInt16=Bn;On.prototype.visitInt32=Bn;On.prototype.visitInt64=Bn;On.prototype.visitUint8=Bn;On.prototype.visitUint16=Bn;On.prototype.visitUint32=Bn;On.prototype.visitUint64=Bn;On.prototype.visitFloat=Bn;On.prototype.visitFloat16=Bn;On.prototype.visitFloat32=Bn;On.prototype.visitFloat64=Bn;On.prototype.visitUtf8=Bn;On.prototype.visitBinary=Bn;On.prototype.visitFixedSizeBinary=Bn;On.prototype.visitDate=Bn;On.prototype.visitDateDay=Bn;On.prototype.visitDateMillisecond=Bn;On.prototype.visitTimestamp=Bn;On.prototype.visitTimestampSecond=Bn;On.prototype.visitTimestampMillisecond=Bn;On.prototype.visitTimestampMicrosecond=Bn;On.prototype.visitTimestampNanosecond=Bn;On.prototype.visitTime=Bn;On.prototype.visitTimeSecond=Bn;On.prototype.visitTimeMillisecond=Bn;On.prototype.visitTimeMicrosecond=Bn;On.prototype.visitTimeNanosecond=Bn;On.prototype.visitDecimal=Bn;On.prototype.visitList=Bn;On.prototype.visitStruct=Bn;On.prototype.visitUnion=Bn;On.prototype.visitDenseUnion=Bn;On.prototype.visitSparseUnion=Bn;On.prototype.visitDictionary=Bn;On.prototype.visitInterval=Bn;On.prototype.visitIntervalDayTime=Bn;On.prototype.visitIntervalYearMonth=Bn;On.prototype.visitDuration=Bn;On.prototype.visitDurationSecond=Bn;On.prototype.visitDurationMillisecond=Bn;On.prototype.visitDurationMicrosecond=Bn;On.prototype.visitDurationNanosecond=Bn;On.prototype.visitFixedSizeList=Bn;On.prototype.visitMap=Bn;const Cre=new On,N4t=(e,t)=>e+t;class $b extends br{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Rn.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+Xm.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Xm.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const P4t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),O4t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),F4t=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Xm.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},M4t=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Xm.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},$4t=(e,t)=>e.type.mode===zc.Dense?Y6e(e,t):K6e(e,t),Y6e=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Xm.visit(t[s],r[i])},K6e=({children:e},t)=>4+Xm.visitMany(e,e.map(()=>t)).reduce(N4t,0);$b.prototype.visitUtf8=P4t;$b.prototype.visitBinary=O4t;$b.prototype.visitList=F4t;$b.prototype.visitFixedSizeList=M4t;$b.prototype.visitUnion=$4t;$b.prototype.visitDenseUnion=Y6e;$b.prototype.visitSparseUnion=K6e;const Xm=new $b;var X6e;const Q6e={},J6e={};class mi{constructor(t){var n,r,i;const s=t[0]instanceof mi?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof zi)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=Q6e[o.typeId],f=s[0];this.isValid=d=>Sre(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,J6e[o.typeId]),this._offsets=V6e(s);break}this.data=s,this.type=o,this.stride=em(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return z6e(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${ge[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return Cre.visit(this)}concat(...t){return new mi(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new mi(B6e(this,t,n,({data:r,_offsets:i},s,o)=>H6e(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case ge.Int:case ge.Float:case ge.Decimal:case ge.Time:case ge.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new mi(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return vr.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(vr.isDictionary(this.type)){const t=new u5(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new mi(n)}return new u5(this)}unmemoize(){if(vr.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new mi(n)}return this}}X6e=Symbol.toStringTag;mi[X6e]=(e=>{e.type=vr.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(ge).map(n=>ge[n]).filter(n=>typeof n=="number"&&n!==ge.NONE);for(const n of t){const r=Vc.getVisitFnByTypeId(n),i=Ud.getVisitFnByTypeId(n),s=a5.getVisitFnByTypeId(n),o=Xm.getVisitFnByTypeId(n);Q6e[n]={get:r,set:i,indexOf:s,byteLength:o},J6e[n]=Object.create(e,{isValid:{value:kS(Sre)},get:{value:kS(Vc.getVisitFnByTypeId(n))},set:{value:q6e(Ud.getVisitFnByTypeId(n))},indexOf:{value:W6e(a5.getVisitFnByTypeId(n))},getByteLength:{value:kS(Xm.getVisitFnByTypeId(n))}})}return"Vector"})(mi.prototype);class u5 extends mi{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new u5(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new mi(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function L4t(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${B4t(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function B4t(e){return typeof e!="bigint"?i_(e):`${i_(e)}n`}const bH=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,j4t=(e,t=0)=>e.length>=t?e.subarray(0,t):t5(new e.constructor(t),e,0);class XB{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?bH(r*1,this.BYTES_PER_ELEMENT):bH(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=bH(t*this.stride,this.BYTES_PER_ELEMENT);const n=j4t(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=t5(new this.ArrayType(t),this.buffer)}}XB.prototype.offset=0;class FN extends XB{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class Z6e extends FN{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class eFe extends FN{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let Zc=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=em(t),this._nulls=new Z6e,n&&n.length>0&&(this._isValid=L4t(n))}toVector(){return new mi([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),$u({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};Zc.prototype.length=1;Zc.prototype.stride=1;Zc.prototype.children=null;Zc.prototype.finished=!1;Zc.prototype.nullValues=null;Zc.prototype._isValid=()=>!0;class Dy extends Zc{constructor(t){super(t),this._values=new FN(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class QB extends Zc{constructor(t){super(t),this._pendingLength=0,this._offsets=new eFe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof YB?n[Uh].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class uK{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const xH=2,cm=4,fg=4,es=4,v1=new Int32Array(2),xve=new Float32Array(v1.buffer),wve=new Float64Array(v1.buffer),P4=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var lK;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(lK||(lK={}));let l5=class tFe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new tFe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return v1[0]=this.readInt32(t),xve[0]}readFloat64(t){return v1[P4?0:1]=this.readInt32(t),v1[P4?1:0]=this.readInt32(t+4),wve[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){xve[0]=n,this.writeInt32(t,v1[0])}writeFloat64(t,n){wve[0]=n,this.writeInt32(t,v1[P4?0:1]),this.writeInt32(t+4,v1[P4?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+cm+fg)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<fg;n++)t+=String.fromCharCode(this.readInt8(this.position_+cm+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=cm;const i=this.bytes_.subarray(t,t+r);return n===lK.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+cm}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=fg)throw new Error("FlatBuffers: file identifier must be length "+fg);for(let n=0;n<fg;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+cm+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},nFe=class rFe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=l5.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=rFe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=l5.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(cm,0),this.writeInt32(this.offset()-t+cm)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*xH;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=xH;l<s;l+=xH)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?es:0;if(n){const s=n;if(this.prep(this.minalign,cm+fg+i),s.length!=fg)throw new TypeError("FlatBuffers: file identifier must be length "+fg);for(let o=fg-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,cm+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(cm,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class ia{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new ia).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+es),(n||new ia).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return ia.startKeyValue(t),ia.addKey(t,n),ia.addValue(t,r),ia.endKeyValue(t)}}var NC;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(NC||(NC={}));var PC;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(PC||(PC={}));var c5;(function(e){e[e.DenseArray=0]="DenseArray"})(c5||(c5={}));class gf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new gf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+es),(n||new gf).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return gf.startInt(t),gf.addBitWidth(t,n),gf.addIsSigned(t,r),gf.endInt(t)}}class dg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new dg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+es),(n||new dg).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new gf).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):c5.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,c5.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class yw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new yw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+es),(n||new yw).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return yw.startBinary(t),yw.endBinary(t)}}class vw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new vw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+es),(n||new vw).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return vw.startBool(t),vw.endBool(t)}}var f5;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(f5||(f5={}));let yF=class S2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new S2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+es),(n||new S2).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):f5.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,f5.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return S2.startDate(t),S2.addUnit(t,n),S2.endDate(t)}},C2=class u1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new u1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+es),(n||new u1).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return u1.startDecimal(t),u1.addPrecision(t,n),u1.addScale(t,r),u1.addBitWidth(t,i),u1.endDecimal(t)}};var Uv;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Uv||(Uv={}));class fm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new fm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+es),(n||new fm).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Uv.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Uv.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return fm.startDuration(t),fm.addUnit(t,n),fm.endDuration(t)}}class dm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new dm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+es),(n||new dm).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return dm.startFixedSizeBinary(t),dm.addByteWidth(t,n),dm.endFixedSizeBinary(t)}}class hm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new hm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+es),(n||new hm).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return hm.startFixedSizeList(t),hm.addListSize(t,n),hm.endFixedSizeList(t)}}var d5;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(d5||(d5={}));class pm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new pm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+es),(n||new pm).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):d5.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,d5.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return pm.startFloatingPoint(t),pm.addPrecision(t,n),pm.endFloatingPoint(t)}}var h5;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(h5||(h5={}));class mm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new mm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+es),(n||new mm).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):h5.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,h5.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return mm.startInterval(t),mm.addUnit(t,n),mm.endInterval(t)}}class bw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new bw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+es),(n||new bw).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return bw.startList(t),bw.endList(t)}}let vF=class T2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new T2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+es),(n||new T2).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return T2.startMap(t),T2.addKeysSorted(t,n),T2.endMap(t)}};class xw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new xw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+es),(n||new xw).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return xw.startNull(t),xw.endNull(t)}}class ww{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new ww).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+es),(n||new ww).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return ww.startStruct_(t),ww.endStruct_(t)}}let II=class Bx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Bx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+es),(n||new Bx).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Uv.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Uv.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Bx.startTime(t),Bx.addUnit(t,n),Bx.addBitWidth(t,r),Bx.endTime(t)}},kI=class jx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new jx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+es),(n||new jx).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Uv.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Uv.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return jx.startTimestamp(t),jx.addUnit(t,n),jx.addTimezone(t,r),jx.endTimestamp(t)}};var p5;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(p5||(p5={}));let Ux=class zx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new zx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+es),(n||new zx).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):p5.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,p5.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return zx.startUnion(t),zx.addMode(t,n),zx.addTypeIds(t,r),zx.endUnion(t)}};class _w{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new _w).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+es),(n||new _w).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return _w.startUtf8(t),_w.endUtf8(t)}}var Ps;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Ps||(Ps={}));let md=class bF{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new bF).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+es),(n||new bF).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Ps.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new dg).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new bF).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new ia).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Ps.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Jp=class X0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new X0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+es),(n||new X0).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):PC.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new md).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new ia).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,PC.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return X0.startSchema(t),X0.addEndianness(t,n),X0.addFields(t,r),X0.addCustomMetadata(t,i),X0.addFeatures(t,s),X0.endSchema(t)}};class ff{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new ff).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+es),(n||new ff).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):NC.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Jp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new uK).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new uK).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ia).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,NC.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Mi{constructor(t=[],n,r,i=Il.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=fK(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Mi(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Mi(n,this.metadata)}assign(...t){const n=t[0]instanceof Mi?t[0]:Array.isArray(t[0])?new Mi(t[0]):new Mi(t),r=[...this.fields],i=O4(O4(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:O4(O4(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=fK(s,new Map);return new Mi([...r,...s],i,new Map([...this.dictionaries,...o]))}}Mi.prototype.fields=null;Mi.prototype.metadata=null;Mi.prototype.dictionaries=null;let Xi=class cK{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new cK(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],cK.new(n,r,i,s)}};Xi.prototype.type=null;Xi.prototype.name=null;Xi.prototype.nullable=null;Xi.prototype.metadata=null;function O4(e,t){return new Map([...e||new Map,...t||new Map])}function fK(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(vr.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&fK(s.children,t)}return t}var U4t=nFe,z4t=l5;class dK{static decode(t){t=new z4t(Vi(t));const n=ff.getRootAsFooter(t),r=Mi.decode(n.schema(),new Map,n.version());return new V4t(r,n)}static encode(t){const n=new U4t,r=Mi.encode(n,t.schema);ff.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())zv.encode(n,o);const i=n.endVector();ff.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())zv.encode(n,o);const s=n.endVector();return ff.startFooter(n),ff.addSchema(n,r),ff.addVersion(n,Il.V5),ff.addRecordBatches(n,i),ff.addDictionaries(n,s),ff.finishFooterBuffer(n,ff.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Il.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class V4t extends dK{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return zv.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return zv.decode(n)}return null}}class zv{static decode(t){return new zv(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return uK.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=pp(r),this.bodyLength=pp(n)}}const F4=Object.freeze({done:!0,value:void 0});class iFe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class H4t extends iFe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return ug(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(F4);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return pve.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return pve.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return ug(this,void 0,void 0,function*(){return yield this.abort(t),F4})}return(t){return ug(this,void 0,void 0,function*(){return yield this.close(),F4})}read(t){return ug(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return ug(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(F4)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class wH extends H4t{write(t){if((t=Vi(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?iK(this.toUint8Array(!0)):this.toUint8Array(!1).then(iK)}toUint8Array(t=!1){return t?Gm(this._values)[0]:ug(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=lk(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return Gm(o,a)[0]})}}class sFe extends QB{constructor(t){super(t),this._values=new XB(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Vi(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class q4t extends Zc{constructor(t){super(t),this._values=new Z6e}setValue(t,n){this._values.set(t,+n)}}class JB extends Dy{}JB.prototype._setValue=c6e;class oFe extends JB{}oFe.prototype._setValue=ire;class aFe extends JB{}aFe.prototype._setValue=sre;class uFe extends Dy{}uFe.prototype._setValue=h6e;class W4t extends Zc{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new jv(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=m5({type:this.type.indices,nullValues:n}),this.dictionary=m5({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class lFe extends Dy{}lFe.prototype._setValue=l6e;class G4t extends Zc{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new RC(this.type.listSize,new Xi(n,t.type,!0)),r}}class ZB extends Dy{setValue(t,n){this._values.set(t,n)}}class Y4t extends ZB{setValue(t,n){super.setValue(t,o6e(n))}}class K4t extends ZB{}class X4t extends ZB{}class e9 extends Dy{}e9.prototype._setValue=g6e;class cFe extends e9{}cFe.prototype._setValue=pre;class fFe extends e9{}fFe.prototype._setValue=mre;class nA extends Dy{}nA.prototype._setValue=y6e;class dFe extends nA{}dFe.prototype._setValue=gre;class hFe extends nA{}hFe.prototype._setValue=yre;class pFe extends nA{}pFe.prototype._setValue=vre;class mFe extends nA{}mFe.prototype._setValue=bre;class Iy extends Dy{setValue(t,n){this._values.set(t,n)}}class Q4t extends Iy{}class J4t extends Iy{}class Z4t extends Iy{}class e6t extends Iy{}class t6t extends Iy{}class n6t extends Iy{}class r6t extends Iy{}class i6t extends Iy{}class s6t extends QB{constructor(t){super(t),this._offsets=new eFe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new kC(new Xi(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class o6t extends QB{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new r3(new Xi(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class a6t extends Zc{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class u6t extends Zc{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new zu([...this.type.children,new Xi(n,t.type,!0)]),r}}class rA extends Dy{}rA.prototype._setValue=f6e;class gFe extends rA{}gFe.prototype._setValue=ore;class yFe extends rA{}yFe.prototype._setValue=are;class vFe extends rA{}vFe.prototype._setValue=ure;class bFe extends rA{}bFe.prototype._setValue=lre;class iA extends Dy{}iA.prototype._setValue=d6e;class xFe extends iA{}xFe.prototype._setValue=cre;class wFe extends iA{}wFe.prototype._setValue=fre;class _Fe extends iA{}_Fe.prototype._setValue=dre;class EFe extends iA{}EFe.prototype._setValue=hre;class Tre extends Zc{constructor(t){super(t),this._typeIds=new FN(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Xi(n,t.type)];return this.type=new n3(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class l6t extends Tre{}class c6t extends Tre{constructor(t){super(t),this._offsets=new FN(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class SFe extends QB{constructor(t){super(t),this._values=new XB(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Vne(n))}_flushPending(t,n){}}SFe.prototype._flushPending=sFe.prototype._flushPending;class f6t extends br{visitNull(){return a6t}visitBool(){return q4t}visitInt(){return Iy}visitInt8(){return Q4t}visitInt16(){return J4t}visitInt32(){return Z4t}visitInt64(){return e6t}visitUint8(){return t6t}visitUint16(){return n6t}visitUint32(){return r6t}visitUint64(){return i6t}visitFloat(){return ZB}visitFloat16(){return Y4t}visitFloat32(){return K4t}visitFloat64(){return X4t}visitUtf8(){return SFe}visitBinary(){return sFe}visitFixedSizeBinary(){return lFe}visitDate(){return JB}visitDateDay(){return oFe}visitDateMillisecond(){return aFe}visitTimestamp(){return rA}visitTimestampSecond(){return gFe}visitTimestampMillisecond(){return yFe}visitTimestampMicrosecond(){return vFe}visitTimestampNanosecond(){return bFe}visitTime(){return iA}visitTimeSecond(){return xFe}visitTimeMillisecond(){return wFe}visitTimeMicrosecond(){return _Fe}visitTimeNanosecond(){return EFe}visitDecimal(){return uFe}visitList(){return s6t}visitStruct(){return u6t}visitUnion(){return Tre}visitDenseUnion(){return c6t}visitSparseUnion(){return l6t}visitDictionary(){return W4t}visitInterval(){return e9}visitIntervalDayTime(){return cFe}visitIntervalYearMonth(){return fFe}visitDuration(){return nA}visitDurationSecond(){return dFe}visitDurationMillisecond(){return hFe}visitDurationMicrosecond(){return pFe}visistDurationNanosecond(){return mFe}visitFixedSizeList(){return G4t}visitMap(){return o6t}}const d6t=new f6t;class Fn extends br{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function Kl(e,t){return t instanceof e.constructor}function MN(e,t){return e===t||Kl(e,t)}function ky(e,t){return e===t||Kl(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function t9(e,t){return e===t||Kl(e,t)&&e.precision===t.precision}function h6t(e,t){return e===t||Kl(e,t)&&e.byteWidth===t.byteWidth}function Are(e,t){return e===t||Kl(e,t)&&e.unit===t.unit}function $N(e,t){return e===t||Kl(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function LN(e,t){return e===t||Kl(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function p6t(e,t){return e===t||Kl(e,t)&&e.children.length===t.children.length&&Vv.compareManyFields(e.children,t.children)}function m6t(e,t){return e===t||Kl(e,t)&&e.children.length===t.children.length&&Vv.compareManyFields(e.children,t.children)}function Dre(e,t){return e===t||Kl(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Vv.compareManyFields(e.children,t.children)}function g6t(e,t){return e===t||Kl(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Vv.visit(e.indices,t.indices)&&Vv.visit(e.dictionary,t.dictionary)}function Ire(e,t){return e===t||Kl(e,t)&&e.unit===t.unit}function BN(e,t){return e===t||Kl(e,t)&&e.unit===t.unit}function y6t(e,t){return e===t||Kl(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Vv.compareManyFields(e.children,t.children)}function v6t(e,t){return e===t||Kl(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Vv.compareManyFields(e.children,t.children)}Fn.prototype.visitNull=MN;Fn.prototype.visitBool=MN;Fn.prototype.visitInt=ky;Fn.prototype.visitInt8=ky;Fn.prototype.visitInt16=ky;Fn.prototype.visitInt32=ky;Fn.prototype.visitInt64=ky;Fn.prototype.visitUint8=ky;Fn.prototype.visitUint16=ky;Fn.prototype.visitUint32=ky;Fn.prototype.visitUint64=ky;Fn.prototype.visitFloat=t9;Fn.prototype.visitFloat16=t9;Fn.prototype.visitFloat32=t9;Fn.prototype.visitFloat64=t9;Fn.prototype.visitUtf8=MN;Fn.prototype.visitBinary=MN;Fn.prototype.visitFixedSizeBinary=h6t;Fn.prototype.visitDate=Are;Fn.prototype.visitDateDay=Are;Fn.prototype.visitDateMillisecond=Are;Fn.prototype.visitTimestamp=$N;Fn.prototype.visitTimestampSecond=$N;Fn.prototype.visitTimestampMillisecond=$N;Fn.prototype.visitTimestampMicrosecond=$N;Fn.prototype.visitTimestampNanosecond=$N;Fn.prototype.visitTime=LN;Fn.prototype.visitTimeSecond=LN;Fn.prototype.visitTimeMillisecond=LN;Fn.prototype.visitTimeMicrosecond=LN;Fn.prototype.visitTimeNanosecond=LN;Fn.prototype.visitDecimal=MN;Fn.prototype.visitList=p6t;Fn.prototype.visitStruct=m6t;Fn.prototype.visitUnion=Dre;Fn.prototype.visitDenseUnion=Dre;Fn.prototype.visitSparseUnion=Dre;Fn.prototype.visitDictionary=g6t;Fn.prototype.visitInterval=Ire;Fn.prototype.visitIntervalDayTime=Ire;Fn.prototype.visitIntervalYearMonth=Ire;Fn.prototype.visitDuration=BN;Fn.prototype.visitDurationSecond=BN;Fn.prototype.visitDurationMillisecond=BN;Fn.prototype.visitDurationMicrosecond=BN;Fn.prototype.visitDurationNanosecond=BN;Fn.prototype.visitFixedSizeList=y6t;Fn.prototype.visitMap=v6t;const Vv=new Fn;function hK(e,t){return Vv.compareSchemas(e,t)}function m5(e){const t=e.type,n=new(d6t.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(m5(Object.assign(Object.assign({},l),{type:u})))}}return n}function _H(e,t){return b6t(e,t.map(n=>n.data.concat()))}function b6t(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=x6t(n,o,c,t,i),o>0&&(r[s++]=$u({type:new zu(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new yf(e,f))]}function x6t(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:$u({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var CFe;class yc{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Mi([]),this._offsets=[0],this;let i,s;t[0]instanceof Mi&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof yf)return[u];if(u instanceof yc)return u.batches;if(u instanceof zi){if(u.type instanceof zu)return[new yf(new Mi(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new mi([u[h]])),f=new Mi(l.map((h,p)=>new Xi(String(h),c[p].type))),[,d]=_H(f,c);return d.length===0?[new yf(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Mi([]),!(i instanceof Mi))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof yf))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!hK(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??V6e(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=z6e(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?Cre.visit(new mi(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new yc(n,r.map(i=>new yf(n,i)))}slice(t,n){const r=this.schema;[t,n]=B6e({length:this.numRows},t,n);const i=H6e(this.data,this._offsets,t,n);return new yc(r,i.map(s=>new yf(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=$u({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new mi(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new mi([$u({type:new oy,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=_H(r,a)}return new yc(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new yc(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new yc(..._H(s,o))}}CFe=Symbol.toStringTag;yc[CFe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=kS(Sre),e.get=kS(Vc.getVisitFn(ge.Struct)),e.set=q6e(Ud.getVisitFn(ge.Struct)),e.indexOf=W6e(a5.getVisitFn(ge.Struct)),e.getByteLength=kS(Xm.getVisitFn(ge.Struct)),"Table"))(yc.prototype);var TFe;let yf=class RI{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Mi))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=$u({nullCount:0,type:new zu(this.schema.fields),children:this.schema.fields.map(n=>$u({type:n.type,nullCount:0}))})]=t,!(this.data instanceof zi))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=_ve(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Xi.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new Mi(r),a=$u({type:new zu(r),length:s,children:i,nullCount:0});[this.schema,this.data]=_ve(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=AFe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Vc.visit(this.data,t)}set(t,n){return Ud.visit(this.data,t,n)}indexOf(t,n){return a5.visit(this.data,t,n)}getByteLength(t){return Xm.visit(this.data,t)}[Symbol.iterator](){return Cre.visit(new mi([this.data]))}toArray(){return[...this]}concat(...t){return new yc(this.schema,[this,...t])}slice(t,n){const[r]=new mi([this.data]).slice(t,n).data;return new RI(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new mi([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new mi([$u({type:new oy,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Mi(s,new Map(this.schema.metadata)),i=$u({type:new zu(s),children:o})}return new RI(r,i)}select(t){const n=this.schema.select(t),r=new zu(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new RI(n,$u({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=$u({type:new zu(n.fields),length:this.numRows,children:r});return new RI(n,i)}};TFe=Symbol.toStringTag;yf[TFe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(yf.prototype);function _ve(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:$u({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),$u({type:new zu(i),length:n,children:s})]}function AFe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])AFe(a.children,l==null?void 0:l.children,n);if(vr.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class w6t extends yf{constructor(t){const n=t.fields.map(i=>$u({type:i.type})),r=$u({type:new zu(t.fields),nullCount:0,children:n});super(t,r)}}var g5;(function(e){e[e.BUFFER=0]="BUFFER"})(g5||(g5={}));var y5;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(y5||(y5={}));class b1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new b1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+es),(n||new b1).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):y5.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):g5.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,y5.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,g5.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return b1.startBodyCompression(t),b1.addCodec(t,n),b1.addMethod(t,r),b1.endBodyCompression(t)}}let DFe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},IFe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},Z0=class pK{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new pK).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+es),(n||new pK).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new IFe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new DFe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new b1).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},A2=class mK{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new mK).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+es),(n||new mK).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Z0).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var v5;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(v5||(v5={}));let t1=class qp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new qp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+es),(n||new qp).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):NC.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):v5.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ia).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,NC.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,v5.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return qp.startMessage(t),qp.addVersion(t,n),qp.addHeaderType(t,r),qp.addHeader(t,i),qp.addBodyLength(t,s),qp.addCustomMetadata(t,o),qp.endMessage(t)}};class _6t extends br{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return xw.startNull(n),xw.endNull(n)}visitInt(t,n){return gf.startInt(n),gf.addBitWidth(n,t.bitWidth),gf.addIsSigned(n,t.isSigned),gf.endInt(n)}visitFloat(t,n){return pm.startFloatingPoint(n),pm.addPrecision(n,t.precision),pm.endFloatingPoint(n)}visitBinary(t,n){return yw.startBinary(n),yw.endBinary(n)}visitBool(t,n){return vw.startBool(n),vw.endBool(n)}visitUtf8(t,n){return _w.startUtf8(n),_w.endUtf8(n)}visitDecimal(t,n){return C2.startDecimal(n),C2.addScale(n,t.scale),C2.addPrecision(n,t.precision),C2.addBitWidth(n,t.bitWidth),C2.endDecimal(n)}visitDate(t,n){return yF.startDate(n),yF.addUnit(n,t.unit),yF.endDate(n)}visitTime(t,n){return II.startTime(n),II.addUnit(n,t.unit),II.addBitWidth(n,t.bitWidth),II.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return kI.startTimestamp(n),kI.addUnit(n,t.unit),r!==void 0&&kI.addTimezone(n,r),kI.endTimestamp(n)}visitInterval(t,n){return mm.startInterval(n),mm.addUnit(n,t.unit),mm.endInterval(n)}visitDuration(t,n){return fm.startDuration(n),fm.addUnit(n,t.unit),fm.endDuration(n)}visitList(t,n){return bw.startList(n),bw.endList(n)}visitStruct(t,n){return ww.startStruct_(n),ww.endStruct_(n)}visitUnion(t,n){Ux.startTypeIdsVector(n,t.typeIds.length);const r=Ux.createTypeIdsVector(n,t.typeIds);return Ux.startUnion(n),Ux.addMode(n,t.mode),Ux.addTypeIds(n,r),Ux.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return dg.startDictionaryEncoding(n),dg.addId(n,BigInt(t.id)),dg.addIsOrdered(n,t.isOrdered),r!==void 0&&dg.addIndexType(n,r),dg.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return dm.startFixedSizeBinary(n),dm.addByteWidth(n,t.byteWidth),dm.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return hm.startFixedSizeList(n),hm.addListSize(n,t.listSize),hm.endFixedSizeList(n)}visitMap(t,n){return vF.startMap(n),vF.addKeysSorted(n,t.keysSorted),vF.endMap(n)}}const EH=new _6t;function E6t(e,t=new Map){return new Mi(C6t(e,t),xF(e.metadata),t)}function kFe(e){return new Vf(e.count,RFe(e.columns),NFe(e.columns))}function S6t(e){return new Qm(kFe(e.data),e.id,e.isDelta)}function C6t(e,t){return(e.fields||[]).filter(Boolean).map(n=>Xi.fromJSON(n,t))}function Eve(e,t){return(e.children||[]).filter(Boolean).map(n=>Xi.fromJSON(n,t))}function RFe(e){return(e||[]).reduce((t,n)=>[...t,new Hv(n.count,T6t(n.VALIDITY)),...RFe(n.children)],[])}function NFe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new xm(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new xm(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new xm(t.length,i.OFFSET.length)),i.DATA&&t.push(new xm(t.length,i.DATA.length)),t=NFe(i.children,t)}return t}function T6t(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function A6t(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Cve(e,Eve(e,t)),i=new Xi(e.name,o,e.nullable,xF(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?Sve(r):new Lv,a=new jv(t.get(n),r,n,s.isOrdered),i=new Xi(e.name,a,e.nullable,xF(e.metadata))):(r=(r=s.indexType)?Sve(r):new Lv,t.set(n,o=Cve(e,Eve(e,t))),a=new jv(o,r,n,s.isOrdered),i=new Xi(e.name,a,e.nullable,xF(e.metadata))),i||null}function xF(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Sve(e){return new Hl(e.isSigned,e.bitWidth)}function Cve(e,t){const n=e.type.name;switch(n){case"NONE":return new oy;case"null":return new oy;case"binary":return new e3;case"utf8":return new AC;case"bool":return new t3;case"list":return new kC((t||[])[0]);case"struct":return new zu(t||[]);case"struct_":return new zu(t||[])}switch(n){case"int":{const r=e.type;return new Hl(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new Bv(uu[r.precision])}case"decimal":{const r=e.type;return new n5(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new DC(Ym[r.unit])}case"time":{const r=e.type;return new ay(Rn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new r5(Rn[r.unit],r.timezone)}case"interval":{const r=e.type;return new IC(Km[r.unit])}case"duration":{const r=e.type;return new i5(Rn[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new n3(zc[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new s5(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new RC(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new r3((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var D6t=nFe,I6t=l5;class gm{static fromJSON(t,n){const r=new gm(0,Il.V5,n);return r._createHeader=k6t(t,n),r}static decode(t){t=new I6t(Vi(t));const n=t1.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new gm(r,i,s);return o._createHeader=R6t(n,s),o}static encode(t){const n=new D6t;let r=-1;return t.isSchema()?r=Mi.encode(n,t.header()):t.isRecordBatch()?r=Vf.encode(n,t.header()):t.isDictionaryBatch()&&(r=Qm.encode(n,t.header())),t1.startMessage(n),t1.addVersion(n,Il.V5),t1.addHeader(n,r),t1.addHeaderType(n,t.headerType),t1.addBodyLength(n,BigInt(t.bodyLength)),t1.finishMessageBuffer(n,t1.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Mi)return new gm(0,Il.V5,Da.Schema,t);if(t instanceof Vf)return new gm(n,Il.V5,Da.RecordBatch,t);if(t instanceof Qm)return new gm(n,Il.V5,Da.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Da.Schema}isRecordBatch(){return this.headerType===Da.RecordBatch}isDictionaryBatch(){return this.headerType===Da.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=pp(t)}}class Vf{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=pp(t)}}class Qm{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=pp(n)}}class xm{constructor(t,n){this.offset=pp(t),this.length=pp(n)}}class Hv{constructor(t,n){this.length=pp(t),this.nullCount=pp(n)}}function k6t(e,t){return()=>{switch(t){case Da.Schema:return Mi.fromJSON(e);case Da.RecordBatch:return Vf.fromJSON(e);case Da.DictionaryBatch:return Qm.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Da[t]}, type: ${t} }`)}}function R6t(e,t){return()=>{switch(t){case Da.Schema:return Mi.decode(e.header(new Jp),new Map,e.version());case Da.RecordBatch:return Vf.decode(e.header(new Z0),e.version());case Da.DictionaryBatch:return Qm.decode(e.header(new A2),e.version())}throw new Error(`Unrecognized Message type: { name: ${Da[t]}, type: ${t} }`)}}Xi.encode=z6t;Xi.decode=j6t;Xi.fromJSON=A6t;Mi.encode=U6t;Mi.decode=N6t;Mi.fromJSON=E6t;Vf.encode=V6t;Vf.decode=P6t;Vf.fromJSON=kFe;Qm.encode=H6t;Qm.decode=O6t;Qm.fromJSON=S6t;Hv.encode=q6t;Hv.decode=M6t;xm.encode=W6t;xm.decode=F6t;function N6t(e,t=new Map,n=Il.V5){const r=B6t(e,t);return new Mi(r,wF(e),t,n)}function P6t(e,t=Il.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Vf(e.length(),$6t(e),L6t(e,t))}function O6t(e,t=Il.V5){return new Qm(Vf.decode(e.data(),t),e.id(),e.isDelta())}function F6t(e){return new xm(e.offset(),e.length())}function M6t(e){return new Hv(e.length(),e.nullCount())}function $6t(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=Hv.decode(n));return t}function L6t(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Il.V4&&(r.bb_pos+=8*(i+1)),n[++s]=xm.decode(r));return n}function B6t(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Xi.decode(r,t));return n}function Tve(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Xi.decode(r,t));return n}function j6t(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Dve(e,Tve(e,t)),r=new Xi(e.name(),i,e.nullable(),wF(e))):t.has(n=pp(a.id()))?(s=(s=a.indexType())?Ave(s):new Lv,o=new jv(t.get(n),s,n,a.isOrdered()),r=new Xi(e.name(),o,e.nullable(),wF(e))):(s=(s=a.indexType())?Ave(s):new Lv,t.set(n,i=Dve(e,Tve(e,t))),o=new jv(i,s,n,a.isOrdered()),r=new Xi(e.name(),o,e.nullable(),wF(e))),r||null}function wF(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function Ave(e){return new Hl(e.isSigned(),e.bitWidth())}function Dve(e,t){const n=e.typeType();switch(n){case Ps.NONE:return new oy;case Ps.Null:return new oy;case Ps.Binary:return new e3;case Ps.Utf8:return new AC;case Ps.Bool:return new t3;case Ps.List:return new kC((t||[])[0]);case Ps.Struct_:return new zu(t||[])}switch(n){case Ps.Int:{const r=e.type(new gf);return new Hl(r.isSigned(),r.bitWidth())}case Ps.FloatingPoint:{const r=e.type(new pm);return new Bv(r.precision())}case Ps.Decimal:{const r=e.type(new C2);return new n5(r.scale(),r.precision(),r.bitWidth())}case Ps.Date:{const r=e.type(new yF);return new DC(r.unit())}case Ps.Time:{const r=e.type(new II);return new ay(r.unit(),r.bitWidth())}case Ps.Timestamp:{const r=e.type(new kI);return new r5(r.unit(),r.timezone())}case Ps.Interval:{const r=e.type(new mm);return new IC(r.unit())}case Ps.Duration:{const r=e.type(new fm);return new i5(r.unit())}case Ps.Union:{const r=e.type(new Ux);return new n3(r.mode(),r.typeIdsArray()||[],t||[])}case Ps.FixedSizeBinary:{const r=e.type(new dm);return new s5(r.byteWidth())}case Ps.FixedSizeList:{const r=e.type(new hm);return new RC(r.listSize(),(t||[])[0])}case Ps.Map:{const r=e.type(new vF);return new r3((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Ps[n]}" (${n})`)}function U6t(e,t){const n=t.fields.map(s=>Xi.encode(e,s));Jp.startFieldsVector(e,n.length);const r=Jp.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Jp.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return ia.startKeyValue(e),ia.addKey(e,a),ia.addValue(e,u),ia.endKeyValue(e)})):-1;return Jp.startSchema(e),Jp.addFields(e,r),Jp.addEndianness(e,G6t?PC.Little:PC.Big),i!==-1&&Jp.addCustomMetadata(e,i),Jp.endSchema(e)}function z6t(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;vr.isDictionary(s)?(o=s.dictionary.typeId,i=EH.visit(s,e),r=EH.visit(s.dictionary,e)):r=EH.visit(s,e);const a=(s.children||[]).map(c=>Xi.encode(e,c)),u=md.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?md.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return ia.startKeyValue(e),ia.addKey(e,d),ia.addValue(e,h),ia.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),md.startField(e),md.addType(e,r),md.addTypeType(e,o),md.addChildren(e,u),md.addNullable(e,!!t.nullable),n!==-1&&md.addName(e,n),i!==-1&&md.addDictionary(e,i),l!==-1&&md.addCustomMetadata(e,l),md.endField(e)}function V6t(e,t){const n=t.nodes||[],r=t.buffers||[];Z0.startNodesVector(e,n.length);for(const o of n.slice().reverse())Hv.encode(e,o);const i=e.endVector();Z0.startBuffersVector(e,r.length);for(const o of r.slice().reverse())xm.encode(e,o);const s=e.endVector();return Z0.startRecordBatch(e),Z0.addLength(e,BigInt(t.length)),Z0.addNodes(e,i),Z0.addBuffers(e,s),Z0.endRecordBatch(e)}function H6t(e,t){const n=Vf.encode(e,t.data);return A2.startDictionaryBatch(e),A2.addId(e,BigInt(t.id)),A2.addIsDelta(e,t.isDelta),A2.addData(e,n),A2.endDictionaryBatch(e)}function q6t(e,t){return IFe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function W6t(e,t){return DFe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const G6t=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),gK="ARROW1",kre=new Uint8Array(gK.length);for(let e=0;e<gK.length;e+=1)kre[e]=gK.codePointAt(e);kre.length;class Do extends br{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof yf?s.data.children:s.data),r=new Do;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof mi)return this.visitMany(t.data),this;const{type:n}=t;if(!vr.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(vr.isUnion(n))this.nodes.push(new Hv(r,0));else{const{nullCount:i}=t;vr.isNull(n)||rp.call(this,i<=0?new Uint8Array(0):o5(t.offset,r,t.nullBitmap)),this.nodes.push(new Hv(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function rp(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new xm(this._byteLength,t)),this._byteLength+=t,this}function Y6t(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(rp.call(this,i),n.mode===zc.Sparse)return yK.call(this,e);if(n.mode===zc.Dense){if(e.offset<=0)return rp.call(this,s),yK.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);rp.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function K6t(e){let t;return e.nullCount>=e.length?rp.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?rp.call(this,o5(e.offset,e.length,t)):rp.call(this,U6e(e.values))}function Ry(e){return rp.call(this,e.values.subarray(0,e.length*e.stride))}function PFe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return rp.call(this,F4e(-i,t+1,r)),rp.call(this,n.subarray(i,i+o)),this}function Rre(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return rp.call(this,F4e(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function yK(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Do.prototype.visitBool=K6t;Do.prototype.visitInt=Ry;Do.prototype.visitFloat=Ry;Do.prototype.visitUtf8=PFe;Do.prototype.visitBinary=PFe;Do.prototype.visitFixedSizeBinary=Ry;Do.prototype.visitDate=Ry;Do.prototype.visitTimestamp=Ry;Do.prototype.visitTime=Ry;Do.prototype.visitDecimal=Ry;Do.prototype.visitList=Rre;Do.prototype.visitStruct=yK;Do.prototype.visitUnion=Y6t;Do.prototype.visitInterval=Ry;Do.prototype.visitDuration=Ry;Do.prototype.visitFixedSizeList=Rre;Do.prototype.visitMap=Rre;class OFe extends iFe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new wH,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Fb(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return WB(t)?t.then(n=>this.writeAll(n)):GB(t)?Fre(this,t):Ore(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof wH?this._sink=t:(this._sink=new wH,t&&tOt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&nOt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!hK(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof yc&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof yf&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!hK(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof yf?t instanceof w6t||this._writeRecordBatch(t):t instanceof yc?this.writeAll(t.batches):Hne(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=gm.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Da.RecordBatch?this._recordBatchBlocks.push(new zv(a,t.bodyLength,this._position)):t.headerType===Da.DictionaryBatch&&this._dictionaryBlocks.push(new zv(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Vi(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(gm.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(kre)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=Do.assemble(t),o=new Vf(t.numRows,r,i),a=gm.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=Do.assemble(new mi([t])),u=new Vf(t.length,s,o),l=new Qm(u,n,r),c=gm.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class Nre extends OFe{static writeAll(t,n){const r=new Nre(n);return WB(t)?t.then(i=>r.writeAll(i)):GB(t)?Fre(r,t):Ore(r,t)}}class Pre extends OFe{static writeAll(t){const n=new Pre;return WB(t)?t.then(r=>n.writeAll(r)):GB(t)?Fre(n,t):Ore(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=dK.encode(new dK(t,Il.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function Ore(e,t){let n=t;t instanceof yc&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function Fre(e,t){var n,r,i,s,o,a,u;return ug(this,void 0,void 0,function*(){try{for(n=!0,r=lk(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function X6t(e,t="stream"){return(t==="stream"?Nre:Pre).writeAll(e).toUint8Array(!0)}function Mre(e,t=1){return(e*t+63&-64||64)/t}function qv(e,t,n=e.BYTES_PER_ELEMENT){return new e(Mre(t,n))}function $re(e){return e instanceof zi?e:new zi(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function Q6t(e){return new mi([$re(e)])}const Lre=new TextEncoder;function J6t(e,t,n){const r=Lre.encode(n);return e.set(r,t),r.length}function Z6t(e,t,n){return Lre.encodeInto(n,e.subarray(t)).written}const eFt=Lre.encodeInto?Z6t:J6t;function Ive(e,t){const n=qv(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function tFt(e,t){const n=qv(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function nFt(e,t){const n=qv(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function rFt(e,t){const n=qv(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function iFt(e){const t=m5({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function sFt(e,t,n){const r=qv(Int32Array,t+1),i=qv(Uint8Array,3*n);let s=0;return{set(o,a){s+=eFt(i,s,o),r[a+1]=s},data:()=>{const o=Mre(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function oFt(e,t){const n=[],r=qv(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:aFt(e.dictionary,n,o)})}}function aFt(e,t,n){const r=sFt(e,t.length,n);return t.forEach(r.set),Q6t(r.data())}function uFt(e,t){const n=qv(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function lFt(e,t,n=!0){let r;switch(e.typeId){case ge.Int:r=e.bitWidth<64?Ive:null;break;case ge.Float:r=e.precision>0?Ive:null;break;case ge.Dictionary:r=e.dictionary.typeId===ge.Utf8&&e.indices.typeId===ge.Int&&e.indices.bitWidth<64?oFt:null;break;case ge.Bool:r=tFt;break;case ge.Date:r=e.unit?rFt:nFt;break}return r==null?iFt(e):n?uFt(r(e,t),t):r(e,t)}function cFt(e,t){const n=e.length,r=Mre(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),$re({type:t,length:n,buffers:[null,i]})}function FFe(e,t,n,r,i=!0){const s=lFt(r,e,i);return t(n,s.set),$re(s.data())}function Bre(e){if(e instanceof vr||e==null)return e;switch(e){case ge.Binary:return new e3;case ge.Bool:return new t3;case ge.DateDay:return new yOt;case ge.DateMillisecond:case ge.Date:return new vOt;case ge.Dictionary:return new jv(new AC,new Lv);case ge.Float16:return new r6e;case ge.Float32:return new ere;case ge.Float64:case ge.Float:return new tre;case ge.Int8:return new Gne;case ge.Int16:return new Yne;case ge.Int32:case ge.Int:return new Lv;case ge.Int64:return new Kne;case ge.IntervalDayTime:return new EOt;case ge.Interval:case ge.IntervalYearMonth:return new SOt;case ge.Null:return new oy;case ge.TimeMicrosecond:return new wOt;case ge.TimeMillisecond:case ge.Time:return new xOt;case ge.TimeNanosecond:return new _Ot;case ge.TimeSecond:return new bOt;case ge.Uint8:return new Xne;case ge.Uint16:return new Qne;case ge.Uint32:return new Jne;case ge.Uint64:return new Zne;case ge.Utf8:return new AC;default:pr(`Unsupported type code: ${Wm(e)}. Use a data type constructor instead?`)}}function fFt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function MFe(e,t){const n=vK();return e(t,n.add),n}function vK(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(sy(t))++e.dates,fFt(t)&&++e.utcdays;else if(gw(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=vK());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=vK())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return Bre(dFt(e))}};return e}function dFt(e){const t=e.count-e.nulls;if(t===0)return ge.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?ge.Float64:n<128?ge.Int8:n<32768?ge.Int16:ge.Int32:n>=2**32?ge.Float64:n<256?ge.Uint8:n<65536?ge.Uint16:ge.Uint32}else{if(e.nums===t)return ge.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?ge.Int64:pr(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?ge.Uint64:pr(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return ge.Bool;if(e.utcdays===t)return ge.DateDay;if(e.dates===t)return ge.DateMillisecond;if(e.arrays===t){const n=Xi.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new RC(e.minlen,n):new kC(n)}else if(e.structs===t){const n=e.struct_prof;return new zu(Object.keys(n).map(r=>Xi.new(r,n[r].type(),!0)))}else{if(e.strings>0)return ge.Dictionary;pr("Type inference failure")}}}}function hFt(e,t,n,r,i,s=!0){if(i=Bre(i),!i){const o=MFe(r,t);s=o.nulls>0,i=o.type()}return FFe(n,r,t,i,s)}function pFt(e,t,n,r,i,s=!0){i=Bre(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=mFt(o);if(u&&a&&kve(u.type,i))return u;const l=o.data;if(PN(l)){const c=gFt(l);if(a&&c&&kve(c,i))return cFt(l,c);i=i||c,s=!1}if(!i){const c=MFe(r,o);s=c.nulls>0,i=c.type()}return FFe(n,r,o,i,s)}function mFt(e){return e instanceof mi?e:e.vector instanceof mi?e.vector:null}function gFt(e){const n={Float32Array:ere,Float64Array:tre,Int8Array:Gne,Int16Array:Yne,Int32Array:Lv,Uint8Array:Xne,Uint16Array:Qne,Uint32Array:Jne,BigInt64Array:Kne,BigUint64Array:Zne}[e.constructor.name];return n?new n:null}function kve(e,t){return!e||!t?!0:e.compareTo(t)}function yFt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function vFt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&gw(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const bFt=()=>pr("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function xFt(){try{return yc}catch{bFt()}}function $Fe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=wFt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&pr("Column length mismatch"),a[l]=c});const u=xFt();return new u(a)}function wFt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=Ts(n)?n(e):pi(n)?n:null;if(pi(e))return{dataFrom:hFt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:yFt(e,r,i)};if(_Ft(e))return{dataFrom:pFt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:vFt(e,r,i)};pr("Unsupported input data type")}function _Ft(e){return e&&Ts(e.reify)}function EFt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return X6t($Fe(e,r),n)}function SFt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function CFt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&sy(u))++i,SFt(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function n9(e,t){return Ts(t)?t(e):t||e.columnNames()}function LFe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=CFt(TFt(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function TFt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function jre(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function AFt(e,t={}){const n=n9(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":sy(l)?HB(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return jre(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function BFe(e,t={}){if(Ts(t))return t(e)+"";const n=typeof e;if(n==="object"){if(sy(e))return t.utc?HB(e):a4e(e);{const r=JSON.stringify(e,(s,o)=>PN(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function r9(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function DFt(e,t={}){const n=n9(e,t.columns),{align:r,format:i}=LFe(e,n,t),s=IFt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(BFe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",b=s[m]&&s[m](g,d,f)||"",_=(v?`text-align: ${v};`+(b?" ":""):"")+b;return`<${m}${_?` style="${_}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return jre(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function IFt(e){return r9(e.style,t=>Ts(t)?t:()=>t)}function kFt(e,t=!0,n=!1){return e===void 0||e?t:n}const RFt=e=>sy(e)?HB(e,!0):e;function NFt(e,t={}){const n=kFt(t.schema),r=t.format||{},i=n9(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||RFt;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function PFt(e,t={}){const n=n9(e,t.columns),{align:r,format:i}=LFe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return jre(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(BFe(u,i[l]))+"|"}}),a+`
`}function jFe(e,t){for(const[n,r]of qB(t))e.set(n,r);return e}function OFt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function uy(e,t,n=new Map){return t=Vl(t)?e.columnName(t):t,gu(t)?n.set(t,t):pi(t)?t.forEach(r=>uy(e,r,n)):Ts(t)?uy(e,t(e),n):tl(t)?jFe(n,t):pr(`Invalid column selection: ${Wm(t)}`),n}function i9(e,t){return e.toObject=t,e}function UFe(e){return pi(e)?e.map(UFe):e&&e.toObject?e.toObject():e}function OC(){return i9(e=>e.columnNames(),()=>({all:[]}))}function zFe(...e){return e=e.flat(),i9(t=>{const n=uy(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:UFe(e)}))}function FFt(e,t){return i9(n=>{let r=Vl(e)?e:n.columnIndex(e),i=Vl(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function MFt(e){return gu(e)&&(e=RegExp(OFt(e))),i9(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function $Ft(e){return PN(e.data)?e.data.constructor:Array}class hg extends ePt{static from(t,n){return new hg(rPt(t,n),n)}static new(t,n){if(t instanceof hg)return t;const r={},i=[];for(const[s,o]of qB(t))r[s]=o,i.push(s);return new hg(r,n||i)}constructor(t,n,r,i,s,o){r9(t,nPt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new hg(t||this._data,n||(t?null:this._names),o,i!==void 0?i:NPt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Qf(r).groupby(r.groups());return t.forEach(s=>{s=hg.new(s),s.numRows()!==n&&pr("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):pr(`Unrecognized column: ${t}`)}object(t=0){return Rve(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=uy(this,t.columns||OC()),o=N4e(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),OPt(this,u,a,n)}return a}*[Symbol.iterator](){const t=Rve(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new($Ft(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=PPt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return $Fe(this,t)}toArrowBuffer(t){return EFt(this,t)}toCSV(t){return AFt(this,t)}toHTML(t){return DFt(this,t)}toJSON(t){return NFt(this,t)}toMarkdown(t){return PFt(this,t)}}function Rve(e){let t=e._builder;if(!t){const n=N4e(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class LFt{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Zr(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=BFt[e.type];s&&s(e,t,n)}const M4=(e,t,n)=>{Zr(e.argument,t,n,e)},SH=(e,t,n)=>{Zr(e.left,t,n,e),Zr(e.right,t,n,e)},Nve=(e,t,n)=>{Zr(e.test,t,n,e),Zr(e.consequent,t,n,e),e.alternate&&Zr(e.alternate,t,n,e)},CH=(e,t,n)=>{Zp(e.params,t,n,e),Zr(e.body,t,n,e)},Pve=(e,t,n)=>{Zr(e.callee,t,n,e),Zp(e.arguments,t,n,e)},Zp=(e,t,n,r)=>{e.forEach(i=>Zr(i,t,n,r))},BFt={TemplateLiteral:(e,t,n)=>{Zp(e.expressions,t,n,e),Zp(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{Zr(e.object,t,n,e),Zr(e.property,t,n,e)},CallExpression:Pve,NewExpression:Pve,ArrayExpression:(e,t,n)=>{Zp(e.elements,t,n,e)},AssignmentExpression:SH,AwaitExpression:M4,BinaryExpression:SH,LogicalExpression:SH,UnaryExpression:M4,UpdateExpression:M4,ConditionalExpression:Nve,ObjectExpression:(e,t,n)=>{Zp(e.properties,t,n,e)},Property:(e,t,n)=>{Zr(e.key,t,n,e),Zr(e.value,t,n,e)},ArrowFunctionExpression:CH,FunctionExpression:CH,FunctionDeclaration:CH,VariableDeclaration:(e,t,n)=>{Zp(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{Zr(e.id,t,n,e),Zr(e.init,t,n,e)},SpreadElement:(e,t,n)=>{Zr(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Zp(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{Zr(e.expression,t,n,e)},IfStatement:Nve,ForStatement:(e,t,n)=>{Zr(e.init,t,n,e),Zr(e.test,t,n,e),Zr(e.update,t,n,e),Zr(e.body,t,n,e)},WhileStatement:(e,t,n)=>{Zr(e.test,t,n,e),Zr(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{Zr(e.body,t,n,e),Zr(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{Zr(e.discriminant,t,n,e),Zp(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&Zr(e.test,t,n,e),Zp(e.consequent,t,n,e)},ReturnStatement:M4,Program:(e,t,n)=>{Zr(e.body[0],t,n,e)}};function VFe(e){delete e.start,delete e.end,delete e.optional}function Ove(e){VFe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function jFt(e){return Zr(e,null,{Column:Ove,Constant:Ove,Default:VFe}),e}function oa(e,t){return t&&t.type===e}function UFt(e){return oa($Pt,e)||oa(MPt,e)}function zFt(e){return Ts(e)?e:()=>e}const VFt="Escaped functions are not valid as rollup or pivot values.";function HFt(e,t,n){e.aggronly&&pr(VFt);const r="(row,data)=>fn("+R4e(e.table.columnNames())+",$)";return{escape:zne.escape(r,zFt(t.expr),n)}}var qFt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],HFe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],WFt="-----------------------------------------------------------------------------------------------------------------------------------------------------",qFe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",TH={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},AH="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",GFt={5:AH,"5module":AH+" export import",6:AH+" const class extends export import super"},YFt=/^in(stanceof)?$/,KFt=new RegExp("["+qFe+"]"),XFt=new RegExp("["+qFe+WFt+"]");function bK(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function ly(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&KFt.test(String.fromCharCode(e)):t===!1?!1:bK(e,HFe)}function FC(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&XFt.test(String.fromCharCode(e)):t===!1?!1:bK(e,HFe)||bK(e,qFt)}var ui=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function ud(e,t){return new ui(e,{beforeExpr:!0,binop:t})}var ld={beforeExpr:!0},sc={startsExpr:!0},Ure={};function Vr(e,t){return t===void 0&&(t={}),t.keyword=e,Ure[e]=new ui(e,t)}var ne={num:new ui("num",sc),regexp:new ui("regexp",sc),string:new ui("string",sc),name:new ui("name",sc),privateId:new ui("privateId",sc),eof:new ui("eof"),bracketL:new ui("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ui("]"),braceL:new ui("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ui("}"),parenL:new ui("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ui(")"),comma:new ui(",",ld),semi:new ui(";",ld),colon:new ui(":",ld),dot:new ui("."),question:new ui("?",ld),questionDot:new ui("?."),arrow:new ui("=>",ld),template:new ui("template"),invalidTemplate:new ui("invalidTemplate"),ellipsis:new ui("...",ld),backQuote:new ui("`",sc),dollarBraceL:new ui("${",{beforeExpr:!0,startsExpr:!0}),eq:new ui("=",{beforeExpr:!0,isAssign:!0}),assign:new ui("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ui("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ui("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:ud("||",1),logicalAND:ud("&&",2),bitwiseOR:ud("|",3),bitwiseXOR:ud("^",4),bitwiseAND:ud("&",5),equality:ud("==/!=/===/!==",6),relational:ud("</>/<=/>=",7),bitShift:ud("<</>>/>>>",8),plusMin:new ui("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:ud("%",10),star:ud("*",10),slash:ud("/",10),starstar:new ui("**",{beforeExpr:!0}),coalesce:ud("??",1),_break:Vr("break"),_case:Vr("case",ld),_catch:Vr("catch"),_continue:Vr("continue"),_debugger:Vr("debugger"),_default:Vr("default",ld),_do:Vr("do",{isLoop:!0,beforeExpr:!0}),_else:Vr("else",ld),_finally:Vr("finally"),_for:Vr("for",{isLoop:!0}),_function:Vr("function",sc),_if:Vr("if"),_return:Vr("return",ld),_switch:Vr("switch"),_throw:Vr("throw",ld),_try:Vr("try"),_var:Vr("var"),_const:Vr("const"),_while:Vr("while",{isLoop:!0}),_with:Vr("with"),_new:Vr("new",{beforeExpr:!0,startsExpr:!0}),_this:Vr("this",sc),_super:Vr("super",sc),_class:Vr("class",sc),_extends:Vr("extends",ld),_export:Vr("export"),_import:Vr("import",sc),_null:Vr("null",sc),_true:Vr("true",sc),_false:Vr("false",sc),_in:Vr("in",{beforeExpr:!0,binop:7}),_instanceof:Vr("instanceof",{beforeExpr:!0,binop:7}),_typeof:Vr("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Vr("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Vr("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},th=/\r\n?|\n|\u2028|\u2029/,QFt=new RegExp(th.source,"g");function sA(e){return e===10||e===13||e===8232||e===8233}function WFe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(sA(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var GFe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Sd=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,YFe=Object.prototype,JFt=YFe.hasOwnProperty,ZFt=YFe.toString,jN=Object.hasOwn||function(e,t){return JFt.call(e,t)},Fve=Array.isArray||function(e){return ZFt.call(e)==="[object Array]"},Mve=Object.create(null);function j1(e){return Mve[e]||(Mve[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function Wv(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var eMt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,i3=function(t,n){this.line=t,this.column=n};i3.prototype.offset=function(t){return new i3(this.line,this.column+t)};var s9=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function KFe(e,t){for(var n=1,r=0;;){var i=WFe(e,r,t);if(i<0)return new i3(n,t-r);++n,r=i}}var xK={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},$ve=!1;function tMt(e){var t={};for(var n in xK)t[n]=e&&jN(e,n)?e[n]:xK[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!$ve&&typeof console=="object"&&console.warn&&($ve=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Fve(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return Fve(t.onComment)&&(t.onComment=nMt(t,t.onComment)),t}function nMt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new s9(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var s3=1,oA=2,zre=4,XFe=8,QFe=16,JFe=32,Vre=64,ZFe=128,UN=256,Hre=s3|oA|UN;function qre(e,t){return oA|(e?zre:0)|(t?XFe:0)}var b5=0,Wre=1,Ny=2,eMe=3,tMe=4,nMe=5,ga=function(t,n,r){this.options=t=tMt(t),this.sourceFile=t.sourceFile,this.keywords=j1(GFt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=TH[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=j1(i);var s=(i?i+" ":"")+TH.strict;this.reservedWordsStrict=j1(s),this.reservedWordsStrictBind=j1(s+" "+TH.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(th).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=ne.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(s3),this.regexpState=null,this.privateNameStack=[]},m0={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};ga.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};m0.inFunction.get=function(){return(this.currentVarScope().flags&oA)>0};m0.inGenerator.get=function(){return(this.currentVarScope().flags&XFe)>0&&!this.currentVarScope().inClassFieldInit};m0.inAsync.get=function(){return(this.currentVarScope().flags&zre)>0&&!this.currentVarScope().inClassFieldInit};m0.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&UN)return!1;if(t.flags&oA)return(t.flags&zre)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};m0.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&Vre)>0||n||this.options.allowSuperOutsideMethod};m0.allowDirectSuper.get=function(){return(this.currentThisScope().flags&ZFe)>0};m0.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};m0.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(oA|UN))>0||n};m0.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&UN)>0};ga.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};ga.parse=function(t,n){return new this(n,t).parse()};ga.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};ga.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(ga.prototype,m0);var Xl=ga.prototype,rMt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Xl.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Sd.lastIndex=e,e+=Sd.exec(this.input)[0].length;var t=rMt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Sd.lastIndex=e+t[0].length;var n=Sd.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||th.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Sd.lastIndex=e,e+=Sd.exec(this.input)[0].length,this.input[e]===";"&&e++}};Xl.eat=function(e){return this.type===e?(this.next(),!0):!1};Xl.isContextual=function(e){return this.type===ne.name&&this.value===e&&!this.containsEsc};Xl.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};Xl.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};Xl.canInsertSemicolon=function(){return this.type===ne.eof||this.type===ne.braceR||th.test(this.input.slice(this.lastTokEnd,this.start))};Xl.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Xl.semicolon=function(){!this.eat(ne.semi)&&!this.insertSemicolon()&&this.unexpected()};Xl.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};Xl.expect=function(e){this.eat(e)||this.unexpected()};Xl.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var o9=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Xl.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};Xl.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};Xl.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Xl.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var cn=ga.prototype;cn.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==ne.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var Gre={kind:"loop"},iMt={kind:"switch"};cn.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Sd.lastIndex=this.pos;var t=Sd.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(ly(r,!0)){for(var i=n+1;FC(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!YFt.test(s))return!0}return!1};cn.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Sd.lastIndex=this.pos;var e=Sd.exec(this.input),t=this.pos+e[0].length,n;return!th.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(FC(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};cn.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=ne._var,s="let"),r){case ne._break:case ne._continue:return this.parseBreakContinueStatement(i,r.keyword);case ne._debugger:return this.parseDebuggerStatement(i);case ne._do:return this.parseDoStatement(i);case ne._for:return this.parseForStatement(i);case ne._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case ne._class:return e&&this.unexpected(),this.parseClass(i,!0);case ne._if:return this.parseIfStatement(i);case ne._return:return this.parseReturnStatement(i);case ne._switch:return this.parseSwitchStatement(i);case ne._throw:return this.parseThrowStatement(i);case ne._try:return this.parseTryStatement(i);case ne._const:case ne._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case ne._while:return this.parseWhileStatement(i);case ne._with:return this.parseWithStatement(i);case ne.braceL:return this.parseBlock(!0,i);case ne.semi:return this.parseEmptyStatement(i);case ne._export:case ne._import:if(this.options.ecmaVersion>10&&r===ne._import){Sd.lastIndex=this.pos;var o=Sd.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===ne._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===ne.name&&c.type==="Identifier"&&this.eat(ne.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};cn.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(ne.semi)||this.insertSemicolon()?e.label=null:this.type!==ne.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};cn.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};cn.parseDoStatement=function(e){return this.next(),this.labels.push(Gre),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(ne._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(ne.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};cn.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Gre),this.enterScope(0),this.expect(ne.parenL),this.type===ne.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===ne._var||this.type===ne._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===ne._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===ne._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new o9,u=this.parseExpression(t>-1?"await":!0,a);return this.type===ne._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===ne._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};cn.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,Dk|(n?0:wK),!1,t)};cn.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(ne._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};cn.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(ne.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};cn.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(ne.braceL),this.labels.push(iMt),this.enterScope(0);for(var t,n=!1;this.type!==ne.braceR;)if(this.type===ne._case||this.type===ne._default){var r=this.type===ne._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(ne.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};cn.parseThrowStatement=function(e){return this.next(),th.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var sMt=[];cn.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?JFe:0),this.checkLValPattern(e,t?tMe:Ny),this.expect(ne.parenR),e};cn.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===ne._catch){var t=this.startNode();this.next(),this.eat(ne.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(ne._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};cn.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};cn.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(Gre),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};cn.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};cn.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};cn.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===ne._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};cn.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};cn.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(ne.braceL),e&&this.enterScope(0);this.type!==ne.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};cn.parseFor=function(e,t){return e.init=t,this.expect(ne.semi),e.test=this.type===ne.semi?null:this.parseExpression(),this.expect(ne.semi),e.update=this.type===ne.parenR?null:this.parseExpression(),this.expect(ne.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};cn.parseForIn=function(e,t){var n=this.type===ne._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(ne.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};cn.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(ne.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===ne._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===ne._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(ne.comma))break}return e};cn.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?Wre:Ny,!1)};var Dk=1,wK=2,rMe=4;cn.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===ne.star&&t&wK&&this.unexpected(),e.generator=this.eat(ne.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&Dk&&(e.id=t&rMe&&this.type!==ne.name?null:this.parseIdent(),e.id&&!(t&wK)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?Wre:Ny:eMe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(qre(e.async,e.generator)),t&Dk||(e.id=this.type===ne.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&Dk?"FunctionDeclaration":"FunctionExpression")};cn.parseFunctionParams=function(e){this.expect(ne.parenL),e.params=this.parseBindingList(ne.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};cn.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(ne.braceL);this.type!==ne.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&oMt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};cn.parseClassElement=function(e){if(this.eat(ne.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(ne.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===ne.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===ne.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(ne.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===ne.parenL||o!=="method"||i||s){var l=!n.static&&x5(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};cn.isClassElementNameStart=function(){return this.type===ne.name||this.type===ne.privateId||this.type===ne.num||this.type===ne.string||this.type===ne.bracketL||this.type.keyword};cn.parseClassElementName=function(e){this.type===ne.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};cn.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&x5(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};cn.parseClassField=function(e){if(x5(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&x5(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(ne.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};cn.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(UN|Vre);this.type!==ne.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};cn.parseClassId=function(e,t){this.type===ne.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Ny,!1)):(t===!0&&this.unexpected(),e.id=null)};cn.parseClassSuper=function(e){e.superClass=this.eat(ne._extends)?this.parseExprSubscripts(null,!1):null};cn.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};cn.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];jN(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function oMt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function x5(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}cn.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==ne.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};cn.parseExport=function(e,t){if(this.next(),this.eat(ne.star))return this.parseExportAllDeclaration(e,t);if(this.eat(ne._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==ne.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};cn.parseExportDeclaration=function(e){return this.parseStatement(null)};cn.parseExportDefaultDeclaration=function(){var e;if(this.type===ne._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,Dk|rMe,!1,e)}else if(this.type===ne._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};cn.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),jN(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};cn.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};cn.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};cn.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};cn.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};cn.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(ne.braceL);!this.eat(ne.braceR);){if(n)n=!1;else if(this.expect(ne.comma),this.afterTrailingComma(ne.braceR))break;t.push(this.parseExportSpecifier(e))}return t};cn.parseImport=function(e){return this.next(),this.type===ne.string?(e.specifiers=sMt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===ne.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};cn.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Ny),this.finishNode(e,"ImportSpecifier")};cn.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Ny),this.finishNode(e,"ImportDefaultSpecifier")};cn.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Ny),this.finishNode(e,"ImportNamespaceSpecifier")};cn.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===ne.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(ne.comma)))return e;if(this.type===ne.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(ne.braceL);!this.eat(ne.braceR);){if(t)t=!1;else if(this.expect(ne.comma),this.afterTrailingComma(ne.braceR))break;e.push(this.parseImportSpecifier())}return e};cn.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===ne.string){var e=this.parseLiteral(this.value);return eMt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};cn.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};cn.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var nh=ga.prototype;nh.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};nh.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};nh.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};nh.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==ne.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};nh.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case ne.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(ne.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case ne.braceL:return this.parseObj(!0)}return this.parseIdent()};nh.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(ne.comma),t&&this.type===ne.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===ne.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===ne.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};nh.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};nh.parseBindingListItem=function(e){return e};nh.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(ne.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};nh.checkLValSimple=function(e,t,n){t===void 0&&(t=b5);var r=t!==b5;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===Ny&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(jN(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==nMe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};nh.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=b5),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};nh.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=b5),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var wh=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Bs={b_stat:new wh("{",!1),b_expr:new wh("{",!0),b_tmpl:new wh("${",!1),p_stat:new wh("(",!1),p_expr:new wh("(",!0),q_tmpl:new wh("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new wh("function",!1),f_expr:new wh("function",!0),f_expr_gen:new wh("function",!0,!1,null,!0),f_gen:new wh("function",!1,!1,null,!0)},aA=ga.prototype;aA.initialContext=function(){return[Bs.b_stat]};aA.curContext=function(){return this.context[this.context.length-1]};aA.braceIsBlock=function(e){var t=this.curContext();return t===Bs.f_expr||t===Bs.f_stat?!0:e===ne.colon&&(t===Bs.b_stat||t===Bs.b_expr)?!t.isExpr:e===ne._return||e===ne.name&&this.exprAllowed?th.test(this.input.slice(this.lastTokEnd,this.start)):e===ne._else||e===ne.semi||e===ne.eof||e===ne.parenR||e===ne.arrow?!0:e===ne.braceL?t===Bs.b_stat:e===ne._var||e===ne._const||e===ne.name?!1:!this.exprAllowed};aA.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};aA.updateContext=function(e){var t,n=this.type;n.keyword&&e===ne.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};aA.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};ne.parenR.updateContext=ne.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Bs.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};ne.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Bs.b_stat:Bs.b_expr),this.exprAllowed=!0};ne.dollarBraceL.updateContext=function(){this.context.push(Bs.b_tmpl),this.exprAllowed=!0};ne.parenL.updateContext=function(e){var t=e===ne._if||e===ne._for||e===ne._with||e===ne._while;this.context.push(t?Bs.p_stat:Bs.p_expr),this.exprAllowed=!0};ne.incDec.updateContext=function(){};ne._function.updateContext=ne._class.updateContext=function(e){e.beforeExpr&&e!==ne._else&&!(e===ne.semi&&this.curContext()!==Bs.p_stat)&&!(e===ne._return&&th.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===ne.colon||e===ne.braceL)&&this.curContext()===Bs.b_stat)?this.context.push(Bs.f_expr):this.context.push(Bs.f_stat),this.exprAllowed=!1};ne.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};ne.backQuote.updateContext=function(){this.curContext()===Bs.q_tmpl?this.context.pop():this.context.push(Bs.q_tmpl),this.exprAllowed=!1};ne.star.updateContext=function(e){if(e===ne._function){var t=this.context.length-1;this.context[t]===Bs.f_expr?this.context[t]=Bs.f_expr_gen:this.context[t]=Bs.f_gen}this.exprAllowed=!0};ne.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==ne.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Kn=ga.prototype;Kn.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};Kn.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===ne.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(ne.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};Kn.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new o9,r=!0);var a=this.start,u=this.startLoc;(this.type===ne.parenL||this.type===ne.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===ne.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===ne.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};Kn.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(ne.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(ne.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};Kn.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};Kn.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==ne._in)&&s>r){var o=this.type===ne.logicalOR||this.type===ne.logicalAND,a=this.type===ne.coalesce;a&&(s=ne.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===ne.coalesce||a&&(this.type===ne.logicalOR||this.type===ne.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};Kn.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};Kn.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===ne.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&iMe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===ne.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==ne._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(ne.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function iMe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&iMe(e.expression)}Kn.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};Kn.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};Kn.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(ne.arrow)};Kn.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};Kn.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(ne.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(ne.bracketL);if(l||u&&this.type!==ne.parenL&&this.type!==ne.backQuote||this.eat(ne.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(ne.bracketR)):this.type===ne.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(ne.parenL)){var f=new o9,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(ne.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===ne.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};Kn.parseExprAtom=function(e,t,n){this.type===ne.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case ne._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===ne.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==ne.dot&&this.type!==ne.bracketL&&this.type!==ne.parenL&&this.unexpected(),this.finishNode(r,"Super");case ne._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case ne.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(ne._function))return this.overrideContext(Bs.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(ne.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===ne.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(ne.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case ne.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case ne.num:case ne.string:return this.parseLiteral(this.value);case ne._null:case ne._true:case ne._false:return r=this.startNode(),r.value=this.type===ne._null?null:this.type===ne._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case ne.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case ne.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(ne.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case ne.braceL:return this.overrideContext(Bs.b_expr),this.parseObj(!1,e);case ne._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case ne._class:return this.parseClass(this.startNode(),!1);case ne._new:return this.parseNew();case ne.backQuote:return this.parseTemplate();case ne._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Kn.parseExprAtomDefault=function(){this.unexpected()};Kn.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===ne.parenL&&!e)return this.parseDynamicImport(t);if(this.type===ne.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};Kn.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(ne.parenR)){var t=this.start;this.eat(ne.comma)&&this.eat(ne.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Kn.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Kn.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Kn.parseParenExpression=function(){this.expect(ne.parenL);var e=this.parseExpression();return this.expect(ne.parenR),e};Kn.shouldParseArrow=function(e){return!this.canInsertSemicolon()};Kn.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new o9,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==ne.parenR;)if(l?l=!1:this.expect(ne.comma),s&&this.afterTrailingComma(ne.parenR,!0)){c=!0;break}else if(this.type===ne.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===ne.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(ne.parenR),e&&this.shouldParseArrow(u)&&this.eat(ne.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};Kn.parseParenItem=function(e){return e};Kn.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var aMt=[];Kn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===ne.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(ne.parenL)?e.arguments=this.parseExprList(ne.parenR,this.options.ecmaVersion>=8,!1):e.arguments=aMt,this.finishNode(e,"NewExpression")};Kn.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===ne.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===ne.backQuote,this.finishNode(n,"TemplateElement")};Kn.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===ne.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(ne.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(ne.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Kn.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===ne.name||this.type===ne.num||this.type===ne.string||this.type===ne.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===ne.star)&&!th.test(this.input.slice(this.lastTokEnd,this.start))};Kn.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(ne.braceR);){if(r)r=!1;else if(this.expect(ne.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(ne.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Kn.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(ne.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===ne.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===ne.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(ne.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(ne.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};Kn.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};Kn.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===ne.colon&&this.unexpected(),this.eat(ne.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===ne.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==ne.comma&&this.type!==ne.braceR&&this.type!==ne.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===ne.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Kn.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(ne.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(ne.bracketR),e.key;e.computed=!1}return e.key=this.type===ne.num||this.type===ne.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Kn.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Kn.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(qre(t,r.generator)|Vre|(n?ZFe:0)),this.expect(ne.parenL),r.params=this.parseBindingList(ne.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};Kn.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(qre(n,!1)|QFe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};Kn.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==ne.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,nMe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};Kn.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};Kn.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,Wre,t?null:n)}};Kn.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(ne.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===ne.comma?o=null:this.type===ne.ellipsis?(o=this.parseSpread(r),r&&this.type===ne.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};Kn.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};Kn.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};Kn.parseIdentNode=function(){var e=this.startNode();return this.type===ne.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=ne.name):this.unexpected(),e};Kn.parsePrivateIdent=function(){var e=this.startNode();return this.type===ne.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};Kn.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===ne.semi||this.canInsertSemicolon()||this.type!==ne.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(ne.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Kn.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var w5=ga.prototype;w5.raise=function(e,t){var n=KFe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};w5.raiseRecoverable=w5.raise;w5.curPosition=function(){if(this.options.locations)return new i3(this.curLine,this.pos-this.lineStart)};var Lb=ga.prototype,uMt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Lb.enterScope=function(e){this.scopeStack.push(new uMt(e))};Lb.exitScope=function(){this.scopeStack.pop()};Lb.treatFunctionsAsVarInScope=function(e){return e.flags&oA||!this.inModule&&e.flags&s3};Lb.declareName=function(e,t,n){var r=!1;if(t===Ny){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&s3&&delete this.undefinedExports[e]}else if(t===tMe){var s=this.currentScope();s.lexical.push(e)}else if(t===eMe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&JFe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&s3&&delete this.undefinedExports[e],u.flags&Hre)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Lb.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Lb.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Lb.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Hre)return t}};Lb.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Hre&&!(t.flags&QFe))return t}};var a9=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new s9(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},zN=ga.prototype;zN.startNode=function(){return new a9(this,this.start,this.startLoc)};zN.startNodeAt=function(e,t){return new a9(this,e,t)};function sMe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}zN.finishNode=function(e,t){return sMe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};zN.finishNodeAt=function(e,t,n,r){return sMe.call(this,e,t,n,r)};zN.copyNode=function(e){var t=new a9(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var oMe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",aMe=oMe+" Extended_Pictographic",uMe=aMe,lMe=uMe+" EBase EComp EMod EPres ExtPict",cMe=lMe,lMt=cMe,cMt={9:oMe,10:aMe,11:uMe,12:lMe,13:cMe,14:lMt},fMt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",dMt={9:"",10:"",11:"",12:"",13:"",14:fMt},Lve="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",fMe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",dMe=fMe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",hMe=dMe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",pMe=hMe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",mMe=pMe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",hMt=mMe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",pMt={9:fMe,10:dMe,11:hMe,12:pMe,13:mMe,14:hMt},gMe={};function mMt(e){var t=gMe[e]={binary:j1(cMt[e]+" "+Lve),binaryOfStrings:j1(dMt[e]),nonBinary:{General_Category:j1(Lve),Script:j1(pMt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var DH=0,Bve=[9,10,11,12,13,14];DH<Bve.length;DH+=1){var gMt=Bve[DH];mMt(gMt)}var Zt=ga.prototype,g0=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=gMe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};g0.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};g0.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};g0.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};g0.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};g0.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};g0.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};g0.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};g0.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};g0.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Zt.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};Zt.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};Zt.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};Zt.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Zt.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Zt.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Zt.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Zt.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Zt.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Zt.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Zt.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Zt.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Zt.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Zt.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Zt.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Zt.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Zt.regexp_eatSyntaxCharacter=function(e){var t=e.current();return yMe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function yMe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Zt.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!yMe(n);)e.advance();return e.pos!==t};Zt.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Zt.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};Zt.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Zt.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Wv(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Wv(e.lastIntValue);return!0}return!1};Zt.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),yMt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function yMt(e){return ly(e,!0)||e===36||e===95}Zt.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),vMt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function vMt(e){return FC(e,!0)||e===36||e===95||e===8204||e===8205}Zt.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Zt.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Zt.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Zt.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Zt.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Zt.regexp_eatZero=function(e){return e.current()===48&&!u9(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Zt.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Zt.regexp_eatControlLetter=function(e){var t=e.current();return vMe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function vMe(e){return e>=65&&e<=90||e>=97&&e<=122}Zt.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&bMt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function bMt(e){return e>=0&&e<=1114111}Zt.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Zt.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var bMe=0,cy=1,Ad=2;Zt.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(xMt(t))return e.lastIntValue=-1,e.advance(),cy;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===Ad&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return bMe};function xMt(e){return e===100||e===68||e===115||e===83||e===119||e===87}Zt.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),cy}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return bMe};Zt.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){jN(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Zt.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return cy;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return Ad;e.raise("Invalid property name")};Zt.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";xMe(t=e.current());)e.lastStringValue+=Wv(t),e.advance();return e.lastStringValue!==""};function xMe(e){return vMe(e)||e===95}Zt.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";wMt(t=e.current());)e.lastStringValue+=Wv(t),e.advance();return e.lastStringValue!==""};function wMt(e){return xMe(e)||u9(e)}Zt.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Zt.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===Ad&&e.raise("Negated character class may contain strings"),!0}return!1};Zt.regexp_classContents=function(e){return e.current()===93?cy:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),cy)};Zt.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Zt.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||EMe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Zt.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Zt.regexp_classSetExpression=function(e){var t=cy,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===Ad&&(t=Ad);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==Ad&&(t=cy);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===Ad&&(t=Ad)}};Zt.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Zt.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?cy:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Zt.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===Ad&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Zt.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Zt.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===Ad&&(t=Ad);return t};Zt.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?cy:Ad};Zt.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&_Mt(n)||EMt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function _Mt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function EMt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Zt.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return SMt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function SMt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Zt.regexp_eatClassControlLetter=function(e){var t=e.current();return u9(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Zt.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Zt.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;u9(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function u9(e){return e>=48&&e<=57}Zt.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;wMe(n=e.current());)e.lastIntValue=16*e.lastIntValue+_Me(n),e.advance();return e.pos!==t};function wMe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function _Me(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Zt.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Zt.regexp_eatOctalDigit=function(e){var t=e.current();return EMe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function EMe(e){return e>=48&&e<=55}Zt.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!wMe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+_Me(i),e.advance()}return!0};var Yre=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new s9(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},$r=ga.prototype;$r.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Yre(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};$r.getToken=function(){return this.next(),new Yre(this)};typeof Symbol<"u"&&($r[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===ne.eof,value:t}}}});$r.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(ne.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};$r.readToken=function(e){return ly(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};$r.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};$r.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=WFe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};$r.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!sA(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};$r.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&GFe.test(String.fromCharCode(e)))++this.pos;else break e}}};$r.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};$r.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(ne.ellipsis)):(++this.pos,this.finishToken(ne.dot))};$r.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(ne.assign,2):this.finishOp(ne.slash,1)};$r.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?ne.star:ne.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=ne.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(ne.assign,n+1):this.finishOp(r,n)};$r.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(ne.assign,3)}return this.finishOp(e===124?ne.logicalOR:ne.logicalAND,2)}return t===61?this.finishOp(ne.assign,2):this.finishOp(e===124?ne.bitwiseOR:ne.bitwiseAND,1)};$r.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(ne.assign,2):this.finishOp(ne.bitwiseXOR,1)};$r.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||th.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(ne.incDec,2):t===61?this.finishOp(ne.assign,2):this.finishOp(ne.plusMin,1)};$r.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(ne.assign,n+1):this.finishOp(ne.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(ne.relational,n))};$r.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(ne.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(ne.arrow)):this.finishOp(e===61?ne.eq:ne.prefix,1)};$r.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(ne.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(ne.assign,3)}return this.finishOp(ne.coalesce,2)}}return this.finishOp(ne.question,1)};$r.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),ly(t,!0)||t===92))return this.finishToken(ne.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Wv(t)+"'")};$r.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(ne.parenL);case 41:return++this.pos,this.finishToken(ne.parenR);case 59:return++this.pos,this.finishToken(ne.semi);case 44:return++this.pos,this.finishToken(ne.comma);case 91:return++this.pos,this.finishToken(ne.bracketL);case 93:return++this.pos,this.finishToken(ne.bracketR);case 123:return++this.pos,this.finishToken(ne.braceL);case 125:return++this.pos,this.finishToken(ne.braceR);case 58:return++this.pos,this.finishToken(ne.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(ne.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(ne.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Wv(e)+"'")};$r.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};$r.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(th.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new g0(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(ne.regexp,{pattern:i,flags:o,value:u})};$r.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function CMt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function SMe(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}$r.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=SMe(this.input.slice(t,this.pos)),++this.pos):ly(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(ne.num,n)};$r.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=SMe(this.input.slice(t,this.pos));return++this.pos,ly(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(ne.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),ly(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=CMt(this.input.slice(t,this.pos),n);return this.finishToken(ne.num,s)};$r.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};$r.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(sA(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(ne.string,t)};var CMe={};$r.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===CMe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};$r.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw CMe;this.raise(e,t)};$r.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===ne.template||this.type===ne.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(ne.dollarBraceL)):(++this.pos,this.finishToken(ne.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(ne.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(sA(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};$r.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(ne.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};$r.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Wv(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return sA(t)?"":String.fromCharCode(t)}};$r.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};$r.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(FC(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?ly:FC)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=Wv(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};$r.readWord=function(){var e=this.readWord1(),t=ne.name;return this.keywords.test(e)&&(t=Ure[e]),this.finishToken(t,e)};var TMt="8.11.3";ga.acorn={Parser:ga,version:TMt,defaultOptions:xK,Position:i3,SourceLocation:s9,getLineInfo:KFe,Node:a9,TokenType:ui,tokTypes:ne,keywordTypes:Ure,TokContext:wh,tokContexts:Bs,isIdentifierChar:FC,isIdentifierStart:ly,Token:Yre,isNewLine:sA,lineBreak:th,lineBreakG:QFt,nonASCIIwhitespace:GFe};function AMt(e,t){return ga.parse(e,t)}const Kre={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},DMt={ecmaVersion:11},jve="$",IMt="d",kMt="d1",RMt="d2",Za=e=>(t,n)=>n.error(t,e+" not allowed"),NMt=Za("Aggregate function"),PMt=Za("Window function"),OMt="Invalid argument",Xre="Invalid column reference",FMt=Xre+" (must be input to an aggregate function)",TMe="Invalid function call",MMt="Invalid member expression",$Mt="Invalid operator parameter",LMt="Invalid param reference",BMt="Invalid variable reference",jMt="Variable not accessible in operator call",UMt="Unsupported variable declaration",zMt="Unsupported destructuring pattern",AMe="Table expressions do not support closures",DMe="Use aq.escape(fn) to use a function as-is (including closures)",VMt="use table.params({ name: value }) to define dynamic parameters",HMt="use aq.addFunction(name, fn) to add new op functions",qMt=`
Note: ${AMe}. ${DMe}, or ${VMt}.`,IMe=`
Note: ${AMe}. ${DMe}, or ${HMt}.`,WMt=`The ${I4e} method is not valid in multi-table expressions.`;function GMt(e,t){const n=YMt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,UFt(r)?(XMt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=kMt),e.scope.add(e.tuple2=RMt),e.scope.add(e.$param=jve)):(e.scope.add(e.tuple=IMt),e.scope.add(e.$param=jve)),Zr(r,e,Qre),e.root}function YMt(e){try{const t=e.field?KMt(e):pi(e)?Wm(e):e;return AMt(`expr=(${t})`,DMt).body[0].expression.right}catch{pr(`Expression parse error: ${e+""}`)}}function KMt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const Qre={FunctionDeclaration:Za("Function definitions"),ForStatement:Za("For loops"),ForOfStatement:Za("For-of loops"),ForInStatement:Za("For-in loops"),WhileStatement:Za("While loops"),DoWhileStatement:Za("Do-while loops"),AwaitExpression:Za("Await expressions"),ArrowFunctionExpression:Za("Function definitions"),AssignmentExpression:Za("Assignments"),FunctionExpression:Za("Function definitions"),NewExpression:Za('Use of "new"'),UpdateExpression:Za("Update expressions"),VariableDeclarator(e,t){SK(e.id,t)},Identifier(e,t,n){NMe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,BMt,qMt)},CallExpression(e,t){const n=kMe(e.callee),r=T4e(n)||A4e(n);if(r){if((t.join||t.aggregate===!1)&&jne(n)&&NMt(e,t),(t.join||t.window===!1)&&Une(n)&&PMt(e,t),t.$op=1,t.ast)EK(e,n,t),e.arguments.forEach(i=>Zr(i,t,_K));else{const i=t.op(QMt(t,r,n,e.arguments));Object.assign(e,{type:w4e,name:i.id})}return t.$op=0,!1}else C4e(n)?EK(e,n,t):t.error(e,TMe,IMe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!oa(dv,r))return;const{name:s}=r;if(RMe(e)&&oa(dv,i)&&hp(Kre,i.name)){FMe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return Uve(e,o,t,PMe,n);if(s===t.$param)return Uve(e,o,t,ZMt);t.paramsRef.has(s)?o3(e,t.paramsRef.get(s)):t.columnRef.has(s)?OMe(r,s,t,e):hp(t.params,s)&&o3(r,s)}};function Uve(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(oa(eA,s))a=s.value;else try{Zr(s,n,Qre,e),a=n.param(s)}catch{n.error(e,MMt)}return r(e,a,t,n,i),!1}const _K={...Qre,VariableDeclarator:Za("Variable declaration in operator call"),Identifier(e,t,n){NMe(e,t,n)&&t.error(e,jMt)},CallExpression(e,t){const n=kMe(e.callee);C4e(n)?EK(e,n,t):t.error(e,TMe,IMe)}};function XMt(e,t){e.generator&&Za("Generator functions")(e,t),e.async&&Za("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(PD(t,n[0],"tuple1",i(1)),r>1&&PD(t,n[1],"tuple2",i(2)),r>2&&PD(t,n[2],"$param",s)):(PD(t,n[0],"tuple",i(0)),r>1&&PD(t,n[1],"$param",s))),t.root=e.body}function PD(e,t,n,r){oa(dv,t)?(e.scope.add(t.name),e[n]=t.name):oa(b4e,t)&&t.properties.forEach(i=>{const s=oa(dv,i.key)?i.key.name:oa(eA,i.key)?i.key.value:e.error(i,OMt);oa(dv,i.value)||e.error(i.value,zMt),r(i.value.name,s)})}function QMt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(Zr(u,e,_K),i.push(e.field(u))):l<a?(Zr(u,e,_K),s.push(e.param(u))):e.error(u,$Mt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function kMe(e){return oa(dv,e)?e.name:oa(v4e,e)?RMe(e)?JMt(e.property.name):e.property.name:null}function RMe(e){return oa(dv,e.object)&&e.object.name==="Math"}function JMt(e){return e==="max"?"greatest":e==="min"?"least":e}function NMe(e,t,n){const{name:r}=e;if(!(oa(v4e,n)&&n.property===e)){if(!(oa(x4e,n)&&n.key===e))if(t.paramsRef.has(r))o3(e,t.paramsRef.get(r));else if(t.columnRef.has(r))OMe(e,r,t,n);else if(hp(t.params,r))o3(e,r);else if(hp(Kre,r))FMe(e,r);else return!0}}function PMe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,Xre),r.aggronly&&!r.$op&&r.error(e,FMt),D4e(e,t,n,o,i)}function OMe(e,t,n,r){const[i,s]=n.columnRef.get(t);PMe(e,i,s,n,r)}function ZMt(e,t,n,r){r.params&&!hp(r.params,t)&&r.error(e,LMt),o3(e,t)}function o3(e,t){e.type=zPt,e.name=t}function FMe(e,t){e.type=BPt,e.name=t,e.raw=Kre[t]}function EK(e,t,n){if(t===I4e){const r=n.table;r||n.error(e,WMt),k4e(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Vl(s)?r.columnName(s):s;return r.column(o)||n.error(i,Xre),o}):r.columnNames())}else e.callee={type:UPt,name:t}}function SK(e,t){oa(dv,e)?t.scope.add(e.name):oa(FPt,e)?e.elements.forEach(n=>SK(n,t)):oa(b4e,e)?e.properties.forEach(n=>SK(n.value,t)):t.error(e.id,UMt)}const e8t={[ON]:1,[w4e]:1};function Hc(e,t={}){const n=t.generate||Z8,r=t.compiler||zne,i=n8t(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=t8t(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return oa(eA,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?jFt(g):f(n(g),i));u.push(y),e8t[g.type]&&y!==g&&tl(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,b=m.end-6,_=String(d.spec).slice(v,b);pr(`${g}: "${_}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of qB(e))d.value(m+"",g.escape?HFt(d,g,i):GMt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function t8t(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function n8t(e){return(e.table?IH(e.table):e.join?{...IH(e.join[1]),...IH(e.join[0])}:{})||{}}function IH(e){return e&&Ts(e.params)?e.params():{}}const MMe="Expr",_h="ExprList",$Me="ExprNumber",NI="ExprObject",J2="JoinKeys",_5="JoinValues",gd="Options",Jre="OrderKeys",l1="SelectionList",Xx="TableRef",Z2="TableRefList",r8t="Descending",i8t="Query",s8t="Selection",o8t="Verb",a8t="Window";function l9(e,t){return e&&e.expr?new zve({...e,...t}):new zve(t,e)}class zve{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...Ts(this.expr)?{func:!0}:{}}}}function u8t(e){return l9(e,{desc:!0})}function s_(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return l9(e,t?{expr:t,...r}:r)}function l8t(e,t,n){return l9(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function c8t(e){const t=n=>n;return t.toString=()=>e,t}function Vve(e,t){return t=t&&Ts(t.query)?t.query():t,t&&Ts(t.evaluate)?t.evaluate(null,e):e(t)}function LMe(e){return tl(e)&&(pi(e.all)||pi(e.matches)||pi(e.not)||pi(e.range))}function a3(e){return e&&Ts(e.toObject)?e.toObject():Ts(e)?{expr:String(e),func:!0}:pi(e)?e.map(a3):tl(e)?r9(e,t=>a3(t)):e}function Zre(e){return pi(e)?e.map(Zre):tl(e)?pi(e.verbs)?tie.from(e):pi(e.all)?OC():pi(e.range)?FFt(...e.range):pi(e.match)?MFt(RegExp(...e.match)):pi(e.not)?zFe(e.not.map(a3)):f8t(e):e}function f8t(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=s_(n):e.func===!0&&(t=n=c8t(n)),tl(e.window)){const{frame:r,peers:i}=e.window;t=n=l8t(n,r,i)}e.desc===!0&&(t=u8t(n))}return e===t?r9(e,r=>Zre(r)):t}function d8t(e){return pi(e)?e.map(h8t):e}function h8t(e){const t=[];return Uc(e).forEach(n=>{Vl(n)?t.push(n):gu(n)?t.push(s_(n,null)):tl(n)&&n.expr||Ts(n)?t.push(n):pr(`Invalid key value: ${n+""}`)}),t}function p8t(e){return pi(e)?e.map(m8t):e}function m8t(e,t){return t<2?Uc(e):e}function g8t(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(tl(r)&&!Ts(r))for(const i in r)t.push(r[i]);else n=Vl(r)?r:gu(r)?s_(n):Ts(r)?n:pr(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const y8t={[MMe]:zMe,[_h]:MC,[$Me]:E8t,[NI]:Gv,[J2]:S8t,[_5]:C8t,[Jre]:MC,[l1]:w8t};function v8t(e,t,n){return t===Xx?Hve(e):t===Z2?e.map(Hve):BMe(a3(e),t,n)}function BMe(e,t,n){return t===gd?e&&b8t(e,n):y8t[t](e)}function b8t(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?BMe(i,t[r]):i}return n}function x8t(e,t){return Hc({expr:e},{...t,ast:!0}).exprs[0]}function eie(e){return{type:ON,name:e}}function jMe(e){return{type:ON,index:e}}function Gv(e,t){if(gu(e))return x8t(e,t);if(e.expr){let n;if(e.field===!0?n=eie(e.expr):e.func===!0&&(n=Gv(e.expr,t)),n)return e.desc&&(n={type:r8t,expr:n}),e.window&&(n={type:a8t,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...Gv(e[n],t),as:n}))}function UMe(e){const t=s8t;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:MC(e.not)}:e.range?{type:t,operator:"range",arguments:MC(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:pr("Invalid input")}function w8t(e){return Uc(e).map(_8t).flat()}function _8t(e){return LMe(e)?UMe(e):Vl(e)?jMe(e):gu(e)?eie(e):tl(e)?Object.keys(e).map(t=>({type:ON,name:t,as:e[t]})):pr("Invalid input")}function zMe(e){return LMe(e)?UMe(e):Vl(e)?jMe(e):gu(e)?eie(e):tl(e)?Gv(e):pr("Invalid input")}function MC(e){return Uc(e).map(zMe).flat()}function E8t(e){return Vl(e)?e:Gv(e)}function S8t(e){return pi(e)?e.map(MC):Gv(e,{join:!0})}function C8t(e){return pi(e)?e.map((t,n)=>n<2?MC(t):Gv(t,{join:!0})):Gv(e,{join:!0})}function Hve(e){return e&&Ts(e.toAST)?e.toAST():e}class VMe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===J2?d8t(a):o===_5?p8t(a):o===Jre?g8t(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=CK[t.verb],r=(n.schema||[]).map(({name:i})=>Zre(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===Xx?Vve(n,o):s===Z2?o.map(a=>Vve(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=a3(this[n])}),t}toAST(){const t={type:o8t,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=v8t(this[n],r,i)}),t}}function Gi(e,t){return Object.assign((...n)=>new VMe(e,t,n),{schema:t})}const CK={count:Gi("count",[{name:"options",type:gd}]),derive:Gi("derive",[{name:"values",type:NI},{name:"options",type:gd,props:{before:l1,after:l1}}]),filter:Gi("filter",[{name:"criteria",type:NI}]),groupby:Gi("groupby",[{name:"keys",type:_h}]),orderby:Gi("orderby",[{name:"keys",type:Jre}]),relocate:Gi("relocate",[{name:"columns",type:l1},{name:"options",type:gd,props:{before:l1,after:l1}}]),rename:Gi("rename",[{name:"columns",type:l1}]),rollup:Gi("rollup",[{name:"values",type:NI}]),sample:Gi("sample",[{name:"size",type:$Me},{name:"options",type:gd,props:{weight:MMe}}]),select:Gi("select",[{name:"columns",type:l1}]),ungroup:Gi("ungroup"),unorder:Gi("unorder"),reify:Gi("reify"),dedupe:Gi("dedupe",[{name:"keys",type:_h,default:[]}]),impute:Gi("impute",[{name:"values",type:NI},{name:"options",type:gd,props:{expand:_h}}]),fold:Gi("fold",[{name:"values",type:_h},{name:"options",type:gd}]),pivot:Gi("pivot",[{name:"keys",type:_h},{name:"values",type:_h},{name:"options",type:gd}]),spread:Gi("spread",[{name:"values",type:_h},{name:"options",type:gd}]),unroll:Gi("unroll",[{name:"values",type:_h},{name:"options",type:gd,props:{drop:_h}}]),lookup:Gi("lookup",[{name:"table",type:Xx},{name:"on",type:J2},{name:"values",type:_h}]),join:Gi("join",[{name:"table",type:Xx},{name:"on",type:J2},{name:"values",type:_5},{name:"options",type:gd}]),cross:Gi("cross",[{name:"table",type:Xx},{name:"values",type:_5},{name:"options",type:gd}]),semijoin:Gi("semijoin",[{name:"table",type:Xx},{name:"on",type:J2}]),antijoin:Gi("antijoin",[{name:"table",type:Xx},{name:"on",type:J2}]),concat:Gi("concat",[{name:"tables",type:Z2}]),union:Gi("union",[{name:"tables",type:Z2}]),intersect:Gi("intersect",[{name:"tables",type:Z2}]),except:Gi("except",[{name:"tables",type:Z2}])};let tie=class HMe extends s4e{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new HMe(t.map(VMe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return qve(this,"toObject")}toJSON(){return this.toObject()}toAST(){return qve(this,"toAST",{type:i8t})}};function qve(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function T8t(e,t){return new tie(e._verbs.concat(t),e._params,e._table)}for(const e in CK){const t=CK[e];tie.prototype["__"+e]=function(n,...r){return T8t(n,t(...r))}}function uA(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function A8t(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function nie(e,t){const n=Qf();return t.forEach((r,i)=>{const s=gu(r)?r:i;if(s){const o=e.column(i)||pr(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function qMe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||pr("relocate requires a before or after option."),i&&s&&pr("relocate accepts only one of the before or after options."),t=uy(e,t);const o=[...uy(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),nie(e,u)}function VN(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function rie(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function D8t(e,t=0,n=e.length){let r=n?e[t++]:li;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function I8t(e,t=0,n=e.length){let r=n?e[t++]:li;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function $4(e){return QR(e)?e:+e}function k8t(e,t){const n=e.length;if(!n)return li;if((t=+t)<=0||n<2)return $4(e[0]);if(t>=1)return $4(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=$4(e[i]);return QR(s)?s:s+($4(e[i+1])-s)*(r-i)}class R8t{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:D8t(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:I8t(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(rie)),k8t(this._sorted,t)}}const E5=(e,t,n)=>uA(t,"{"+VN(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function N8t(e,t){const{ops:n,output:r}=P8t(e,t),i=e[0].fields,s=i.length,o=s===0?iie:s===1?O8t:s===2?F8t:pr("Unsupported field count: "+s);return new o(i,n,r,t)}function P8t(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=T4e(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class iie extends LFt{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new R8t),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class O8t extends iie{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=E5(n,s,"add"),this._rem=E5(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Gh(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Gh(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class F8t extends iie{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=E5(n,s,"add"),this._rem=E5(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Gh(i)&&Gh(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Gh(i)&&Gh(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function J_(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=lA(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function lA(e,t,n){if(!t.length)return n;const r=WMe(t),i=e.groups(),s=i?i.size:1;return n=n||VB(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=YMe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=GMe(e,o);o.write(a,n,0)}),n}function WMe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(N8t(r[i],t));return n}function GMe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function YMe(e,t,n){const{keys:r,size:i}=n,s=VB(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function KMe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function XMe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Wve=XMe(rie);function M8t(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?uA(["w","r","k"],"{"+VN(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i.map(b=>b.init());for(let b=0;b<f;++b)r[b].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,b=p.i0,_=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Wve.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=Wve.right(o,o[p.i1-1])));for(let w=0;w<d;++w){const S=i[w],T=a[w];for(let A=b;A<p.i0;++A)S.rem(T,s[A],e);for(let A=_;A<p.i1;++A)S.add(T,s[A],e);S.write(T,u,l)}return h(p,u,l),u}};return p}const $8t=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),L8t=e=>!!e.peers;function B8t(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=A4e(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function j8t(e,t,n,r={},i){const s=e.data(),o=U8t(i,s),a=o.length,u=uA(["r","d","op"],"{"+VN(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=z8t(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function U8t(e,t){const n={};return e.forEach(r=>{const i=$8t(r),s=L8t(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});jne(r.name)?a.push(r):u.push(B8t(r))}),Object.values(n).map(r=>M8t(t,r.frame,r.peers,r.winOps,WMe(r.aggOps,r.frame[0]!=null?-1:1)))}function z8t(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function V8t(e){return Une(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function sie(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Qf(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=H8t(r),c=e.isGrouped()?e.groups().size:1,f=lA(e,u,VB(r.length,()=>Array(c)));return l.length?j8t(e,a,n,f,l):q8t(e,a,n,f),e.create(o)}function H8t(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(V8t(s)?n:t).push(s)}return[t,n]}function q8t(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function W8t(e,t,n={}){const r=sie(e,Hc(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:qMe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function G8t(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const L4=2147483648,Y8t=4294967295;class QMe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&L4>>>t}set(t){this._bits[t>>5]|=L4>>>t}clear(t){this._bits[t>>5]&=~(L4>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&Y8t>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=L4>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function K8t(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new QMe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function X8t(e,t){const n=Hc({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=sie(e,n,{drop:!0}).column("p");r=s=>i[s]}return K8t(e,r)}function JMe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=J_(e,r,n),l=Qf(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(_=>{if(!a.has(_)){const w=l.add(_,[]);c.has(_)||(f.push(e.column(_)),d.push(w))}}),t.forEach(_=>{a.has(_)||(l.has(_)||l.add(_,[]),h.push(l.data[_]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(_,w)=>{for(let S=0;S<g;++S)d[S].length=m+w,d[S].fill(f[S].get(_),m,m+w)},b=p?(_,w)=>{for(let S=0;S<w;++S)p[_+S]=S}:()=>{};if(y===1){const _=u[0],w=h[0];e.scan((S,T)=>{const A=Uc(_(S,T)),k=Math.min(A.length,s);v(S,k);for(let I=0;I<k;++I)w[m+I]=A[I];b(m,k),m+=k})}else e.scan((_,w)=>{let S=0;const T=u.map(A=>{const k=Uc(A(_,w));return S=Math.min(Math.max(S,k.length),s),k});v(_,S);for(let A=0;A<y;++A){const k=h[A],I=T[A];for(let R=0;R<S;++R)k[m+R]=I[R]}b(m,S),m+=S});return e.create(l.new())}function Q8t(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=J_(e,r,n);return JMe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function mp(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Vl(o)?t.columnName(o):o,gu(o)?i.set(o,s_(o)):Ts(o)?uy(t,o).forEach(s):tl(o)?jFe(i,o):pr(`Invalid ${e} value: ${o+""}`)};return Uc(n).forEach(s),r.preparse&&r.preparse(i),Hc(i,{table:t,...r})}function J8t(e,t,n){return Q8t(e,mp("fold",e,t),n)}function Gve(e,t,n,r){const i=n&&n.length;return Z8t(i?e5t(e,n,r):e,t,i)}function Z8t(e,{names:t,exprs:n,ops:r},i){const s=J_(e,r,n),o=i?null:Qf(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Gh(p)?p:d(h)})}),i?e:e.create(o)}function e5t(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=e5(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Qf(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=e5(o.map((p,m)=>g=>g[m])),h=uA("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Yve(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else Yve(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function Yve(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function oie(e,{names:t,exprs:n,ops:r}){const i=Qf(),s=e.groups();return s&&KMe(i,s),t5t(t,n,s,lA(e,r),i),e.create(i.new())}function t5t(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function n5t(e,t,n={}){if(t=Hc(t,{table:e}),t.names.forEach(r=>e.column(r)?0:pr(`Invalid impute column ${Wm(r)}`)),n.expand){const r={preparse:r5t,aggronly:!0},i=mp("impute",e,n.expand,r),s=oie(e.ungroup(),i);return Gve(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Gve(e,t)}function r5t(e){e.forEach((t,n)=>t.field?e.set(n,p4e(t+"")):0)}function i5t(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function ZMe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function s5t(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function o5t(e,t){const n=["i","a","j","b"];return uA(n,"{"+VN(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function a5t(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Qf(),g=Array(p),y=Array(p);for(let _=0;_<r.length;++_)g[_]=m.add(r[_],[]),y[_]=i[_];const v=o5t(g,y);if((pi(n)?l5t:u5t)(v,n,o,c,a,f,l,h,u,d),s.left)for(let _=0;_<u;++_)l[_]||v(a[_],o,-1,c);if(s.right)for(let _=0;_<d;++_)h[_]||v(-1,o,f[_],c);return e.create(m.new())}function u5t(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function l5t(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,b=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,b=(S,T,A,k)=>e(A,k,S,T));const _=s5t(v,m,g),w=p.length;for(let S=0;S<w;++S){const T=p[S],A=_.get(d(T,f));if(A){const k=A.length;for(let I=0;I<k;++I){const R=A[I];b(T,f,v[R],m),y[R]=1}h[S]=1}}}function S5(e,t,n){const r=new Map;Uc(n).forEach((s,o)=>{s=Vl(s)?t.columnName(s):s,gu(s)?r.set(o,s_(s)):Ts(s)||tl(s)&&s.expr?r.set(o,s):pr(`Invalid ${e} key value: ${s+""}`)});const i=Hc(r,{table:t,aggregate:!1,window:!1});return e5(i.exprs,!0)}function c5t(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function aie(e,t,n){if(n)gu(n)?n=[n,n]:pi(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=c5t(e.columnNames(),t.columnNames());r.length||pr("Natural join requires shared column names."),n=[r,r]}return n}function e8e(e,t,n,r){return n.length!==r.length&&pr("Mismatched number of join keys"),[S5("join",e,n),S5("join",t,r)]}const f5t={aggregate:!1,window:!1},d5t={...f5t,index:1};function Kve(e,t,n,r,i={}){n=aie(e,t,n);const s={join:[e,t]};let o;if(pi(n)){const[a,u]=n.map(Uc);o=e8e(e,t,a,u),r||(r=h5t(e,a,u,i))}else o=Hc({on:n},s).exprs[0],r||(r=[OC(),OC()]);return a5t(e,t,o,p5t(e,t,r,s,i&&i.suffix),i)}function h5t(e,t,n,r){const i=[];t.forEach((o,a)=>gu(o)&&o===n[a]?i.push(o):0);const s=zFe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${Wm(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,OC()]:[OC(),s]}function p5t(e,t,n,r,i=[]){if(pi(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=mp("join",e,n[0],r)),u--&&(o=mp("join",t,n[1],d5t)),u--&&(a=Hc(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&Xve(s.names,l,i[0]||"_1"),i[1]!==""&&Xve(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Hc(n,r)}function Xve(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function m5t(e,t,n,r={}){const i=new QMe(e.totalRows());return(pi(n)?g5t:y5t)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function g5t(e,t,n,[r,i]){const s=ZMe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function y5t(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function Qve(e,t,n,r){n=aie(e,t,n);const i=pi(n)?e8e(e,t,...n.map(Uc)):Hc({on:n},{join:[e,t]}).exprs[0];return m5t(e,t,i,r)}function v5t(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Qf(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(li)));const l=ZMe(t,r),c=uA(["lr","rr","data"],"{"+VN(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),J_(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function b5t(e,t,n,r){return n=aie(e,t,n),v5t(e,t,[S5("lookup",e,n[0]),S5("lookup",t,n[1])],mp("lookup",t,r))}const TK=(e,t)=>e??t;function x5t(e,t,n,r={}){const{keys:i,keyColumn:s}=w5t(e,t,r),o=TK(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>lA(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(_5t(n,a,e.groups(),u))}function w5t(e,t,n){const r=n.limit>0?+n.limit:1/0,i=TK(n.sort,!0),s=TK(n.keySeparator,"_"),o=J_(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=lA(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function _5t({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Qf(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&KMe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function E5t(e,t,n,r){return x5t(e,mp("fold",e,t),mp("fold",e,n,{preparse:S5t,aggronly:!0}),r)}function S5t(e){e.forEach((t,n)=>t.field?e.set(n,f4e(t+"")):0)}function C5t(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),nie(e,uy(e,t,n))}function Jve(e,t){return oie(e,Hc(t,{table:e,aggronly:!0,window:!1}))}function T5t(e,t,n,r){return(t?r?D5t:A5t:r?k5t:I5t)(e.length,e,n,r)}function A5t(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*ZT()|0];return t}function D5t(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=XMe(rie).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*ZT())];return t}function I5t(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*ZT();s<e&&(t[s|0]=n[i])}return t}function k5t(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(ZT())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function R5t(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=ZT()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function N5t(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):T5t(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&R5t(u),e.reify(u)}function P5t(e,t,n={}){return N5t(e,O5t(e,t),F5t(e,n.weight),n)}const t8e=e=>t=>e.get(t)||0;function O5t(e,t){return Vl(t)?()=>t:t8e(oie(e,Hc({size:t},{table:e,window:!1})).column("size"))}function F5t(e,t){return t==null?null:(t=Vl(t)?e.columnName(t):t,t8e(gu(t)?e.column(t):sie(e,Hc({w:t},{table:e}),{drop:!0}).column("w")))}function M5t(e,t){return nie(e,uy(e,t))}function $5t(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=J_(e,r,n),l=Qf(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=L5t(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function L5t(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Uc(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(li));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function B5t(e,t,n){return $5t(e,mp("spread",e,t),n)}function j5t(e,t){return e.concat(t).dedupe()}function U5t(e,t,n){return JMe(e,mp("unroll",e,t),n&&n.drop?{...n,drop:mp("unroll",e,n.drop).names}:n)}function z5t(e,t){return e.create({groups:V5t(e,t)})}function V5t(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=J_(e,r,n);const o=e5(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function H5t(e,t){return z5t(e,mp("groupby",e,t))}function q5t(e,t){return e.create({order:t})}const W5t=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function G5t(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=Hc(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([Z8(p,{index:"a",op:o}),Z8(p,{index:"b",op:a})])},window:!1}),l=lA(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=W5t(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function Y5t(e,t){return q5t(e,K5t(e,t))}function K5t(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(tl(o)&&!Ts(o))for(const a in o)i(o[a]);else i(Vl(o)?s_(s,e.columnName(o)):gu(o)?s_(s):Ts(o)?s:pr(`Invalid orderby field: ${s+""}`))}),G5t(e,r)}function X5t(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Qf();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>li};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function Q5t(e,t){const n=Qf(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?YMe(e,t,r):[GMe(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function J5t(e){return e.isGrouped()?e.create({groups:null}):e}function Z5t(e){return e.isOrdered()?e.create({order:null}):e}const e$t={__antijoin:(e,t,n)=>Qve(e,t,n,{anti:!0}),__count:(e,t={})=>Jve(e,{[t.as||"count"]:d4e()}),__cross:(e,t,n,r)=>Kve(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:X5t,__dedupe:A8t,__derive:W8t,__except:G8t,__filter:X8t,__fold:J8t,__impute:n5t,__intersect:i5t,__join:Kve,__lookup:b5t,__pivot:E5t,__relocate:qMe,__rename:C5t,__rollup:Jve,__sample:P5t,__select:M5t,__semijoin:Qve,__spread:B5t,__union:j5t,__unroll:U5t,__groupby:H5t,__orderby:Y5t,__ungroup:J5t,__unorder:Z5t,__reduce:Q5t};Object.assign(hg.prototype,e$t);function n8e(e,t){return hg.from(e,t)}function RS(e){return l9(e,{escape:!0,toString(){pr("Escaped values can not be serialized.")}})}hg.prototype;var t$t="Expected a function",Zve=NaN,n$t="[object Symbol]",r$t=/^\s+|\s+$/g,i$t=/^[-+]0x[0-9a-f]+$/i,s$t=/^0b[01]+$/i,o$t=/^0o[0-7]+$/i,a$t=parseInt,u$t=typeof on=="object"&&on&&on.Object===Object&&on,l$t=typeof self=="object"&&self&&self.Object===Object&&self,c$t=u$t||l$t||Function("return this")(),f$t=Object.prototype,d$t=f$t.toString,h$t=Math.max,p$t=Math.min,kH=function(){return c$t.Date.now()};function m$t(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(t$t);t=ebe(t)||0,AK(n)&&(c=!!n.leading,f="maxWait"in n,s=f?h$t(ebe(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(S){var T=r,A=i;return r=i=void 0,l=S,o=e.apply(A,T),o}function p(S){return l=S,a=setTimeout(y,t),c?h(S):o}function m(S){var T=S-u,A=S-l,k=t-T;return f?p$t(k,s-A):k}function g(S){var T=S-u,A=S-l;return u===void 0||T>=t||T<0||f&&A>=s}function y(){var S=kH();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,d&&r?h(S):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function _(){return a===void 0?o:v(kH())}function w(){var S=kH(),T=g(S);if(r=arguments,i=this,u=S,T){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return w.cancel=b,w.flush=_,w}function AK(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function g$t(e){return!!e&&typeof e=="object"}function y$t(e){return typeof e=="symbol"||g$t(e)&&d$t.call(e)==n$t}function ebe(e){if(typeof e=="number")return e;if(y$t(e))return Zve;if(AK(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=AK(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(r$t,"");var n=s$t.test(e);return n||o$t.test(e)?a$t(e.slice(2),n?2:8):i$t.test(e)?Zve:+e}var v$t=m$t;const Th=l0(v$t);function r8e({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=N.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=N.useMemo(()=>kb(".2s"),[]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:E.jsx(ma,{children:E.jsx($i,{gap:3,children:E.jsx(tt,{size:"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),E.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>E.jsxs("g",{transform:`translate(${n}, ${a})`,children:[E.jsx("line",{x2:"-6",stroke:"currentColor"}),E.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),E.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const b$t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:r8e},Symbol.toStringTag,{value:"Module"})),RH=15;function i8e({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=N.useState([0,0]),[l,c]=N.useState(!1);return N.useEffect(()=>{const f=ei("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<RH&&Math.abs(t(g[r.y])-p[1])<RH);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),E.jsx("circle",{style:{cursor:l?"pointer":"default"},r:RH,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const x$t=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:i8e},Symbol.toStringTag,{value:"Module"})),Is={top:15,left:100,right:15,bottom:70};function DK({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=Df(),[c]=Df(),[f]=Df(),[d,h]=N.useState(!0),p=N.useMemo(()=>l-Is.left-Is.right,[l]),m=N.useMemo(()=>u-Is.top-Is.bottom,[u]),g=N.useMemo(()=>{const I=Array.from(new Set(s.map(R=>R[i.category])));return Nb(OB).domain(I)},[s,i.category]),{xMin:y,yMin:v,xMax:b,yMax:_}=N.useMemo(()=>{const I=s.map(U=>+U[i.x]).filter(U=>U!==null),[R,F]=PR(I),O=s.map(U=>+U[i.y]).filter(U=>U!==null),[L,H]=PR(O);return{xMin:R,xMax:F,yMin:L,yMax:H}},[s,i.x,i.y]),w=N.useMemo(()=>{const I=b-y;return p<=0?null:i.dataType==="date"?fne([Is.left,p+Is.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):el([Is.left,p+Is.left]).domain([y-I/10,b+I/10]).nice()},[i.dataType,p,b,y]),S=N.useMemo(()=>{const I=_-v;return m<=0?null:el([m+Is.top,Is.top]).domain([v-I/10,_+I/10]).nice()},[m,_,v]),T=N.useMemo(()=>{if(!w||!S)return()=>null;if(r==="Axis Selection"){const I=jNe().extent([[Is.left,Is.top+m-5],[Is.left+p,Is.top+m+5]]).on("brush end",F=>{F.sourceEvent!==void 0&&n([[F.selection[0],null],[F.selection[1],null]],w,S,F.mode)}),R=UNe().extent([[Is.left-5,Is.top],[Is.left+5,Is.top+m]]).on("brush end",F=>{F.sourceEvent!==void 0&&n([[null,F.selection[0]],[null,F.selection[1]]],w,S,F.mode)});return c.current&&f.current&&(ei(f.current).call(R),ei(c.current).call(I),t.hasBrush||(ei(f.current).call(R.move,[S(_),S(v)]),ei(c.current).call(I.move,[w(new Date("2015-01-02")),w(new Date("2015-12-31"))]),n([[w(new Date("2015-01-02")),S(_)],[w(new Date("2015-12-31")),S(v)]],w,S,"drag"))),()=>{ei(f.current).call(R.move,[S(_),S(v)]),ei(c.current).call(I.move,[w(new Date("2015-01-02")),w(new Date("2015-12-31"))]),n([[w(new Date("2015-01-02")),S(_)],[w(new Date("2015-12-31")),S(v)]],w,S,"clear")}}if(r==="Rectangular Selection"){const I=zNe().extent([[Is.left,Is.top],[Is.left+p,Is.top+m]]).on("brush",R=>{R.sourceEvent!==void 0&&n([[R.selection[0][0],R.selection[0][1]],[R.selection[1][0],R.selection[1][1]]],w,S,R.mode)}).on("end",R=>{R.selection===null&&R.sourceEvent!==void 0&&(ei(a.current).call(I.move,null),e(null))});return ei(a.current).call(I),()=>{ei(a.current).call(I.move,null),n([[null,null],[null,null]],w,S,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[w(y),S(_)],[w(b),S(v)]],w,S,null),()=>n([[w(y),S(_)],[w(b),S(v)]],w,S,"clear")):r==="Paintbrush Selection"?()=>n([[w(y),S(_)],[w(b),S(v)]],w,S,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,b,y,w,_,v,S]),A=N.useMemo(()=>o.length===0?null:new Set(o),[o]),k=N.useMemo(()=>!w||!S?null:s.map((I,R)=>{if(I[i.x]===null||I[i.y]===null)return null;const F=i.dataType==="date"?w(new Date(I[i.x])):w(I[i.x]);return E.jsx("circle",{opacity:A&&!A.has(I[i.ids])?.3:1,r:3,fill:A&&!A.has(I[i.ids])?"lightgray":g(I[i.category]),cx:F,cy:S(I[i.y])},R)}),[A,g,s,i.category,i.dataType,i.ids,i.x,i.y,w,S]);return N.useEffect(()=>{r==="Axis Selection"&&oNe(".handle").style("fill","darkgrey")},[t,r]),E.jsxs(Ys,{children:[E.jsxs($i,{children:[E.jsx(_n,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),T==null||T()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?E.jsx(GL,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:I=>h(I==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),E.jsxs($i,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[E.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[w&&S?E.jsxs("g",{children:[E.jsx(r8e,{yScale:S,label:i.y,horizontalPosition:Is.left,xRange:w.range()}),E.jsx($ne,{xScale:w,yRange:S.range(),isDate:i.dataType==="date",vertPosition:m+Is.top,label:i.x,ticks:w.ticks(i.brushType==="Axis Selection"?12:5).map(I=>({value:I.toString(),offset:w(I)}))})]}):null,k,E.jsx("g",{id:"brushXRef",ref:c}),E.jsx("g",{id:"brushYRef",ref:f}),w&&S&&r==="Paintbrush Selection"?E.jsx(i8e,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:w,yScale:S}):null]}),r==="Slider Selection"&&w&&S?E.jsxs(Ys,{style:{flexGrow:1},gap:50,children:[E.jsxs(Ys,{gap:0,children:[E.jsx(tt,{children:i.x}),E.jsx(uC,{minRange:1,label:null,min:w.domain()[0],max:w.domain()[1],labelAlwaysOn:!1,onChange:I=>{n([[w(I[0]),t.y1],[w(I[1]),t.y2]],w,S,"drag")},style:{width:"300px"},marks:w.ticks(5).map(I=>({value:I,label:I})),value:[w.invert(t.x1),w.invert(t.x2)]})]}),E.jsxs(Ys,{gap:0,children:[E.jsx(tt,{children:i.y}),E.jsx(uC,{minRange:1,label:null,min:S.domain()[0],max:S.domain()[1],onChange:I=>{n([[t.x1,S(I[1])],[t.x2,S(I[0])]],w,S,"drag")},style:{width:"300px"},marks:S.ticks(5).map(I=>({value:I,label:I})),value:[S.invert(t.y2),S.invert(t.y1)]})]})]}):null]})]})}const w$t=Object.freeze(Object.defineProperty({__proto__:null,Scatter:DK,default:DK},Symbol.toStringTag,{value:"Module"}));function tbe({parameters:e,setAnswer:t,provenanceState:n}){const[r,i]=N.useState(null),[s,o]=N.useState(n?n.all.brush||n.all:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]});N.useEffect(()=>{o(n?n.all.brush||n.all:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]})},[n]);const[a,u]=N.useState(null);N.useEffect(()=>{WNe(`./data/${e.dataset}.csv`).then(y=>{u(y)})},[e]);const l=N.useMemo(()=>a?n8e(a):null,[a]),{actions:c,trrack:f}=N.useMemo(()=>{const y=Ob.create(),v=y.register("brush",(T,A)=>(T.all={brush:A},T)),b=y.register("brushMove",(T,A)=>(T.all={brush:A},T)),_=y.register("brushResize",(T,A)=>(T.all={brush:A},T)),w=y.register("brushClear",(T,A)=>(T.all={brush:A},T)),S=QT({registry:y,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:v,brushMove:b,brushResize:_,clearBrush:w},trrack:S}},[]),d=N.useCallback((y,v)=>{y==="drag"?f.apply("Move Brush",c.brushMove(v)):y==="handle"&&f.apply("Brush",c.brush(v))},[c,f]),h=N.useMemo(()=>Th(d,100,{maxWait:100}),[d]),p=N.useCallback((y,v,b,_,w)=>{if(!v||!b)return;const S=v.invert(y[0][0]||s.x1),T=v.invert(y[1][0]||s.x2),A=b.invert(y[1][1]||s.y2),k=b.invert(y[0][1]||s.y1);let I=null;if(_==="clear")I=l;else if(w){const F=new Set(w);I=l.filter(RS(O=>F.has(O[e.ids])))}else e.brushType==="Axis Selection"?I=l.filter(RS(F=>new Date(F[e.x])>=new Date(S)&&new Date(F[e.x])<=new Date(T)&&F[e.y]>=A&&F[e.y]<=k)):I=l.filter(RS(F=>F[e.x]>=S&&F[e.x]<=T&&F[e.y]>=A&&F[e.y]<=k));const R={x1:y[0][0]||(s==null?void 0:s.x1)||0,x2:y[1][0]||(s==null?void 0:s.x2)||0,y1:y[0][1]||(s==null?void 0:s.y1)||0,y2:y[1][1]||(s==null?void 0:s.y2)||0,hasBrush:_!=="clear",ids:_!=="clear"?I==null?void 0:I.array("id"):[]};o(R),_==="drag"||_==="handle"?h(_,R):_==="clear"&&f.apply("Clear Brush",c.clearBrush(R)),i(I),t({status:!0,provenanceGraph:f.graph.backend,answers:{}})},[s,l,e,f,t,h,c]),m=N.useMemo(()=>r?r==null?void 0:r.groupby(e.category).count():l?l==null?void 0:l.groupby(e.category).count():null,[r,l,e.category]),g=N.useCallback(y=>{i(y)},[]);return a?E.jsxs(Ys,{gap:"xs",children:[E.jsx(DK,{brushedPoints:s==null?void 0:s.ids,data:a,params:e,brushType:e.brushType,setBrushedSpace:p,brushState:s,setFilteredTable:g}),E.jsx(rK,{data:a,parameters:e,barsTable:m})]}):E.jsx(Qc,{})}const _$t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:tbe,default:tbe},Symbol.toStringTag,{value:"Module"})),E$t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function s8e({data:e,xScale:t,yScale:n,height:r}){return E.jsx("g",{children:e.map((i,s)=>E.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const S$t=Object.freeze(Object.defineProperty({__proto__:null,Bars:s8e},Symbol.toStringTag,{value:"Module"}));function uie({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=el().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return E.jsxs("g",{children:[E.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>E.jsxs("g",{transform:`translate(0,${a})`,children:[E.jsx("line",{x2:`${r}`,stroke:"currentColor"}),E.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const C$t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:uie},Symbol.toStringTag,{value:"Module"}));function o8e({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=GT().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return E.jsxs("g",{children:[E.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>E.jsx("g",{transform:`translate(${a}, 10)`,children:E.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const T$t=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:o8e},Symbol.toStringTag,{value:"Module"})),A$t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function D$t({parameters:e}){const[n,r]=JT(A$t),i=GT().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=el().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return E.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:E.jsx("svg",{width:r.width,height:r.height,children:E.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[E.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:E.jsx(o8e,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),E.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:E.jsx(uie,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),E.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:E.jsx(s8e,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const I$t=Object.freeze(Object.defineProperty({__proto__:null,default:D$t},Symbol.toStringTag,{value:"Module"}));function a8e({data:e}){return E.jsx("g",{children:e.map(({bubble:t},n)=>E.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const k$t=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:a8e},Symbol.toStringTag,{value:"Module"}));function lie({positions:e}){return E.jsx("g",{children:e.map((t,n)=>E.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const R$t=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:lie},Symbol.toStringTag,{value:"Module"})),N$t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},P$t=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=HPe().size([t-10,n-10]).padding(1.5),o=CB(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},O$t=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function F$t({parameters:e}){const[t,n]=JT(N$t),r=P$t(e,n.width,n.height),i=O$t(r,e.selectedIndices);return E.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:E.jsx("svg",{width:n.width,height:n.height,children:E.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[E.jsx(a8e,{data:r}),E.jsx(lie,{positions:i})]})})})}const M$t=Object.freeze(Object.defineProperty({__proto__:null,default:F$t},Symbol.toStringTag,{value:"Module"}));function u8e({arcs:e}){return E.jsx("g",{children:e.map((t,n)=>E.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const $$t=Object.freeze(Object.defineProperty({__proto__:null,Slices:u8e},Symbol.toStringTag,{value:"Module"}));function l8e({positions:e}){return E.jsx("g",{children:e.map((t,n)=>E.jsx("g",{transform:`translate(${t.centroid()})`,children:E.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const L$t=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:l8e},Symbol.toStringTag,{value:"Module"})),B$t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},j$t=ORt().value(e=>e.value),OD=150;function U$t({parameters:e}){const[t,n]=JT(B$t),r=j$t(e.data),i=r.map(o=>LY().innerRadius(0).outerRadius(OD).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>LY().outerRadius(OD+10).innerRadius(OD+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return E.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:E.jsx("svg",{width:n.width,height:n.height,children:E.jsxs("g",{transform:`translate(${[n.marginLeft+OD,n.marginTop+OD].join(",")})`,children:[E.jsx(u8e,{arcs:i}),E.jsx(l8e,{positions:s})]})})})}const z$t=Object.freeze(Object.defineProperty({__proto__:null,default:U$t},Symbol.toStringTag,{value:"Module"}));function c8e({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=el().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return E.jsxs("g",{children:[E.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>E.jsxs("g",{transform:`translate(${a}, 0)`,children:[E.jsx("line",{y2:`${r}`,stroke:"currentColor"}),E.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const V$t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:c8e},Symbol.toStringTag,{value:"Module"}));function f8e({data:e,barWidth:t,yScale:n}){return E.jsx("g",{children:e.map((r,i)=>E.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const H$t=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:f8e},Symbol.toStringTag,{value:"Module"})),q$t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function W$t({parameters:e}){const[n,r]=JT(q$t),i=GT().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=el().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(b=>+b.value),g=p.reduce((b,_)=>Number(b)+Number(_))/100,y={};p.forEach((b,_)=>{y[String.fromCharCode(_+65)]=b/g});const v=[y];return n3t().keys(e.data.map(b=>b.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return E.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:E.jsx("svg",{width:r.width,height:r.height,children:E.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[E.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:E.jsx(c8e,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),E.jsx("g",{transform:"translate(0, 0)",children:E.jsx(uie,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),E.jsxs("g",{transform:"translate(0, 0)",children:[E.jsx(f8e,{data:c,barWidth:f,yScale:s}),E.jsx(lie,{positions:d})]})]})})})}const G$t=Object.freeze(Object.defineProperty({__proto__:null,default:W$t},Symbol.toStringTag,{value:"Module"}));function nbe({rankings:e}){return E.jsx("div",{style:{fontFamily:"sans-serif"},children:E.jsx("div",{children:e.map((t,n)=>E.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function Y$t({parameters:e,setAnswer:t}){const n=eh(),[r,i]=N.useState(""),{goToNextStep:s,isNextDisabled:o}=k3e(),a=N.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=N.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=N.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=N.useCallback(()=>{o||s()},[o,s]);N.useEffect(()=>{const h=Hrt([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),E.jsxs("div",{children:[E.jsxs(wf,{children:[E.jsxs(wf.Col,{span:2,children:[E.jsx(nbe,{rankings:a==="r1"?e.data.r1:e.data.r2}),E.jsx(_n,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?E.jsx(Dme,{}):"Select this ranking"}),l&&r&&E.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),E.jsxs(wf.Col,{span:2,children:[E.jsx(nbe,{rankings:a==="r1"?e.data.r2:e.data.r1}),E.jsx(_n,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?E.jsx(Dme,{}):"Select this ranking"}),l&&r&&E.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&E.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const K$t=Object.freeze(Object.defineProperty({__proto__:null,default:Y$t},Symbol.toStringTag,{value:"Module"})),X$t=N.createContext(null);function Vu(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}let HN=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const B4={decode:function(e,t){return Vu(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function d8e(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(d8e(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function rbe(e,t,n){const r=d8e(e,t||{});return n==null||n.appendChild(r),r}var Q$t=Object.freeze({__proto__:null,createElement:rbe,default:rbe});const J$t={fetchBlob:function(e,t,n){return Vu(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){Vu(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=f=>Vu(this,void 0,void 0,function*(){u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);s(d)}),c=()=>Vu(this,void 0,void 0,function*(){let f;try{f=yield o.read()}catch{return}f.done||(l(f.value),yield c())});c()})}(r.clone(),t),r.blob()})}};class Z$t extends HN{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const i=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=i}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return Vu(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}let IK=class kK extends HN{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const r=this.wrapper.getBoundingClientRect(),i=n.clientX-r.left,s=n.clientY-r.top;return[i/r.width,s/r.height]};if(this.wrapper.addEventListener("click",n=>{const[r,i]=t(n);this.emit("click",r,i)}),this.wrapper.addEventListener("dblclick",n=>{const[r,i]=t(n);this.emit("dblclick",r,i)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:r,clientWidth:i}=this.scrollContainer,s=n/r,o=(n+i)/r;this.emit("scroll",s,o,n,n+i)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=f=>{if(f.button!==o)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,h=f.clientY,p=!1;const m=Date.now(),g=w=>{if(w.preventDefault(),w.stopPropagation(),u&&Date.now()-m<a)return;const S=w.clientX,T=w.clientY,A=S-d,k=T-h;if(p||Math.abs(A)>s||Math.abs(k)>s){const I=t.getBoundingClientRect(),{left:R,top:F}=I;p||(r==null||r(d-R,h-F),p=!0),n(A,k,S-R,T-F),d=S,h=T}},y=w=>{if(p){const S=w.clientX,T=w.clientY,A=t.getBoundingClientRect(),{left:k,top:I}=A;i==null||i(S-k,T-I)}l()},v=w=>{w.relatedTarget&&w.relatedTarget!==document.documentElement||y(w)},b=w=>{p&&(w.stopPropagation(),w.preventDefault())},_=w=>{p&&w.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",y),document.addEventListener("pointerout",v),document.addEventListener("pointercancel",v),document.addEventListener("touchmove",_,{passive:!1}),document.addEventListener("click",b,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",y),document.removeEventListener("pointerout",v),document.removeEventListener("pointercancel",v),document.removeEventListener("touchmove",_),setTimeout(()=>{document.removeEventListener("click",b,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t,n;this.subscriptions.forEach(r=>r()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.forEach(r=>r()),this.unsubscribeOnScroll=[]}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,u)=>{const l=u*o;s.addColorStop(l,a)}),s}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,f=this.getPixelRatio(),d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,p=n.barRadius||0,m=u/(d+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let y=0,v=0,b=0;for(let _=0;_<=a;_++){const w=Math.round(_*m);if(w>y){const A=Math.round(v*c*i),k=A+Math.round(b*c*i)||1;let I=c-A;n.barAlign==="top"?I=0:n.barAlign==="bottom"&&(I=l-k),r[g](y*(d+h),I,d,k,p),y=w,v=0,b=0}const S=Math.abs(s[_]||0),T=Math.abs(o[_]||0);S>v&&(v=S),T>b&&(b=T)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*f);if(m>d){const y=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(d,y),d=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(d,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const u=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(s)}px`,o.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const f=l.cloneNode(),d=f.getContext("2d");d.drawImage(l,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,l.width,l.height),a.appendChild(f)}}renderMultiCanvas(t,n,r,i,s,o){const a=this.getPixelRatio(),{clientWidth:u}=this.scrollContainer,l=r/a;let c=Math.min(kK.MAX_CANVAS_WIDTH,u,l),f={};if(c===0)return;if(n.barWidth||n.barGap){const g=n.barWidth||.5,y=g+(n.barGap||g/2);c%y!=0&&(c=Math.floor(c/y)*y)}const d=g=>{if(g<0||g>=h||f[g])return;f[g]=!0;const y=g*c,v=Math.min(l-y,c);if(v<=0)return;const b=t.map(_=>{const w=Math.floor(y/l*_.length),S=Math.floor((y+v)/l*_.length);return _.slice(w,S)});this.renderSingleCanvas(b,n,v,i,y,s,o)},h=Math.ceil(l/c);if(!this.isScrollable){for(let g=0;g<h;g++)d(g);return}const p=this.scrollContainer.scrollLeft/l,m=Math.floor(p*h);if(d(m-1),d(m),d(m+1),h>1){const g=this.on("scroll",()=>{const{scrollLeft:y}=this.scrollContainer,v=Math.floor(y/l*h);Object.keys(f).length>kK.MAX_NODES&&(s.innerHTML="",o.innerHTML="",f={}),d(v-1),d(v),d(v+1)});this.unsubscribeOnScroll.push(g)}}renderChannel(t,n,r,i){var{overlay:s}=n,o=function(c,f){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&f.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)f.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(d[h[p]]=c[h[p]])}return d}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(o.height,o.splitChannels);a.style.height=`${u}px`,s&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,o,r,u,a,l)}render(t){return Vu(this,void 0,void 0,function*(){var n;this.timeouts.forEach(u=>u()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,s=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=s>i;const o=this.options.fillParent&&!this.isScrollable,a=(o?i:s)*r;if(this.wrapper.style.width=o?"100%":`${s}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let u=0;u<t.numberOfChannels;u++){const l=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[u]);this.renderChannel([t.getChannelData(u)],l,a,u)}else{const u=[t.getChannelData(0)];t.numberOfChannels>1&&u.push(t.getChannelData(1)),this.renderChannel(u,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(r=>r()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let i=r-n;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,u=r+s,l=s/2;if(this.isDragging)o+30>u?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>u)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?l:0));const c=o-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,f=c/i,d=(c+s)/i;this.emit("scroll",f,d,c,c+s)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return Vu(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(u=>{u?o(u):a(new Error("Could not export image"))},t,n)})))})}};IK.MAX_CANVAS_WIDTH=8e3,IK.MAX_NODES=10;class eLt extends HN{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class ibe extends HN{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Vu(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return Vu(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return Vu(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}}const tLt={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class u3 extends Z$t{static create(t){return new u3(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new ibe:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},tLt,t),this.timer=new eLt;const r=n?void 0:this.getMediaElement();this.renderer=new IK(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{var n;this.emit("error",(n=this.getMediaElement().error)!==null&&n!==void 0?n:new Error("Media error"))}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,r,i)=>{const s=this.getDuration();this.emit("scroll",t*s,n*s,r,i)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=B4.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=B4.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return Vu(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const u=l=>this.emit("loading",l);n=yield J$t.fetchBlob(t,u,a)}this.setSrc(t,n);const o=yield new Promise(a=>{const u=i||this.getDuration();u?a(u):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!t&&!n){const a=this.getMediaElement();a instanceof ibe&&(a.duration=o)}if(r)this.decodedData=B4.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield B4.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return Vu(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return Vu(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=a.length/n;for(let c=0;c<n;c++){const f=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let d=0;for(let h=0;h<f.length;h++){const p=f[h];Math.abs(p)>Math.abs(d)&&(d=p)}u.push(Math.round(d*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return Vu(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return Vu(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}u3.BasePlugin=class extends HN{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},u3.dom=Q$t;function nLt(e){return u3.create(e)}function rLt(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const sbe=e=>e.reduce((t,n)=>(t[n[0]]=n[1],t),{}),iLt=(e,t)=>{const n=Object.entries(e),r=Object.entries(t),i=n.filter(([o])=>r.findIndex(([a])=>a===o)===-1),s=r.filter(([o])=>n.findIndex(([a])=>a===o)===-1);return{disabled:sbe(i),enabled:sbe(s)}};function obe(e,t){const n={},r=[...t];for(;r.length>=1;){const i=r.shift();!!e[i.key]?n[i.key]=e[i.key]:n[i.key]=rLt(i)}return n}function sLt({container:e,plugins:t=[],onMount:n,...r}){const i=N.useRef(!1),[s,o]=N.useState({}),a=N.useRef([]),[u,l]=N.useState(null);return N.useEffect(()=>{if(!e)return;const c=e;if(i.current)return;i.current=!0;const f=obe(s,t);a.current=Object.keys(f);const d=nLt({container:e,...r,plugins:Object.values(f)});return n==null||n(d),o(f),l(d),()=>{c!==e&&d.destroy()}},[e]),N.useEffect(()=>{if(u){const c=obe(s,t),{disabled:f,enabled:d}=iLt(s,c);Object.keys(f).forEach(h=>{f[h].destroy()}),Object.keys(d).forEach(h=>{a.current.includes(h)||(console.log("register plugin",h,d[h]),u==null||u.registerPlugin(d[h]))}),a.current=Object.keys(d),o(c)}},[t]),[u,s,Object.values(s)]}function h8e({children:e,plugins:t=[],onMount:n,...r}){const i=sLt({plugins:t,onMount:n,...r});return yi.createElement(X$t.Provider,{value:i},e)}const p8e=({id:e="waveform",children:t})=>yi.createElement("div",{id:e},t);function NH(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}let m8e=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}},oLt=class extends m8e{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}};class aLt extends m8e{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const uLt=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class cie extends oLt{constructor(t){var n,r,i,s,o,a;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,continuousWaveform:(s=t.continuousWaveform)!==null&&s!==void 0&&s,renderRecordedAudio:(o=t.renderRecordedAudio)===null||o===void 0||o,mediaRecorderTimeslice:(a=t.mediaRecorderTimeslice)!==null&&a!==void 0?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new aLt,this.subscriptions.push(this.timer.on("tick",()=>{const u=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+u,this.emit("record-progress",this.duration)}))}static create(t){return new cie(t||{})}renderMicStream(t){var n;const r=new AudioContext,i=r.createMediaStreamSource(t),s=r.createAnalyser();i.connect(s),this.options.continuousWaveform&&(s.fftSize=32);const o=s.frequencyBinCount,a=new Float32Array(o);let u=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const l=setInterval(()=>{var c,f,d,h;if(!this.isWaveformPaused){if(s.getFloatTimeDomainData(a),this.options.scrollingWaveform){const p=Math.floor((this.options.scrollingWaveformWindow||0)*r.sampleRate),m=Math.min(p,this.dataWindow?this.dataWindow.length+o:o),g=new Float32Array(p);if(this.dataWindow){const y=Math.max(0,p-this.dataWindow.length);g.set(this.dataWindow.slice(-m+o),y)}g.set(a,p-o),this.dataWindow=g}else if(this.options.continuousWaveform){if(!this.dataWindow){const m=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((f=(c=this.wavesurfer)===null||c===void 0?void 0:c.getWidth())!==null&&f!==void 0?f:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(m)}let p=0;for(let m=0;m<o;m++){const g=Math.abs(a[m]);g>p&&(p=g)}if(u+1>this.dataWindow.length){const m=new Float32Array(2*this.dataWindow.length);m.set(this.dataWindow,0),this.dataWindow=m}this.dataWindow[u]=p,u++}else this.dataWindow=a;if(this.wavesurfer){const p=((h=(d=this.dataWindow)===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:p).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(m=>{console.error("Error rendering real-time recording data:",m)})}}},10);return{onDestroy:()=>{clearInterval(l),i==null||i.disconnect(),r==null||r.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(l),this.stopMic()}}}startMic(t){return NH(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return NH(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||uLt.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data),this.emit("record-data-available",o.data)};const s=o=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(o,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return NH(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}function g8e({width:e=70,height:t=36}){const n=N.useRef(null),r=N.useRef(null),[i,s]=N.useState(!1);N.useEffect(()=>{if(i&&n.current){const a=n.current.registerPlugin(cie.create({scrollingWaveform:!0,renderRecordedAudio:!1}));r.current=a,a.startRecording(),n.current.setOptions({height:t,waveColor:"#FA5252"})}return()=>{var a,u;i&&n.current&&((a=r.current)==null||a.stopRecording(),(u=r.current)==null||u.destroy(),n.current.destroy())}},[i]);const o=N.useCallback(a=>{n.current=a,s(!0)},[]);return E.jsx(Fe,{id:"waveformDiv",style:{width:`${e}px`,height:`${t}px`},children:E.jsx(h8e,{onMount:o,plugins:[],container:"#waveformDiv",height:t,children:E.jsx(p8e,{id:"waveform",height:t})})})}function abe({setAnswer:e}){return N.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(n=>{new MediaRecorder(n).start();const i=new AudioContext,s=i.createMediaStreamSource(n),o=i.createAnalyser();o.minDecibels=-45,s.connect(o);const a=o.frequencyBinCount,u=new Uint8Array(a);let l=!1;const c=()=>{if(!l){o.getByteFrequencyData(u);for(let f=0;f<a;f+=1)u[f]>0&&(l=!0,e({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(c)}};window.requestAnimationFrame(c)})},[e]),E.jsx(ma,{style:{height:"70%",width:"100%"},children:E.jsxs(Ys,{children:[E.jsx(tt,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),E.jsx(tt,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),E.jsx(tt,{ta:"center",style:{fontWeight:700},children:"If you are not comfortable or able to speak English during this study, please return the study."}),E.jsx(ma,{children:E.jsx(g8e,{height:200,width:400})})]})})}const lLt=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:abe,default:abe},Symbol.toStringTag,{value:"Module"}));function cLt(){return E.jsx("div",{children:"test react file"})}const fLt=Object.freeze(Object.defineProperty({__proto__:null,default:cLt},Symbol.toStringTag,{value:"Module"}));function dLt({parameters:e,setAnswer:t}){const{taskid:n,cx:r,cy:i}=e,s=N.useRef(null),o=10,a=N.useCallback(u=>{const l=ei("#Circle"),c=ei("#click_svg"),f=n8(u,c.node()),d=[+l.attr("cx"),+l.attr("cy")],h=`${Math.round(Math.sqrt((f[0]-d[0])**2+(f[1]-d[1])**2))}px`;t({status:!0,answers:{[n]:h}})},[t,n]);return E.jsx("div",{className:"Chart__wrapper",ref:s,onClick:a,style:{height:"650px"},children:E.jsx("svg",{id:"click_svg",width:400,height:400,children:E.jsx("circle",{id:"Circle",cx:r,cy:i,r:o,stroke:"black",strokeWidth:"2",fill:"white"})})})}const hLt=Object.freeze(Object.defineProperty({__proto__:null,default:dLt},Symbol.toStringTag,{value:"Module"}));function fie({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=N.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=N.useCallback(c=>(s?IN("%B"):kb(".2s"))(c),[s]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:E.jsx(ma,{children:E.jsx($i,{gap:3,children:E.jsx(tt,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?E.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>E.jsxs("g",{transform:`translate(${f}, ${n})`,children:[E.jsx("line",{y2:"6",stroke:"currentColor"}),o?E.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,E.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:E.jsx(ma,{children:E.jsx(xs,{withinPortal:!0,label:c,children:E.jsx(tt,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const pLt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:fie},Symbol.toStringTag,{value:"Module"}));function y8e({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=N.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:E.jsx(ma,{children:E.jsx($i,{gap:3,children:E.jsx(tt,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?E.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>E.jsxs("g",{transform:`translate(${n}, ${l})`,children:[E.jsx("line",{x2:"-6",stroke:"currentColor"}),s?E.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,E.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:E.jsx("foreignObject",{width:a,height:20,children:E.jsx($i,{style:{width:"100%",height:"100%"},justify:"right",children:E.jsx(tt,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const mLt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:y8e},Symbol.toStringTag,{value:"Module"})),cd={top:15,left:100,right:50,bottom:50};function RK({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=Df(),o=N.useMemo(()=>s-cd.left-cd.right,[s]),a=N.useMemo(()=>i-cd.top-cd.bottom,[i]),u=N.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Nb(OB).domain(d)},[n,t.category]),l=N.useMemo(()=>e?el([cd.left,o+cd.left]).domain([0,tp(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=N.useMemo(()=>e?GT([cd.top,a+cd.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=N.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:E.jsxs("g",{children:[E.jsx("rect",{x:cd.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-cd.left},h),E.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?E.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E.jsx(fie,{xScale:l,yRange:c.range(),vertPosition:a+cd.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?E.jsx(y8e,{yScale:c,horizontalPosition:cd.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):E.jsx(Qc,{})}const gLt=Object.freeze(Object.defineProperty({__proto__:null,Bar:RK,default:RK},Symbol.toStringTag,{value:"Module"}));function v8e({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=N.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=N.useMemo(()=>kb(".2s"),[]);return E.jsxs(E.Fragment,{children:[E.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:E.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:E.jsx(ma,{children:E.jsx($i,{gap:3,children:E.jsx(tt,{size:"14px",style:{color:"#878E95"},children:r})})})})}),E.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),E.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>E.jsxs("g",{transform:`translate(${n}, ${a})`,children:[E.jsx("line",{x2:"-6",stroke:"currentColor"}),E.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),E.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const yLt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:v8e},Symbol.toStringTag,{value:"Module"})),PH=15;function b8e({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=N.useState([0,0]),[l,c]=N.useState(!1);return N.useEffect(()=>{const f=ei("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<PH&&Math.abs(t(g[r.y])-p[1])<PH);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),E.jsx("circle",{style:{cursor:l?"pointer":"default"},r:PH,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const vLt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:b8e},Symbol.toStringTag,{value:"Module"})),ks={top:15,left:100,right:15,bottom:70};function NK({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=Df(),[c]=Df(),[f]=Df(),[d,h]=N.useState(!0),p=N.useMemo(()=>l-ks.left-ks.right,[l]),m=N.useMemo(()=>u-ks.top-ks.bottom,[u]),g=N.useMemo(()=>{const I=Array.from(new Set(s.map(R=>R[i.category])));return Nb(OB).domain(I)},[s,i.category]),{xMin:y,yMin:v,xMax:b,yMax:_}=N.useMemo(()=>{const I=s.map(U=>+U[i.x]).filter(U=>U!==null),[R,F]=PR(I),O=s.map(U=>+U[i.y]).filter(U=>U!==null),[L,H]=PR(O);return{xMin:R,xMax:F,yMin:L,yMax:H}},[s,i.x,i.y]),w=N.useMemo(()=>{const I=b-y;return p<=0?null:i.dataType==="date"?fne([ks.left,p+ks.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):el([ks.left,p+ks.left]).domain([y-I/10,b+I/10]).nice()},[i.dataType,p,b,y]),S=N.useMemo(()=>{const I=_-v;return m<=0?null:el([m+ks.top,ks.top]).domain([v-I/10,_+I/10]).nice()},[m,_,v]),T=N.useMemo(()=>{if(!w||!S)return()=>null;if(r==="Axis Selection"){const I=jNe().extent([[ks.left,ks.top+m-5],[ks.left+p,ks.top+m+5]]).on("brush end",F=>{F.sourceEvent!==void 0&&n([[F.selection[0],null],[F.selection[1],null]],w,S,F.mode)}),R=UNe().extent([[ks.left-5,ks.top],[ks.left+5,ks.top+m]]).on("brush end",F=>{F.sourceEvent!==void 0&&n([[null,F.selection[0]],[null,F.selection[1]]],w,S,F.mode)});return c.current&&f.current&&(ei(f.current).call(R),ei(c.current).call(I),t.hasBrush||(ei(f.current).call(R.move,[S(_),S(v)]),ei(c.current).call(I.move,[w(new Date("2015-01-02")),w(new Date("2015-12-31"))]),n([[w(new Date("2015-01-02")),S(_)],[w(new Date("2015-12-31")),S(v)]],w,S,"drag"))),()=>{ei(f.current).call(R.move,[S(_),S(v)]),ei(c.current).call(I.move,[w(new Date("2015-01-02")),w(new Date("2015-12-31"))]),n([[w(new Date("2015-01-02")),S(_)],[w(new Date("2015-12-31")),S(v)]],w,S,"clear")}}if(r==="Rectangular Selection"){const I=zNe().extent([[ks.left,ks.top],[ks.left+p,ks.top+m]]).on("brush",R=>{R.sourceEvent!==void 0&&n([[R.selection[0][0],R.selection[0][1]],[R.selection[1][0],R.selection[1][1]]],w,S,R.mode)}).on("end",R=>{R.selection===null&&R.sourceEvent!==void 0&&(ei(a.current).call(I.move,null),e(null))});return ei(a.current).call(I),()=>{ei(a.current).call(I.move,null),n([[null,null],[null,null]],w,S,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[w(y),S(_)],[w(b),S(v)]],w,S,null),()=>n([[w(y),S(_)],[w(b),S(v)]],w,S,"clear")):r==="Paintbrush Selection"?()=>n([[w(y),S(_)],[w(b),S(v)]],w,S,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,b,y,w,_,v,S]),A=N.useMemo(()=>o.length===0?null:new Set(o),[o]),k=N.useMemo(()=>!w||!S?null:s.map((I,R)=>{if(I[i.x]===null||I[i.y]===null)return null;const F=i.dataType==="date"?w(new Date(I[i.x])):w(I[i.x]);return E.jsx("circle",{opacity:A&&!A.has(I[i.ids])?.3:1,r:3,fill:A&&!A.has(I[i.ids])?"lightgray":g(I[i.category]),cx:F,cy:S(I[i.y])},R)}),[A,g,s,i.category,i.dataType,i.ids,i.x,i.y,w,S]);return N.useEffect(()=>{r==="Axis Selection"&&oNe(".handle").style("fill","darkgrey")},[t,r]),E.jsxs(Ys,{children:[E.jsxs($i,{children:[E.jsx(_n,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),T==null||T()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?E.jsx(GL,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:I=>h(I==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),E.jsxs($i,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[E.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[w&&S?E.jsxs("g",{children:[E.jsx(v8e,{yScale:S,label:i.y,horizontalPosition:ks.left,xRange:w.range()}),E.jsx(fie,{xScale:w,yRange:S.range(),isDate:i.dataType==="date",vertPosition:m+ks.top,label:i.x,ticks:w.ticks(i.brushType==="Axis Selection"?12:5).map(I=>({value:I.toString(),offset:w(I)}))})]}):null,k,E.jsx("g",{id:"brushXRef",ref:c}),E.jsx("g",{id:"brushYRef",ref:f}),w&&S&&r==="Paintbrush Selection"?E.jsx(b8e,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:w,yScale:S}):null]}),r==="Slider Selection"&&w&&S?E.jsxs(Ys,{style:{flexGrow:1},gap:50,children:[E.jsxs(Ys,{gap:0,children:[E.jsx(tt,{children:i.x}),E.jsx(uC,{minRange:1,label:null,min:w.domain()[0],max:w.domain()[1],labelAlwaysOn:!1,onChange:I=>{n([[w(I[0]),t.y1],[w(I[1]),t.y2]],w,S,"drag")},style:{width:"300px"},marks:w.ticks(5).map(I=>({value:I,label:I})),value:[w.invert(t.x1),w.invert(t.x2)]})]}),E.jsxs(Ys,{gap:0,children:[E.jsx(tt,{children:i.y}),E.jsx(uC,{minRange:1,label:null,min:S.domain()[0],max:S.domain()[1],onChange:I=>{n([[t.x1,S(I[1])],[t.x2,S(I[0])]],w,S,"drag")},style:{width:"300px"},marks:S.ticks(5).map(I=>({value:I,label:I})),value:[S.invert(t.y2),S.invert(t.y1)]})]})]}):null]})]})}const bLt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:NK,default:NK},Symbol.toStringTag,{value:"Module"}));function ube({parameters:e,setAnswer:t}){const[n,r]=N.useState(null),[i,s]=N.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=N.useState(null);N.useEffect(()=>{WNe(`../tutorial/react-and-randomization/data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=N.useMemo(()=>o?n8e(o):null,[o]),{actions:l,trrack:c}=N.useMemo(()=>{const g=Ob.create(),y=g.register("brush",(S,T)=>(S.all={brush:T},S)),v=g.register("brushMove",(S,T)=>(S.all={brush:T},S)),b=g.register("brushResize",(S,T)=>(S.all={brush:T},S)),_=g.register("brushClear",(S,T)=>(S.all={brush:T},S)),w=QT({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:b,clearBrush:_},trrack:w}},[]),f=N.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=N.useMemo(()=>Th(f,100,{maxWait:100}),[f]),h=N.useCallback((g,y,v,b,_)=>{if(!y||!v)return;const w=y.invert(g[0][0]||i.x1),S=y.invert(g[1][0]||i.x2),T=v.invert(g[1][1]||i.y2),A=v.invert(g[0][1]||i.y1);let k=null;if(b==="clear")k=u;else if(_){const R=new Set(_);k=u.filter(RS(F=>R.has(F[e.ids])))}else e.brushType==="Axis Selection"?k=u.filter(RS(R=>new Date(R[e.x])>=new Date(w)&&new Date(R[e.x])<=new Date(S)&&R[e.y]>=T&&R[e.y]<=A)):k=u.filter(RS(R=>R[e.x]>=w&&R[e.x]<=S&&R[e.y]>=T&&R[e.y]<=A));const I={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:b!=="clear",ids:b!=="clear"?k==null?void 0:k.array("id"):[]};s(I),b==="drag"||b==="handle"?d(b,I):b==="clear"&&c.apply("Clear Brush",l.clearBrush(I)),r(k),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=N.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=N.useCallback(g=>{r(g)},[]);return o?E.jsxs(Ys,{gap:"xs",children:[E.jsx(NK,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),E.jsx(RK,{data:o,parameters:e,barsTable:p})]}):E.jsx(Qc,{})}const xLt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:ube,default:ube},Symbol.toStringTag,{value:"Module"})),wLt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),_Lt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function x8e({data:e,xScale:t,yScale:n,strokeColor:r="currentColor",strokeWidth:i=2}){const s=gne().x(o=>t(o.x)).y(o=>n(o.y));return E.jsx("path",{d:s(e)||"",fill:"none",stroke:r,strokeWidth:i})}const ELt=Object.freeze(Object.defineProperty({__proto__:null,Line:x8e},Symbol.toStringTag,{value:"Module"}));function w8e({position:e,isNearCurve:t}){return e?E.jsx("circle",{cx:e.x,cy:e.y,r:t?2:20,fill:t?"#2563eb":"#666",stroke:t?"#2563eb":"#666",strokeWidth:1,opacity:.8,pointerEvents:"none"}):null}const SLt=Object.freeze(Object.defineProperty({__proto__:null,default:w8e},Symbol.toStringTag,{value:"Module"}));function _8e({point:e,xScale:t,yScale:n}){return e?E.jsxs(E.Fragment,{children:[E.jsx("circle",{cx:t(e.x),cy:n(e.y),r:4,fill:"#2563eb",pointerEvents:"none"}),E.jsx("line",{x1:t.range()[0],x2:t.range()[1],y1:n(e.y),y2:n(e.y),stroke:"#2563eb",strokeWidth:1,strokeDasharray:"4",opacity:.5,pointerEvents:"none"})]}):null}const CLt=Object.freeze(Object.defineProperty({__proto__:null,default:_8e},Symbol.toStringTag,{value:"Module"}));function E8e({data:e,width:t=600,height:n=400,margin:r={top:20,right:20,bottom:40,left:40},strokeColor:i="#2563eb",strokeWidth:s=2,axisLabels:o,xDomain:a,yDomain:u,onClick:l,onMouseMove:c,onMouseLeave:f,cursor:d,selectedPoint:h}){const p=N.useRef(null),m=N.useRef(null),{xScale:g,yScale:y}=N.useMemo(()=>{const b=a||[OR(e,T=>T.x)||0,tp(e,T=>T.x)||0],_=u||[OR(e,T=>T.y)||0,tp(e,T=>T.y)||0],w=el().domain(b).range([r.left,t-r.right]),S=el().domain(_).range([n-r.bottom,r.top]);return{xScale:w,yScale:S}},[e,a,u,r,t,n]);N.useEffect(()=>{p.current&&ei(p.current).call(TEt(g)).attr("transform",`translate(0,${n-r.bottom})`),m.current&&ei(m.current).call(AEt(y)).attr("transform",`translate(${r.left},0)`)},[g,y,r,n]);const v=()=>o?E.jsxs(E.Fragment,{children:[o.x&&E.jsx("text",{x:t/2,y:n-5,textAnchor:"middle",style:{fontSize:"12px",fill:"#666"},children:o.x}),o.y&&E.jsx("text",{x:-n/2,y:15,textAnchor:"middle",transform:"rotate(-90)",style:{fontSize:"12px",fill:"#666"},children:o.y})]}):null;return E.jsxs("svg",{width:t,height:n,onClick:b=>l==null?void 0:l(b,{xScale:g,yScale:y}),onMouseMove:b=>c==null?void 0:c(b,{xScale:g,yScale:y}),onMouseLeave:f,style:{cursor:"none"},children:[E.jsx(x8e,{data:e,xScale:g,yScale:y,strokeColor:i,strokeWidth:s}),E.jsx("g",{ref:p}),E.jsx("g",{ref:m}),v(),d&&E.jsx(w8e,{position:{x:d.x,y:d.y},isNearCurve:d.isNearCurve}),h&&E.jsx(_8e,{point:h,xScale:g,yScale:y})]})}const TLt=Object.freeze(Object.defineProperty({__proto__:null,Plot:E8e},Symbol.toStringTag,{value:"Module"}));var U1=(e=>(e.PDF_MEDIAN="pdf_median",e.PDF_MODE="pdf_mode",e.CDF_MEDIAN="cdf_median",e.CDF_MODE="cdf_mode",e))(U1||{});const ALt=Object.freeze(Object.defineProperty({__proto__:null,TaskType:U1},Symbol.toStringTag,{value:"Module"}));var S8e={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function DLt(e,t){if(C5(e,t))return e[t];throw typeof e[t]=="function"&&kLt(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function ILt(e,t,n){if(C5(e,t))return e[t]=n,n;throw new Error('No access to property "'+t+'"')}function C5(e,t){return!RLt(e)&&!Array.isArray(e)?!1:A5(NLt,t)?!0:!(t in Object.prototype||t in Function.prototype)}function kLt(e,t){return e==null||typeof e[t]!="function"||A5(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)?!1:A5(PLt,t)?!0:!(t in Object.prototype||t in Function.prototype)}function RLt(e){return typeof e=="object"&&e&&e.constructor===Object}var NLt={length:!0,name:!0},PLt={toString:!0,valueOf:!0,toLocaleString:!0};class OLt{constructor(t){this.wrappedObject=t,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(t=>this.has(t)).values()}get(t){return DLt(this.wrappedObject,t)}set(t,n){return ILt(this.wrappedObject,t,n),this}has(t){return C5(this.wrappedObject,t)&&t in this.wrappedObject}entries(){return FLt(this.keys(),t=>[t,this.get(t)])}forEach(t){for(var n of this.keys())t(this.get(n),n,this)}delete(t){C5(this.wrappedObject,t)&&delete this.wrappedObject[t]}clear(){for(var t of this.keys())this.delete(t)}get size(){return Object.keys(this.wrappedObject).length}}function FLt(e,t){return{next:()=>{var n=e.next();return n.done?n:{value:t(n.value),done:!1}}}}function bs(e){return typeof e=="number"}function Wo(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function MLt(e){return typeof e=="bigint"}function C8e(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function T8e(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function A8e(e){return e&&e.constructor.prototype.isUnit===!0||!1}function sg(e){return typeof e=="string"}var jo=Array.isArray;function aa(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function T5(e){return Array.isArray(e)||aa(e)}function $Lt(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function LLt(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function BLt(e){return e&&e.constructor.prototype.isRange===!0||!1}function die(e){return e&&e.constructor.prototype.isIndex===!0||!1}function jLt(e){return typeof e=="boolean"}function ULt(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function zLt(e){return e&&e.constructor.prototype.isHelp===!0||!1}function VLt(e){return typeof e=="function"}function HLt(e){return e instanceof Date}function qLt(e){return e instanceof RegExp}function hie(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!C8e(e)&&!T8e(e))}function WLt(e){return e?e instanceof Map||e instanceof OLt||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}function GLt(e){return e===null}function YLt(e){return e===void 0}function KLt(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function XLt(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function QLt(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function JLt(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function ZLt(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function eBt(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function tBt(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function nBt(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function rBt(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function iBt(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function sBt(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function oBt(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function aBt(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function uBt(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function lBt(e){return e&&e.isRelationalNode===!0&&e.constructor.prototype.isNode===!0||!1}function cBt(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function fBt(e){return e&&e.constructor.prototype.isChain===!0||!1}function hv(e){var t=typeof e;return t==="object"?e===null?"null":Wo(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}function Eo(e){var t=typeof e;if(t==="number"||t==="bigint"||t==="string"||t==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(n){return Eo(n)});if(e instanceof Date)return new Date(e.valueOf());if(Wo(e))return e;if(hie(e))return dBt(e,Eo);if(t==="function")return e;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(e,")"))}function dBt(e,t){var n={};for(var r in e)A5(e,r)&&(n[r]=t(e[r]));return n}function $C(e,t){var n,r,i;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(r=0,i=e.length;r<i;r++)if(!$C(e[r],t[r]))return!1;return!0}else{if(typeof e=="function")return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e)if(!(n in t)||!$C(e[n],t[n]))return!1;for(n in t)if(!(n in e))return!1;return!0}else return e===t}}function A5(e,t){return e&&Object.hasOwnProperty.call(e,t)}function hBt(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r],s=e[i];s!==void 0&&(n[i]=s)}return n}var pBt=["Matrix","Array"],mBt=["number","BigNumber","Fraction"],Z_=function(t){if(t)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(S8e)};aC(Z_,S8e,{MATRIX_OPTIONS:pBt,NUMBER_OPTIONS:mBt});function lbe(){return!0}function fd(){return!1}function t2(){}const cbe="Argument is not a typed-function.";function D8e(){function e(X){return typeof X=="object"&&X!==null&&X.constructor===Object}const t=[{name:"number",test:function(X){return typeof X=="number"}},{name:"string",test:function(X){return typeof X=="string"}},{name:"boolean",test:function(X){return typeof X=="boolean"}},{name:"Function",test:function(X){return typeof X=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(X){return X instanceof Date}},{name:"RegExp",test:function(X){return X instanceof RegExp}},{name:"Object",test:e},{name:"null",test:function(X){return X===null}},{name:"undefined",test:function(X){return X===void 0}}],n={name:"any",test:lbe,isAny:!0};let r,i,s=0,o={createCount:0};function a(X){const de=r.get(X);if(de)return de;let we='Unknown type "'+X+'"';const ae=X.toLowerCase();let he;for(he of i)if(he.toLowerCase()===ae){we+='. Did you mean "'+he+'" ?';break}throw new TypeError(we)}function u(X){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const we=de?a(de).index:i.length,ae=[];for(let Ee=0;Ee<X.length;++Ee){if(!X[Ee]||typeof X[Ee].name!="string"||typeof X[Ee].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const $e=X[Ee].name;if(r.has($e))throw new TypeError('Duplicate type name "'+$e+'"');ae.push($e),r.set($e,{name:$e,test:X[Ee].test,isAny:X[Ee].isAny,index:we+Ee,conversionsTo:[]})}const he=i.slice(we);i=i.slice(0,we).concat(ae).concat(he);for(let Ee=we+ae.length;Ee<i.length;++Ee)r.get(i[Ee]).index=Ee}function l(){r=new Map,i=[],s=0,u([n],!1)}l(),u(t);function c(){let X;for(X of i)r.get(X).conversionsTo=[];s=0}function f(X){const de=i.filter(we=>{const ae=r.get(we);return!ae.isAny&&ae.test(X)});return de.length?de:["any"]}function d(X){return X&&typeof X=="function"&&"_typedFunctionData"in X}function h(X,de,we){if(!d(X))throw new TypeError(cbe);const ae=we&&we.exact,he=Array.isArray(de)?de.join(","):de,Ee=_(he),$e=g(Ee);if(!ae||$e in X.signatures){const Xt=X._typedFunctionData.signatureMap.get($e);if(Xt)return Xt}const Be=Ee.length;let lt;if(ae){lt=[];let Xt;for(Xt in X.signatures)lt.push(X._typedFunctionData.signatureMap.get(Xt))}else lt=X._typedFunctionData.signatures;for(let Xt=0;Xt<Be;++Xt){const fn=Ee[Xt],Wt=[];let an;for(an of lt){const Sn=A(an.params,Xt);if(!(!Sn||fn.restParam&&!Sn.restParam)){if(!Sn.hasAny){const Mn=b(Sn);if(fn.types.some(ki=>!Mn.has(ki.name)))continue}Wt.push(an)}}if(lt=Wt,lt.length===0)break}let Je;for(Je of lt)if(Je.params.length<=Be)return Je;throw new TypeError("Signature not found (signature: "+(X.name||"unnamed")+"("+g(Ee,", ")+"))")}function p(X,de,we){return h(X,de,we).implementation}function m(X,de){const we=a(de);if(we.test(X))return X;const ae=we.conversionsTo;if(ae.length===0)throw new Error("There are no conversions to "+de+" defined.");for(let he=0;he<ae.length;he++)if(a(ae[he].from).test(X))return ae[he].convert(X);throw new Error("Cannot convert "+X+" to "+de)}function g(X){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return X.map(we=>we.name).join(de)}function y(X){const de=X.indexOf("...")===0,ae=(de?X.length>3?X.slice(3):"any":X).split("|").map(Be=>a(Be.trim()));let he=!1,Ee=de?"...":"";return{types:ae.map(function(Be){return he=Be.isAny||he,Ee+=Be.name+"|",{name:Be.name,typeIndex:Be.index,test:Be.test,isAny:Be.isAny,conversion:null,conversionIndex:-1}}),name:Ee.slice(0,-1),hasAny:he,hasConversion:!1,restParam:de}}function v(X){const de=X.types.map($e=>$e.name),we=G(de);let ae=X.hasAny,he=X.name;const Ee=we.map(function($e){const Be=a($e.from);return ae=Be.isAny||ae,he+="|"+$e.from,{name:$e.from,typeIndex:Be.index,test:Be.test,isAny:Be.isAny,conversion:$e,conversionIndex:$e.index}});return{types:X.types.concat(Ee),name:he,hasAny:ae,hasConversion:Ee.length>0,restParam:X.restParam}}function b(X){return X.typeSet||(X.typeSet=new Set,X.types.forEach(de=>X.typeSet.add(de.name))),X.typeSet}function _(X){const de=[];if(typeof X!="string")throw new TypeError("Signatures must be strings");const we=X.trim();if(we==="")return de;const ae=we.split(",");for(let he=0;he<ae.length;++he){const Ee=y(ae[he].trim());if(Ee.restParam&&he!==ae.length-1)throw new SyntaxError('Unexpected rest parameter "'+ae[he]+'": only allowed for the last parameter');if(Ee.types.length===0)return null;de.push(Ee)}return de}function w(X){const de=Te(X);return de?de.restParam:!1}function S(X){if(!X||X.types.length===0)return lbe;if(X.types.length===1)return a(X.types[0].name).test;if(X.types.length===2){const de=a(X.types[0].name).test,we=a(X.types[1].name).test;return function(he){return de(he)||we(he)}}else{const de=X.types.map(function(we){return a(we.name).test});return function(ae){for(let he=0;he<de.length;he++)if(de[he](ae))return!0;return!1}}}function T(X){let de,we,ae;if(w(X)){de=pe(X).map(S);const he=de.length,Ee=S(Te(X)),$e=function(Be){for(let lt=he;lt<Be.length;lt++)if(!Ee(Be[lt]))return!1;return!0};return function(lt){for(let Je=0;Je<de.length;Je++)if(!de[Je](lt[Je]))return!1;return $e(lt)&&lt.length>=he+1}}else return X.length===0?function(Ee){return Ee.length===0}:X.length===1?(we=S(X[0]),function(Ee){return we(Ee[0])&&Ee.length===1}):X.length===2?(we=S(X[0]),ae=S(X[1]),function(Ee){return we(Ee[0])&&ae(Ee[1])&&Ee.length===2}):(de=X.map(S),function(Ee){for(let $e=0;$e<de.length;$e++)if(!de[$e](Ee[$e]))return!1;return Ee.length===de.length})}function A(X,de){return de<X.length?X[de]:w(X)?Te(X):null}function k(X,de){const we=A(X,de);return we?b(we):new Set}function I(X){return X.conversion===null||X.conversion===void 0}function R(X,de){const we=new Set;return X.forEach(ae=>{const he=k(ae.params,de);let Ee;for(Ee of he)we.add(Ee)}),we.has("any")?["any"]:Array.from(we)}function F(X,de,we){let ae,he;const Ee=X||"unnamed";let $e=we,Be;for(Be=0;Be<de.length;Be++){const fn=[];if($e.forEach(Wt=>{const an=A(Wt.params,Be),Sn=S(an);(Be<Wt.params.length||w(Wt.params))&&Sn(de[Be])&&fn.push(Wt)}),fn.length===0){if(he=R($e,Be),he.length>0){const Wt=f(de[Be]);return ae=new TypeError("Unexpected type of argument in function "+Ee+" (expected: "+he.join(" or ")+", actual: "+Wt.join(" | ")+", index: "+Be+")"),ae.data={category:"wrongType",fn:Ee,index:Be,actual:Wt,expected:he},ae}}else $e=fn}const lt=$e.map(function(fn){return w(fn.params)?1/0:fn.params.length});if(de.length<Math.min.apply(null,lt))return he=R($e,Be),ae=new TypeError("Too few arguments in function "+Ee+" (expected: "+he.join(" or ")+", index: "+de.length+")"),ae.data={category:"tooFewArgs",fn:Ee,index:de.length,expected:he},ae;const Je=Math.max.apply(null,lt);if(de.length>Je)return ae=new TypeError("Too many arguments in function "+Ee+" (expected: "+Je+", actual: "+de.length+")"),ae.data={category:"tooManyArgs",fn:Ee,index:de.length,expectedLength:Je},ae;const Xt=[];for(let fn=0;fn<de.length;++fn)Xt.push(f(de[fn]).join("|"));return ae=new TypeError('Arguments of type "'+Xt.join(", ")+'" do not match any of the defined signatures of function '+Ee+"."),ae.data={category:"mismatch",actual:Xt},ae}function O(X){let de=i.length+1;for(let we=0;we<X.types.length;we++)I(X.types[we])&&(de=Math.min(de,X.types[we].typeIndex));return de}function L(X){let de=s+1;for(let we=0;we<X.types.length;we++)I(X.types[we])||(de=Math.min(de,X.types[we].conversionIndex));return de}function H(X,de){if(X.hasAny){if(!de.hasAny)return 1}else if(de.hasAny)return-1;if(X.restParam){if(!de.restParam)return 1}else if(de.restParam)return-1;if(X.hasConversion){if(!de.hasConversion)return 1}else if(de.hasConversion)return-1;const we=O(X)-O(de);if(we<0)return-1;if(we>0)return 1;const ae=L(X)-L(de);return ae<0?-1:ae>0?1:0}function U(X,de){const we=X.params,ae=de.params,he=Te(we),Ee=Te(ae),$e=w(we),Be=w(ae);if($e&&he.hasAny){if(!Be||!Ee.hasAny)return 1}else if(Be&&Ee.hasAny)return-1;let lt=0,Je=0,Xt;for(Xt of we)Xt.hasAny&&++lt,Xt.hasConversion&&++Je;let fn=0,Wt=0;for(Xt of ae)Xt.hasAny&&++fn,Xt.hasConversion&&++Wt;if(lt!==fn)return lt-fn;if($e&&he.hasConversion){if(!Be||!Ee.hasConversion)return 1}else if(Be&&Ee.hasConversion)return-1;if(Je!==Wt)return Je-Wt;if($e){if(!Be)return 1}else if(Be)return-1;const an=(we.length-ae.length)*($e?-1:1);if(an!==0)return an;const Sn=[];let Mn=0;for(let di=0;di<we.length;++di){const Li=H(we[di],ae[di]);Sn.push(Li),Mn+=Li}if(Mn!==0)return Mn;let ki;for(ki of Sn)if(ki!==0)return ki;return 0}function G(X){if(X.length===0)return[];const de=X.map(a);X.length>1&&de.sort((he,Ee)=>he.index-Ee.index);let we=de[0].conversionsTo;if(X.length===1)return we;we=we.concat([]);const ae=new Set(X);for(let he=1;he<de.length;++he){let Ee;for(Ee of de[he].conversionsTo)ae.has(Ee.from)||(we.push(Ee),ae.add(Ee.from))}return we}function Y(X,de){let we=de;if(X.some(he=>he.hasConversion)){const he=w(X),Ee=X.map(J);we=function(){const Be=[],lt=he?arguments.length-1:arguments.length;for(let Je=0;Je<lt;Je++)Be[Je]=Ee[Je](arguments[Je]);return he&&(Be[lt]=arguments[lt].map(Ee[lt])),de.apply(this,Be)}}let ae=we;if(w(X)){const he=X.length-1;ae=function(){return we.apply(this,ke(arguments,0,he).concat([ke(arguments,he)]))}}return ae}function J(X){let de,we,ae,he;const Ee=[],$e=[];switch(X.types.forEach(function(Be){Be.conversion&&(Ee.push(a(Be.conversion.from).test),$e.push(Be.conversion.convert))}),$e.length){case 0:return function(lt){return lt};case 1:return de=Ee[0],ae=$e[0],function(lt){return de(lt)?ae(lt):lt};case 2:return de=Ee[0],we=Ee[1],ae=$e[0],he=$e[1],function(lt){return de(lt)?ae(lt):we(lt)?he(lt):lt};default:return function(lt){for(let Je=0;Je<$e.length;Je++)if(Ee[Je](lt))return $e[Je](lt);return lt}}}function $(X){function de(we,ae,he){if(ae<we.length){const Ee=we[ae];let $e=[];if(Ee.restParam){const Be=Ee.types.filter(I);Be.length<Ee.types.length&&$e.push({types:Be,name:"..."+Be.map(lt=>lt.name).join("|"),hasAny:Be.some(lt=>lt.isAny),hasConversion:!1,restParam:!0}),$e.push(Ee)}else $e=Ee.types.map(function(Be){return{types:[Be],name:Be.name,hasAny:Be.isAny,hasConversion:Be.conversion,restParam:!1}});return Re($e,function(Be){return de(we,ae+1,he.concat([Be]))})}else return[he]}return de(X,0,[])}function j(X,de){const we=Math.max(X.length,de.length);for(let Be=0;Be<we;Be++){const lt=k(X,Be),Je=k(de,Be);let Xt=!1,fn;for(fn of Je)if(lt.has(fn)){Xt=!0;break}if(!Xt)return!1}const ae=X.length,he=de.length,Ee=w(X),$e=w(de);return Ee?$e?ae===he:he>=ae:$e?ae>=he:ae===he}function W(X){return X.map(de=>Ie(de)?Ct(de.referToSelf.callback):gt(de)?Ke(de.referTo.references,de.referTo.callback):de)}function B(X,de,we){const ae=[];let he;for(he of X){let Ee=we[he];if(typeof Ee!="number")throw new TypeError('No definition for referenced signature "'+he+'"');if(Ee=de[Ee],typeof Ee!="function")return!1;ae.push(Ee)}return ae}function q(X,de,we){const ae=W(X),he=new Array(ae.length).fill(!1);let Ee=!0;for(;Ee;){Ee=!1;let $e=!0;for(let Be=0;Be<ae.length;++Be){if(he[Be])continue;const lt=ae[Be];if(Ie(lt))ae[Be]=lt.referToSelf.callback(we),ae[Be].referToSelf=lt.referToSelf,he[Be]=!0,$e=!1;else if(gt(lt)){const Je=B(lt.referTo.references,ae,de);Je?(ae[Be]=lt.referTo.callback.apply(this,Je),ae[Be].referTo=lt.referTo,he[Be]=!0,$e=!1):Ee=!0}}if($e&&Ee)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return ae}function Z(X){const de=/\bthis(\(|\.signatures\b)/;Object.keys(X).forEach(we=>{const ae=X[we];if(de.test(ae.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function re(X,de){if(o.createCount++,Object.keys(de).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&Z(de);const we=[],ae=[],he={},Ee=[];let $e;for($e in de){if(!Object.prototype.hasOwnProperty.call(de,$e))continue;const un=_($e);if(!un)continue;we.forEach(function(_i){if(j(_i,un))throw new TypeError('Conflicting signatures "'+g(_i)+'" and "'+g(un)+'".')}),we.push(un);const Br=ae.length;ae.push(de[$e]);const Pi=un.map(v);let Ds;for(Ds of $(Pi)){const _i=g(Ds);Ee.push({params:Ds,name:_i,fn:Br}),Ds.every(ns=>!ns.hasConversion)&&(he[_i]=Br)}}Ee.sort(U);const Be=q(ae,he,ir);let lt;for(lt in he)Object.prototype.hasOwnProperty.call(he,lt)&&(he[lt]=Be[he[lt]]);const Je=[],Xt=new Map;for(lt of Ee)Xt.has(lt.name)||(lt.fn=Be[lt.fn],Je.push(lt),Xt.set(lt.name,lt));const fn=Je[0]&&Je[0].params.length<=2&&!w(Je[0].params),Wt=Je[1]&&Je[1].params.length<=2&&!w(Je[1].params),an=Je[2]&&Je[2].params.length<=2&&!w(Je[2].params),Sn=Je[3]&&Je[3].params.length<=2&&!w(Je[3].params),Mn=Je[4]&&Je[4].params.length<=2&&!w(Je[4].params),ki=Je[5]&&Je[5].params.length<=2&&!w(Je[5].params),di=fn&&Wt&&an&&Sn&&Mn&&ki;for(let un=0;un<Je.length;++un)Je[un].test=T(Je[un].params);const Li=fn?S(Je[0].params[0]):fd,As=Wt?S(Je[1].params[0]):fd,Lr=an?S(Je[2].params[0]):fd,ls=Sn?S(Je[3].params[0]):fd,ll=Mn?S(Je[4].params[0]):fd,Fo=ki?S(Je[5].params[0]):fd,Ha=fn?S(Je[0].params[1]):fd,Rr=Wt?S(Je[1].params[1]):fd,Ri=an?S(Je[2].params[1]):fd,hi=Sn?S(Je[3].params[1]):fd,Vs=Mn?S(Je[4].params[1]):fd,ri=ki?S(Je[5].params[1]):fd;for(let un=0;un<Je.length;++un)Je[un].implementation=Y(Je[un].params,Je[un].fn);const Ni=fn?Je[0].implementation:t2,ve=Wt?Je[1].implementation:t2,ce=an?Je[2].implementation:t2,_e=Sn?Je[3].implementation:t2,Ue=Mn?Je[4].implementation:t2,je=ki?Je[5].implementation:t2,Dt=fn?Je[0].params.length:-1,Ht=Wt?Je[1].params.length:-1,bn=an?Je[2].params.length:-1,rr=Sn?Je[3].params.length:-1,mr=Mn?Je[4].params.length:-1,jn=ki?Je[5].params.length:-1,Ar=di?6:0,ii=Je.length,dn=Je.map(un=>un.test),Dr=Je.map(un=>un.implementation),Qr=function(){for(let Br=Ar;Br<ii;Br++)if(dn[Br](arguments))return Dr[Br].apply(this,arguments);return o.onMismatch(X,arguments,Je)};function ir(un,Br){return arguments.length===Dt&&Li(un)&&Ha(Br)?Ni.apply(this,arguments):arguments.length===Ht&&As(un)&&Rr(Br)?ve.apply(this,arguments):arguments.length===bn&&Lr(un)&&Ri(Br)?ce.apply(this,arguments):arguments.length===rr&&ls(un)&&hi(Br)?_e.apply(this,arguments):arguments.length===mr&&ll(un)&&Vs(Br)?Ue.apply(this,arguments):arguments.length===jn&&Fo(un)&&ri(Br)?je.apply(this,arguments):Qr.apply(this,arguments)}try{Object.defineProperty(ir,"name",{value:X})}catch{}return ir.signatures=he,ir._typedFunctionData={signatures:Je,signatureMap:Xt},ir}function xe(X,de,we){throw F(X,de,we)}function pe(X){return ke(X,0,X.length-1)}function Te(X){return X[X.length-1]}function ke(X,de,we){return Array.prototype.slice.call(X,de,we)}function it(X,de){for(let we=0;we<X.length;we++)if(de(X[we]))return X[we]}function Re(X,de){return Array.prototype.concat.apply([],X.map(de))}function ut(){const X=pe(arguments).map(we=>g(_(we))),de=Te(arguments);if(typeof de!="function")throw new TypeError("Callback function expected as last argument");return Ke(X,de)}function Ke(X,de){return{referTo:{references:X,callback:de}}}function Ct(X){if(typeof X!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:X}}}function gt(X){return X&&typeof X.referTo=="object"&&Array.isArray(X.referTo.references)&&typeof X.referTo.callback=="function"}function Ie(X){return X&&typeof X.referToSelf=="object"&&typeof X.referToSelf.callback=="function"}function Ve(X,de){if(!X)return de;if(de&&de!==X){const we=new Error("Function names do not match (expected: "+X+", actual: "+de+")");throw we.data={actual:de,expected:X},we}return X}function ft(X){let de;for(const we in X)Object.prototype.hasOwnProperty.call(X,we)&&(d(X[we])||typeof X[we].signature=="string")&&(de=Ve(de,X[we].name));return de}function _t(X,de){let we;for(we in de)if(Object.prototype.hasOwnProperty.call(de,we)){if(we in X&&de[we]!==X[we]){const ae=new Error('Signature "'+we+'" is defined twice');throw ae.data={signature:we,sourceFunction:de[we],destFunction:X[we]},ae}X[we]=de[we]}}const Mt=o;o=function(X){const de=typeof X=="string",we=de?1:0;let ae=de?X:"";const he={};for(let Ee=we;Ee<arguments.length;++Ee){const $e=arguments[Ee];let Be={},lt;if(typeof $e=="function"?(lt=$e.name,typeof $e.signature=="string"?Be[$e.signature]=$e:d($e)&&(Be=$e.signatures)):e($e)&&(Be=$e,de||(lt=ft($e))),Object.keys(Be).length===0){const Je=new TypeError("Argument to 'typed' at index "+Ee+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Je.data={index:Ee,argument:$e},Je}de||(ae=Ve(ae,lt)),_t(he,Be)}return re(ae||"",he)},o.create=D8e,o.createCount=Mt.createCount,o.onMismatch=xe,o.throwMismatchError=xe,o.createError=F,o.clear=l,o.clearConversions=c,o.addTypes=u,o._findType=a,o.referTo=ut,o.referToSelf=Ct,o.convert=m,o.findSignature=h,o.find=p,o.isTypedFunction=d,o.warnAgainstDeprecatedThis=!0,o.addType=function(X,de){let we="any";de!==!1&&r.has("Object")&&(we="Object"),o.addTypes([X],we)};function st(X){if(!X||typeof X.from!="string"||typeof X.to!="string"||typeof X.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(X.to===X.from)throw new SyntaxError('Illegal to define conversion from "'+X.from+'" to itself.')}return o.addConversion=function(X){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};st(X);const we=a(X.to),ae=we.conversionsTo.find(he=>he.from===X.from);if(ae)if(de&&de.override)o.removeConversion({from:ae.from,to:X.to,convert:ae.convert});else throw new Error('There is already a conversion from "'+X.from+'" to "'+we.name+'"');we.conversionsTo.push({from:X.from,convert:X.convert,index:s++})},o.addConversions=function(X,de){X.forEach(we=>o.addConversion(we,de))},o.removeConversion=function(X){st(X);const de=a(X.to),we=it(de.conversionsTo,he=>he.from===X.from);if(!we)throw new Error("Attempt to remove nonexistent conversion from "+X.from+" to "+X.to);if(we.convert!==X.convert)throw new Error("Conversion to remove does not match existing conversion");const ae=de.conversionsTo.indexOf(we);de.conversionsTo.splice(ae,1)},o.resolve=function(X,de){if(!d(X))throw new TypeError(cbe);const we=X._typedFunctionData.signatures;for(let ae=0;ae<we.length;++ae)if(we[ae].test(de))return we[ae];return null},o}const D5=D8e();function ni(e,t,n,r){function i(s){var o=hBt(s,t.map(vBt));return gBt(e,t,s),n(o)}return i.isFactory=!0,i.fn=e,i.dependencies=t.slice().sort(),r&&(i.meta=r),i}function gBt(e,t,n){var r=t.filter(s=>!yBt(s)).every(s=>n[s]!==void 0);if(!r){var i=t.filter(s=>n[s]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(i.map(s=>'"'.concat(s,'"')).join(", "),"."))}}function yBt(e){return e&&e[0]==="?"}function vBt(e){return e&&e[0]==="?"?e.slice(1):e}function Gs(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}function OH(e,t,n){var r={2:"0b",8:"0o",16:"0x"},i=r[t],s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Gs(n))throw new Error("size must be an integer");if(e>2**(n-1)-1||e<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!Gs(e))throw new Error("Value must be an integer");e<0&&(e=e+2**n),s="i".concat(n)}var o="";return e<0&&(e=-e,o="-"),"".concat(o).concat(i).concat(e.toString(t)).concat(s)}function PK(e,t){if(typeof t=="function")return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var{notation:n,precision:r,wordSize:i}=I8e(t);switch(n){case"fixed":return xBt(e,r);case"exponential":return k8e(e,r);case"engineering":return bBt(e,r);case"bin":return OH(e,2,i);case"oct":return OH(e,8,i);case"hex":return OH(e,16,i);case"auto":return wBt(e,r,t).replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],o=arguments[4];return s!=="."?s+o:o});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function I8e(e){var t="auto",n,r;if(e!==void 0)if(bs(e))n=e;else if(Wo(e))n=e.toNumber();else if(hie(e))e.precision!==void 0&&(n=fbe(e.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),e.wordSize!==void 0&&(r=fbe(e.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),e.notation&&(t=e.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:t,precision:n,wordSize:r}}function c9(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],r=t[2],i=parseFloat(t[4]||"0"),s=r.indexOf(".");i+=s!==-1?s-1:r.length-1;var o=r.replace(".","").replace(/^0*/,function(a){return i-=a.length,""}).replace(/0*$/,"").split("").map(function(a){return parseInt(a)});return o.length===0&&(o.push(0),i++),{sign:n,coefficients:o,exponent:i}}function bBt(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=c9(e),r=f9(n,t),i=r.exponent,s=r.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(bs(t))for(;t>s.length||i-o+1>s.length;)s.push(0);else for(var a=Math.abs(i-o)-(s.length-1),u=0;u<a;u++)s.push(0);for(var l=Math.abs(i-o),c=1;l>0;)c++,l--;var f=s.slice(c).join(""),d=bs(t)&&f.length||f.match(/[1-9]/)?"."+f:"",h=s.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+o.toString();return r.sign+h}function xBt(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=c9(e),r=typeof t=="number"?f9(n,n.exponent+1+t):n,i=r.coefficients,s=r.exponent+1,o=s+(t||0);return i.length<o&&(i=i.concat(NS(o-i.length))),s<0&&(i=NS(-s+1).concat(i),s=1),s<i.length&&i.splice(s,0,s===0?"0.":"."),r.sign+i.join("")}function k8e(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=c9(e),r=t?f9(n,t):n,i=r.coefficients,s=r.exponent;i.length<t&&(i=i.concat(NS(t-i.length)));var o=i.shift();return r.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s}function wBt(e,t,n){if(isNaN(e)||!isFinite(e))return String(e);var r=dbe(n==null?void 0:n.lowerExp,-3),i=dbe(n==null?void 0:n.upperExp,5),s=c9(e),o=t?f9(s,t):s;if(o.exponent<r||o.exponent>=i)return k8e(e,t);var a=o.coefficients,u=o.exponent;a.length<t&&(a=a.concat(NS(t-a.length))),a=a.concat(NS(u-a.length+1+(a.length<t?t-a.length:0))),a=NS(-u).concat(a);var l=u>0?u:0;return l<a.length-1&&a.splice(l+1,0,"."),o.sign+a.join("")}function f9(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},r=n.coefficients;t<=0;)r.unshift(0),n.exponent++,t++;if(r.length>t){var i=r.splice(t,r.length-t);if(i[0]>=5){var s=t-1;for(r[s]++;r[s]===10;)r.pop(),s===0&&(r.unshift(0),n.exponent++,s++),s--,r[s]++}}return n}function NS(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}function _Bt(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function I5(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(e)||isNaN(t)?!1:!isFinite(e)||!isFinite(t)?e===t:e===t?!0:Math.abs(e-t)<=Math.max(n*Math.max(Math.abs(e),Math.abs(t)),r)}function EBt(e,t){var n=e>0?!0:e<0?!1:1/e===1/0,r=t>0?!0:t<0?!1:1/t===1/0;return n^r?-e:e}function fbe(e,t){if(bs(e))return e;if(Wo(e))return e.toNumber();t()}function dbe(e,t){return bs(e)?e:Wo(e)?e.toNumber():t}var R8e=function(){return R8e=D5.create,D5},SBt=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],CBt=ni("typed",SBt,function(t){var{BigNumber:n,Complex:r,DenseMatrix:i,Fraction:s}=t,o=R8e();return o.clear(),o.addTypes([{name:"number",test:bs},{name:"Complex",test:C8e},{name:"BigNumber",test:Wo},{name:"bigint",test:MLt},{name:"Fraction",test:T8e},{name:"Unit",test:A8e},{name:"identifier",test:a=>/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(a)},{name:"string",test:sg},{name:"Chain",test:fBt},{name:"Array",test:jo},{name:"Matrix",test:aa},{name:"DenseMatrix",test:$Lt},{name:"SparseMatrix",test:LLt},{name:"Range",test:BLt},{name:"Index",test:die},{name:"boolean",test:jLt},{name:"ResultSet",test:ULt},{name:"Help",test:zLt},{name:"function",test:VLt},{name:"Date",test:HLt},{name:"RegExp",test:qLt},{name:"null",test:GLt},{name:"undefined",test:YLt},{name:"AccessorNode",test:KLt},{name:"ArrayNode",test:XLt},{name:"AssignmentNode",test:QLt},{name:"BlockNode",test:JLt},{name:"ConditionalNode",test:ZLt},{name:"ConstantNode",test:eBt},{name:"FunctionNode",test:nBt},{name:"FunctionAssignmentNode",test:tBt},{name:"IndexNode",test:rBt},{name:"Node",test:iBt},{name:"ObjectNode",test:sBt},{name:"OperatorNode",test:oBt},{name:"ParenthesisNode",test:aBt},{name:"RangeNode",test:uBt},{name:"RelationalNode",test:lBt},{name:"SymbolNode",test:cBt},{name:"Map",test:WLt},{name:"Object",test:hie}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(u){if(n||j4(u),_Bt(u)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+u+"). Use function bignumber(x) to convert to BigNumber.");return new n(u)}},{from:"number",to:"Complex",convert:function(u){return r||U4(u),new r(u,0)}},{from:"BigNumber",to:"Complex",convert:function(u){return r||U4(u),new r(u.toNumber(),0)}},{from:"bigint",to:"number",convert:function(u){if(u>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+u+")");return Number(u)}},{from:"bigint",to:"BigNumber",convert:function(u){return n||j4(u),new n(u.toString())}},{from:"bigint",to:"Fraction",convert:function(u){return s||z4(u),new s(u)}},{from:"Fraction",to:"BigNumber",convert:function(u){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(u){return r||U4(u),new r(u.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(u){s||z4(u);var l=new s(u);if(l.valueOf()!==u)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+u+"). Use function fraction(x) to convert to Fraction.");return l}},{from:"string",to:"number",convert:function(u){var l=Number(u);if(isNaN(l))throw new Error('Cannot convert "'+u+'" to a number');return l}},{from:"string",to:"BigNumber",convert:function(u){n||j4(u);try{return new n(u)}catch{throw new Error('Cannot convert "'+u+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(u){try{return BigInt(u)}catch{throw new Error('Cannot convert "'+u+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(u){s||z4(u);try{return new s(u)}catch{throw new Error('Cannot convert "'+u+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(u){r||U4(u);try{return new r(u)}catch{throw new Error('Cannot convert "'+u+'" to Complex')}}},{from:"boolean",to:"number",convert:function(u){return+u}},{from:"boolean",to:"BigNumber",convert:function(u){return n||j4(u),new n(+u)}},{from:"boolean",to:"bigint",convert:function(u){return BigInt(+u)}},{from:"boolean",to:"Fraction",convert:function(u){return s||z4(u),new s(+u)}},{from:"boolean",to:"string",convert:function(u){return String(u)}},{from:"Array",to:"Matrix",convert:function(u){return i||TBt(),new i(u)}},{from:"Matrix",to:"Array",convert:function(u){return u.valueOf()}}]),o.onMismatch=(a,u,l)=>{var c=o.createError(a,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&T5(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},o.onMismatch=(a,u,l)=>{var c=o.createError(a,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&T5(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},o});function j4(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function U4(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function TBt(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function z4(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var OK=9e15,Bb=1e9,FK="0123456789abcdef",k5="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",R5="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",MK={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:OK,crypto:!1},N8e,Sg,Gn=!0,d9="[DecimalError] ",Yv=d9+"Invalid argument: ",P8e=d9+"Precision limit exceeded",O8e=d9+"crypto unavailable",F8e="[object Decimal]",nl=Math.floor,na=Math.pow,ABt=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,DBt=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,IBt=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,M8e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ip=1e7,Dn=7,kBt=9007199254740991,RBt=k5.length-1,$K=R5.length-1,mt={toStringTag:F8e};mt.absoluteValue=mt.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),yn(e)};mt.ceil=function(){return yn(new this.constructor(this),this.e+1,2)};mt.clampedTo=mt.clamp=function(e,t){var n,r=this,i=r.constructor;if(e=new i(e),t=new i(t),!e.s||!t.s)return new i(NaN);if(e.gt(t))throw Error(Yv+t);return n=r.cmp(e),n<0?e:r.cmp(t)>0?t:new i(r)};mt.comparedTo=mt.cmp=function(e){var t,n,r,i,s=this,o=s.d,a=(e=new s.constructor(e)).d,u=s.s,l=e.s;if(!o||!a)return!u||!l?NaN:u!==l?u:o===a?0:!o^u<0?1:-1;if(!o[0]||!a[0])return o[0]?u:a[0]?-l:0;if(u!==l)return u;if(s.e!==e.e)return s.e>e.e^u<0?1:-1;for(r=o.length,i=a.length,t=0,n=r<i?r:i;t<n;++t)if(o[t]!==a[t])return o[t]>a[t]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1};mt.cosine=mt.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+Dn,r.rounding=1,n=NBt(r,U8e(r,n)),r.precision=e,r.rounding=t,yn(Sg==2||Sg==3?n.neg():n,e,t,!0)):new r(1):new r(NaN)};mt.cubeRoot=mt.cbrt=function(){var e,t,n,r,i,s,o,a,u,l,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(Gn=!1,s=c.s*na(c.s*c,1/3),!s||Math.abs(s)==1/0?(n=su(c.d),e=c.e,(s=(e-n.length+1)%3)&&(n+=s==1||s==-2?"0":"00"),s=na(n,1/3),e=nl((e+1)/3)-(e%3==(e<0?-1:2)),s==1/0?n="5e"+e:(n=s.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),r=new f(n),r.s=c.s):r=new f(s.toString()),o=(e=f.precision)+3;;)if(a=r,u=a.times(a).times(a),l=u.plus(c),r=os(l.plus(c).times(a),l.plus(u),o+2,1),su(a.d).slice(0,o)===(n=su(r.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!i&&n=="4999"){if(!i&&(yn(a,e+1,0),a.times(a).times(a).eq(c))){r=a;break}o+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(yn(r,e+1,1),t=!r.times(r).times(r).eq(c));break}return Gn=!0,yn(r,e,f.rounding,t)};mt.decimalPlaces=mt.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-nl(this.e/Dn))*Dn,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};mt.dividedBy=mt.div=function(e){return os(this,new this.constructor(e))};mt.dividedToIntegerBy=mt.divToInt=function(e){var t=this,n=t.constructor;return yn(os(t,new n(e),0,1,1),n.precision,n.rounding)};mt.equals=mt.eq=function(e){return this.cmp(e)===0};mt.floor=function(){return yn(new this.constructor(this),this.e+1,3)};mt.greaterThan=mt.gt=function(e){return this.cmp(e)>0};mt.greaterThanOrEqualTo=mt.gte=function(e){var t=this.cmp(e);return t==1||t===0};mt.hyperbolicCosine=mt.cosh=function(){var e,t,n,r,i,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;n=o.precision,r=o.rounding,o.precision=n+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<32?(e=Math.ceil(i/3),t=(1/p9(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),s=LC(o,1,s.times(t),new o(1),!0);for(var u,l=e,c=new o(8);l--;)u=s.times(s),s=a.minus(u.times(c.minus(u.times(c))));return yn(s,o.precision=n,o.rounding=r,!0)};mt.hyperbolicSine=mt.sinh=function(){var e,t,n,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(t=s.precision,n=s.rounding,s.precision=t+Math.max(i.e,i.sd())+4,s.rounding=1,r=i.d.length,r<3)i=LC(s,2,i,i,!0);else{e=1.4*Math.sqrt(r),e=e>16?16:e|0,i=i.times(1/p9(5,e)),i=LC(s,2,i,i,!0);for(var o,a=new s(5),u=new s(16),l=new s(20);e--;)o=i.times(i),i=i.times(a.plus(o.times(u.times(o).plus(l))))}return s.precision=t,s.rounding=n,yn(i,t,n,!0)};mt.hyperbolicTangent=mt.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,os(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)};mt.inverseCosine=mt.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,s=n.rounding;return r!==-1?r===0?t.isNeg()?Yh(n,i,s):new n(0):new n(NaN):t.isZero()?Yh(n,i+4,s).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=Yh(n,i+4,s).times(.5),n.precision=i,n.rounding=s,e.minus(t))};mt.inverseHyperbolicCosine=mt.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,Gn=!1,n=n.times(n).minus(1).sqrt().plus(n),Gn=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)};mt.inverseHyperbolicSine=mt.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,Gn=!1,n=n.times(n).plus(1).sqrt().plus(n),Gn=!0,r.precision=e,r.rounding=t,n.ln())};mt.inverseHyperbolicTangent=mt.atanh=function(){var e,t,n,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=s.precision,t=s.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?yn(new s(i),e,t,!0):(s.precision=n=r-i.e,i=os(i.plus(1),new s(1).minus(i),n+e,1),s.precision=e+4,s.rounding=1,i=i.ln(),s.precision=e,s.rounding=t,i.times(.5))):new s(NaN)};mt.inverseSine=mt.asin=function(){var e,t,n,r,i=this,s=i.constructor;return i.isZero()?new s(i):(t=i.abs().cmp(1),n=s.precision,r=s.rounding,t!==-1?t===0?(e=Yh(s,n+4,r).times(.5),e.s=i.s,e):new s(NaN):(s.precision=n+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,i.times(2)))};mt.inverseTangent=mt.atan=function(){var e,t,n,r,i,s,o,a,u,l=this,c=l.constructor,f=c.precision,d=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&f+4<=$K)return o=Yh(c,f+4,d).times(.25),o.s=l.s,o}else{if(!l.s)return new c(NaN);if(f+4<=$K)return o=Yh(c,f+4,d).times(.5),o.s=l.s,o}for(c.precision=a=f+10,c.rounding=1,n=Math.min(28,a/Dn+2|0),e=n;e;--e)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(Gn=!1,t=Math.ceil(a/Dn),r=1,u=l.times(l),o=new c(l),i=l;e!==-1;)if(i=i.times(u),s=o.minus(i.div(r+=2)),i=i.times(u),o=s.plus(i.div(r+=2)),o.d[t]!==void 0)for(e=t;o.d[e]===s.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),Gn=!0,yn(o,c.precision=f,c.rounding=d,!0)};mt.isFinite=function(){return!!this.d};mt.isInteger=mt.isInt=function(){return!!this.d&&nl(this.e/Dn)>this.d.length-2};mt.isNaN=function(){return!this.s};mt.isNegative=mt.isNeg=function(){return this.s<0};mt.isPositive=mt.isPos=function(){return this.s>0};mt.isZero=function(){return!!this.d&&this.d[0]===0};mt.lessThan=mt.lt=function(e){return this.cmp(e)<0};mt.lessThanOrEqualTo=mt.lte=function(e){return this.cmp(e)<1};mt.logarithm=mt.log=function(e){var t,n,r,i,s,o,a,u,l=this,c=l.constructor,f=c.precision,d=c.rounding,h=5;if(e==null)e=new c(10),t=!0;else{if(e=new c(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new c(n&&!n[0]?-1/0:l.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)s=!0;else{for(i=n[0];i%10===0;)i/=10;s=i!==1}if(Gn=!1,a=f+h,o=z1(l,a),r=t?N5(c,a+10):z1(e,a),u=os(o,r,a,1),l3(u.d,i=f,d))do if(a+=10,o=z1(l,a),r=t?N5(c,a+10):z1(e,a),u=os(o,r,a,1),!s){+su(u.d).slice(i+1,i+15)+1==1e14&&(u=yn(u,f+1,0));break}while(l3(u.d,i+=10,d));return Gn=!0,yn(u,f,d)};mt.minus=mt.sub=function(e){var t,n,r,i,s,o,a,u,l,c,f,d,h=this,p=h.constructor;if(e=new p(e),!h.d||!e.d)return!h.s||!e.s?e=new p(NaN):h.d?e.s=-e.s:e=new p(e.d||h.s!==e.s?h:NaN),e;if(h.s!=e.s)return e.s=-e.s,h.plus(e);if(l=h.d,d=e.d,a=p.precision,u=p.rounding,!l[0]||!d[0]){if(d[0])e.s=-e.s;else if(l[0])e=new p(h);else return new p(u===3?-0:0);return Gn?yn(e,a,u):e}if(n=nl(e.e/Dn),c=nl(h.e/Dn),l=l.slice(),s=c-n,s){for(f=s<0,f?(t=l,s=-s,o=d.length):(t=d,n=c,o=l.length),r=Math.max(Math.ceil(a/Dn),o)+2,s>r&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for(r=l.length,o=d.length,f=r<o,f&&(o=r),r=0;r<o;r++)if(l[r]!=d[r]){f=l[r]<d[r];break}s=0}for(f&&(t=l,l=d,d=t,e.s=-e.s),o=l.length,r=d.length-o;r>0;--r)l[o++]=0;for(r=d.length;r>s;){if(l[--r]<d[r]){for(i=r;i&&l[--i]===0;)l[i]=ip-1;--l[i],l[r]+=ip}l[r]-=d[r]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(e.d=l,e.e=h9(l,n),Gn?yn(e,a,u):e):new p(u===3?-0:0)};mt.modulo=mt.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?yn(new r(n),r.precision,r.rounding):(Gn=!1,r.modulo==9?(t=os(n,e.abs(),0,3,1),t.s*=e.s):t=os(n,e,0,r.modulo,1),t=t.times(e),Gn=!0,n.minus(t))};mt.naturalExponential=mt.exp=function(){return LK(this)};mt.naturalLogarithm=mt.ln=function(){return z1(this)};mt.negated=mt.neg=function(){var e=new this.constructor(this);return e.s=-e.s,yn(e)};mt.plus=mt.add=function(e){var t,n,r,i,s,o,a,u,l,c,f=this,d=f.constructor;if(e=new d(e),!f.d||!e.d)return!f.s||!e.s?e=new d(NaN):f.d||(e=new d(e.d||f.s===e.s?f:NaN)),e;if(f.s!=e.s)return e.s=-e.s,f.minus(e);if(l=f.d,c=e.d,a=d.precision,u=d.rounding,!l[0]||!c[0])return c[0]||(e=new d(f)),Gn?yn(e,a,u):e;if(s=nl(f.e/Dn),r=nl(e.e/Dn),l=l.slice(),i=s-r,i){for(i<0?(n=l,i=-i,o=c.length):(n=c,r=s,o=l.length),s=Math.ceil(a/Dn),o=s>o?s+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=l.length,i=c.length,o-i<0&&(i=o,n=c,c=l,l=n),t=0;i;)t=(l[--i]=l[i]+c[i]+t)/ip|0,l[i]%=ip;for(t&&(l.unshift(t),++r),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=h9(l,r),Gn?yn(e,a,u):e};mt.precision=mt.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Yv+e);return n.d?(t=$8e(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};mt.round=function(){var e=this,t=e.constructor;return yn(new t(e),e.e+1,t.rounding)};mt.sine=mt.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+Dn,r.rounding=1,n=OBt(r,U8e(r,n)),r.precision=e,r.rounding=t,yn(Sg>2?n.neg():n,e,t,!0)):new r(NaN)};mt.squareRoot=mt.sqrt=function(){var e,t,n,r,i,s,o=this,a=o.d,u=o.e,l=o.s,c=o.constructor;if(l!==1||!a||!a[0])return new c(!l||l<0&&(!a||a[0])?NaN:a?o:1/0);for(Gn=!1,l=Math.sqrt(+o),l==0||l==1/0?(t=su(a),(t.length+u)%2==0&&(t+="0"),l=Math.sqrt(t),u=nl((u+1)/2)-(u<0||u%2),l==1/0?t="5e"+u:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+u),r=new c(t)):r=new c(l.toString()),n=(u=c.precision)+3;;)if(s=r,r=s.plus(os(o,s,n+2,1)).times(.5),su(s.d).slice(0,n)===(t=su(r.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!i&&t=="4999"){if(!i&&(yn(s,u+1,0),s.times(s).eq(o))){r=s;break}n+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(yn(r,u+1,1),e=!r.times(r).eq(o));break}return Gn=!0,yn(r,u,c.rounding,e)};mt.tangent=mt.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,n=n.sin(),n.s=1,n=os(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,yn(Sg==2||Sg==4?n.neg():n,e,t,!0)):new r(NaN)};mt.times=mt.mul=function(e){var t,n,r,i,s,o,a,u,l,c=this,f=c.constructor,d=c.d,h=(e=new f(e)).d;if(e.s*=c.s,!d||!d[0]||!h||!h[0])return new f(!e.s||d&&!d[0]&&!h||h&&!h[0]&&!d?NaN:!d||!h?e.s/0:e.s*0);for(n=nl(c.e/Dn)+nl(e.e/Dn),u=d.length,l=h.length,u<l&&(s=d,d=h,h=s,o=u,u=l,l=o),s=[],o=u+l,r=o;r--;)s.push(0);for(r=l;--r>=0;){for(t=0,i=u+r;i>r;)a=s[i]+h[r]*d[i-r-1]+t,s[i--]=a%ip|0,t=a/ip|0;s[i]=(s[i]+t)%ip|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=h9(s,n),Gn?yn(e,f.precision,f.rounding):e};mt.toBinary=function(e,t){return pie(this,2,e,t)};mt.toDecimalPlaces=mt.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(qc(e,0,Bb),t===void 0?t=r.rounding:qc(t,0,8),yn(n,e+n.e+1,t))};mt.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Jm(r,!0):(qc(e,0,Bb),t===void 0?t=i.rounding:qc(t,0,8),r=yn(new i(r),e+1,t),n=Jm(r,!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};mt.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?n=Jm(i):(qc(e,0,Bb),t===void 0?t=s.rounding:qc(t,0,8),r=yn(new s(i),e+i.e+1,t),n=Jm(r,!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};mt.toFraction=function(e){var t,n,r,i,s,o,a,u,l,c,f,d,h=this,p=h.d,m=h.constructor;if(!p)return new m(h);if(l=n=new m(1),r=u=new m(0),t=new m(r),s=t.e=$8e(p)-h.e-1,o=s%Dn,t.d[0]=na(10,o<0?Dn+o:o),e==null)e=s>0?t:l;else{if(a=new m(e),!a.isInt()||a.lt(l))throw Error(Yv+a);e=a.gt(t)?s>0?t:l:a}for(Gn=!1,a=new m(su(p)),c=m.precision,m.precision=s=p.length*Dn*2;f=os(a,t,0,1,1),i=n.plus(f.times(r)),i.cmp(e)!=1;)n=r,r=i,i=l,l=u.plus(f.times(i)),u=i,i=t,t=a.minus(f.times(i)),a=i;return i=os(e.minus(n),r,0,1,1),u=u.plus(i.times(l)),n=n.plus(i.times(r)),u.s=l.s=h.s,d=os(l,r,s,1).minus(h).abs().cmp(os(u,n,s,1).minus(h).abs())<1?[l,r]:[u,n],m.precision=c,Gn=!0,d};mt.toHexadecimal=mt.toHex=function(e,t){return pie(this,16,e,t)};mt.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),e==null){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),t===void 0?t=r.rounding:qc(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(Gn=!1,n=os(n,e,0,t,1).times(e),Gn=!0,yn(n)):(e.s=n.s,n=e),n};mt.toNumber=function(){return+this};mt.toOctal=function(e,t){return pie(this,8,e,t)};mt.toPower=mt.pow=function(e){var t,n,r,i,s,o,a=this,u=a.constructor,l=+(e=new u(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new u(na(+a,l));if(a=new u(a),a.eq(1))return a;if(r=u.precision,s=u.rounding,e.eq(1))return yn(a,r,s);if(t=nl(e.e/Dn),t>=e.d.length-1&&(n=l<0?-l:l)<=kBt)return i=L8e(u,a,n,r),e.s<0?new u(1).div(i):yn(i,r,s);if(o=a.s,o<0){if(t<e.d.length-1)return new u(NaN);if(e.d[t]&1||(o=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=o,a}return n=na(+a,l),t=n==0||!isFinite(n)?nl(l*(Math.log("0."+su(a.d))/Math.LN10+a.e+1)):new u(n+"").e,t>u.maxE+1||t<u.minE-1?new u(t>0?o/0:0):(Gn=!1,u.rounding=a.s=1,n=Math.min(12,(t+"").length),i=LK(e.times(z1(a,r+n)),r),i.d&&(i=yn(i,r+5,1),l3(i.d,r,s)&&(t=r+10,i=yn(LK(e.times(z1(a,t+n)),t),t+5,1),+su(i.d).slice(r+1,r+15)+1==1e14&&(i=yn(i,r+1,0)))),i.s=o,Gn=!0,u.rounding=s,yn(i,r,s))};mt.toPrecision=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Jm(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(qc(e,1,Bb),t===void 0?t=i.rounding:qc(t,0,8),r=yn(new i(r),e,t),n=Jm(r,e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n};mt.toSignificantDigits=mt.toSD=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(qc(e,1,Bb),t===void 0?t=r.rounding:qc(t,0,8)),yn(new r(n),e,t)};mt.toString=function(){var e=this,t=e.constructor,n=Jm(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};mt.truncated=mt.trunc=function(){return yn(new this.constructor(this),this.e+1,1)};mt.valueOf=mt.toJSON=function(){var e=this,t=e.constructor,n=Jm(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function su(e){var t,n,r,i=e.length-1,s="",o=e[0];if(i>0){for(s+=o,t=1;t<i;t++)r=e[t]+"",n=Dn-r.length,n&&(s+=x1(n)),s+=r;o=e[t],r=o+"",n=Dn-r.length,n&&(s+=x1(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function qc(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Yv+e)}function l3(e,t,n,r){var i,s,o,a;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=Dn,i=0):(i=Math.ceil((t+1)/Dn),t%=Dn),s=na(10,Dn-t),a=e[i]%s|0,r==null?t<3?(t==0?a=a/100|0:t==1&&(a=a/10|0),o=n<4&&a==99999||n>3&&a==49999||a==5e4||a==0):o=(n<4&&a+1==s||n>3&&a+1==s/2)&&(e[i+1]/s/100|0)==na(10,t-2)-1||(a==s/2||a==0)&&(e[i+1]/s/100|0)==0:t<4?(t==0?a=a/1e3|0:t==1?a=a/100|0:t==2&&(a=a/10|0),o=(r||n<4)&&a==9999||!r&&n>3&&a==4999):o=((r||n<4)&&a+1==s||!r&&n>3&&a+1==s/2)&&(e[i+1]/s/1e3|0)==na(10,t-3)-1,o}function _F(e,t,n){for(var r,i=[0],s,o=0,a=e.length;o<a;){for(s=i.length;s--;)i[s]*=t;for(i[0]+=FK.indexOf(e.charAt(o++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function NBt(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?(n=Math.ceil(r/3),i=(1/p9(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),e.precision+=n,t=LC(e,1,t.times(i),new e(1));for(var s=n;s--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}var os=function(){function e(r,i,s){var o,a=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+a,r[u]=o%s|0,a=o/s|0;return a&&r.unshift(a),r}function t(r,i,s,o){var a,u;if(s!=o)u=s>o?1:-1;else for(a=u=0;a<s;a++)if(r[a]!=i[a]){u=r[a]>i[a]?1:-1;break}return u}function n(r,i,s,o){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*o+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o,a,u){var l,c,f,d,h,p,m,g,y,v,b,_,w,S,T,A,k,I,R,F,O=r.constructor,L=r.s==i.s?1:-1,H=r.d,U=i.d;if(!H||!H[0]||!U||!U[0])return new O(!r.s||!i.s||(H?U&&H[0]==U[0]:!U)?NaN:H&&H[0]==0||!U?L*0:L/0);for(u?(h=1,c=r.e-i.e):(u=ip,h=Dn,c=nl(r.e/h)-nl(i.e/h)),R=U.length,k=H.length,y=new O(L),v=y.d=[],f=0;U[f]==(H[f]||0);f++);if(U[f]>(H[f]||0)&&c--,s==null?(S=s=O.precision,o=O.rounding):a?S=s+(r.e-i.e)+1:S=s,S<0)v.push(1),p=!0;else{if(S=S/h+2|0,f=0,R==1){for(d=0,U=U[0],S++;(f<k||d)&&S--;f++)T=d*u+(H[f]||0),v[f]=T/U|0,d=T%U|0;p=d||f<k}else{for(d=u/(U[0]+1)|0,d>1&&(U=e(U,d,u),H=e(H,d,u),R=U.length,k=H.length),A=R,b=H.slice(0,R),_=b.length;_<R;)b[_++]=0;F=U.slice(),F.unshift(0),I=U[0],U[1]>=u/2&&++I;do d=0,l=t(U,b,R,_),l<0?(w=b[0],R!=_&&(w=w*u+(b[1]||0)),d=w/I|0,d>1?(d>=u&&(d=u-1),m=e(U,d,u),g=m.length,_=b.length,l=t(m,b,g,_),l==1&&(d--,n(m,R<g?F:U,g,u))):(d==0&&(l=d=1),m=U.slice()),g=m.length,g<_&&m.unshift(0),n(b,m,_,u),l==-1&&(_=b.length,l=t(U,b,R,_),l<1&&(d++,n(b,R<_?F:U,_,u))),_=b.length):l===0&&(d++,b=[0]),v[f++]=d,l&&b[0]?b[_++]=H[A]||0:(b=[H[A]],_=1);while((A++<k||b[0]!==void 0)&&S--);p=b[0]!==void 0}v[0]||v.shift()}if(h==1)y.e=c,N8e=p;else{for(f=1,d=v[0];d>=10;d/=10)f++;y.e=f+c*h-1,yn(y,a?s+y.e+1:s,o,p)}return y}}();function yn(e,t,n,r){var i,s,o,a,u,l,c,f,d,h=e.constructor;e:if(t!=null){if(f=e.d,!f)return e;for(i=1,a=f[0];a>=10;a/=10)i++;if(s=t-i,s<0)s+=Dn,o=t,c=f[d=0],u=c/na(10,i-o-1)%10|0;else if(d=Math.ceil((s+1)/Dn),a=f.length,d>=a)if(r){for(;a++<=d;)f.push(0);c=u=0,i=1,s%=Dn,o=s-Dn+1}else break e;else{for(c=a=f[d],i=1;a>=10;a/=10)i++;s%=Dn,o=s-Dn+i,u=o<0?0:c/na(10,i-o-1)%10|0}if(r=r||t<0||f[d+1]!==void 0||(o<0?c:c%na(10,i-o-1)),l=n<4?(u||r)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||r||n==6&&(s>0?o>0?c/na(10,i-o):0:f[d-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,l?(t-=e.e+1,f[0]=na(10,(Dn-t%Dn)%Dn),e.e=-t||0):f[0]=e.e=0,e;if(s==0?(f.length=d,a=1,d--):(f.length=d+1,a=na(10,Dn-s),f[d]=o>0?(c/na(10,i-o)%na(10,o)|0)*a:0),l)for(;;)if(d==0){for(s=1,o=f[0];o>=10;o/=10)s++;for(o=f[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(e.e++,f[0]==ip&&(f[0]=1));break}else{if(f[d]+=a,f[d]!=ip)break;f[d--]=0,a=1}for(s=f.length;f[--s]===0;)f.pop()}return Gn&&(e.e>h.maxE?(e.d=null,e.e=NaN):e.e<h.minE&&(e.e=0,e.d=[0])),e}function Jm(e,t,n){if(!e.isFinite())return j8e(e);var r,i=e.e,s=su(e.d),o=s.length;return t?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+x1(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):i<0?(s="0."+x1(-i-1)+s,n&&(r=n-o)>0&&(s+=x1(r))):i>=o?(s+=x1(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+x1(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=x1(r))),s}function h9(e,t){var n=e[0];for(t*=Dn;n>=10;n/=10)t++;return t}function N5(e,t,n){if(t>RBt)throw Gn=!0,n&&(e.precision=n),Error(P8e);return yn(new e(k5),t,1,!0)}function Yh(e,t,n){if(t>$K)throw Error(P8e);return yn(new e(R5),t,n,!0)}function $8e(e){var t=e.length-1,n=t*Dn+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function x1(e){for(var t="";e--;)t+="0";return t}function L8e(e,t,n,r){var i,s=new e(1),o=Math.ceil(r/Dn+4);for(Gn=!1;;){if(n%2&&(s=s.times(t),pbe(s.d,o)&&(i=!0)),n=nl(n/2),n===0){n=s.d.length-1,i&&s.d[n]===0&&++s.d[n];break}t=t.times(t),pbe(t.d,o)}return Gn=!0,s}function hbe(e){return e.d[e.d.length-1]&1}function B8e(e,t,n){for(var r,i=new e(t[0]),s=0;++s<t.length;)if(r=new e(t[s]),r.s)i[n](r)&&(i=r);else{i=r;break}return i}function LK(e,t){var n,r,i,s,o,a,u,l=0,c=0,f=0,d=e.constructor,h=d.rounding,p=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(Gn=!1,u=p):u=t,a=new d(.03125);e.e>-2;)e=e.times(a),f+=5;for(r=Math.log(na(2,f))/Math.LN10*2+5|0,u+=r,n=s=o=new d(1),d.precision=u;;){if(s=yn(s.times(e),u,1),n=n.times(++c),a=o.plus(os(s,n,u,1)),su(a.d).slice(0,u)===su(o.d).slice(0,u)){for(i=f;i--;)o=yn(o.times(o),u,1);if(t==null)if(l<3&&l3(o.d,u-r,h,l))d.precision=u+=10,n=s=a=new d(1),c=0,l++;else return yn(o,d.precision=p,h,Gn=!0);else return d.precision=p,o}o=a}}function z1(e,t){var n,r,i,s,o,a,u,l,c,f,d,h=1,p=10,m=e,g=m.d,y=m.constructor,v=y.rounding,b=y.precision;if(m.s<0||!g||!g[0]||!m.e&&g[0]==1&&g.length==1)return new y(g&&!g[0]?-1/0:m.s!=1?NaN:g?0:m);if(t==null?(Gn=!1,c=b):c=t,y.precision=c+=p,n=su(g),r=n.charAt(0),Math.abs(s=m.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(e),n=su(m.d),r=n.charAt(0),h++;s=m.e,r>1?(m=new y("0."+n),s++):m=new y(r+"."+n.slice(1))}else return l=N5(y,c+2,b).times(s+""),m=z1(new y(r+"."+n.slice(1)),c-p).plus(l),y.precision=b,t==null?yn(m,b,v,Gn=!0):m;for(f=m,u=o=m=os(m.minus(1),m.plus(1),c,1),d=yn(m.times(m),c,1),i=3;;){if(o=yn(o.times(d),c,1),l=u.plus(os(o,new y(i),c,1)),su(l.d).slice(0,c)===su(u.d).slice(0,c))if(u=u.times(2),s!==0&&(u=u.plus(N5(y,c+2,b).times(s+""))),u=os(u,new y(h),c,1),t==null)if(l3(u.d,c-p,v,a))y.precision=c+=p,l=o=m=os(f.minus(1),f.plus(1),c,1),d=yn(m.times(m),c,1),i=a=1;else return yn(u,y.precision=b,v,Gn=!0);else return y.precision=b,u;u=l,i+=2}}function j8e(e){return String(e.s*e.s/0)}function BK(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;r++);for(i=t.length;t.charCodeAt(i-1)===48;--i);if(t=t.slice(r,i),t){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%Dn,n<0&&(r+=Dn),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Dn;r<i;)e.d.push(+t.slice(r,r+=Dn));t=t.slice(r),r=Dn-t.length}else r-=i;for(;r--;)t+="0";e.d.push(+t),Gn&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function PBt(e,t){var n,r,i,s,o,a,u,l,c;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),M8e.test(t))return BK(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(DBt.test(t))n=16,t=t.toLowerCase();else if(ABt.test(t))n=2;else if(IBt.test(t))n=8;else throw Error(Yv+t);for(s=t.search(/p/i),s>0?(u=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),s=t.indexOf("."),o=s>=0,r=e.constructor,o&&(t=t.replace(".",""),a=t.length,s=a-s,i=L8e(r,new r(n),s,s*2)),l=_F(t,n,ip),c=l.length-1,s=c;l[s]===0;--s)l.pop();return s<0?new r(e.s*0):(e.e=h9(l,c),e.d=l,Gn=!1,o&&(e=os(e,i,a*4)),u&&(e=e.times(Math.abs(u)<54?na(2,u):BC.pow(2,u))),Gn=!0,e)}function OBt(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:LC(e,2,t,t);n=1.4*Math.sqrt(r),n=n>16?16:n|0,t=t.times(1/p9(5,n)),t=LC(e,2,t,t);for(var i,s=new e(5),o=new e(16),a=new e(20);n--;)i=t.times(t),t=t.times(s.plus(i.times(o.times(i).minus(a))));return t}function LC(e,t,n,r,i){var s,o,a,u,l=e.precision,c=Math.ceil(l/Dn);for(Gn=!1,u=n.times(n),a=new e(r);;){if(o=os(a.times(u),new e(t++*t++),l,1),a=i?r.plus(o):r.minus(o),r=os(o.times(u),new e(t++*t++),l,1),o=a.plus(r),o.d[c]!==void 0){for(s=c;o.d[s]===a.d[s]&&s--;);if(s==-1)break}s=a,a=r,r=o,o=s}return Gn=!0,o.d.length=c+1,o}function p9(e,t){for(var n=e;--t;)n*=e;return n}function U8e(e,t){var n,r=t.s<0,i=Yh(e,e.precision,1),s=i.times(.5);if(t=t.abs(),t.lte(s))return Sg=r?4:1,t;if(n=t.divToInt(i),n.isZero())Sg=r?3:2;else{if(t=t.minus(n.times(i)),t.lte(s))return Sg=hbe(n)?r?2:3:r?4:1,t;Sg=hbe(n)?r?1:4:r?3:2}return t.minus(i).abs()}function pie(e,t,n,r){var i,s,o,a,u,l,c,f,d,h=e.constructor,p=n!==void 0;if(p?(qc(n,1,Bb),r===void 0?r=h.rounding:qc(r,0,8)):(n=h.precision,r=h.rounding),!e.isFinite())c=j8e(e);else{for(c=Jm(e),o=c.indexOf("."),p?(i=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):i=t,o>=0&&(c=c.replace(".",""),d=new h(1),d.e=c.length-o,d.d=_F(Jm(d),10,i),d.e=d.d.length),f=_F(c,10,i),s=u=f.length;f[--u]==0;)f.pop();if(!f[0])c=p?"0p+0":"0";else{if(o<0?s--:(e=new h(e),e.d=f,e.e=s,e=os(e,d,n,r,0,i),f=e.d,s=e.e,l=N8e),o=f[n],a=i/2,l=l||f[n+1]!==void 0,l=r<4?(o!==void 0||l)&&(r===0||r===(e.s<0?3:2)):o>a||o===a&&(r===4||l||r===6&&f[n-1]&1||r===(e.s<0?8:7)),f.length=n,l)for(;++f[--n]>i-1;)f[n]=0,n||(++s,f.unshift(1));for(u=f.length;!f[u-1];--u);for(o=0,c="";o<u;o++)c+=FK.charAt(f[o]);if(p){if(u>1)if(t==16||t==8){for(o=t==16?4:3,--u;u%o;u++)c+="0";for(f=_F(c,i,t),u=f.length;!f[u-1];--u);for(o=1,c="1.";o<u;o++)c+=FK.charAt(f[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>u)for(s-=u;s--;)c+="0";else s<u&&(c=c.slice(0,s)+"."+c.slice(s))}c=(t==16?"0x":t==2?"0b":t==8?"0o":"")+c}return e.s<0?"-"+c:c}function pbe(e,t){if(e.length>t)return e.length=t,!0}function FBt(e){return new this(e).abs()}function MBt(e){return new this(e).acos()}function $Bt(e){return new this(e).acosh()}function LBt(e,t){return new this(e).plus(t)}function BBt(e){return new this(e).asin()}function jBt(e){return new this(e).asinh()}function UBt(e){return new this(e).atan()}function zBt(e){return new this(e).atanh()}function VBt(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,s=r+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=Yh(this,s,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?Yh(this,r,i):new this(0),n.s=e.s):!e.d||t.isZero()?(n=Yh(this,s,1).times(.5),n.s=e.s):t.s<0?(this.precision=s,this.rounding=1,n=this.atan(os(e,t,s,1)),t=Yh(this,s,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(os(e,t,s,1)),n}function HBt(e){return new this(e).cbrt()}function qBt(e){return yn(e=new this(e),e.e+1,2)}function WBt(e,t,n){return new this(e).clamp(t,n)}function GBt(e){if(!e||typeof e!="object")throw Error(d9+"Object expected");var t,n,r,i=e.defaults===!0,s=["precision",1,Bb,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,OK,"maxE",0,OK,"minE",-9e15,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(n=s[t],i&&(this[n]=MK[n]),(r=e[n])!==void 0)if(nl(r)===r&&r>=s[t+1]&&r<=s[t+2])this[n]=r;else throw Error(Yv+n+": "+r);if(n="crypto",i&&(this[n]=MK[n]),(r=e[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(O8e);else this[n]=!1;else throw Error(Yv+n+": "+r);return this}function YBt(e){return new this(e).cos()}function KBt(e){return new this(e).cosh()}function z8e(e){var t,n,r;function i(s){var o,a,u,l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,mbe(s)){l.s=s.s,Gn?!s.d||s.e>i.maxE?(l.e=NaN,l.d=null):s.e<i.minE?(l.e=0,l.d=[0]):(l.e=s.e,l.d=s.d.slice()):(l.e=s.e,l.d=s.d?s.d.slice():s.d);return}if(u=typeof s,u==="number"){if(s===0){l.s=1/s<0?-1:1,l.e=0,l.d=[0];return}if(s<0?(s=-s,l.s=-1):l.s=1,s===~~s&&s<1e7){for(o=0,a=s;a>=10;a/=10)o++;Gn?o>i.maxE?(l.e=NaN,l.d=null):o<i.minE?(l.e=0,l.d=[0]):(l.e=o,l.d=[s]):(l.e=o,l.d=[s]);return}else if(s*0!==0){s||(l.s=NaN),l.e=NaN,l.d=null;return}return BK(l,s.toString())}else if(u!=="string")throw Error(Yv+s);return(a=s.charCodeAt(0))===45?(s=s.slice(1),l.s=-1):(a===43&&(s=s.slice(1)),l.s=1),M8e.test(s)?BK(l,s):PBt(l,s)}if(i.prototype=mt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=GBt,i.clone=z8e,i.isDecimal=mbe,i.abs=FBt,i.acos=MBt,i.acosh=$Bt,i.add=LBt,i.asin=BBt,i.asinh=jBt,i.atan=UBt,i.atanh=zBt,i.atan2=VBt,i.cbrt=HBt,i.ceil=qBt,i.clamp=WBt,i.cos=YBt,i.cosh=KBt,i.div=XBt,i.exp=QBt,i.floor=JBt,i.hypot=ZBt,i.ln=e9t,i.log=t9t,i.log10=r9t,i.log2=n9t,i.max=i9t,i.min=s9t,i.mod=o9t,i.mul=a9t,i.pow=u9t,i.random=l9t,i.round=c9t,i.sign=f9t,i.sin=d9t,i.sinh=h9t,i.sqrt=p9t,i.sub=m9t,i.sum=g9t,i.tan=y9t,i.tanh=v9t,i.trunc=b9t,e===void 0&&(e={}),e&&e.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function XBt(e,t){return new this(e).div(t)}function QBt(e){return new this(e).exp()}function JBt(e){return yn(e=new this(e),e.e+1,3)}function ZBt(){var e,t,n=new this(0);for(Gn=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return Gn=!0,new this(1/0);n=t}return Gn=!0,n.sqrt()}function mbe(e){return e instanceof BC||e&&e.toStringTag===F8e||!1}function e9t(e){return new this(e).ln()}function t9t(e,t){return new this(e).log(t)}function n9t(e){return new this(e).log(2)}function r9t(e){return new this(e).log(10)}function i9t(){return B8e(this,arguments,"lt")}function s9t(){return B8e(this,arguments,"gt")}function o9t(e,t){return new this(e).mod(t)}function a9t(e,t){return new this(e).mul(t)}function u9t(e,t){return new this(e).pow(t)}function l9t(e){var t,n,r,i,s=0,o=new this(1),a=[];if(e===void 0?e=this.precision:qc(e,1,Bb),r=Math.ceil(e/Dn),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));s<r;)i=t[s],i>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:a[s++]=i%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(r*=4);s<r;)i=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((t[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(t,s):(a.push(i%1e7),s+=4);s=r/4}else throw Error(O8e);else for(;s<r;)a[s++]=Math.random()*1e7|0;for(r=a[--s],e%=Dn,r&&e&&(i=na(10,Dn-e),a[s]=(r/i|0)*i);a[s]===0;s--)a.pop();if(s<0)n=0,a=[0];else{for(n=-1;a[0]===0;n-=Dn)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<Dn&&(n-=Dn-r)}return o.e=n,o.d=a,o}function c9t(e){return yn(e=new this(e),e.e+1,this.rounding)}function f9t(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function d9t(e){return new this(e).sin()}function h9t(e){return new this(e).sinh()}function p9t(e){return new this(e).sqrt()}function m9t(e,t){return new this(e).sub(t)}function g9t(){var e=0,t=arguments,n=new this(t[e]);for(Gn=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return Gn=!0,yn(n,this.precision,this.rounding)}function y9t(e){return new this(e).tan()}function v9t(e){return new this(e).tanh()}function b9t(e){return yn(e=new this(e),e.e+1,1)}mt[Symbol.for("nodejs.util.inspect.custom")]=mt.toString;mt[Symbol.toStringTag]="Decimal";var BC=mt.constructor=z8e(MK);k5=new BC(k5);R5=new BC(R5);var x9t="BigNumber",w9t=["?on","config"],_9t=ni(x9t,w9t,e=>{var{on:t,config:n}=e,r=BC.clone({precision:n.precision,modulo:BC.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},t&&t("config",function(i,s){i.precision!==s.precision&&r.config({precision:i.precision})}),r},{isClass:!0});const Iu=Math.cosh||function(e){return Math.abs(e)<1e-9?1-e:(Math.exp(e)+Math.exp(-e))*.5},dd=Math.sinh||function(e){return Math.abs(e)<1e-9?e:(Math.exp(e)-Math.exp(-e))*.5},E9t=function(e){const t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;const n=e*e;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},FH=function(e,t){return e=Math.abs(e),t=Math.abs(t),e<t&&([e,t]=[t,e]),e<1e8?Math.sqrt(e*e+t*t):(t/=e,e*Math.sqrt(1+t*t))},n2=function(){throw SyntaxError("Invalid Param")};function MH(e,t){const n=Math.abs(e),r=Math.abs(t);return e===0?Math.log(r):t===0?Math.log(n):n<3e3&&r<3e3?Math.log(e*e+t*t)*.5:(e=e*.5,t=t*.5,.5*Math.log(e*e+t*t)+Math.LN2)}const S9t={re:0,im:0},Vx=function(e,t){const n=S9t;if(e==null)n.re=n.im=0;else if(t!==void 0)n.re=e,n.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)n.re=e.re,n.im=e.im;else if("abs"in e&&"arg"in e){if(!isFinite(e.abs)&&isFinite(e.arg))return Ze.INFINITY;n.re=e.abs*Math.cos(e.arg),n.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!isFinite(e.r)&&isFinite(e.phi))return Ze.INFINITY;n.re=e.r*Math.cos(e.phi),n.im=e.r*Math.sin(e.phi)}else e.length===2?(n.re=e[0],n.im=e[1]):n2();break;case"string":n.im=n.re=0;const r=e.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,s=0;r===null&&n2();for(let o=0;o<r.length;o++){const a=r[o];a===" "||a==="	"||a===`
`||(a==="+"?i++:a==="-"?s++:a==="i"||a==="I"?(i+s===0&&n2(),r[o+1]!==" "&&!isNaN(r[o+1])?(n.im+=parseFloat((s%2?"-":"")+r[o+1]),o++):n.im+=parseFloat((s%2?"-":"")+"1"),i=s=0):((i+s===0||isNaN(a))&&n2(),r[o+1]==="i"||r[o+1]==="I"?(n.im+=parseFloat((s%2?"-":"")+a),o++):n.re+=parseFloat((s%2?"-":"")+a),i=s=0))}i+s>0&&n2();break;case"number":n.im=0,n.re=e;break;default:n2()}return isNaN(n.re)||isNaN(n.im),n};function Ze(e,t){if(!(this instanceof Ze))return new Ze(e,t);const n=Vx(e,t);this.re=n.re,this.im=n.im}Ze.prototype={re:0,im:0,sign:function(){const e=FH(this.re,this.im);return new Ze(this.re/e,this.im/e)},add:function(e,t){const n=Vx(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?Ze.NAN:Ze.INFINITY:new Ze(this.re+n.re,this.im+n.im)},sub:function(e,t){const n=Vx(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?Ze.NAN:Ze.INFINITY:new Ze(this.re-n.re,this.im-n.im)},mul:function(e,t){const n=Vx(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),s=this.re===0&&this.im===0,o=n.re===0&&n.im===0;return r&&o||i&&s?Ze.NAN:r||i?Ze.INFINITY:n.im===0&&this.im===0?new Ze(this.re*n.re,0):new Ze(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(e,t){const n=Vx(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),s=this.re===0&&this.im===0,o=n.re===0&&n.im===0;if(s&&o||r&&i)return Ze.NAN;if(o||r)return Ze.INFINITY;if(s||i)return Ze.ZERO;if(n.im===0)return new Ze(this.re/n.re,this.im/n.re);if(Math.abs(n.re)<Math.abs(n.im)){const a=n.re/n.im,u=n.re*a+n.im;return new Ze((this.re*a+this.im)/u,(this.im*a-this.re)/u)}else{const a=n.im/n.re,u=n.im*a+n.re;return new Ze((this.re+this.im*a)/u,(this.im-this.re*a)/u)}},pow:function(e,t){const n=Vx(e,t),r=this.re===0&&this.im===0;if(n.re===0&&n.im===0)return Ze.ONE;if(n.im===0){if(this.im===0&&this.re>0)return new Ze(Math.pow(this.re,n.re),0);if(this.re===0)switch((n.re%4+4)%4){case 0:return new Ze(Math.pow(this.im,n.re),0);case 1:return new Ze(0,Math.pow(this.im,n.re));case 2:return new Ze(-Math.pow(this.im,n.re),0);case 3:return new Ze(0,-Math.pow(this.im,n.re))}}if(r&&n.re>0)return Ze.ZERO;const s=Math.atan2(this.im,this.re),o=MH(this.re,this.im);let a=Math.exp(n.re*o-n.im*s),u=n.im*o+n.re*s;return new Ze(a*Math.cos(u),a*Math.sin(u))},sqrt:function(){const e=this.re,t=this.im;if(t===0)return e>=0?new Ze(Math.sqrt(e),0):new Ze(0,Math.sqrt(-e));const n=FH(e,t);let r=Math.sqrt(.5*(n+Math.abs(e))),i=Math.abs(t)/(2*r);return e>=0?new Ze(r,t<0?-i:i):new Ze(i,t<0?-r:r)},exp:function(){const e=Math.exp(this.re);return this.im===0?new Ze(e,0):new Ze(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){const e=this.re,t=this.im;return new Ze(Math.expm1(e)*Math.cos(t)+E9t(t),Math.exp(e)*Math.sin(t))},log:function(){const e=this.re,t=this.im;return t===0&&e>0?new Ze(Math.log(e),0):new Ze(MH(e,t),Math.atan2(t,e))},abs:function(){return FH(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const e=this.re,t=this.im;return new Ze(Math.sin(e)*Iu(t),Math.cos(e)*dd(t))},cos:function(){const e=this.re,t=this.im;return new Ze(Math.cos(e)*Iu(t),-Math.sin(e)*dd(t))},tan:function(){const e=2*this.re,t=2*this.im,n=Math.cos(e)+Iu(t);return new Ze(Math.sin(e)/n,dd(t)/n)},cot:function(){const e=2*this.re,t=2*this.im,n=Math.cos(e)-Iu(t);return new Ze(-Math.sin(e)/n,dd(t)/n)},sec:function(){const e=this.re,t=this.im,n=.5*Iu(2*t)+.5*Math.cos(2*e);return new Ze(Math.cos(e)*Iu(t)/n,Math.sin(e)*dd(t)/n)},csc:function(){const e=this.re,t=this.im,n=.5*Iu(2*t)-.5*Math.cos(2*e);return new Ze(Math.sin(e)*Iu(t)/n,-Math.cos(e)*dd(t)/n)},asin:function(){const e=this.re,t=this.im,n=new Ze(t*t-e*e+1,-2*e*t).sqrt(),r=new Ze(n.re-t,n.im+e).log();return new Ze(r.im,-r.re)},acos:function(){const e=this.re,t=this.im,n=new Ze(t*t-e*e+1,-2*e*t).sqrt(),r=new Ze(n.re-t,n.im+e).log();return new Ze(Math.PI/2-r.im,r.re)},atan:function(){const e=this.re,t=this.im;if(e===0){if(t===1)return new Ze(0,1/0);if(t===-1)return new Ze(0,-1/0)}const n=e*e+(1-t)*(1-t),r=new Ze((1-t*t-e*e)/n,-2*e/n).log();return new Ze(-.5*r.im,.5*r.re)},acot:function(){const e=this.re,t=this.im;if(t===0)return new Ze(Math.atan2(1,e),0);const n=e*e+t*t;return n!==0?new Ze(e/n,-t/n).atan():new Ze(e!==0?e/0:0,t!==0?-t/0:0).atan()},asec:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new Ze(0,1/0);const n=e*e+t*t;return n!==0?new Ze(e/n,-t/n).acos():new Ze(e!==0?e/0:0,t!==0?-t/0:0).acos()},acsc:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new Ze(Math.PI/2,1/0);const n=e*e+t*t;return n!==0?new Ze(e/n,-t/n).asin():new Ze(e!==0?e/0:0,t!==0?-t/0:0).asin()},sinh:function(){const e=this.re,t=this.im;return new Ze(dd(e)*Math.cos(t),Iu(e)*Math.sin(t))},cosh:function(){const e=this.re,t=this.im;return new Ze(Iu(e)*Math.cos(t),dd(e)*Math.sin(t))},tanh:function(){const e=2*this.re,t=2*this.im,n=Iu(e)+Math.cos(t);return new Ze(dd(e)/n,Math.sin(t)/n)},coth:function(){const e=2*this.re,t=2*this.im,n=Iu(e)-Math.cos(t);return new Ze(dd(e)/n,-Math.sin(t)/n)},csch:function(){const e=this.re,t=this.im,n=Math.cos(2*t)-Iu(2*e);return new Ze(-2*dd(e)*Math.cos(t)/n,2*Iu(e)*Math.sin(t)/n)},sech:function(){const e=this.re,t=this.im,n=Math.cos(2*t)+Iu(2*e);return new Ze(2*Iu(e)*Math.cos(t)/n,-2*dd(e)*Math.sin(t)/n)},asinh:function(){let e=this.im;this.im=-this.re,this.re=e;const t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){const e=this.acos();if(e.im<=0){const t=e.re;e.re=-e.im,e.im=t}else{const t=e.im;e.im=-e.re,e.re=t}return e},atanh:function(){const e=this.re,t=this.im,n=e>1&&t===0,r=1-e,i=1+e,s=r*r+t*t,o=s!==0?new Ze((i*r-t*t)/s,(t*r+i*t)/s):new Ze(e!==-1?e/0:0,t!==0?t/0:0),a=o.re;return o.re=MH(o.re,o.im)/2,o.im=Math.atan2(o.im,a)/2,n&&(o.im=-o.im),o},acoth:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new Ze(0,Math.PI/2);const n=e*e+t*t;return n!==0?new Ze(e/n,-t/n).atanh():new Ze(e!==0?e/0:0,t!==0?-t/0:0).atanh()},acsch:function(){const e=this.re,t=this.im;if(t===0)return new Ze(e!==0?Math.log(e+Math.sqrt(e*e+1)):1/0,0);const n=e*e+t*t;return n!==0?new Ze(e/n,-t/n).asinh():new Ze(e!==0?e/0:0,t!==0?-t/0:0).asinh()},asech:function(){const e=this.re,t=this.im;if(this.isZero())return Ze.INFINITY;const n=e*e+t*t;return n!==0?new Ze(e/n,-t/n).acosh():new Ze(e!==0?e/0:0,t!==0?-t/0:0).acosh()},inverse:function(){if(this.isZero())return Ze.INFINITY;if(this.isInfinite())return Ze.ZERO;const e=this.re,t=this.im,n=e*e+t*t;return new Ze(e/n,-t/n)},conjugate:function(){return new Ze(this.re,-this.im)},neg:function(){return new Ze(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new Ze(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new Ze(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new Ze(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){const n=Vx(e,t);return Math.abs(n.re-this.re)<=Ze.EPSILON&&Math.abs(n.im-this.im)<=Ze.EPSILON},clone:function(){return new Ze(this.re,this.im)},toString:function(){let e=this.re,t=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<Ze.EPSILON&&(e=0),Math.abs(t)<Ze.EPSILON&&(t=0),t===0?n+e:(e!==0?(n+=e,n+=" ",t<0?(t=-t,n+="-"):n+="+",n+=" "):t<0&&(t=-t,n+="-"),t!==1&&(n+=t),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};Ze.ZERO=new Ze(0,0);Ze.ONE=new Ze(1,0);Ze.I=new Ze(0,1);Ze.PI=new Ze(Math.PI,0);Ze.E=new Ze(Math.E,0);Ze.INFINITY=new Ze(1/0,1/0);Ze.NAN=new Ze(NaN,NaN);Ze.EPSILON=1e-15;var C9t="Complex",T9t=[],A9t=ni(C9t,T9t,()=>(Object.defineProperty(Ze,"name",{value:"Complex"}),Ze.prototype.constructor=Ze,Ze.prototype.type="Complex",Ze.prototype.isComplex=!0,Ze.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Ze.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Ze.prototype.format=function(e){var t="",n=this.im,r=this.re,i=PK(this.re,e),s=PK(this.im,e),o=bs(e)?e:e?e.precision:null;if(o!==null){var a=Math.pow(10,-o);Math.abs(r/n)<a&&(r=0),Math.abs(n/r)<a&&(n=0)}return n===0?t=i:r===0?n===1?t="i":n===-1?t="-i":t=s+"i":n<0?n===-1?t=i+" - i":t=i+" - "+s.substring(1)+"i":n===1?t=i+" + i":t=i+" + "+s+"i",t},Ze.fromPolar=function(e){switch(arguments.length){case 1:{var t=arguments[0];if(typeof t=="object")return Ze(t);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(bs(n)){if(A8e(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),bs(r))return new Ze({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Ze.prototype.valueOf=Ze.prototype.toString,Ze.fromJSON=function(e){return new Ze(e)},Ze.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},Ze),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(e){if(isNaN(e))throw new Error("");return e});const hn=BigInt(0),ar=BigInt(1),c3=BigInt(2),jK=BigInt(5),hc=BigInt(10),D9t=2e3,$t={s:ar,n:hn,d:ar};function q0(e,t){try{e=BigInt(e)}catch{throw c1()}return e*t}function vh(e){return typeof e=="bigint"?e:Math.floor(e)}function Ns(e,t){if(t===hn)throw mie();const n=Object.create(yd.prototype);n.s=e<hn?-ar:ar,e=e<hn?-e:e;const r=Qx(e,t);return n.n=e/r,n.d=t/r,n}function r2(e){const t={};let n=e,r=c3,i=jK-ar;for(;i<=n;){for(;n%r===hn;)n/=r,t[r]=(t[r]||hn)+ar;i+=ar+c3*r++}return n!==e?n>1&&(t[n]=(t[n]||hn)+ar):t[e]=(t[e]||hn)+ar,t}const _a=function(e,t){let n=hn,r=ar,i=ar;if(e!=null)if(t!==void 0){if(typeof e=="bigint")n=e;else{if(isNaN(e))throw c1();if(e%1!==0)throw gbe();n=BigInt(e)}if(typeof t=="bigint")r=t;else{if(isNaN(t))throw c1();if(t%1!==0)throw gbe();r=BigInt(t)}i=n*r}else if(typeof e=="object"){if("d"in e&&"n"in e)n=BigInt(e.n),r=BigInt(e.d),"s"in e&&(n*=BigInt(e.s));else if(0 in e)n=BigInt(e[0]),1 in e&&(r=BigInt(e[1]));else if(typeof e=="bigint")n=e;else throw c1();i=n*r}else if(typeof e=="number"){if(isNaN(e))throw c1();if(e<0&&(i=-ar,e=-e),e%1===0)n=BigInt(e);else if(e>0){let s=1,o=0,a=1,u=1,l=1,c=1e7;for(e>=1&&(s=10**Math.floor(1+Math.log10(e)),e/=s);a<=c&&l<=c;){let f=(o+u)/(a+l);if(e===f){a+l<=c?(n=o+u,r=a+l):l>a?(n=u,r=l):(n=o,r=a);break}else e>f?(o+=u,a+=l):(u+=o,l+=a),a>c?(n=u,r=l):(n=o,r=a)}n=BigInt(n)*BigInt(s),r=BigInt(r)}}else if(typeof e=="string"){let s=0,o=hn,a=hn,u=hn,l=ar,c=ar,f=e.replace(/_/g,"").match(/\d+|./g);if(f===null)throw c1();if(f[s]==="-"?(i=-ar,s++):f[s]==="+"&&s++,f.length===s+1?a=q0(f[s++],i):f[s+1]==="."||f[s]==="."?(f[s]!=="."&&(o=q0(f[s++],i)),s++,(s+1===f.length||f[s+1]==="("&&f[s+3]===")"||f[s+1]==="'"&&f[s+3]==="'")&&(a=q0(f[s],i),l=hc**BigInt(f[s].length),s++),(f[s]==="("&&f[s+2]===")"||f[s]==="'"&&f[s+2]==="'")&&(u=q0(f[s+1],i),c=hc**BigInt(f[s+1].length)-ar,s+=3)):f[s+1]==="/"||f[s+1]===":"?(a=q0(f[s],i),l=q0(f[s+2],ar),s+=3):f[s+3]==="/"&&f[s+1]===" "&&(o=q0(f[s],i),a=q0(f[s+2],i),l=q0(f[s+4],ar),s+=5),f.length<=s)r=l*c,i=n=u+r*o+c*a;else throw c1()}else if(typeof e=="bigint")n=e,i=e,r=ar;else throw c1();if(r===hn)throw mie();$t.s=i<hn?-ar:ar,$t.n=n<hn?-n:n,$t.d=r<hn?-r:r};function I9t(e,t,n){let r=ar;for(;t>hn;e=e*e%n,t>>=ar)t&ar&&(r=r*e%n);return r}function k9t(e,t){for(;t%c3===hn;t/=c3);for(;t%jK===hn;t/=jK);if(t===ar)return hn;let n=hc%t,r=1;for(;n!==ar;r++)if(n=n*hc%t,r>D9t)return hn;return BigInt(r)}function R9t(e,t,n){let r=ar,i=I9t(hc,n,t);for(let s=0;s<300;s++){if(r===i)return BigInt(s);r=r*hc%t,i=i*hc%t}return 0}function Qx(e,t){if(!e)return t;if(!t)return e;for(;;){if(e%=t,!e)return t;if(t%=e,!t)return e}}function yd(e,t){if(_a(e,t),this instanceof yd)e=Qx($t.d,$t.n),this.s=$t.s,this.n=$t.n/e,this.d=$t.d/e;else return Ns($t.s*$t.n,$t.d)}var mie=function(){return new Error("Division by Zero")},c1=function(){return new Error("Invalid argument")},gbe=function(){return new Error("Parameters must be integer")};yd.prototype={s:ar,n:hn,d:ar,abs:function(){return Ns(this.n,this.d)},neg:function(){return Ns(-this.s*this.n,this.d)},add:function(e,t){return _a(e,t),Ns(this.s*this.n*$t.d+$t.s*this.d*$t.n,this.d*$t.d)},sub:function(e,t){return _a(e,t),Ns(this.s*this.n*$t.d-$t.s*this.d*$t.n,this.d*$t.d)},mul:function(e,t){return _a(e,t),Ns(this.s*$t.s*this.n*$t.n,this.d*$t.d)},div:function(e,t){return _a(e,t),Ns(this.s*$t.s*this.n*$t.d,this.d*$t.n)},clone:function(){return Ns(this.s*this.n,this.d)},mod:function(e,t){if(e===void 0)return Ns(this.s*this.n%this.d,ar);if(_a(e,t),hn===$t.n*this.d)throw mie();return Ns(this.s*($t.d*this.n)%($t.n*this.d),$t.d*this.d)},gcd:function(e,t){return _a(e,t),Ns(Qx($t.n,this.n)*Qx($t.d,this.d),$t.d*this.d)},lcm:function(e,t){return _a(e,t),$t.n===hn&&this.n===hn?Ns(hn,ar):Ns($t.n*this.n,Qx($t.n,this.n)*Qx($t.d,this.d))},inverse:function(){return Ns(this.s*this.d,this.n)},pow:function(e,t){if(_a(e,t),$t.d===ar)return $t.s<hn?Ns((this.s*this.d)**$t.n,this.n**$t.n):Ns((this.s*this.n)**$t.n,this.d**$t.n);if(this.s<hn)return null;let n=r2(this.n),r=r2(this.d),i=ar,s=ar;for(let o in n)if(o!=="1"){if(o==="0"){i=hn;break}if(n[o]*=$t.n,n[o]%$t.d===hn)n[o]/=$t.d;else return null;i*=BigInt(o)**n[o]}for(let o in r)if(o!=="1"){if(r[o]*=$t.n,r[o]%$t.d===hn)r[o]/=$t.d;else return null;s*=BigInt(o)**r[o]}return $t.s<hn?Ns(s,i):Ns(i,s)},log:function(e,t){if(_a(e,t),this.s<=hn||$t.s<=hn)return null;const n={},r=r2($t.n),i=r2($t.d),s=r2(this.n),o=r2(this.d);for(const l in i)r[l]=(r[l]||hn)-i[l];for(const l in o)s[l]=(s[l]||hn)-o[l];for(const l in r)l!=="1"&&(n[l]=!0);for(const l in s)l!=="1"&&(n[l]=!0);let a=null,u=null;for(const l in n){const c=r[l]||hn,f=s[l]||hn;if(c===hn){if(f!==hn)return null;continue}let d=f,h=c;const p=Qx(d,h);if(d/=p,h/=p,a===null&&u===null)a=d,u=h;else if(d*u!==a*h)return null}return a!==null&&u!==null?Ns(a,u):null},equals:function(e,t){return _a(e,t),this.s*this.n*$t.d===$t.s*$t.n*this.d},lt:function(e,t){return _a(e,t),this.s*this.n*$t.d<$t.s*$t.n*this.d},lte:function(e,t){return _a(e,t),this.s*this.n*$t.d<=$t.s*$t.n*this.d},gt:function(e,t){return _a(e,t),this.s*this.n*$t.d>$t.s*$t.n*this.d},gte:function(e,t){return _a(e,t),this.s*this.n*$t.d>=$t.s*$t.n*this.d},compare:function(e,t){_a(e,t);let n=this.s*this.n*$t.d-$t.s*$t.n*this.d;return(hn<n)-(n<hn)},ceil:function(e){return e=hc**BigInt(e||0),Ns(vh(this.s*e*this.n/this.d)+(e*this.n%this.d>hn&&this.s>=hn?ar:hn),e)},floor:function(e){return e=hc**BigInt(e||0),Ns(vh(this.s*e*this.n/this.d)-(e*this.n%this.d>hn&&this.s<hn?ar:hn),e)},round:function(e){return e=hc**BigInt(e||0),Ns(vh(this.s*e*this.n/this.d)+this.s*((this.s>=hn?ar:hn)+c3*(e*this.n%this.d)>this.d?ar:hn),e)},roundTo:function(e,t){_a(e,t);const n=this.n*$t.d,r=this.d*$t.n,i=n%r;let s=vh(n/r);return i+i>=r&&s++,Ns(this.s*s*$t.n,$t.d)},divisible:function(e,t){return _a(e,t),!(!($t.n*this.d)||this.n*$t.d%($t.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(e){let t=this.n,n=this.d;e=e||15;let r=k9t(t,n),i=R9t(t,n,r),s=this.s<hn?"-":"";if(s+=vh(t/n),t%=n,t*=hc,t&&(s+="."),r){for(let o=i;o--;)s+=vh(t/n),t%=n,t*=hc;s+="(";for(let o=r;o--;)s+=vh(t/n),t%=n,t*=hc;s+=")"}else for(let o=e;t&&o--;)s+=vh(t/n),t%=n,t*=hc;return s},toFraction:function(e){let t=this.n,n=this.d,r=this.s<hn?"-":"";if(n===ar)r+=t;else{let i=vh(t/n);e&&i>hn&&(r+=i,r+=" ",t%=n),r+=t,r+="/",r+=n}return r},toLatex:function(e){let t=this.n,n=this.d,r=this.s<hn?"-":"";if(n===ar)r+=t;else{let i=vh(t/n);e&&i>hn&&(r+=i,t%=n),r+="\\frac{",r+=t,r+="}{",r+=n,r+="}"}return r},toContinued:function(){let e=this.n,t=this.d,n=[];do{n.push(vh(e/t));let r=e%t;e=t,t=r}while(e!==ar);return n},simplify:function(e){const t=BigInt(1/(e||.001)|0),n=this.abs(),r=n.toContinued();for(let i=1;i<r.length;i++){let s=Ns(r[i-1],ar);for(let a=i-2;a>=0;a--)s=s.inverse().add(r[a]);let o=s.sub(n);if(o.n*t<o.d)return s.mul(this.s)}return this}};var N9t="Fraction",P9t=[],O9t=ni(N9t,P9t,()=>(Object.defineProperty(yd,"name",{value:"Fraction"}),yd.prototype.constructor=yd,yd.prototype.type="Fraction",yd.prototype.isFraction=!0,yd.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},yd.fromJSON=function(e){return new yd(e)},yd),{isClass:!0}),F9t="Matrix",M9t=[],$9t=ni(F9t,M9t,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(t,n){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(t,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(t,n,r){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(t,n){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(t,n){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(t,n){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function $H(e,t,n){var r=e.constructor,i=new r(2),s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Gs(n))throw new Error("size must be an integer");if(e.greaterThan(i.pow(n-1).sub(1))||e.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(i.pow(n))),s="i".concat(n)}switch(t){case 2:return"".concat(e.toBinary()).concat(s);case 8:return"".concat(e.toOctal()).concat(s);case 16:return"".concat(e.toHexadecimal()).concat(s);default:throw new Error("Base ".concat(t," not supported "))}}function L9t(e,t){if(typeof t=="function")return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:i}=I8e(t);switch(n){case"fixed":return j9t(e,r);case"exponential":return ybe(e,r);case"engineering":return B9t(e,r);case"bin":return $H(e,2,i);case"oct":return $H(e,8,i);case"hex":return $H(e,16,i);case"auto":{var s=vbe(t==null?void 0:t.lowerExp,-3),o=vbe(t==null?void 0:t.upperExp,5);if(e.isZero())return"0";var a,u=e.toSignificantDigits(r),l=u.e;return l>=s&&l<o?a=u.toFixed():a=ybe(e,r),a.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function B9t(e,t){var n=e.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,i=e.mul(Math.pow(10,-r)),s=i.toPrecision(t);if(s.includes("e")){var o=e.constructor;s=new o(s).toFixed()}return s+"e"+(n>=0?"+":"")+r.toString()}function ybe(e,t){return t!==void 0?e.toExponential(t-1):e.toExponential()}function j9t(e,t){return e.toFixed(t)}function vbe(e,t){return bs(e)?e:Wo(e)?e.toNumber():t}function Uo(e,t){var n=U9t(e,t);return t&&typeof t=="object"&&"truncate"in t&&n.length>t.truncate?n.substring(0,t.truncate-3)+"...":n}function U9t(e,t){if(typeof e=="number")return PK(e,t);if(Wo(e))return L9t(e,t);if(z9t(e))return!t||t.fraction!=="decimal"?"".concat(e.s*e.n,"/").concat(e.d):e.toString();if(Array.isArray(e))return V8e(e,t);if(sg(e))return bbe(e);if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var n=Object.keys(e).map(r=>bbe(r)+": "+Uo(e[r],t));return"{"+n.join(", ")+"}"}return String(e)}function bbe(e){for(var t=String(e),n="",r=0;r<t.length;){var i=t.charAt(r);n+=i in xbe?xbe[i]:i,r++}return'"'+n+'"'}var xbe={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function V8e(e,t){if(Array.isArray(e)){for(var n="[",r=e.length,i=0;i<r;i++)i!==0&&(n+=", "),n+=V8e(e[i],t);return n+="]",n}else return Uo(e,t)}function z9t(e){return e&&typeof e=="object"&&typeof e.s=="bigint"&&typeof e.n=="bigint"&&typeof e.d=="bigint"||!1}function js(e,t,n){if(!(this instanceof js))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}js.prototype=new RangeError;js.prototype.constructor=RangeError;js.prototype.name="DimensionError";js.prototype.isDimensionError=!0;function cA(e,t,n){if(!(this instanceof cA))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}cA.prototype=new RangeError;cA.prototype.constructor=RangeError;cA.prototype.name="IndexError";cA.prototype.isIndexError=!0;function Fl(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function H8e(e,t,n){var r,i=e.length;if(i!==t[n])throw new js(i,t[n]);if(n<t.length-1){var s=n+1;for(r=0;r<i;r++){var o=e[r];if(!Array.isArray(o))throw new js(t.length-1,t.length,"<");H8e(e[r],t,s)}}else for(r=0;r<i;r++)if(Array.isArray(e[r]))throw new js(t.length+1,t.length,">")}function wbe(e,t){var n=t.length===0;if(n){if(Array.isArray(e))throw new js(e.length,0)}else H8e(e,t,0)}function no(e,t){if(e!==void 0){if(!bs(e)||!Gs(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof t=="number"&&e>=t)throw new cA(e,t)}}function UK(e,t,n){if(!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Error("Resizing to scalar is not supported");t.forEach(function(i){if(!bs(i)||!Gs(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Uo(t)+")")}),(bs(e)||Wo(e))&&(e=[e]);var r=n!==void 0?n:0;return zK(e,t,0,r),e}function zK(e,t,n,r){var i,s,o=e.length,a=t[n],u=Math.min(o,a);if(e.length=a,n<t.length-1){var l=n+1;for(i=0;i<u;i++)s=e[i],Array.isArray(s)||(s=[s],e[i]=s),zK(s,t,l,r);for(i=u;i<a;i++)s=[],e[i]=s,zK(s,t,l,r)}else{for(i=0;i<u;i++)for(;Array.isArray(e[i]);)e[i]=e[i][0];for(i=u;i<a;i++)e[i]=r}}function q8e(e,t){var n=H9t(e),r=n.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new js(0,r,"!=");t=gie(t,r);var i=W8e(t);if(r!==i)throw new js(i,r,"!=");try{return V9t(n,t)}catch(s){throw s instanceof js?new js(i,r,"!="):s}}function gie(e,t){var n=W8e(e),r=e.slice(),i=-1,s=e.indexOf(i),o=e.indexOf(i,s+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var a=s>=0,u=t%n===0;if(a)if(u)r[s]=-t/n;else throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-n);return r}function W8e(e){return e.reduce((t,n)=>t*n,1)}function V9t(e,t){for(var n=e,r,i=t.length-1;i>0;i--){var s=t[i];r=[];for(var o=n.length/s,a=0;a<o;a++)r.push(n.slice(a*s,(a+1)*s));n=r}return n}function G8e(e,t,n,r){var i=r||Fl(e);if(n)for(var s=0;s<n;s++)e=[e],i.unshift(1);for(e=Y8e(e,t,0);i.length<t;)i.push(1);return e}function Y8e(e,t,n){var r,i;if(Array.isArray(e)){var s=n+1;for(r=0,i=e.length;r<i;r++)e[r]=Y8e(e[r],t,s)}else for(var o=n;o<t;o++)e=[e];return e}function H9t(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function n(r){Array.isArray(r)?r.forEach(n):t.push(r)}),t}function yie(e,t){for(var n,r=0,i=0;i<e.length;i++){var s=e[i],o=Array.isArray(s);if(i===0&&o&&(r=s.length),o&&s.length!==r)return;var a=o?yie(s,t):t(s);if(n===void 0)n=a;else if(n!==a)return"mixed"}return n}function K8e(e,t,n,r){if(r<n){if(e.length!==t.length)throw new js(e.length,t.length);for(var i=[],s=0;s<e.length;s++)i[s]=K8e(e[s],t[s],n,r+1);return i}else return e.concat(t)}function q9t(){var e=Array.prototype.slice.call(arguments,0,-1),t=Array.prototype.slice.call(arguments,-1);if(e.length===1)return e[0];if(e.length>1)return e.slice(1).reduce(function(n,r){return K8e(n,r,t,0)},e[0]);throw new Error("Wrong number of arguments in function concat")}function W9t(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t.map(d=>d.length),i=Math.max(...r),s=new Array(i).fill(null),o=0;o<t.length;o++)for(var a=t[o],u=r[o],l=0;l<u;l++){var c=i-u+l;a[l]>s[c]&&(s[c]=a[l])}for(var f=0;f<t.length;f++)X8e(t[f],s);return s}function X8e(e,t){for(var n=t.length,r=e.length,i=0;i<r;i++){var s=n-r+i;if(e[i]<t[s]&&e[i]>1||e[i]>t[s])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(e,") not possible to broadcast dimension ").concat(r," with size ").concat(e[i]," to size ").concat(t[s]))}}function _be(e,t){var n=Fl(e);if($C(n,t))return e;X8e(n,t);var r=W9t(n,t),i=r.length,s=[...Array(i-n.length).fill(1),...n],o=Y9t(e);n.length<i&&(o=q8e(o,s),n=Fl(o));for(var a=0;a<i;a++)n[a]<r[a]&&(o=G9t(o,r[a],a),n=Fl(o));return o}function G9t(e,t,n){return q9t(...Array(t).fill(e),n)}function Q8e(e,t){if(!Array.isArray(e))throw new Error("Array expected");var n=Fl(e);if(t.length!==n.length)throw new js(t.length,n.length);for(var r=0;r<t.length;r++)no(t[r],n[r]);return t.reduce((i,s)=>i[s],e)}function Y9t(e){return aC([],e)}function P5(e,t,n){if(D5.isTypedFunction(e)){var r=(t.isMatrix?t.size():Fl(t)).map(()=>0),i=t.isMatrix?t.get(r):Q8e(t,r),s=Object.keys(e.signatures).length===1,o=K9t(e,i,r,t),a=s?Object.values(e.signatures)[0]:e;return o>=1&&o<=3?function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return Ebe(a,l.slice(0,o),n,e.name)}:function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return Ebe(a,l,n,e.name)}}return e}function K9t(e,t,n,r){for(var i=[t,n,r],s=3;s>0;s--){var o=i.slice(0,s);if(D5.resolve(e,o)!==null)return s}}function Ebe(e,t,n,r){try{return e(...t)}catch(i){X9t(i,t,n,r)}}function X9t(e,t,n,r){var i;if(e instanceof TypeError&&((i=e.data)===null||i===void 0?void 0:i.category)==="wrongType"){var s=[];throw s.push("value: ".concat(hv(t[0]))),t.length>=2&&s.push("index: ".concat(hv(t[1]))),t.length>=3&&s.push("array: ".concat(hv(t[2]))),new TypeError("Function ".concat(n," cannot apply callback arguments ")+"".concat(r,"(").concat(s.join(", "),") at index ").concat(JSON.stringify(t[1])))}else throw new TypeError("Function ".concat(n," cannot apply callback arguments ")+"to function ".concat(r,": ").concat(e.message))}var Q9t="DenseMatrix",J9t=["Matrix"],Z9t=ni(Q9t,J9t,e=>{var{Matrix:t}=e;function n(c,f){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!sg(f))throw new Error("Invalid datatype: "+f);if(aa(c))c.type==="DenseMatrix"?(this._data=Eo(c._data),this._size=Eo(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&jo(c.data)&&jo(c.size))this._data=c.data,this._size=c.size,wbe(this._data,this._size),this._datatype=f||c.datatype;else if(jo(c))this._data=l(c),this._size=Fl(this._data),wbe(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+hv(c)+")");this._data=[],this._size=[0],this._datatype=f}}n.prototype=new t,n.prototype.createDenseMatrix=function(c,f){return new n(c,f)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return yie(this._data,hv)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(c,f){return new n(c,f)},n.prototype.subset=function(c,f,d){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return s(this,c,f,d);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(c){return Q8e(this._data,c)},n.prototype.set=function(c,f,d){if(!jo(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new js(c.length,this._size.length,"<");var h,p,m,g=c.map(function(v){return v+1});u(this,g,d);var y=this._data;for(h=0,p=c.length-1;h<p;h++)m=c[h],no(m,y.length),y=y[m];return m=c[c.length-1],no(m,y.length),y[m]=f,this};function r(c,f){if(!die(f))throw new TypeError("Invalid index");var d=f.isScalar();if(d)return c.get(f.min());var h=f.size();if(h.length!==c._size.length)throw new js(h.length,c._size.length);for(var p=f.min(),m=f.max(),g=0,y=c._size.length;g<y;g++)no(p[g],c._size[g]),no(m[g],c._size[g]);return new n(i(c._data,f,h.length,0),c._datatype)}function i(c,f,d,h){var p=h===d-1,m=f.dimension(h);return p?m.map(function(g){return no(g,c.length),c[g]}).valueOf():m.map(function(g){no(g,c.length);var y=c[g];return i(y,f,d,h+1)}).valueOf()}function s(c,f,d,h){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var p=f.size(),m=f.isScalar(),g;if(aa(d)?(g=d.size(),d=d.valueOf()):g=Fl(d),m){if(g.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),d,h)}else{if(!$C(g,p))try{g.length===0?d=_be([d],p):d=_be(d,p),g=Fl(d)}catch{}if(p.length<c._size.length)throw new js(p.length,c._size.length,"<");if(g.length<p.length){for(var y=0,v=0;p[y]===1&&g[y]===1;)y++;for(;p[y]===1;)v++,y++;d=G8e(d,p.length,v,g)}if(!$C(p,g))throw new js(p,g,">");var b=f.max().map(function(S){return S+1});u(c,b,h);var _=p.length,w=0;o(c._data,f,d,_,w)}return c}function o(c,f,d,h,p){var m=p===h-1,g=f.dimension(p);m?g.forEach(function(y,v){no(y),c[y]=d[v[0]]}):g.forEach(function(y,v){no(y),o(c[y],f,d[v[0]],h,p+1)})}n.prototype.resize=function(c,f,d){if(!T5(c))throw new TypeError("Array or Matrix expected");var h=c.valueOf().map(m=>Array.isArray(m)&&m.length===1?m[0]:m),p=d?this.clone():this;return a(p,h,f)};function a(c,f,d){if(f.length===0){for(var h=c._data;jo(h);)h=h[0];return h}return c._size=f.slice(0),c._data=UK(c._data,c._size,d),c}n.prototype.reshape=function(c,f){var d=f?this.clone():this;d._data=q8e(d._data,c);var h=d._size.reduce((p,m)=>p*m);return d._size=gie(c,h),d};function u(c,f,d){for(var h=c._size.slice(0),p=!1;h.length<f.length;)h.push(0),p=!0;for(var m=0,g=f.length;m<g;m++)f[m]>h[m]&&(h[m]=f[m],p=!0);p&&a(c,h,d)}n.prototype.clone=function(){var c=new n({data:Eo(this._data),size:Eo(this._size),datatype:this._datatype});return c},n.prototype.size=function(){return this._size.slice(0)},n.prototype._forEach=function(c){var f=this,d=f.size();if(d.length===1){for(var h=0;h<d[0];h++)c(f._data,h,[h]);return}var p=Array(d.length).fill(0),m=Array(d.length-1),g=m.length-1;m[0]=f._data[0];for(var y=0;y<g;y++)m[y+1]=m[y][0];for(p[g]=-1;;){var v=void 0;for(v=g;v>=0;v--){if(p[v]++,p[v]===d[v]){p[v]=0;continue}m[v]=v===0?f._data[p[v]]:m[v-1][p[v]];for(var b=v;b<g;b++)m[b+1]=m[b][0];for(var _=0;_<d[m.length];_++)p[m.length]=_,c(m[g],_,p.slice(0));break}if(v===-1)break}},n.prototype.map=function(c){var f=this,d=new n(f),h=P5(c,f._data,"map");return d._forEach(function(p,m,g){p[m]=h(p[m],g,f)}),d},n.prototype.forEach=function(c){var f=this,d=P5(c,f._data,"map");f._forEach(function(h,p,m){d(h[p],m,f)})},n.prototype[Symbol.iterator]=function*(){var c=function*(d,h){if(jo(d))for(var p=0;p<d.length;p++)yield*c(d[p],h.concat(p));else yield{value:d,index:h}};yield*c(this._data,[])},n.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var h of d)c.push(new n([h],this._datatype));return c},n.prototype.columns=function(){var c=this,f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,p=function(y){var v=h.map(b=>[b[y]]);f.push(new n(v,c._datatype))},m=0;m<d[1];m++)p(m);return f},n.prototype.toArray=function(){return Eo(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(c){return Uo(this._data,c)},n.prototype.toString=function(){return Uo(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(c){if(c){if(Wo(c)&&(c=c.toNumber()),!bs(c)||!Gs(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,d=c<0?-c:0,h=this._size[0],p=this._size[1],m=Math.min(h-d,p-f),g=[],y=0;y<m;y++)g[y]=this._data[y+d][y+f];return new n({data:g,size:[m],datatype:this._datatype})},n.diagonal=function(c,f,d,h){if(!jo(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(T){if(Wo(T)&&(T=T.toNumber()),!bs(T)||!Gs(T)||T<1)throw new Error("Size values must be positive integers");return T}),d){if(Wo(d)&&(d=d.toNumber()),!bs(d)||!Gs(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var p=d>0?d:0,m=d<0?-d:0,g=c[0],y=c[1],v=Math.min(g-m,y-p),b;if(jo(f)){if(f.length!==v)throw new Error("Invalid value array length");b=function(A){return f[A]}}else if(aa(f)){var _=f.size();if(_.length!==1||_[0]!==v)throw new Error("Invalid matrix length");b=function(A){return f.get([A])}}else b=function(){return f};h||(h=Wo(b(0))?b(0).mul(0):0);var w=[];if(c.length>0){w=UK(w,c,h);for(var S=0;S<v;S++)w[S+m][S+p]=b(S)}return new n({data:w,size:[g,y]})},n.fromJSON=function(c){return new n(c)},n.prototype.swapRows=function(c,f){if(!bs(c)||!Gs(c)||!bs(f)||!Gs(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return no(c,this._size[0]),no(f,this._size[0]),n._swapRows(c,f,this._data),this},n._swapRows=function(c,f,d){var h=d[c];d[c]=d[f],d[f]=h};function l(c){return aa(c)?l(c.valueOf()):jo(c)?c.map(l):c}return n},{isClass:!0});function jb(e,t,n){return e&&typeof e.map=="function"?e.map(function(r){return jb(r,t)}):t(e)}var J8e="number",m9="number, number";function Z8e(e){return Math.abs(e)}Z8e.signature=J8e;function e5e(e,t){return e+t}e5e.signature=m9;function t5e(e,t){return e-t}t5e.signature=m9;function n5e(e,t){return e*t}n5e.signature=m9;function r5e(e){return-e}r5e.signature=J8e;function i5e(e,t){return e*e<1&&t===1/0||e*e>1&&t===-1/0?0:Math.pow(e,t)}i5e.signature=m9;function VK(e,t){if(t<e)return 1;if(t===e)return t;var n=t+e>>1;return VK(e,n)*VK(n+1,t)}function O5(e){var t;if(Gs(e))return e<=0?isFinite(e)?1/0:NaN:e>171?1/0:VK(1,e-1);if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*O5(1-e));if(e>=171.35)return 1/0;if(e>85){var n=e*e,r=n*e,i=r*e,s=i*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*n)-139/(51840*r)-571/(2488320*i)+163879/(209018880*s)+5246819/(75246796800*s*e))}--e,t=PS[0];for(var o=1;o<PS.length;++o)t+=PS[o]/(e+o);var a=e+s5e+.5;return Math.sqrt(2*Math.PI)*Math.pow(a,e+.5)*Math.exp(-a)*t}O5.signature="number";var s5e=4.7421875,PS=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],o5e=.9189385332046728,e7t=5,t7t=7,Sbe=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function F5(e){if(e<0)return NaN;if(e===0)return 1/0;if(!isFinite(e))return e;if(e<.5)return Math.log(Math.PI/Math.sin(Math.PI*e))-F5(1-e);e=e-1;for(var t=e+e7t+.5,n=Sbe[0],r=t7t-1;r>=1;r--)n+=Sbe[r]/(e+r);return o5e+(e+.5)*Math.log(t)-t+Math.log(n)}F5.signature="number";function n7t(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return e.isNaN()||t.isNaN()?!1:!e.isFinite()||!t.isFinite()?e.eq(t):e.eq(t)?!0:e.minus(t).abs().lte(e.constructor.max(e.constructor.max(e.abs(),t.abs()).mul(n),r))}var Cbe="isZero",r7t=["typed","equalScalar"],i7t=ni(Cbe,r7t,e=>{var{typed:t,equalScalar:n}=e;return t(Cbe,{"number | BigNumber | Complex | Fraction":r=>n(r,0),bigint:r=>r===0n,Unit:t.referToSelf(r=>i=>t.find(r,i.valueType())(i.value)),"Array | Matrix":t.referToSelf(r=>i=>jb(i,r))})});function s7t(e,t,n,r){return I5(e.re,t.re,n,r)&&I5(e.im,t.im,n,r)}var o7t=ni("compareUnits",["typed"],e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return t.find(n,[r.valueType(),i.valueType()])(r.value,i.value)})}}),M5="equalScalar",a7t=["typed","config"],u7t=ni(M5,a7t,e=>{var{typed:t,config:n}=e,r=o7t({typed:t});return t(M5,{"boolean, boolean":function(s,o){return s===o},"number, number":function(s,o){return I5(s,o,n.relTol,n.absTol)},"BigNumber, BigNumber":function(s,o){return s.eq(o)||n7t(s,o,n.relTol,n.absTol)},"bigint, bigint":function(s,o){return s===o},"Fraction, Fraction":function(s,o){return s.equals(o)},"Complex, Complex":function(s,o){return s7t(s,o,n.relTol,n.absTol)}},r)});ni(M5,["typed","config"],e=>{var{typed:t,config:n}=e;return t(M5,{"number, number":function(i,s){return I5(i,s,n.relTol,n.absTol)}})});var l7t="SparseMatrix",c7t=["typed","equalScalar","Matrix"],f7t=ni(l7t,c7t,e=>{var{typed:t,equalScalar:n,Matrix:r}=e;function i(m,g){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(g&&!sg(g))throw new Error("Invalid datatype: "+g);if(aa(m))s(this,m,g);else if(m&&jo(m.index)&&jo(m.ptr)&&jo(m.size))this._values=m.values,this._index=m.index,this._ptr=m.ptr,this._size=m.size,this._datatype=g||m.datatype;else if(jo(m))o(this,m,g);else{if(m)throw new TypeError("Unsupported type of data ("+hv(m)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=g}}function s(m,g,y){g.type==="SparseMatrix"?(m._values=g._values?Eo(g._values):void 0,m._index=Eo(g._index),m._ptr=Eo(g._ptr),m._size=Eo(g._size),m._datatype=y||g._datatype):o(m,g.valueOf(),y||g._datatype)}function o(m,g,y){m._values=[],m._index=[],m._ptr=[],m._datatype=y;var v=g.length,b=0,_=n,w=0;if(sg(y)&&(_=t.find(n,[y,y])||n,w=t.convert(0,y)),v>0){var S=0;do{m._ptr.push(m._index.length);for(var T=0;T<v;T++){var A=g[T];if(jo(A)){if(S===0&&b<A.length&&(b=A.length),S<A.length){var k=A[S];_(k,w)||(m._values.push(k),m._index.push(T))}}else S===0&&b<1&&(b=1),_(A,w)||(m._values.push(A),m._index.push(T))}S++}while(S<b)}m._ptr.push(m._index.length),m._size=[v,b]}i.prototype=new r,i.prototype.createSparseMatrix=function(m,g){return new i(m,g)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return yie(this._values,hv)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(m,g){return new i(m,g)},i.prototype.density=function(){var m=this._size[0],g=this._size[1];return m!==0&&g!==0?this._index.length/(m*g):0},i.prototype.subset=function(m,g,y){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return a(this,m);case 2:case 3:return u(this,m,g,y);default:throw new SyntaxError("Wrong number of arguments")}};function a(m,g){if(!die(g))throw new TypeError("Invalid index");var y=g.isScalar();if(y)return m.get(g.min());var v=g.size();if(v.length!==m._size.length)throw new js(v.length,m._size.length);var b,_,w,S,T=g.min(),A=g.max();for(b=0,_=m._size.length;b<_;b++)no(T[b],m._size[b]),no(A[b],m._size[b]);var k=m._values,I=m._index,R=m._ptr,F=g.dimension(0),O=g.dimension(1),L=[],H=[];F.forEach(function(J,$){H[J]=$[0],L[J]=!0});var U=k?[]:void 0,G=[],Y=[];return O.forEach(function(J){for(Y.push(G.length),w=R[J],S=R[J+1];w<S;w++)b=I[w],L[b]===!0&&(G.push(H[b]),U&&U.push(k[w]))}),Y.push(G.length),new i({values:U,index:G,ptr:Y,size:v,datatype:m._datatype})}function u(m,g,y,v){if(!g||g.isIndex!==!0)throw new TypeError("Invalid index");var b=g.size(),_=g.isScalar(),w;if(aa(y)?(w=y.size(),y=y.toArray()):w=Fl(y),_){if(w.length!==0)throw new TypeError("Scalar expected");m.set(g.min(),y,v)}else{if(b.length!==1&&b.length!==2)throw new js(b.length,m._size.length,"<");if(w.length<b.length){for(var S=0,T=0;b[S]===1&&w[S]===1;)S++;for(;b[S]===1;)T++,S++;y=G8e(y,b.length,T,w)}if(!$C(b,w))throw new js(b,w,">");if(b.length===1){var A=g.dimension(0);A.forEach(function(R,F){no(R),m.set([R,0],y[F[0]],v)})}else{var k=g.dimension(0),I=g.dimension(1);k.forEach(function(R,F){no(R),I.forEach(function(O,L){no(O),m.set([R,O],y[F[0]][L[0]],v)})})}}return m}i.prototype.get=function(m){if(!jo(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new js(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var g=m[0],y=m[1];no(g,this._size[0]),no(y,this._size[1]);var v=l(g,this._ptr[y],this._ptr[y+1],this._index);return v<this._ptr[y+1]&&this._index[v]===g?this._values[v]:0},i.prototype.set=function(m,g,y){if(!jo(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new js(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var v=m[0],b=m[1],_=this._size[0],w=this._size[1],S=n,T=0;sg(this._datatype)&&(S=t.find(n,[this._datatype,this._datatype])||n,T=t.convert(0,this._datatype)),(v>_-1||b>w-1)&&(d(this,Math.max(v+1,_),Math.max(b+1,w),y),_=this._size[0],w=this._size[1]),no(v,_),no(b,w);var A=l(v,this._ptr[b],this._ptr[b+1],this._index);return A<this._ptr[b+1]&&this._index[A]===v?S(g,T)?c(A,b,this._values,this._index,this._ptr):this._values[A]=g:S(g,T)||f(A,v,b,g,this._values,this._index,this._ptr),this};function l(m,g,y,v){if(y-g===0)return y;for(var b=g;b<y;b++)if(v[b]===m)return b;return g}function c(m,g,y,v,b){y.splice(m,1),v.splice(m,1);for(var _=g+1;_<b.length;_++)b[_]--}function f(m,g,y,v,b,_,w){b.splice(m,0,v),_.splice(m,0,g);for(var S=y+1;S<w.length;S++)w[S]++}i.prototype.resize=function(m,g,y){if(!T5(m))throw new TypeError("Array or Matrix expected");var v=m.valueOf().map(_=>Array.isArray(_)&&_.length===1?_[0]:_);if(v.length!==2)throw new Error("Only two dimensions matrix are supported");v.forEach(function(_){if(!bs(_)||!Gs(_)||_<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Uo(v)+")")});var b=y?this.clone():this;return d(b,v[0],v[1],g)};function d(m,g,y,v){var b=v||0,_=n,w=0;sg(m._datatype)&&(_=t.find(n,[m._datatype,m._datatype])||n,w=t.convert(0,m._datatype),b=t.convert(b,m._datatype));var S=!_(b,w),T=m._size[0],A=m._size[1],k,I,R;if(y>A){for(I=A;I<y;I++)if(m._ptr[I]=m._values.length,S)for(k=0;k<T;k++)m._values.push(b),m._index.push(k);m._ptr[y]=m._values.length}else y<A&&(m._ptr.splice(y+1,A-y),m._values.splice(m._ptr[y],m._values.length),m._index.splice(m._ptr[y],m._index.length));if(A=y,g>T){if(S){var F=0;for(I=0;I<A;I++){m._ptr[I]=m._ptr[I]+F,R=m._ptr[I+1]+F;var O=0;for(k=T;k<g;k++,O++)m._values.splice(R+O,0,b),m._index.splice(R+O,0,k),F++}m._ptr[A]=m._values.length}}else if(g<T){var L=0;for(I=0;I<A;I++){m._ptr[I]=m._ptr[I]-L;var H=m._ptr[I],U=m._ptr[I+1]-L;for(R=H;R<U;R++)k=m._index[R],k>g-1&&(m._values.splice(R,1),m._index.splice(R,1),L++)}m._ptr[I]=m._values.length}return m._size[0]=g,m._size[1]=y,m}i.prototype.reshape=function(m,g){if(!jo(m))throw new TypeError("Array expected");if(m.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");m.forEach(function(J){if(!bs(J)||!Gs(J)||J<=-2||J===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Uo(m)+")")});var y=this._size[0]*this._size[1];m=gie(m,y);var v=m[0]*m[1];if(y!==v)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var b=g?this.clone():this;if(this._size[0]===m[0]&&this._size[1]===m[1])return b;for(var _=[],w=0;w<b._ptr.length;w++)for(var S=0;S<b._ptr[w+1]-b._ptr[w];S++)_.push(w);for(var T=b._values.slice(),A=b._index.slice(),k=0;k<b._index.length;k++){var I=A[k],R=_[k],F=I*b._size[1]+R;_[k]=F%m[1],A[k]=Math.floor(F/m[1])}b._values.length=0,b._index.length=0,b._ptr.length=m[1]+1,b._size=m.slice();for(var O=0;O<b._ptr.length;O++)b._ptr[O]=0;for(var L=0;L<T.length;L++){var H=A[L],U=_[L],G=T[L],Y=l(H,b._ptr[U],b._ptr[U+1],b._index);f(Y,H,U,G,b._values,b._index,b._ptr)}return b},i.prototype.clone=function(){var m=new i({values:this._values?Eo(this._values):void 0,index:Eo(this._index),ptr:Eo(this._ptr),size:Eo(this._size),datatype:this._datatype});return m},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(m,g){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var y=this,v=this._size[0],b=this._size[1],_=P5(m,y,"map"),w=function(T,A,k){return _(T,[A,k],y)};return h(this,0,v-1,0,b-1,w,g)};function h(m,g,y,v,b,_,w){var S=[],T=[],A=[],k=n,I=0;sg(m._datatype)&&(k=t.find(n,[m._datatype,m._datatype])||n,I=t.convert(0,m._datatype));for(var R=function(B,q,Z){var re=_(B,q,Z);k(re,I)||(S.push(re),T.push(q))},F=v;F<=b;F++){A.push(S.length);var O=m._ptr[F],L=m._ptr[F+1];if(w)for(var H=O;H<L;H++){var U=m._index[H];U>=g&&U<=y&&R(m._values[H],U-g,F-v)}else{for(var G={},Y=O;Y<L;Y++){var J=m._index[Y];G[J]=m._values[Y]}for(var $=g;$<=y;$++){var j=$ in G?G[$]:0;R(j,$-g,F-v)}}}return A.push(S.length),new i({values:S,index:T,ptr:A,size:[y-g+1,b-v+1]})}i.prototype.forEach=function(m,g){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var y=this,v=this._size[0],b=this._size[1],_=P5(m,y,"forEach"),w=0;w<b;w++){var S=this._ptr[w],T=this._ptr[w+1];if(g)for(var A=S;A<T;A++){var k=this._index[A];_(this._values[A],[k,w],y)}else{for(var I={},R=S;R<T;R++){var F=this._index[R];I[F]=this._values[R]}for(var O=0;O<v;O++){var L=O in I?I[O]:0;_(L,[O,w],y)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var m=this._size[1],g=0;g<m;g++)for(var y=this._ptr[g],v=this._ptr[g+1],b=y;b<v;b++){var _=this._index[b];yield{value:this._values[b],index:[_,g]}}},i.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(m,g,y,v,b){var _=v[0],w=v[1],S=[],T,A;for(T=0;T<_;T++)for(S[T]=[],A=0;A<w;A++)S[T][A]=0;for(A=0;A<w;A++)for(var k=y[A],I=y[A+1],R=k;R<I;R++)T=g[R],S[T][A]=m?b?Eo(m[R]):m[R]:1;return S}return i.prototype.format=function(m){for(var g=this._size[0],y=this._size[1],v=this.density(),b="Sparse Matrix ["+Uo(g,m)+" x "+Uo(y,m)+"] density: "+Uo(v,m)+`
`,_=0;_<y;_++)for(var w=this._ptr[_],S=this._ptr[_+1],T=w;T<S;T++){var A=this._index[T];b+=`
    (`+Uo(A,m)+", "+Uo(_,m)+") ==> "+(this._values?Uo(this._values[T],m):"X")}return b},i.prototype.toString=function(){return Uo(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(m){if(m){if(Wo(m)&&(m=m.toNumber()),!bs(m)||!Gs(m))throw new TypeError("The parameter k must be an integer number")}else m=0;var g=m>0?m:0,y=m<0?-m:0,v=this._size[0],b=this._size[1],_=Math.min(v-y,b-g),w=[],S=[],T=[];T[0]=0;for(var A=g;A<b&&w.length<_;A++)for(var k=this._ptr[A],I=this._ptr[A+1],R=k;R<I;R++){var F=this._index[R];if(F===A-g+y){w.push(this._values[R]),S[w.length-1]=F-y;break}}return T.push(w.length),new i({values:w,index:S,ptr:T,size:[_,1]})},i.fromJSON=function(m){return new i(m)},i.diagonal=function(m,g,y,v,b){if(!jo(m))throw new TypeError("Array expected, size parameter");if(m.length!==2)throw new Error("Only two dimensions matrix are supported");if(m=m.map(function(J){if(Wo(J)&&(J=J.toNumber()),!bs(J)||!Gs(J)||J<1)throw new Error("Size values must be positive integers");return J}),y){if(Wo(y)&&(y=y.toNumber()),!bs(y)||!Gs(y))throw new TypeError("The parameter k must be an integer number")}else y=0;var _=n,w=0;sg(b)&&(_=t.find(n,[b,b])||n,w=t.convert(0,b));var S=y>0?y:0,T=y<0?-y:0,A=m[0],k=m[1],I=Math.min(A-T,k-S),R;if(jo(g)){if(g.length!==I)throw new Error("Invalid value array length");R=function($){return g[$]}}else if(aa(g)){var F=g.size();if(F.length!==1||F[0]!==I)throw new Error("Invalid matrix length");R=function($){return g.get([$])}}else R=function(){return g};for(var O=[],L=[],H=[],U=0;U<k;U++){H.push(O.length);var G=U-S;if(G>=0&&G<I){var Y=R(G);_(Y,w)||(L.push(G+T),O.push(Y))}}return H.push(O.length),new i({values:O,index:L,ptr:H,size:[A,k]})},i.prototype.swapRows=function(m,g){if(!bs(m)||!Gs(m)||!bs(g)||!Gs(g))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return no(m,this._size[0]),no(g,this._size[0]),i._swapRows(m,g,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(m,g,y,v,b){for(var _=v[m],w=v[m+1],S=_;S<w;S++)b(y[S],g[S])},i._swapRows=function(m,g,y,v,b,_){for(var w=0;w<y;w++){var S=_[w],T=_[w+1],A=l(m,S,T,b),k=l(g,S,T,b);if(A<T&&k<T&&b[A]===m&&b[k]===g){if(v){var I=v[A];v[A]=v[k],v[k]=I}continue}if(A<T&&b[A]===m&&(k>=T||b[k]!==g)){var R=v?v[A]:void 0;b.splice(k,0,g),v&&v.splice(k,0,R),b.splice(k<=A?A+1:A,1),v&&v.splice(k<=A?A+1:A,1);continue}if(k<T&&b[k]===g&&(A>=T||b[A]!==m)){var F=v?v[k]:void 0;b.splice(A,0,m),v&&v.splice(A,0,F),b.splice(A<=k?k+1:k,1),v&&v.splice(A<=k?k+1:k,1)}}},i},{isClass:!0}),d7t="number",h7t=["typed"];function p7t(e){var t=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(t){var n={"0b":2,"0o":8,"0x":16}[t[1]],r=t[2],i=t[3];return{input:e,radix:n,integerPart:r,fractionalPart:i}}else return null}function m7t(e){for(var t=parseInt(e.integerPart,e.radix),n=0,r=0;r<e.fractionalPart.length;r++){var i=parseInt(e.fractionalPart[r],e.radix);n+=i/Math.pow(e.radix,r+1)}var s=t+n;if(isNaN(s))throw new SyntaxError('String "'+e.input+'" is not a valid number');return s}var g7t=ni(d7t,h7t,e=>{var{typed:t}=e,n=t("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var s=p7t(i);if(s)return m7t(s);var o=0,a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);a&&(o=Number(a[2]),i=a[1]);var u=Number(i);if(isNaN(u))throw new SyntaxError('String "'+i+'" is not a valid number');if(a){if(u>2**o-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));u>=2**(o-1)&&(u=u-2**o)}return u},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:t.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),null:function(i){return 0},"Unit, string | Unit":function(i,s){return i.toNumber(s)},"Array | Matrix":t.referToSelf(r=>i=>jb(i,r))});return n.fromJSON=function(r){return parseFloat(r.value)},n}),y7t="bignumber",v7t=["typed","BigNumber"],b7t=ni(y7t,v7t,e=>{var{typed:t,BigNumber:n}=e;return t("bignumber",{"":function(){return new n(0)},number:function(i){return new n(i+"")},string:function(i){var s=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(s){var o=s[2],a=n(s[1]),u=new n(2).pow(Number(o));if(a.gt(u.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var l=new n(2).pow(Number(o)-1);return a.gte(l)?a.sub(u):a}return new n(i)},BigNumber:function(i){return i},bigint:function(i){return new n(i.toString())},Unit:t.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),Fraction:function(i){return new n(String(i.n)).div(String(i.d)).times(String(i.s))},null:function(i){return new n(0)},"Array | Matrix":t.referToSelf(r=>i=>jb(i,r))})}),x7t="fraction",w7t=["typed","Fraction"],_7t=ni(x7t,w7t,e=>{var{typed:t,Fraction:n}=e;return t("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new n(i)},string:function(i){return new n(i)},"number, number":function(i,s){return new n(i,s)},"bigint, bigint":function(i,s){return new n(i,s)},null:function(i){return new n(0)},BigNumber:function(i){return new n(i.toString())},bigint:function(i){return new n(i.toString())},Fraction:function(i){return i},Unit:t.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),Object:function(i){return new n(i)},"Array | Matrix":t.referToSelf(r=>i=>jb(i,r))})}),Tbe="matrix",E7t=["typed","Matrix","DenseMatrix","SparseMatrix"],S7t=ni(Tbe,E7t,e=>{var{typed:t,Matrix:n,DenseMatrix:r,SparseMatrix:i}=e;return t(Tbe,{"":function(){return s([])},string:function(a){return s([],a)},"string, string":function(a,u){return s([],a,u)},Array:function(a){return s(a)},Matrix:function(a){return s(a,a.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(o,a,u){if(a==="dense"||a==="default"||a===void 0)return new r(o,u);if(a==="sparse")return new i(o,u);throw new TypeError("Unknown matrix type "+JSON.stringify(a)+".")}}),Abe="unaryMinus",C7t=["typed"],T7t=ni(Abe,C7t,e=>{var{typed:t}=e;return t(Abe,{number:r5e,"Complex | BigNumber | Fraction":n=>n.neg(),bigint:n=>-n,Unit:t.referToSelf(n=>r=>{var i=r.clone();return i.value=t.find(n,i.valueType())(r.value),i}),"Array | Matrix":t.referToSelf(n=>r=>jb(r,n))})}),Dbe="abs",A7t=["typed"],D7t=ni(Dbe,A7t,e=>{var{typed:t}=e;return t(Dbe,{number:Z8e,"Complex | BigNumber | Fraction | Unit":n=>n.abs(),bigint:n=>n<0n?-n:n,"Array | Matrix":t.referToSelf(n=>r=>jb(r,n))})}),Ibe="addScalar",I7t=["typed"],k7t=ni(Ibe,I7t,e=>{var{typed:t}=e;return t(Ibe,{"number, number":e5e,"Complex, Complex":function(r,i){return r.add(i)},"BigNumber, BigNumber":function(r,i){return r.plus(i)},"bigint, bigint":function(r,i){return r+i},"Fraction, Fraction":function(r,i){return r.add(i)},"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var s=r.clone();return s.value=t.find(n,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),kbe="subtractScalar",R7t=["typed"],N7t=ni(kbe,R7t,e=>{var{typed:t}=e;return t(kbe,{"number, number":t5e,"Complex, Complex":function(r,i){return r.sub(i)},"BigNumber, BigNumber":function(r,i){return r.minus(i)},"bigint, bigint":function(r,i){return r-i},"Fraction, Fraction":function(r,i){return r.sub(i)},"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var s=r.clone();return s.value=t.find(n,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),P7t="matAlgo11xS0s",O7t=["typed","equalScalar"],F7t=ni(P7t,O7t,e=>{var{typed:t,equalScalar:n}=e;return function(i,s,o,a){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],p=f[1],m,g=n,y=0,v=o;typeof d=="string"&&(m=d,g=t.find(n,[m,m]),y=t.convert(0,m),s=t.convert(s,m),v=t.find(o,[m,m]));for(var b=[],_=[],w=[],S=0;S<p;S++){w[S]=_.length;for(var T=c[S],A=c[S+1],k=T;k<A;k++){var I=l[k],R=a?v(s,u[k]):v(u[k],s);g(R,y)||(_.push(I),b.push(R))}}return w[p]=_.length,i.createSparseMatrix({values:b,index:_,ptr:w,size:[h,p],datatype:m})}}),M7t="matAlgo14xDs",$7t=["typed"],L7t=ni(M7t,$7t,e=>{var{typed:t}=e;return function(i,s,o,a){var u=i._data,l=i._size,c=i._datatype,f,d=o;typeof c=="string"&&(f=c,s=t.convert(s,f),d=t.find(o,[f,f]));var h=l.length>0?n(d,0,l,l[0],u,s,a):[];return i.createDenseMatrix({data:h,size:Eo(l),datatype:f})};function n(r,i,s,o,a,u,l){var c=[];if(i===s.length-1)for(var f=0;f<o;f++)c[f]=l?r(u,a[f]):r(a[f],u);else for(var d=0;d<o;d++)c[d]=n(r,i+1,s,s[i+1],a[d],u,l);return c}}),B7t="multiplyScalar",j7t=["typed"],U7t=ni(B7t,j7t,e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":n5e,"Complex, Complex":function(r,i){return r.mul(i)},"BigNumber, BigNumber":function(r,i){return r.times(i)},"bigint, bigint":function(r,i){return r*i},"Fraction, Fraction":function(r,i){return r.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(n,r)=>r.multiply(n),"Unit, number | Fraction | BigNumber | Complex | Unit":(n,r)=>n.multiply(r)})}),Rbe="multiply",z7t=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],V7t=ni(Rbe,z7t,e=>{var{typed:t,matrix:n,addScalar:r,multiplyScalar:i,equalScalar:s,dot:o}=e,a=F7t({typed:t,equalScalar:s}),u=L7t({typed:t});function l(w,S){switch(w.length){case 1:switch(S.length){case 1:if(w[0]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(w[0]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+w[0]+") must match Matrix rows ("+S[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+S.length+" dimensions)")}break;case 2:switch(S.length){case 1:if(w[1]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+w[1]+") must match Vector length ("+S[0]+")");break;case 2:if(w[1]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+w[1]+") must match Matrix B rows ("+S[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+S.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+w.length+" dimensions)")}}function c(w,S,T){if(T===0)throw new Error("Cannot multiply two empty vectors");return o(w,S)}function f(w,S){if(S.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(w,S)}function d(w,S){var T=w._data,A=w._size,k=w._datatype||w.getDataType(),I=S._data,R=S._size,F=S._datatype||S.getDataType(),O=A[0],L=R[1],H,U=r,G=i;k&&F&&k===F&&typeof k=="string"&&k!=="mixed"&&(H=k,U=t.find(r,[H,H]),G=t.find(i,[H,H]));for(var Y=[],J=0;J<L;J++){for(var $=G(T[0],I[0][J]),j=1;j<O;j++)$=U($,G(T[j],I[j][J]));Y[J]=$}return w.createDenseMatrix({data:Y,size:[L],datatype:k===w._datatype&&F===S._datatype?H:void 0})}var h=t("_multiplyMatrixVector",{"DenseMatrix, any":m,"SparseMatrix, any":v}),p=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":g,"DenseMatrix, SparseMatrix":y,"SparseMatrix, DenseMatrix":b,"SparseMatrix, SparseMatrix":_});function m(w,S){var T=w._data,A=w._size,k=w._datatype||w.getDataType(),I=S._data,R=S._datatype||S.getDataType(),F=A[0],O=A[1],L,H=r,U=i;k&&R&&k===R&&typeof k=="string"&&k!=="mixed"&&(L=k,H=t.find(r,[L,L]),U=t.find(i,[L,L]));for(var G=[],Y=0;Y<F;Y++){for(var J=T[Y],$=U(J[0],I[0]),j=1;j<O;j++)$=H($,U(J[j],I[j]));G[Y]=$}return w.createDenseMatrix({data:G,size:[F],datatype:k===w._datatype&&R===S._datatype?L:void 0})}function g(w,S){var T=w._data,A=w._size,k=w._datatype||w.getDataType(),I=S._data,R=S._size,F=S._datatype||S.getDataType(),O=A[0],L=A[1],H=R[1],U,G=r,Y=i;k&&F&&k===F&&typeof k=="string"&&k!=="mixed"&&k!=="mixed"&&(U=k,G=t.find(r,[U,U]),Y=t.find(i,[U,U]));for(var J=[],$=0;$<O;$++){var j=T[$];J[$]=[];for(var W=0;W<H;W++){for(var B=Y(j[0],I[0][W]),q=1;q<L;q++)B=G(B,Y(j[q],I[q][W]));J[$][W]=B}}return w.createDenseMatrix({data:J,size:[O,H],datatype:k===w._datatype&&F===S._datatype?U:void 0})}function y(w,S){var T=w._data,A=w._size,k=w._datatype||w.getDataType(),I=S._values,R=S._index,F=S._ptr,O=S._size,L=S._datatype||S._data===void 0?S._datatype:S.getDataType();if(!I)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var H=A[0],U=O[1],G,Y=r,J=i,$=s,j=0;k&&L&&k===L&&typeof k=="string"&&k!=="mixed"&&(G=k,Y=t.find(r,[G,G]),J=t.find(i,[G,G]),$=t.find(s,[G,G]),j=t.convert(0,G));for(var W=[],B=[],q=[],Z=S.createSparseMatrix({values:W,index:B,ptr:q,size:[H,U],datatype:k===w._datatype&&L===S._datatype?G:void 0}),re=0;re<U;re++){q[re]=B.length;var xe=F[re],pe=F[re+1];if(pe>xe)for(var Te=0,ke=0;ke<H;ke++){for(var it=ke+1,Re=void 0,ut=xe;ut<pe;ut++){var Ke=R[ut];Te!==it?(Re=J(T[ke][Ke],I[ut]),Te=it):Re=Y(Re,J(T[ke][Ke],I[ut]))}Te===it&&!$(Re,j)&&(B.push(ke),W.push(Re))}}return q[U]=B.length,Z}function v(w,S){var T=w._values,A=w._index,k=w._ptr,I=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!T)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var R=S._data,F=S._datatype||S.getDataType(),O=w._size[0],L=S._size[0],H=[],U=[],G=[],Y,J=r,$=i,j=s,W=0;I&&F&&I===F&&typeof I=="string"&&I!=="mixed"&&(Y=I,J=t.find(r,[Y,Y]),$=t.find(i,[Y,Y]),j=t.find(s,[Y,Y]),W=t.convert(0,Y));var B=[],q=[];G[0]=0;for(var Z=0;Z<L;Z++){var re=R[Z];if(!j(re,W))for(var xe=k[Z],pe=k[Z+1],Te=xe;Te<pe;Te++){var ke=A[Te];q[ke]?B[ke]=J(B[ke],$(re,T[Te])):(q[ke]=!0,U.push(ke),B[ke]=$(re,T[Te]))}}for(var it=U.length,Re=0;Re<it;Re++){var ut=U[Re];H[Re]=B[ut]}return G[1]=U.length,w.createSparseMatrix({values:H,index:U,ptr:G,size:[O,1],datatype:I===w._datatype&&F===S._datatype?Y:void 0})}function b(w,S){var T=w._values,A=w._index,k=w._ptr,I=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!T)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var R=S._data,F=S._datatype||S.getDataType(),O=w._size[0],L=S._size[0],H=S._size[1],U,G=r,Y=i,J=s,$=0;I&&F&&I===F&&typeof I=="string"&&I!=="mixed"&&(U=I,G=t.find(r,[U,U]),Y=t.find(i,[U,U]),J=t.find(s,[U,U]),$=t.convert(0,U));for(var j=[],W=[],B=[],q=w.createSparseMatrix({values:j,index:W,ptr:B,size:[O,H],datatype:I===w._datatype&&F===S._datatype?U:void 0}),Z=[],re=[],xe=0;xe<H;xe++){B[xe]=W.length;for(var pe=xe+1,Te=0;Te<L;Te++){var ke=R[Te][xe];if(!J(ke,$))for(var it=k[Te],Re=k[Te+1],ut=it;ut<Re;ut++){var Ke=A[ut];re[Ke]!==pe?(re[Ke]=pe,W.push(Ke),Z[Ke]=Y(ke,T[ut])):Z[Ke]=G(Z[Ke],Y(ke,T[ut]))}}for(var Ct=B[xe],gt=W.length,Ie=Ct;Ie<gt;Ie++){var Ve=W[Ie];j[Ie]=Z[Ve]}}return B[H]=W.length,q}function _(w,S){var T=w._values,A=w._index,k=w._ptr,I=w._datatype||w._data===void 0?w._datatype:w.getDataType(),R=S._values,F=S._index,O=S._ptr,L=S._datatype||S._data===void 0?S._datatype:S.getDataType(),H=w._size[0],U=S._size[1],G=T&&R,Y,J=r,$=i;I&&L&&I===L&&typeof I=="string"&&I!=="mixed"&&(Y=I,J=t.find(r,[Y,Y]),$=t.find(i,[Y,Y]));for(var j=G?[]:void 0,W=[],B=[],q=w.createSparseMatrix({values:j,index:W,ptr:B,size:[H,U],datatype:I===w._datatype&&L===S._datatype?Y:void 0}),Z=G?[]:void 0,re=[],xe,pe,Te,ke,it,Re,ut,Ke,Ct=0;Ct<U;Ct++){B[Ct]=W.length;var gt=Ct+1;for(it=O[Ct],Re=O[Ct+1],ke=it;ke<Re;ke++)if(Ke=F[ke],G)for(pe=k[Ke],Te=k[Ke+1],xe=pe;xe<Te;xe++)ut=A[xe],re[ut]!==gt?(re[ut]=gt,W.push(ut),Z[ut]=$(R[ke],T[xe])):Z[ut]=J(Z[ut],$(R[ke],T[xe]));else for(pe=k[Ke],Te=k[Ke+1],xe=pe;xe<Te;xe++)ut=A[xe],re[ut]!==gt&&(re[ut]=gt,W.push(ut));if(G)for(var Ie=B[Ct],Ve=W.length,ft=Ie;ft<Ve;ft++){var _t=W[ft];j[ft]=Z[_t]}}return B[U]=W.length,q}return t(Rbe,i,{"Array, Array":t.referTo("Matrix, Matrix",w=>(S,T)=>{l(Fl(S),Fl(T));var A=w(n(S),n(T));return aa(A)?A.valueOf():A}),"Matrix, Matrix":function(S,T){var A=S.size(),k=T.size();return l(A,k),A.length===1?k.length===1?c(S,T,A[0]):f(S,T):k.length===1?h(S,T):p(S,T)},"Matrix, Array":t.referTo("Matrix,Matrix",w=>(S,T)=>w(S,n(T))),"Array, Matrix":t.referToSelf(w=>(S,T)=>w(n(S,T.storage()),T)),"SparseMatrix, any":function(S,T){return a(S,T,i,!1)},"DenseMatrix, any":function(S,T){return u(S,T,i,!1)},"any, SparseMatrix":function(S,T){return a(T,S,i,!0)},"any, DenseMatrix":function(S,T){return u(T,S,i,!0)},"Array, any":function(S,T){return u(n(S),T,i,!1).valueOf()},"any, Array":function(S,T){return u(n(T),S,i,!0).valueOf()},"any, any":i,"any, any, ...any":t.referToSelf(w=>(S,T,A)=>{for(var k=w(S,T),I=0;I<A.length;I++)k=w(k,A[I]);return k})})}),Nbe="conj",H7t=["typed"],q7t=ni(Nbe,H7t,e=>{var{typed:t}=e;return t(Nbe,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.conjugate(),"Array | Matrix":t.referToSelf(n=>r=>jb(r,n))})}),Pbe="identity",W7t=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],G7t=ni(Pbe,W7t,e=>{var{typed:t,config:n,matrix:r,BigNumber:i,DenseMatrix:s,SparseMatrix:o}=e;return t(Pbe,{"":function(){return n.matrix==="Matrix"?r([]):[]},string:function(c){return r(c)},"number | BigNumber":function(c){return u(c,c,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return u(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return u(c,f,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,d){return u(c,f,d)},Array:function(c){return a(c)},"Array, string":function(c,f){return a(c,f)},Matrix:function(c){return a(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return a(c.valueOf(),f)}});function a(l,c){switch(l.length){case 0:return c?r(c):[];case 1:return u(l[0],l[0],c);case 2:return u(l[0],l[1],c);default:throw new Error("Vector containing two values expected")}}function u(l,c,f){var d=Wo(l)||Wo(c)?i:null;if(Wo(l)&&(l=l.toNumber()),Wo(c)&&(c=c.toNumber()),!Gs(l)||l<1)throw new Error("Parameters in function identity must be positive integers");if(!Gs(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var h=d?new i(1):1,p=d?new d(0):0,m=[l,c];if(f){if(f==="sparse")return o.diagonal(m,h,0,p);if(f==="dense")return s.diagonal(m,h,0,p);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var g=UK([],m,p),y=l<c?l:c,v=0;v<y;v++)g[v][v]=h;return g}});function Y7t(){throw new Error('No "bignumber" implementation available')}function K7t(){throw new Error('No "fraction" implementation available')}function X7t(){throw new Error('No "matrix" implementation available')}var Obe="size",Q7t=["typed","config","?matrix"],J7t=ni(Obe,Q7t,e=>{var{typed:t,config:n,matrix:r}=e;return t(Obe,{Matrix:function(s){return s.create(s.size(),"number")},Array:Fl,string:function(s){return n.matrix==="Array"?[s.length]:r([s.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(s){return n.matrix==="Array"?[]:r?r([],"dense","number"):X7t()}})}),Z7t="numeric",ejt=["number","?bignumber","?fraction"],tjt=ni(Z7t,ejt,e=>{var{number:t,bignumber:n,fraction:r}=e,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:o=>t(o),BigNumber:n?o=>n(o):Y7t,bigint:o=>BigInt(o),Fraction:r?o=>r(o):K7t};return function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",l=arguments.length>2?arguments[2]:void 0;if(l!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=hv(a);if(!(c in i))throw new TypeError("Cannot convert "+a+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(u in s))throw new TypeError("Cannot convert "+a+' to type "'+u+'"; valid output types are '+Object.keys(s).join(", "));return u===c?a:s[u](a)}}),Fbe="divideScalar",njt=["typed","numeric"],rjt=ni(Fbe,njt,e=>{var{typed:t,numeric:n}=e;return t(Fbe,{"number, number":function(i,s){return i/s},"Complex, Complex":function(i,s){return i.div(s)},"BigNumber, BigNumber":function(i,s){return i.div(s)},"bigint, bigint":function(i,s){return i/s},"Fraction, Fraction":function(i,s){return i.div(s)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,i)=>r.divide(i),"number | Fraction | Complex | BigNumber, Unit":(r,i)=>i.divideInto(r)})}),Mbe="pow",ijt=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],sjt=ni(Mbe,ijt,e=>{var{typed:t,config:n,identity:r,multiply:i,matrix:s,inv:o,number:a,fraction:u,Complex:l}=e;return t(Mbe,{"number, number":c,"Complex, Complex":function(p,m){return p.pow(m)},"BigNumber, BigNumber":function(p,m){return m.isInteger()||p>=0||n.predictable?p.pow(m):new l(p.toNumber(),0).pow(m.toNumber(),0)},"bigint, bigint":(h,p)=>h**p,"Fraction, Fraction":function(p,m){var g=p.pow(m);if(g!=null)return g;if(n.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(p.valueOf(),m.valueOf())},"Array, number":f,"Array, BigNumber":function(p,m){return f(p,m.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(p,m){return d(p,m.toNumber())},"Unit, number | BigNumber":function(p,m){return p.pow(m)}});function c(h,p){if(n.predictable&&!Gs(p)&&h<0)try{var m=u(p),g=a(m);if((p===g||Math.abs((p-g)/p)<1e-14)&&m.d%2n===1n)return(m.n%2n===0n?1:-1)*Math.pow(-h,p)}catch{}return n.predictable&&(h<-1&&p===1/0||h>-1&&h<0&&p===-1/0)?NaN:Gs(p)||h>=0||n.predictable?i5e(h,p):h*h<1&&p===1/0||h*h>1&&p===-1/0?0:new l(h,0).pow(p,0)}function f(h,p){if(!Gs(p))throw new TypeError("For A^b, b must be an integer (value is "+p+")");var m=Fl(h);if(m.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+m.length+" dimensions)");if(m[0]!==m[1])throw new Error("For A^b, A must be square (size is "+m[0]+"x"+m[1]+")");if(p<0)try{return f(o(h),-p)}catch(v){throw v.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+p+")"):v}for(var g=r(m[0]).valueOf(),y=h;p>=1;)(p&1)===1&&(g=i(y,g)),p>>=1,y=i(y,y);return g}function d(h,p){return s(f(h.valueOf(),p))}}),$be="dot",ojt=["typed","addScalar","multiplyScalar","conj","size"],ajt=ni($be,ojt,e=>{var{typed:t,addScalar:n,multiplyScalar:r,conj:i,size:s}=e;return t($be,{"Array | DenseMatrix, Array | DenseMatrix":a,"SparseMatrix, SparseMatrix":u});function o(c,f){var d=l(c),h=l(f),p,m;if(d.length===1)p=d[0];else if(d.length===2&&d[1]===1)p=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(h.length===1)m=h[0];else if(h.length===2&&h[1]===1)m=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(p!==m)throw new RangeError("Vectors must have equal length ("+p+" != "+m+")");if(p===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return p}function a(c,f){var d=o(c,f),h=aa(c)?c._data:c,p=aa(c)?c._datatype||c.getDataType():void 0,m=aa(f)?f._data:f,g=aa(f)?f._datatype||f.getDataType():void 0,y=l(c).length===2,v=l(f).length===2,b=n,_=r;if(p&&g&&p===g&&typeof p=="string"&&p!=="mixed"){var w=p;b=t.find(n,[w,w]),_=t.find(r,[w,w])}if(!y&&!v){for(var S=_(i(h[0]),m[0]),T=1;T<d;T++)S=b(S,_(i(h[T]),m[T]));return S}if(!y&&v){for(var A=_(i(h[0]),m[0][0]),k=1;k<d;k++)A=b(A,_(i(h[k]),m[k][0]));return A}if(y&&!v){for(var I=_(i(h[0][0]),m[0]),R=1;R<d;R++)I=b(I,_(i(h[R][0]),m[R]));return I}if(y&&v){for(var F=_(i(h[0][0]),m[0][0]),O=1;O<d;O++)F=b(F,_(i(h[O][0]),m[O][0]));return F}}function u(c,f){o(c,f);for(var d=c._index,h=c._values,p=f._index,m=f._values,g=0,y=n,v=r,b=0,_=0;b<d.length&&_<p.length;){var w=d[b],S=p[_];if(w<S){b++;continue}if(w>S){_++;continue}w===S&&(g=y(g,v(h[b],m[_])),b++,_++)}return g}function l(c){return aa(c)?c.size():s(c)}}),Lbe="det",ujt=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],ljt=ni(Lbe,ujt,e=>{var{typed:t,matrix:n,subtractScalar:r,multiply:i,divideScalar:s,isZero:o,unaryMinus:a}=e;return t(Lbe,{any:function(c){return Eo(c)},"Array | Matrix":function(c){var f;switch(aa(c)?f=c.size():Array.isArray(c)?(c=n(c),f=c.size()):f=[],f.length){case 0:return Eo(c);case 1:if(f[0]===1)return Eo(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Uo(f)+")");case 2:{var d=f[0],h=f[1];if(d===h)return u(c.clone().valueOf(),d);if(h===0)return 1;throw new RangeError("Matrix must be square (size: "+Uo(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Uo(f)+")")}}});function u(l,c,f){if(c===1)return Eo(l[0][0]);if(c===2)return r(i(l[0][0],l[1][1]),i(l[1][0],l[0][1]));for(var d=!1,h=new Array(c).fill(0).map((T,A)=>A),p=0;p<c;p++){var m=h[p];if(o(l[m][p])){var g=void 0;for(g=p+1;g<c;g++)if(!o(l[h[g]][p])){m=h[g],h[g]=h[p],h[p]=m,d=!d;break}if(g===c)return l[m][p]}for(var y=l[m][p],v=p===0?1:l[h[p-1]][p-1],b=p+1;b<c;b++)for(var _=h[b],w=p+1;w<c;w++)l[_][w]=s(r(i(l[_][w],y),i(l[_][p],l[m][w])),v)}var S=l[h[c-1]][c-1];return d?a(S):S}}),Bbe="inv",cjt=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],fjt=ni(Bbe,cjt,e=>{var{typed:t,matrix:n,divideScalar:r,addScalar:i,multiply:s,unaryMinus:o,det:a,identity:u,abs:l}=e;return t(Bbe,{"Array | Matrix":function(d){var h=aa(d)?d.size():Fl(d);switch(h.length){case 1:if(h[0]===1)return aa(d)?n([r(1,d.valueOf()[0])]):[r(1,d[0])];throw new RangeError("Matrix must be square (size: "+Uo(h)+")");case 2:{var p=h[0],m=h[1];if(p===m)return aa(d)?n(c(d.valueOf(),p,m),d.storage()):c(d,p,m);throw new RangeError("Matrix must be square (size: "+Uo(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Uo(h)+")")}},any:function(d){return r(1,d)}});function c(f,d,h){var p,m,g,y,v;if(d===1){if(y=f[0][0],y===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,y)]]}else if(d===2){var b=a(f);if(b===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(f[1][1],b),r(o(f[0][1]),b)],[r(o(f[1][0]),b),r(f[0][0],b)]]}else{var _=f.concat();for(p=0;p<d;p++)_[p]=_[p].concat();for(var w=u(d).valueOf(),S=0;S<h;S++){var T=l(_[S][S]),A=S;for(p=S+1;p<d;)l(_[p][S])>T&&(T=l(_[p][S]),A=p),p++;if(T===0)throw Error("Cannot calculate inverse, determinant is zero");p=A,p!==S&&(v=_[S],_[S]=_[p],_[p]=v,v=w[S],w[S]=w[p],w[p]=v);var k=_[S],I=w[S];for(p=0;p<d;p++){var R=_[p],F=w[p];if(p!==S){if(R[S]!==0){for(g=r(o(R[S]),k[S]),m=S;m<h;m++)R[m]=i(R[m],s(g,k[m]));for(m=0;m<h;m++)F[m]=i(F[m],s(g,I[m]))}}else{for(g=k[S],m=S;m<h;m++)R[m]=r(R[m],g);for(m=0;m<h;m++)F[m]=r(F[m],g)}}}return w}}}),jbe="gamma",djt=["typed","config","multiplyScalar","pow","BigNumber","Complex"],hjt=ni(jbe,djt,e=>{var{typed:t,config:n,multiplyScalar:r,pow:i,BigNumber:s,Complex:o}=e;function a(l){if(l.im===0)return O5(l.re);if(l.re<.5){var c=new o(1-l.re,-l.im),f=new o(Math.PI*l.re,Math.PI*l.im);return new o(Math.PI).div(f.sin()).div(a(c))}l=new o(l.re-1,l.im);for(var d=new o(PS[0],0),h=1;h<PS.length;++h){var p=new o(PS[h],0);d=d.add(p.div(l.add(h)))}var m=new o(l.re+s5e+.5,l.im),g=Math.sqrt(2*Math.PI),y=m.pow(l.add(.5)),v=m.neg().exp();return d.mul(g).mul(y).mul(v)}return t(jbe,{number:O5,Complex:a,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new s(1/0):u(c.minus(1));if(!c.isFinite())return new s(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function u(l){if(l<8)return new s([1,1,2,6,24,120,720,5040][l]);var c=n.precision+(Math.log(l.toNumber())|0),f=s.clone({precision:c});if(l%2===1)return l.times(u(new s(l-1)));for(var d=l,h=new f(l),p=l.toNumber();d>2;)d-=2,p+=d,h=h.times(p);return new s(h.toPrecision(s.precision))}}),Ube="lgamma",pjt=["Complex","typed"],mjt=ni(Ube,pjt,e=>{var{Complex:t,typed:n}=e,r=7,i=7,s=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return n(Ube,{number:F5,Complex:o,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function o(l){var c=6.283185307179586,f=1.1447298858494002,d=.1;if(l.isNaN())return new t(NaN,NaN);if(l.im===0)return new t(F5(l.re),0);if(l.re>=r||Math.abs(l.im)>=i)return a(l);if(l.re<=d){var h=EBt(c,l.im)*Math.floor(.5*l.re+.25),p=l.mul(Math.PI).sin().log(),m=o(new t(1-l.re,-l.im));return new t(f,h).sub(p).sub(m)}else return l.im>=0?u(l):u(l.conjugate()).conjugate()}function a(l){for(var c=l.sub(.5).mul(l.log()).sub(l).add(o5e),f=new t(1,0).div(l),d=f.div(l),h=s[0],p=s[1],m=2*d.re,g=d.re*d.re+d.im*d.im,y=2;y<8;y++){var v=p;p=-g*h+s[y],h=m*h+v}var b=f.mul(d.mul(h).add(p));return c.add(b)}function u(l){var c=0,f=0,d=l;for(l=l.add(1);l.re<=r;){d=d.mul(l);var h=d.im<0?1:0;h!==0&&f===0&&c++,f=h,l=l.add(1)}return a(l).sub(d.log()).sub(new t(0,c*2*Math.PI*1))}}),g9=_9t({config:Z_}),y9=A9t({}),a5e=O9t({}),vie=$9t({}),bie=Z9t({Matrix:vie}),Js=CBt({BigNumber:g9,Complex:y9,DenseMatrix:bie,Fraction:a5e}),gjt=D7t({typed:Js}),xie=k7t({typed:Js}),yjt=q7t({typed:Js}),wie=u7t({config:Z_,typed:Js}),vjt=i7t({equalScalar:wie,typed:Js}),Ik=mjt({Complex:y9,typed:Js}),_ie=U7t({typed:Js}),u5e=g7t({typed:Js}),l5e=f7t({Matrix:vie,equalScalar:wie,typed:Js}),bjt=N7t({typed:Js}),xjt=b7t({BigNumber:g9,typed:Js}),c5e=T7t({typed:Js}),f5e=_7t({Fraction:a5e,typed:Js}),fA=S7t({DenseMatrix:bie,Matrix:vie,SparseMatrix:l5e,typed:Js}),wjt=tjt({bignumber:xjt,fraction:f5e,number:u5e}),_jt=J7t({matrix:fA,config:Z_,typed:Js}),d5e=rjt({numeric:wjt,typed:Js}),h5e=G7t({BigNumber:g9,DenseMatrix:bie,SparseMatrix:l5e,config:Z_,matrix:fA,typed:Js}),Ejt=ajt({addScalar:xie,conj:yjt,multiplyScalar:_ie,size:_jt,typed:Js}),Eie=V7t({addScalar:xie,dot:Ejt,equalScalar:wie,matrix:fA,multiplyScalar:_ie,typed:Js}),Sjt=ljt({divideScalar:d5e,isZero:vjt,matrix:fA,multiply:Eie,subtractScalar:bjt,typed:Js,unaryMinus:c5e}),Cjt=fjt({abs:gjt,addScalar:xie,det:Sjt,divideScalar:d5e,identity:h5e,matrix:fA,multiply:Eie,typed:Js,unaryMinus:c5e}),Tjt=sjt({Complex:y9,config:Z_,fraction:f5e,identity:h5e,inv:Cjt,matrix:fA,multiply:Eie,number:u5e,typed:Js}),zbe=hjt({BigNumber:g9,Complex:y9,config:Z_,multiplyScalar:_ie,pow:Tjt,typed:Js});const Ajt=Math.PI;function p5e(e,t){if(t<=0)throw new Error("Degrees of freedom must be positive");const n=Ik((t+1)/2),r=Ik(t/2),i=n-.5*Math.log(t*Ajt)-r,s=e*e,a=-(t+1)/2*Math.log1p(s/t);return Math.exp(i+a)}function m5e(e,t){return Ik(e)+Ik(t)-Ik(e+t)}function Djt(e,t,n){if(e<=0)return-1/0;if(e>=1)return m5e(t,n);const r=1e-30;let i=1,s=t+n,o=t+1,a=t-1,u=1,l=1-s*e/o;Math.abs(l)<r&&(l=r),l=1/l;let c=l;for(i=1;i<=100;i+=1){let f=2*i,d=i*(n-i)*e/((a+f)*(t+f));l=1+d*l,Math.abs(l)<r&&(l=r),u=1+d/u,Math.abs(u)<r&&(u=r),l=1/l,c*=l*u,d=-(t+i)*(s+i)*e/((t+f)*(o+f)),l=1+d*l,Math.abs(l)<r&&(l=r),u=1+d/u,Math.abs(u)<r&&(u=r),l=1/l;const h=l*u;if(c*=h,Math.abs(h-1)<3e-7)break}return Math.log(c)+t*Math.log(e)+n*Math.log1p(-e)-Math.log(t)}function Vbe(e,t,n){if(e<=0)return 0;if(e>=1)return 1;const r=Djt(e,t,n),i=m5e(t,n);return Math.exp(r-i)}function g5e(e,t){if(e===0)return .5;const n=t/(t+e*e);return Math.abs(e)<1e-10?.5+e*Math.sqrt(t)*zbe((t+1)/2)/(Math.sqrt(Math.PI*t)*zbe(t/2)):e<0?.5*Vbe(n,t/2,.5):1-.5*Vbe(n,t/2,.5)}const Ijt=Object.freeze(Object.defineProperty({__proto__:null,studentTCDF:g5e,studentTPDF:p5e},Symbol.toStringTag,{value:"Module"}));function kjt(){return{xi:Math.random()*4-2,omega:Math.random()*3.9+.1,nu:Math.floor(Math.random()*9)+1,alpha:Math.random()*10-5}}function Rjt(e,t,n,r=1e-8,i=50){function s(u,l){const c=(u+l)/2;return(l-u)/6*(e(u)+4*e(c)+e(l))}function o(u,l,c,f,d,h){const p=(u+l)/2,m=(l-u)/12,g=(u+p)/2,y=(p+l)/2,v=e(g),b=e(y),_=m*(c+4*v+d),w=m*(d+4*b+f),S=s(u,l);return h>=i||Math.abs(_+w-S)<=r?_+w:o(u,p,c,d,v,h+1)+o(p,l,d,f,b,h+1)}const a=(t+n)/2;return o(t,n,e(t),e(n),e(a),0)}function Sie(e,t){const{xi:n,omega:r,nu:i,alpha:s}=t,o=(e-n)/r,a=1/r*p5e(o,i),u=g5e(s*o*Math.sqrt((i+1)/(i+o*o)),i+1);return 2*a*u}function Njt(e,t){return Rjt(r=>Sie(r,t),-1e3,e)}function y5e(e,t=1001,n=[-5,5]){const[r,i]=n,s=Array.from({length:t},(u,l)=>r+l*(i-r)/(t-1)),o=s.map(u=>Sie(u,e)),a=s.map(u=>Njt(u,e));return{xVals:s,pdfVals:o,cdfVals:a}}function Pjt(e,t){const n=Math.round((t-e.xVals[0])/(e.xVals[1]-e.xVals[0]));return n<0||n>=e.xVals.length?{pdf:0,cdf:n<0?0:1}:{pdf:e.pdfVals[n],cdf:e.cdfVals[n]}}const Ojt=Object.freeze(Object.defineProperty({__proto__:null,findDistributionValue:Pjt,generateDistributionData:y5e,generateRandomParams:kjt,skewTPDF:Sie},Symbol.toStringTag,{value:"Module"})),gx={marginBottom:40,marginLeft:50,marginTop:15,marginRight:15,height:450,width:600};function Fjt({parameters:e,setAnswer:t,taskType:n}){const{data:r,showPDF:i,training:s}=e,[o,a]=N.useState(),[u,l]=N.useState(null),[c,f]=N.useState(null),{actions:d,trrack:h}=N.useMemo(()=>{const w=Ob.create(),S=w.register("click",(A,k)=>(A.clickX=k.clickX,A.clickY=k.clickY,A)),T=QT({registry:w,initialState:{clickX:0,clickY:0}});return{actions:{clickAction:S},trrack:T}},[]),p=N.useMemo(()=>y5e(r),[r]),m=N.useMemo(()=>{if(!p)return[];const w=i?p.pdfVals:p.cdfVals;return p.xVals.map((S,T)=>({x:S,y:w[T]}))},[p,i]),g=N.useCallback((w,S,T,A)=>{if(!p)return null;const k=T.invert(w);A.invert(S);const I=Db(U=>U).left(p.xVals,k),R=i?p.pdfVals:p.cdfVals;if(I===0)return{x:p.xVals[0],y:R[0]};if(I>=p.xVals.length)return{x:p.xVals[p.xVals.length-1],y:R[R.length-1]};const F=p.xVals[I-1],O=p.xVals[I];if(!F||!O)return null;const L=Math.abs(k-F)<Math.abs(k-O)?I-1:I;return{x:p.xVals[L],y:(i?p.pdfVals:p.cdfVals)[L]}},[p,i]),y=N.useCallback((w,{xScale:S,yScale:T})=>{var L;if(!p)return;const A=w.currentTarget,k=new DOMPoint;k.x=w.clientX,k.y=w.clientY;const I=(L=A.getScreenCTM())==null?void 0:L.inverse();if(!I)return;const R=k.matrixTransform(I),F=g(R.x,R.y,S,T);if(!F)return;const O=Math.abs(R.y-T(F.y))<=5;l({x:R.x,y:R.y,isNearCurve:O})},[p,g]),v=N.useCallback((w,{xScale:S,yScale:T})=>{var L;if(!p)return;const A=w.currentTarget,k=new DOMPoint;k.x=w.clientX,k.y=w.clientY;const I=(L=A.getScreenCTM())==null?void 0:L.inverse();if(!I)return;const R=k.matrixTransform(I),F=g(R.x,R.y,S,T);if(!F)return;Math.abs(R.y-T(F.y))<=5?(f(F),h.apply("Clicked",d.clickAction({clickX:F.x,clickY:F.y})),t({status:!0,provenanceGraph:h.graph.backend,answers:{"location-x":F.x,"location-y":F.y}})):t({status:!1,answers:{}})},[p,d,h,g,t]),b=N.useCallback(()=>{l(null)},[]),_=N.useCallback(()=>{f(null),t({status:!1,answers:{}})},[t]);return E.jsx(Bd,{p:"md",children:E.jsxs("div",{className:"mt-4",children:[s&&(n===U1.PDF_MEDIAN||n===U1.CDF_MODE)&&E.jsx("div",{style:{width:gx.width},children:E.jsx(FT,{value:o,onChange:a,min:p==null?void 0:p.xVals[0],max:p==null?void 0:p.xVals[p.xVals.length-1],step:.1,label:w=>w.toFixed(2),className:"mb-4",styles:{root:{width:"100%"},track:{width:"100%"}}})}),E.jsx(E8e,{data:m,width:gx.width,height:gx.height,margin:{top:gx.marginTop,right:gx.marginRight,left:gx.marginLeft,bottom:gx.marginBottom},onClick:v,onMouseMove:y,onMouseLeave:b,cursor:u,selectedPoint:c}),E.jsx(_n,{onClick:_,mt:"md",children:"Clear Point"})]})})}const Mjt=Object.freeze(Object.defineProperty({__proto__:null,default:Fjt},Symbol.toStringTag,{value:"Module"})),$jt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Ljt=e=>e*Math.PI/180;function Bjt({parameters:e,setAnswer:t}){var _;const n=N.useRef(null),r=N.useRef(null),i=N.useRef(null),{blindspotAngle:s}=e,o=vi(w=>w.answers),a=Number((_=o.calibration_3.answer)==null?void 0:_.pixelsPerMM),[u,l]=N.useState([]),[c,f]=N.useState(!1),[d,h]=N.useState(null),[p,m]=N.useState(5),g=w=>{if(!w.length||!a||!r.current)return;const S=w.reduce((R,F)=>R+F,0)/w.length,A=r.current.getBoundingClientRect().left,I=Math.abs(S-A)/a/Math.tan(Ljt(s));h(I),f(!1)},y=()=>{n.current&&(n.current.style.left="740px")},v=()=>{if(!n.current||!r.current||!a||u.length>=5)return;f(!0);const w=()=>{if(!n.current)return;const T=parseInt(n.current.style.left||"740",10)-2;T<=0?n.current.style.left="740px":n.current.style.left=`${T}px`,i.current=requestAnimationFrame(w)};i.current=requestAnimationFrame(w)},b=()=>{i.current&&cancelAnimationFrame(i.current),f(!1)};return N.useEffect(()=>{d!==null&&u.length===5&&t({status:!0,answers:{"dist-calibration-MM":d,"dist-calibration-CM":d/10,"ball-positions":JSON.stringify(u)}})},[d,u,t]),N.useEffect(()=>{const w=S=>{if(S.code==="Space"){if(S.preventDefault(),!c)v();else if(n.current){b();const A=n.current.getBoundingClientRect().left;l(k=>{const I=[...k,A];return I.length>=5&&g(I),I}),m(k=>k-1),y()}}};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[c]),N.useEffect(()=>(h(null),f(!1),l([]),m(5),y(),()=>{h(null),f(!1),l([]),m(5)}),[]),N.useEffect(()=>()=>{i.current&&cancelAnimationFrame(i.current)},[]),a?E.jsx(Bd,{size:"md",children:E.jsxs(Ys,{gap:"md",children:[E.jsx(tt,{children:"Now we will quickly measure how far away you are sitting. "}),E.jsxs(Ys,{gap:"xs",children:[E.jsxs(Uu,{children:[E.jsxs(Uu.Item,{children:["Put your left hand on the ",E.jsx("b",{children:"space bar"}),"."]}),E.jsx(Uu.Item,{children:"Cover your right eye with your right hand."}),E.jsx(Uu.Item,{children:"Using your left eye, focus on the black square. Keep your focus on the black square."}),E.jsxs(Uu.Item,{children:["The ",E.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"red ball"})," will disappear as it moves from right to left. Press the space bar as soon as the ball disappears."]})]}),E.jsx(tt,{ta:"center",children:u.length>=5?"All measurements completed!":"Press the space bar when you are ready to begin."})]}),E.jsxs("div",{style:{position:"relative",width:"900px",height:"100px",backgroundColor:"#ffffff"},children:[E.jsx("div",{ref:n,style:{position:"absolute",width:"30px",height:"30px",backgroundColor:"rgb(255, 0, 0)",borderRadius:"30px",left:"740px"}}),E.jsx("div",{ref:r,style:{position:"absolute",width:"30px",height:"30px",backgroundColor:"rgb(0, 0, 0)",left:"870px"}})]}),E.jsxs(tt,{ta:"center",children:["Remaining measurements: ",5-u.length]}),d&&E.jsxs(Ys,{gap:"xs",children:[E.jsx(tt,{fw:700,size:"lg",children:"Viewing Distance Results"}),E.jsxs(tt,{children:["Estimated Viewing Distance: ",(d/10).toFixed(1)," cm"]}),E.jsxs(tt,{children:["Number of measurements: ",u.length]})]})]})}):E.jsx("div",{children:"Please complete card calibration first."})}const jjt=Object.freeze(Object.defineProperty({__proto__:null,default:Bjt},Symbol.toStringTag,{value:"Module"})),Ujt="/vis-decode/assets/costco_card-B3j7PHjO.png";function zjt({parameters:e,setAnswer:t,itemWidthMM:n=85.6,itemHeightMM:r=53.98}){const[i,s]=N.useState(300),[o,a]=N.useState(null),[u,l]=N.useState(!1),[c,f]=N.useState({min:100,max:500}),{taskid:d}=e,h=N.useRef(null),p=r/n;N.useEffect(()=>{const b=()=>{const _=window.innerWidth;f({min:Math.round(_*.1),max:Math.round(_*.8)})};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]);const m=b=>Math.round(b*p),g=b=>b/n,y=b=>{s(b)},v=()=>{if(!h.current)return;const b=g(i);a(b),t({status:!0,answers:{[d]:b}}),l(!0)};return E.jsx(Bd,{size:"md",children:E.jsxs(Ys,{gap:"lg",children:[E.jsx(tt,{size:"md",children:" Drag the slider until the image is the same size as a credit card held up to the screen."}),E.jsx(tt,{size:"md",children:" You can use any card this is the same size as a credit card, like a membership card or driver's license."}),E.jsx(tt,{size:"md",children:" If you do not have access to a real card, you can use a ruler to measure the image width to 3.37 inches or 85.6mm. "}),E.jsx(tt,{size:"md",children:" Once you are finished, click 'Confirm Size' and then 'Next'. "}),E.jsx(_n,{onClick:v,size:"lg",variant:"transparent",children:"Confirm Size"}),E.jsx(FT,{min:c.min,max:c.max,value:i,label:null,onChange:y,styles:{root:{width:"100%"},track:{cursor:"pointer"},thumb:{cursor:"grab"},bar:{cursor:"pointer"}}}),E.jsx("div",{ref:h,style:{width:`${i}px`,height:`${m(i)}px`,margin:"20px auto",overflow:"hidden"},children:E.jsx("img",{src:Ujt,alt:"Credit Card",style:{width:"100%",height:"100%",objectFit:"contain"}})}),u&&E.jsxs("div",{style:{textAlign:"center",color:"green"},children:["Calibration Complete - Pixels per MM: ",o==null?void 0:o.toFixed(2)]})]})})}const Vjt=Object.freeze(Object.defineProperty({__proto__:null,default:zjt},Symbol.toStringTag,{value:"Module"}));function Hjt({xScale:e,yScale:t,width:n,height:r,margin:i,sliderValue:s,taskType:o,training:a,distributionData:u}){if(!a||!u)return null;switch(o){case U1.PDF_MEDIAN:return E.jsx("line",{x1:e(s??0),x2:e(s??0),y1:i.top,y2:r-i.bottom,stroke:"#666",strokeWidth:1,strokeDasharray:"4"});case U1.PDF_MODE:{const l=Math.max(...u.pdfVals);return E.jsx("line",{x1:i.left,x2:n-i.right,y1:t(l),y2:t(l),stroke:"#666",strokeWidth:1,strokeDasharray:"4"})}case U1.CDF_MEDIAN:return E.jsx("line",{x1:i.left,x2:n-i.right,y1:t(.5),y2:t(.5),stroke:"#666",strokeWidth:1,strokeDasharray:"4"});case U1.CDF_MODE:{if(s===void 0)return null;const l=Db(w=>w).left(u.xVals,s);if(l<1||l>=u.xVals.length)return null;const c=u.xVals[l-1],f=u.xVals[l],d=u.cdfVals[l-1],p=(u.cdfVals[l]-d)/(f-c),m=u.cdfVals[l-1],g=1,y=s-g,v=s+g,b=m-p*g,_=m+p*g;return E.jsx("line",{x1:e(y),y1:t(b),x2:e(v),y2:t(_),stroke:"#666",strokeWidth:1})}default:return null}}const qjt=Object.freeze(Object.defineProperty({__proto__:null,GuideLines:Hjt},Symbol.toStringTag,{value:"Module"})),Wjt=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:Math.max(t.height-t.marginTop-t.marginBottom,0),boundedWidth:Math.max(t.width-t.marginLeft-t.marginRight,0)}},Gjt=e=>{const t=N.useRef(null),n=Wjt(e);return[t,n]},Yjt=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:Gjt},Symbol.toStringTag,{value:"Module"}));class Kjt extends yi.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?E.jsx(tt,{children:this.state.error.toString()}):this.props.children}}const Hbe=Object.assign({"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":KNt,"../public/example-brush-interactions/assets/Bar.tsx":JNt,"../public/example-brush-interactions/assets/BrushPlot.tsx":_$t,"../public/example-brush-interactions/assets/Paintbrush.tsx":x$t,"../public/example-brush-interactions/assets/Scatter.tsx":w$t,"../public/example-brush-interactions/assets/XAxisBar.tsx":XNt,"../public/example-brush-interactions/assets/YAxis.tsx":b$t,"../public/example-brush-interactions/assets/YAxisBar.tsx":QNt,"../public/example-brush-interactions/assets/types.ts":E$t,"../public/example-cleveland/assets/BarChart.tsx":I$t,"../public/example-cleveland/assets/BubbleChart.tsx":M$t,"../public/example-cleveland/assets/PieChart.tsx":z$t,"../public/example-cleveland/assets/StackedBarChart.tsx":G$t,"../public/example-cleveland/assets/chartcomponents/Bars.tsx":S$t,"../public/example-cleveland/assets/chartcomponents/Bubbles.tsx":k$t,"../public/example-cleveland/assets/chartcomponents/DotMarks.tsx":R$t,"../public/example-cleveland/assets/chartcomponents/NumericAxisH.tsx":V$t,"../public/example-cleveland/assets/chartcomponents/NumericAxisV.tsx":C$t,"../public/example-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":T$t,"../public/example-cleveland/assets/chartcomponents/Slices.tsx":$$t,"../public/example-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":L$t,"../public/example-cleveland/assets/chartcomponents/StackedBars.tsx":H$t,"../public/example-cleveland/assets/hooks/useChartDimensions.tsx":WNt,"../public/example-fairness-jnd/assets/FairnessJND.tsx":K$t,"../public/libraries/mic-check/assets/AudioTest.tsx":lLt,"../public/libraries/test/assets/test.tsx":fLt,"../public/tutorial/advanced-react-component/assets/ClickCircle.tsx":hLt,"../public/tutorial/react-and-randomization/assets/Bar.tsx":gLt,"../public/tutorial/react-and-randomization/assets/BrushPlot.tsx":xLt,"../public/tutorial/react-and-randomization/assets/Paintbrush.tsx":vLt,"../public/tutorial/react-and-randomization/assets/Scatter.tsx":bLt,"../public/tutorial/react-and-randomization/assets/XAxisBar.tsx":pLt,"../public/tutorial/react-and-randomization/assets/YAxis.tsx":yLt,"../public/tutorial/react-and-randomization/assets/YAxisBar.tsx":mLt,"../public/tutorial/react-and-randomization/assets/some.tsx":wLt,"../public/tutorial/react-and-randomization/assets/types.ts":_Lt,"../public/vis-decode/assets/Plot.tsx":TLt,"../public/vis-decode/assets/TaskTypes.ts":ALt,"../public/vis-decode/assets/Test.tsx":Mjt,"../public/vis-decode/assets/Train.tsx":$jt,"../public/vis-decode/assets/ViewingDistanceCalibration.tsx":jjt,"../public/vis-decode/assets/VirtualChinrestCalibration.tsx":Vjt,"../public/vis-decode/assets/chartComponents/ClickMarker.tsx":CLt,"../public/vis-decode/assets/chartComponents/Cursor.tsx":SLt,"../public/vis-decode/assets/chartComponents/Guidelines.tsx":qjt,"../public/vis-decode/assets/chartComponents/Line.tsx":ELt,"../public/vis-decode/assets/customT.ts":Ijt,"../public/vis-decode/assets/distributionCalculations.ts":Ojt,"../public/vis-decode/assets/hooks/useChartDimensions.tsx":Yjt});function Xjt({currentConfig:e,provState:t}){const n=Zd(),r=eh(),i=`../public/${e.path}`,s=i in Hbe?Hbe[i].default:null,o=Jc(),{updateResponseBlockValidation:a,setIframeAnswers:u}=Bl(),l=N.useCallback(({status:c,provenanceGraph:f,answers:d})=>{o(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:d,provenanceGraph:f})),o(u(d))},[r,n,u,o,a]);return E.jsx(N.Suspense,{fallback:E.jsx("div",{children:"Loading..."}),children:s?E.jsx(Kjt,{children:E.jsx(s,{parameters:e.parameters,setAnswer:l,provenanceState:t})}):E.jsx(kv,{path:e.path})})}function Qjt({currentConfig:e}){const[t,n]=N.useState(""),[r,i]=N.useState(!0);return N.useEffect(()=>{async function s(){const o=await Rte(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?E.jsx(Zu,{text:t}):E.jsx(kv,{path:e.path})}function dA(e){return e.baseComponent!==void 0}function v5e(){const e=Zd(),{setAlertModal:t}=Bl(),n=Jc();N.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var qbe=Object.prototype.hasOwnProperty;function Wbe(e,t,n){for(n of e.keys())if(kk(n,t))return n}function kk(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&kk(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Wbe(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Wbe(t,i),!i)||!kk(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(qbe.call(e,n)&&++r&&!qbe.call(t,n)||!(n in t)||!kk(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function Jjt(e){var t=N.useRef(e),n=N.useRef(0);return kk(e,t.current)||(t.current=e,n.current+=1),N.useMemo(function(){return t.current},[n.current])}function Zjt(e,t){return N.useEffect(e,Jjt(t))}const $5=(e,t=null)=>{const[n,r]=N.useState("idle"),[i,s]=N.useState(null),[o,a]=N.useState(null),u=N.useRef(),l=N.useRef(!1);N.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=N.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return Zjt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}};function b5e(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(o=>o!==void 0).filter(([o,a,u])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let o=i+1;o<n.length;o+=1)if(n[o][2]==="visible"){r+=n[o][0]-n[i][0],i=o;break}}i+=1}return t?t-r:void 0}const eUt="_root_1spq0_1",tUt="_description_1spq0_9",nUt="_title_1spq0_10",rUt="_closeButton_1spq0_14",iUt={root:eUt,description:tUt,title:nUt,closeButton:rUt},f3=e=>{const{title:t,message:n,color:r}=e;U_.show({title:t,message:n,position:"top-center",classNames:iUt,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})},Gbe=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","cleanedDuration","meta","configHash"],x5e=["participantId","trialId","trialOrder","responseId"];function Cie(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function sUt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==-1).length/(dp(e.sequence).length-1)*100).toFixed(2);return[{participantId:e.participantId,trialId:"participantTags",trialOrder:null,responseId:"participantTags",answer:JSON.stringify(e.participantTags)},...Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=dA(u)&&u.baseComponent&&n.baseComponents?Dte({},n.baseComponents[u.baseComponent],u):u,c=s.endTime===-1?void 0:s.endTime-s.startTime,f=b5e(s);return Object.entries(s.answer).map(([h,p])=>{var y,v;const m={participantId:e.participantId,trialId:o,trialOrder:a,responseId:h},g=l.response.find(b=>b.id===h);if(t.includes("status")&&(m.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(m.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(m.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(m.configHash=e.participantConfigHash),t.includes("percentComplete")&&(m.percentComplete=r),t.includes("description")&&(m.description=l.description),t.includes("instruction")&&(m.instruction=l.instruction),t.includes("responsePrompt")&&(m.responsePrompt=g==null?void 0:g.prompt),t.includes("answer")&&(m.answer=p),t.includes("correctAnswer")){const b=(v=(y=l.correctAnswer)==null?void 0:y.find(_=>_.id===h))==null?void 0:v.answer;m.correctAnswer=typeof b=="object"?JSON.stringify(b):b}return t.includes("responseMin")&&(m.responseMin=(g==null?void 0:g.type)==="numerical"?g.min:void 0),t.includes("responseMax")&&(m.responseMax=(g==null?void 0:g.type)==="numerical"?g.max:void 0),t.includes("startTime")&&(m.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(m.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(m.duration=c),t.includes("cleanedDuration")&&(m.cleanedDuration=f),t.includes("meta")&&(m.meta=JSON.stringify(l.meta,null,2)),m}).flat()}).flat()]}async function oUt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...x5e,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await sUt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function aUt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=N.useState([...Gbe].filter(p=>p!=="meta")),a=Po(),{value:u,status:l,error:c}=$5(oUt,[s,r,a.storageEngine,i]),f=N.useCallback(()=>{if(!u)return;const p=[u.header.join(","),...u.rows.map(m=>u.header.map(g=>`"${`${m[g]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);Cie(p,n)},[n,u]),d=N.useCallback(()=>{u&&(window.parent.postMessage({type:"revisitWidget/PYTHON_EXPORT_TIDY",payload:u},"*"),f3({title:"Success",message:"Data sent to python notebook",color:"green"}))},[u]),h=N.useMemo(()=>{if(!u)return"";const p=u.rows.length>5?5:u.rows.length,m=p===1?"":"s";return`This is a preview of the first ${m?p:""} row${m} of the CSV. The full CSV contains ${u.rows.length} row${m}.`},[u]);return E.jsxs(ho,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[E.jsx(Eee,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Gbe],value:s,onChange:p=>o(p),label:"Included optional columns:",leftSection:E.jsx(ppt,{}),variant:"filled"}),E.jsx(If,{h:"md"}),E.jsxs(Fe,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?E.jsxs(wn,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[E.jsx(wn.Thead,{children:E.jsx(wn.Tr,{children:u.header.map(p=>E.jsx(wn.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(p)?200:void 0},children:E.jsxs(Jt,{direction:"row",justify:"space-between",align:"center",children:[p,!x5e.includes(p)&&E.jsx(L_,{onClick:()=>o(s.filter(m=>m!==p)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:E.jsx(Qee,{size:16})})]})},p))})}),E.jsx(wn.Tbody,{children:u.rows.slice(0,5).map((p,m)=>E.jsx(wn.Tr,{children:u.header.map(g=>E.jsx(wn.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(g)?"normal":"nowrap"},children:p[g]},`${m}-${g}`))},m))})]}):l==="error"&&c?E.jsx(Ng,{variant:"light",children:c.message}):null,E.jsx($f,{visible:l==="pending"||l==="idle"})]}),E.jsx(If,{h:"sm"}),E.jsx(Jt,{justify:"center",fz:"sm",c:"dimmed",children:E.jsx(tt,{children:h})}),E.jsx(If,{h:"md"}),E.jsxs($i,{justify:"right",children:[E.jsx(_n,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),E.jsx(_n,{leftSection:E.jsx(Cke,{}),onClick:f,"data-autofocus":!0,children:"Download"}),i==="__revisit-widget"&&E.jsx(_n,{onClick:d,children:E.jsx(ipt,{})})]})]})}function uUt(){const e=ey(),{storageEngine:t}=Po(),n=vi(b=>b.answers),r=HT(),[i,s]=N.useState(!1);N.useEffect(()=>{if(r){s(!0);return}const b=setInterval(async()=>{await t.verifyCompletion(n)&&(s(!0),clearInterval(b))},1e3)},[]),v5e();const[o,a]=N.useState(),[u,l]=N.useState(""),c=e.studyMetadata.title.replace(" ","_");N.useEffect(()=>{async function b(){if(t){const _=await t.getCurrentParticipantId(),w=await t.getParticipantData();l(_),a(w)}}b()},[t]);const f=N.useCallback(async()=>{Cie(JSON.stringify(o,null,2),`${c}_${u}.json`)},[c,o,u]),d=e.uiConfig.autoDownloadStudy||!1,h=d&&e.uiConfig.autoDownloadTime||-1,[p,m]=N.useState(Math.floor(h/1e3));N.useEffect(()=>{if(i){const b=setInterval(()=>{m(_=>_-1)},1e3);return p<=0?(d&&f(),clearInterval(b),()=>clearInterval(b)):()=>clearInterval(b)}return()=>{}},[d,i,p,f]);const g=G_(),[y,v]=N.useState(!1);return N.useEffect(()=>{(async()=>{if(t){const _=await t.getModes(g);v(_.dataCollectionEnabled)}})()},[t,g]),E.jsx(ma,{style:{height:"100%"},children:E.jsx(Jt,{direction:"column",children:i||!y?E.jsx(tt,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?E.jsx(Zu,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):E.jsxs(E.Fragment,{children:[E.jsx(tt,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),E.jsx(If,{h:"lg"}),E.jsx(ma,{children:E.jsx(Qc,{color:"blue"})})]})})})}function lUt(){return E.jsx(tt,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function cUt(){return E.jsx(tt,{children:"Thank you for participating. Unfortunately, you have not answered the questions within the given time limit. Because of this, you are no longer eligible to participate in the study. You may close this window now."})}const Ybe={};function HK(e,t){e===void 0&&(e=Ybe),t===void 0&&(t=Ybe);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var fUt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dUt=Object.prototype.hasOwnProperty;function qK(e,t){return dUt.call(e,t)}function WK(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)qK(e,i)&&r.push(i);return r}function Sf(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function GK(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Hx(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function w5e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function YK(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(YK(e[t]))return!0}else if(typeof e=="object"){for(var r=WK(e),i=r.length,s=0;s<i;s++)if(YK(e[r[s]]))return!0}}return!1}function Kbe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var _5e=function(e){fUt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Kbe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Kbe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),io=_5e,hUt=Sf,eS={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=L5(n,this.path);r&&(r=Sf(r));var i=Pw(n,{op:"remove",path:this.from}).removed;return Pw(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=L5(n,this.from);return Pw(n,{op:"add",path:this.path,value:Sf(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:d3(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},pUt={add:function(e,t,n){return GK(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:eS.move,copy:eS.copy,test:eS.test,_get:eS._get};function L5(e,t){if(t=="")return e;var n={op:"_get",path:t};return Pw(e,n),n.value}function Pw(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):B5(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=L5(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=d3(e,t.value),o.test===!1)throw new io("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new io("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Sf(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=B5;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=w5e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!GK(h))throw new io("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);GK(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new io("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=pUt[t.op].call(t,l,h,e);if(o.test===!1)throw new io("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=eS[t.op].call(t,l,h,e);if(o.test===!1)throw new io("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new io("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function v9(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new io("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Sf(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Pw(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function mUt(e,t,n){var r=Pw(e,t);if(r.test===!1)throw new io("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function B5(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new io("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(eS[e.op]){if(typeof e.path!="string")throw new io("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new io('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new io("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new io("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&YK(e.value))throw new io("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new io("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new io("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=E5e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new io("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new io("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function E5e(e,t,n){try{if(!Array.isArray(e))throw new io("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)v9(Sf(t),Sf(e),n||!0);else{n=n||B5;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof io)return i;throw i}}function d3(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!d3(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!d3(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const gUt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:io,_areEquals:d3,applyOperation:Pw,applyPatch:v9,applyReducer:mUt,deepClone:hUt,getValueByPointer:L5,validate:E5e,validator:B5},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Tie=new WeakMap,yUt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),vUt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function bUt(e){return Tie.get(e)}function xUt(e,t){return e.observers.get(t)}function wUt(e,t){e.observers.delete(t.callback)}function _Ut(e,t){t.unobserve()}function EUt(e,t){var n=[],r,i=bUt(e);if(!i)i=new yUt(e),Tie.set(e,i);else{var s=xUt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Sf(e),t){r.callback=t,r.next=null;var o=function(){KK(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){KK(r),clearTimeout(r.next),wUt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new vUt(t,r)),r}function KK(e,t){t===void 0&&(t=!1);var n=Tie.get(e.object);Aie(n.value,e.object,e.patches,"",t),e.patches.length&&v9(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Aie(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=WK(t),o=WK(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(qK(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?Aie(c,f,n,r+"/"+Hx(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Hx(l),value:Sf(c)}),n.push({op:"replace",path:r+"/"+Hx(l),value:Sf(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Hx(l),value:Sf(c)}),n.push({op:"remove",path:r+"/"+Hx(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!qK(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Hx(l),value:Sf(t[l])})}}}function SUt(e,t,n){n===void 0&&(n=!1);var r=[];return Aie(e,t,r,"",n),r}const CUt=Object.freeze(Object.defineProperty({__proto__:null,compare:SUt,generate:KK,observe:EUt,unobserve:_Ut},Symbol.toStringTag,{value:"Module"}));Object.assign({},gUt,CUt,{JsonPatchError:_5e,deepClone:Sf,escapePathComponent:Hx,unescapePathComponent:w5e});var TUt=/("(?:[^\\"]|\\.)*")|[:,]/g,AUt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,_,w;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),_=JSON.stringify(a,s),_===void 0)return _;if(g=i-u.length-l,_.length<=g&&(v=_.replace(TUt,function(S,T){return T||S+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(_),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",w=o(a[h],y,p.length+(f===g-1?0:1)),w!==void 0&&d.push(p+w);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return _}(t,"",0)};const LH=l0(AUt);function ef(e,t,n){return e.fields=t||[],e.fname=n,e}function po(e){return e==null?null:e.fname}function Yu(e){return e==null?null:e.fields}function S5e(e){return e.length===1?DUt(e[0]):IUt(e)}const DUt=e=>function(t){return t[e]},IUt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function rt(e){throw Error(e)}function y0(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||rt("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&rt("Access path missing closing bracket: "+e),r&&rt("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function zd(e,t,n){const r=y0(e);return e=r.length===1?r[0]:e,ef((n&&n.get||S5e)(r),[e],t||e)}const qN=zd("id"),rl=ef(e=>e,[],"identity"),R1=ef(()=>0,[],"zero"),hA=ef(()=>1,[],"one"),Vd=ef(()=>!0,[],"true"),f1=ef(()=>!1,[],"false");function kUt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const C5e=0,Die=1,Iie=2,T5e=3,A5e=4;function kie(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kUt,r=e||C5e;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=Die&&n(t||"error","ERROR",arguments),this},warn(){return r>=Iie&&n(t||"warn","WARN",arguments),this},info(){return r>=T5e&&n(t||"log","INFO",arguments),this},debug(){return r>=A5e&&n(t||"log","DEBUG",arguments),this}}}var at=Array.isArray;function jt(e){return e===Object(e)}const Xbe=e=>e!=="__proto__";function pA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=RUt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;mA(r,s,i[s],o)}return r},{})}function mA(e,t,n,r){if(!Xbe(t))return;let i,s;if(jt(n)&&!at(n)){s=jt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?mA(s,i,n[i]):Xbe(i)&&(s[i]=n[i])}else e[t]=n}function RUt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Kr(e){return e[e.length-1]}function qu(e){return e==null||e===""?null:+e}const D5e=e=>t=>e*Math.exp(t),I5e=e=>t=>Math.log(e*t),k5e=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),R5e=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,j5=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function b9(e,t,n,r){const i=n(e[0]),s=n(Kr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function N5e(e,t){return b9(e,t,qu,rl)}function P5e(e,t){var n=Math.sign(e[0]);return b9(e,t,I5e(n),D5e(n))}function O5e(e,t,n){return b9(e,t,j5(n),j5(1/n))}function F5e(e,t,n){return b9(e,t,k5e(n),R5e(n))}function x9(e,t,n,r,i){const s=r(e[0]),o=r(Kr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function Rie(e,t,n){return x9(e,t,n,qu,rl)}function Nie(e,t,n){const r=Math.sign(e[0]);return x9(e,t,n,I5e(r),D5e(r))}function U5(e,t,n,r){return x9(e,t,n,j5(r),j5(1/r))}function Pie(e,t,n,r){return x9(e,t,n,k5e(r),R5e(r))}function M5e(e){return 1+~~(new Date(e).getMonth()/3)}function $5e(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Lt(e){return e!=null?at(e)?e:[e]:[]}function L5e(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function cr(e){return typeof e=="function"}const NUt="descending";function Oie(e,t,n){n=n||{},t=Lt(t)||[];const r=[],i=[],s={},o=n.comparator||PUt;return Lt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===NUt?-1:1),i.push(a=cr(a)?a:zd(a,null,n)),(Yu(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:ef(o(i,r),Object.keys(s))}const w9=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),PUt=(e,t)=>e.length===1?OUt(e[0],t[0]):FUt(e,t,e.length),OUt=(e,t)=>function(n,r){return w9(e(n),e(r))*t},FUt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=w9(s(r),s(i));return o*t[a]});function il(e){return cr(e)?e:()=>e}function Fie(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function lr(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Zm(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function B5e(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const MUt=Object.prototype.hasOwnProperty;function vn(e,t){return MUt.call(e,t)}const V4={};function gA(e){let t={},n;function r(s){return vn(t,s)&&t[s]!==V4}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===V4&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=V4),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==V4&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function j5e(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Kr(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function Ot(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),lr(r,n)}function tS(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Ub(e){return typeof e=="boolean"}function pv(e){return Object.prototype.toString.call(e)==="[object Date]"}function U5e(e){return e&&cr(e[Symbol.iterator])}function fi(e){return typeof e=="number"}function z5e(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Bt(e){return typeof e=="string"}function Mie(e,t,n){e&&(e=t?Lt(e).map(a=>a.replace(/\\(.)/g,"$1")):Lt(e));const r=e&&e.length,i=n&&n.get||S5e,s=a=>i(t?[a]:y0(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return ef(o,e,"key")}function V5e(e,t){const n=e[0],r=Kr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const $Ut=1e4;function H5e(e){e=+e||$Ut;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>vn(t,o)||vn(n,o),get:o=>vn(t,o)?t[o]:vn(n,o)?s(o,n[o]):void 0,set:(o,a)=>vn(t,o)?t[o]=a:s(o,a)}}function q5e(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function PI(e,t){let n="";for(;--t>=0;)n+=e;return n}function W5e(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?PI(i,o)+s:r==="center"?PI(i,~~(o/2))+s+PI(i,Math.ceil(o/2)):s+PI(i,o)}function WN(e){return e&&Kr(e)-e[0]||0}function Nt(e){return at(e)?"["+e.map(Nt)+"]":jt(e)||Bt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function $ie(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const LUt=e=>fi(e)||pv(e)?e:Date.parse(e);function Lie(e,t){return t=t||LUt,e==null||e===""?null:t(e)}function Bie(e){return e==null||e===""?null:e+""}function gp(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function G5e(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function w1(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function BUt(e){return e}function jUt(e){if(e==null)return BUt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function UUt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function zUt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Qbe(e,n)})}:Qbe(e,t)}function Qbe(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=Y5e(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function Y5e(e,t){var n=jUt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&UUt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function VUt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function HUt(e){return Y5e(e,qUt.apply(this,arguments))}function qUt(e,t,n){var r,i,s;if(arguments.length>1)r=WUt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:VUt(e,r)}}function WUt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const lu="year",Wc="quarter",Ku="month",ca="week",Gc="date",Hu="day",e0="dayofyear",Hf="hours",qf="minutes",Hd="seconds",yp="milliseconds",jie=[lu,Wc,Ku,ca,Gc,Hu,e0,Hf,qf,Hd,yp],BH=jie.reduce((e,t,n)=>(e[t]=1+n,e),{});function Uie(e){const t=Lt(e).slice(),n={};return t.length||rt("Missing time unit."),t.forEach(i=>{vn(BH,i)?n[i]=1:rt(`Invalid time unit: ${i}.`)}),(n[ca]||n[Hu]?1:0)+(n[Wc]||n[Ku]||n[Gc]?1:0)+(n[e0]?1:0)>1&&rt(`Incompatible time units: ${e}`),t.sort((i,s)=>BH[i]-BH[s]),t}const GUt={[lu]:"%Y ",[Wc]:"Q%q ",[Ku]:"%b ",[Gc]:"%d ",[ca]:"W%U ",[Hu]:"%a ",[e0]:"%j ",[Hf]:"%H:00",[qf]:"00:%M",[Hd]:":%S",[yp]:".%L",[`${lu}-${Ku}`]:"%Y-%m ",[`${lu}-${Ku}-${Gc}`]:"%Y-%m-%d ",[`${Hf}-${qf}`]:"%H:%M"};function K5e(e,t){const n=lr({},GUt,t),r=Uie(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const Jx=new Date;function zie(e){return Jx.setFullYear(e),Jx.setMonth(0),Jx.setDate(1),Jx.setHours(0,0,0,0),Jx}function X5e(e){return J5e(new Date(e))}function Q5e(e){return XK(new Date(e))}function J5e(e){return Mg.count(zie(e.getFullYear())-1,e)}function XK(e){return YT.count(zie(e.getFullYear())-1,e)}function QK(e){return zie(e).getDay()}function YUt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function Z5e(e){return t$e(new Date(e))}function e$e(e){return JK(new Date(e))}function t$e(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return cv.count(t-1,e)}function JK(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return KT.count(t-1,e)}function ZK(e){return Jx.setTime(Date.UTC(e,0,1)),Jx.getUTCDay()}function KUt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function n$e(e,t,n,r,i){const s=t||1,o=Kr(e),a=(y,v,b)=>(b=b||y,XUt(n[b],r[b],y===o&&s,v)),u=new Date,l=gp(e),c=l[lu]?a(lu):il(2012),f=l[Ku]?a(Ku):l[Wc]?a(Wc):R1,d=l[ca]&&l[Hu]?a(Hu,1,ca+Hu):l[ca]?a(ca,1):l[Hu]?a(Hu,1):l[Gc]?a(Gc,1):l[e0]?a(e0,1):hA,h=l[Hf]?a(Hf):R1,p=l[qf]?a(qf):R1,m=l[Hd]?a(Hd):R1,g=l[yp]?a(yp):R1;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function XUt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function jC(e,t,n){return t+e*7-(n+6)%7}const QUt={[lu]:e=>e.getFullYear(),[Wc]:e=>Math.floor(e.getMonth()/3),[Ku]:e=>e.getMonth(),[Gc]:e=>e.getDate(),[Hf]:e=>e.getHours(),[qf]:e=>e.getMinutes(),[Hd]:e=>e.getSeconds(),[yp]:e=>e.getMilliseconds(),[e0]:e=>J5e(e),[ca]:e=>XK(e),[ca+Hu]:(e,t)=>jC(XK(e),e.getDay(),QK(t)),[Hu]:(e,t)=>jC(1,e.getDay(),QK(t))},JUt={[Wc]:e=>3*e,[ca]:(e,t)=>jC(e,0,QK(t))};function r$e(e,t){return n$e(e,t||1,QUt,JUt,YUt)}const ZUt={[lu]:e=>e.getUTCFullYear(),[Wc]:e=>Math.floor(e.getUTCMonth()/3),[Ku]:e=>e.getUTCMonth(),[Gc]:e=>e.getUTCDate(),[Hf]:e=>e.getUTCHours(),[qf]:e=>e.getUTCMinutes(),[Hd]:e=>e.getUTCSeconds(),[yp]:e=>e.getUTCMilliseconds(),[e0]:e=>t$e(e),[ca]:e=>JK(e),[Hu]:(e,t)=>jC(1,e.getUTCDay(),ZK(t)),[ca+Hu]:(e,t)=>jC(JK(e),e.getUTCDay(),ZK(t))},ezt={[Wc]:e=>3*e,[ca]:(e,t)=>jC(e,0,ZK(t))};function i$e(e,t){return n$e(e,t||1,ZUt,ezt,KUt)}const tzt={[lu]:Hm,[Wc]:HR.every(3),[Ku]:HR,[ca]:YT,[Gc]:Mg,[Hu]:Mg,[e0]:Mg,[Hf]:kB,[qf]:DB,[Hd]:Eg,[yp]:xC},nzt={[lu]:qm,[Wc]:qR.every(3),[Ku]:qR,[ca]:KT,[Gc]:cv,[Hu]:cv,[e0]:cv,[Hf]:RB,[qf]:IB,[Hd]:Eg,[yp]:xC};function yA(e){return tzt[e]}function vA(e){return nzt[e]}function s$e(e,t,n){return e?e.offset(t,n):void 0}function o$e(e,t,n){return s$e(yA(e),t,n)}function a$e(e,t,n){return s$e(vA(e),t,n)}function u$e(e,t,n,r){return e?e.range(t,n,r):void 0}function l$e(e,t,n,r){return u$e(yA(e),t,n,r)}function c$e(e,t,n,r){return u$e(vA(e),t,n,r)}const OI=1e3,FI=OI*60,MI=FI*60,_9=MI*24,rzt=_9*7,Jbe=_9*30,eX=_9*365,f$e=[lu,Ku,Gc,Hf,qf,Hd,yp],$I=f$e.slice(0,-1),LI=$I.slice(0,-1),BI=LI.slice(0,-1),izt=BI.slice(0,-1),szt=[lu,ca],Zbe=[lu,Ku],d$e=[lu],FD=[[$I,1,OI],[$I,5,5*OI],[$I,15,15*OI],[$I,30,30*OI],[LI,1,FI],[LI,5,5*FI],[LI,15,15*FI],[LI,30,30*FI],[BI,1,MI],[BI,3,3*MI],[BI,6,6*MI],[BI,12,12*MI],[izt,1,_9],[szt,1,rzt],[Zbe,1,Jbe],[Zbe,3,3*Jbe],[d$e,1,eX]];function h$e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(WN(t))/n;let i=Db(a=>a[2]).right(FD,r),s,o;return i===FD.length?(s=d$e,o=Nv(t[0]/eX,t[1]/eX,n)):i?(i=FD[r/FD[i-1][2]<FD[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=f$e,o=Math.max(Nv(t[0],t[1],n),1)),{units:s,step:o}}function jI(e){const t={};return n=>t[n]||(t[n]=e(n))}function ozt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=azt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function azt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function p$e(e){const t=jI(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Jw(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return ozt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=Jw(o??",f");const a=Nv(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=QNe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=JNe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=XNe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let tX;m$e();function m$e(){return tX=p$e({format:kb,formatPrefix:Xte})}function g$e(e){return p$e(KNe(e))}function z5(e){return arguments.length?tX=g$e(e):tX}function exe(e,t,n){n=n||{},jt(n)||rt(`Invalid time multi-format specifier: ${n}`);const r=t(Hd),i=t(qf),s=t(Hf),o=t(Gc),a=t(ca),u=t(Ku),l=t(Wc),c=t(lu),f=e(n[yp]||".%L"),d=e(n[Hd]||":%S"),h=e(n[qf]||"%I:%M"),p=e(n[Hf]||"%I %p"),m=e(n[Gc]||n[Hu]||"%a %d"),g=e(n[ca]||"%b %d"),y=e(n[Ku]||"%B"),v=e(n[Wc]||"%B"),b=e(n[lu]||"%Y");return _=>(r(_)<_?f:i(_)<_?d:s(_)<_?h:o(_)<_?p:u(_)<_?a(_)<_?m:g:c(_)<_?l(_)<_?y:v:b)(_)}function y$e(e){const t=jI(e.format),n=jI(e.utcFormat);return{timeFormat:r=>Bt(r)?t(r):exe(t,yA,r),utcFormat:r=>Bt(r)?n(r):exe(n,vA,r),timeParse:jI(e.parse),utcParse:jI(e.utcParse)}}let nX;v$e();function v$e(){return nX=y$e({format:lne,parse:fOe,utcFormat:IN,utcParse:dOe})}function b$e(e){return y$e(oOe(e))}function h3(e){return arguments.length?nX=b$e(e):nX}const rX=(e,t)=>lr({},e,t);function x$e(e,t){const n=e?g$e(e):z5(),r=t?b$e(t):h3();return rX(n,r)}function Vie(e,t){const n=arguments.length;return n&&n!==2&&rt("defaultLocale expects either zero or two arguments."),n?rX(z5(e),h3(t)):rX(z5(),h3())}function uzt(){return m$e(),v$e(),Vie()}const lzt=/^(data:|([A-Za-z]+:)?\/\/)/,czt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,fzt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,txe="file://";function dzt(e,t){return n=>({options:n||{},sanitize:pzt,load:hzt,fileAccess:!1,file:mzt(t),http:yzt(e)})}async function hzt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function pzt(e,t){t=lr({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=czt.test(e.replace(fzt,""));(e==null||typeof e!="string"||!a)&&rt("Sanitize failure, invalid URI: "+Nt(e));const u=lzt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(txe))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(txe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function mzt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):gzt}async function gzt(){rt("No file system access.")}function yzt(e){return e?async function(t,n){const r=lr({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?cr(s[i])?s[i]():s.text():rt(s.status+""+s.statusText)}:vzt}async function vzt(){rt("No HTTP fetch method available.")}const bzt=e=>e!=null&&e===e,xzt=e=>e==="true"||e==="false"||e===!0||e===!1,wzt=e=>!Number.isNaN(Date.parse(e)),w$e=e=>!Number.isNaN(+e)&&!(e instanceof Date),_zt=e=>w$e(e)&&Number.isInteger(+e),iX={boolean:$ie,integer:qu,number:qu,date:Lie,string:Bie,unknown:rl},H4=[xzt,_zt,w$e,wzt],Ezt=["boolean","integer","number","date"];function _$e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=H4.length,i=H4.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&bzt(u)&&!H4[a](u)&&(i[a]=0,++o,o===H4.length))return"string";return Ezt[i.reduce((s,o)=>s===0?o:s,0)-1]}function E$e(e,t){return t.reduce((n,r)=>(n[r]=_$e(e,r),n),{})}function nxe(e){const t=function(n,r){const i={delimiter:e};return Hie(n,r?lr(r,i):i)};return t.responseType="text",t}function Hie(e,t){return t.header&&(e=t.header.map(Nt).join(t.delimiter)+`
`+e),qNe(t.delimiter).parse(e+"")}Hie.responseType="text";function Szt(e){return typeof Buffer=="function"&&cr(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function qie(e,t){const n=t&&t.property?zd(t.property):rl;return jt(e)&&!Szt(e)?Czt(n(e),t):n(JSON.parse(e))}qie.responseType="json";function Czt(e,t){return!at(e)&&U5e(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const Tzt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function S$e(e,t){let n,r,i,s;return e=qie(e,t),t&&t.feature?(n=zUt,i=t.feature):t&&t.mesh?(n=HUt,i=t.mesh,s=Tzt[t.filter]):rt("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):rt("Invalid TopoJSON object: "+i),r&&r.features||[r]}S$e.responseType="json";const EF={dsv:Hie,csv:nxe(","),tsv:nxe("	"),json:qie,topojson:S$e};function Wie(e,t){return arguments.length>1?(EF[e]=t,this):vn(EF,e)?EF[e]:null}function C$e(e){const t=Wie(e);return t&&t.responseType||"text"}function T$e(e,t,n,r){t=t||{};const i=Wie(t.type||"json");return i||rt("Unknown data format type: "+t.type),e=i(e,t),t.parse&&Azt(e,t.parse,n,r),vn(e,"columns")&&delete e.columns,e}function Azt(e,t,n,r){if(!e.length)return;const i=h3();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=E$e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!iX[p])throw Error("Illegal format pattern: "+h+":"+p);return iX[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const E9=dzt(typeof fetch<"u"&&fetch,null);function S9(e){const t=e||rl,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function SF(e,t){try{await t(e)}catch(n){e.error(n)}}const A$e=Symbol("vega_id");let Dzt=1;function C9(e){return!!(e&&mn(e))}function mn(e){return e[A$e]}function D$e(e,t){return e[A$e]=t,e}function Ii(e){const t=e===Object(e)?e:{data:e};return mn(t)?t:D$e(t,Dzt++)}function Gie(e){return T9(e,Ii({}))}function T9(e,t){for(const n in e)t[n]=e[n];return t}function I$e(e,t){return D$e(t,mn(e))}function eE(e,t){return e?t?(n,r)=>e(n,r)||mn(t(n))-mn(t(r)):(n,r)=>e(n,r)||mn(n)-mn(r):null}function k$e(e){return e&&e.constructor===tE}function tE(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:tE,insert(a){const u=Lt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=cr(a)?r:t,l=Lt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:il(l)};return cr(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return cr(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[mn(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[mn(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[mn(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=mn(m),l[g]?l[g]=1:a.add.push(Ii(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[mn(m)]<0&&a.rem.push(m);function y(v,b,_){_?v[b]=_(v):a.encode=b,o||(c[mn(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[mn(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[mn(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[mn(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const CF="_:mod:_";function A9(){Object.defineProperty(this,CF,{writable:!0,value:{}})}A9.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[CF];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=at(n)?1+n.length:-1),i},modified(e,t){const n=this[CF];if(arguments.length){if(at(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[CF]={},this}};let Izt=0;const kzt="pulse",Rzt=new A9,Nzt=1,Pzt=2;function as(e,t,n,r){this.id=++Izt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function rxe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}as.prototype={targets(){return this._targets||(this._targets=S9(qN))},set(e){return this.value!==e?(this.value=e,1):0},skip:rxe(Nzt),modified:rxe(Pzt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new A9,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof as?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===kzt)Lt(a).forEach(f=>{f instanceof as?f!==this&&(f.targets().add(this),s.push(f)):rt("Pulse parameters must be operator instances.")}),this.source=a;else if(at(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||Rzt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function Ozt(e,t,n,r){let i=1,s;return e instanceof as?s=e:e&&e.prototype instanceof as?s=new e:cr(e)?s=new as(null,e):(i=0,s=new as(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function Fzt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let Mzt=0;function D9(e,t,n){this.id=++Mzt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function d1(e,t,n){return new D9(e,t,n)}D9.prototype={_filter:Vd,_apply:rl,targets(){return this._targets||(this._targets=S9(qN))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=d1(e);return this.targets().add(t),t},apply(e){const t=d1(null,e);return this.targets().add(t),t},merge(){const e=d1();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=d1();return this.targets().add(d1(null,null,Fie(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(d1(null,null,()=>n=!0)),t.targets().add(d1(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Vd,this._targets=null}};function $zt(e,t,n,r){const i=this,s=d1(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Lt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function Lzt(e,t){const n=this.locale();return T$e(e,t,n.timeParse,n.utcParse)}function Bzt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function jzt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:C$e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function Uzt(e,t,n){const r=this,i=r._pending||zzt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Vd).insert(s.data||[])),i.done(),s}function zzt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const Vzt={skip:!0};function Hzt(e,t,n,r,i){return(e instanceof as?Wzt:qzt)(this,e,t,n,r,i),this}function qzt(e,t,n,r,i,s){const o=lr({},s,Vzt);let a,u;cr(n)||(n=il(n)),r===void 0?a=l=>e.touch(n(l)):cr(r)?(u=new as(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;k$e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function Wzt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new as(null,Gzt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function Gzt(e,t){return t=cr(t)?t:il(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function Yzt(e){e.rank=++this._rank}function Kzt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&rt("Cycle detected in dataflow graph.")}const V5={},tm=1,_1=2,eg=4,Xzt=tm|_1,ixe=tm|eg,i2=tm|_1|eg,sxe=8,MD=16,oxe=32,axe=64;function mv(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function jH(e,t){const n=[];return w1(e,t,r=>n.push(r)),n}function uxe(e,t){const n={};return e.visit(t,r=>{n[mn(r)]=1}),r=>n[mn(r)]?null:r}function q4(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}mv.prototype={StopPropagation:V5,ADD:tm,REM:_1,MOD:eg,ADD_REM:Xzt,ADD_MOD:ixe,ALL:i2,REFLOW:sxe,SOURCE:MD,NO_SOURCE:oxe,NO_FIELDS:axe,fork(e){return new mv(this.dataflow).init(this,e)},clone(){const e=this.fork(i2);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(i2|MD)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new mv(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&axe)&&(n.fields=e.fields),t&tm?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&_1?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&eg?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&oxe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||i2;return t&tm&&this.add.length||t&_1&&this.rem.length||t&eg&&this.mod.length},reflow(e){if(e)return this.fork(i2).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(eg,uxe(this,tm))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return at(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?at(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&tm&&(n.addF=q4(n.addF,t)),e&_1&&(n.remF=q4(n.remF,t)),e&eg&&(n.modF=q4(n.modF,t)),e&MD&&(n.srcF=q4(n.srcF,t)),n},materialize(e){e=e||i2;const t=this;return e&tm&&t.addF&&(t.add=jH(t.add,t.addF),t.addF=null),e&_1&&t.remF&&(t.rem=jH(t.rem,t.remF),t.remF=null),e&eg&&t.modF&&(t.mod=jH(t.mod,t.modF),t.modF=null),e&MD&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&MD)return w1(n.source,n.srcF,r),n;e&tm&&w1(n.add,n.addF,r),e&_1&&w1(n.rem,n.remF,r),e&eg&&w1(n.mod,n.modF,r);const i=n.source;if(e&sxe&&i){const s=n.add.length+n.mod.length;s===i.length||(s?w1(i,uxe(n,ixe),r):w1(i,n.srcF,r))}return n}};function Yie(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}Ot(Yie,mv,{fork(e){const t=new mv(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?at(e)?e.some(r=>n[r]):n[e]:0},filter(){rt("MultiPulse does not support filtering.")},materialize(){rt("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function Qzt(e,t,n){const r=this,i=[];if(r._pulse)return R$e(r);if(r._pending&&await r._pending,t&&await SF(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new mv(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=S9(qN);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=V5),u!==V5&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await SF(r,c[f].callback)}return n&&await SF(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function Jzt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function Zzt(e,t,n){return this._pulse?R$e(this):(this.evaluate(e,t,n),this)}function eVt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function R$e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function tVt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function nVt(e,t){const n=e.source,r=this._clock;return n&&at(n)?new Yie(this,r,n.map(i=>i.pulse),t):this._input[e.id]||rVt(this._pulse,n&&n.pulse)}function rVt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==V5&&(e.source=t.source),e)}const Kie={skip:!1,force:!1};function iVt(e,t){const n=t||Kie;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function sVt(e,t,n){const r=n||Kie;return(e.set(t)||r.force)&&this.touch(e,r),this}function oVt(e,t,n){this.touch(e,n||Kie);const r=new mv(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function aVt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),N$e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,uVt(t,0,e)):r=n,r}}}function N$e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function uVt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,N$e(e,r,t,n)}function OS(){this.logger(kie()),this.logLevel(Die),this._clock=0,this._rank=0,this._locale=Vie();try{this._loader=E9()}catch{}this._touched=S9(qN),this._input={},this._pulse=null,this._heap=aVt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function $D(e){return function(){return this._log[e].apply(this,arguments)}}OS.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:$D("error"),warn:$D("warn"),info:$D("info"),debug:$D("debug"),logLevel:$D("level"),cleanThreshold:1e4,add:Ozt,connect:Fzt,rank:Yzt,rerank:Kzt,pulse:oVt,touch:iVt,update:sVt,changeset:tE,ingest:Bzt,parse:Lzt,preload:Uzt,request:jzt,events:$zt,on:Hzt,evaluate:Qzt,run:Zzt,runAsync:Jzt,runAfter:eVt,_enqueue:tVt,_getPulse:nVt};function Ye(e,t){as.call(this,e,null,t)}Ot(Ye,as,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const UC={};function P$e(e){const t=O$e(e);return t&&t.Definition||null}function O$e(e){return e=e&&e.toLowerCase(),vn(UC,e)?UC[e]:null}function*F$e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function Xie(e,t,n){const r=Float64Array.from(F$e(e,n));return r.sort(Og),t.map(i=>V3e(r,i))}function Qie(e,t){return Xie(e,[.25,.5,.75],t)}function Jie(e,t){const n=e.length,r=lEt(e,t),i=Qie(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function M$e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var qd=Math.random;function lVt(e){qd=e}function $$e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(F$e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(qd()*s)];c[l]=a/s}return c.sort(Og),[QG(c,n/2),QG(c,1-n/2)]}function L$e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?cVt(s,t+t/4):s}function cVt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function fVt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function dVt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*qd())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const B$e=Math.sqrt(2*Math.PI),hVt=Math.SQRT2;let LD=NaN;function I9(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(LD===LD)n=LD,LD=NaN;else{do n=qd()*2-1,r=qd()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,LD=r*s}return e+n*t}function Zie(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*B$e)}function k9(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function R9(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*hVt*pVt(2*e-1)}function pVt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function ese(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>I9(n,r),pdf:s=>Zie(s,n,r),cdf:s=>k9(s,n,r),icdf:s=>R9(s,n,r)};return i.mean(e).stdev(t)}function tse(e,t){const n=ese();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=Jie(e)),i):t},sample(){return e[~~(qd()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function nse(e,t){return e=e||0,t=t??1,Math.exp(e+I9()*t)}function rse(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*B$e*e)}function ise(e,t,n){return k9(Math.log(e),t,n)}function sse(e,t,n){return Math.exp(R9(e,t,n))}function j$e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>nse(n,r),pdf:s=>rse(s,n,r),cdf:s=>ise(s,n,r),icdf:s=>sse(s,n,r)};return i.mean(e).stdev(t)}function U$e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=qd();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function ose(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*qd()}function ase(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function use(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function lse(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function z$e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>ose(n,r),pdf:s=>ase(s,n,r),cdf:s=>use(s,n,r),icdf:s=>lse(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function cse(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function GN(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function N9(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function YN(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function bA(e,t,n,r,i){let s=0,o=0;return YN(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function fse(e,t,n){let r=0,i=0,s=0,o=0,a=0;YN(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=GN(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:bA(e,t,n,i,l)}}function V$e(e,t,n){let r=0,i=0,s=0,o=0,a=0;YN(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=GN(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:bA(e,t,n,i,l)}}function H$e(e,t,n){const[r,i,s,o]=N9(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;YN(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=GN(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:bA(e,t,n,o,y)}}function q$e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;YN(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=GN(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:bA(e,t,n,a,c)}}function dse(e,t,n){const[r,i,s,o]=N9(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,_=(f*y-d*l)/v,w=-b*u,S=T=>(T=T-s,b*T*T+_*T+w+o);return{coef:[w-_*s+b*s*s+o,_-2*b*s,b],predict:S,rSquared:bA(e,t,n,o,S)}}function W$e(e,t,n,r){if(r===0)return cse(e,t,n);if(r===1)return fse(e,t,n);if(r===2)return dse(e,t,n);const[i,s,o,a]=N9(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=gVt(c),v=b=>{b-=o;let _=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)_+=y[d]*Math.pow(b,d);return _};return{coef:mVt(f,y,-o,a),predict:v,rSquared:bA(e,t,n,a,v)}}function mVt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function gVt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const lxe=2,cxe=1e-12;function G$e(e,t,n,r){const[i,s,o,a]=N9(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=lxe;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],_=y-i[v]>i[b]-y?v:b;let w=0,S=0,T=0,A=0,k=0;const I=1/Math.abs(i[_]-y||1);for(let O=v;O<=b;++O){const L=i[O],H=s[O],U=yVt(Math.abs(y-L)*I)*d[O],G=L*U;w+=U,S+=G,T+=H*U,A+=H*G,k+=L*G}const[R,F]=GN(S/w,T/w,A/w,k/w);c[g]=R+F*y,f[g]=Math.abs(s[g]-c[g]),vVt(i,g+1,p)}if(h===lxe)break;const m=H3e(f);if(Math.abs(m)<cxe)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?cxe:(v=1-y*y)*v}return bVt(i,c,o,a)}function yVt(e){return(e=1-e*e*e)*e*e}function vVt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function bVt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const xVt=.5*Math.PI/180;function P9(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=wVt(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&_Vt(f,m,d,h,p)>xVt?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function wVt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function _Vt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function EVt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function sX(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:EVt(e)}function Y$e(e,t,n){return n||e+(t?"_"+t:"")}const UH=()=>{},SVt={init:UH,add:UH,rem:UH,idx:0},p3={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},KN=Object.keys(p3).filter(e=>e!=="__count__");function CVt(e,t){return(n,r)=>lr({name:e,aggregate_param:r,out:n||e},SVt,t)}[...KN,"__count__"].forEach(e=>{p3[e]=CVt(e,p3[e])});function K$e(e,t,n){return p3[e](n,t)}function X$e(e,t){return e.idx-t.idx}function TVt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=p3[i]())})};return e.forEach(n),Object.values(t).sort(X$e)}function AVt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function DVt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function IVt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function kVt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function Q$e(e,t){const n=t||rl,r=TVt(e),i=e.slice().sort(X$e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=AVt,s.prototype.add=DVt,s.prototype.rem=IVt,s.prototype.set=kVt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function hse(e){this._key=e?zd(e):mn,this.reset()}const yu=hse.prototype;yu.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};yu.add=function(e){this._add.push(e)};yu.rem=function(e){this._rem.push(e)};yu.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};yu.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",vn(n,s)||(n[s]=1,++i);return i};yu.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=B5e(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};yu.argmin=function(e){return this.extent(e)[0]||{}};yu.argmax=function(e){return this.extent(e)[1]||{}};yu.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};yu.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};yu.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=Qie(this.values(),e),this._get=e),this._q};yu.q1=function(e){return this.quartile(e)[0]};yu.q2=function(e){return this.quartile(e)[1]};yu.q3=function(e){return this.quartile(e)[2]};yu.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=$$e(this.values(),1e3,.05,e),this._get=e),this._ci};yu.ci0=function(e){return this.ci(e)[0]};yu.ci1=function(e){return this.ci(e)[1]};function Kv(e){Ye.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Kv.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:KN},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Ot(Kv,Ye,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=Lt(Yu(v)),_=b.length;let w=0,S;for(;w<_;++w)r[S=b[w]]||(r[S]=1,t.push(S))}this._dims=Lt(e.groupby),this._dnames=this._dims.map(v=>{const b=po(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:sX(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&rt("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&rt("Null aggregate field specified."),m=po(f),g=Y$e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(K$e(d,h,g))}return this._measures=this._measures.map(v=>Q$e(v,v.field)),Object.create(null)},cellkey:sX(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new hse),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?I$e(t.tuple,s):Ii(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const RVt=1e-14;function pse(e){Ye.call(this,null,e)}pse.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Ot(pse,Ye,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(Yu(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=M$e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=qu(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(RVt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=ef(u,Yu(t),e.name||"bin_"+po(t))}});function J$e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?q5e(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function mse(e){Ye.call(this,[],e)}mse.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Ot(mse,Ye,{transform(e,t){const n=t.fork(t.ALL),r=J$e(mn,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(eE(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function Z$e(e){as.call(this,null,NVt,e)}Ot(Z$e,as);function NVt(e){return this.value&&!e.modified()?this.value:Oie(e.fields,e.orders)}function gse(e){Ye.call(this,null,e)}gse.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function PVt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Ot(gse,Ye,{transform(e,t){const n=f=>d=>{for(var h=PVt(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Ii({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function yse(e){Ye.call(this,null,e)}yse.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Ot(yse,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=OVt(a,i,s,e.filter||Vd)):n.mod=a,n.source=this.value,n.modifies(r)}});function OVt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(Ii(s)),s={},s[t]=l);return i}const fxe={kde:tse,mixture:U$e,normal:ese,lognormal:j$e,uniform:z$e},FVt="distributions",dxe="function",MVt="field";function eLe(e,t){const n=e[dxe];vn(fxe,n)||rt("Unknown distribution function: "+n);const r=fxe[n]();for(const i in e)i===MVt?r.data((e.from||t()).map(e[i])):i===FVt?r[i](e[i].map(s=>eLe(s,t))):typeof r[i]===dxe&&r[i](e[i]);return r}function vse(e){Ye.call(this,null,e)}const tLe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],$Vt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:tLe},{name:"weights",type:"number",array:!0}]};vse.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:tLe.concat($Vt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ot(vse,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=eLe(e.distribution,LVt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&rt("Invalid density method: "+o),!e.extent&&!r.data&&rt("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Zm(r.data()),l=P9(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Ii(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function LVt(e){return()=>e.materialize(e.SOURCE).source}function nLe(e,t){return e?e.map((n,r)=>t[r]||po(n)):null}function bse(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const rLe="bin";function xse(e){Ye.call(this,null,e)}xse.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:rLe}]};const BVt=(e,t)=>WN(Zm(e,t))/30;Ot(xse,Ye,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=bse(t.source,e.groupby,rl),i=e.smooth||!1,s=e.field,o=e.step||BVt(n,s),a=eE((p,m)=>s(p)-s(m)),u=e.as||rLe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of L$e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function iLe(e){as.call(this,null,jVt,e),this.modified(!0)}Ot(iLe,as);function jVt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ef(n=>t(n,e),Yu(t),po(t))}function wse(e){Ye.call(this,[void 0,void 0],e)}wse.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Ot(wse,Ye,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=qu(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=po(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function _se(e,t){as.call(this,e),this.parent=t,this.count=0}Ot(_se,as,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function O9(e){Ye.call(this,{},e),this._keys=gA();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}Ot(O9,Ye,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=vn(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new _se(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=mn(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(mn(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=mn(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(mn(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=mn(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function sLe(e){as.call(this,null,UVt,e)}Ot(sLe,as);function UVt(e){return this.value&&!e.modified()?this.value:at(e.name)?Lt(e.name).map(t=>zd(t)):zd(e.name,e.as)}function Ese(e){Ye.call(this,gA(),e)}Ese.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Ot(Ese,Ye,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=mn(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(mn(f),1)});function c(f){const d=mn(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function Sse(e){Ye.call(this,[],e)}Sse.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Ot(Sse,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=nLe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=Gie(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function Cse(e){Ye.call(this,[],e)}Cse.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Ot(Cse,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(po),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=Gie(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function Tse(e){Ye.call(this,null,e)}Tse.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Ot(Tse,Ye,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function oLe(e){Ye.call(this,[],e)}Ot(oLe,Ye,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=Ii(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const W4={value:"value",median:H3e,mean:mEt,min:OR,max:tp},zVt=[];function Ase(e){Ye.call(this,[],e)}Ase.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function VVt(e){var t=e.method||W4.value,n;if(W4[t]==null)rt("Unrecognized imputation method: "+t);else return t===W4.value?(n=e.value!==void 0?e.value:0,()=>n):W4[t]}function HVt(e){const t=e.field;return n=>n?t(n):NaN}Ot(Ase,Ye,{transform(e,t){var n=t.fork(t.ALL),r=VVt(e),i=HVt(e),s=po(e.field),o=po(e.key),a=(e.groupby||[]).map(po),u=qVt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,_,w;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],w={_impute:!0},y=0,_=p.length;y<_;++y)w[a[y]]=p[y];w[o]=m,w[s]=Number.isNaN(h)?h=r(d,i):h,l.push(Ii(w))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function qVt(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):zVt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function Dse(e){Kv.call(this,e)}Dse.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:KN},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Ot(Dse,Kv,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{lr(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Ise(e){Ye.call(this,null,e)}Ise.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ot(Ise,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=bse(r,e.groupby,e.field),s=(e.groupby||[]).map(po),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&rt("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Zm(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=tse(h,o)[a],m=e.counts?h.length:1,g=c||Zm(h);P9(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(Ii(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function aLe(e){as.call(this,null,WVt,e)}Ot(aLe,as);function WVt(e){return this.value&&!e.modified()?this.value:Mie(e.fields,e.flat)}function uLe(e){Ye.call(this,[],e),this._pending=null}Ot(uLe,Ye,{transform(e,t){const n=t.dataflow;return this._pending?zH(this,t,this._pending):GVt(e)?t.StopPropagation:e.values?zH(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Lt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>zH(this,t,Lt(r.data)))}});function GVt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function zH(e,t,n){n.forEach(Ii);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function kse(e){Ye.call(this,{},e)}kse.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Ot(kse,Ye,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&rt('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&rt('The "as" parameter has too few output field names.'),c=c||i.map(po),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||rt("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function lLe(e){as.call(this,null,YVt,e)}Ot(lLe,as);function YVt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function cLe(e){as.call(this,null,KVt,e)}Ot(cLe,as);function KVt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function fLe(e){Ye.call(this,null,e)}Ot(fLe,Ye,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Rse(e){Kv.call(this,e)}Rse.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:KN,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Ot(Rse,Kv,{_transform:Kv.prototype.transform,transform(e,t){return this._transform(XVt(e,t),t)}});function XVt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=Yu(n).concat(Yu(r)),o=JVt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>QVt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function QVt(e,t,n,r){return ef(i=>t(i)===e?n(i):NaN,r,e+"")}function JVt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(w9),t?i.slice(0,t):i}function dLe(e){O9.call(this,e)}Ot(dLe,O9,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(mn(s),n,t,s);return(e.modified("field")||r&&t.modified(Yu(r)))&&rt("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Ii(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function Nse(e){Ye.call(this,null,e)}Nse.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Ot(Nse,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=nLe(e.fields,e.as||[]),s=r?(a,u)=>ZVt(a,u,r,i):T9;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=mn(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,Ii({}));o[mn(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[mn(a)]))}),n}});function ZVt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function hLe(e){Ye.call(this,null,e)}Ot(hLe,Ye,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Pse(e){Ye.call(this,null,e)}Pse.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const eHt=1e-14;Ot(Pse,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=bse(i,e.groupby,e.field),o=(e.groupby||[]).map(po),a=[],u=e.step||.01,l=e.probs||Cc(u/2,1-eHt,u),c=l.length;return s.forEach(f=>{const d=Xie(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Ii(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function pLe(e){Ye.call(this,null,e)}Ot(pLe,Ye,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=mn(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=Gie(i);r[mn(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[mn(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function Ose(e){Ye.call(this,[],e),this.count=0}Ose.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Ot(Ose,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[mn(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*qd()),d<o.length&&d>=u&&(f=o[d],s[mn(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=mn(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[mn(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[mn(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[mn(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[mn(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[mn(c)])),this.count=a,this.value=n.source=o,n}});function Fse(e){Ye.call(this,null,e)}Fse.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Ot(Fse,Ye,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Cc(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Ii(s)}),n.add=t.add.concat(this.value),n}});function mLe(e){Ye.call(this,null,e),this.modified(!0)}Ot(mLe,Ye,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Mse(e){Ye.call(this,null,e)}const gLe=["unit0","unit1"];Mse.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:jie,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:gLe}]};Ot(Mse,Ye,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?vA:yA)(s.unit).offset,a=e.as||gLe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Yu(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:h$e({extent:e.extent||Zm(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=Uie(r),o=this.value||{},a=(n?i$e:r$e)(s,i);return a.unit=Kr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function yLe(e){Ye.call(this,gA(),e)}Ot(yLe,Ye,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function vLe(e){Ye.call(this,null,e)}Ot(vLe,Ye,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(eE(e.sort)):t.source).map(e.field))}});function tHt(e,t,n,r){const i=m3[e](t,n);return{init:i.init||R1,update:function(s,o){o[r]=i.next(s)}}}const m3={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=m3.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||rt("ntile num must be greater than zero.");const n=m3.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||rt("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=nHt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function nHt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const rHt=Object.keys(m3);function bLe(e){const t=Lt(e.ops),n=Lt(e.fields),r=Lt(e.params),i=Lt(e.aggregate_params),s=Lt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){Lt(Yu(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=po(g),_=Y$e(p,b,s[m]);if(h(g),o.push(_),vn(m3,p))a.push(tHt(p,g,y,_));else{if(g==null&&p!=="count"&&rt("Null aggregate field specified."),p==="count"){c.push(_);return}d=!1;let w=l[b];w||(w=l[b]=[],w.field=g,f.push(w)),w.push(K$e(p,v,_))}}),(c.length||f.length)&&(this.cell=iHt(f,c,d)),this.inputs=Object.keys(u)}const xLe=bLe.prototype;xLe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};xLe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function iHt(e,t,n){e=e.map(u=>Q$e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new hse;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function $se(e){Ye.call(this,{},e),this._mlen=0,this._mods=[]}$se.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:rHt.concat(KN)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Ot($se,Ye,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=eE(e.sort),i=sX(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new bLe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)sHt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=J$e(mn),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function sHt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?Db(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||il(-1)};t.init();for(let f=0;f<u;++f)oHt(c,o,f,u),s&&aHt(c,l),t.update(c,a[f])}function oHt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function aHt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const uHt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Kv,bin:pse,collect:mse,compare:Z$e,countpattern:gse,cross:yse,density:vse,dotbin:xse,expression:iLe,extent:wse,facet:O9,field:sLe,filter:Ese,flatten:Sse,fold:Cse,formula:Tse,generate:oLe,impute:Ase,joinaggregate:Dse,kde:Ise,key:aLe,load:uLe,lookup:kse,multiextent:lLe,multivalues:cLe,params:fLe,pivot:Rse,prefacet:dLe,project:Nse,proxy:hLe,quantile:Pse,relay:pLe,sample:Ose,sequence:Fse,sieve:mLe,subflow:_se,timeunit:Mse,tupleindex:yLe,values:vLe,window:$se},Symbol.toStringTag,{value:"Module"}));function gv(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const lHt=()=>typeof Image<"u"?Image:null;function Lse(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const cHt="identity",zC="linear",fy="log",XN="pow",QN="sqrt",F9="symlog",o_="time",a_="utc",Om="sequential",xA="diverging",VC="quantile",M9="quantize",$9="threshold",Bse="ordinal",oX="point",wLe="band",jse="bin-ordinal",ba="continuous",JN="discrete",ZN="discretizing",rh="interpolating",Use="temporal";function fHt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function dHt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function zse(){const e=Nb().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=Lse(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Cc(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,Rv(h,m)-1),v=m===g?y:Rv(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return zse().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function _Le(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return _Le(t())},e}function hHt(){return _Le(zse().paddingInner(1))}var pHt=Array.prototype.map;function mHt(e){return pHt.call(e,qu)}const gHt=Array.prototype.slice;function ELe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Rv(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=mHt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=gHt.call(r),n):t.slice()},n.tickFormat=function(r,i){return XPe(e[0],Kr(e),r??10,i)},n.copy=function(){return ELe().domain(n.domain()).range(n.range())},n}const H5=new Map,SLe=Symbol("vega_scale");function CLe(e){return e[SLe]=!0,e}function yHt(e){return e&&e[SLe]===!0}function vHt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?fHt(s):s.invertExtent?dHt(s):void 0),s.type=e,CLe(s)};return r.metadata=gp(Lt(n)),r}function xi(e,t,n){return arguments.length>1?(H5.set(e,vHt(e,t,n)),this):TLe(e)?H5.get(e):void 0}xi(cHt,QPe);xi(zC,el,ba);xi(fy,ZPe,[ba,fy]);xi(XN,ane,ba);xi(QN,XIt,ba);xi(F9,eOe,ba);xi(o_,fne,[ba,Use]);xi(a_,fRt,[ba,Use]);xi(Om,dne,[ba,rh]);xi(`${Om}-${zC}`,dne,[ba,rh]);xi(`${Om}-${fy}`,hOe,[ba,rh,fy]);xi(`${Om}-${XN}`,hne,[ba,rh]);xi(`${Om}-${QN}`,dRt,[ba,rh]);xi(`${Om}-${F9}`,pOe,[ba,rh]);xi(`${xA}-${zC}`,mOe,[ba,rh]);xi(`${xA}-${fy}`,gOe,[ba,rh,fy]);xi(`${xA}-${XN}`,pne,[ba,rh]);xi(`${xA}-${QN}`,hRt,[ba,rh]);xi(`${xA}-${F9}`,yOe,[ba,rh]);xi(VC,tOe,[ZN,VC]);xi(M9,nOe,ZN);xi($9,rOe,ZN);xi(jse,ELe,[JN,ZN]);xi(Bse,Nb,JN);xi(wLe,zse,JN);xi(oX,hHt,JN);function TLe(e){return H5.has(e)}function nE(e,t){const n=H5.get(e);return n&&n.metadata[t]}function Vse(e){return nE(e,ba)}function HC(e){return nE(e,JN)}function aX(e){return nE(e,ZN)}function ALe(e){return nE(e,fy)}function bHt(e){return nE(e,Use)}function DLe(e){return nE(e,rh)}function ILe(e){return nE(e,VC)}const xHt=["clamp","base","constant","exponent"];function kLe(e,t){const n=t[0],r=Kr(t)-n;return function(i){return e(n+i*r)}}function L9(e,t,n){return jte(Hse(t||"rgb",n),e)}function RLe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function NLe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?il(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=xi(s)().domain([t,n]).range([0,1]),xHt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function Hse(e,t){const n=GSt[wHt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function wHt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const _Ht={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},EHt={accent:mRt,category10:pRt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:gRt,observable10:yRt,paired:vRt,pastel1:bRt,pastel2:xRt,set1:wRt,set2:_Rt,set3:ERt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function PLe(e){if(at(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function OLe(e,t){for(const n in e)qse(n,t(e[n]))}const hxe={};OLe(EHt,PLe);OLe(_Ht,e=>L9(PLe(e)));function qse(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(hxe[e]=t,this):hxe[e]}const TF="symbol",SHt="discrete",CHt="gradient",THt=e=>at(e)?e.map(t=>String(t)):String(e),AHt=(e,t)=>e[1]-t[1],DHt=(e,t)=>t[1]-e[1];function Wse(e,t,n){let r;return fi(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(WN(e.domain())/n||1)+1))),jt(t)&&(r=t.step,t=t.interval),Bt(t)&&(t=e.type===o_?yA(t):e.type==a_?vA(t):rt("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function FLe(e,t,n){let r=e.range(),i=r[0],s=Kr(r),o=AHt;if(i>s&&(r=s,s=i,i=r,o=DHt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Kr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function Gse(e,t){return e.bins?FLe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function MLe(e,t,n,r,i,s){const o=t.type;let a=THt;if(o===o_||i===o_)a=e.timeFormat(r);else if(o===a_||i===a_)a=e.utcFormat(r);else if(ALe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=$Le(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function $Le(e,t,n){const r=Gse(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const uX={[VC]:"quantiles",[M9]:"thresholds",[$9]:"domain"},LLe={[VC]:"quantiles",[M9]:"domain"};function BLe(e,t){return e.bins?RHt(e.bins):e.type===fy?$Le(e,t,!0):uX[e.type]?kHt(e[uX[e.type]]()):Gse(e,t)}function IHt(e,t,n){const r=t[LLe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function kHt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function RHt(e){const t=e.slice(0,-1);return t.max=Kr(e),t}const NHt=e=>uX[e.type]||e.bins;function jLe(e,t,n,r,i,s,o){const a=LLe[t.type]&&s!==o_&&s!==a_?IHt(e,t,i):MLe(e,t,n,i,s,o);return r===TF&&NHt(t)?PHt(a):r===SHt?OHt(a):FHt(a)}const PHt=e=>(t,n,r)=>{const i=pxe(r[n+1],pxe(r.max,1/0)),s=mxe(t,e),o=mxe(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},pxe=(e,t)=>e??t,OHt=e=>(t,n)=>n?e(t):null,FHt=e=>t=>e(t),mxe=(e,t)=>Number.isFinite(e)?t(e):null;function MHt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Kr(t),s=i-r;if(e.type===$9){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function $Ht(e,t,n,r){const i=r||t.type;return Bt(n)&&bHt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===o_?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===a_?e.utcFormat("%A, %d %B %Y, %X UTC"):jLe(e,t,5,null,n,r,!0)}function ULe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=$Ht(e,t,n.format,n.formatType);if(aX(t.type)){const s=BLe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(HC(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Kr(s))}`}}let zLe=0;function LHt(){zLe=0}const q5="p_";function Yse(e){return e&&e.gradient}function VLe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?q5:"";return i||(i=e.id="gradient_"+zLe++,r==="radial"?(e.x1=Hp(e.x1,.5),e.y1=Hp(e.y1,.5),e.r1=Hp(e.r1,0),e.x2=Hp(e.x2,.5),e.y2=Hp(e.y2,.5),e.r2=Hp(e.r2,.5),s=q5):(e.x1=Hp(e.x1,0),e.y1=Hp(e.y1,0),e.x2=Hp(e.x2,1),e.y2=Hp(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Hp(e,t){return e??t}function HLe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const gxe={basis:{curve:$Rt},"basis-closed":{curve:LRt},"basis-open":{curve:BRt},bundle:{curve:jRt,tension:"beta",value:.85},cardinal:{curve:URt,tension:"tension",value:0},"cardinal-open":{curve:VRt,tension:"tension",value:0},"cardinal-closed":{curve:zRt,tension:"tension",value:0},"catmull-rom":{curve:HRt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:qRt,tension:"alpha",value:.5},"catmull-rom-open":{curve:WRt,tension:"alpha",value:.5},linear:{curve:mne},"linear-closed":{curve:GRt},monotone:{horizontal:KRt,vertical:YRt},natural:{curve:XRt},step:{curve:QRt},"step-after":{curve:ZRt},"step-before":{curve:JRt}};function Kse(e,t,n){var r=vn(gxe,e)&&gxe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const BHt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},jHt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,UHt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,zHt=/^((\s+,?\s*)|(,\s*))/,VHt=/^[01]/;function qC(e){const t=[];return(e.match(jHt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=BHt[s],a=HHt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function HHt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?VHt:UHt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(zHt);u!==null&&(i+=u[0].length)}return r}const Xv=Math.PI/180,qHt=1e-14,Zx=Math.PI/2,ym=Math.PI*2,s2=Math.sqrt(3)/2;var VH={},HH={},qLe=[].join;function WHt(e,t,n,r,i,s,o,a,u){const l=qLe.call(arguments);if(VH[l])return VH[l];const c=o*Xv,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,_=g*a+y*u,w=v*a+b*u,S=g*e+y*t,T=v*e+b*t;let k=1/((S-_)*(S-_)+(T-w)*(T-w))-.25;k<0&&(k=0);let I=Math.sqrt(k);s==i&&(I=-I);const R=.5*(_+S)-I*(T-w),F=.5*(w+T)+I*(S-_),O=Math.atan2(w-F,_-R);let H=Math.atan2(T-F,S-R)-O;H<0&&s===1?H+=ym:H>0&&s===0&&(H-=ym);const U=Math.ceil(Math.abs(H/(Zx+.001))),G=[];for(let Y=0;Y<U;++Y){const J=O+Y*H/U,$=O+(Y+1)*H/U;G[Y]=[R,F,J,$,n,r,f,d]}return VH[l]=G}function GHt(e){const t=qLe.call(e);if(HH[t])return HH[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),_=8/3*b*b/Math.sin(v),w=n+p-_*m,S=r+m+_*p,T=n+g,A=r+y,k=T+_*y,I=A-_*g;return HH[t]=[c*w+f*S,d*w+h*S,c*k+f*I,d*k+h*I,c*T+f*A,d*T+h*A]}const hd=["l",0,0,0,0,0,0,0];function YHt(e,t,n){const r=hd[0]=e[0];if(r==="a"||r==="A")hd[1]=t*e[1],hd[2]=n*e[2],hd[3]=e[3],hd[4]=e[4],hd[5]=e[5],hd[6]=t*e[6],hd[7]=n*e[7];else if(r==="h"||r==="H")hd[1]=t*e[1];else if(r==="v"||r==="V")hd[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)hd[i]=(i%2==1?t:n)*e[i];return hd}function g3(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=YHt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":yxe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":yxe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function yxe(e,t,n,r){const i=WHt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=GHt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const vxe=.5773502691896257,bxe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,ym)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=s2*n,i=r-n*vxe,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=s2*n,i=r-n*vxe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=s2*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=s2*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=s2*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=s2*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function WLe(e){return vn(bxe,e)?bxe[e]:KHt(e)}var qH={};function KHt(e){if(!vn(qH,e)){const t=qC(e);qH[e]={draw:function(n,r){g3(n,t,0,0,Math.sqrt(r)/2)}}}return qH[e]}const n1=.448084975506;function XHt(e){return e.x}function QHt(e){return e.y}function JHt(e){return e.width}function ZHt(e){return e.height}function W0(e){return typeof e=="function"?e:()=>+e}function G4(e,t,n){return Math.max(t,Math.min(e,n))}function GLe(){var e=XHt,t=QHt,n=JHt,r=ZHt,i=W0(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=G4(+i.call(this,c),0,v),_=G4(+s.call(this,c),0,v),w=G4(+o.call(this,c),0,v),S=G4(+a.call(this,c),0,v);if(u||(u=h=wB()),b<=0&&_<=0&&w<=0&&S<=0)u.rect(p,m,g,y);else{var T=p+g,A=m+y;u.moveTo(p+b,m),u.lineTo(T-_,m),u.bezierCurveTo(T-n1*_,m,T,m+n1*_,T,m+_),u.lineTo(T,A-S),u.bezierCurveTo(T,A-n1*S,T-n1*S,A,T-S,A),u.lineTo(p+w,A),u.bezierCurveTo(p+n1*w,A,p,A-n1*w,p,A-w),u.lineTo(p,m+b),u.bezierCurveTo(p,m+n1*b,p+n1*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=W0(c),l):e},l.y=function(c){return arguments.length?(t=W0(c),l):t},l.width=function(c){return arguments.length?(n=W0(c),l):n},l.height=function(c){return arguments.length?(r=W0(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=W0(c),s=f!=null?W0(f):i,a=d!=null?W0(d):i,o=h!=null?W0(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function YLe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,_=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,_-Math.PI,_),i.lineTo(o+v,a+b),i.arc(o,a,u,_,_+Math.PI)}else i.arc(f,d,p,0,ym);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=wB()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function eP(e,t){return e??t}const tP=e=>e.x||0,nP=e=>e.y||0,eqt=e=>e.width||0,tqt=e=>e.height||0,nqt=e=>(e.x||0)+(e.width||0),rqt=e=>(e.y||0)+(e.height||0),iqt=e=>e.startAngle||0,sqt=e=>e.endAngle||0,oqt=e=>e.padAngle||0,aqt=e=>e.innerRadius||0,uqt=e=>e.outerRadius||0,lqt=e=>e.cornerRadius||0,cqt=e=>eP(e.cornerRadiusTopLeft,e.cornerRadius)||0,fqt=e=>eP(e.cornerRadiusTopRight,e.cornerRadius)||0,dqt=e=>eP(e.cornerRadiusBottomRight,e.cornerRadius)||0,hqt=e=>eP(e.cornerRadiusBottomLeft,e.cornerRadius)||0,pqt=e=>eP(e.size,64),mqt=e=>e.size||1,B9=e=>e.defined!==!1,gqt=e=>WLe(e.shape||"circle"),yqt=LY().startAngle(iqt).endAngle(sqt).padAngle(oqt).innerRadius(aqt).outerRadius(uqt).cornerRadius(lqt),vqt=wOe().x(tP).y1(nP).y0(rqt).defined(B9),bqt=wOe().y(nP).x1(tP).x0(nqt).defined(B9),xqt=gne().x(tP).y(nP).defined(B9),wqt=GLe().x(tP).y(nP).width(eqt).height(tqt).cornerRadius(cqt,fqt,dqt,hqt),_qt=MRt().type(gqt).size(pqt),Eqt=YLe().x(tP).y(nP).defined(B9).size(mqt);function Xse(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Sqt(e,t){return yqt.context(e)(t)}function Cqt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?bqt:vqt).curve(Kse(r,n.orient,n.tension)).context(e)(t)}function Tqt(e,t){const n=t[0],r=n.interpolate||"linear";return xqt.curve(Kse(r,n.orient,n.tension)).context(e)(t)}function wA(e,t,n,r){return wqt.context(e)(t,n,r)}function Aqt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Dqt(e,t){return _qt.context(e)(t)}function Iqt(e,t){return Eqt.context(e)(t)}var KLe=1;function XLe(){KLe=1}function Qse(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+KLe++),o=i.clipping[s]||(i.clipping[s]={id:s});return cr(r)?o.path=r(null):Xse(n)?o.path=wA(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Go(e){this.clear(),e&&this.union(e)}Go.prototype={clone(){return new Go(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function j9(e){this.mark=e,this.bounds=this.bounds||new Go}function U9(e){j9.call(this,e),this.items=this.items||[]}Ot(U9,j9);class QLe{constructor(t){this._pending=0,this._loader=t||E9()}pending(){return this._pending}sanitizeURL(t){const n=this;return xxe(n),n._loader.sanitize(t,{context:"href"}).then(r=>(BD(n),r)).catch(()=>(BD(n),null))}loadImage(t){const n=this,r=lHt();return xxe(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=vn(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>BD(n),o.onerror=()=>BD(n),o.src=s,o}).catch(i=>(BD(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function xxe(e){e._pending+=1}function BD(e){e._pending-=1}function Py(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?kqt(t,r):0))}return e}function kqt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Rqt=ym-1e-8;let z9,AF,DF,Ew,lX,IF,cX,fX;const V1=(e,t)=>z9.add(e,t),kF=(e,t)=>V1(AF=e,DF=t),wxe=e=>V1(e,z9.y1),_xe=e=>V1(z9.x1,e),ew=(e,t)=>lX*e+cX*t,tw=(e,t)=>IF*e+fX*t,WH=(e,t)=>V1(ew(e,t),tw(e,t)),GH=(e,t)=>kF(ew(e,t),tw(e,t));function rP(e,t){return z9=e,t?(Ew=t*Xv,lX=fX=Math.cos(Ew),IF=Math.sin(Ew),cX=-IF):(lX=fX=1,Ew=IF=cX=0),Nqt}const Nqt={beginPath(){},closePath(){},moveTo:GH,lineTo:GH,rect(e,t,n,r){Ew?(WH(e+n,t),WH(e+n,t+r),WH(e,t+r),GH(e,t)):(V1(e+n,t+r),kF(e,t))},quadraticCurveTo(e,t,n,r){const i=ew(e,t),s=tw(e,t),o=ew(n,r),a=tw(n,r);Exe(AF,i,o,wxe),Exe(DF,s,a,_xe),kF(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=ew(e,t),a=tw(e,t),u=ew(n,r),l=tw(n,r),c=ew(i,s),f=tw(i,s);Sxe(AF,o,u,c,wxe),Sxe(DF,a,l,f,_xe),kF(c,f)},arc(e,t,n,r,i,s){if(r+=Ew,i+=Ew,AF=n*Math.cos(i)+e,DF=n*Math.sin(i)+t,Math.abs(i-r)>Rqt)V1(e-n,t-n),V1(e+n,t+n);else{const o=l=>V1(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%ym,r<0&&(r+=ym),i=i%ym,i<0&&(i+=ym),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=ym,a=r-r%Zx,u=0;u<4&&a>i;++u,a-=Zx)o(a);else for(a=r-r%Zx+Zx,u=0;u<4&&a<i;++u,a=a+Zx)o(a)}}};function Exe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Sxe(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>qHt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(Cxe(u,e,t,n,r)),0<l&&l<1&&i(Cxe(l,e,t,n,r))}function Cxe(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var yv=(yv=gv(1,1))?yv.getContext("2d"):null;const dX=new Go;function Jse(e){return function(t,n){if(!yv)return!0;e(yv,t),dX.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=dX;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(yv.isPointInPath(u,a))return!0;return!1}}function Zse(e,t){return t.contains(e.x||0,e.y||0)}function JLe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(dX.set(n,r,n+i,r+s))}function ZLe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return nS(t,n,r,i,s)}function nS(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function WC(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Eh(e,t){return e??t}function Txe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function Pqt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Eh(t.x1,.5)*r,n.y1+Eh(t.y1,.5)*i,Math.max(r,i)*Eh(t.r1,0),n.x1+Eh(t.x2,.5)*r,n.y1+Eh(t.y2,.5)*i,Math.max(r,i)*Eh(t.r2,.5));else{const o=Eh(t.x1,0),a=Eh(t.y1,0),u=Eh(t.x2,1),l=Eh(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=gv(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Txe(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Txe(s,t.stops)}function eBe(e,t,n){return Yse(n)?Pqt(e,n,t.bounds):n}function W5(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=eBe(e,t,t.fill),!0):!1}var Oqt=[];function GC(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=eBe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Oqt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Fqt(e,t){return e.zindex-t.zindex||e.index-t.index}function eoe(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(Fqt)}function vp(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=eoe(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function G5(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=eoe(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function toe(e){return function(t,n,r){vp(n,i=>{(!r||r.intersects(i.bounds))&&tBe(e,t,i,i)})}}function Mqt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&tBe(e,t,n.items[0],n.items)}}function tBe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(WC(t,n),n.fill&&W5(t,n,i)&&t.fill(),n.stroke&&GC(t,n,i)&&t.stroke()))}function V9(e){return e=e||Vd,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,G5(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function iP(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function noe(e){return V9(iP(e))}function Ow(e,t){return"translate("+e+","+t+")"}function roe(e){return"rotate("+e+")"}function $qt(e,t){return"scale("+e+","+t+")"}function nBe(e){return Ow(e.x||0,e.y||0)}function Lqt(e){return Ow(e.x||0,e.y||0)+(e.angle?" "+roe(e.angle):"")}function Bqt(e){return Ow(e.x||0,e.y||0)+(e.angle?" "+roe(e.angle):"")+(e.scaleX||e.scaleY?" "+$qt(e.scaleX||1,e.scaleY||1):"")}function ioe(e,t,n){function r(o,a){o("transform",Lqt(a)),o("d",t(null,a))}function i(o,a){return t(rP(o,a.angle),a),Py(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=Xv),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:toe(s),pick:noe(s),isect:n||Jse(s)}}var jqt=ioe("arc",Sqt);function Uqt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function zqt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function Vqt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function soe(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(rP(u),c),Py(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=iP(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:Mqt(s),pick:a,isect:Zse,tip:n}}var Hqt=soe("area",Cqt,Uqt);function qqt(e,t){var n=t.clip;e.save(),cr(n)?(e.beginPath(),n(e),e.clip()):rBe(e,t.group)}function rBe(e,t){e.beginPath(),Xse(t)?wA(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function iBe(e){const t=Eh(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Wqt(e,t){e("transform",nBe(t))}function sBe(e,t){const n=iBe(t);e("d",wA(null,t,n,n))}function Gqt(e,t){e("class","background"),e("aria-hidden",!0),sBe(e,t)}function Yqt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?sBe(e,t):e("d","")}function Kqt(e,t,n){const r=t.clip?Qse(n,t,t):null;e("clip-path",r)}function Xqt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Py(e,t),e.translate(t.x||0,t.y||0)}function y3(e,t,n,r){const i=iBe(t);e.beginPath(),wA(e,t,(n||0)+i,(r||0)+i)}const Qqt=iP(y3),Jqt=iP(y3,!1),Zqt=iP(y3,!0);function eWt(e,t,n,r){vp(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(y3(e,i,s,o),WC(e,i),i.fill&&W5(e,i,u)&&e.fill(),i.stroke&&!a&&GC(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&rBe(e,i),n&&n.translate(-s,-o),vp(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(y3(e,i,s,o),WC(e,i),GC(e,i,u)&&e.stroke())})}function tWt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return G5(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&Xse(u)&&!Zqt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&Jqt(e,u,o,a)?(e.restore(),u):(l=G5(u,v=>nWt(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&Qqt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function nWt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var rWt={type:"group",tag:"g",nested:!1,attr:Wqt,bound:Xqt,draw:eWt,pick:tWt,isect:JLe,content:Kqt,background:Gqt,foreground:Yqt},v3={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function ooe(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function aoe(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function uoe(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function H9(e,t){return e==="center"?t/2:e==="right"?t:0}function q9(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function iWt(e,t,n){const r=ooe(t,n),i=aoe(t,r),s=uoe(t,r),o=(t.x||0)-H9(t.align,i),a=(t.y||0)-q9(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,v3["xmlns:xlink"],"xlink:href"),e("transform",Ow(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function sWt(e,t){const n=t.image,r=aoe(t,n),i=uoe(t,n),s=(t.x||0)-H9(t.align,r),o=(t.y||0)-q9(t.baseline,i);return e.set(s,o,s+r,o+i)}function oWt(e,t,n){vp(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=ooe(r,this);let s=aoe(r,i),o=uoe(r,i);if(s===0||o===0)return;let a=(r.x||0)-H9(r.align,s),u=(r.y||0)-q9(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(WC(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var aWt={type:"image",tag:"image",nested:!1,attr:iWt,bound:sWt,draw:oWt,pick:V9(),isect:Vd,get:ooe,xOffset:H9,yOffset:q9},uWt=soe("line",Tqt,zqt);function lWt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Bqt(t)),e("d",t.path)}function RF(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Xv,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=qC(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),g3(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):g3(e,u,r,i,s,o)}function cWt(e,t){return RF(rP(e,t.angle),t)?e.set(0,0,0,0):Py(e,t,!0)}var fWt={type:"path",tag:"path",nested:!1,attr:lWt,bound:cWt,draw:toe(RF),pick:noe(RF),isect:Jse(RF)};function dWt(e,t){e("d",wA(null,t))}function hWt(e,t){var n,r;return Py(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Axe(e,t){e.beginPath(),wA(e,t)}var pWt={type:"rect",tag:"path",nested:!1,attr:dWt,bound:hWt,draw:toe(Axe),pick:noe(Axe),isect:JLe};function mWt(e,t){e("transform",nBe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function gWt(e,t){var n,r;return Py(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function oBe(e,t,n){var r,i,s,o;return t.stroke&&GC(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function yWt(e,t,n){vp(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&oBe(e,r,i)&&(WC(e,r),e.stroke())}})}function vWt(e,t,n,r){return e.isPointInStroke?oBe(e,t,1)&&e.isPointInStroke(n,r):!1}var bWt={type:"rule",tag:"line",nested:!1,attr:mWt,bound:gWt,draw:yWt,pick:V9(vWt),isect:ZLe},xWt=ioe("shape",Aqt),wWt=ioe("symbol",Dqt,Zse);const Dxe=H5e();var kf={height:v0,measureWidth:loe,estimateWidth:Y5,width:Y5,canvas:aBe};aBe(!0);function aBe(e){kf.width=e&&yv?loe:Y5}function Y5(e,t){return uBe(Jv(e,t),v0(e))}function uBe(e,t){return~~(.8*e.length*t)}function loe(e,t){return v0(e)<=0||!(t=Jv(e,t))?0:lBe(t,W9(e))}function lBe(e,t){const n=`(${t}) ${e}`;let r=Dxe.get(n);return r===void 0&&(yv.font=t,r=yv.measureText(e).width,Dxe.set(n,r)),r}function v0(e){return e.fontSize!=null?+e.fontSize||0:11}function Qv(e){return e.lineHeight!=null?e.lineHeight:v0(e)+2}function _Wt(e){return at(e)?e.length>1?e:e[0]:e}function sP(e){return _Wt(e.lineBreak&&e.text&&!at(e.text)?e.text.split(e.lineBreak):e.text)}function coe(e){const t=sP(e);return(at(t)?t.length-1:0)*Qv(e)}function Jv(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?SWt(e,n):n}function EWt(e){if(kf.width===loe){const t=W9(e);return n=>lBe(n,t)}else if(kf.width===Y5){const t=v0(e);return n=>uBe(n,t)}else return t=>kf.width(e,t)}function SWt(e,t){var n=+e.limit,r=EWt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function oP(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function W9(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+v0(e)+"px "+oP(e,t)}function foe(e){var t=e.baseline,n=v0(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Qv(e):t==="line-bottom"?.29*n-.5*Qv(e):0)}const CWt={left:"start",center:"middle",right:"end"},Rk=new Go;function G9(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Zx,t+=r*Math.cos(i),n+=r*Math.sin(i)),Rk.x1=t,Rk.y1=n,Rk}function TWt(e,t){var n=t.dx||0,r=(t.dy||0)+foe(t),i=G9(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",CWt[t.align]||"start"),a?(u=Ow(s,o)+" "+roe(a),(n||r)&&(u+=" "+Ow(n,r))):u=Ow(s+n,o+r),e("transform",u)}function doe(e,t,n){var r=kf.height(t),i=t.align,s=G9(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+foe(t)-Math.round(.8*r),c=sP(t),f;if(at(c)?(r+=Qv(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,kf.width(t,h)),0)):f=kf.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*Xv,o,a);else if(n===2)return e.rotatedPoints(t.angle*Xv,o,a);return e}function AWt(e,t,n){vp(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=W9(r),e.textAlign=r.align||"left",s=G9(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Xv),o=a=0),o+=r.dx||0,a+=(r.dy||0)+foe(r),c=sP(r),WC(e,r),at(c))for(l=Qv(r),u=0;u<c.length;++u)f=Jv(r,c[u]),r.fill&&W5(e,r,i)&&e.fillText(f,o,a),r.stroke&&GC(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=Jv(r,c),r.fill&&W5(e,r,i)&&e.fillText(f,o,a),r.stroke&&GC(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function DWt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=G9(t),a=o.x1,u=o.y1,l=doe(Rk,t,1),c=-t.angle*Xv,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function IWt(e,t){const n=doe(Rk,e,2);return nS(t,n[0],n[1],n[2],n[3])||nS(t,n[0],n[1],n[4],n[5])||nS(t,n[4],n[5],n[6],n[7])||nS(t,n[2],n[3],n[6],n[7])}var kWt={type:"text",tag:"text",nested:!1,attr:TWt,bound:doe,draw:AWt,pick:V9(DWt),isect:IWt},RWt=soe("trail",Iqt,Vqt),Wf={arc:jqt,area:Hqt,group:rWt,image:aWt,line:uWt,path:fWt,rect:pWt,rule:bWt,shape:xWt,symbol:wWt,text:kWt,trail:RWt};function hX(e,t,n){var r=Wf[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Go),e,n)}var Ixe={mark:null};function cBe(e,t,n){var r=Wf[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(Ixe.mark=e,l=Ixe),c=hX(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Go,o)for(a=0,u=s.length;a<u;++a)t.union(hX(s[a],i,n));return e.bounds=t}const NWt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function fBe(e,t){return JSON.stringify(e,NWt,t)}function dBe(e){const t=typeof e=="string"?JSON.parse(e):e;return hBe(t)}function hBe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&hBe(n[i]);return t&&cBe(e),e}class pBe{constructor(t){arguments.length?this.root=dBe(t):(this.root=kxe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new U9(this.root)])}toJSON(t){return fBe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=kxe(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function kxe(e,t){const n={bounds:new Go,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function H1(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function hoe(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function ua(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=H1(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Cd(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function mBe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Y9(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function PWt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Wf[i.marktype]).tip){for(o=Y9(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let poe=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||E9(),this._tooltip=n||OWt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=H1(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=PWt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function OWt(e,t,n,r){e.element().setAttribute("title",r||"")}class aP{constructor(t){this._el=null,this._bgcolor=null,this._loader=new QLe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const FWt="keydown",MWt="keypress",$Wt="keyup",gBe="dragenter",NF="dragleave",yBe="dragover",pX="pointerdown",LWt="pointerup",K5="pointermove",PF="pointerout",vBe="pointerover",mX="mousedown",BWt="mouseup",bBe="mousemove",X5="mouseout",xBe="mouseover",Q5="click",jWt="dblclick",UWt="wheel",wBe="mousewheel",J5="touchstart",Z5="touchmove",e$="touchend",zWt=[FWt,MWt,$Wt,gBe,NF,yBe,pX,LWt,K5,PF,vBe,mX,BWt,bBe,X5,xBe,Q5,jWt,UWt,wBe,J5,Z5,e$],gX=K5,Nk=X5,yX=Q5;class uP extends poe{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=zWt,this.pointermove=Nxe([K5,bBe],[vBe,xBe],[PF,X5]),this.dragover=Nxe([yBe],[gBe],[NF]),this.pointerout=Pxe([PF,X5]),this.dragleave=Pxe([NF])}initialize(t,n,r){return this._canvas=t&&hoe(t,"canvas"),[Q5,mX,pX,K5,PF,NF].forEach(i=>Rxe(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(wBe,t)}pointerdown(t){this._down=this._active,this.fire(pX,t)}mousedown(t){this._down=this._active,this.fire(mX,t)}click(t){this._down===this._active&&(this.fire(Q5,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(J5,t,!0)}touchmove(t){this.fire(Z5,t,!0)}touchend(t){this.fire(e$,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===yX&&i&&i.href?this.handleHref(n,i,i.href):(t===gX||t===Nk)&&this.handleTooltip(n,i,t!==Nk),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(Rxe(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=Y9(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Wf[t.marktype].pick.call(this,o,t,n,r,i,s)}}const VWt=e=>e===J5||e===Z5||e===e$?[J5,Z5,e$]:[e];function Rxe(e,t){VWt(t).forEach(n=>HWt(e,n))}function HWt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function UI(e,t,n){t.forEach(r=>e.fire(r,n))}function Nxe(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?UI(this,e,r):((!i||!i.exit)&&UI(this,n,r),this._active=s,UI(this,t,r),UI(this,e,r))}}function Pxe(e){return function(t){UI(this,e,t),this._active=null}}function qWt(){return typeof window<"u"&&window.devicePixelRatio||1}function WWt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?qWt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class t$ extends aP{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Go,this._tempb=new Go}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:gv(1,1,this._options.type),t&&this._canvas&&(Cd(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)WWt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||rt("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=GWt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):YWt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Wf[n.marktype];n.clip&&qqt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const GWt=(e,t,n)=>new Go().set(0,0,t,n).translate(-e[0],-e[1]);function YWt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class _Be extends poe{constructor(t,n){super(t,n);const r=this;r._hrefHandler=YH(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=YH(r,(i,s)=>{r.handleTooltip(i,s,i.type!==Nk)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(yX,this._hrefHandler),i.removeEventListener(gX,this._tooltipHandler),i.removeEventListener(Nk,this._tooltipHandler)),this._svg=i=t&&hoe(t,"svg"),i&&(i.addEventListener(yX,this._hrefHandler),i.addEventListener(gX,this._tooltipHandler),i.addEventListener(Nk,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:YH(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const YH=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},EBe="aria-hidden",moe="aria-label",goe="role",yoe="aria-roledescription",SBe="graphics-object",voe="graphics-symbol",CBe=(e,t,n)=>({[goe]:e,[yoe]:t,[moe]:n||void 0}),KWt=gp(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Oxe={axis:{desc:"axis",caption:JWt},legend:{desc:"legend",caption:ZWt},"title-text":{desc:"title",caption:e=>`Title text '${Mxe(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Mxe(e)}'`}},Fxe={ariaRole:goe,ariaRoleDescription:yoe,description:moe};function TBe(e,t){const n=t.aria===!1;if(e(EBe,n||void 0),n||t.description==null)for(const r in Fxe)e(Fxe[r],void 0);else{const r=t.mark.marktype;e(moe,t.description),e(goe,t.ariaRole||(r==="group"?SBe:voe)),e(yoe,t.ariaRoleDescription||`${r} mark`)}}function ABe(e){return e.aria===!1?{[EBe]:!0}:KWt[e.role]?null:Oxe[e.role]?QWt(e,Oxe[e.role]):XWt(e)}function XWt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return CBe(n?SBe:voe,`${t} mark container`,e.description)}function QWt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return CBe(t.role||voe,t.desc,n.description||r(n))}catch{return null}}function Mxe(e){return Lt(e.text).join(" ")}function JWt(e){const t=e.datum,n=e.orient,r=t.title?DBe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${HC(a)?"discrete":a} scale with ${ULe(o,s,e)}`}function ZWt(e){const t=e.datum,n=t.title?DBe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return tGt(r)+(n?` titled '${n}'`:"")+` for ${eGt(s)} with ${ULe(u,a,e)}`}function DBe(e){try{return Lt(Kr(e.items).items[0].text).join(" ")}catch{return null}}function eGt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Kr(e)}function tGt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const IBe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),nGt=e=>IBe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function boe(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${nGt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=IBe(u),a),toString:()=>e};return a}const kBe=e=>RBe(boe(),e)+"";function RBe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):RBe(e,r)}return e.close()}const n$={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},r$={blend:"mix-blend-mode"},NBe={fill:"none","stroke-miterlimit":10},jD=0,$xe="http://www.w3.org/2000/xmlns/",sa=v3.xmlns;class xoe extends aP{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=ua(t,0,"svg",sa),this._svg.setAttributeNS($xe,"xmlns",sa),this._svg.setAttributeNS($xe,"xmlns:xlink",v3["xmlns:xlink"]),this._svg.setAttribute("version",v3.version),this._svg.setAttribute("class","marks"),Cd(t,1),this._root=ua(this._svg,jD,"g",sa),q1(this._root,NBe),Cd(this._svg,jD+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(q1(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=ua(t,jD,"rect",sa),q1(r,{width:this._width,height:this._height,fill:n}));const i=kBe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Cd(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Wf[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Lxe(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,Lxe(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Wf[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=Bxe(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return Cd(c,0),n._svg;c.setAttribute("class",mBe(n));const f=ABe(n);for(const m in f)xl(c,m,f[m]);l||xl(c,"pointer-events",u),xl(c,"clip-path",n.clip?Qse(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=Bxe(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&sGt(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):vp(n,p),Cd(c,h),c}_update(t,n,r){Cg=n,Mu=n.__values__,TBe(Pk,r),t.attr(Pk,r,this);const i=aGt[t.type];i&&i.call(this,t,n,r),Cg&&this.style(Cg,r)}style(t,n){if(n!=null){for(const r in n$){let i=r==="font"?oP(n):n[r];if(i===Mu[r])continue;const s=n$[r];i==null?t.removeAttribute(s):(Yse(i)&&(i=VLe(i,this._defs.gradient,PBe())),t.setAttribute(s,i+"")),Mu[r]=i}for(const r in r$)OF(t,r$[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=ua(t,jD+1,"defs",sa)),i=rGt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=ua(t,jD+1,"defs",sa)),i=iGt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):Cd(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Lxe(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function rGt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=ua(e,n++,"pattern",sa);q1(o,{id:q5+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=ua(o,0,"rect",sa),q1(o,{width:1,height:1,fill:`url(${PBe()}#${t.id})`}),e=ua(e,n++,"radialGradient",sa),q1(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=ua(e,n++,"linearGradient",sa),q1(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=ua(e,r,"stop",sa),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Cd(e,r),n}function iGt(e,t,n){let r;return e=ua(e,n,"clipPath",sa),e.setAttribute("id",t.id),t.path?(r=ua(e,0,"path",sa),r.setAttribute("d",t.path)):(r=ua(e,0,"rect",sa),q1(r,{x:0,y:0,width:t.width,height:t.height})),Cd(e,1),n+1}function sGt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;vp(n,o=>{i=e.mark(t,o,i,r),++s}),Cd(t,1+s)}function Bxe(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=H1(o,r,sa),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=H1(o,"path",sa);s.appendChild(a),a.__data__=e;const u=H1(o,"g",sa);s.appendChild(u),u.__data__=e;const l=H1(o,"path",sa);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||oGt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function oGt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Cg=null,Mu=null;const aGt={group(e,t,n){const r=Cg=t.childNodes[2];Mu=r.__values__,e.foreground(Pk,n,this),Mu=t.__values__,Cg=t.childNodes[1],e.content(Pk,n,this);const i=Cg=t.childNodes[0];e.background(Pk,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Mu.events&&(xl(r,"pointer-events",s),xl(i,"pointer-events",s),Mu.events=s),n.strokeForeground&&n.stroke){const o=n.fill;xl(r,"display",null),this.style(i,n),xl(i,"stroke",null),o&&(n.fill=null),Mu=r.__values__,this.style(r,n),o&&(n.fill=o),Cg=null}else xl(r,"display","none")},image(e,t,n){n.smooth===!1?(OF(t,"image-rendering","optimizeSpeed"),OF(t,"image-rendering","pixelated")):OF(t,"image-rendering",null)},text(e,t,n){const r=sP(n);let i,s,o,a;at(r)?(s=r.map(u=>Jv(n,u)),i=s.join(`
`),i!==Mu.text&&(Cd(t,0),o=t.ownerDocument,a=Qv(n),s.forEach((u,l)=>{const c=H1(o,"tspan",sa);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Mu.text=i)):(s=Jv(n,r),s!==Mu.text&&(t.textContent=s,Mu.text=s)),xl(t,"font-family",oP(n)),xl(t,"font-size",v0(n)+"px"),xl(t,"font-style",n.fontStyle),xl(t,"font-variant",n.fontVariant),xl(t,"font-weight",n.fontWeight)}};function Pk(e,t,n){t!==Mu[e]&&(n?uGt(Cg,e,t,n):xl(Cg,e,t),Mu[e]=t)}function OF(e,t,n){n!==Mu[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Mu[t]=n)}function q1(e,t){for(const n in t)xl(e,n,t[n])}function xl(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function uGt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function PBe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class OBe extends aP{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=boe();n.open("svg",lr({},v3,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",NBe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Wf[n.marktype],i=r.tag,s=[TBe,r.attr];t.open("g",{class:mBe(n),"clip-path":n.clip?Qse(this,n,n.group):null},ABe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=sP(a);if(at(l)){const c={x:0,dy:Qv(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(Jv(a,l[f])).close()}else t.text(Jv(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),vp(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):vp(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&lGt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:q5+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function lGt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=oP(t),e["font-size"]=v0(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in n$){let a=t[o];const u=n$[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(Yse(a)&&(a=VLe(a,i.gradient,"")),e[u]=a)}for(const o in r$){const a=t[o];a!=null&&(s=s||[],s.push(`${r$[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Nh={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function cGt(e){Nh.svgMarkTypes=e.svgMarkTypes??["text"],Nh.svgOnTop=e.svgOnTop??!0,Nh.debug=e.debug??!1}class vX extends aP{constructor(t){super(t),this._svgRenderer=new xoe(t),this._canvasRenderer=new t$(t)}initialize(t,n,r,i,s){this._root_el=ua(t,0,"div");const o=ua(this._root_el,0,"div"),a=ua(this._root_el,1,"div");return this._root_el.style.position="relative",Nh.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Nh.svgOnTop?a:o,this._canvasEl=Nh.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return Nh.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!Nh.svgMarkTypes.includes(s));this._svgRenderer.render(t,Nh.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Nh.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class FBe extends uP{constructor(t,n){super(t,n)}initialize(t,n,r){const i=ua(ua(t,0,"div"),Nh.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const MBe="canvas",$Be="hybrid",LBe="png",BBe="svg",jBe="none",W1={Canvas:MBe,PNG:LBe,SVG:BBe,Hybrid:$Be,None:jBe},u_={};u_[MBe]=u_[LBe]={renderer:t$,headless:t$,handler:uP};u_[BBe]={renderer:xoe,headless:OBe,handler:_Be};u_[$Be]={renderer:vX,headless:vX,handler:FBe};u_[jBe]={};function K9(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(u_[e]=t,this):u_[e]}function UBe(e,t,n){const r=[],i=new Go().union(t),s=e.marktype;return s?zBe(e,i,n,r):s==="group"?VBe(e,i,n,r):rt("Intersect scene must be mark node or group item.")}function zBe(e,t,n,r){if(fGt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)VBe(i[a],t,n,r);else for(const u=Wf[s].isect;a<o;++a){const l=i[a];HBe(l,t,u)&&r.push(l)}}return r}function fGt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function VBe(e,t,n,r){n&&n(e.mark)&&HBe(e,t,Wf.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)zBe(i[u],t,n,r);t.translate(o,a)}return r}function HBe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const KH=new Go;function qBe(e){const t=e.clip;if(cr(t))t(rP(KH.clear()));else if(t)KH.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(KH)}const dGt=1e-9;function woe(e,t,n){return e===t?!0:n==="path"?WBe(e,t):e instanceof Date&&t instanceof Date?+e==+t:fi(e)&&fi(t)?Math.abs(e-t)<=dGt:!e||!t||!jt(e)&&!jt(t)?e==t:hGt(e,t)}function WBe(e,t){return woe(qC(e),qC(t))}function hGt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!woe(e[i],t[i],i))return!1;return typeof e==typeof t}function pGt(){XLe(),LHt()}const YC="top",zh="left",Kh="right",Zv="bottom",mGt="top-left",gGt="top-right",yGt="bottom-left",vGt="bottom-right",_oe="start",bX="middle",Sl="end",bGt="x",xGt="y",X9="group",Eoe="axis",Soe="title",wGt="frame",_Gt="scope",Coe="legend",GBe="row-header",YBe="row-footer",KBe="row-title",XBe="column-header",QBe="column-footer",JBe="column-title",EGt="padding",SGt="symbol",ZBe="fit",e9e="fit-x",t9e="fit-y",CGt="pad",Toe="none",Y4="all",xX="each",Aoe="flush",G1="column",Y1="row";function n9e(e){Ye.call(this,null,e)}Ot(n9e,Ye,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Wf[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=K4(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===X9||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(K4(l,o))),r.role){case Eoe:case Coe:case Soe:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(K4(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(K4(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return qBe(r),t.modifies("bounds")}});function K4(e,t,n){return t(e.bounds.clear(),e,n)}const jxe=":vega_identifier:";function Doe(e){Ye.call(this,0,e)}Doe.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Ot(Doe,Ye,{transform(e,t){const n=TGt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function TGt(e){return e._signals[jxe]||(e._signals[jxe]=e.add(0))}function r9e(e){Ye.call(this,null,e)}Ot(r9e,Ye,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,AGt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===X9?U9:j9;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function AGt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function i9e(e){Ye.call(this,null,e)}const Uxe={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!s9e(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},s9e=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),zxe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(s9e(i,s=e[n].bounds,t))return!0},DGt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},IGt=(e,t,n)=>{var r=e.range(),i=new Go;return t===YC||t===Zv?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Vxe=e=>(e.forEach(t=>t.opacity=1),e),Hxe=(e,t)=>e.reflow(t.modified()).modifies("opacity");Ot(i9e,Ye,{transform(e,t){const n=Uxe[e.method]||Uxe.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Vxe(i),t=Hxe(t,e)),t;if(i=i.filter(DGt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Vxe(i),t=Hxe(t,e),s.length>=3&&zxe(s,r)){do s=n(s,r);while(s.length>=3&&zxe(s,r));s.length<3&&!Kr(i).opacity&&(s.length>1&&(Kr(s).opacity=0),Kr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=IGt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function o9e(e){Ye.call(this,null,e)}Ot(o9e,Ye,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Ou=new Go;function rS(e,t,n){return e[t]===n?0:(e[t]=n,1)}function kGt(e){var t=e.items[0].orient;return t===zh||t===Kh}function RGt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function NGt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=RGt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&coe(p),v=0,b=0,_,w;switch(Ou.clear().union(g),g.clear(),(_=u[0])>-1&&g.union(i.items[_].bounds),(_=u[1])>-1&&g.union(i.items[_].bounds),a){case YC:v=f||0,b=-c,w=Math.max(d,Math.min(h,-g.y1)),g.add(0,-w).add(l,0),p&&X4(e,p,w,m,y,0,-1,g);break;case zh:v=-c,b=f||0,w=Math.max(d,Math.min(h,-g.x1)),g.add(-w,0).add(0,l),p&&X4(e,p,w,m,y,1,-1,g);break;case Kh:v=n+c,b=f||0,w=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(w,l),p&&X4(e,p,w,m,y,1,1,g);break;case Zv:v=f||0,b=r+c,w=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,w),p&&X4(e,p,w,m,0,0,1,g);break;default:v=i.x,b=i.y}return Py(g.translate(v,b),i),rS(i,"x",v+o)|rS(i,"y",b+o)&&(i.bounds=Ou,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function X4(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const qxe=(e,t)=>Math.floor(Math.min(e,t)),Wxe=(e,t)=>Math.ceil(Math.max(e,t));function PGt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===X9)switch(i.role){case Eoe:case Coe:case Soe:break;case GBe:o.rowheaders.push(...s);break;case YBe:o.rowfooters.push(...s);break;case XBe:o.colheaders.push(...s);break;case QBe:o.colfooters.push(...s);break;case KBe:o.rowtitle=s[0];break;case JBe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function OGt(e){return new Go().set(0,0,e.width||0,e.height||0)}function FGt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Os(e,t,n){const r=jt(e)?e[t]:e;return r??(n!==void 0?n:0)}function Gxe(e){return e<0?Math.ceil(-e):0}function a9e(e,t,n){var r=!n.nodirty,i=n.bounds===Aoe?OGt:FGt,s=Ou.set(0,0,0,0),o=Os(n.align,G1),a=Os(n.align,Y1),u=Os(n.padding,G1),l=Os(n.padding,Y1),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),_=Array(d),w=Array(d),S,T,A,k,I,R,F,O,L,H,U;for(T=0;T<c;++T)p[T]=0;for(T=0;T<f;++T)y[T]=0;for(T=0;T<d;++T)R=t[T],I=w[T]=i(R),R.x=R.x||0,b[T]=0,R.y=R.y||0,_[T]=0,A=T%c,k=~~(T/c),m=Math.max(m,F=Math.ceil(I.x2)),v=Math.max(v,O=Math.ceil(I.y2)),p[A]=Math.max(p[A],F),y[k]=Math.max(y[k],O),h[T]=u+Gxe(I.x1),g[T]=l+Gxe(I.y1),r&&e.dirty(t[T]);for(T=0;T<d;++T)T%c===0&&(h[T]=0),T<c&&(g[T]=0);if(o===xX)for(A=1;A<c;++A){for(U=0,T=A;T<d;T+=c)U<h[T]&&(U=h[T]);for(T=A;T<d;T+=c)h[T]=U+p[A-1]}else if(o===Y4){for(U=0,T=0;T<d;++T)T%c&&U<h[T]&&(U=h[T]);for(T=0;T<d;++T)T%c&&(h[T]=U+m)}else for(o=!1,A=1;A<c;++A)for(T=A;T<d;T+=c)h[T]+=p[A-1];if(a===xX)for(k=1;k<f;++k){for(U=0,T=k*c,S=T+c;T<S;++T)U<g[T]&&(U=g[T]);for(T=k*c;T<S;++T)g[T]=U+y[k-1]}else if(a===Y4){for(U=0,T=c;T<d;++T)U<g[T]&&(U=g[T]);for(T=c;T<d;++T)g[T]=U+v}else for(a=!1,k=1;k<f;++k)for(T=k*c,S=T+c;T<S;++T)g[T]+=y[k-1];for(L=0,T=0;T<d;++T)L=h[T]+(T%c?L:0),b[T]+=L-t[T].x;for(A=0;A<c;++A)for(H=0,T=A;T<d;T+=c)H+=g[T],_[T]+=H-t[T].y;if(o&&Os(n.center,G1)&&f>1)for(T=0;T<d;++T)I=o===Y4?m:p[T%c],L=I-w[T].x2-t[T].x-b[T],L>0&&(b[T]+=L/2);if(a&&Os(n.center,Y1)&&c!==1)for(T=0;T<d;++T)I=a===Y4?v:y[~~(T/c)],H=I-w[T].y2-t[T].y-_[T],H>0&&(_[T]+=H/2);for(T=0;T<d;++T)s.union(w[T].translate(b[T],_[T]));switch(L=Os(n.anchor,bGt),H=Os(n.anchor,xGt),Os(n.anchor,G1)){case Sl:L-=s.width();break;case bX:L-=s.width()/2}switch(Os(n.anchor,Y1)){case Sl:H-=s.height();break;case bX:H-=s.height()/2}for(L=Math.round(L),H=Math.round(H),s.clear(),T=0;T<d;++T)t[T].mark.bounds.clear();for(T=0;T<d;++T)R=t[T],R.x+=b[T]+=L,R.y+=_[T]+=H,s.union(R.mark.bounds.union(R.bounds.translate(b[T],_[T]))),r&&e.dirty(R);return s}function MGt(e,t,n){var r=PGt(t),i=r.marks,s=n.bounds===Aoe?$Gt:LGt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=a9e(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=Os(n.headerBand,Y1,null),c=Q4(e,r.rowheaders,i,a,u,-Os(o,"rowHeader"),qxe,0,s,"x1",0,a,1,m)),r.colheaders&&(m=Os(n.headerBand,G1,null),f=Q4(e,r.colheaders,i,a,a,-Os(o,"columnHeader"),qxe,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=Os(n.footerBand,Y1,null),d=Q4(e,r.rowfooters,i,a,u,Os(o,"rowFooter"),Wxe,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=Os(n.footerBand,G1,null),h=Q4(e,r.colfooters,i,a,a,Os(o,"columnFooter"),Wxe,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=Os(n.titleAnchor,Y1),g=Os(o,"rowTitle"),g=p===Sl?d+g:c-g,m=Os(n.titleBand,Y1,.5),Yxe(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=Os(n.titleAnchor,G1),g=Os(o,"columnTitle"),g=p===Sl?h+g:f-g,m=Os(n.titleBand,G1,.5),Yxe(e,r.coltitle,g,1,y,m))}function $Gt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function LGt(e,t){return e.bounds[t]}function Q4(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,_,w,S,T,A,k;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,_=t.length;v<_;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,_=t.length;v<_;++v,y+=f){for(S=t[v],w=S.mark.bounds,b=y;b>=0&&(T=n[b])==null;b-=d);a?(A=h==null?T.x:Math.round(T.bounds.x1+h*T.bounds.width()),k=m):(A=m,k=h==null?T.y:Math.round(T.bounds.y1+h*T.bounds.height())),w.union(S.bounds.translate(A-(S.x||0),k-(S.y||0))),S.x=A,S.y=k,e.dirty(S),g=o(g,w[l])}return g}function Yxe(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function BGt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function jGt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function UGt(e,t,n,r,i,s,o){const a=BGt(n,t),u=jGt(e,a("offset",0)),l=a("anchor",_oe),c=l===Sl?1:l===bX?.5:0,f={align:xX,bounds:a("bounds",Aoe),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case zh:f.anchor={x:Math.floor(r.x1)-u,column:Sl,y:c*(o||r.height()+2*r.y1),row:l};break;case Kh:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case YC:f.anchor={y:Math.floor(i.y1)-u,row:Sl,x:c*(s||i.width()+2*i.x1),column:l};break;case Zv:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case mGt:f.anchor={x:u,y:u};break;case gGt:f.anchor={x:s-u,y:u,column:Sl};break;case yGt:f.anchor={x:u,y:o-u,row:Sl};break;case vGt:f.anchor={x:s-u,y:o-u,column:Sl,row:Sl};break}return f}function zGt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),HGt(e,n,n.items[0].items[0]),s=VGt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===SGt&&qGt(n.items[0].items[0].items[0].items),i!==Toe&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,Py(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function VGt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function HGt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&UD(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case zh:i+=Math.ceil(o.bounds.width())+u;break;case Kh:case Zv:break;default:s+=o.bounds.height()+u}switch((i||s)&&UD(e,n,i,s),o.orient){case zh:c+=o2(t,n,o,a,1,1);break;case Kh:l+=o2(t,n,o,Sl,0,0)+u,c+=o2(t,n,o,a,1,1);break;case Zv:l+=o2(t,n,o,a,0,0),c+=o2(t,n,o,Sl,-1,0,1)+u;break;default:l+=o2(t,n,o,a,0,0)}(l||c)&&UD(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(UD(e,n,-l,0),UD(e,o,-l,0))}}function o2(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:coe(n);return Math.round(r===_oe?f:r===Sl?d-h:.5*(c-h))}function UD(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function qGt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function WGt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===zh||a===Kh?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==X9?a===zh?(p=i.y2,h=i.y1):a===Kh?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===zh&&(p=r,h=0),b=u===_oe?p:u===Sl?h:(p+h)/2,d&&d.text){switch(a){case YC:case Zv:v=f.bounds.height()+c;break;case zh:y=f.bounds.width()+c;break;case Kh:y=-f.bounds.width()-c;break}Ou.clear().union(d.bounds),Ou.translate(y-(d.x||0),v-(d.y||0)),rS(d,"x",y)|rS(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(Ou),d.mark.bounds.clear().union(Ou),e.dirty(d)),Ou.clear().union(d.bounds)}else Ou.clear();switch(Ou.union(f.bounds),a){case YC:m=b,g=i.y1-Ou.height()-l;break;case zh:m=i.x1-Ou.width()-l,g=b;break;case Kh:m=i.x2+Ou.width()+l,g=b;break;case Zv:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return rS(s,"x",m)|rS(s,"y",g)&&(Ou.translate(m,g),e.dirty(s),s.bounds.clear().union(Ou),t.bounds.clear().union(Ou),e.dirty(s)),s.bounds}function u9e(e){Ye.call(this,null,e)}Ot(u9e,Ye,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&MGt(n,r,e.layout),YGt(n,r,e)}),GGt(e.mark.group)?t.reflow():t}});function GGt(e){return e&&e.mark.role!=="legend-entry"}function YGt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Go().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case Eoe:h=kGt(f)?a:u,h.union(NGt(e,f,i,s));break;case Soe:c=f;break;case Coe:l.push(zGt(e,f));break;case wGt:case _Gt:case GBe:case YBe:case KBe:case XBe:case QBe:case JBe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Kh,d!==Toe&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];a9e(e,v,UGt(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===ZBe||n.autosize.type===e9e||n.autosize.type===t9e))switch(y.orient){case zh:case Kh:o.add(v.x1,0).add(v.x2,0);break;case YC:case Zv:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(WGt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),KGt(e,t,o,n)}function KGt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===EGt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===Toe?(l=0,f=0,u=o,c=a):s===ZBe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===e9e?(u=Math.max(0,o-l-d),a=c+f+h):s===t9e?(o=u+l+d,c=Math.max(0,a-f-h)):s===CGt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const XGt=Object.freeze(Object.defineProperty({__proto__:null,bound:n9e,identifier:Doe,mark:r9e,overlap:i9e,render:o9e,viewlayout:u9e},Symbol.toStringTag,{value:"Module"}));function l9e(e){Ye.call(this,null,e)}Ot(l9e,Ye,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=Wse(s,o,e.minstep),u=e.format||MLe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?FLe(s,e.values,a):Gse(s,a);return i&&(r.rem=i),i=l.map((c,f)=>Ii({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Ii({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function c9e(e){Ye.call(this,null,e)}function QGt(){return Ii({})}function JGt(e){const t=gA().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Ot(c9e,Ye,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||QGt,s=e.key||mn,o=this.value;return at(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&rt("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=JGt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function f9e(e){Ye.call(this,null,e)}Ot(f9e,Ye,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(at(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||f1,u=i.enter||f1,l=i.exit||f1,c=(s&&!o?i[s]:a)||f1;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==f1&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==f1&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==f1){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function d9e(e){Ye.call(this,[],e)}Ot(d9e,Ye,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||TF,o=e.scale,a=+e.limit,u=Wse(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===TF,c=e.format||jLe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||BLe(o,u),d,h,p,m,g;return i&&(r.rem=i),s===TF?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,cr(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=il(m=p||8),i=i.map((y,v)=>Ii({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(Ii({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===CHt?(d=o.domain(),h=NLe(o,d[0],Kr(d)),f.length<3&&!e.values&&d[0]!==Kr(d)&&(f=[d[0],Kr(d)]),i=f.map((y,v)=>Ii({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=MHt(o),i=f.map((y,v)=>Ii({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const ZGt=e=>e.source.x,eYt=e=>e.source.y,tYt=e=>e.target.x,nYt=e=>e.target.y;function Ioe(e){Ye.call(this,{},e)}Ioe.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Ot(Ioe,Ye,{transform(e,t){var n=e.sourceX||ZGt,r=e.sourceY||eYt,i=e.targetX||tYt,s=e.targetY||nYt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=Kxe.get(u+"-"+a)||Kxe.get(u);return l||rt("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const h9e=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,rYt=(e,t,n,r)=>h9e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),p9e=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},iYt=(e,t,n,r)=>p9e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),m9e=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},sYt=(e,t,n,r)=>m9e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),oYt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,aYt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,uYt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},lYt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},cYt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},fYt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},Kxe=gA({line:h9e,"line-radial":rYt,arc:p9e,"arc-radial":iYt,curve:m9e,"curve-radial":sYt,"orthogonal-horizontal":oYt,"orthogonal-vertical":aYt,"orthogonal-radial":uYt,"diagonal-horizontal":lYt,"diagonal-vertical":cYt,"diagonal-radial":fYt});function koe(e){Ye.call(this,null,e)}koe.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Ot(koe,Ye,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||hA,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/W3e(l),h=Cc(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const dYt=5;function hYt(e){const t=e.type;return!e.bins&&(t===zC||t===XN||t===QN)}function g9e(e){return Vse(e)&&e!==Om}const pYt=gp(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function y9e(e){Ye.call(this,null,e),this.modified(!0)}Ot(y9e,Ye,{transform(e,t){var n=t.dataflow,r=this.value,i=mYt(e);(!r||i!==r.type)&&(this.value=r=xi(i)());for(i in e)if(!pYt[i]){if(i==="padding"&&g9e(r.type))continue;cr(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return wYt(r,e,xYt(r,e,yYt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function mYt(e){var t=e.type,n="",r;return t===Om?Om+"-"+zC:(gYt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Om+"-":r===3?xA+"-":""),(n+t||zC).toLowerCase())}function gYt(e){const t=e.type;return Vse(t)&&t!==o_&&t!==a_&&(e.scheme||e.range&&e.range.length&&e.range.every(Bt))}function yYt(e,t,n){const r=vYt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&hYt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return g9e(s)&&t.padding&&i[0]!==Kr(i)&&(i=bYt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(v9e(s,i,n)),s===Bse&&e.unknown(t.domainImplicit?FY:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Wse(e,t.nice)||null),i.length}function vYt(e,t,n){return t?(e.domain(v9e(e.type,t,n)),t.length):-1}function bYt(e,t,n,r,i,s){var o=Math.abs(Kr(n)-n[0]),a=o/(o-2*r),u=e===fy?Nie(t,null,a):e===QN?U5(t,null,a,.5):e===XN?U5(t,null,a,i||1):e===F9?Pie(t,null,a,s||1):Rie(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function v9e(e,t,n){if(ALe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Nt(t))}return t}function xYt(e,t,n){let r=t.bins;if(r&&!at(r)){const i=e.domain(),s=i[0],o=Kr(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||rt("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Cc(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===jse&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function wYt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=_Yt(r,t,n);else if(t.scheme&&(s=EYt(r,t,n),cr(s))){if(e.interpolator)return e.interpolator(s);rt(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&DLe(r))return e.interpolator(L9(wX(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(Hse(t.interpolate,t.interpolateGamma)):cr(e.round)?e.round(i):cr(e.rangeRound)&&e.interpolate(i?EN:Ty),s&&e.range(wX(s,t.reverse))}function _Yt(e,t,n){e!==wLe&&e!==oX&&rt("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===oX?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Lse(n,i,r)]}function EYt(e,t,n){var r=t.schemeExtent,i,s;return at(t.scheme)?s=L9(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=qse(i),s||rt(`Unrecognized scheme name: ${t.scheme}`)),n=e===$9?n+1:e===jse?n-1:e===VC||e===M9?+t.schemeCount||dYt:n,DLe(e)?Xxe(s,r,t.reverse):cr(s)?RLe(Xxe(s,r),n):e===Bse?s:s.slice(0,n)}function Xxe(e,t,n){return cr(e)&&(t||n)?kLe(e,wX(t||[0,1],n)):e}function wX(e,t){return t?e.slice().reverse():e}function b9e(e){Ye.call(this,null,e)}Ot(b9e,Ye,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(eE(e.sort)),this.modified(n),t}});const Qxe="zero",x9e="center",w9e="normalize",_9e=["y0","y1"];function Roe(e){Ye.call(this,null,e)}Roe.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Qxe,values:[Qxe,x9e,w9e]},{name:"as",type:"string",array:!0,length:2,default:_9e}]};Ot(Roe,Ye,{transform(e,t){var n=e.as||_9e,r=n[0],i=n[1],s=eE(e.sort),o=e.field||hA,a=e.offset===x9e?SYt:e.offset===w9e?CYt:TYt,u,l,c,f;for(u=AYt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function SYt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function CYt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function TYt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function AYt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const DYt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:l9e,datajoin:c9e,encode:f9e,legendentries:d9e,linkpath:Ioe,pie:koe,scale:y9e,sortitems:b9e,stack:Roe},Symbol.toStringTag,{value:"Module"}));var IYt=Math.abs,_X=Math.cos,i$=Math.sin,kYt=1e-6,E9e=Math.PI,EX=E9e/2,Jxe=RYt(2);function Zxe(e){return e>1?EX:e<-1?-EX:Math.asin(e)}function RYt(e){return e>0?Math.sqrt(e):0}function NYt(e,t){var n=e*i$(t),r=30,i;do t-=i=(t+i$(t)-n)/(1+_X(t));while(IYt(i)>kYt&&--r>0);return t/2}function PYt(e,t,n){function r(i,s){return[e*i*_X(s=NYt(n,s)),t*i$(s)]}return r.invert=function(i,s){return s=Zxe(s/t),[i/(e*_X(s)),Zxe((2*s+i$(2*s))/n)]},r}var OYt=PYt(Jxe/EX,Jxe,E9e);function FYt(){return p0(OYt).scale(169.529)}const MYt=APe(),SX=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function $Yt(e,t){return function n(){const r=t();return r.type=e,r.path=APe().projection(r),r.copy=r.copy||function(){const i=n();return SX.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},CLe(r)}}function Noe(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(s$[e]=$Yt(e,t),this):s$[e]||null}function S9e(e){return e&&e.path||MYt}const s$={albers:IPe,albersusa:EDt,azimuthalequalarea:SDt,azimuthalequidistant:CDt,conicconformal:DDt,conicequalarea:N8,conicequidistant:RDt,equalEarth:PDt,equirectangular:IDt,gnomonic:ODt,identity:FDt,mercator:TDt,mollweide:FYt,naturalEarth1:MDt,orthographic:$Dt,stereographic:LDt,transversemercator:BDt};for(const e in s$)Noe(e,s$[e]);function LYt(){}const G0=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function C9e(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),BYt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(jYt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,G0[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,G0[m|g<<1].forEach(b);for(G0[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,G0[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,G0[m|g<<1|y<<2|v<<3].forEach(b);G0[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,G0[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,G0[y<<2|v<<3].forEach(b);G0[y<<3].forEach(b);function b(_){var w=[_[0][0]+h,_[0][1]+p],S=[_[1][0]+h,_[1][1]+p],T=o(w),A=o(S),k,I;(k=d[T])?(I=f[A])?(delete d[k.end],delete f[I.start],k===I?(k.ring.push(S),c(k.ring)):f[k.start]=d[I.end]={start:k.start,end:I.end,ring:k.ring.concat(I.ring)}):(delete d[k.end],k.ring.push(S),d[k.end=A]=k):(k=f[A])?(I=d[T])?(delete f[k.start],delete d[I.end],k===I?(k.ring.push(S),c(k.ring)):f[I.start]=d[k.end]={start:I.start,end:k.end,ring:I.ring.concat(k.ring)}):(delete f[k.start],k.ring.unshift(w),f[k.start=T]=k):f[T]=d[A]={start:T,end:A,ring:[w,S]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||rt("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:LYt,r):n===a},r}function BYt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function jYt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=UYt(e,t[n]))return i;return 0}function UYt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(zYt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function zYt(e,t,n){var r;return VYt(e,t,n)&&HYt(e[r=+(e[0]===t[0])],n[r],t[r])}function VYt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function HYt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function T9e(e,t,n){return function(r){var i=Zm(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?Nv(s,o,e):a/(e+1);return Cc(s+u,o,u)}}function Poe(e){Ye.call(this,null,e)}Poe.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Ot(Poe,Ye,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||rl,s=C9e().smooth(e.smooth!==!1),o=e.thresholds||qYt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,at(o)?o:o(c.values));WYt(f,c,l,e),f.forEach(d=>{u.push(T9(l,Ii(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function qYt(e,t,n){const r=T9e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>tp(t(i).values)))}function WYt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(cr(i)&&(i=i(n,r)),cr(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(fi(i)?i:i[0])||1,a=(fi(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(A9e(t,o,a,u,l))}function A9e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function ewe(e,t,n){const r=e>=0?e:Jie(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function XH(e){return cr(e)?e:il(+e)}function D9e(){var e=u=>u[0],t=u=>u[1],n=hA,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=ewe(r[0],u,e)>>o,f=ewe(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(_=>{const w=d+(+e(_)>>o),S=h+(+t(_)>>o);w>=0&&w<p&&S>=0&&S<m&&(g[w+S*p]+=+n(_))}),c>0&&f>0?(a2(p,m,g,y,c),u2(p,m,y,g,f),a2(p,m,g,y,c),u2(p,m,y,g,f),a2(p,m,g,y,c),u2(p,m,y,g,f)):c>0?(a2(p,m,g,y,c),a2(p,m,y,g,c),a2(p,m,g,y,c),v=y):f>0&&(u2(p,m,g,y,f),u2(p,m,y,g,f),u2(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/W3e(v);for(let _=0,w=p*m;_<w;++_)v[_]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=XH(u),a):e},a.y=function(u){return arguments.length?(t=XH(u),a):t},a.weight=function(u){return arguments.length?(n=XH(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||rt("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||rt("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=Lt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&rt("invalid bandwidth"),r=u,a):r},a}function a2(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function u2(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function Ooe(e){Ye.call(this,null,e)}Ooe.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const GYt=["x","y","weight","size","cellSize","bandwidth"];function I9e(e,t){return GYt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Ot(Ooe,Ye,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=YYt(r,e.groupby),s=(e.groupby||[]).map(po),o=I9e(D9e(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>Ii(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function YYt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Foe(e){Ye.call(this,null,e)}Foe.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Ot(Foe,Ye,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=C9e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||T9e(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=I9e(D9e(),e)(i,!0),u=A9e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=at(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Ii),n}});const CX="Feature",Moe="FeatureCollection",KYt="MultiPoint";function $oe(e){Ye.call(this,null,e)}$oe.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Ot($oe,Ye,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&rl,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(Yu(a))||s&&t.modified(Yu(s))||o&&t.modified(Yu(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:CX,geometry:{type:KYt,coordinates:r}})),this.value={type:Moe,features:n}}});function Loe(e){Ye.call(this,null,e)}Loe.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Ot(Loe,Ye,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||rl,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=S9e(e.projection),n.materialize().reflow()):o=i===rl||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=XYt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function XYt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Boe(e){Ye.call(this,null,e)}Boe.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Ot(Boe,Ye,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function joe(e){Ye.call(this,null,e)}joe.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Ot(joe,Ye,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=QYt(S9e(e.projection),e.field||zd("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function QYt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function Uoe(e){Ye.call(this,[],e),this.generator=nDt()}Uoe.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Ot(Uoe,Ye,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)cr(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(I$e(n[0],i)):t.add.push(Ii(i)),n[0]=i,t}});function zoe(e){Ye.call(this,null,e)}zoe.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Ot(zoe,Ye,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||rl,s=ZYt(e.opacity,e),o=JYt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?tp(n.map(l=>tp(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=lr({},l,u);r||(f.$max=tp(c.values||[])),l[a]=eKt(c,f,o.dep?o:il(o(f)),s.dep?s:il(s(f)))}),t.reflow(!0).modifies(a)}});function JYt(e,t){let n;return cr(e)?(n=r=>Pv(e(r,t)),n.dep=k9e(e)):n=il(Pv(e||"#888")),n}function ZYt(e,t){let n;return cr(e)?(n=r=>e(r,t),n.dep=k9e(e)):e?n=il(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function k9e(e){if(!cr(e))return!1;const t=gp(Yu(e));return t.$x||t.$y||t.$value||t.$max}function eKt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:R1,d=gv(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const _=n(t);m[y+0]=_.r,m[y+1]=_.g,m[y+2]=_.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function R9e(e){Ye.call(this,null,e),this.modified(!0)}Ot(R9e,Ye,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=nKt(e.type),SX.forEach(r=>{e[r]!=null&&twe(n,r,e[r])})):SX.forEach(r=>{e.modified(r)&&twe(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&tKt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function tKt(e,t){const n=rKt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function nKt(e){const t=Noe((e||"mercator").toLowerCase());return t||rt("Unrecognized projection type: "+e),t()}function twe(e,t,n){cr(e[t])&&e[t](n)}function rKt(e){return e=Lt(e),e.length===1?e[0]:{type:Moe,features:e.reduce((t,n)=>t.concat(iKt(n)),[])}}function iKt(e){return e.type===Moe?e.features:Lt(e).filter(t=>t!=null).map(t=>t.type===CX?t:{type:CX,geometry:t})}const sKt=Object.freeze(Object.defineProperty({__proto__:null,contour:Foe,geojson:$oe,geopath:Loe,geopoint:Boe,geoshape:joe,graticule:Uoe,heatmap:zoe,isocontour:Poe,kde2d:Ooe,projection:R9e},Symbol.toStringTag,{value:"Module"})),nwe={center:WTt,collide:fAt,nbody:_At,link:hAt,x:EAt,y:SAt},zI="forces",TX=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],oKt=["static","iterations"],N9e=["x","y","vx","vy"];function Voe(e){Ye.call(this,null,e)}Voe.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:N9e}]};Ot(Voe,Ye,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(TX),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&P9e(n,e,0,t)):(this.value=n=uKt(t.source,e),n.on("tick",aKt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(oKt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==zI||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(N9e)}});function aKt(e,t){return()=>e.touch(t).run()}function uKt(e,t){const n=wAt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),P9e(n,t,!0).on("end",()=>s=!0)}function P9e(e,t,n,r){var i=Lt(t.forces),s,o,a,u;for(s=0,o=TX.length;s<o;++s)a=TX[s],a!==zI&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=zI+s,a=n||t.modified(zI,s)?cKt(i[s]):r&&lKt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(zI+s,null);return e.numForces=i.length,e}function lKt(e,t){var n,r;for(n in e)if(cr(r=e[n])&&t.modified(Yu(r)))return 1;return 0}function cKt(e){var t,n;vn(nwe,e.force)||rt("Unrecognized force: "+e.force),t=nwe[e.force]();for(n in e)cr(t[n])&&fKt(t[n],e[n],e);return t}function fKt(e,t,n){e(cr(t)?r=>t(r,n):t)}const dKt=Object.freeze(Object.defineProperty({__proto__:null,force:Voe},Symbol.toStringTag,{value:"Module"}));function AX(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function Hoe(e){Ye.call(this,null,e)}Hoe.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const hKt=e=>e.values;Ot(Hoe,Ye,{transform(e,t){t.source||rt("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&C9(o.data)&&i.rem.push(o.data)}),this.value=s=CB({values:Lt(e.keys).reduce((o,a)=>(o.key(a),o),pKt()).entries(i.source)},hKt),n&&s.each(o=>{o.children&&(o=Ii(o.data),i.add.push(o),i.source.push(o))}),AX(s,mn,mn)),i.source.root=s,i}});function pKt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function Oy(e){Ye.call(this,null,e)}const mKt=(e,t)=>e.parent===t.parent?1:2;Ot(Oy,Ye,{transform(e,t){(!t.source||!t.source.root)&&rt(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(eE(e.sort,o=>o.data)),gKt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?mKt:hA);try{this.value=n(i)}catch(o){rt(o)}return i.each(o=>yKt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function gKt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function yKt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const DX=["x","y","r","depth","children"];function qoe(e){Oy.call(this,e)}qoe.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:DX.length,default:DX}]};Ot(qoe,Oy,{layout:HPe,params:["radius","size","padding"],fields:DX});const IX=["x0","y0","x1","y1","depth","children"];function Woe(e){Oy.call(this,e)}Woe.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:IX.length,default:IX}]};Ot(Woe,Oy,{layout:SIt,params:["size","round","padding"],fields:IX});function Goe(e){Ye.call(this,null,e)}Goe.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Ot(Goe,Ye,{transform(e,t){t.source||rt("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?AX(r1e().id(e.key).parentId(e.parentKey)(i.source),e.key,Vd):AX(r1e()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const rwe={tidy:OIt,cluster:GDt},kX=["x","y","depth","children"];function Yoe(e){Oy.call(this,e)}Yoe.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:kX.length,default:kX}]};Ot(Yoe,Oy,{layout(e){const t=e||"tidy";if(vn(rwe,t))return rwe[t]();rt("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:kX});function Koe(e){Ye.call(this,[],e)}Koe.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Ot(Koe,Ye,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||rt("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[mn(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[mn(a)]&&s[mn(u)]&&i.add.push(Ii({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[mn(o)]=1),n.forEach(o=>{(s[mn(o.source)]||s[mn(o.target)])&&i.mod.push(o)})),i}});const iwe={binary:MIt,dice:AN,slice:TB,slicedice:$It,squarify:YPe,resquarify:LIt},RX=["x0","y0","x1","y1","depth","children"];function Xoe(e){Oy.call(this,e)}Xoe.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:RX.length,default:RX}]};Ot(Xoe,Oy,{layout(){const e=FIt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{vn(iwe,t)?e.tile(iwe[t]):rt("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:RX});const vKt=Object.freeze(Object.defineProperty({__proto__:null,nest:Hoe,pack:qoe,partition:Woe,stratify:Goe,tree:Yoe,treelinks:Koe,treemap:Xoe},Symbol.toStringTag,{value:"Module"})),QH=4278190080;function bKt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function xKt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=gv(s,o).getContext("2d"),l=gv(s,o).getContext("2d"),c=a&&gv(s,o).getContext("2d");n.forEach(A=>FF(u,A,!1)),FF(l,t,!1),a&&FF(c,t,!0);const f=JH(u,s,o),d=JH(l,s,o),h=a&&JH(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,_,w,S,T;for(y=0;y<o;++y)for(g=0;g<s;++g)_=y*s+g,w=f[_]&QH,T=d[_]&QH,S=a&&h[_]&QH,(w||S||T)&&(v=e(g),b=e(y),!i&&(w||T)&&p.set(v,b),a&&(w||S)&&m.set(v,b));return[p,m]}function JH(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function FF(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>FF(e,s.items,n))}):Wf[r].draw(e,{items:n?t.map(wKt):t})}function wKt(e){const t=T9(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Y0=5,vl=31,b3=32,E1=new Uint32Array(b3+1),Mh=new Uint32Array(b3+1);Mh[0]=0;E1[0]=~Mh[0];for(let e=1;e<=b3;++e)Mh[e]=Mh[e-1]<<1|1,E1[e]=~Mh[e];function _Kt(e,t){const n=new Uint32Array(~~((e*t+b3)/b3));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Y0]&1<<(a&vl)},set:(s,o)=>{const a=o*e+s;r(a>>>Y0,1<<(a&vl))},clear:(s,o)=>{const a=o*e+s;i(a>>>Y0,~(1<<(a&vl)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>Y0,h=f>>>Y0,d===h){if(n[d]&E1[c&vl]&Mh[(f&vl)+1])return!0}else{if(n[d]&E1[c&vl]||n[h]&Mh[(f&vl)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Y0,d=c>>>Y0,f===d)r(f,E1[l&vl]&Mh[(c&vl)+1]);else for(r(f,E1[l&vl]),r(d,Mh[(c&vl)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Y0,d=c>>>Y0,f===d)i(f,Mh[l&vl]|E1[(c&vl)+1]);else for(i(f,Mh[l&vl]),i(d,E1[(c&vl)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function EKt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>_Kt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function SKt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=kf.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function o$(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function K1(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function CKt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!o$(p,m,d,h,i,s)&&!K1(e,p,m,h,d,g,o,a)&&!K1(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,K1(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=kf.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,_,w,S,T,A,k,I,R,F,O,L,H,U,G,Y;for(let J=0;J<f;++J){for(v=c[J].x,_=c[J].y,b=c[J].x2===void 0?v:c[J].x2,w=c[J].y2===void 0?_:c[J].y2,v>b&&(Y=v,v=b,b=Y),_>w&&(Y=_,_=w,w=Y),I=e(v),F=e(b),R=~~((I+F)/2),O=e(_),H=e(w),L=~~((O+H)/2),A=R;A>=I;--A)for(k=L;k>=O;--k)G=u(A,k,p,h,d),G&&([l.x,l.y,p,m]=G);for(A=R;A<=F;++A)for(k=L;k<=H;++k)G=u(A,k,p,h,d),G&&([l.x,l.y,p,m]=G);!m&&!n&&(U=Math.abs(b-v+w-_),S=(v+b)/2,T=(_+w)/2,U>=y&&!o$(S,T,h,d,i,s)&&!K1(e,S,T,d,h,d,o,null)&&(y=U,l.x=S,l.y=T,g=!0))}return m||g?(S=h/2,T=d/2,o.setRange(e(l.x-S),e(l.y-T),e(l.x+S),e(l.y+T)),l.align="center",l.baseline="middle",!0):!1}}const TKt=[-1,-1,1,1],AKt=[-1,1,-1,1];function DKt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=kf.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,_,w,S,T,A,k,I,R,F,O,L;for(let H=0;H<f;++H){for(b=c[H].x,w=c[H].y,_=c[H].x2===void 0?b:c[H].x2,S=c[H].y2===void 0?w:c[H].y2,p.push([e((b+_)/2),e((w+S)/2)]);p.length;)if([k,I]=p.pop(),!(o.get(k,I)||a.get(k,I)||u.get(k,I))){u.set(k,I);for(let U=0;U<4;++U)T=k+TKt[U],A=I+AKt[U],u.outOfBounds(T,A,T,A)||p.push([T,A]);if(T=e.invert(k),A=e.invert(I),R=m,F=s,!o$(T,A,h,d,i,s)&&!K1(e,T,A,d,h,R,o,a)&&!K1(e,T,A,d,h,d,o,null)){for(;F-R>=1;)O=(R+F)/2,K1(e,T,A,d,h,O,o,a)?F=O:R=O;R>m&&(l.x=T,l.y=A,m=R,g=!0)}}!g&&!n&&(L=Math.abs(_-b+S-w),T=(b+_)/2,A=(w+S)/2,L>=v&&!o$(T,A,h,d,i,s)&&!K1(e,T,A,d,h,d,o,null)&&(v=L,l.x=T,l.y=A,y=!0))}return g||y?(T=h/2,A=d/2,o.setRange(e(l.x-T),e(l.y-A),e(l.x+T),e(l.y+A)),l.align="center",l.baseline="middle",!0):!1}}const IKt=["right","center","left"],kKt=["bottom","middle","top"];function RKt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,_,w,S,T,A,k,I,R;for(let F=0;F<u;++F){if(h=(n[F]&3)-1,p=(n[F]>>>2&3)-1,m=h===0&&p===0||r[F]<0,g=h&&p?Math.SQRT1_2:1,y=r[F]<0?-1:1,v=c[1+h]+r[F]*h*g,T=c[4+p]+y*f*p/2+r[F]*p*g,_=T-f/2,w=T+f/2,A=e(v),I=e(_),R=e(w),!d)if(swe(A,A,I,R,o,a,v,v,_,w,c,m))d=kf.width(l.datum,l.datum.text);else continue;if(S=v+y*d*h/2,v=S-d/2,b=S+d/2,A=e(v),k=e(b),swe(A,k,I,R,o,a,v,b,_,w,c,m))return l.x=h?h*y<0?b:v:S,l.y=p?p*y<0?w:_:T,l.align=IKt[h*y+1],l.baseline=kKt[p*y+1],o.setRange(A,I,k,R),!0}return!1}}function swe(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const ZH=0,eq=4,tq=8,nq=0,rq=1,iq=2,NKt={"top-left":ZH+nq,top:ZH+rq,"top-right":ZH+iq,left:eq+nq,middle:eq+rq,right:eq+iq,"bottom-left":tq+nq,bottom:tq+rq,"bottom-right":tq+iq},PKt={naive:SKt,"reduced-search":CKt,floodfill:DKt};function OKt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=FKt(r,f),h=MKt(i,f),p=$Kt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=LKt(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let _=-1,w=-1;const S=e.map(I=>{const R=v?kf.width(I,I.text):void 0;return _=Math.max(_,R),w=Math.max(w,I.fontSize),{datum:I,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(I),textWidth:R}});l=l===null||l===1/0?Math.max(_,w)+Math.max(...r):l;const T=EKt(t[0],t[1],l);let A;if(!b){n&&S.sort((F,O)=>n(F.datum,O.datum));let I=!1;for(let F=0;F<h.length&&!I;++F)I=h[F]===5||d[F]<0;const R=(p&&o||g)&&e.map(F=>F.datum);A=s.length||R?xKt(T,R||[],s,I,g):bKt(T,o&&S)}const k=g?PKt[c](T,A,o,u):RKt(T,A,h,d);return S.forEach(I=>I.opacity=+k(I)),S}function FKt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function MKt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=NKt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function $Kt(e){return e&&e.mark&&e.mark.marktype}function LKt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const NX=["x","y","opacity","align","baseline"],O9e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Qoe(e){Ye.call(this,null,e)}Qoe.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:O9e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:NX.length,default:NX}]};Ot(Qoe,Ye,{transform(e,t){function n(s){const o=e[s];return cr(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&rt("Size parameter should be specified as a [width, height] array.");const i=e.as||NX;return OKt(t.materialize(t.SOURCE).source||[],e.size,e.sort,Lt(e.offset==null?1:e.offset),Lt(e.anchor||O9e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const BKt=Object.freeze(Object.defineProperty({__proto__:null,label:Qoe},Symbol.toStringTag,{value:"Module"}));function F9e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Joe(e){Ye.call(this,null,e)}Joe.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Ot(Joe,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=F9e(r,e.groupby),s=(e.groupby||[]).map(po),o=s.length,a=e.as||[po(e.x),po(e.y)],u=[];i.forEach(l=>{G$e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Ii(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const PX={constant:cse,linear:fse,log:V$e,exp:H$e,pow:q$e,quad:dse,poly:W$e},jKt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Zoe(e){Ye.call(this,null,e)}Zoe.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(PX)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Ot(Zoe,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=F9e(r,e.groupby),s=(e.groupby||[]).map(po),o=e.method||"linear",a=e.order==null?3:e.order,u=jKt(o,a),l=e.as||[po(e.x),po(e.y)],c=PX[o],f=[];let d=e.extent;vn(PX,o)||rt("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(Ii({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||Zm(h,e.x),y=v=>{const b={};for(let _=0;_<s.length;++_)b[s[_]]=h.dims[_];b[l[0]]=v[0],b[l[1]]=v[1],f.push(Ii(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):P9(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const UKt=Object.freeze(Object.defineProperty({__proto__:null,loess:Joe,regression:Zoe},Symbol.toStringTag,{value:"Module"}));function eae(e){Ye.call(this,null,e)}eae.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const zKt=[-1e5,-1e5,1e5,1e5];Ot(eae,Ye,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:zKt;const s=this.value=Wte.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!HKt(u)?VKt(u):null}return t.reflow(e.modified()).modifies(n)}});function VKt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function HKt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const qKt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:eae},Symbol.toStringTag,{value:"Module"}));var sq=Math.PI/180,VI=64,MF=2048;function WKt(){var e=[256,256],t,n,r,i,s,o,a,u=M9e,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(gv()),m=JKt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],_=l.map(S=>({text:t(S),font:n(S),style:i(S),weight:s(S),rotate:o(S),size:~~(r(S)+1e-14),padding:a(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,T)=>T.size-S.size);++v<y;){var w=_[v];w.x=e[0]*(c()+.5)>>1,w.y=e[1]*(c()+.5)>>1,GKt(p,w,_,v),w.hasText&&h(m,w,g)&&(b.push(w),g?KKt(g,w):g=[{x:w.x+w.x0,y:w.y+w.y0},{x:w.x+w.x1,y:w.y+w.y1}],w.x-=e[0]>>1,w.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(VI<<5)/m,p.height=MF/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),_=u(e),w=c()<.5?1:-1,S=-w,T,A,k;(T=_(S+=w))&&(A=~~T[0],k=~~T[1],!(Math.min(Math.abs(A),Math.abs(k))>=b));)if(m.x=y+A,m.y=v+k,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!YKt(m,p,e[0]))&&(!g||XKt(m,g))){for(var I=m.sprite,R=m.width>>5,F=e[0]>>5,O=m.x-(R<<4),L=O&127,H=32-L,U=m.y1-m.y0,G=(m.y+m.y0)*F+(O>>5),Y,J=0;J<U;J++){Y=0;for(var $=0;$<=R;$++)p[G+$]|=Y<<H|($<R?(Y=I[J*R+$])>>>L:0);G+=F}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=yx(p),f):n},f.fontStyle=function(p){return arguments.length?(i=yx(p),f):i},f.fontWeight=function(p){return arguments.length?(s=yx(p),f):s},f.rotate=function(p){return arguments.length?(o=yx(p),f):o},f.text=function(p){return arguments.length?(t=yx(p),f):t},f.spiral=function(p){return arguments.length?(u=ZKt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=yx(p),f):r},f.padding=function(p){return arguments.length?(a=yx(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function GKt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(VI<<5)/s,MF/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*sq),g=Math.cos(t.rotate*sq),y=c*g,v=c*m,b=d*g,_=d*m;c=Math.max(Math.abs(y+_),Math.abs(y-_))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=VI<<5&&(o=0,a+=u,u=0),a+d>=MF)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*sq),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var w=i.getImageData(0,0,(VI<<5)/s,MF/s).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)S[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var T=0,A=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var k=f*p+(h>>5),I=w[(a+p)*(VI<<5)+(o+h)<<2]?1<<31-h%32:0;S[k]|=I,T|=I}T?A=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+A,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function YKt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function KKt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function XKt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function M9e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function QKt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function JKt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function yx(e){return typeof e=="function"?e:function(){return e}}var ZKt={archimedean:M9e,rectangular:QKt};const $9e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],eXt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function tae(e){Ye.call(this,WKt(),e)}tae.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:$9e}]};Ot(tae,Ye,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&rt("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return cr(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||eXt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||$9e;let a=e.fontSize||14,u;if(cr(a)?u=e.fontSizeRange:a=il(a),u){const p=a,m=xi("sqrt")().domain(Zm(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(qd).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const tXt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:tae},Symbol.toStringTag,{value:"Module"})),nXt=e=>new Uint8Array(e),rXt=e=>new Uint16Array(e),Ok=e=>new Uint32Array(e);function iXt(){let e=8,t=[],n=Ok(0),r=J4(0,e),i=J4(0,e);return{data:()=>t,seen:()=>n=sXt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=J4(s,e,r),i=J4(s,e))}}}function sXt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function J4(e,t,n){const r=(t<257?nXt:t<65537?rXt:Ok)(e);return n&&r.set(n),r}function owe(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function awe(){let e=Ok(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=Ok(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=oXt(h,d),c)p=t,m=e,t=Array(c+f),e=Ok(c+f),aXt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[aEt(u,a[0],0,l),Rv(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function oXt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),cEt(e,t)}function aXt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function nae(e){Ye.call(this,iXt(),e),this._indices=null,this._dims=null}nae.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Ot(nae,Ye,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=awe()),s.push(owe(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,_,w,S,T;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(_={},v=t.mod,w=0,S=v.length;w<S;++w)_[v[w]._index]=1;for(w=0;w<h;++w)T=r[w],(!o[w]||e.modified("fields",w)||t.modified(T.fields))&&(y=T.fname,(m=p[y])||(s[y]=g=awe(),p[y]=m=g.insert(T,t.source,0)),o[w]=owe(g,w,i[w]).onAdd(m,u));for(w=0,S=a.data().length;w<S;++w)b[w]||(l[w]!==u[w]?f.push(w):_[w]&&u[w]!==c&&d.push(w));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function rae(e){Ye.call(this,null,e)}rae.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Ot(rae,Ye,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const uXt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:nae,resolvefilter:rae},Symbol.toStringTag,{value:"Module"})),lXt="RawCode",l_="Literal",cXt="Property",fXt="Identifier",dXt="ArrayExpression",hXt="BinaryExpression",L9e="CallExpression",pXt="ConditionalExpression",mXt="LogicalExpression",gXt="MemberExpression",yXt="ObjectExpression",vXt="UnaryExpression";function Ip(e){this.type=e}Ip.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=bXt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function bXt(e){switch(e.type){case dXt:return e.elements;case hXt:case mXt:return[e.left,e.right];case L9e:return[e.callee].concat(e.arguments);case pXt:return[e.test,e.consequent,e.alternate];case gXt:return[e.object,e.property];case yXt:return e.properties;case cXt:return[e.key,e.value];case vXt:return[e.argument];case fXt:case l_:case lXt:default:return[]}}var b0,en,et,Xu,Hi,Q9=1,lP=2,c_=3,zb=4,J9=5,rE=6,pc=7,cP=8,xXt=9;b0={};b0[Q9]="Boolean";b0[lP]="<end>";b0[c_]="Identifier";b0[zb]="Keyword";b0[J9]="Null";b0[rE]="Numeric";b0[pc]="Punctuator";b0[cP]="String";b0[xXt]="RegularExpression";var wXt="ArrayExpression",_Xt="BinaryExpression",EXt="CallExpression",SXt="ConditionalExpression",B9e="Identifier",CXt="Literal",TXt="LogicalExpression",AXt="MemberExpression",DXt="ObjectExpression",IXt="Property",kXt="UnaryExpression",Oa="Unexpected token %0",RXt="Unexpected number",NXt="Unexpected string",PXt="Unexpected identifier",OXt="Unexpected reserved word",FXt="Unexpected end of input",OX="Invalid regular expression",oq="Invalid regular expression: missing /",j9e="Octal literals are not allowed in strict mode.",MXt="Duplicate data property in object literal not allowed in strict mode",ou="ILLEGAL",x3="Disabled.",$Xt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),LXt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Z9(e,t){if(!e)throw new Error("ASSERT: "+t)}function og(e){return e>=48&&e<=57}function iae(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Fk(e){return"01234567".indexOf(e)>=0}function BXt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function w3(e){return e===10||e===13||e===8232||e===8233}function fP(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&$Xt.test(String.fromCharCode(e))}function a$(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&LXt.test(String.fromCharCode(e))}const jXt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function U9e(){for(;et<Xu;){const e=en.charCodeAt(et);if(BXt(e)||w3(e))++et;else break}}function FX(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)et<Xu&&iae(en[et])?(r=en[et++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):gi({},Oa,ou);return String.fromCharCode(i)}function UXt(){var e,t,n,r;for(e=en[et],t=0,e==="}"&&gi({},Oa,ou);et<Xu&&(e=en[et++],!!iae(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&gi({},Oa,ou),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function z9e(){var e,t;for(e=en.charCodeAt(et++),t=String.fromCharCode(e),e===92&&(en.charCodeAt(et)!==117&&gi({},Oa,ou),++et,e=FX("u"),(!e||e==="\\"||!fP(e.charCodeAt(0)))&&gi({},Oa,ou),t=e);et<Xu&&(e=en.charCodeAt(et),!!a$(e));)++et,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),en.charCodeAt(et)!==117&&gi({},Oa,ou),++et,e=FX("u"),(!e||e==="\\"||!a$(e.charCodeAt(0)))&&gi({},Oa,ou),t+=e);return t}function zXt(){var e,t;for(e=et++;et<Xu;){if(t=en.charCodeAt(et),t===92)return et=e,z9e();if(a$(t))++et;else break}return en.slice(e,et)}function VXt(){var e,t,n;return e=et,t=en.charCodeAt(et)===92?z9e():zXt(),t.length===1?n=c_:jXt.hasOwnProperty(t)?n=zb:t==="null"?n=J9:t==="true"||t==="false"?n=Q9:n=c_,{type:n,value:t,start:e,end:et}}function aq(){var e=et,t=en.charCodeAt(et),n,r=en[et],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++et,{type:pc,value:String.fromCharCode(t),start:e,end:et};default:if(n=en.charCodeAt(et+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return et+=2,{type:pc,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:et};case 33:case 61:return et+=2,en.charCodeAt(et)===61&&++et,{type:pc,value:en.slice(e,et),start:e,end:et}}}if(o=en.substr(et,4),o===">>>=")return et+=4,{type:pc,value:o,start:e,end:et};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return et+=3,{type:pc,value:s,start:e,end:et};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return et+=2,{type:pc,value:i,start:e,end:et};if(i==="//"&&gi({},Oa,ou),"<>=!+-*%&|^/".indexOf(r)>=0)return++et,{type:pc,value:r,start:e,end:et};gi({},Oa,ou)}function HXt(e){let t="";for(;et<Xu&&iae(en[et]);)t+=en[et++];return t.length===0&&gi({},Oa,ou),fP(en.charCodeAt(et))&&gi({},Oa,ou),{type:rE,value:parseInt("0x"+t,16),start:e,end:et}}function qXt(e){let t="0"+en[et++];for(;et<Xu&&Fk(en[et]);)t+=en[et++];return(fP(en.charCodeAt(et))||og(en.charCodeAt(et)))&&gi({},Oa,ou),{type:rE,value:parseInt(t,8),octal:!0,start:e,end:et}}function uwe(){var e,t,n;if(n=en[et],Z9(og(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=et,e="",n!=="."){if(e=en[et++],n=en[et],e==="0"){if(n==="x"||n==="X")return++et,HXt(t);if(Fk(n))return qXt(t);n&&og(n.charCodeAt(0))&&gi({},Oa,ou)}for(;og(en.charCodeAt(et));)e+=en[et++];n=en[et]}if(n==="."){for(e+=en[et++];og(en.charCodeAt(et));)e+=en[et++];n=en[et]}if(n==="e"||n==="E")if(e+=en[et++],n=en[et],(n==="+"||n==="-")&&(e+=en[et++]),og(en.charCodeAt(et)))for(;og(en.charCodeAt(et));)e+=en[et++];else gi({},Oa,ou);return fP(en.charCodeAt(et))&&gi({},Oa,ou),{type:rE,value:parseFloat(e),start:t,end:et}}function WXt(){var e="",t,n,r,i,s=!1;for(t=en[et],Z9(t==="'"||t==='"',"String literal must starts with a quote"),n=et,++et;et<Xu;)if(r=en[et++],r===t){t="";break}else if(r==="\\")if(r=en[et++],!r||!w3(r.charCodeAt(0)))switch(r){case"u":case"x":en[et]==="{"?(++et,e+=UXt()):e+=FX(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Fk(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),et<Xu&&Fk(en[et])&&(s=!0,i=i*8+"01234567".indexOf(en[et++]),"0123".indexOf(r)>=0&&et<Xu&&Fk(en[et])&&(i=i*8+"01234567".indexOf(en[et++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&en[et]===`
`&&++et;else{if(w3(r.charCodeAt(0)))break;e+=r}return t!==""&&gi({},Oa,ou),{type:cP,value:e,octal:s,start:n,end:et}}function GXt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";gi({},OX)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{gi({},OX)}try{return new RegExp(e,t)}catch{return null}}function YXt(){var e,t,n,r,i;for(e=en[et],Z9(e==="/","Regular expression literal must start with a slash"),t=en[et++],n=!1,r=!1;et<Xu;)if(e=en[et++],t+=e,e==="\\")e=en[et++],w3(e.charCodeAt(0))&&gi({},oq),t+=e;else if(w3(e.charCodeAt(0)))gi({},oq);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||gi({},oq),i=t.substr(1,t.length-2),{value:i,literal:t}}function KXt(){var e,t,n;for(t="",n="";et<Xu&&(e=en[et],!!a$(e.charCodeAt(0)));)++et,e==="\\"&&et<Xu?gi({},Oa,ou):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&gi({},OX,n),{value:n,literal:t}}function XXt(){var e,t,n,r;return Hi=null,U9e(),e=et,t=YXt(),n=KXt(),r=GXt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:et}}function QXt(e){return e.type===c_||e.type===zb||e.type===Q9||e.type===J9}function V9e(){if(U9e(),et>=Xu)return{type:lP,start:et,end:et};const e=en.charCodeAt(et);return fP(e)?VXt():e===40||e===41||e===59?aq():e===39||e===34?WXt():e===46?og(en.charCodeAt(et+1))?uwe():aq():og(e)?uwe():aq()}function bc(){const e=Hi;return et=e.end,Hi=V9e(),et=e.end,e}function H9e(){const e=et;Hi=V9e(),et=e}function JXt(e){const t=new Ip(wXt);return t.elements=e,t}function lwe(e,t,n){const r=new Ip(e==="||"||e==="&&"?TXt:_Xt);return r.operator=e,r.left=t,r.right=n,r}function ZXt(e,t){const n=new Ip(EXt);return n.callee=e,n.arguments=t,n}function eQt(e,t,n){const r=new Ip(SXt);return r.test=e,r.consequent=t,r.alternate=n,r}function sae(e){const t=new Ip(B9e);return t.name=e,t}function HI(e){const t=new Ip(CXt);return t.value=e.value,t.raw=en.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function cwe(e,t,n){const r=new Ip(AXt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function tQt(e){const t=new Ip(DXt);return t.properties=e,t}function fwe(e,t,n){const r=new Ip(IXt);return r.key=t,r.value=n,r.kind=e,r}function nQt(e,t){const n=new Ip(kXt);return n.operator=e,n.argument=t,n.prefix=!0,n}function gi(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(Z9(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=et,n.description=i,n}function e7(e){e.type===lP&&gi(e,FXt),e.type===rE&&gi(e,RXt),e.type===cP&&gi(e,NXt),e.type===c_&&gi(e,PXt),e.type===zb&&gi(e,OXt),gi(e,Oa,e.value)}function Qu(e){const t=bc();(t.type!==pc||t.value!==e)&&e7(t)}function ws(e){return Hi.type===pc&&Hi.value===e}function uq(e){return Hi.type===zb&&Hi.value===e}function rQt(){const e=[];for(et=Hi.start,Qu("[");!ws("]");)ws(",")?(bc(),e.push(null)):(e.push(f_()),ws("]")||Qu(","));return bc(),JXt(e)}function dwe(){et=Hi.start;const e=bc();return e.type===cP||e.type===rE?(e.octal&&gi(e,j9e),HI(e)):sae(e.value)}function iQt(){var e,t,n,r;if(et=Hi.start,e=Hi,e.type===c_)return n=dwe(),Qu(":"),r=f_(),fwe("init",n,r);if(e.type===lP||e.type===pc)e7(e);else return t=dwe(),Qu(":"),r=f_(),fwe("init",t,r)}function sQt(){var e=[],t,n,r,i={},s=String;for(et=Hi.start,Qu("{");!ws("}");)t=iQt(),t.key.type===B9e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?gi({},MXt):i[r]=!0,e.push(t),ws("}")||Qu(",");return Qu("}"),tQt(e)}function oQt(){Qu("(");const e=oae();return Qu(")"),e}const aQt={if:1};function uQt(){var e,t,n;if(ws("("))return oQt();if(ws("["))return rQt();if(ws("{"))return sQt();if(e=Hi.type,et=Hi.start,e===c_||aQt[Hi.value])n=sae(bc().value);else if(e===cP||e===rE)Hi.octal&&gi(Hi,j9e),n=HI(bc());else{if(e===zb)throw new Error(x3);e===Q9?(t=bc(),t.value=t.value==="true",n=HI(t)):e===J9?(t=bc(),t.value=null,n=HI(t)):ws("/")||ws("/=")?(n=HI(XXt()),H9e()):e7(bc())}return n}function lQt(){const e=[];if(Qu("("),!ws(")"))for(;et<Xu&&(e.push(f_()),!ws(")"));)Qu(",");return Qu(")"),e}function cQt(){et=Hi.start;const e=bc();return QXt(e)||e7(e),sae(e.value)}function fQt(){return Qu("."),cQt()}function dQt(){Qu("[");const e=oae();return Qu("]"),e}function hQt(){var e,t,n;for(e=uQt();;)if(ws("."))n=fQt(),e=cwe(".",e,n);else if(ws("("))t=lQt(),e=ZXt(e,t);else if(ws("["))n=dQt(),e=cwe("[",e,n);else break;return e}function hwe(){const e=hQt();if(Hi.type===pc&&(ws("++")||ws("--")))throw new Error(x3);return e}function $F(){var e,t;if(Hi.type!==pc&&Hi.type!==zb)t=hwe();else{if(ws("++")||ws("--"))throw new Error(x3);if(ws("+")||ws("-")||ws("~")||ws("!"))e=bc(),t=$F(),t=nQt(e.value,t);else{if(uq("delete")||uq("void")||uq("typeof"))throw new Error(x3);t=hwe()}}return t}function pwe(e){let t=0;if(e.type!==pc&&e.type!==zb)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function pQt(){var e,t,n,r,i,s,o,a,u,l;if(e=Hi,u=$F(),r=Hi,i=pwe(r),i===0)return u;for(r.prec=i,bc(),t=[e,Hi],o=$F(),s=[u,r,o];(i=pwe(Hi))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=lwe(a,u,o),s.push(n);r=bc(),r.prec=i,s.push(r),t.push(Hi),n=$F(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=lwe(s[l-1].value,s[l-2],n),l-=2;return n}function f_(){var e,t,n;return e=pQt(),ws("?")&&(bc(),t=f_(),Qu(":"),n=f_(),e=eQt(e,t,n)),e}function oae(){const e=f_();if(ws(","))throw new Error(x3);return e}function aae(e){en=e,et=0,Xu=en.length,Hi=null,H9e();const t=oae();if(Hi.type!==lP)throw new Error("Unexpect token after expression.");return t}var q9e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function W9e(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&rt("Missing arguments to clamp function."),o.length>3&&rt("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&rt("Missing arguments to if function."),o.length>3&&rt("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function mQt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function G9e(e){e=e||{};const t=e.allowed?gp(e.allowed):{},n=e.forbidden?gp(e.forbidden):{},r=e.constants||q9e,i=(e.functions||W9e)(f),s=e.globalvar,o=e.fieldvar,a=cr(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(Bt(p))return p;const m=d[p.type];return m==null&&rt("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:vn(n,m)?rt("Illegal identifier: "+m):vn(r,m)?r[m]:vn(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[mQt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&rt("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=vn(i,m)&&i[m];return y||rt("Unrecognized function: "+m),cr(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const mwe=Symbol("vega_selection_getter");function Y9e(e){return(!e.getter||!e.getter[mwe])&&(e.getter=zd(e.field),e.getter[mwe]=!0),e.getter}const uae="intersect",gwe="union",gQt="vlMulti",yQt="vlPoint",ywe="or",vQt="and",rm="_vgsid_",_3=zd(rm),bQt="E",xQt="R",wQt="R-E",_Qt="R-LE",EQt="R-RE",u$="index:unit";function vwe(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=Y9e(a)(e),pv(o)&&(o=qu(o)),pv(r[s])&&(r[s]=qu(r[s])),at(r[s])&&pv(r[s][0])&&(r[s]=r[s].map(qu)),a.type===bQt){if(at(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===xQt){if(!tS(o,r[s]))return!1}else if(a.type===EQt){if(!tS(o,r[s],!0,!1))return!1}else if(a.type===wQt){if(!tS(o,r[s],!1,!1))return!1}else if(a.type===_Qt&&!tS(o,r[s],!1,!0))return!1;return!0}function SQt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[u$]&&r[u$].value:void 0,o=n===uae,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=vwe(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=vwe(t,l),o^h)return h;return a&&o}const K9e=Db(_3),CQt=K9e.left,TQt=K9e.right;function AQt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[u$]&&r[u$].value:void 0,o=n===uae,a=_3(t),u=CQt(i,a);if(u===i.length||_3(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(TQt(i,a)-u<s.size)return!1}return!0}function DQt(e,t){return e.map(n=>lr(t.fields?{values:t.fields.map(r=>Y9e(r)(n.datum))}:{[rm]:_3(n.datum)},t))}function IQt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,_=0,w,S;_<b;++_)if(l=s[_],d=l.unit,c=l.fields,f=l.values,c&&f){for(w=0,S=c.length;w<S;++w)h=c[w],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=lq[`${y}_union`],m[d]=v(g,Lt(f[w]));n&&(g=a[d]||(a[d]=[]),g.push(Lt(f).reduce((T,A,k)=>(T[c[k].field]=A,T),{})))}else h=rm,p=_3(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[rm]:p}));if(t=t||gwe,o[rm]?o[rm]=lq[`${rm}_${t}`](...Object.values(o[rm])):Object.keys(o).forEach(T=>{o[T]=Object.keys(o[T]).map(A=>o[T][A]).reduce((A,k)=>A===void 0?k:lq[`${u[T]}_${t}`](A,k))}),s=Object.keys(a),n&&s.length){const T=r?yQt:gQt;o[T]=t===gwe?{[ywe]:s.reduce((A,k)=>(A.push(...a[k]),A),[])}:{[vQt]:s.map(A=>({[ywe]:a[A]}))}}return o}var lq={[`${rm}_union`]:bEt,[`${rm}_intersect`]:yEt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=qu(t[0]),r=qu(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=qu(t[0]),r=qu(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const kQt=":",RQt="@";function lae(e,t,n,r){t[0].type!==l_&&rt("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Kr(t).value,o="unit",a=RQt+o,u=kQt+i;s===uae&&!vn(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),vn(r,u)||(r[u]=n.getData(i).tuplesRef())}function X9e(e){const t=this.context.data[e];return t?t.values.value:[]}function NQt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function PQt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Vd).insert(t)),1}function OQt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const dP=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},FQt=dP("format"),Q9e=dP("timeFormat"),MQt=dP("utcFormat"),$Qt=dP("timeParse"),LQt=dP("utcParse"),Z4=new Date(2e3,0,1);function t7(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(Z4.setYear(2e3),Z4.setMonth(e),Z4.setDate(t),Q9e.call(this,Z4,n))}function BQt(e){return t7.call(this,e,1,"%B")}function jQt(e){return t7.call(this,e,1,"%b")}function UQt(e){return t7.call(this,0,2+e,"%A")}function zQt(e){return t7.call(this,0,2+e,"%a")}const VQt=":",HQt="@",MX="%",J9e="$";function cae(e,t,n,r){t[0].type!==l_&&rt("First argument to data functions must be a string literal.");const i=t[0].value,s=VQt+i;if(!vn(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function qQt(e,t,n,r){t[0].type!==l_&&rt("First argument to indata must be a string literal."),t[1].type!==l_&&rt("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=HQt+s;vn(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Ml(e,t,n,r){if(t[0].type===l_)bwe(n,r,t[0].value);else for(e in n.scales)bwe(n,r,e)}function bwe(e,t,n){const r=MX+n;if(!vn(t,r))try{t[r]=e.scaleRef(n)}catch{}}function x0(e,t){if(cr(e))return e;if(Bt(e)){const n=t.scales[e];return n&&yHt(n.value)?n.value:void 0}}function WQt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Ml,n._range=Ml,n._scale=Ml;const r=i=>"_["+(i.type===l_?Nt(MX+i.value):Nt(MX)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function fae(e,t){return function(n,r,i){if(n){const s=x0(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const GQt=fae("area",FAt),YQt=fae("bounds",BAt),KQt=fae("centroid",qAt);function XQt(e,t){const n=x0(e,(t||this).context);return n&&n.scale()}function QQt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function dae(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function JQt(){return dae(this.context.dataflow,"warn",arguments)}function ZQt(){return dae(this.context.dataflow,"info",arguments)}function eJt(){return dae(this.context.dataflow,"debug",arguments)}function cq(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function $X(e){const t=Pv(e),n=cq(t.r),r=cq(t.g),i=cq(t.b);return .2126*n+.7152*r+.0722*i}function tJt(e,t){const n=$X(e),r=$X(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function nJt(){const e=[].slice.call(arguments);return e.unshift({}),lr(...e)}function Z9e(e,t){return e===t||e!==e&&t!==t?!0:at(e)?at(t)&&e.length===t.length?rJt(e,t):!1:jt(e)&&jt(t)?e7e(e,t):!1}function rJt(e,t){for(let n=0,r=e.length;n<r;++n)if(!Z9e(e[n],t[n]))return!1;return!0}function e7e(e,t){for(const n in e)if(!Z9e(e[n],t[n]))return!1;return!0}function xwe(e){return t=>e7e(e,t)}function iJt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Vd:at(n)||C9(n)?n:xwe(n),c.remove(f)),t&&c.insert(t),r&&(f=xwe(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function sJt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function oJt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const wwe={};function aJt(e,t){const n=wwe[t]||(wwe[t]=zd(t));return at(e)?e.map(n):n(e)}function hae(e){return at(e)||ArrayBuffer.isView(e)?e:null}function pae(e){return hae(e)||(Bt(e)?e:null)}function uJt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return hae(e).join(...n)}function lJt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return pae(e).indexOf(...n)}function cJt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return pae(e).lastIndexOf(...n)}function fJt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return pae(e).slice(...n)}function dJt(e,t,n){return cr(n)&&rt("Function argument passed to replace."),String(e).replace(t,n)}function hJt(e){return hae(e).slice().reverse()}function pJt(e,t,n){return Lse(e||0,t||0,n||0)}function mJt(e,t){const n=x0(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function gJt(e,t){const n=x0(e,(t||this).context);return n?n.copy():void 0}function yJt(e,t){const n=x0(e,(t||this).context);return n?n.domain():[]}function vJt(e,t,n){const r=x0(e,(n||this).context);return r?at(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function bJt(e,t){const n=x0(e,(t||this).context);return n&&n.range?n.range():[]}function xJt(e,t,n){const r=x0(e,(n||this).context);return r?r(t):void 0}function wJt(e,t,n,r,i){e=x0(e,(i||this).context);const s=HLe(t,n);let o=e.domain(),a=o[0],u=Kr(o),l=rl;return u-a?l=NLe(e,a,u):e=(e.interpolator?xi("sequential")().interpolator(e.interpolator()):xi("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Kr(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function _Jt(e,t,n){const r=x0(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function EJt(e){let t=null;return function(n){return n?g3(n,t=t||qC(e)):e}}const t7e=e=>e.data;function n7e(e,t){const n=X9e.call(t,e);return n.root&&n.root.lookup||{}}function SJt(e,t,n){const r=n7e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(t7e):void 0}function CJt(e,t){const n=n7e(e,this)[t];return n?n.ancestors().map(t7e):void 0}const r7e=()=>typeof window<"u"&&window||null;function TJt(){const e=r7e();return e?e.screen:{}}function AJt(){const e=r7e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function DJt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function i7e(e,t,n){if(!e)return[];const[r,i]=e,s=new Go().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return UBe(o,s,IJt(t))}function IJt(e){let t=null;if(e){const n=Lt(e.marktype),r=Lt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function kJt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Lt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function RJt(e){return Lt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function NJt(e,t,n){const{x:r,y:i,mark:s}=n,o=new Go().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),i7e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>PJt(u.x,u.y,t))}function PJt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const E3={random(){return qd()},cumulativeNormal:k9,cumulativeLogNormal:ise,cumulativeUniform:use,densityNormal:Zie,densityLogNormal:rse,densityUniform:ase,quantileNormal:R9,quantileLogNormal:sse,quantileUniform:lse,sampleNormal:I9,sampleLogNormal:nse,sampleUniform:ose,isArray:at,isBoolean:Ub,isDate:pv,isDefined(e){return e!==void 0},isNumber:fi,isObject:jt,isRegExp:z5e,isString:Bt,isTuple:C9,isValid(e){return e!=null&&e===e},toBoolean:$ie,toDate(e){return Lie(e)},toNumber:qu,toString:Bie,indexof:lJt,join:uJt,lastindexof:cJt,replace:dJt,reverse:hJt,slice:fJt,flush:j5e,lerp:V5e,merge:nJt,pad:W5e,peek:Kr,pluck:aJt,span:WN,inrange:tS,truncate:G5e,rgb:Pv,lab:o8,hcl:a8,hsl:i8,luminance:$X,contrast:tJt,sequence:Cc,format:FQt,utcFormat:MQt,utcParse:LQt,utcOffset:a$e,utcSequence:c$e,timeFormat:Q9e,timeParse:$Qt,timeOffset:o$e,timeSequence:l$e,timeUnitSpecifier:K5e,monthFormat:BQt,monthAbbrevFormat:jQt,dayFormat:UQt,dayAbbrevFormat:zQt,quarter:M5e,utcquarter:$5e,week:Q5e,utcweek:e$e,dayofyear:X5e,utcdayofyear:Z5e,warn:JQt,info:ZQt,debug:eJt,extent(e){return Zm(e)},inScope:QQt,intersect:i7e,clampRange:L5e,pinchDistance:sJt,pinchAngle:oJt,screen:TJt,containerSize:DJt,windowSize:AJt,bandspace:pJt,setdata:PQt,pathShape:EJt,panLinear:N5e,panLog:P5e,panPow:O5e,panSymlog:F5e,zoomLinear:Rie,zoomLog:Nie,zoomPow:U5,zoomSymlog:Pie,encode:OQt,modify:iJt,lassoAppend:kJt,lassoPath:RJt,intersectLasso:NJt},OJt=["view","item","group","xy","x","y"],FJt="event.vega.",s7e="this.",mae={},o7e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Nt(J9e+e)}]`,functions:MJt,constants:q9e,visitors:mae},a7e=G9e(o7e);function MJt(e){const t=W9e(e);OJt.forEach(n=>t[n]=FJt+n);for(const n in E3)t[n]=s7e+n;return lr(t,WQt(e,E3,mae)),t}function Oo(e,t,n){return arguments.length===1?E3[e]:(E3[e]=t,n&&(mae[e]=n),a7e.functions[e]=s7e+e,this)}Oo("bandwidth",mJt,Ml);Oo("copy",gJt,Ml);Oo("domain",yJt,Ml);Oo("range",bJt,Ml);Oo("invert",vJt,Ml);Oo("scale",xJt,Ml);Oo("gradient",wJt,Ml);Oo("geoArea",GQt,Ml);Oo("geoBounds",YQt,Ml);Oo("geoCentroid",KQt,Ml);Oo("geoShape",_Jt,Ml);Oo("geoScale",XQt,Ml);Oo("indata",NQt,qQt);Oo("data",X9e,cae);Oo("treePath",SJt,cae);Oo("treeAncestors",CJt,cae);Oo("vlSelectionTest",SQt,lae);Oo("vlSelectionIdTest",AQt,lae);Oo("vlSelectionResolve",IQt,lae);Oo("vlSelectionTuples",DQt);function t0(e,t){const n={};let r;try{e=Bt(e)?e:Nt(e)+"",r=aae(e)}catch{rt("Expression parse error: "+e)}r.visit(s=>{if(s.type!==L9e)return;const o=s.callee.name,a=o7e.visitors[o];a&&a(o,s.arguments,t,n)});const i=a7e(r);return i.globals.forEach(s=>{const o=J9e+s;!vn(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:lr({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function $Jt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const LJt=gp(["rule"]),_we=gp(["group","image","rect"]);function BJt(e,t){let n="";return LJt[t]||(e.x2&&(e.x?(_we[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(_we[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function gae(e){return(e+"").toLowerCase()}function jJt(e){return gae(e)==="operator"}function UJt(e){return gae(e)==="collect"}function zD(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function zJt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var VJt={operator:(e,t)=>zD(e,["_"],t.code),parameter:(e,t)=>zD(e,["datum","_"],t.code),event:(e,t)=>zD(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return zD(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Nt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=BJt(r,n),i+="return m;",zD(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Nt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),zJt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function HJt(e){const t=this;jJt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function qJt(e){const t=this;if(e.params){const n=t.get(e.id);n||rt("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function WJt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=at(i)?i.map(s=>Ewe(s,n,t)):Ewe(i,n,t)}return t}function Ewe(e,t,n){if(!e||!jt(e))return e;for(let r=0,i=Swe.length,s;r<i;++r)if(s=Swe[r],vn(e,s.key))return s.parse(e,t,n);return e}var Swe=[{key:"$ref",parse:GJt},{key:"$key",parse:KJt},{key:"$expr",parse:YJt},{key:"$field",parse:XJt},{key:"$encode",parse:JJt},{key:"$compare",parse:QJt},{key:"$context",parse:ZJt},{key:"$subflow",parse:eZt},{key:"$tupleid",parse:tZt}];function GJt(e,t){return t.get(e.$ref)||rt("Operator not defined: "+e.$ref)}function YJt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=ef(t.parameterExpression(e.$expr),e.$fields))}function KJt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=Mie(e.$key,e.$flat,t.expr.codegen))}function XJt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=zd(e.$field,e.$name,t.expr.codegen))}function QJt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Lt(e.$compare).map(i=>i&&i.$tupleid?mn:i);return t.fn[n]||(t.fn[n]=Oie(r,e.$order,t.expr.codegen))}function JJt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=ef(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function ZJt(e,t){return t}function eZt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function tZt(){return mn}function nZt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&rt("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function rZt(e){var t=this,n=jt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||rt("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const iZt={skip:!0};function sZt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function oZt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],iZt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Vd).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function u7e(e,t,n,r){return new l7e(e,t,n,r)}function l7e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||VJt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Cwe(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}l7e.prototype=Cwe.prototype={fork(){const e=new Cwe(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),UJt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[gae(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:$Jt,parseOperator:HJt,parseOperatorParameters:qJt,parseParameters:WJt,parseStream:nZt,parseUpdate:rZt,getState:sZt,setState:oZt};function aZt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),c7e(t,e.description()))}function c7e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function uZt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const fq="default";function lZt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:fq,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?Bt(i)?i:i.user:fq,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Bt(r)||(i=r.item,r=r.user),LX(e,r&&r!==fq?r:i||r),i},{cursor:t})}function LX(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function l$(e,t){var n=e._runtime.data;return vn(n,t)||rt("Unrecognized data set: "+t),n[t]}function cZt(e,t){return arguments.length<2?l$(this,e).values.value:n7.call(this,e,tE().remove(Vd).insert(t))}function n7(e,t){k$e(t)||rt("Second argument to changes must be a changeset.");const n=l$(this,e);return n.modified=!0,this.pulse(n.input,t)}function fZt(e,t){return n7.call(this,e,tE().insert(t))}function dZt(e,t){return n7.call(this,e,tE().remove(t))}function f7e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function d7e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function r7(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function hZt(e){var t=r7(e),n=f7e(e),r=d7e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function pZt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=r7(e),o=t.changedTouches?t.changedTouches[0]:t,s=Y9(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=mZt(e,n,s),t}function mZt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;Bt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:il(e),item:il(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Twe="view",gZt="timer",yZt="window",vZt={trap:!1};function bZt(e){const t=lr({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{at(r[s])&&(r[s]=gp(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function h7e(e,t,n,r){e._eventListeners.push({type:n,sources:Lt(t),handler:r})}function xZt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function e6(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||jt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function wZt(e,t,n){var r=this,i=new D9(n),s=function(l,c){r.runAsync(null,()=>{e===Twe&&xZt(r,t)&&l.preventDefault(),i.receive(pZt(r,l,c))})},o;if(e===gZt)e6(r,"timer",t)&&r.timer(s,t);else if(e===Twe)e6(r,"view",t)&&r.addEventListener(t,s,vZt);else if(e===yZt?e6(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&e6(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);h7e(r,o,t,s)}return i}function Awe(e){return e.item}function Dwe(e){return e.item.mark.source}function Iwe(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function _Zt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Awe),Dwe,Iwe(e)),this.on(this.events("view","pointerout",Awe),Dwe,Iwe(t)),this}function EZt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Rf(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const SZt="vega-bind",CZt="vega-bind-name",TZt="vega-bind-radio";function AZt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=Fie(r.debounce,i.update))),(r.input==null&&r.element?DZt:kZt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function DZt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),h7e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(IZt(i))}}function IZt(e){return typeof Event<"u"?new Event(e):{type:e}}function kZt(e,t,n,r){const i=r.signal(n.signal),s=Rf("div",{class:SZt}),o=n.input==="radio"?s:s.appendChild(Rf("label"));o.appendChild(Rf("span",{class:CZt},n.name||n.signal)),t.appendChild(s);let a=RZt;switch(n.input){case"checkbox":a=NZt;break;case"select":a=PZt;break;case"radio":a=OZt;break;case"range":a=FZt;break}a(e,o,n,i)}function RZt(e,t,n,r){const i=Rf("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function NZt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Rf("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function PZt(e,t,n,r){const i=Rf("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};c$(o,r)&&(u.selected=!0),i.appendChild(Rf("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(c$(n.options[a],o)){i.selectedIndex=a;return}}}function OZt(e,t,n,r){const i=Rf("span",{class:TZt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};c$(o,r)&&(u.checked=!0);const l=Rf("input",u);l.addEventListener("change",()=>e.update(o));const c=Rf("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)c$(a[l].value,o)&&(a[l].checked=!0)}}function FZt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||Nv(s,i,100),a=Rf("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Rf("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function c$(e,t){return e===t||e+""==t+""}function p7e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,f7e(e),d7e(e),r7(e),i,s).background(e.background())}function yae(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function MZt(e,t,n,r){const i=new r(e.loader(),yae(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,r7(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function $Zt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=K9(r);e=n._el=e?dq(n,e,!0):null,aZt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||uP,a=e?s.renderer:s.headless;return n._renderer=a?p7e(n,n._renderer,e,a):null,n._handler=MZt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=dq(n,t,!0):e.appendChild(Rf("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=dq(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{AZt(n,u.element||t,u)})),n}function dq(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const VD=e=>+e||0,LZt=e=>({top:e,bottom:e,left:e,right:e});function kwe(e){return jt(e)?{top:VD(e.top),bottom:VD(e.bottom),left:VD(e.left),right:VD(e.right)}:LZt(VD(e))}async function vae(e,t,n,r){const i=K9(t),s=i&&i.headless;return s||rt("Unrecognized renderer type: "+t),await e.runAsync(),p7e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function BZt(e,t){e!==W1.Canvas&&e!==W1.SVG&&e!==W1.PNG&&rt("Unrecognized image type: "+e);const n=await vae(this,e,t);return e===W1.SVG?jZt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function jZt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function UZt(e,t){return(await vae(this,W1.Canvas,e,t)).canvas()}async function zZt(e){return(await vae(this,W1.SVG,e)).svg()}function VZt(e,t,n){return u7e(e,UC,E3,n).parse(t)}function HZt(e){var t=this._runtime.scales;return vn(t,e)||rt("Unrecognized scale or projection: "+e),t[e].value}var m7e="width",g7e="height",bae="padding",Rwe={skip:!0};function y7e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===bae?r.left+r.right:0)}function v7e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===bae?r.top+r.bottom:0)}function qZt(e){var t=e._signals,n=t[m7e],r=t[g7e],i=t[bae];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=y7e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=v7e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function WZt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(m7e,n,Rwe),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(g7e,r,Rwe),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function GZt(e){return this._runtime.getState(e||{data:YZt,signals:KZt,recurse:!0})}function YZt(e,t){return t.modified&&at(t.input.value)&&!e.startsWith("_:vega:_")}function KZt(e,t){return!(e==="parent"||t instanceof UC.proxy)}function XZt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function QZt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(JSt(n,t))}function JZt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",ZZt(r))}function ZZt(e){return e==null?"":at(e)?b7e(e):jt(e)&&!pv(e)?een(e):e+""}function een(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(at(n)?b7e(n):x7e(n))}).join(`
`)}function b7e(e){return"["+e.map(x7e).join(", ")+"]"}function x7e(e){return at(e)?"[]":jt(e)&&!pv(e)?"{}":e}function ten(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function w7e(e,t){const n=this;if(t=t||{},OS.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=lr({},e.locale,t.locale);n.locale(x$e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||W1.Canvas,n._scenegraph=new pBe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||JZt,n._redraw=!0,n._handler=new uP().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=bZt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=VZt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:lr({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=y7e(n,n._width),n._viewHeight=v7e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,qZt(n),uZt(n),lZt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function t6(e,t){return vn(e._signals,t)?e._signals[t]:rt("Unrecognized signal name: "+Nt(t))}function _7e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Nwe(e,t,n,r){let i=_7e(n,r);return i||(i=yae(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Pwe(e,t,n){const r=_7e(t,n);return r&&t._targets.remove(r),e}Ot(w7e,OS,{async evaluate(e,t,n){if(await OS.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,hZt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&SF(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&c7e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=t6(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",kwe(e)):kwe(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(K9(e)||rt("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(OS.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(t6(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:WZt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=yae(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Nwe(this,e,t6(this,e),t)},removeSignalListener(e,t){return Pwe(this,t6(this,e),t)},addDataListener(e,t){return Nwe(this,e,l$(this,e).values,t)},removeDataListener(e,t){return Pwe(this,l$(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=LX(this,null);this._globalCursor=!!e,t&&LX(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:QZt,events:wZt,finalize:EZt,hover:_Zt,data:cZt,change:n7,insert:fZt,remove:dZt,scale:HZt,initialize:$Zt,toImageURL:BZt,toCanvas:UZt,toSVG:zZt,getState:GZt,setState:XZt,_watchPixelRatio:ten});const nen="view",f$="[",d$="]",E7e="{",S7e="}",ren=":",C7e=",",ien="@",sen=">",oen=/[[\]{}]/,aen={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let T7e,A7e;function Vb(e,t,n){return T7e=t||nen,A7e=n||aen,D7e(e.trim()).map(BX)}function uen(e){return A7e[e]}function Mk(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function D7e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Mk(e,i,C7e,f$+E7e,d$+S7e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function BX(e){return e[0]==="["?len(e):cen(e)}function len(e){const t=e.length;let n=1,r;if(n=Mk(e,n,d$,f$,d$),n===t)throw"Empty between selector: "+e;if(r=D7e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==sen)throw"Expected '>' after between selector: "+e;r=r.map(BX);const i=BX(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function cen(e){const t={source:T7e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===S7e){if(a=e.lastIndexOf(E7e),a>=0){try{r=fen(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===ien&&(i=++a),u=Mk(e,a,ren),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=Mk(e,a,f$),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=Mk(e,a,d$),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==f$)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||oen.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):uen(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function fen(e){const t=e.split(C7e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function den(e){return jt(e)?e:{type:e||"pad"}}const HD=e=>+e||0,hen=e=>({top:e,bottom:e,left:e,right:e});function pen(e){return jt(e)?e.signal?e:{top:HD(e.top),bottom:HD(e.bottom),left:HD(e.left),right:HD(e.right)}:hen(HD(e))}const Fa=e=>jt(e)&&!at(e)?lr({},e):{value:e};function Owe(e,t,n,r){return n!=null?(jt(n)&&!at(n)||at(n)&&n.length&&jt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function hu(e,t,n){for(const r in t)Owe(e,r,t[r]);for(const r in n)Owe(e,r,n[r],"update")}function _A(e,t,n){for(const r in t)n&&vn(n,r)||(e[r]=lr(e[r]||{},t[r]));return e}function D2(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const xae="mark",wae="frame",_ae="scope",men="axis",gen="axis-domain",yen="axis-grid",ven="axis-label",ben="axis-tick",xen="axis-title",wen="legend",_en="legend-band",Een="legend-entry",Sen="legend-gradient",I7e="legend-label",Cen="legend-symbol",Ten="legend-title",Aen="title",Den="title-text",Ien="title-subtitle";function ken(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!D2(u,e)&&hq(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===wae?i.group:n===xae?lr({},i.mark,i[t]):null;for(u in c)l=D2(u,e)||(u==="fill"||u==="stroke")&&(D2("fill",e)||D2("stroke",e)),l||hq(s,u,c[u]);Lt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)D2(h,e)||hq(s,h,d[h])}),e=lr({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=lr(o,e.enter),a&&(e.update=lr(a,e.update)),e}function hq(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const k7e=e=>Bt(e)?Nt(e):e.signal?`(${e.signal})`:R7e(e);function i7(e){if(e.gradient!=null)return Nen(e);let t=e.signal?`(${e.signal})`:e.color?Ren(e.color):e.field!=null?R7e(e.field):e.value!==void 0?Nt(e.value):void 0;return e.scale!=null&&(t=Pen(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${LF(e.exponent)})`),e.mult!=null&&(t+=`*${LF(e.mult)}`),e.offset!=null&&(t+=`+${LF(e.offset)}`),e.round&&(t=`round(${t})`),t}const n6=(e,t,n,r)=>`(${e}(${[t,n,r].map(i7).join(",")})+'')`;function Ren(e){return e.c?n6("hcl",e.h,e.c,e.l):e.h||e.s?n6("hsl",e.h,e.s,e.l):e.l||e.a?n6("lab",e.l,e.a,e.b):e.r||e.g||e.b?n6("rgb",e.r,e.g,e.b):null}function Nen(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Nt(n));for(;t.length&&Kr(t)==null;)t.pop();return t.unshift(k7e(e.gradient)),`gradient(${t.join(",")})`}function LF(e){return jt(e)?"("+i7(e)+")":e}function R7e(e){return N7e(jt(e)?e:{datum:e})}function N7e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):rt("Invalid field reference: "+Nt(e));return e.signal||(r=Bt(r)?y0(r).map(Nt).join("]["):N7e(r)),t+"["+r+"]"}function Pen(e,t){const n=k7e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+LF(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function Oen(e){let t="";return e.forEach(n=>{const r=i7(n);t+=n.test?`(${n.test})?${r}:`:r}),Kr(t)===":"&&(t+="null"),t}function P7e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=ken(e,t,n,r,i.config);for(const a in e)o[a]=Fen(e[a],t,s,i);return s}function Fen(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=$en(Men(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function Men(e){return at(e)?Oen(e):i7(e)}function $en(e,t,n,r){const i=t0(e,t);return i.$fields.forEach(s=>r[s]=1),lr(n,i.$params),i.$expr}const Len="outer",Ben=["value","update","init","react","bind"];function Fwe(e,t){rt(e+' for "outer" push: '+Nt(t))}function O7e(e,t){const n=e.name;if(e.push===Len)t.signals[n]||Fwe("No prior signal definition",n),Ben.forEach(r=>{e[r]!==void 0&&Fwe("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function jX(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function s7(e,t,n,r){return new jX(e,t,n,r)}function h$(e,t){return s7("operator",e,t)}function pn(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function S3(e,t){return t?{$field:e,$name:t}:{$field:e}}const UX=S3("key");function Mwe(e,t){return{$compare:e,$order:t}}function jen(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Uen="ascending",zen="descending";function Ven(e){return jt(e)?(e.order===zen?"-":"+")+o7(e.op,e.field):""}function o7(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const Eae="scope",zX="view";function da(e){return e&&e.signal}function Hen(e){return e&&e.expr}function BF(e){if(da(e))return!0;if(jt(e)){for(const t in e)if(BF(e[t]))return!0}return!1}function Ph(e,t){return e??t}function Fw(e){return e&&e.signal||e}const $we="timer";function C3(e,t){return(e.merge?Wen:e.stream?Gen:e.type?Yen:rt("Invalid stream specification: "+Nt(e)))(e,t)}function qen(e){return e===Eae?zX:e||zX}function Wen(e,t){const n=e.merge.map(i=>C3(i,t)),r=Sae({merge:n},e,t);return t.addStream(r).id}function Gen(e,t){const n=C3(e.stream,t),r=Sae({stream:n},e,t);return t.addStream(r).id}function Yen(e,t){let n;e.type===$we?(n=t.event($we,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(qen(e.source),e.type);const r=Sae({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Sae(e,t,n){let r=t.between;return r&&(r.length!==2&&rt('Stream "between" parameter must have 2 entries: '+Nt(t)),e.between=[C3(r[0],n),C3(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Ken(t.marktype,t.markname,t.markrole)),t.source===Eae&&r.push("inScope(event.item)"),r.length&&(e.filter=t0("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Ken(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const Xen={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Qen(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||rt("Signal update missing events specification."),Bt(s)&&(s=Vb(s,t.isSubscope()?Eae:zX)),s=Lt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[Zen(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&rt("Signal encode and update are mutually exclusive."),o="encode(item(),"+Nt(r)+")"),i.update=Bt(o)?t0(o,t):o.expr!=null?t0(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:Xen,$params:{$value:t.signalRef(o.signal)}}:rt("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(lr(Jen(u,t),i)))}function Jen(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):C3(e,t)}}function Zen(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function etn(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?rt("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=t0(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Qen(i,t,n.id))}const ts=e=>(t,n,r)=>s7(e,n,t||void 0,r),F7e=ts("aggregate"),ttn=ts("axisticks"),M7e=ts("bound"),kp=ts("collect"),Lwe=ts("compare"),ntn=ts("datajoin"),$7e=ts("encode"),rtn=ts("expression"),itn=ts("facet"),stn=ts("field"),otn=ts("key"),atn=ts("legendentries"),utn=ts("load"),ltn=ts("mark"),ctn=ts("multiextent"),ftn=ts("multivalues"),dtn=ts("overlap"),htn=ts("params"),L7e=ts("prefacet"),ptn=ts("projection"),mtn=ts("proxy"),gtn=ts("relay"),B7e=ts("render"),ytn=ts("scale"),iE=ts("sieve"),vtn=ts("sortitems"),j7e=ts("viewlayout"),btn=ts("values");let xtn=0;const U7e={min:"min",max:"max",count:"sum"};function wtn(e,t){const n=e.type||"linear";TLe(n)||rt("Unrecognized scale type: "+Nt(n)),t.addScale(e.name,{type:n,domain:void 0})}function _tn(e,t){const n=t.getScale(e.name).params;let r;n.domain=z7e(e.domain,e,t),e.range!=null&&(n.range=H7e(e,t,n)),e.interpolate!=null&&Ntn(e.interpolate,n),e.nice!=null&&(n.nice=Rtn(e.nice,t)),e.bins!=null&&(n.bins=ktn(e.bins,t));for(r in e)vn(n,r)||r==="name"||(n[r]=Rd(e[r],t))}function Rd(e,t){return jt(e)?e.signal?t.signalRef(e.signal):rt("Unsupported object: "+Nt(e)):e}function jF(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Rd(n,t))}function a7(e){rt("Can not find data set: "+Nt(e))}function z7e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&rt("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(at(e)?Etn:e.fields?Ctn:Stn)(e,t,n)}function Etn(e,t,n){return e.map(r=>Rd(r,n))}function Stn(e,t,n){const r=n.getData(e.data);return r||a7(e.data),HC(t.type)?r.valuesRef(n,e.field,V7e(e.sort,!1)):ILe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function Ctn(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=Bt(o)?{data:r,field:o}:at(o)||o.signal?Ttn(o,n):o,s.push(o),s),[]);return(HC(t.type)?Atn:ILe(t.type)?Dtn:Itn)(e,n,i)}function Ttn(e,t){const n="_:vega:_"+xtn++,r=kp({});if(at(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Nt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,iE({})]),{data:n,field:"data"}}function Atn(e,t,n){const r=V7e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||a7(l.data),c.countsRef(t,l.field,r)}),a={groupby:UX,pulse:o};r&&(i=r.op||"count",s=r.field?o7(i,r.field):"count",a.ops=[U7e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(F7e(a));const u=t.add(kp({pulse:pn(i)}));return s=t.add(btn({field:UX,sort:t.sortRef(r),pulse:pn(u)})),pn(s)}function V7e(e,t){return e&&(!e.field&&!e.op?jt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?rt("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!U7e[e.op]&&rt("Multiple domain scales can not be sorted using "+e.op)),e}function Dtn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||a7(i.data),s.domainRef(t,i.field)});return pn(t.add(ftn({values:r})))}function Itn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||a7(i.data),s.extentRef(t,i.field)});return pn(t.add(ctn({extents:r})))}function ktn(e,t){return e.signal||at(e)?jF(e,t):t.objectProperty(e)}function Rtn(e,t){return e.signal?t.signalRef(e.signal):jt(e)?{interval:Rd(e.interval),step:Rd(e.step)}:Rd(e)}function Ntn(e,t){t.interpolate=Rd(e.type||e),e.gamma!=null&&(t.interpolateGamma=Rd(e.gamma))}function H7e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Bt(i)){if(r&&vn(r,i))return e=lr({},e,{range:r[i]}),H7e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=HC(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:rt("Unrecognized scale range value: "+Nt(i))}else if(i.scheme){n.scheme=at(i.scheme)?jF(i.scheme,t):Rd(i.scheme,t),i.extent&&(n.schemeExtent=jF(i.extent,t)),i.count&&(n.schemeCount=Rd(i.count,t));return}else if(i.step){n.rangeStep=Rd(i.step,t);return}else{if(HC(e.type)&&!at(i))return z7e(i,e,t);at(i)||rt("Unsupported range type: "+Nt(i))}return i.map(s=>(at(s)?jF:Rd)(s,t))}function Ptn(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=VX(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=VX(n[i],i,t));t.addProjection(e.name,r)}function VX(e,t,n){return at(e)?e.map(r=>VX(r,t,n)):jt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:rt("Unsupported parameter object: "+Nt(e)):e}const Rp="top",EA="left",SA="right",eb="bottom",q7e="center",Otn="vertical",Ftn="start",Mtn="middle",$tn="end",HX="index",Cae="label",Ltn="offset",KC="perc",Btn="perc2",Od="value",hP="guide-label",Tae="guide-title",jtn="group-title",Utn="group-subtitle",Bwe="symbol",UF="gradient",qX="discrete",WX="size",ztn="shape",Vtn="fill",Htn="stroke",qtn="strokeWidth",Wtn="strokeDash",Gtn="opacity",Aae=[WX,ztn,Vtn,Htn,qtn,Wtn,Gtn],pP={name:1,style:1,interactive:1},ti={value:0},Fd={value:1},u7="group",W7e="rect",Dae="rule",Ytn="symbol",sE="text";function T3(e){return e.type=u7,e.interactive=e.interactive||!1,e}function tf(e,t){const n=(r,i)=>Ph(e[r],Ph(t[r],i));return n.isVertical=r=>Otn===Ph(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Ph(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Ph(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Ph(e.columns,Ph(t.columns,+n.isVertical(!0))),n}function G7e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Ktn(e,t,n){const r=t.config.style[n];return r&&r[e]}function l7(e,t,n){return`item.anchor === '${Ftn}' ? ${e} : item.anchor === '${$tn}' ? ${t} : ${n}`}const Iae=l7(Nt(EA),Nt(SA),Nt(q7e));function Xtn(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},jt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function Y7e(e,t){return t?e?jt(e)?Object.assign({},e,{offset:Y7e(e.offset,t)}):{value:e,offset:t}:t:e}function Gf(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=_A(e.encode,t,pP)):e.interactive=!1,e}function Qtn(e,t,n,r){const i=tf(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:ti,x:ti,y:ti,width:Fa(f),height:Fa(d)},update:lr({},u,{opacity:Fd,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:ti}};return hu(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Gf({type:W7e,role:Sen,encode:h},r)}function Jtn(e,t,n,r,i){const s=tf(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:ti,fill:{scale:t,field:Od}};p[l]={signal:h+"datum."+KC,mult:u},p[c]=ti,p[f]={signal:h+"datum."+Btn,mult:u},p[d]=Fa(a);const m={enter:p,update:lr({},p,{opacity:Fd}),exit:{opacity:ti}};return hu(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Gf({type:W7e,role:_en,key:Od,from:i,encode:m},r)}const Ztn=`datum.${KC}<=0?"${EA}":datum.${KC}>=1?"${SA}":"${q7e}"`,enn=`datum.${KC}<=0?"${eb}":datum.${KC}>=1?"${Rp}":"${Mtn}"`;function jwe(e,t,n,r){const i=tf(e,t),s=i.isVertical(),o=Fa(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:ti},update:c={opacity:Fd,text:{field:Cae}},exit:{opacity:ti}};return hu(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Ph(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:enn},f="y",d="x",h="1-"):(l.align=c.align={signal:Ztn},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+KC,mult:a},l[d]=c[d]=o,o.offset=Ph(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+HX}:void 0,Gf({type:sE,role:I7e,style:hP,key:Od,from:r,encode:p,overlap:u},n)}function tnn(e,t,n,r,i){const s=tf(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${Ltn} : datum.${WX}`,h=l?Fa(l):{field:WX},p=`datum.${HX}`,m=`max(1, ${i})`;let g,y,v,b,_;h.mult=.5,g={enter:y={opacity:ti,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:Fd,x:y.x,y:y.y},exit:{opacity:ti}};let w=null,S=null;e.fill||(w=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),hu(g,{fill:s("symbolFillColor",w),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",S),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),Aae.forEach(I=>{e[I]&&(v[I]=y[I]={scale:e[I],field:Od})});const T=Gf({type:Ytn,role:Cen,key:Od,from:f,clip:l?!0:void 0,encode:g},n.symbols),A=Fa(c);A.offset=s("labelOffset"),g={enter:y={opacity:ti,x:{signal:d,offset:A},y:h},update:v={opacity:Fd,text:{field:Cae},x:y.x,y:y.y},exit:{opacity:ti}},hu(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const k=Gf({type:sE,role:I7e,style:hP,key:Od,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:ti,height:l?Fa(l):ti,opacity:ti},exit:{opacity:ti},update:v={opacity:Fd,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,_={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,_={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:HX}},T3({role:_ae,from:r,encode:_A(g,o,pP),marks:[T,k],name:u,interactive:a,sort:_})}function nnn(e,t){const n=tf(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const kae='item.orient === "left"',Rae='item.orient === "right"',c7=`(${kae} || ${Rae})`,rnn=`datum.vgrad && ${c7}`,inn=l7('"top"','"bottom"','"middle"'),snn=l7('"right"','"left"','"center"'),onn=`datum.vgrad && ${Rae} ? (${snn}) : (${c7} && !(datum.vgrad && ${kae})) ? "left" : ${Iae}`,ann=`item._anchor || (${c7} ? "middle" : "start")`,unn=`${rnn} ? (${kae} ? -90 : 90) : 0`,lnn=`${c7} ? (datum.vgrad ? (${Rae} ? "bottom" : "top") : ${inn}) : "top"`;function cnn(e,t,n,r){const i=tf(e,t),s={enter:{opacity:ti},update:{opacity:Fd,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:ti}};return hu(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:ann},angle:{signal:unn},align:{signal:onn},baseline:{signal:lnn},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Gf({type:sE,role:Ten,style:Tae,from:r,encode:s},n)}function fnn(e,t){let n;return jt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Uwe(e.path)+")":e.sphere&&(n="geoShape("+Uwe(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Uwe(e){return jt(e)&&e.signal?e.signal:Nt(e)}function K7e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===u7?_ae:t||xae}function dnn(e){return{marktype:e.type,name:e.name||void 0,role:e.role||K7e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function hnn(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Nae(e,t){const n=P$e(e.type);n||rt("Unrecognized transform type: "+Nt(e.type));const r=s7(n.type.toLowerCase(),null,X7e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function X7e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=pnn(o,t,n)}return r}function pnn(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return mnn(e,t,n);if(i===void 0){e.required&&rt("Missing required "+Nt(t.type)+" parameter: "+Nt(e.name));return}else{if(r==="param")return gnn(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!da(i)?i.map(s=>zwe(e,s,n)):zwe(e,i,n)}function zwe(e,t,n){const r=e.type;if(da(t))return Hwe(r)?rt("Expression references can not be signals."):pq(r)?n.fieldRef(t):qwe(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||pq(r);return i&&ynn(t)?n.exprRef(t.expr,t.as):i&&vnn(t)?S3(t.field,t.as):Hwe(r)?t0(t,n):bnn(r)?pn(n.getData(t).values):pq(r)?S3(t):qwe(r)?n.compareRef(t):t}}function mnn(e,t,n){return Bt(t.from)||rt('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function gnn(e,t,n){const r=t[e.name];return e.array?(at(r)||rt("Expected an array of sub-parameters. Instead: "+Nt(r)),r.map(i=>Vwe(e,i,n))):Vwe(e,r,n)}function Vwe(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||rt("Unsupported parameter: "+Nt(t));const s=lr(X7e(i,t,n),i.key);return pn(n.add(htn(s)))}const ynn=e=>e&&e.expr,vnn=e=>e&&e.field,bnn=e=>e==="data",Hwe=e=>e==="expr",pq=e=>e==="field",qwe=e=>e==="compare";function xnn(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||rt("Only group marks can be faceted."),r.field!=null?o=a=zF(r,n):(e.data?a=pn(n.getData(e.data).aggregate):(s=Nae(lr({type:"aggregate",groupby:Lt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=zF(r,n),o=a=pn(n.add(s))),i=n.keyRef(r.groupby,!0))):o=pn(n.add(kp(null,[{}]))),o||(o=zF(e,n)),{key:i,pulse:o,parent:a}}function zF(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:pn(t.getData(e.data).output)}function d_(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}d_.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=pn(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new d_(e,s,i,r,o)};function Q7e(e){return Bt(e)?e:null}function Wwe(e,t,n){const r=o7(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function qD(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=Ven(s);let l=Q7e(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:UX,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:pn(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(s7(r,void 0,d)),o&&(t.index[i]=f),c=pn(f),l!=null&&(a[l]=c)}return c}d_.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=Q7e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&Wwe(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:pn(r.output)},n&&n.field&&Wwe(e,u,n),a=e.add(F7e(u)),o=e.add(kp({pulse:pn(a)})),o={agg:a,ref:pn(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return pn(this.values)},extentRef(e,t){return qD(e,this,"extent","extent",t,!1)},domainRef(e,t){return qD(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return qD(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return qD(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return qD(e,this,"indata","tupleindex",t,!0,!0)}};function wnn(e,t,n){const r=e.from.facet,i=r.name,s=zF(r,t);let o;r.name||rt("Facet must have a name: "+Nt(r)),r.data||rt("Facet must reference a data set: "+Nt(r)),r.field?o=t.add(L7e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(itn({key:t.keyRef(r.groupby),group:pn(t.proxy(n.parent)),pulse:s})):rt("Facet must specify groupby or field: "+Nt(r));const a=t.fork(),u=a.add(kp()),l=a.add(iE({pulse:pn(u)}));a.addData(i,new d_(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function _nn(e,t,n){const r=t.add(L7e({pulse:n.pulse})),i=t.fork();i.add(iE()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function J7e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(h$()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=t0(l,t);u.update=c.$expr,u.params=c.$params}function f7(e,t){const n=K7e(e),r=e.type===u7,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===_ae||n===wae,a,u,l,c,f,d,h;const p=n===xae||o||i,m=xnn(e.from,r,t);u=t.add(ntn({key:m.key||(e.key?S3(e.key):void 0),pulse:m.pulse,clean:!r}));const g=pn(u);u=l=t.add(kp({pulse:g})),u=t.add(ltn({markdef:dnn(e),interactive:hnn(e.interactive,t),clip:fnn(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:pn(u)}));const y=pn(u);u=c=t.add($7e(P7e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{const T=Nae(S,t),A=T.metadata;(A.generates||A.changes)&&rt("Mark transforms should not generate new data."),A.nomod||(c.params.mod=!0),T.params.pulse=pn(u),t.add(u=T)}),e.sort&&(u=t.add(vtn({sort:t.compareRef(e.sort),pulse:pn(u)})));const v=pn(u);(i||o)&&(o=t.add(j7e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=pn(o));const b=t.add(M7e({mark:y,pulse:d||v}));h=pn(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?wnn(e,t,m):p?_nn(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=Enn(s,h,t));const _=t.add(B7e({pulse:h})),w=t.add(iE({pulse:pn(_)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new d_(t,l,_,w)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&rt("Marks only support modify triggers."),J7e(S,t,f)}))}function Enn(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:da(s)?n.signalRef(s.signal):s,method:da(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=da(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return pn(n.add(dtn(o)))}function Snn(e,t){const n=t.config.legend,r=e.encode||{},i=tf(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;Aae.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||rt("Missing valid scale for legend.");const p=Cnn(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=pn(t.add(kp(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=pn(t.add(atn(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===UF?(h=[Qtn(e,c,n,r.gradient),jwe(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${Fw(i.gradientLength())})/100))`)):p===qX?h=[Jtn(e,c,n,r.gradient,v),jwe(e,n,r.labels,v)]:(f=nnn(e,n),h=[tnn(e,n,r,v,Fw(f.columns))],d.size=Dnn(e,t,h[0].marks)),h=[T3({role:Een,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(cnn(e,n,r.title,g)),f7(T3({role:wen,from:g,encode:_A(Ann(i,e,n),s,pP),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function Cnn(e,t){let n=e.type||Bwe;return!e.type&&Tnn(e)===1&&(e.fill||e.stroke)&&(n=Vse(t)?UF:aX(t)?qX:Bwe),n!==UF?n:aX(t)?qX:UF}function Tnn(e){return Aae.reduce((t,n)=>t+(e[n]?1:0),0)}function Ann(e,t,n){const r={enter:{},update:{}};return hu(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function Dnn(e,t,n){const r=Fw(Gwe("size",e,n)),i=Fw(Gwe("strokeWidth",e,n)),s=Fw(Inn(n[1].encode,t,hP));return t0(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Gwe(e,t,n){return t[e]?`scale("${t[e]}",datum)`:G7e(e,n[0].encode)}function Inn(e,t,n){return G7e("fontSize",e)||Ktn("fontSize",t,n)}const knn=`item.orient==="${EA}"?-90:item.orient==="${SA}"?90:0`;function Rnn(e,t){e=Bt(e)?{text:e}:e;const n=tf(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=pn(t.add(kp(null,[l])));return u.push(Onn(e,n,Nnn(e),c)),e.subtitle&&u.push(Fnn(e,n,r.subtitle,c)),f7(T3({role:Aen,from:c,encode:Pnn(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function Nnn(e){const t=e.encode;return t&&t.title||lr({name:e.name,interactive:e.interactive,style:e.style},t)}function Pnn(e,t){const n={enter:{},update:{}};return hu(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:Iae},angle:{signal:knn},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),_A(n,t,pP)}function Onn(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return hu(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Gf({type:sE,role:Den,style:jtn,from:r,encode:o},n)}function Fnn(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return hu(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Gf({type:sE,role:Ien,style:Utn,from:r,encode:o},n)}function Mnn(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Nae(r,t))}),e.on&&e.on.forEach(r=>{J7e(r,t,e.name)}),t.addDataPipeline(e.name,$nn(e,t,n))}function $nn(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?da(e.values)||BF(e.format)?(r.push(Ywe(t,e)),r.push(i=vx())):r.push(i=vx({$ingest:e.values,$format:e.format})):e.url?BF(e.url)||BF(e.format)?(r.push(Ywe(t,e)),r.push(i=vx())):r.push(i=vx({$request:e.url,$format:e.format})):e.source&&(i=a=Lt(e.source).map(d=>pn(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=vx()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=gtn({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,vx())),i||r.push(vx()),r.push(iE({})),r}function vx(e){const t=kp({},e);return t.metadata={source:!0},t}function Ywe(e,t){return utn({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const Z7e=e=>e===eb||e===Rp,d7=(e,t,n)=>da(e)?Unn(e.signal,t,n):e===EA||e===Rp?t:n,Ma=(e,t,n)=>da(e)?Bnn(e.signal,t,n):Z7e(e)?t:n,sp=(e,t,n)=>da(e)?jnn(e.signal,t,n):Z7e(e)?n:t,eje=(e,t,n)=>da(e)?znn(e.signal,t,n):e===Rp?{value:t}:{value:n},Lnn=(e,t,n)=>da(e)?Vnn(e.signal,t,n):e===SA?{value:t}:{value:n},Bnn=(e,t,n)=>tje(`${e} === '${Rp}' || ${e} === '${eb}'`,t,n),jnn=(e,t,n)=>tje(`${e} !== '${Rp}' && ${e} !== '${eb}'`,t,n),Unn=(e,t,n)=>Pae(`${e} === '${EA}' || ${e} === '${Rp}'`,t,n),znn=(e,t,n)=>Pae(`${e} === '${Rp}'`,t,n),Vnn=(e,t,n)=>Pae(`${e} === '${SA}'`,t,n),tje=(e,t,n)=>(t=t!=null?Fa(t):t,n=n!=null?Fa(n):n,Kwe(t)&&Kwe(n)?(t=t?t.signal||Nt(t.value):null,n=n?n.signal||Nt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[lr({test:e},t)].concat(n||[])),Kwe=e=>e==null||Object.keys(e).length===1,Pae=(e,t,n)=>({signal:`${e} ? (${iS(t)}) : (${iS(n)})`}),Hnn=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${EA}' ? (${iS(r)}) : `:"")+(n!=null?`${e} === '${eb}' ? (${iS(n)}) : `:"")+(i!=null?`${e} === '${SA}' ? (${iS(i)}) : `:"")+(t!=null?`${e} === '${Rp}' ? (${iS(t)}) : `:"")+"(null)"}),iS=e=>da(e)?e.signal:e==null?null:Nt(e),qnn=(e,t)=>t===0?0:da(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},FS=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function l2(e,t,n,r){let i;if(t&&vn(t,e))return t[e];if(vn(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[Tae][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[hP][i]}return null}function Xwe(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function Wnn(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(da(o)){const f=Xwe([n.axisX,n.axisY]),d=Xwe([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=Ma(o,l2(l,n.axisX,i,r),l2(l,n.axisY,i,r));u={};for(l of d)u[l]=Hnn(o.signal,l2(l,n.axisTop,i,r),l2(l,n.axisBottom,i,r),l2(l,n.axisLeft,i,r),l2(l,n.axisRight,i,r))}else a=o===Rp||o===eb?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?lr({},i,a,u,s):i}function Gnn(e,t,n,r){const i=tf(e,t),s=e.orient;let o,a;const u={enter:o={opacity:ti},update:a={opacity:Fd},exit:{opacity:ti}};hu(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=Qwe(e,0),c=Qwe(e,1);return o.x=a.x=Ma(s,l,ti),o.x2=a.x2=Ma(s,c),o.y=a.y=sp(s,l,ti),o.y2=a.y2=sp(s,c),Gf({type:Dae,role:gen,from:r,encode:u},n)}function Qwe(e,t){return{scale:e.scale,range:t}}function Ynn(e,t,n,r,i){const s=tf(e,t),o=e.orient,a=e.gridScale,u=d7(o,1,-1),l=Knn(e.offset,u);let c,f,d;const h={enter:c={opacity:ti},update:d={opacity:Fd},exit:f={opacity:ti}};hu(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Od,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=Ma(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:lr(m,{mult:u,offset:l});return c.x=d.x=Ma(o,p,g),c.y=d.y=sp(o,p,g),c.x2=d.x2=sp(o,y),c.y2=d.y2=Ma(o,y),f.x=Ma(o,p),f.y=sp(o,p),Gf({type:Dae,role:yen,key:Od,from:r,encode:h},n)}function Knn(e,t){if(t!==1)if(!jt(e))e=da(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=lr({},e);for(;n.mult!=null;)if(jt(n.mult))n=n.mult=lr({},n.mult);else return n.mult=da(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function Xnn(e,t,n,r,i,s){const o=tf(e,t),a=e.orient,u=d7(a,-1,1);let l,c,f;const d={enter:l={opacity:ti},update:f={opacity:Fd},exit:c={opacity:ti}};hu(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=Fa(i);h.mult=u;const p={scale:e.scale,field:Od,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=Ma(a,ti,p),f.y2=l.y2=Ma(a,h),c.x=Ma(a,p),f.x=l.x=sp(a,ti,p),f.x2=l.x2=sp(a,h),c.y=sp(a,p),Gf({type:Dae,role:ben,key:Od,from:r,encode:d},n)}function mq(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Qnn(e,t,n,r,i,s){const o=tf(e,t),a=e.orient,u=e.scale,l=d7(a,-1,1),c=Fw(o("labelFlush")),f=Fw(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=Fa(i);g.mult=l,g.offset=Fa(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:Od,band:.5,offset:Y7e(s.offset,o("labelOffset"))},v=Ma(a,p?mq(u,c,'"left"','"right"','"center"'):{value:"center"},Lnn(a,"left","right")),b=Ma(a,eje(a,"bottom","top"),p?mq(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),_=mq(u,c,`-(${f})`,f,0);p=p&&f;const w={opacity:ti,x:Ma(a,y,g),y:sp(a,y,g)},S={enter:w,update:m={opacity:Fd,text:{field:Cae},x:w.x,y:w.y,align:v,baseline:b},exit:{opacity:ti,x:w.x,y:w.y}};hu(S,{dx:!d&&p?Ma(a,_):null,dy:!h&&p?sp(a,_):null}),hu(S,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const T=o("labelBound");let A=o("labelOverlap");return A=A||T?{separation:o("labelSeparation"),method:A,order:"datum.index",bound:T?{scale:u,orient:a,tolerance:T}:null}:void 0,m.align!==v&&(m.align=FS(m.align,v)),m.baseline!==b&&(m.baseline=FS(m.baseline,b)),Gf({type:sE,role:ven,style:hP,key:Od,from:r,encode:S,overlap:A},n)}function Jnn(e,t,n,r){const i=tf(e,t),s=e.orient,o=d7(s,-1,1);let a,u;const l={enter:a={opacity:ti,anchor:Fa(i("titleAnchor",null)),align:{signal:Iae}},update:u=lr({},a,{opacity:Fd,text:Fa(e.title)}),exit:{opacity:ti}},c={signal:`lerp(range("${e.scale}"), ${l7(0,1,.5)})`};return u.x=Ma(s,c),u.y=sp(s,c),a.angle=Ma(s,ti,qnn(o,90)),a.baseline=Ma(s,eje(s,eb,Rp),{value:eb}),u.angle=a.angle,u.baseline=a.baseline,hu(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),Znn(i,s,l,n),l.update.align=FS(l.update.align,a.align),l.update.angle=FS(l.update.angle,a.angle),l.update.baseline=FS(l.update.baseline,a.baseline),Gf({type:sE,role:xen,style:Tae,from:r,encode:l},n)}function Znn(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=FS(Fa(a),n.update[u]),!1):!D2(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?Fa(o):Ma(t,Fa(o),Fa(s))}function ern(e,t){const n=Wnn(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=tf(e,n),l=Xtn(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=pn(t.add(kp({},[c]))),d=pn(t.add(ttn({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(Ynn(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(Xnn(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(Qnn(e,n,r.labels,d,p,l))),c.domain&&h.push(Gnn(e,n,r.domain,f)),c.title&&h.push(Jnn(e,n,r.title,f)),f7(T3({role:men,from:f,encode:_A(trn(u,e),i,pP),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function trn(e,t){const n={enter:{},update:{}};return hu(n,{orient:e("orient"),offset:e("offset")||0,position:Ph(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function nje(e,t,n){const r=Lt(e.signals),i=Lt(e.scales);return n||r.forEach(s=>O7e(s,t)),Lt(e.projections).forEach(s=>Ptn(s,t)),i.forEach(s=>wtn(s,t)),Lt(e.data).forEach(s=>Mnn(s,t)),i.forEach(s=>_tn(s,t)),(n||r).forEach(s=>etn(s,t)),Lt(e.axes).forEach(s=>ern(s,t)),Lt(e.marks).forEach(s=>f7(s,t)),Lt(e.legends).forEach(s=>Snn(s,t)),e.title&&Rnn(e.title,t),t.parseLambdas(),t}const nrn=e=>_A({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function rrn(e,t){const n=t.config,r=pn(t.root=t.add(h$())),i=irn(e,n);i.forEach(l=>O7e(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(kp()),o=t.add($7e(P7e(nrn(e.encode),u7,wae,e.style,t,{pulse:pn(s)}))),a=t.add(j7e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:pn(o)}));t.operators.pop(),t.pushState(pn(o),pn(a),null),nje(e,t,i),t.operators.push(a);let u=t.add(M7e({mark:r,pulse:pn(a)}));return u=t.add(B7e({pulse:pn(u)})),u=t.add(iE({pulse:pn(u)})),t.addData("root",new d_(t,s,s,u)),t}function WD(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function irn(e,t){const n=o=>Ph(e[o],t[o]),r=[WD("background",n("background")),WD("autosize",den(n("autosize"))),WD("padding",pen(n("padding"))),WD("width",n("width")||0),WD("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return Lt(e.signals).forEach(o=>{vn(i,o.name)?o=lr(i[o.name],o):r.push(o),s[o.name]=o}),Lt(t.signals).forEach(o=>{!vn(s,o.name)&&!vn(i,o.name)&&r.push(o)}),r}function rje(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Jwe(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}rje.prototype=Jwe.prototype={parse(e){return nje(e,this)},fork(){return new Jwe(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof jX?pn(e):e;return this.add(mtn({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(pn(this.add(iE({pulse:e})))),this._parent.push(t),this._lookup.push(n?pn(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Kr(this._parent)},encode(){return Kr(this._encode)},lookup(){return Kr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Bt(e))return S3(e,t);e.signal||rt("Unsupported field reference: "+Nt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=pn(this.add(stn(i)))}return r},compareRef(e){let t=!1;const n=s=>da(s)?(t=!0,this.signalRef(s.signal)):Hen(s)?(t=!0,this.exprRef(s.expr)):s,r=Lt(e.field).map(n),i=Lt(e.order).map(n);return t?pn(this.add(Lwe({fields:r,orders:i}))):Mwe(r,i)},keyRef(e,t){let n=!1;const r=s=>da(s)?(n=!0,pn(i[s.signal])):s,i=this.signals;return e=Lt(e).map(r),n?pn(this.add(otn({fields:e,flat:t}))):jen(e,t)},sortRef(e){if(!e)return e;const t=o7(e.op,e.field),n=e.order||Uen;return n.signal?pn(this.add(Lwe({fields:t,orders:this.signalRef(n.signal)}))):Mwe(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return vn(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&rt("Duplicate signal name: "+Nt(e));const n=t instanceof jX?t:this.add(h$(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||rt("Unrecognized signal name: "+Nt(e)),this.signals[e]},signalRef(e){return this.signals[e]?pn(this.signals[e]):(vn(this.lambdas,e)||(this.lambdas[e]=this.add(h$(null))),pn(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=t0(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!jt(e)?e:this.signalRef(e.signal||Oae(e))},exprRef(e,t){const n={expr:t0(e,this)};return t&&(n.expr.$name=t),pn(this.add(rtn(n)))},addBinding(e,t){this.bindings||rt("Nested signals do not support binding: "+Nt(e)),this.bindings.push(lr({signal:e},t))},addScaleProj(e,t){vn(this.scales,e)&&rt("Duplicate scale or projection name: "+Nt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,ytn(t))},addProjection(e,t){this.addScaleProj(e,ptn(t))},getScale(e){return this.scales[e]||rt("Unrecognized scale name: "+Nt(e)),this.scales[e]},scaleRef(e){return pn(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return vn(this.data,e)&&rt("Duplicate data set name: "+Nt(e)),this.data[e]=t},getData(e){return this.data[e]||rt("Undefined data set name: "+Nt(e)),this.data[e]},addDataPipeline(e,t){return vn(this.data,e)&&rt("Duplicate data set name: "+Nt(e)),this.addData(e,d_.fromEntries(this,t))}};function Oae(e){return(at(e)?srn:orn)(e)}function srn(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(jt(i)?i.signal||Oae(i):Nt(i))}return n+"]"}function orn(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Nt(r)+":"+(jt(i)?i.signal||Oae(i):Nt(i));return t+"}"}function arn(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function urn(e,t,n){return jt(e)||rt("Input Vega specification must be an object."),t=pA(arn(),t,e.config),rrn(e,new rje(t,n)).toRuntime()}var lrn="5.29.0";lr(UC,uHt,XGt,DYt,sKt,dKt,BKt,vKt,UKt,qKt,tXt,uXt);const crn=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Go,CanvasHandler:uP,CanvasRenderer:t$,DATE:Gc,DAY:Hu,DAYOFYEAR:e0,Dataflow:OS,Debug:A5e,Error:Die,EventStream:D9,Gradient:HLe,GroupItem:U9,HOURS:Hf,Handler:poe,HybridHandler:FBe,HybridRenderer:vX,Info:T5e,Item:j9,MILLISECONDS:yp,MINUTES:qf,MONTH:Ku,Marks:Wf,MultiPulse:Yie,None:C5e,Operator:as,Parameters:A9,Pulse:mv,QUARTER:Wc,RenderType:W1,Renderer:aP,ResourceLoader:QLe,SECONDS:Hd,SVGHandler:_Be,SVGRenderer:xoe,SVGStringRenderer:OBe,Scenegraph:pBe,TIME_UNITS:jie,Transform:Ye,View:w7e,WEEK:ca,Warn:Iie,YEAR:lu,accessor:ef,accessorFields:Yu,accessorName:po,array:Lt,ascending:w9,bandwidthNRD:Jie,bin:M$e,bootstrapCI:$$e,boundClip:qBe,boundContext:rP,boundItem:hX,boundMark:cBe,boundStroke:Py,changeset:tE,clampRange:L5e,codegenExpression:G9e,compare:Oie,constant:il,cumulativeLogNormal:ise,cumulativeNormal:k9,cumulativeUniform:use,dayofyear:X5e,debounce:Fie,defaultLocale:Vie,definition:P$e,densityLogNormal:rse,densityNormal:Zie,densityUniform:ase,domChild:ua,domClear:Cd,domCreate:H1,domFind:hoe,dotbin:L$e,error:rt,expressionFunction:Oo,extend:lr,extent:Zm,extentIndex:B5e,falsy:f1,fastmap:gA,field:zd,flush:j5e,font:W9,fontFamily:oP,fontSize:v0,format:EF,formatLocale:z5,formats:Wie,hasOwnProperty:vn,id:qN,identity:rl,inferType:_$e,inferTypes:E$e,ingest:Ii,inherits:Ot,inrange:tS,interpolate:Hse,interpolateColors:L9,interpolateRange:kLe,intersect:UBe,intersectBoxLine:nS,intersectPath:Jse,intersectPoint:Zse,intersectRule:ZLe,isArray:at,isBoolean:Ub,isDate:pv,isFunction:cr,isIterable:U5e,isNumber:fi,isObject:jt,isRegExp:z5e,isString:Bt,isTuple:C9,key:Mie,lerp:V5e,lineHeight:Qv,loader:E9,locale:x$e,logger:kie,lruCache:H5e,markup:boe,merge:q5e,mergeConfig:pA,multiLineOffset:coe,one:hA,pad:W5e,panLinear:N5e,panLog:P5e,panPow:O5e,panSymlog:F5e,parse:urn,parseExpression:aae,parseSelector:Vb,path:wB,pathCurves:Kse,pathEqual:WBe,pathParse:qC,pathRectangle:GLe,pathRender:g3,pathSymbols:WLe,pathTrail:YLe,peek:Kr,point:Y9,projection:Noe,quantileLogNormal:sse,quantileNormal:R9,quantileUniform:lse,quantiles:Xie,quantizeInterpolator:RLe,quarter:M5e,quartiles:Qie,get random(){return qd},randomInteger:dVt,randomKDE:tse,randomLCG:fVt,randomLogNormal:j$e,randomMixture:U$e,randomNormal:ese,randomUniform:z$e,read:T$e,regressionConstant:cse,regressionExp:H$e,regressionLinear:fse,regressionLoess:G$e,regressionLog:V$e,regressionPoly:W$e,regressionPow:q$e,regressionQuad:dse,renderModule:K9,repeat:PI,resetDefaultLocale:uzt,resetSVGClipId:XLe,resetSVGDefIds:pGt,responseType:C$e,runtimeContext:u7e,sampleCurve:P9,sampleLogNormal:nse,sampleNormal:I9,sampleUniform:ose,scale:xi,sceneEqual:woe,sceneFromJSON:dBe,scenePickVisit:G5,sceneToJSON:fBe,sceneVisit:vp,sceneZOrder:eoe,scheme:qse,serializeXML:kBe,setHybridRendererOptions:cGt,setRandom:lVt,span:WN,splitAccessPath:y0,stringValue:Nt,textMetrics:kf,timeBin:h$e,timeFloor:r$e,timeFormatLocale:h3,timeInterval:yA,timeOffset:o$e,timeSequence:l$e,timeUnitSpecifier:K5e,timeUnits:Uie,toBoolean:$ie,toDate:Lie,toNumber:qu,toSet:gp,toString:Bie,transform:O$e,transforms:UC,truncate:G5e,truthy:Vd,tupleid:mn,typeParsers:iX,utcFloor:i$e,utcInterval:vA,utcOffset:a$e,utcSequence:c$e,utcdayofyear:Z5e,utcquarter:$5e,utcweek:e$e,version:lrn,visitArray:w1,week:Q5e,writeConfig:mA,zero:R1,zoomLinear:Rie,zoomLog:Nie,zoomPow:U5,zoomSymlog:Pie},Symbol.toStringTag,{value:"Module"}));function frn(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var drn={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},hrn={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},prn={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const mrn=Array.prototype.slice,bx=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,mrn.call(t,1))},grn=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var yrn={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:grn,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return bx("join",arguments)},indexof:function(){return bx("indexOf",arguments)},lastindexof:function(){return bx("lastIndexOf",arguments)},slice:function(){return bx("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return bx("substring",arguments,String)},split:function(){return bx("split",arguments,String)},replace:function(){return bx("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const vrn=["view","item","group","xy","x","y"],GX=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&GX.add(setImmediate);const brn={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:drn[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),GX.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||yrn[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>hrn[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>prn[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,GX.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function GD(e,t,n,r,i,s){const o=a=>brn[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,vrn.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var xrn={operator(e,t){const n=t.ast,r=e.functions;return i=>GD(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>GD(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>GD(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return GD(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=GD(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&frn(o,r,s),l}}};const wrn="vega-lite",_rn='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',Ern="5.18.1",Srn=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],Crn="https://vega.github.io/vega-lite/",Trn="Vega-Lite is a concise high-level language for interactive visualization.",Arn=["vega","chart","visualization"],Drn="build/vega-lite.js",Irn="build/vega-lite.min.js",krn="build/vega-lite.min.js",Rrn="build/src/index",Nrn="build/src/index.d.ts",Prn={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},Orn=["bin","build","src","vega-lite*","tsconfig.json"],Frn={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},Mrn={type:"git",url:"https://github.com/vega/vega-lite.git"},$rn="BSD-3-Clause",Lrn={url:"https://github.com/vega/vega-lite/issues"},Brn={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},jrn={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},Urn={vega:"^5.24.0"},zrn={node:">=18"},Vrn="yarn@1.22.19",Hrn={name:wrn,author:_rn,version:Ern,collaborators:Srn,homepage:Crn,description:Trn,keywords:Arn,main:Drn,unpkg:Irn,jsdelivr:krn,module:Rrn,types:Nrn,bin:Prn,files:Orn,scripts:Frn,repository:Mrn,license:$rn,bugs:Lrn,devDependencies:Brn,dependencies:jrn,peerDependencies:Urn,engines:zrn,packageManager:Vrn};function Fae(e){return!!e.or}function Mae(e){return!!e.and}function $ae(e){return!!e.not}function VF(e,t){if($ae(e))VF(e.not,t);else if(Mae(e))for(const n of e.and)VF(n,t);else if(Fae(e))for(const n of e.or)VF(n,t);else t(e)}function MS(e,t){return $ae(e)?{not:MS(e.not,t)}:Mae(e)?{and:e.and.map(n=>MS(n,t))}:Fae(e)?{or:e.or.map(n=>MS(n,t))}:t(e)}const zn=structuredClone;function ije(e){throw new Error(e)}function XC(e,t){const n={};for(const r of t)vn(e,r)&&(n[r]=e[r]);return n}function Mc(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Ji(e)).join(",")})`};function Fr(e){if(fi(e))return e;const t=Bt(e)?e:Ji(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function YX(e){return e===!1||e===null}function Mr(e,t){return e.includes(t)}function h_(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function Lae(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function sje(e,...t){for(const n of t)qrn(e,n??{});return e}function qrn(e,t){for(const n of xt(t))mA(e,n,t[n],!0)}function wm(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function Wrn(e,t){const n=xt(e),r=xt(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function oje(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Bae(e,t){for(const n of e)if(t.has(n))return!0;return!1}function KX(e){const t=new Set;for(const n of e){const i=y0(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function jae(e,t){return e===void 0||t===void 0?!0:Bae(KX(e),KX(t))}function Qi(e){return xt(e).length===0}const xt=Object.keys,cu=Object.values,tb=Object.entries;function A3(e){return e===!0||e===!1}function Us(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function $k(e,t){return $ae(e)?`!(${$k(e.not,t)})`:Mae(e)?`(${e.and.map(n=>$k(n,t)).join(") && (")})`:Fae(e)?`(${e.or.map(n=>$k(n,t)).join(") || (")})`:t(e)}function p$(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&p$(e[n],t)&&delete e[n],Qi(e)}function mP(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Uae(e,t="datum"){const n=y0(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Nt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function aje(e,t="datum"){return`${t}[${Nt(y0(e).join("."))}]`}function Grn(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Wd(e){return`${y0(e).map(Grn).join("\\.")}`}function p_(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function CA(e){return`${y0(e).join(".")}`}function QC(e){return e?y0(e).length:0}function Io(...e){for(const t of e)if(t!==void 0)return t}let uje=42;function lje(e){const t=++uje;return e?String(e)+t:t}function Yrn(){uje=42}function cje(e){return fje(e)?e:`__${e}`}function fje(e){return e.startsWith("__")}function D3(e){if(e!==void 0)return(e%360+360)%360}function h7(e){return fi(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Zwe=Object.getPrototypeOf(structuredClone({}));function Cf(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Cf(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Cf(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Zwe.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Zwe.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Cf(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Ji(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const $g="row",Lg="column",p7="facet",zs="x",Va="y",Np="x2",w0="y2",Hb="xOffset",TA="yOffset",Pp="radius",Fy="radius2",ih="theta",My="theta2",Op="latitude",Fp="longitude",Mp="latitude2",Gd="longitude2",Yc="color",_0="fill",E0="stroke",Kc="shape",$y="size",oE="angle",Ly="opacity",qb="fillOpacity",Wb="strokeOpacity",Gb="strokeWidth",Yb="strokeDash",gP="text",JC="order",yP="detail",m7="key",m_="tooltip",g7="href",y7="url",v7="description",Krn={x:1,y:1,x2:1,y2:1},dje={theta:1,theta2:1,radius:1,radius2:1};function hje(e){return e in dje}const zae={longitude:1,longitude2:1,latitude:1,latitude2:1};function pje(e){switch(e){case Op:return"y";case Mp:return"y2";case Fp:return"x";case Gd:return"x2"}}function mje(e){return e in zae}const Xrn=xt(zae),Vae={...Krn,...dje,...zae,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function $S(e){return e===Yc||e===_0||e===E0}const gje={row:1,column:1,facet:1},Nd=xt(gje),Hae={...Vae,...gje},Qrn=xt(Hae),{order:QTn,detail:JTn,tooltip:ZTn,...Jrn}=Hae,{row:eAn,column:tAn,facet:nAn,...Zrn}=Jrn;function ein(e){return!!Zrn[e]}function yje(e){return!!Hae[e]}const tin=[Np,w0,Mp,Gd,My,Fy];function vje(e){return aE(e)!==e}function aE(e){switch(e){case Np:return zs;case w0:return Va;case Mp:return Op;case Gd:return Fp;case My:return ih;case Fy:return Pp}return e}function nb(e){if(hje(e))switch(e){case ih:return"startAngle";case My:return"endAngle";case Pp:return"outerRadius";case Fy:return"innerRadius"}return e}function S0(e){switch(e){case zs:return Np;case Va:return w0;case Op:return Mp;case Fp:return Gd;case ih:return My;case Pp:return Fy}}function Xc(e){switch(e){case zs:case Np:return"width";case Va:case w0:return"height"}}function bje(e){switch(e){case zs:return"xOffset";case Va:return"yOffset";case Np:return"x2Offset";case w0:return"y2Offset";case ih:return"thetaOffset";case Pp:return"radiusOffset";case My:return"theta2Offset";case Fy:return"radius2Offset"}}function qae(e){switch(e){case zs:return"xOffset";case Va:return"yOffset"}}function nin(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const rin=xt(Vae),{x:rAn,y:iAn,x2:sAn,y2:oAn,xOffset:aAn,yOffset:uAn,latitude:lAn,longitude:cAn,latitude2:fAn,longitude2:dAn,theta:hAn,theta2:pAn,radius:mAn,radius2:gAn,...Wae}=Vae,iin=xt(Wae),Gae={x:1,y:1},C0=xt(Gae);function ko(e){return e in Gae}const Yae={theta:1,radius:1},sin=xt(Yae);function b7(e){return e==="width"?zs:Va}const xje={xOffset:1,yOffset:1};function vP(e){return e in xje}const{text:yAn,tooltip:vAn,href:bAn,url:xAn,description:wAn,detail:_An,key:EAn,order:SAn,...wje}=Wae,oin=xt(wje);function ain(e){return!!Wae[e]}function uin(e){switch(e){case Yc:case _0:case E0:case $y:case Kc:case Ly:case Gb:case Yb:return!0;case qb:case Wb:case oE:return!1}}const _je={...Gae,...Yae,...xje,...wje},x7=xt(_je);function By(e){return!!_je[e]}function lin(e,t){return fin(e)[t]}const Eje={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:CAn,...cin}=Eje;function fin(e){switch(e){case Yc:case _0:case E0:case v7:case yP:case m7:case m_:case g7:case JC:case Ly:case qb:case Wb:case Gb:case p7:case $g:case Lg:return Eje;case zs:case Va:case Hb:case TA:case Op:case Fp:return cin;case Np:case w0:case Mp:case Gd:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case $y:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Yb:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Kc:return{point:"always",geoshape:"always"};case gP:return{text:"always"};case oE:return{point:"always",square:"always",text:"always"};case y7:return{image:"always"};case ih:return{text:"always",arc:"always"};case Pp:return{text:"always",arc:"always"};case My:case Fy:return{arc:"always"}}}function gq(e){switch(e){case zs:case Va:case ih:case Pp:case Hb:case TA:case $y:case oE:case Gb:case Ly:case qb:case Wb:case Np:case w0:case My:case Fy:return;case p7:case $g:case Lg:case Kc:case Yb:case gP:case m_:case g7:case y7:case v7:return"discrete";case Yc:case _0:case E0:return"flexible";case Op:case Fp:case Mp:case Gd:case yP:case m7:case JC:return}}const din={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},hin={count:1,min:1,max:1};function dy(e){return!!e&&!!e.argmin}function Kb(e){return!!e&&!!e.argmax}function Kae(e){return Bt(e)&&!!din[e]}const pin=new Set(["count","valid","missing","distinct"]);function Sje(e){return Bt(e)&&pin.has(e)}function min(e){return Bt(e)&&Mr(["min","max"],e)}const gin=new Set(["count","sum","distinct","valid","missing"]),yin=new Set(["mean","average","median","q1","q3","min","max"]);function Cje(e){return Ub(e)&&(e=N7(e,void 0)),"bin"+xt(e).map(t=>w7(e[t])?Us(`_${t}_${tb(e[t])}`):Us(`_${t}_${e[t]}`)).join("")}function ms(e){return e===!0||uE(e)&&!e.binned}function eu(e){return e==="binned"||uE(e)&&e.binned===!0}function uE(e){return jt(e)}function w7(e){return e==null?void 0:e.param}function e_e(e){switch(e){case $g:case Lg:case $y:case Yc:case _0:case E0:case Gb:case Ly:case qb:case Wb:case Kc:return 6;case Yb:return 4;default:return 10}}function bP(e){return!!(e!=null&&e.expr)}function vc(e){const t=xt(e||{}),n={};for(const r of t)n[r]=vf(e[r]);return n}function Tje(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=XC(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function S1(e){return Bt(e)||at(e)&&Bt(e[0])}function rn(e){return!!(e!=null&&e.signal)}function Xb(e){return!!e.step}function vin(e){return at(e)?!1:"fields"in e&&!("data"in e)}function bin(e){return at(e)?!1:"fields"in e&&"data"in e}function Tg(e){return at(e)?!1:"field"in e&&"data"in e}const xin={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},win=xt(xin),_in={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},XX=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function Aje(e){const t=at(e.condition)?e.condition.map(t_e):t_e(e.condition);return{...vf(e),condition:t}}function vf(e){if(bP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function t_e(e){if(bP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function _s(e){if(bP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return rn(e)?e:e!==void 0?{value:e}:void 0}function Ein(e){return rn(e)?e.signal:Nt(e)}function n_e(e){return rn(e)?e.signal:Nt(e.value)}function Xh(e){return rn(e)?e.signal:e==null?null:Nt(e)}function Sin(e,t,n){for(const r of n){const i=hy(r,t.markDef,t.config);i!==void 0&&(e[r]=_s(i))}return e}function Dje(e){return[].concat(e.type,e.style??[])}function Di(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:hy(e,t,n,r)}function hy(e,t,n,{vgChannel:r}={}){return Io(r?m$(e,t,n.style):void 0,m$(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function m$(e,t,n){return Ije(e,Dje(t),n)}function Ije(e,t,n){t=Lt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function kje(e,t){return Lt(e).reduce((n,r)=>(n.field.push(Pt(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function Rje(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Cf(i,r))return;n.push(r)}),n}function Nje(e,t){return Cf(e,t)||!t?e:e?[...Lt(e),...Lt(t)].join(", "):t}function Pje(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((S1(n)||rn(n))&&(S1(r)||rn(r)))return{explicit:e.explicit,value:Nje(n,r)};if(S1(n)||rn(n))return{explicit:e.explicit,value:n};if(S1(r)||rn(r))return{explicit:e.explicit,value:r};if(!S1(n)&&!rn(n)&&!S1(r)&&!rn(r))return{explicit:e.explicit,value:Rje(n,r)};throw new Error("It should never reach here")}function Xae(e){return`Invalid specification ${Ji(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Cin='Autosize "fit" only works for single views and layered views.';function r_e(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function i_e(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function s_e(e){return e?`Dropping "fit-${e}" because spec has discrete ${Xc(e)}.`:'Dropping "fit" because spec has discrete size.'}function Qae(e){return`Unknown field for ${e}. Cannot calculate view size.`}function o_e(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function Tin(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function Ain(e){return`The "nearest" transform is not supported for ${e} marks.`}function Oje(e){return`Selection not supported for ${e} yet.`}function Din(e){return`Cannot find a selection named "${e}".`}const Iin="Scale bindings are currently only supported for scales with unbinned, continuous domains.",kin="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",Rin="Legend bindings are only supported for selections over an individual field or encoding channel.";function Nin(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function Pin(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const Oin="The same selection must be used to override scale domains in a layered view.",Fin='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Min(e){return`Unknown repeated value "${e}".`}function a_e(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const $in="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Lin(e){return`Unrecognized parse "${e}".`}function u_e(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Bin="Attempt to add the same child twice.";function jin(e){return`Ignoring an invalid transform: ${Ji(e)}.`}const Uin='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function l_e(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function zin(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Ji(t)} is overridden by a child projection ${Ji(n)}.`}const Vin="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Hin(e){return`${e}Offset dropped because ${e} is continuous`}function qin(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Ji(n)}}.`}function Fje(e){return`Invalid field type "${e}".`}function Win(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Gin(e){return`Invalid aggregation operator "${e}".`}function Mje(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function Yin(e){return`Position range does not support relative band size for ${e}.`}function QX(e,t){return`Dropping ${Ji(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const Kin="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function _7(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function Xin(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function Qin(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function Jin(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Zin(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function yq(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function esn(e){return`The ${e} for range marks cannot be an expression`}function tsn(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function nsn(e,t){return`Specified orient "${e}" overridden with "${t}".`}function rsn(e){return`Cannot use the scale property "${e}" with non-color channel.`}function isn(e){return`Cannot use the relative band size with ${e} scale.`}function ssn(e){return`Using unaggregated domain with raw field has no effect (${Ji(e)}).`}function osn(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function asn(e){return`Unaggregated domain is currently unsupported for log scale (${Ji(e)}).`}function usn(e){return`Cannot apply size to non-oriented mark "${e}".`}function lsn(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function csn(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function $je(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function Lje(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function fsn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ji(n)} and ${Ji(r)}). Using ${Ji(n)}.`}function dsn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ji(n)} and ${Ji(r)}). Using the union of the two domains.`}function hsn(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function psn(e){return`Dropping sort property ${Ji(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const c_e="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",msn="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",gsn="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",ysn="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function vsn(e){return`Cannot stack "${e}" if there is already "${e}2".`}function bsn(e){return`Stack is applied to a non-linear scale (${e}).`}function xsn(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function g$(e,t){return`Invalid ${e}: ${Ji(t)}.`}function wsn(e){return`Dropping day from datetime ${Ji(e)} as day cannot be combined with other units.`}function _sn(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function Esn(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function Ssn(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function f_e(e){return`1D error band does not support ${e}.`}function Bje(e){return`Channel ${e} is required for "binned" bin.`}function Csn(e){return`Channel ${e} should not be used with "binned" bin.`}function Tsn(e){return`Domain for ${e} is required for threshold scale.`}const jje=kie(Iie);let ZC=jje;function Asn(e){return ZC=e,ZC}function Dsn(){return ZC=jje,ZC}function Tt(...e){ZC.warn(...e)}function Isn(...e){ZC.debug(...e)}function lE(e){if(e&&jt(e)){for(const t of Zae)if(t in e)return!0}return!1}const Uje=["january","february","march","april","may","june","july","august","september","october","november","december"],ksn=Uje.map(e=>e.substr(0,3)),zje=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Rsn=zje.map(e=>e.substr(0,3));function Nsn(e){if(h7(e)&&(e=+e),fi(e))return e>4&&Tt(g$("quarter",e)),e-1;throw new Error(g$("quarter",e))}function Psn(e){if(h7(e)&&(e=+e),fi(e))return e-1;{const t=e.toLowerCase(),n=Uje.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=ksn.indexOf(r);if(i!==-1)return i;throw new Error(g$("month",e))}}function Osn(e){if(h7(e)&&(e=+e),fi(e))return e%7;{const t=e.toLowerCase(),n=zje.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Rsn.indexOf(r);if(i!==-1)return i;throw new Error(g$("day",e))}}function Jae(e,t){const n=[];if(t&&e.day!==void 0&&xt(e).length>1&&(Tt(wsn(e)),e=zn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?Psn(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?Nsn(e.quarter):e.quarter;n.push(fi(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?Osn(e.day):e.day;n.push(fi(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function g_(e){const n=Jae(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Fsn(e){const n=Jae(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Msn(e){const t=Jae(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const Vje={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Zae=xt(Vje);function $sn(e){return!!Vje[e]}function cE(e){return jt(e)?e.binned:Hje(e)}function Hje(e){return e&&e.startsWith("binned")}function eue(e){return e.startsWith("utc")}function Lsn(e){return e.substring(3)}const Bsn={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function E7(e){return Zae.filter(t=>Wje(e,t))}function qje(e){const t=E7(e);return t[t.length-1]}function Wje(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function jsn(e,t,{end:n}={end:!1}){const r=Uae(t),i=eue(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of Zae)Wje(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),Fsn(a)}function Gje(e){if(!e)return;const t=E7(e);return`timeUnitSpecifier(${Ji(t)}, ${Ji(Bsn)})`}function Usn(e,t,n){if(!e)return;const r=Gje(e);return`${n||eue(e)?"utc":"time"}Format(${t}, ${r})`}function La(e){if(!e)return;let t;return Bt(e)?Hje(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:jt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),eue(t.unit)&&(t.utc=!0,t.unit=Lsn(t.unit)),t}function zsn(e){const{utc:t,...n}=La(e);return n.unit?(t?"utc":"")+xt(n).map(r=>Us(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+xt(n).map(r=>Us(`_${r}_${n[r]}`)).join("")}function Yje(e,t=n=>n){const n=La(e),r=qje(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=Kje(r,n.step),a={...i,[o]:+i[o]+s};return`${t(g_(a))} - ${t(g_(i))}`}}const Vsn={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Hsn(e){return!!Vsn[e]}function Kje(e,t=1){if(Hsn(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function qsn(e){return e==null?void 0:e.param}function tue(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function nue(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function rue(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function iue(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function sue(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function oue(e){if(e!=null&&e.field){if(at(e.range)&&e.range.length===2)return!0;if(rn(e.range))return!0}return!1}function aue(e){return!!(e!=null&&e.field)&&(at(e.oneOf)||at(e.in))}function Wsn(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function Xje(e){return aue(e)||tue(e)||oue(e)||nue(e)||iue(e)||rue(e)||sue(e)}function Wp(e,t){return P7(e,{timeUnit:t,wrapTime:!0})}function Gsn(e,t){return e.map(n=>Wp(n,t))}function Qje(e,t=!0){const{field:n}=e,r=La(e.timeUnit),{unit:i,binned:s}=r||{},o=Pt(e,{expr:"datum"}),a=i?`time(${s?o:jsn(i,n)})`:o;if(tue(e))return`${a}===${Wp(e.equal,i)}`;if(nue(e)){const u=e.lt;return`${a}<${Wp(u,i)}`}else if(iue(e)){const u=e.gt;return`${a}>${Wp(u,i)}`}else if(rue(e)){const u=e.lte;return`${a}<=${Wp(u,i)}`}else if(sue(e)){const u=e.gte;return`${a}>=${Wp(u,i)}`}else{if(aue(e))return`indexof([${Gsn(e.oneOf,i).join(",")}], ${a}) !== -1`;if(Wsn(e))return uue(a,e.valid);if(oue(e)){const{range:u}=e,l=rn(u)?{signal:`${u.signal}[0]`}:u[0],c=rn(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Wp(l,i)+", "+Wp(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Wp(l,i)}`),c!==null&&f.push(`${a} <= ${Wp(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Ji(e)}`)}function uue(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Ysn(e){return Xje(e)&&e.timeUnit?{...e,timeUnit:La(e.timeUnit)}:e}const xP={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Ksn(e){return e==="quantitative"||e==="temporal"}function Jje(e){return e==="ordinal"||e==="nominal"}const y_=xP.quantitative,lue=xP.ordinal,eT=xP.temporal,cue=xP.nominal,AA=xP.geojson;function Xsn(e){if(e)switch(e=e.toLowerCase(),e){case"q":case y_:return"quantitative";case"t":case eT:return"temporal";case"o":case lue:return"ordinal";case"n":case cue:return"nominal";case AA:return"geojson"}}const $c={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},JX={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function Qsn(e,t){const n=JX[e],r=JX[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const Jsn={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function d_e(e){return Jsn[e]}const Zje=new Set(["linear","log","pow","sqrt","symlog"]),eUe=new Set([...Zje,"time","utc"]);function tUe(e){return Zje.has(e)}const nUe=new Set(["quantile","quantize","threshold"]),Zsn=new Set([...eUe,...nUe,"sequential","identity"]),eon=new Set(["ordinal","bin-ordinal","point","band"]);function ja(e){return eon.has(e)}function Yf(e){return Zsn.has(e)}function Qh(e){return eUe.has(e)}function tT(e){return nUe.has(e)}const ton={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function non(e){return!Bt(e)&&!!e.name}function rUe(e){return e==null?void 0:e.param}function ron(e){return e==null?void 0:e.unionWith}function ion(e){return jt(e)&&"field"in e}const son={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:TAn,domain:AAn,range:DAn,rangeMax:IAn,rangeMin:kAn,scheme:RAn,...oon}=son,aon=xt(oon);function ZX(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Qh(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Qh(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Qh(e);case"nice":return Qh(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Yf(e)&&!Mr(["log","time","utc","threshold","quantile"],e)}}function iUe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return $S(e)?void 0:rsn(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function uon(e,t){return Mr([lue,cue],t)?e===void 0||ja(e):t===eT?Mr([$c.TIME,$c.UTC,void 0],e):t===y_?tUe(e)||tT(e)||e===void 0:!0}function lon(e,t,n=!1){if(!By(e))return!1;switch(e){case zs:case Va:case Hb:case TA:case ih:case Pp:return Qh(t)||t==="band"?!0:t==="point"?!n:!1;case $y:case Gb:case Ly:case qb:case Wb:case oE:return Qh(t)||tT(t)||Mr(["band","point","ordinal"],t);case Yc:case _0:case E0:return t!=="band";case Yb:case Kc:return t==="ordinal"||tT(t)}}function fue(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=hue(e);return At(n)&&!Sje(n.aggregate)&&i&&Qh(i.get("type"))?con({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function con({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Di("invalid",n,i)===null?[fon(e,t),r]:r}function fon(e,t){const n=due(e,!0),i=aE(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function due(e,t=!0){return uue(Bt(e)?e:Pt(e,{expr:"datum"}),!t)}function don(e){const{datum:t}=e;return lE(t)?g_(t):`${Ji(t)}`}function Mw(e,t,n,r){const i={};if(t&&(i.scale=t),T0(e)){const{datum:s}=e;lE(s)?i.signal=g_(s):rn(s)?i.signal=s.signal:bP(s)?i.signal=s.expr:i.value=s}else i.field=Pt(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function y$({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!rn(o)&&0<o&&o<1?"datum":void 0,u=Pt(t,{expr:a,suffix:i}),l=n!==void 0?Pt(n,{expr:a}):Pt(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=rn(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function hon({scaleName:e,fieldDef:t}){const n=Pt(t,{expr:"datum"}),r=Pt(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function hue({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Qn(t)){const f=o==null?void 0:o.get("type");if(ql(t)){c??(c=rb({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(ms(d)||c&&h&&p===eT)return a!=null&&a.impute?Mw(t,s,{binSuffix:"mid"},{offset:u}):c&&!ja(f)?y$({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):Mw(t,s,SP(t,e)?{binSuffix:"range"}:{},{offset:u});if(eu(d)){if(At(n))return y$({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Tt(Bje(e===zs?Np:w0))}}return Mw(t,s,ja(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(bp(t)){const f=t.value,d=u?{offset:u}:{};return{...Lk(e,f),...d}}}return cr(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function Lk(e,t){return Mr(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Mr(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:_s(t)}function v_(e){return e&&e!=="number"&&e!=="time"}function sUe(e,t,n){return`${e}(${t}${n?`, ${Ji(n)}`:""})`}const pon="  ";function pue({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(v_(n))return Jh({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=oUe(e,r,i),a=nT(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Jh({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Jh({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&At(e)&&e.timeUnit===void 0)return Jh({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(iT(e)){const c=gon({field:o,timeUnit:At(e)?(u=La(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:dE(e)&&((l=e.scale)==null?void 0:l.type)===$c.UTC});return c?{signal:c}:void 0}if(t=eQ({type:a,specifiedFormat:t,config:s,normalizeStack:i}),At(e)&&ms(e.bin)){const c=Pt(e,{expr:r,binSuffix:"end"});return{signal:wP(o,c,t,n,s)}}else return t||nT(e)==="quantitative"?{signal:`${lUe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function oUe(e,t,n){return At(e)?n?`${Pt(e,{expr:t,suffix:"end"})}-${Pt(e,{expr:t,suffix:"start"})}`:Pt(e,{expr:t}):don(e)}function Jh({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=oUe(e,r,i)),o!=="datum.value"&&At(e)&&ms(e.bin)){const a=Pt(e,{expr:r,binSuffix:"end"});return{signal:wP(o,a,t,n,s)}}return{signal:sUe(n,o,t)}}function aUe(e,t,n,r,i,s){var o;if(!(Bt(r)&&v_(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&nT(e)==="quantitative"&&(i.normalizedNumberFormatType&&rT(e)&&e.stack==="normalize"||i.numberFormatType))){if(rT(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return eQ({type:"quantitative",config:i,normalizeStack:!0});if(iT(e)){const a=At(e)?(o=La(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:mon({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return eQ({type:t,specifiedFormat:n,config:i})}}function uUe(e,t,n){var r;if(e&&(rn(e)||e==="number"||e==="time"))return e;if(iT(t)&&n!=="time"&&n!=="utc")return At(t)&&((r=La(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function eQ({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Bt(t))return t;if(e===y_)return r?n.normalizedNumberFormat:n.numberFormat}function mon({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:Gje(t)}:r?void 0:n.timeFormat)}function lUe(e,t){return`format(${e}, "${t||""}")`}function h_e(e,t,n,r){return v_(n)?sUe(n,e,t):lUe(e,(Bt(t)?t:void 0)??r.numberFormat)}function wP(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return wP(e,t,i.numberFormat,i.numberFormatType,i);const s=h_e(e,n,r,i),o=h_e(t,n,r,i);return`${uue(e,!1)} ? "null" : ${s} + "${pon}" + ${o}`}function gon({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Bt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):Usn(t,e,s)}const Ql={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},cUe=Ql.arc,S7=Ql.area,C7=Ql.bar,yon=Ql.image,T7=Ql.line,A7=Ql.point,von=Ql.rect,v$=Ql.rule,fUe=Ql.text,mue=Ql.tick,bon=Ql.trail,gue=Ql.circle,yue=Ql.square,dUe=Ql.geoshape;function fE(e){return["line","area","trail"].includes(e)}function I3(e){return["rect","bar","image","arc"].includes(e)}const xon=new Set(xt(Ql));function n0(e){return e.type}const won=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],_on=["fill","fillOpacity"],Eon=[...won,..._on],Son={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},p_e=xt(Son),Con={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},Ton={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},Aon={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},hUe=xt(Aon);function b_(e){return e&&e.band!=null}const Don={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},pUe=5,Ion={binSpacing:1,continuousBandSize:pUe,minBandSize:.25,timeUnitBandPosition:.5},kon={binSpacing:0,continuousBandSize:pUe,minBandSize:.25,timeUnitBandPosition:.5},Ron={thickness:1};function Non(e){return n0(e)?e.type:e}const D7="min",Pon={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function m_e(e){return e in Pon}function mUe(e){return!!(e!=null&&e.encoding)}function Fm(e){return e&&(e.op==="count"||!!e.field)}function gUe(e){return e&&at(e)}function _P(e){return"row"in e||"column"in e}function vue(e){return!!e&&"header"in e}function I7(e){return"facet"in e}function Oon(e){return e.param}function Fon(e){return e&&!Bt(e)&&"repeat"in e}function g_e(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function bue(e){return"sort"in e}function rb({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Qn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(At(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return hy("timeUnitBandPosition",n,r);if(ms(s))return .5}}function yUe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=Xc(e),u=Di(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(At(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:hy("timeUnitBandSize",r,i)};if(ms(h)&&!ja(s))return{band:1}}if(I3(r.type))return s?ja(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function vUe(e,t,n,r){return ms(e.bin)||e.timeUnit&&ql(e)&&e.type==="temporal"?rb({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function bUe(e){return e&&!!e.sort&&!e.field}function k7(e){return e&&"condition"in e}function R7(e){const t=e==null?void 0:e.condition;return!!t&&!at(t)&&At(t)}function EP(e){const t=e==null?void 0:e.condition;return!!t&&!at(t)&&Qn(t)}function Mon(e){const t=e==null?void 0:e.condition;return!!t&&(at(t)||bp(t))}function At(e){return e&&(!!e.field||e.aggregate==="count")}function nT(e){return e==null?void 0:e.type}function T0(e){return e&&"datum"in e}function X1(e){return ql(e)&&!x$(e)||b$(e)}function y_e(e){return ql(e)&&e.type==="quantitative"&&!e.bin||b$(e)}function b$(e){return T0(e)&&fi(e.datum)}function Qn(e){return At(e)||T0(e)}function ql(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function bp(e){return e&&"value"in e&&"value"in e}function dE(e){return e&&("scale"in e||"sort"in e)}function rT(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function xUe(e){return e&&"legend"in e}function wUe(e){return e&&("format"in e||"formatType"in e)}function $on(e){return Mc(e,["legend","axis","header","scale"])}function Lon(e){return"op"in e}function Pt(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(jon(e))n=cje("count");else{let o;if(!t.nofn)if(Lon(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;ms(a)?(o=Cje(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Kb(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):dy(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!cE(l)&&(o=zsn(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?CA(n):t.expr?aje(n,t.expr)+s:Wd(n)+s}function x$(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return At(e)&&!!e.bin;case"temporal":return!1}throw new Error(Fje(e.type))}function Bon(e){var t;return dE(e)&&tT((t=e.scale)==null?void 0:t.type)}function jon(e){return e.aggregate==="count"}function Uon(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(ms(r))return`${n} (binned)`;if(i&&!cE(i)){const a=(o=La(i))==null?void 0:o.unit;if(a)return`${n} (${E7(a).join("-")})`}else if(s)return Kb(s)?`${n} for max ${s.argmax}`:dy(s)?`${n} for min ${s.argmin}`:`${mP(s)} of ${n}`;return n}function zon(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Kb(t))return`${i} for argmax(${t.argmax})`;if(dy(t))return`${i} for argmin(${t.argmin})`;const s=r&&!cE(r)?La(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||ms(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const _Ue=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return zon(e);default:return Uon(e,t)}};let EUe=_Ue;function SUe(e){EUe=e}function Von(){SUe(_Ue)}function LS(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=xue(e))==null?void 0:a.title;if(!At(e))return i??e.title;const s=e,o=r?wue(s,t):void 0;return n?Io(i,s.title,o):i??s.title??o}function xue(e){if(rT(e)&&e.axis)return e.axis;if(xUe(e)&&e.legend)return e.legend;if(vue(e)&&e.header)return e.header}function wue(e,t){return EUe(e,t)}function w$(e){if(wUe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=xue(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function Hon(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(bue(e)&&at(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Kb(n)&&!dy(n))return"quantitative";if(dE(e)&&((s=e.scale)!=null&&s.type))switch(JX[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function r0(e){if(At(e))return e;if(R7(e))return e.condition}function fa(e){if(Qn(e))return e;if(EP(e))return e.condition}function CUe(e,t,n,r={}){if(Bt(e)||fi(e)||Ub(e)){const i=Bt(e)?"string":fi(e)?"number":"boolean";return Tt(qin(t,i,e)),{value:e}}return Qn(e)?_$(e,t,n,r):EP(e)?{...e,condition:_$(e.condition,t,n,r)}:e}function _$(e,t,n,r){if(wUe(e)){const{format:i,formatType:s,...o}=e;if(v_(s)&&!n.customFormatTypes)return Tt(l_e(t)),_$(o,t,n,r)}else{const i=rT(e)?"axis":xUe(e)?"legend":vue(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(v_(o)&&!n.customFormatTypes)return Tt(l_e(t)),_$({...e,[i]:a},t,n,r)}}return At(e)?_ue(e,t,r):qon(e)}function qon(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=fi(n)?"quantitative":Bt(n)?"nominal":lE(n)?"temporal":void 0,{...e,type:t}}function _ue(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Kae(r)&&!Kb(r)&&!dy(r)&&(Tt(Gin(r)),delete a.aggregate),i&&(a.timeUnit=La(i)),o&&(a.field=`${o}`),ms(s)&&(a.bin=N7(s,t)),eu(s)&&!ko(t)&&Tt(Csn(t)),ql(a)){const{type:u}=a,l=Xsn(u);u!==l&&(a.type=l),u!=="quantitative"&&Sje(r)&&(Tt(Win(u,r)),a.type="quantitative")}else if(!vje(t)){const u=Hon(a,t);a.type=u}if(ql(a)){const{compatible:u,warning:l}=Won(a,t)||{};u===!1&&Tt(l)}if(bue(a)&&Bt(a.sort)){const{sort:u}=a;if(m_e(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&m_e(l))return{...a,sort:{encoding:l,order:"descending"}}}if(vue(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function N7(e,t){return Ub(e)?{maxbins:e_e(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:e_e(t)}:e}const c2={compatible:!0};function Won(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case $g:case Lg:case p7:return x$(e)?c2:{compatible:!1,warning:Qin(t)};case zs:case Va:case Hb:case TA:case Yc:case _0:case E0:case gP:case yP:case m7:case m_:case g7:case y7:case oE:case ih:case Pp:case v7:return c2;case Fp:case Gd:case Op:case Mp:return n!==y_?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:c2;case Ly:case qb:case Wb:case Gb:case $y:case My:case Fy:case Np:case w0:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:c2;case Kc:case Yb:return!x$(e)&&!Bon(e)?{compatible:!1,warning:Jin(t)}:c2;case JC:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:c2}}function iT(e){const{formatType:t}=w$(e);return t==="time"||!t&&Gon(e)}function Gon(e){return e&&(e.type==="temporal"||At(e)&&!!e.timeUnit)}function P7(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=La(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return bP(e)?a=e.expr:rn(e)?a=e.signal:lE(e)?(o=!0,a=g_(e)):(Bt(e)||fi(e))&&o&&(a=`datetime(${Ji(e)})`,$sn(s)&&(fi(e)&&e<1e4||Bt(e)&&isNaN(Date.parse(e)))&&(a=g_({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Ji(e)}function TUe(e,t){const{type:n}=e;return t.map(r=>{const i=At(e)&&!cE(e.timeUnit)?e.timeUnit:void 0,s=P7(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function SP(e,t){return ms(e.bin)?By(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const v_e={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function CP(e){return e==null?void 0:e.condition}const AUe=["domain","grid","labels","ticks","title"],Yon={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},DUe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Kon={...DUe,style:1,labelExpr:1,encoding:1};function b_e(e){return!!Kon[e]}const Xon={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},IUe=xt(Xon);function jy(e){return"mark"in e}class O7{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return jy(t)?Non(t.mark)===this.name:!1}}function $w(e,t){const n=e&&e[t];return n?at(n)?h_(n,r=>!!r.field):At(n)||R7(n):!1}function kUe(e,t){const n=e&&e[t];return n?at(n)?h_(n,r=>!!r.field):At(n)||T0(n)||EP(n):!1}function RUe(e,t){if(ko(t)){const n=e[t];if((At(n)||T0(n))&&(Jje(n.type)||At(n)&&n.timeUnit)){const r=qae(t);return kUe(e,r)}}return!1}function Eue(e){return h_(Qrn,t=>{if($w(e,t)){const n=e[t];if(at(n))return h_(n,r=>!!r.aggregate);{const r=r0(n);return r&&!!r.aggregate}}return!1})}function NUe(e,t){const n=[],r=[],i=[],s=[],o={};return Sue(e,(a,u)=>{if(At(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=xue(a),m=p==null?void 0:p.title;let g=Pt(a,{forAs:!0});const y={...m?[]:{title:LS(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(Kb(c)?(v="argmax",g=Pt({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):dy(c)?(v="argmin",g=Pt({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),ql(a)&&ms(f)){if(r.push({bin:f,field:l,as:g}),n.push(Pt(a,{binSuffix:"end"})),SP(a,u)&&n.push(Pt(a,{binSuffix:"range"})),ko(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",vje(u)||(y.type=y_)}else if(d&&!cE(d)){i.push({timeUnit:d,field:l,as:g});const v=ql(a)&&a.type!==eT&&"time";v&&(u===gP||u===m_?y.formatType=v:ain(u)?y.legend={formatType:v,...y.legend}:ko(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function Qon(e,t,n){const r=lin(t,n);if(r){if(r==="binned"){const i=e[t===Np?zs:Va];return!!(At(i)&&At(e[t])&&eu(i.bin))}}else return!1;return!0}function Jon(e,t,n,r){const i={};for(const s of xt(e))yje(s)||Tt(Xin(s));for(let s of rin){if(!e[s])continue;const o=e[s];if(vP(s)){const a=nin(s),u=i[a];if(At(u)&&Ksn(u.type)&&At(o)&&!u.timeUnit){Tt(Hin(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Tt(Vin),s=ih),!Qon(e,s,t)){Tt(_7(s,t));continue}if(s===$y&&t==="line"){const a=r0(e[s]);if(a!=null&&a.aggregate){Tt(Kin);continue}}if(s===Yc&&(n?"fill"in e:"stroke"in e)){Tt(Mje("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===yP||s===JC&&!at(o)&&!bp(o)||s===m_&&at(o)){if(o){if(s===JC){const a=e[s];if(bUe(a)){i[s]=a;continue}}i[s]=Lt(o).reduce((a,u)=>(At(u)?a.push(_ue(u,s)):Tt(QX(u,s)),a),[])}}else{if(s===m_&&o===null)i[s]=null;else if(!At(o)&&!T0(o)&&!bp(o)&&!k7(o)&&!rn(o)){Tt(QX(o,s));continue}i[s]=CUe(o,s,r)}}return i}function F7(e,t){const n={};for(const r of xt(e)){const i=CUe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function Zon(e){const t=[];for(const n of xt(e))if($w(e,n)){const r=e[n],i=Lt(r);for(const s of i)At(s)?t.push(s):R7(s)&&t.push(s.condition)}return t}function Sue(e,t,n){if(e)for(const r of xt(e)){const i=e[r];if(at(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function ean(e,t,n,r){return e?xt(e).reduce((i,s)=>{const o=e[s];return at(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function PUe(e,t){return xt(t).reduce((n,r)=>{switch(r){case zs:case Va:case g7:case v7:case y7:case Np:case w0:case Hb:case TA:case ih:case My:case Pp:case Fy:case Op:case Fp:case Mp:case Gd:case gP:case Kc:case oE:case m_:return n;case JC:if(e==="line"||e==="trail")return n;case yP:case m7:{const i=t[r];if(at(i)||At(i))for(const s of Lt(i))s.aggregate||n.push(Pt(s,{}));return n}case $y:if(e==="trail")return n;case Yc:case _0:case E0:case Ly:case qb:case Wb:case Yb:case Gb:{const i=r0(t[r]);return i&&!i.aggregate&&n.push(Pt(i,{})),n}}},[])}function tan(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(at(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return at(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function tQ(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${Cue(t)}`:"";return{field:o+t.field,type:t.type,title:rn(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=Zon(n).map($on);return{tooltip:[...i,...wm(s,Fr)]}}function Cue(e){const{title:t,field:n}=e;return Io(t,n)}function Tue(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=Cue(n);return OUe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...Bt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function OUe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...n0(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Ub(e[t])?{}:e[t]}}]:[]}function FUe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:r6(s,n),continuousAxisChannelDef2:r6(o,n),continuousAxisChannelDefError:r6(a,n),continuousAxisChannelDefError2:r6(u,n),continuousAxis:i}}function r6(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Tt(Ssn(n,t)),r}else return e}function MUe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(n0(n)&&n.orient)return n.orient;if(X1(i)){if(X1(s)){const o=At(i)&&i.aggregate,a=At(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return iT(s)&&!iT(i)?"horizontal":"vertical"}return"horizontal"}else{if(X1(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const E$="boxplot",nan=["box","median","outliers","rule","ticks"],ran=new O7(E$,LUe);function $Ue(e){return fi(e)?"tukey":e}function LUe(e,{config:t}){e={...e,encoding:F7(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=n0(n)?n:{type:n};i&&Tt(Oje("boxplot"));const u=a.extent??t.boxplot.extent,l=Di("size",a,t),c=a.invalid,f=$Ue(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:_,boxOrient:w,customTooltipWithoutAggregatedField:S}=ian(e,u,t),T=CA(m.field),{color:A,size:k,...I}=b,R=Ve=>Tue(a,g,m,Ve,t.boxplot),F=R(I),O=R(b),L=(jt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",H=R({...I,...k?{size:k}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...A||{value:L}}}}),U=tQ([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),G={type:"tick",color:"black",opacity:1,orient:_,invalid:c,aria:!1},Y=f==="min-max"?U:tQ([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),J=[...F({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Y}),...F({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Y}),...F({partName:"ticks",mark:G,positionPrefix:"lower_whisker",extraEncoding:Y}),...F({partName:"ticks",mark:G,positionPrefix:"upper_whisker",extraEncoding:Y})],$=[...f!=="tukey"?J:[],...O({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:w,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:U}),...H({partName:"median",mark:{type:"tick",invalid:c,...jt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:_,aria:!1},positionPrefix:"mid_box",extraEncoding:U})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:$};const j=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,B=`(${W} - ${j})`,q=`${j} - ${u} * ${B}`,Z=`${W} + ${u} * ${B}`,re=`datum["${m.field}"]`,xe={joinaggregate:BUe(m.field),groupby:y},pe={transform:[{filter:`(${q} <= ${re}) && (${re} <= ${Z})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${T}`},{op:"max",field:m.field,as:`upper_whisker_${T}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${T}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${T}`},...v],groupby:y}],layer:J},{tooltip:Te,...ke}=I,{scale:it,axis:Re}=m,ut=Cue(m),Ke=Mc(Re,["title"]),Ct=OUe(a,"outliers",t.boxplot,{transform:[{filter:`(${re} < ${q}) || (${re} > ${Z})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...ut!==void 0?{title:ut}:{},...it!==void 0?{scale:it}:{},...Qi(Ke)?{}:{axis:Ke}},...ke,...A?{color:A}:{},...S?{tooltip:S}:{}}})[0];let gt;const Ie=[...d,...h,xe];return Ct?gt={transform:Ie,layer:[Ct,pe]}:(gt=pe,gt.transform.unshift(...Ie)),{...o,layer:[gt,{transform:p,layer:$}]}}function BUe(e){const t=CA(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function ian(e,t,n){const r=MUe(e,E$),{continuousAxisChannelDef:i,continuousAxis:s}=FUe(e,r,E$),o=i.field,a=CA(o),u=$Ue(t),l=[...BUe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=tan(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=NUe(p,n),_=r==="vertical"?"horizontal":"vertical",w=r,S=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:S,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:_,boxOrient:w,customTooltipWithoutAggregatedField:h}}const Aue="errorbar",san=["ticks","rule"],oan=new O7(Aue,jUe);function jUe(e,{config:t}){e={...e,encoding:F7(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=UUe(e,Aue,t);delete s.size;const c=Tue(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function aan(e,t){const{encoding:n}=e;if(uan(n))return{orient:MUe(e,t),inputType:"raw"};const r=lan(n),i=can(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(Qn(a)&&Qn(u))throw new Error(`${t} cannot have both x2 and y2`);if(Qn(a)){if(X1(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Qn(u)){if(X1(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Qn(u)&&!Qn(a))throw new Error(`${t} cannot have xError2 without xError`);if(Qn(c)&&!Qn(l))throw new Error(`${t} cannot have yError2 without yError`);if(Qn(a)&&Qn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Qn(a)){if(X1(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Qn(l)){if(X1(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function uan(e){return(Qn(e.x)||Qn(e.y))&&!Qn(e.x2)&&!Qn(e.y2)&&!Qn(e.xError)&&!Qn(e.xError2)&&!Qn(e.yError)&&!Qn(e.yError2)}function lan(e){return Qn(e.x2)||Qn(e.y2)}function can(e){return Qn(e.xError)||Qn(e.xError2)||Qn(e.yError)||Qn(e.yError2)}function UUe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=n0(r)?r:{type:r};s&&Tt(Oje(t));const{orient:l,inputType:c}=aan(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=FUe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=fan(u,f,d,h,p,c,t,n),{[m]:_,[m==="x"?"x2":"y2"]:w,[m==="x"?"xError":"yError"]:S,[m==="x"?"xError2":"yError2"]:T,...A}=i,{bins:k,timeUnits:I,aggregate:R,groupby:F,encoding:O}=NUe(A,n),L=[...R,...g],H=c!=="raw"?[]:F,U=tQ(v,f,O,b);return{transform:[...a.transform??[],...k,...I,...L.length===0?[]:[{aggregate:L,groupby:H}],...y],groupby:H,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:O,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:U}}function fan(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Tt(Esn(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:mP(h)},{fieldPrefix:"upper_",titlePrefix:x_e(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:x_e(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:LS({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:LS({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:LS({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Tt(_sn(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:p_(p_(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function x_e(e,t,n){return`${mP(e)} ${n} ${t}`}const Due="errorband",dan=["band","borders"],han=new O7(Due,zUe);function zUe(e,{config:t}){e={...e,encoding:F7(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=UUe(e,Due,t),l=o,c=Tue(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Tt(f_e("interpolate")):l.tension&&Tt(f_e("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const VUe={};function Iue(e,t,n){const r=new O7(e,t);VUe[e]={normalizer:r,parts:n}}function pan(){return xt(VUe)}Iue(E$,LUe,nan);Iue(Aue,jUe,san);Iue(Due,zUe,dan);const man=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],HUe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},qUe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},gan=xt(HUe),yan=xt(qUe),van={header:1,headerRow:1,headerColumn:1,headerFacet:1},WUe=xt(van),GUe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],ban={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},xan={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},xp="_vgsid_",wan={point:{on:"click",fields:[xp],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function kue(e){return e==="legend"||!!(e!=null&&e.legend)}function vq(e){return kue(e)&&jt(e)}function Rue(e){return!!(e!=null&&e.select)}function YUe(e){const t=[];for(const n of e||[]){if(Rue(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function _an(e){return M7(e)||Pue(e)||Nue(e)}function Nue(e){return"concat"in e}function M7(e){return"vconcat"in e}function Pue(e){return"hconcat"in e}function KUe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function i0(e){return jt(e)&&e.step!==void 0}function w_e(e){return e.view||e.width||e.height}const __e=20,Ean={align:1,bounds:1,center:1,columns:1,spacing:1},San=xt(Ean);function Can(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(I7(e)&&!_P(e.facet)||Nue(e))&&(i.columns=o),M7(e)&&(i.columns=1);for(const a of San)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=fi(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function nQ(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function S$(e,t){const n=C$(e,t);return i0(n)?n.step:XUe}function C$(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Io(n,{step:e.step})}const XUe=20,Tan={continuousWidth:200,continuousHeight:200,step:XUe},Aan={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Tan,mark:Ton,arc:{},area:{},bar:Ion,circle:{},geoshape:{},image:{},line:{},point:{},rect:kon,rule:{color:"black"},square:{},text:{color:"black"},tick:Ron,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:ton,projection:{},legend:ban,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:wan,style:{},title:{},facet:{spacing:__e},concat:{spacing:__e},normalizedNumberFormat:".0%"},K0=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],E_e={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},S_e={blue:K0[0],orange:K0[1],red:K0[2],teal:K0[3],green:K0[4],yellow:K0[5],purple:K0[6],pink:K0[7],brown:K0[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Dan(e={}){return{signals:[{name:"color",value:jt(e)?{...S_e,...e}:S_e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Ian(e){return{signals:[{name:"fontSize",value:jt(e)?{...E_e,...e}:E_e}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function kan(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function QUe(e){const t=xt(e||{}),n={};for(const r of t){const i=e[r];n[r]=CP(i)?Aje(i):vf(i)}return n}function Ran(e){const t=xt(e),n={};for(const r of t)n[r]=QUe(e[r]);return n}const Nan=[...hUe,...IUe,...WUe,"background","padding","legend","lineBreak","scale","style","title","view"];function JUe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=pA({},zn(Aan),n?kan(n):{},t?Dan(t):{},r?Ian(r):{},s||{});i&&mA(o,"selection",i,!0);const a=Mc(o,Nan);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=vf(o[u]));for(const u of hUe)o[u]&&(a[u]=vc(o[u]));for(const u of IUe)o[u]&&(a[u]=QUe(o[u]));for(const u of WUe)o[u]&&(a[u]=vc(o[u]));return o.legend&&(a.legend=vc(o.legend)),o.scale&&(a.scale=vc(o.scale)),o.style&&(a.style=Ran(o.style)),o.title&&(a.title=vc(o.title)),o.view&&(a.view=vc(o.view)),a}const Pan=new Set(["view",...xon]),Oan=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Fan={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...Con};function Man(e){e=zn(e);for(const t of Oan)delete e[t];if(e.axis)for(const t in e.axis)CP(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of man)delete e.legend[t];if(e.mark){for(const t of p_e)delete e.mark[t];e.mark.tooltip&&jt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(YUe(e.params)),delete e.params);for(const t of Pan){for(const r of p_e)delete e[t][r];const n=Fan[t];if(n)for(const r of n)delete e[t][r];Lan(e,t)}for(const t of pan())delete e[t];$an(e);for(const t in e)jt(e[t])&&Qi(e[t])&&delete e[t];return Qi(e)?void 0:e}function $an(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=Tje(e.title);Qi(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Qi(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Qi(r)?delete e.title:e.title=r}function Lan(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Qi(s)||(e.style[n??t]=s),delete e[t]}function $7(e){return"layer"in e}function Ban(e){return"repeat"in e}function jan(e){return!at(e.repeat)&&e.repeat.layer}class Oue{map(t,n){return I7(t)?this.mapFacet(t,n):Ban(t)?this.mapRepeat(t,n):Pue(t)?this.mapHConcat(t,n):M7(t)?this.mapVConcat(t,n):Nue(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if($7(t))return this.mapLayer(t,n);if(jy(t))return this.mapUnit(t,n);throw new Error(Xae(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Uan={zero:1,center:1,normalize:1};function zan(e){return e in Uan}const Van=new Set([cUe,C7,S7,v$,A7,gue,yue,T7,fUe,mue]),Han=new Set([C7,S7,cUe]);function f2(e){return At(e)&&nT(e)==="quantitative"&&!e.bin}function C_e(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(At(o)&&At(a))if(f2(o)&&f2(a)){if(o.stack)return t;if(a.stack)return i;const u=At(o)&&!!o.aggregate,l=At(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(f2(o))return t;if(f2(a))return i}else{if(f2(o))return s&&n==="vertical"?void 0:t;if(f2(a))return s&&n==="horizontal"?void 0:i}}function qan(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function ZUe(e,t){var m,g;const n=n0(e)?e:{type:e},r=n.type;if(!Van.has(r))return null;const i=C_e(t,"x",n)||C_e(t,"theta",n);if(!i)return null;const s=t[i],o=At(s)?Pt(s,{}):void 0,a=qan(i),u=[],l=new Set;if(t[a]){const y=t[a],v=At(y)?Pt(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=At(f)?Pt(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=iin.reduce((y,v)=>{if(v!=="tooltip"&&$w(t,v)){const b=t[v];for(const _ of Lt(b)){const w=r0(_);if(w.aggregate)continue;const S=Pt(w,{});(!S||!l.has(S))&&y.push({channel:v,fieldDef:w})}}return y},[]);let p;return s.stack!==void 0?Ub(s.stack)?p=s.stack?"zero":null:p=s.stack:Han.has(r)&&(p="zero"),!p||!zan(p)||Eue(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==$c.LINEAR&&s!=null&&s.stack&&Tt(bsn(s.scale.type)),Qn(t[S0(i)])?(s.stack!==void 0&&Tt(vsn(i)),null):(At(s)&&s.aggregate&&!gin.has(s.aggregate)&&Tt(xsn(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:fE(r),stackBy:h,offset:p}))}function eze(e,t,n){const r=vc(e),i=Di("orient",r,n);if(r.orient=Kan(r.type,t,i),i!==void 0&&i!==r.orient&&Tt(nsn(r.orient,i)),r.type==="bar"&&r.orient){const u=Di("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:Don[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Di("opacity",r,n),o=Di("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=Gan(r.type,t)),Di("cursor",r,n)===void 0&&(r.cursor=Wan(r,t,n)),r}function Wan(e,t,n){return t.href||e.href||Di("href",e,n)?"pointer":e.cursor}function Gan(e,t){if(Mr([A7,mue,gue,yue],e)&&!Eue(t))return .7}function Yan(e,t,{graticule:n}){if(n)return!1;const r=hy("filled",e,t),i=e.type;return Io(r,i!==A7&&i!==T7&&i!==v$)}function Kan(e,t,n){switch(e){case A7:case gue:case yue:case fUe:case von:case yon:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case C7:if(At(r)&&(eu(r.bin)||At(i)&&i.aggregate&&!r.aggregate))return"vertical";if(At(i)&&(eu(i.bin)||At(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(At(r)&&r.type===y_&&!ms(r.bin)||b$(r))&&At(i)&&eu(i.bin)?"horizontal":"vertical";if(!o)return(At(i)&&i.type===y_&&!ms(i.bin)||b$(i))&&At(r)&&eu(r.bin)?"vertical":"horizontal"}case v$:if(s&&!(At(r)&&eu(r.bin))&&o&&!(At(i)&&eu(i.bin)))return;case S7:if(o)return At(i)&&eu(i.bin)?"horizontal":"vertical";if(s)return At(r)&&eu(r.bin)?"vertical":"horizontal";if(e===v$){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case T7:case mue:{const a=y_e(r),u=y_e(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=ql(r)&&r.type===eT,c=ql(i)&&i.type===eT;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function Xan(e){const{point:t,line:n,...r}=e;return xt(r).length>1?r:r.type}function Qan(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Mc(e[t],["point","line"])});return e}function bq(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?jt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?jt(t.point)?t.point:{}:void 0}function T_e(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Jan{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(jy(t)){const{mark:r,encoding:i}=t,s=n0(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!bq(s,n[s.type],i);case"area":return!!bq(s,n[s.type],i)||!!T_e(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=F7(l,i),d=n0(a)?a:{type:a},h=bq(d,i[d.type],f),p=d.type==="area"&&T_e(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:Xan({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Mc(f,["shape"])}],g=ZUe(eze(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=Mc(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...XC(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...XC(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:Qan(i)})}}function Zan(e,t){return t?_P(e)?nze(e,t):tze(e,t):e}function xq(e,t){return t?nze(e,t):e}function rQ(e,t,n){const r=t[e];if(Fon(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Tt(Min(r.repeat));return}return t}function tze(e,t){if(e=rQ("field",e,t),e!==void 0){if(e===null)return null;if(bue(e)&&Fm(e.sort)){const n=rQ("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function A_e(e,t){if(At(e))return tze(e,t);{const n=rQ("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function D_e(e,t){if(Qn(e)){const n=A_e(e,t);if(n)return n;if(k7(e))return{condition:e.condition}}else{if(EP(e)){const n=A_e(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function nze(e,t){const n={};for(const r in e)if(vn(e,r)){const i=e[r];if(at(i))n[r]=i.map(s=>D_e(s,t)).filter(s=>s);else{const s=D_e(i,t);s!==void 0&&(n[r]=s)}}return n}class eun{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(jy(t)){const{encoding:n,mark:r}=t;if(r==="line"||n0(r)&&r.type==="line")for(const i of tin){const s=aE(i),o=n[s];if(n[i]&&(At(o)&&!eu(o.bin)||T0(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Tt(tsn(!!i.x2,!!i.y2)),r({...t,mark:jt(s)?{...s,type:"rule"}:"rule"},n)}}class tun extends Oue{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[ran,oan,han,new Jan,new eun]}map(t,n){if(jy(t)){const r=$w(t.encoding,$g),i=$w(t.encoding,Lg),s=$w(t.encoding,p7);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=xq(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return jan(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Us(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!at(r)&&t.columns&&(t=Mc(t,["columns"]),Tt(a_e("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!at(r)&&r.row||[u?u.row:null],f=!at(r)&&r.column||[u?u.column:null],d=at(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(at(r)?`${Us(p)}`:(r.row?`row_${Us(m)}`:"")+(r.column?`column_${Us(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(Mc(b,["data"]))}const h=at(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return _P(r)&&t.columns&&(t=Mc(t,["columns"]),Tt(a_e("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=k_e({parentProjection:o,projection:i}),l=I_e({parentEncoding:s,encoding:xq(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=xq(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Tt(Zin([...r?[$g]:[],...i?[Lg]:[]]));const o={},a={};for(const u of[$g,Lg]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:Zan(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:I_e({parentEncoding:n,encoding:s,layer:!0}),parentProjection:k_e({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function I_e({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...xt(e),...xt(t)]);for(const s of i){const o=t[s],a=e[s];if(Qn(o)){const u={...a,...o};r[s]=u}else EP(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||bp(a)||rn(a)||Qn(a)||at(a))&&(r[s]=a)}}else r=t;return!r||Qi(r)?void 0:r}function k_e(e){const{parentProjection:t,projection:n}=e;return t&&n&&Tt(zin({parentProjection:t,projection:n})),n??t}function Fue(e){return"filter"in e}function nun(e){return(e==null?void 0:e.stop)!==void 0}function rze(e){return"lookup"in e}function run(e){return"data"in e}function iun(e){return"param"in e}function sun(e){return"pivot"in e}function oun(e){return"density"in e}function aun(e){return"quantile"in e}function uun(e){return"regression"in e}function lun(e){return"loess"in e}function cun(e){return"sample"in e}function fun(e){return"window"in e}function dun(e){return"joinaggregate"in e}function hun(e){return"flatten"in e}function pun(e){return"calculate"in e}function ize(e){return"bin"in e}function mun(e){return"impute"in e}function gun(e){return"timeUnit"in e}function yun(e){return"aggregate"in e}function vun(e){return"stack"in e}function bun(e){return"fold"in e}function xun(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function wun(e){return e.map(t=>Fue(t)?{filter:MS(t.filter,Ysn)}:t)}class _un extends Oue{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=R_e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=R_e(t,n),t.encoding){const r={};for(const[i,s]of tb(t.encoding))r[i]=sze(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:tb(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of cu(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function R_e(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(Fue(s))return{filter:iQ(s,t)};if(ize(s)&&uE(s.bin))return{...s,bin:oze(s.bin)};if(rze(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function sze(e,t){var r,i;const n=zn(e);if(At(n)&&uE(n.bin)&&(n.bin=oze(n.bin)),dE(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(k7(n))if(at(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:iQ(s,t)}});else{const{selection:s,param:o,test:a,...u}=sze(n.condition,t);n.condition=o?n.condition:{...u,test:iQ(n.condition,t)}}return n}function oze(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function iQ(e,t){const n=r=>MS(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):MS(e.test||e.filter,r=>r.selection?n(r.selection):r)}class sQ extends Oue{map(t,n){const r=n.selections??[];if(t.params&&!jy(t)){const i=[];for(const s of t.params)Rue(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(Bt(a)&&(a===t.name||i.includes(a))||at(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=sQ.prototype[e];sQ.prototype[e]=function(n,r){return t.call(this,n,Eun(n,r))}}function Eun(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function aze(e,t){t===void 0&&(t=JUe(e.config));const n=Aun(e,t),{width:r,height:i}=e,s=Dun(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const Sun=new tun,Cun=new _un,Tun=new sQ;function Aun(e,t={}){const n={config:t};return Tun.map(Sun.map(Cun.map(e,n),n),n)}function N_e(e){return Bt(e)?{type:e}:e??{}}function Dun(e,t,n){let{width:r,height:i}=t;const s=jy(e)||$7(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Tt(r_e("width")),r=void 0),i=="container"&&(Tt(r_e("height")),i=void 0));const a={type:"pad",...o,...n?N_e(n.autosize):{},...N_e(e.autosize)};if(a.type==="fit"&&!s&&(Tt(Cin),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Tt(i_e("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Tt(i_e("height")),!Cf(a,{type:"pad"}))return a}function Iun(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function kun(e){return e?`fit-${b7(e)}`:"fit"}const Run=["background","padding"];function P_e(e,t){const n={};for(const r of Run)e&&e[r]!==void 0&&(n[r]=vf(e[r]));return t&&(n.params=e.params),n}class Uy{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Uy(zn(this.explicit),zn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Io(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of xt(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function nm(e){return{explicit:!0,value:e}}function cf(e){return{explicit:!1,value:e}}function uze(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:L7(t,n,r,i)}}function L7(e,t,n,r){return e.explicit&&t.explicit&&Tt(fsn(n,r,e.value,t.value)),e}function ib(e,t,n,r,i=L7){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Cf(e.value,t.value)?e:i(e,t,n,r)}class Nun extends Uy{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function sT(e){return"url"in e}function k3(e){return"values"in e}function lze(e){return"name"in e&&!sT(e)&&!k3(e)&&!vv(e)}function vv(e){return e&&(cze(e)||fze(e)||Mue(e))}function cze(e){return"sequence"in e}function fze(e){return"sphere"in e}function Mue(e){return"graticule"in e}var Ms;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(Ms||(Ms={}));function dze(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Wd(i.field),i}function x_(e,t=!0,n=rl){if(at(e)){const r=e.map(i=>x_(i,t,n));return t?`[${r.join(", ")}]`:r}else if(lE(e))return n(t?g_(e):Msn(e));return t?n(Ji(e)):e}function Pun(e,t){for(const n of cu(e.component.selection??{})){const r=n.name;let i=`${r}${ob}, ${n.resolve==="global"?"true":`{unit: ${Lw(e)}}`}`;for(const s of z7)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+fln,on:[{events:{signal:n.name+ob},update:`modify(${Nt(n.name+w_)}, ${i})`}]})}return $ue(t)}function Oun(e,t){if(e.component.selection&&xt(e.component.selection).length){const n=Nt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Vb("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return $ue(t)}function Fun(e,t){let n=!1;for(const r of cu(e.component.selection??{})){const i=r.name,s=Nt(i+w_);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${kze}(${s}, ${Nt(a)}${u}`})}n=!0;for(const a of z7)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),$ue(t)}function Mun(e,t){const n=[...t],r=Lw(e,{escape:!1});for(const i of cu(e.component.selection??{})){const s={name:i.name+w_};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:xp}}]),i.init){const a=i.project.items.map(dze);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[xp]:x_(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:x_(u,!1)}))}n.filter(a=>a.name===i.name+w_).length||n.push(s)}return n}function hze(e,t){for(const n of cu(e.component.selection??{}))for(const r of z7)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function $un(e,t){for(const n of e.children)co(n)&&(t=hze(n,t));return t}function Lun(e,t,n,r){const i=Fze(e,t.param,t);return{signal:Yf(n.get("type"))&&at(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function $ue(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Wi{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Tt(Bin);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Lc extends Wi{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${lje()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function wq(e){return e.as!==void 0}function O_e(e){return`${e}_end`}class Mm extends Wi{clone(){return new Mm(null,zn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(cE(u)){if(co(n)){const{mark:c,markDef:f,config:d}=n,h=rb({fieldDef:s,markDef:f,config:d});(I3(c)||h)&&(l={timeUnit:La(u),field:a})}}else l={as:Pt(s,{forAs:!0}),field:a,timeUnit:u};if(co(n)){const{mark:c,markDef:f,config:d}=n,h=rb({fieldDef:s,markDef:f,config:d});I3(c)&&ko(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Fr(l)]=l)}return i},{});return Qi(r)?null:new Mm(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=La(r),o={...i,timeUnit:s};return new Mm(t,{[Fr(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of tb(this.timeUnits)){const s=wq(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(cu(this.timeUnits).map(t=>wq(t)?t.as:O_e(t.field)))}dependentFields(){return new Set(cu(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Fr(this.timeUnits)}`}assemble(){const t=[];for(const n of cu(this.timeUnits)){const{rectBandPosition:r}=n,i=La(n.timeUnit);if(wq(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Wd(s),type:"timeunit",...a?{units:E7(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...F_e(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=pze({timeUnit:i,field:o}),u=O_e(o);t.push({type:"formula",expr:a,as:u}),t.push(...F_e([o,u],r,i))}}return t}}const B7="offsetted_rect_start",j7="offsetted_rect_end";function pze({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=qje(r),{part:o,step:a}=Kje(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function F_e([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:M_e([pze({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${B7}`},{type:"formula",expr:M_e([i,s],n+.5),as:`${e}_${j7}`}]}return[]}function M_e([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const TP="_tuple_fields";class Bun{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const jun={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Bun),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Us(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Us(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?Lt(n.value):null;let{fields:d,encodings:h}=jt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(jt(p))for(const m of xt(p))ein(m)?(h||(h=[])).push(m):l==="interval"?(Tt(Fin),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Tt(Tin(p,m.aggregate));continue}else if(!g){Tt(o_e(p));continue}if(m.timeUnit&&!cE(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[Fr(y)]=y}if(!s[g]){const y=l==="interval"&&By(p)&&Yf(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===xp,mje(p)?(v.geoChannel=p,v.channel=pje(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Tt(o_e(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===xp}f&&(t.init=f.map(p=>i.items.map(m=>jt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Qi(o)||(i.timeUnit=new Mm(null,o))},signals:(e,t,n)=>{const r=t.name+TP;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(dze)})}},Bg={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!By(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Tt(kin),!s||!Yf(o)){Tt(Iin);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||$_e(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(kze)>=0)i.update=`{${r.map(o=>`${Nt(Wd(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Nt(Wd(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!$_e(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function oQ(e,t){return`domain(${Nt(e.scaleName(t))})`}function $_e(e){return e.parent&&NA(e.parent)&&!e.parent.parent}const BS="_brush",mze="_scale_trigger",YD="geo_interval_init_tick",gze="_init",Uun="_center",zun={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...jt(n.select)?n.select:{}};i.fields=[xp],i.encodings||(i.encodings=n.value?xt(n.value):[Fp,Op]),n.select={type:"interval",...i}}if(t.translate&&!Bg.defined(t)){const i=`!event.item || event.item.mark.name !== ${Nt(t.name+BS)}`;for(const s of t.events){if(!s.between){Tt(`${s} is not an ordered event stream for interval selections.`);continue}const o=Lt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+ob,s=cu(t.project.hasChannel).filter(a=>a.channel===zs||a.channel===Va),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(Vun(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=Nt(e.projectionName()),u=e.projectionName()+Uun,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=w=>e.getSizeSignalRef(w).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+gze,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(S=>S.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${Nt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${Lw(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,_=s.map(w=>w.signals.visual);return n.concat({name:i,on:[{events:[..._.length?[{signal:_.join(" || ")}]:[],...o?[{signal:YD}]:[]],update:b}]})}else{if(!Bg.defined(t)){const l=r+mze,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=Nt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=Yf(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${Lw(e)}, fields: ${r+TP}, values`;return n.concat({name:i,...o?{init:`{${u}: ${x_(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(co(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===YD).length||n.unshift({name:YD,value:null,on:[{events:"timer{1}",update:`${YD} === null ? {} : ${YD}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${Nt(t.name+w_)})`;if(Bg.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of xt(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${Lw(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=xt(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+BS}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+BS,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function Vun(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Nt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===zs?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=Bg.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:x_(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+mze},update:Yf(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:x_(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===zs?0:1,h=t.name+gze,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const Hun={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+TP,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=cu(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+BS):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${Lw(e)}, `;if(t.project.hasSelectionId)l+=`${xp}: ${o}[${Nt(xp)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${Nt(e.vgField(d.channel,{}))}], ${o}[${Nt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${Nt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+ob,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function DA(e,t,n,r){const i=k7(t)&&t.condition,s=r(t);if(i){const a=Lt(i).map(u=>{const l=r(u);if(Oon(u)){const{param:c,empty:f}=u;return{test:Oze(e,{param:c,empty:f}),...l}}else return{test:D$(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function Lue(e,t="text"){const n=e.encoding[t];return DA(e,n,t,r=>U7(r,e.config))}function U7(e,t,n="datum"){if(e){if(bp(e))return _s(e.value);if(Qn(e)){const{format:r,formatType:i}=w$(e);return pue({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function yze(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(at(o))return{tooltip:L_e({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return DA(e,o,"tooltip",u=>{const l=U7(u,i,a);if(l)return l;if(u===null)return;let c=Di("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),Bt(c))return{value:c};if(jt(c))return rn(c)?c:c.content==="encoding"?L_e(n,s,i,t):{signal:a}})}}function vze(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=aE(f),h=ql(c)?c:{...c,type:e[d].type},p=h.title||wue(h,i),m=Lt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(ko(f)){const y=f==="x"?"x2":"y2",v=r0(e[y]);if(eu(h.bin)&&v){const b=Pt(h,{expr:o}),_=Pt(v,{expr:o}),{format:w,formatType:S}=w$(h);g=wP(b,_,w,S,i),s[y]=!0}}if((ko(f)||f===ih||f===Pp)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=w$(h);g=pue({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=U7(h,i,o).signal),a.push({channel:f,key:m,value:g})}Sue(e,(c,f)=>{At(c)?u(c,f):R7(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function L_e(e,t,n,{reactiveGeom:r}={}){const i=vze(e,t,n,{reactiveGeom:r}),s=tb(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function qun(e){const{markDef:t,config:n}=e,r=Di("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...Wun(e),...Gun(e)}}function Wun(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Di("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in _in?{}:{ariaRoleDescription:{value:t}}}function Gun(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return DA(e,s,"description",u=>U7(u,e.config));const o=Di("description",n,r);if(o!=null)return{description:_s(o)};if(r.aria===!1)return{};const a=vze(t,i,r);if(!Qi(a))return{description:{signal:tb(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function Ra(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=Di(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=_s(u)));const l=i[e];return DA(t,l,o??e,c=>hue({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function bze(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Di("filled",n,i),a=Mr(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=Di(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=Di(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:_s(u)}:{},...l?{stroke:_s(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Tt(Mje("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Ra("color",e,{vgChannel:c,defaultValue:o?u:l}),...Ra("fill",e,{defaultValue:r.fill?u:void 0}),...Ra("stroke",e,{defaultValue:r.stroke?l:void 0})}}function Yun(e){const{encoding:t,mark:n}=e,r=t.order;return!fE(n)&&bp(r)?DA(e,r,"zindex",i=>_s(i.value)):{}}function oT({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:hue({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:_s(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function Wu(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[S0(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=oT({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=Bue({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&ko(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Kun({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function Kun(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(Qn(n)&&i&&t===i.fieldChannel){if(At(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return y$({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return Mw(n,r,{suffix:"end"},{offset:s})}return fue(e)}function Bue({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=aE(n),u=nb(n),l=Di(n,s,o,{vgChannel:u});if(l!==void 0)return Lk(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Mr([$c.LOG,$c.TIME,$c.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Xc(n)],mult:.5}}}}const Xun={left:"x",center:"xc",right:"x2"},Qun={top:"y",middle:"yc",bottom:"y2"};function xze(e,t,n,r="middle"){if(e==="radius"||e==="theta")return nb(e);const i=e==="x"?"align":"baseline",s=Di(i,t,n);let o;return rn(s)?(Tt(esn(i)),o=void 0):o=s,e==="x"?Xun[o||(r==="top"?"left":"center")]:Qun[o||r]}function T$(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?wze(e,t,{defaultPos:n,defaultPos2:r}):Wu(e,t,{defaultPos:n})}function wze(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=S0(e),a=Xc(e),u=Jun(t,r,o),l=u[a]?xze(e,i,s):nb(e);return{...Wu(e,t,{defaultPos:n,vgChannel:l}),...u}}function Jun(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=aE(n),l=Xc(n),c=nb(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?oT({channel:n,markDef:s,encoding:r,model:e}):oT({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=Xc(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=Zun({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:i6(n,s)||i6(n,{[n]:m$(n,s,a.style),[l]:m$(l,s,a.style)})||i6(n,a[i])||i6(n,a.mark)||{[c]:Bue({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function Zun({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return Qn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Mw(t,s,{suffix:"start"},{offset:u}):fue({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function i6(e,t){const n=Xc(e),r=nb(e);if(t[r]!==void 0)return{[r]:Lk(e,t[r])};if(t[e]!==void 0)return{[r]:Lk(e,t[e])};if(t[n]){const i=t[n];if(b_(i))Tt(Yin(n));else return{[n]:Lk(e,i)}}}function sb(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=S0(t),a=Xc(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??Di("size",i,n,{vgChannel:a}),p=bje(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return At(u)&&(ms(u.bin)||eu(u.bin)||u.timeUnit&&!l)&&!(h&&!b_(h))&&!r[p]&&!ja(f)?nln({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Qn(u)&&ja(f)||m)&&!l?tln(u,t,e):wze(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function eln(e,t,n,r,i,s,o){if(b_(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=hy("minBandSize",{type:o},r);return{signal:c?`max(${Xh(c)}, ${l})`:l}}else i.band!==1&&(Tt(isn(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(rn(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(Xb(u)&&fi(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=Io(u,o==="bar"?l:c);if(rn(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(fi(f))return{signal:`${1-f} * ${e}`}}return{value:S$(r.view,e)-2}}function tln(e,t,n){var k,I;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=Xc(t),f=S0(t),d=bje(t),h=n.scaleName(d),p=n.getScaleComponent(qae(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=Ra("size",n,{vgChannel:c,defaultRef:_s(r.size)}):Tt(usn(r.type)));const y=!!g,v=yUe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(k=l||p)==null?void 0:k.get("type"),useVlSizeChannel:m});g=g||{[c]:eln(c,h||u,p||l,s,v,!!e,r.type)};const b=((I=l||p)==null?void 0:I.get("type"))==="band"&&b_(v)&&!y?"top":"middle",_=xze(t,r,s,b),w=_==="xc"||_==="yc",{offset:S,offsetType:T}=oT({channel:t,markDef:r,encoding:i,model:n,bandPosition:w?.5:0}),A=fue({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:S,defaultRef:Bue({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:w?T==="encoding"?0:.5:rn(v)?{signal:`(1-${v})/2`}:b_(v)?(1-v.band)/2:0});if(c)return{[_]:A,...g};{const R=nb(f),F=g[c],O=S?{...F,offset:S}:F;return{[_]:A,[R]:at(A)?[A[0],{...A[1],offset:O}]:{...A,offset:O}}}}function B_e(e,t,n,r,i,s,o){if(hje(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(rn(n)||rn(i)||rn(r)||s){const l=Xh(n),c=Xh(i),f=Xh(r),d=Xh(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function nln({fieldDef:e,fieldDef2:t,channel:n,model:r}){var I;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=yUe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(I=r.component.axes[n])==null?void 0:I[0],h=(d==null?void 0:d.get("translate"))??.5,p=ko(n)?Di("binSpacing",s,i)??0:0,m=S0(n),g=nb(n),y=nb(m),v=hy("minBandSize",s,i),{offset:b}=oT({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:_}=oT({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),w=hon({fieldDef:e,scaleName:u}),S=B_e(n,p,c,h,b,v,w),T=B_e(m,p,c,h,_??b,v,w),A=rn(f)?{signal:`(1-${f.signal})/2`}:b_(f)?(1-f.band)/2:.5,k=rb({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(ms(e.bin)||e.timeUnit){const R=e.timeUnit&&k!==.5;return{[y]:j_e({fieldDef:e,scaleName:u,bandPosition:A,offset:T,useRectOffsetField:R}),[g]:j_e({fieldDef:e,scaleName:u,bandPosition:rn(A)?{signal:`1-${A.signal}`}:1-A,offset:S,useRectOffsetField:R})}}else if(eu(e.bin)){const R=Mw(e,u,{},{offset:T});if(At(t))return{[y]:R,[g]:Mw(t,u,{},{offset:S})};if(uE(e.bin)&&e.bin.step)return{[y]:R,[g]:{signal:`scale("${u}", ${Pt(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}Tt(Bje(m))}function j_e({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return y$({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:B7,endSuffix:j7}:{}})}const rln=new Set(["aria","width","height"]);function sh(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?bze(e):{};return{...iln(e.markDef,t),...U_e(e,"fill",n),...U_e(e,"stroke",r),...Ra("opacity",e),...Ra("fillOpacity",e),...Ra("strokeOpacity",e),...Ra("strokeWidth",e),...Ra("strokeDash",e),...Yun(e),...yze(e),...Lue(e,"href"),...qun(e)}}function U_e(e,t,n){const{config:r,mark:i,markDef:s}=e;if(Di("invalid",s,r)==="hide"&&n&&!fE(i)){const a=sln(e,{invalid:!0,channels:x7});if(a)return{[t]:[{test:a,value:null},...Lt(n)]}}return n?{[t]:n}:{}}function iln(e,t){return win.reduce((n,r)=>(!rln.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=_s(e[r])),n),{})}function sln(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&Yf(u)&&(s[l]=!0)}return s},{}),i=xt(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>due(o,t)).join(` ${s} `)}}function jue(e){const{config:t,markDef:n}=e;if(Di("invalid",n,t)){const i=oln(e,{channels:C0});if(i)return{defined:{signal:i}}}return{}}function oln(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&Yf(l)&&(s[c]=!0)}return s},{}),i=xt(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>due(o,t)).join(` ${s} `)}}function z_e(e,t){if(t!==void 0)return{[e]:_s(t)}}const _q="voronoi",_ze={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(_q)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(fE(s))return Tt(Ain(s)),n;const o={name:e.getName(_q),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...yze(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(_q)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},Eze={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!kue(e.bind),parse:(e,t,n)=>Rze(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=_ze.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Us(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:x_(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Nt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+ob)[0],o=r+TP,a=i.items.map(l=>Us(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},A$="_toggle",Sze={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+A$,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+ob,r=t.name+A$;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Lw(e)}}, `)+`${r} ? ${n} : null`}},aln={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Bt(t.clear)?Vb(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Eze.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Us(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+ob);r(i,"null"),Sze.defined(t)&&(i=n.findIndex(s=>s.name===t.name+A$),r(i,"false"))}return n}},Cze={defined:e=>{const t=e.resolve==="global"&&e.bind&&kue(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==xp;return t&&!n&&Tt(Rin),t&&n},parse:(e,t,n)=>{const r=zn(n);if(r.select=Bt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},Rze(t,r),jt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Lt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=vq(t.bind)?t.bind.legend:"click",s=Bt(i)?Vb(i,"view"):Lt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=vq(t.bind)&&t.bind.legend,s=o=>a=>{const u=zn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Us(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+ob),o=r+TP,a=i.items.filter(d=>d.hasLegend).map(d=>Us(`${r}_${Us(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+A$),f=vq(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function uln(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of cu(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&Cze.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const Tze="_translate_anchor",Aze="_translate_delta",lln={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Bg.defined(t),s=r+Tze,{x:o,y:a}=t.project.hasChannel;let u=Vb(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+BS,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?oQ(e,zs):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?oQ(e,Va):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+Aze,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&V_e(e,t,o,"width",n),a!==void 0&&V_e(e,t,a,"height",n),n}};function V_e(e,t,n,r,i){const s=t.name,o=s+Tze,a=s+Aze,u=n.channel,l=Bg.defined(t),c=i.filter(w=>w.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===zs?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",_=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?_:`clampRange(${_}, 0, ${f})`})}const Dze="_zoom_anchor",Ize="_zoom_delta",cln={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Bg.defined(t),s=r+Ize,{x:o,y:a}=t.project.hasChannel,u=Nt(e.scaleName(zs)),l=Nt(e.scaleName(Va));let c=Vb(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+BS,f))),n.push({name:r+Dze,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&H_e(e,t,o,"width",n),a!==void 0&&H_e(e,t,a,"height",n),n}};function H_e(e,t,n,r,i){const s=t.name,o=n.channel,a=Bg.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?oQ(e,o):u.name,h=s+Ize,p=`${s}${Dze}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const w_="_store",ob="_tuple",fln="_modify",kze="vlSelectionResolve",z7=[Hun,zun,jun,Sze,Eze,Bg,Cze,aln,lln,cln,_ze];function dln(e){let t=e.parent;for(;t&&!Nf(t);)t=t.parent;return t}function Lw(e,{escape:t}={escape:!0}){let n=t?Nt(e.name):e.name;const r=dln(e);if(r){const{facet:i}=r;for(const s of Nd)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Nt(r.vgField(s))}])`)}return n}function Uue(e){return cu(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function Rze(e,t){(Bt(t.select)||!t.select.on)&&delete e.events,(Bt(t.select)||!t.select.clear)&&delete e.clear,(Bt(t.select)||!t.select.toggle)&&delete e.toggle}function aQ(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...aQ(e.object)),t.push(...aQ(e.property))),t)}function Nze(e){return e.object.type==="MemberExpression"?Nze(e.object):e.object.name==="datum"}function Pze(e){const t=aae(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&Nze(r)&&n.add(aQ(r).slice(1).join("."))}),n}class IA extends Wi{clone(){return new IA(null,this.model,zn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=D$(this.model,this.filter,this),this._dependentFields=Pze(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function hln(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Us(i.name),o=i.select,a=Bt(o)?o:o.type,u=jt(o)?zn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=zn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:Bt(u.on)?Vb(u.on,"scope"):Lt(zn(u.on))},f=zn(i);for(const d of z7)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function Oze(e,t,n,r="datum"){const i=Bt(t)?t:t.param,s=Us(i),o=Nt(s+w_);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${Nt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function Fze(e,t,n){const r=Us(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Tt(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Nt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Tt((a.length?"Multiple ":"No ")+`matching ${Nt(i)} encoding found for selection ${Nt(n.param)}. Using "field": ${Nt(s)}.`)):s=a[0].field}return`${o.name}[${Nt(Wd(s))}]`}function pln(e,t){for(const[n,r]of tb(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Lc(new IA(t,e,{param:n}),i,Ms.Lookup,e.component.data.outputNodeRefCounts)}}function D$(e,t,n){return $k(t,r=>Bt(r)?r:qsn(r)?Oze(e,r,n):Qje(r))}function mln(e,t){if(e)return at(e)&&!S1(e)?e.map(n=>wue(n,t)).join(", "):e}function Eq(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function qI(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=Yon[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(CP(m)){const{condition:g,...y}=m,v=Lt(g),b=v_e[h];if(b){const{vgProp:_,part:w}=b,S=[...v.map(T=>{const{test:A,...k}=T;return{test:D$(null,A),...k}}),y];Eq(c,w,_,S),delete c[h]}else if(b===null){const _={signal:v.map(w=>{const{test:S,...T}=w;return`${D$(null,S)} ? ${n_e(T)} : `}).join("")+n_e(y)};c[h]=_}}else if(rn(m)){const g=v_e[h];if(g){const{vgProp:y,part:v}=g;Eq(c,v,y,m),delete c[h]}}Mr(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Qi(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Io(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&rn(c.encode.labels.update.text)&&(p=p_(a,"datum.label",c.encode.labels.update.text.signal)),Eq(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of AUe)e.hasAxisPart(p)||delete c.encode[p];Qi(c.encode)&&delete c.encode}const h=mln(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:Io(l,0)}}}}function Mze(e){const{axes:t}=e.component,n=[];for(const r of C0)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function gln(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>qI(i,"grid",t)),...r.map(i=>qI(i,"grid",t)),...n.map(i=>qI(i,"main",t)),...r.map(i=>qI(i,"main",t))].filter(i=>i)}function q_e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...xt(o),...xt(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Xh(o[c])} : ${Xh(a[c])}`};return l}return t[i]})])}function yln(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:tUe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=rn(n)?"axisOrient":`axis${mP(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:q_e(a,r,e,n),vgAxisConfig:q_e(u,r,e,n),axisConfigStyle:vln([...u,...a],r)}}function vln(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=Lt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function uQ(e,t,n,r={}){var s;const i=Ije(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const W_e={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??bln(n,e),gridScale:({model:e,channel:t})=>xln(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||Lze(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||$ze(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??_ln(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Eln(t.type,n,At(t)&&!!t.timeUnit,At(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??Cln({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:Tln,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=Bze(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return Rje(i?[g_e(i)]:[],At(o)?[g_e(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Aln(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Dln(n,t)};function bln(e,t){return!ja(e)&&At(t)&&!ms(t==null?void 0:t.bin)&&!eu(t==null?void 0:t.bin)}function xln(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function wln(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return rn(s)?s:D3(s);{const{configValue:o}=uQ("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?D3(o):n===zs&&Mr([cue,lue],e.type)&&!(At(e)&&e.timeUnit)?270:void 0}}function lQ(e){return`(((${e.signal} % 360) + 360) % 360)`}function $ze(e,t,n,r){if(e!==void 0)if(n==="x"){if(rn(e)){const i=lQ(e),s=rn(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(rn(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(rn(e)){const i=lQ(e),s=rn(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(rn(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function Lze(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(rn(e)){const o=lQ(e),a=rn(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(rn(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function _ln(e,t){if(t==="x"&&Mr(["quantitative","temporal"],e))return!0}function Eln(e,t,n,r){if(n&&!jt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function Sln(e){return e==="x"?"bottom":"left"}function Cln({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!ja(t)&&t!=="log"){if(At(e)){if(ms(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Mr(["month","hours","day","quarter"],(i=La(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Tln({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(At(t)){const{timeUnit:n}=t;if(n){const r=Yje(n);if(r)return{signal:r}}}}function Bze(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return Nje(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function Aln(e,t){const n=e.values;if(at(n))return TUe(t,n);if(rn(n))return n}function Dln(e,t){return e==="rect"&&x$(t)?1:0}class aT extends Wi{clone(){return new aT(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=Pze(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(dE(r)&&gUe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${Qje({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new aT(t,{calculate:u,as:uT(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Fr(this.transform)}`}}function uT(e,t,n){return Pt(e,{prefix:t,suffix:"sort_index",...n})}function V7(e,t){return Mr(["top","bottom"],t)?"column":Mr(["left","right"],t)||e==="row"?"row":"column"}function lT(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Io((t||{})[e],i[e],n.header[e])}function H7(e,t,n,r){const i={};for(const s of e){const o=lT(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const zue=["row","column"],Vue=["header","footer"];function Iln(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=H7(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=V7(t,a),l=D3(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...Uze(l,u),...jze(u,l,s),...zze(r,i,t,gan,HUe)}}}function jze(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=Lze(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function Uze(e,t){const n=$ze(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function kln(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Vue)if(n[i])for(const s of n[i]){const o=Nln(e,t,i,n,s);o!=null&&r.push(o)}return r}function Rln(e,t){const{sort:n}=e;return Fm(n)?{field:Pt(n,{expr:"datum"}),order:n.order??"ascending"}:at(n)?{field:uT(e,t,{expr:"datum"}),order:"ascending"}:{field:Pt(e,{expr:"datum"}),order:n??"ascending"}}function cQ(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=H7(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=pue({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=V7(t,a);return{text:{signal:u?p_(p_(u,"datum.label",l),"datum.value",Pt(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...Uze(s,c),...jze(c,s,o),...zze(n,e,t,yan,qUe)}}function Nln(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=H7(["labelOrient"],o.header,a,t);(t==="row"&&!Mr(["top","bottom"],f)||t==="column"&&!Mr(["left","right"],f))&&(s=cQ(o,t,a))}const u=Nf(e)&&!_P(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Rln(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const Pln={column:{start:0,end:1},row:{start:1,end:0}};function Oln(e,t){return Pln[t][e]}function Fln(e,t){const n={};for(const r of Nd){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=H7(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=V7(r,o),u=Oln(s,a);u!==void 0&&(n[a]=u)}}return Qi(n)?void 0:n}function zze(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=lT(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function Hue(e){return[...s6(e,"width"),...s6(e,"height"),...s6(e,"childWidth"),...s6(e,"childHeight")]}function s6(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(ja(o)&&Xb(a)){const u=e.scaleName(n);return Nf(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[G_e(u,a)]:[G_e(u,a),{name:i,update:Vze(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=nQ(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function G_e(e,t){const n=`${e}_step`;return rn(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function Vze(e,t,n){const r=t.get("type"),i=t.get("padding"),s=Io(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Xh(o)}, ${Xh(s)}) * ${e}_step`}function Hze(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function qze(e,t){return xt(e).reduce((n,r)=>{const i=e[r];return{...n,...DA(t,i,r,s=>_s(s.value))}},{})}function Wze(e,t){if(Nf(t))return e==="theta"?"independent":"shared";if(NA(t))return"shared";if(Que(t))return ko(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function que(e,t){const n=e.scale[t],r=ko(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Tt(hsn(t)),"independent"):e[r][t]||"shared"}const Mln={...xan,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},Gze=xt(Mln);class $ln extends Uy{}const Y_e={symbols:Lln,gradient:Bln,labels:jln,entries:Uln};function Lln(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...Sin({},n,Eon),...bze(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?Yze(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Yc)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=_s(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=_s(m??1));else if(at(f.fill)){const g=fQ(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=_s(g))}}if(f.stroke){if(r==="stroke"||!c&&r===Yc)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(at(f.stroke)){const g=Io(fQ(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==Ly){const g=At(t)&&Xze(n,i,t);g?f.opacity=[{test:g,..._s(m??1)},_s(u.legend.unselectedOpacity)]:m&&(f.opacity=_s(m))}return f={...f,...e},Qi(f)?void 0:f}function Bln(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?Yze(o.opacity)||s.opacity:void 0;return l&&(a.opacity=_s(l)),a={...a,...e},Qi(a)?void 0:a}function jln(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=At(t)?Xze(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;v_(c)?f=Jh({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Jh({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&At(t)&&t.timeUnit===void 0&&(f=Jh({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Qi(d)?void 0:d}function Uln(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function Yze(e){return Kze(e,(t,n)=>Math.max(t,n.value))}function fQ(e){return Kze(e,(t,n)=>Io(t,n.value))}function Kze(e,t){if(Mon(e))return Lt(e.condition).reduce(t,e.value);if(bp(e))return e.value}function Xze(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Nt(n.field);return r.map(s=>`(!length(data(${Nt(Us(s)+w_)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const K_e={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return aUe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return uUe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Yln(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??Kln(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??Vln(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>LS(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if($S(n)&&Qh(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>zln(t,e)};function zln(e,t){const n=e.values;if(at(n))return TUe(t,n);if(rn(n))return n}function Vln(e,t,n,r){if(t!=="shape"){const i=fQ(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Hln(e){const{legend:t}=e;return Io(t.type,qln(e))}function qln({channel:e,timeUnit:t,scaleType:n}){if($S(e)){if(Mr(["quarter","month","day"],t))return"symbol";if(Qh(n))return"gradient"}return"symbol"}function Wln({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Gln(n,t)}function Gln(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Yln({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Qh(i))return n==="horizontal"?r==="top"||r==="bottom"?X_e(t,"width",o,s):o:X_e(t,"height",u,a)}function X_e(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Kln(e){if(Mr(["quantile","threshold","log","symlog"],e))return"greedy"}function Qze(e){const t=co(e)?Xln(e):ecn(e);return e.component.legends=t,t}function Xln(e){const{encoding:t}=e,n={};for(const r of[Yc,...GUe]){const i=fa(t[r]);!i||!e.getScaleComponent(r)||r===Kc&&At(i)&&i.type===AA||(n[r]=Zln(e,r))}return n}function Qln(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Jln(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function Zln(e,t){var _;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new $ln({},Qln(e,t));uln(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=fa(i[t]),f=At(c)?(_=La(c.timeUnit))==null?void 0:_.unit:void 0,d=n.orient||s.legend.orient||"right",h=Hln({legend:n,channel:t,timeUnit:f,scaleType:l}),p=Wln({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const w of Gze){if(h==="gradient"&&w.startsWith("symbol")||h==="symbol"&&w.startsWith("gradient"))continue;const S=w in K_e?K_e[w](m):n[w];if(S!==void 0){const T=Jln(S,w,n,e.fieldDef(t));(T||s.legend[w]===void 0)&&a.set(w,S,T)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const w of["labels","legend","title","symbols","gradient","entries"]){const S=qze(g[w]??{},e),T=w in Y_e?Y_e[w](S,b):S;T!==void 0&&!Qi(T)&&(v[w]={...y!=null&&y.length&&At(c)?{name:`${Us(c.field)}_legend_${w}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:T})}return Qi(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function ecn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){Qze(r);for(const i of xt(r.component.legends))n.legend[i]=que(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=Jze(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of xt(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function Jze(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of Gze){const c=ib(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return tcn(f,d);case"title":return Pje(f,d);case"type":return i=!0,cf("symbol")}return L7(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&p$(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&p$(e.explicit,["encode","gradient"])),e}function tcn(e,t){return t.value==="circle"?t:e}function ncn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function Zze(e){const t=e.component.legends,n={};for(const i of xt(t)){const s=e.getScaleComponent(i),o=Ji(s.get("domains"));if(n[o])for(const a of n[o])Jze(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return cu(n).flat().map(i=>rcn(i,e.config)).filter(i=>i!==void 0)}function rcn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of GUe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&rn(s.encode.labels.update.text)&&(l=p_(r,"datum.label",s.encode.labels.update.text.signal)),ncn(s,"labels","text",{signal:l})}return s}}function icn(e){return NA(e)||Que(e)?scn(e):eVe(e)}function scn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),eVe(e))}function eVe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=rn(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Mr(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const ocn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class tVe extends Uy{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function nVe(e){e.component.projection=co(e)?acn(e):ccn(e)}function acn(e){if(e.hasProjection){const t=vc(e.specifiedProjection),n=!(t.scale!=null||t.translate!=null),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?ucn(e):void 0,s=new tVe(e.projectionName(!0),{...vc(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function ucn(e){const t=[],{encoding:n}=e;for(const r of[[Fp,Op],[Gd,Mp]])(fa(n[r[0]])||fa(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Kc)&&e.typedFieldDef(Kc).type===AA&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Ms.Main)),t}function lcn(e,t){const n=Lae(ocn,i=>!!(!vn(e.explicit,i)&&!vn(t.explicit,i)||vn(e.explicit,i)&&vn(t.explicit,i)&&Cf(e.get(i),t.get(i))));if(Cf(e.size,t.size)){if(n)return e;if(Cf(e.explicit,{}))return t;if(Cf(t.explicit,{}))return e}return null}function ccn(e){if(e.children.length===0)return;let t;for(const r of e.children)nVe(r);const n=Lae(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=lcn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new tVe(r,t.specifiedProjection,t.size,zn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function fcn(e,t,n,r){if(SP(t,n)){const i=co(e)?e.axis(n)??e.legend(n)??{}:{},s=Pt(t,{expr:"datum"}),o=Pt(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Pt(t,{binSuffix:"range",forAs:!0}),formula:wP(s,o,i.format,i.formatType,r)}}return{}}function rVe(e,t){return`${Cje(e)}_${t}`}function dcn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Wue(e,t,n){const r=N7(n,void 0)??{},i=rVe(r,t);return e.getName(`${i}_bins`)}function hcn(e){return"as"in e}function Q_e(e,t,n){let r,i;hcn(e)?r=Bt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Pt(e,{forAs:!0}),Pt(e,{binSuffix:"end",forAs:!0})];const s={...N7(t,void 0)},o=rVe(s,e.field),{signal:a,extentSignal:u}=dcn(n,o);if(w7(s.extent)){const c=s.extent;i=Fze(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class $m extends Wi{clone(){return new $m(null,zn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(ql(s)&&ms(s.bin)){const{key:a,binComponent:u}=Q_e(s,s.bin,n);i[a]={...u,...i[a],...fcn(n,s,o,n.config)}}return i},{});return Qi(r)?null:new $m(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=Q_e(n,n.bin,r);return new $m(t,{[i]:s})}merge(t,n){for(const r of xt(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=wm([...this.bins[r].as,...t.bins[r].as],Fr)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(cu(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(cu(this.bins).map(t=>t.field))}hash(){return`Bin ${Fr(this.bins)}`}assemble(){return cu(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Wd(t.field),as:r,signal:t.signal,...w7(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Wd(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:Pt({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function pcn(e,t,n,r){var s;const i=co(r)?r.encoding[S0(t)]:void 0;if(ql(n)&&co(r)&&vUe(n,i,r.markDef,r.config)){e.add(Pt(n,{})),e.add(Pt(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=rb({fieldDef:n,markDef:a,config:u});I3(o)&&l!==.5&&ko(t)&&(e.add(Pt(n,{suffix:B7})),e.add(Pt(n,{suffix:j7}))),n.bin&&SP(n,t)&&e.add(Pt(n,{binSuffix:"range"}))}else if(mje(t)){const o=pje(t);e.add(r.getName(o))}else e.add(Pt(n));return dE(n)&&ion((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function mcn(e,t){for(const n of xt(t)){const r=t[n];for(const i of xt(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class op extends Wi{clone(){return new op(null,new Set(this.dimensions),zn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Pt(o,{forAs:!0})]);else{if(dy(u)||Kb(u)){const c=dy(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([Pt({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([Pt(o,{forAs:!0})]);By(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([Pt({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([Pt({field:l,aggregate:"max"},{forAs:!0})]))}else pcn(s,a,o,n)}),s.size+xt(i).length===0)?null:new op(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||Pt(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||Pt(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+xt(i).length===0?null:new op(t,r,i)}merge(t){return oje(this.dimensions,t.dimensions)?(mcn(this.measures,t.measures),!0):(Isn("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...xt(this.measures)])}producedFields(){const t=new Set;for(const n of xt(this.measures))for(const r of xt(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Fr({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of xt(this.measures))for(const o of xt(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Wd(s));return{type:"aggregate",groupby:[...this.dimensions].map(Wd),ops:t,fields:n,as:r}}}class kA extends Wi{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Nd){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[Pt(o),...ms(a)?[Pt(o,{binSuffix:"end"})]:[]],...Fm(u)?{sortField:u}:at(u)?{sortIndexField:uT(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Nd)this[n]&&(t+=` ${n.charAt(0)}:${Fr(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Nd)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Nd)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of C0){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(ja(i)&&Xb(s)){const o=q7(this.childModel,n),a=Xue(o);a?t[n]=a:Tt(Qae(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=D7,field:f}=u;s.push(f),o.push(c),a.push(Pt(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of zue){for(const c of Vue){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[Lg,$g])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function J_e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function gcn(e,t){const n=Uae(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=J_e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=J_e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Tt(Lin(t)),null}function ycn(e){const t={};return VF(e.filter,n=>{if(Xje(n)){let r=null;tue(n)?r=vf(n.equal):rue(n)?r=vf(n.lte):nue(n)?r=vf(n.lt):iue(n)?r=vf(n.gt):sue(n)?r=vf(n.gte):oue(n)?r=n.range[0]:aue(n)&&(r=(n.oneOf??n.in)[0]),r&&(lE(r)?t[n.field]="date":fi(r)?t[n.field]="number":Bt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function vcn(e){const t={};function n(r){iT(r)?t[r.field]="date":r.type==="quantitative"&&min(r.aggregate)?t[r.field]="number":QC(r.field)>1?r.field in t||(t[r.field]="flatten"):dE(r)&&Fm(r.sort)&&QC(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((co(e)||Nf(e))&&e.forEachFieldDef((r,i)=>{if(ql(r))n(r);else{const s=aE(i),o=e.fieldDef(s);n({...r,type:o.type})}}),co(e)){const{mark:r,markDef:i,encoding:s}=e;if(fE(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];At(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function bcn(e){const t={};if(co(e)&&e.component.selection)for(const n of xt(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&QC(i.field)>1&&(t[i.field]="flatten")}return t}class Gu extends Wi{clone(){return new Gu(null,zn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Fr(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!vv(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of xt(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Tt(u_e(a,r[a],u.value)))}for(const a of xt(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Tt(u_e(a,n[a],u)))}const s=new Uy(n,r);i.copyAll(s);const o={};for(const a of xt(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return xt(o).length===0||i.parseNothing?null:new Gu(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of xt(this._parse)){const r=this._parse[n];QC(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(xt(this._parse))}dependentFields(){return new Set(xt(this._parse))}assembleTransforms(t=!1){return xt(this._parse).filter(n=>t?QC(n)>1:!0).map(n=>{const r=gcn(n,this._parse[n]);return r?{type:"formula",expr:r,as:CA(n)}:null}).filter(n=>n!==null)}}class ab extends Wi{clone(){return new ab(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([xp])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:xp}}}class AP extends Wi{clone(){return new AP(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Fr(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class DP extends Wi{clone(){return new DP(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Fr(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class __ extends Wi{constructor(t){super(null),t??(t={name:"source"});let n;if(vv(t)||(n=t.format?{...Mc(t.format,["parse"])}:{}),k3(t))this._data={values:t.values};else if(sT(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Mr(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else fze(t)?this._data={values:[{type:"Sphere"}]}:(lze(t)||vv(t))&&(this._data={});this._generator=vv(t),t.name&&(this._name=t.name),n&&!Qi(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Z_e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},xcn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},WI;function Gue(e){return e instanceof __||e instanceof AP||e instanceof DP}class Yue{constructor(){WI.set(this,void 0),Z_e(this,WI,!1,"f")}setModified(){Z_e(this,WI,!0,"f")}get modifiedFlag(){return xcn(this,WI,"f")}}WI=new WeakMap;class hE extends Yue{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Kue extends Yue{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class wcn extends Kue{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of xt(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class _cn extends Kue{constructor(t){super(),this.requiresSelectionId=t&&Uue(t)}run(t){t instanceof ab&&(this.requiresSelectionId&&(Gue(t.parent)||t.parent instanceof op||t.parent instanceof Gu)||(this.setModified(),t.remove()))}}class Ecn extends Yue{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Mm&&(r=t.producedFields(),Bae(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Scn extends Kue{constructor(){super()}run(t){t instanceof Lc&&!t.isRequired()&&(this.setModified(),t.remove())}}class Ccn extends hE{run(t){if(!Gue(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Gu)if(t instanceof Gu)this.setModified(),t.merge(n);else{if(jae(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Tcn extends hE{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Gu);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of xt(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Qi(i)){this.setModified();const o=new Gu(t,i);for(const a of n){if(a instanceof Gu)for(const u of xt(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof Gu&&xt(a.parse).length===0&&a.remove()}}}}}class Acn extends hE{run(t){t instanceof Lc||t.numChildren()>0||t instanceof kA||t instanceof __||(this.setModified(),t.remove())}}class Dcn extends hE{run(t){const n=t.children.filter(i=>i instanceof Mm),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Icn extends hE{run(t){const n=t.children.filter(i=>i instanceof op),r={};for(const i of n){const s=Fr(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of xt(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class kcn extends hE{constructor(t){super(),this.model=t}run(t){const n=!(Gue(t)||t instanceof IA||t instanceof Gu||t instanceof ab),r=[],i=[];for(const s of t.children)s instanceof $m&&(n&&!jae(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof $m?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class Rcn extends hE{run(t){const n=[...t.children];if(!h_(n,o=>o instanceof Lc)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Lc){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Lc)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class pE extends Wi{clone(){return new pE(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=wm(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Pt(t)}hash(){return`JoinAggregateTransform ${Fr(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function Ncn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Pt(r);return i&&t.push(i),t},[])}function Pcn(e){return at(e)&&e.every(t=>Bt(t))&&e.length>1}class jg extends Wi{clone(){return new jg(null,zn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(Io(f.order,"ascending"));const l={field:a,order:u};let c;return Pcn(s)?c=s:Bt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new jg(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return r0(p)}).filter(h=>!!h),c=Ncn(n),f=n.encoding.order;let d;if(at(f)||At(f))d=kje(f);else{const h=bUe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new jg(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Fr(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Pt(i,{binSuffix:"mid"})]:[Pt(i,{}),Pt(i,{binSuffix:"end"})]:[Pt(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=Pt(c,{expr:"datum"}),p=Pt(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:Pt(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:Pt(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class RA extends Wi{clone(){return new RA(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=wm(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Pt(t)}hash(){return`WindowTransform ${Fr(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Kae(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function Ocn(e){function t(n){if(!(n instanceof kA)){const r=n.clone();if(r instanceof Lc){const i=hQ+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof op||r instanceof jg||r instanceof RA||r instanceof pE)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function dQ(e){if(e instanceof kA)if(e.numChildren()===1&&!(e.children[0]instanceof Lc)){const t=e.children[0];(t instanceof op||t instanceof jg||t instanceof RA||t instanceof pE)&&t.addDimensions(e.fields),t.swapWithParent(),dQ(e)}else{const t=e.model.component.data.main;iVe(t);const n=Ocn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(dQ)}function iVe(e){if(e instanceof Lc&&e.type===Ms.Main&&e.numChildren()===1){const t=e.children[0];t instanceof kA||(t.swapWithParent(),iVe(e))}}const hQ="scale_",o6=5;function pQ(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!pQ(t.children))return!1}return!0}function bh(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function eEe(e,t,n){let r=e.sources,i=!1;return i=bh(new Scn,r)||i,i=bh(new _cn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=bh(new Acn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=bh(new Ccn,r)||i,i=bh(new kcn(t),r)||i,i=bh(new Ecn,r)||i,i=bh(new Tcn,r)||i,i=bh(new Icn,r)||i,i=bh(new Dcn,r)||i,i=bh(new wcn,r)||i,i=bh(new Rcn,r)||i),e.sources=r,i}function Fcn(e,t){pQ(e.sources);let n=0,r=0;for(let i=0;i<o6&&eEe(e,t,!0);i++)n++;e.sources.map(dQ);for(let i=0;i<o6&&eEe(e,t,!1);i++)r++;pQ(e.sources),Math.max(n,r)===o6&&Tt(`Maximum optimization runs(${o6}) reached.`)}class Ia{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Ia(()=>t(n))}}function sVe(e){co(e)?Mcn(e):$cn(e)}function Mcn(e){const t=e.component.scales;for(const n of xt(t)){const r=Bcn(e,n);if(t[n].setWithExplicit("domains",r),Ucn(e,n),e.component.data.isFaceted){let s=e;for(;!Nf(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Tg(a)&&(a.data=hQ+a.data.replace(hQ,""))}}}function $cn(e){for(const n of e.children)sVe(n);const t=e.component.scales;for(const n of xt(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=ib(r,o.getWithExplicit("domains"),"domains","scale",mQ);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Tt(Oin),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Lcn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=tEe(t,n);if(!i){Tt(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=tEe(t,n);if(i)return"unaggregated"}return e}function Bcn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Lcn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&fa(r.x2)?fa(r.x)?ib(h1(n,i,e,"x"),h1(n,i,e,"x2"),"domain","scale",mQ):h1(n,i,e,"x2"):t==="y"&&fa(r.y2)?fa(r.y)?ib(h1(n,i,e,"y"),h1(n,i,e,"y2"),"domain","scale",mQ):h1(n,i,e,"y2"):h1(n,i,e,t)}function jcn(e,t,n){return e.map(r=>({signal:`{data: ${P7(r,{timeUnit:n,type:t})}}`}))}function Sq(e,t,n){var i;const r=(i=La(n))==null?void 0:i.unit;return t==="temporal"||r?jcn(e,t,r):[e]}function h1(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=fa(i[r]),{type:c}=l,f=l.timeUnit;if(ron(t)){const p=h1(e,void 0,n,r),m=Sq(t.unionWith,c,f);return nm([...m,...p.value])}else{if(rn(t))return nm([t]);if(t&&t!=="unaggregated"&&!rUe(t))return nm(Sq(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return cf([[0,1]]);const p=n.requestDataName(Ms.Main);return cf([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=By(r)&&At(l)?zcn(n,r,e):void 0;if(T0(l)){const p=Sq([l.datum],c,f);return cf(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(Ms.Main),{field:m}=l;return cf([{data:p,field:Pt({field:m,aggregate:"min"})},{data:p,field:Pt({field:m,aggregate:"max"})}])}else if(ms(h.bin)){if(ja(e))return cf(e==="bin-ordinal"?[]:[{data:A3(d)?n.requestDataName(Ms.Main):n.requestDataName(Ms.Raw),field:n.vgField(r,SP(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!jt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(ms(p)){const m=Wue(n,h.field,p);return cf([new Ia(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return cf([{data:n.requestDataName(Ms.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Mr(["time","utc"],e)){const p=i[S0(r)];if(vUe(h,p,s,a)){const m=n.requestDataName(Ms.Main),g=rb({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=I3(o)&&g!==.5&&ko(r);return cf([{data:m,field:n.vgField(r,y?{suffix:B7}:{})},{data:m,field:n.vgField(r,{suffix:y?j7:"end"})}])}}return cf(d?[{data:A3(d)?n.requestDataName(Ms.Main):n.requestDataName(Ms.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(Ms.Main),field:n.vgField(r)}])}function Cq(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":D7),...r?{field:Wd(r)}:{},...i?{order:i}:{}}}function Ucn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=rUe(r)&&r,o=uE(i)&&w7(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function zcn(e,t,n){if(!ja(n))return;const r=e.fieldDef(t),i=r.sort;if(gUe(i))return{op:"min",field:uT(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Fm(i)){const a=s&&!o.has(i.field);return Cq(i,a)}else if(mUe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(dy(c)||Kb(c))return Cq({field:Pt(l),order:u},d);if(Kae(c)||!c)return Cq({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Mr(["ascending",void 0],i))return!0}}function tEe(e,t){const{aggregate:n,type:r}=e;return n?Bt(n)&&!yin.has(n)?{valid:!1,reason:osn(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:asn(e)}:{valid:!0}:{valid:!1,reason:ssn(e)}}function mQ(e,t,n,r){return e.explicit&&t.explicit&&Tt(dsn(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Vcn(e){const t=wm(e.map(o=>{if(Tg(o)){const{sort:a,...u}=o;return u}return o}),Fr),n=wm(e.map(o=>{if(Tg(o)){const a=o.sort;return a!==void 0&&!A3(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Fr);if(t.length===0)return;if(t.length===1){const o=e[0];if(Tg(o)&&n.length>0){let a=n[0];if(n.length>1){Tt(c_e);const u=n.filter(l=>jt(l)&&"op"in l&&l.op!=="min");n.every(l=>jt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(jt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=wm(n.map(o=>A3(o)||!("op"in o)||Bt(o.op)&&o.op in hin?o:(Tt(psn(o)),!0)),Fr);let i;r.length===1?i=r[0]:r.length>1&&(Tt(c_e),i=!0);const s=wm(e.map(o=>Tg(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Xue(e){if(Tg(e)&&Bt(e.field))return e.field;if(vin(e)){let t;for(const n of e.fields)if(Tg(n)&&Bt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Tt(msn),t}return Tt(gsn),t}else if(bin(e)){Tt(ysn);const t=e.fields[0];return Bt(t)?t:void 0}}function q7(e,t){const r=e.component.scales[t].get("domains").map(i=>(Tg(i)&&(i.data=e.lookupDataSource(i.data)),i));return Vcn(r)}function oVe(e){return NA(e)||Que(e)?e.children.reduce((t,n)=>t.concat(oVe(n)),nEe(e)):nEe(e)}function nEe(e){return xt(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=Hcn(i.range,s,n,e),h=q7(e,n),p=a?Lun(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function Hcn(e,t,n,r){if(ko(n)){if(Xb(e))return{step:{signal:`${t}_step`}}}else if(jt(e)&&Tg(e))return{...e,data:r.lookupDataSource(e.data)};return e}class aVe extends Uy{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:h_(this.get("domains"),t=>at(t)&&t.length===2&&fi(t[0])&&t[0]<=0&&fi(t[1])&&t[1]>=0)}}const qcn=["range","scheme"];function Wcn(e){const t=e.component.scales;for(const n of x7){const r=t[n];if(!r)continue;const i=Gcn(n,e);r.setWithExplicit("range",i)}}function rEe(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=Xc(t),o=e.getName(s);if(jt(r)&&r.binned&&r.step!==void 0)return new Ia(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(ms(r)){const a=Wue(e,i,r);return new Ia(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function Gcn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of qcn)if(n[f]!==void 0){const d=ZX(s,f),h=iUe(e,f);if(!d)Tt($je(s,f,e));else if(h)Tt(h);else switch(f){case"range":{const p=n.range;if(at(p)){if(ko(e))return nm(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Ia.fromName(y,g)}return m}))}else if(jt(p))return nm({data:t.requestDataName(Ms.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return nm(p)}case"scheme":return nm(Ycn(n[f]))}}const o=e===zs||e==="xOffset"?"width":"height",a=r[o];if(i0(a)){if(ko(e))if(ja(s)){const f=lVe(a,t,e);if(f)return nm({step:f})}else Tt(Lje(o));else if(vP(e)){const f=e===Hb?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=cVe(a,s);if(p)return nm(p)}}}const{rangeMin:u,rangeMax:l}=n,c=Kcn(e,t);return(u!==void 0||l!==void 0)&&ZX(s,"rangeMin")&&at(c)&&c.length===2?nm([u??c[0],l??c[1]]):cf(c)}function Ycn(e){return non(e)?{scheme:e.name,...Mc(e,["name"])}:{scheme:e}}function uVe(e,t,n,{center:r}={}){const i=Xc(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===Va&&Yf(n)?r?[Ia.fromName(a=>`${o(a)}/2`,s),Ia.fromName(a=>`-${o(a)}/2`,s)]:[Ia.fromName(o,s),0]:r?[Ia.fromName(a=>`-${o(a)}/2`,s),Ia.fromName(a=>`${o(a)}/2`,s)]:[0,Ia.fromName(o,s)]}function Kcn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=fa(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case zs:case Va:{if(Mr(["point","band"],u)){const f=fVe(e,n,r.view);if(i0(f))return{step:lVe(f,t,e)}}return uVe(e,t,u)}case Hb:case TA:return Xcn(e,t,u);case $y:{const f=t.component.scales[e].get("zero"),d=dVe(i,f,r),h=Zcn(i,n,t,r);return tT(u)?Jcn(d,h,Qcn(u,r,l,e)):[d,h]}case ih:return[0,Math.PI*2];case oE:return[0,360];case Pp:return[0,new Ia(()=>{const f=t.getSignalName(Nf(t.parent)?"child_width":"width"),d=t.getSignalName(Nf(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Gb:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Yb:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Kc:return"symbol";case Yc:case _0:case E0:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Ly:case qb:case Wb:return[r.scale.minOpacity,r.scale.maxOpacity]}}function lVe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=qae(n),o=r[s];if(KUe({step:e,offsetIsDiscrete:Qn(o)&&Jje(o.type)})==="offset"&&kUe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${Ein(f)})`}}else return e.step}function cVe(e,t){if(KUe({step:e,offsetIsDiscrete:ja(t)})==="offset")return{step:e.step}}function Xcn(e,t,n){const r=e===Hb?"x":"y",i=t.getScaleComponent(r);if(!i)return uVe(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=fVe(r,t.size,t.config.view);if(i0(l)){const c=cVe(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(At(l)&&l.timeUnit){const c=Yje(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=rb({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=rn(f)?`${f.signal}/2`+h:`${f/2+d}`,m=rn(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return ije(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function fVe(e,t,n){const r=e===zs?"width":"height",i=t[r];return i||C$(n,r)}function Qcn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&at(n)?n.length+1:(Tt(Tsn(r)),3)}}function Jcn(e,t,n){const r=()=>{const i=Xh(t),s=Xh(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return rn(t)?new Ia(r):{signal:r()}}function dVe(e,t,n){if(t)return rn(t)?{signal:`${t.signal} ? 0 : ${dVe(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(_7("size",e))}const iEe=.95;function Zcn(e,t,n,r){const i={x:rEe(n,"x"),y:rEe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=sEe(t,i,r.view);return fi(s)?s-1:new Ia(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=sEe(t,i,r.view);return fi(s)?Math.pow(iEe*s,2):new Ia(()=>`pow(${iEe} * ${s.signal}, 2)`)}}throw new Error(_7("size",e))}function sEe(e,t,n){const r=i0(e.width)?e.width.step:S$(n,"width"),i=i0(e.height)?e.height.step:S$(n,"height");return t.x||t.y?new Ia(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function hVe(e,t){co(e)?efn(e,t):mVe(e,t)}function efn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of xt(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=fa(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=ZX(h,t),y=iUe(a,t);if(d!==void 0&&(g?y&&Tt(y):Tt($je(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":lE(u[t])||b==="temporal"||v?l.set(t,{signal:P7(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in oEe?oEe[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:RUe(i,a),hasSecondaryRangeChannel:!!i[S0(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const oEe={bins:({model:e,fieldOrDatumDef:t})=>At(t)?tfn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>nfn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>rfn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>ifn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>sfn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>ofn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=At(e)?e.sort:void 0;return afn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>ufn(e,t,n,r,i,s.scale,o)};function pVe(e){co(e)?Wcn(e):mVe(e,"range")}function mVe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?pVe(r):hVe(r,t);for(const r of xt(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=ib(i,a,t,"scale",uze((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function tfn(e,t){const n=t.bin;if(ms(n)){const r=Wue(e,t.field,n);return new Ia(()=>e.getSignalName(r))}else if(eu(n)&&uE(n)&&n.step!==void 0)return{step:n.step}}function nfn(e,t){if(Mr([Yc,_0,E0],e)&&t!=="nominal")return"hcl"}function rfn(e,t,n,r,i,s){var o;if(!((o=r0(s))!=null&&o.bin||at(n)||i!=null||r!=null||Mr([$c.TIME,$c.UTC],e)))return ko(t)?!0:void 0}function ifn(e,t,n,r,i,s){if(ko(e)){if(Qh(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(At(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===$c.POINT)return n.pointPadding}}function sfn(e,t,n,r,i,s=!1){if(e===void 0){if(ko(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:Io(o,n==="bar"?a:u)}else if(vP(t)&&r===$c.BAND)return i.offsetBandPaddingInner}}function ofn(e,t,n,r,i,s=!1){if(e===void 0){if(ko(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===$c.BAND)return Io(o,rn(r)?{signal:`${r.signal}/2`}:r/2)}else if(vP(t)){if(n===$c.POINT)return .5;if(n===$c.BAND)return i.offsetBandPaddingOuter}}}function afn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Yf(e)&&t==="descending"?rn(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Yf(e)&&t==="descending")return!0}function ufn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Yf(i)){if(at(n)){const u=n[0],l=n[n.length-1];if(fi(u)&&u<=0&&fi(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!tT(i))return!0;if(!(At(t)&&t.bin)&&Mr([...C0,...sin],e)){const{orient:u,type:l}=r;return Mr(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Mr(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function lfn(e,t,n,r,i=!1){const s=cfn(t,n,r,i),{type:o}=e;return By(t)?o!==void 0?lon(t,o)?At(n)&&!uon(o,n.type)?(Tt(csn(o,s)),s):o:(Tt(lsn(t,o,s)),s):s:null}function cfn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if($S(e)||gq(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Tt(yq(e,"ordinal")),"ordinal";if(ko(e)||vP(e)){if(Mr(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Yae)return"band";const s=n[Xc(e)];return b_(s)||rT(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return $S(e)?"time":gq(e)==="discrete"?(Tt(yq(e,"temporal")),"ordinal"):At(t)&&t.timeUnit&&La(t.timeUnit).utc?"utc":"time";case"quantitative":return $S(e)?At(t)&&ms(t.bin)?"bin-ordinal":"linear":gq(e)==="discrete"?(Tt(yq(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(Fje(t.type))}function ffn(e,{ignoreRange:t}={}){gVe(e),sVe(e);for(const n of aon)hVe(e,n);t||pVe(e)}function gVe(e){co(e)?e.component.scales=dfn(e):e.component.scales=pfn(e)}function dfn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of x7){const o=fa(t[s]);if(o&&n===dUe&&s===Kc&&o.type===AA)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=RUe(t,s),l=lfn(a,s,o,r,u);i[s]=new aVe(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const hfn=uze((e,t)=>d_e(e)-d_e(t));function pfn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){gVe(s);for(const o of xt(s.component.scales))if((t=i.scale)[o]??(t[o]=Wze(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?Qsn(a.value,u.value)?r[o]=ib(a,u,"type","scale",hfn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of xt(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new aVe(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class Tq{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function co(e){return(e==null?void 0:e.type)==="unit"}function Nf(e){return(e==null?void 0:e.type)==="facet"}function Que(e){return(e==null?void 0:e.type)==="concat"}function NA(e){return(e==null?void 0:e.type)==="layer"}class Jue{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=vc(a),this.name=t.name??i,this.title=S1(t.title)?{text:t.title}:t.title?vc(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new Tq,this.projectionNameMap=r?r.projectionNameMap:new Tq,this.signalNameMap=r?r.signalNameMap:new Tq,this.data=t.data,this.description=t.description,this.transforms=wun(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:Can(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:I7(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Uy,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?zn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){ffn(this)}parseProjection(){nVe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Qze(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of xt(r)){const o=r[s];o!==void 0&&(i[s]=_s(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=_s(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Qi(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=Fln(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Nd)t[r].title&&n.push(Iln(this,r));for(const r of zue)n=n.concat(kln(this,r));return n}assembleAxes(){return gln(this.component.axes,this.config)}assembleLegends(){return Zze(this)}assembleProjections(){return icn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...Tje(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Mr(["unit","layer"],this.type)?Mr(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Qi(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Nf(this.parent)?oVe(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Us((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Ms[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Nf(this.parent)){const n=Hze(t),r=b7(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(ja(s)&&Xb(o)){const a=i.get("name"),u=q7(this,r),l=Xue(u);if(l){const c=Pt({aggregate:"distinct",field:l},{expr:"datum"});return{signal:Vze(a,i,c)}}else return Tt(Qae(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(yje(t)&&By(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(Din(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class yVe extends Jue{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Pt(r,n)}reduceFieldDef(t,n){return ean(this.getMapping(),(r,i,s)=>{const o=r0(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){Sue(this.getMapping(),(r,i)=>{const s=r0(r);s&&t(s,i)},n)}}class W7 extends Wi{clone(){return new W7(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=zn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Fr(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class G7 extends Wi{clone(){return new G7(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=zn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Fr(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class R3 extends Wi{clone(){return new R3(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(Di("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=By(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Yf(d)&&l.aggregate!=="count"&&!fE(i)&&(u[l.field]=l)}return u},{});return xt(a).length?new R3(t,a):null}dependentFields(){return new Set(xt(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Fr(this.filter)}`}assemble(){const t=xt(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Pt(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class Y7 extends Wi{clone(){return new Y7(this.parent,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=zn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Fr(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class K7 extends Wi{clone(){return new K7(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=zn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Fr(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class jS extends Wi{clone(){return new jS(null,zn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Fp,Op],[Gd,Mp]]){const s=i.map(o=>{const a=fa(n.encoding[o]);return At(a)?a.field:T0(a)?{expr:`${a.datum}`}:bp(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new jS(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Kc)){const i=n.typedFieldDef(Kc);i.type===AA&&(t=new jS(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Bt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Fr(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class N3 extends Wi{clone(){return new N3(null,this.projection,zn(this.fields),zn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Fp,Op],[Gd,Mp]]){const i=r.map(o=>{const a=fa(n.encoding[o]);return At(a)?a.field:T0(a)?{expr:`${a.datum}`}:bp(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Gd?"2":"";(i[0]||i[1])&&(t=new N3(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Bt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Fr(this.fields)} ${Fr(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Bw extends Wi{clone(){return new Bw(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Bw(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(At(i)&&At(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=PUe(n.mark,r);return new Bw(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Fr(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:nun(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class X7 extends Wi{clone(){return new X7(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=zn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Fr(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class P3 extends Wi{clone(){return new P3(null,zn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(run(o)){let u=xVe(o.data,s);u||(u=new __(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Lc(u,l,Ms.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(iun(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Us(u),u)}catch{throw new Error(Nin(u))}if(a=l.materialized,!a)throw new Error(Pin(u))}return new P3(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Lt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Fr({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Lt(this.transform.as)}:{}};else{let n=this.transform.as;Bt(n)||(Tt(Uin),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class Q7 extends Wi{clone(){return new Q7(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=zn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Fr(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class J7 extends Wi{clone(){return new J7(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=zn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Fr(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class Z7 extends Wi{clone(){return new Z7(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=wm((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Fr(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class ej extends Wi{clone(){return new ej(null,zn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Fr(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function vVe(e){let t=0;function n(r,i){if(r instanceof __&&!r.isGenerator&&!sT(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Gu&&(r.parent instanceof __&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof kA){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof AP||r instanceof DP||r instanceof R3||r instanceof IA||r instanceof aT||r instanceof N3||r instanceof op||r instanceof P3||r instanceof RA||r instanceof pE||r instanceof K7||r instanceof Y7||r instanceof W7||r instanceof X7||r instanceof Q7||r instanceof J7||r instanceof ab||r instanceof ej||r instanceof Z7||r instanceof G7)&&i.transform.push(r.assemble()),(r instanceof $m||r instanceof Mm||r instanceof Bw||r instanceof jg||r instanceof jS)&&i.transform.push(...r.assemble()),r instanceof Lc&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Lc?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Lc&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function mfn(e){const t=[],n=vVe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function gfn(e,t){const n=[],r=vVe(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function yfn(e){return e==="top"||e==="left"||rn(e)?"header":"footer"}function vfn(e){for(const t of Nd)bfn(e,t);aEe(e,"x"),aEe(e,"y")}function bfn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=lT("title",null,r,t);let l=LS(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=at(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=lT("labelOrient",a.header,r,t),f=a.header!==null?Io((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Mr(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[bVe(e,t,f)]}}}function bVe(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function aEe(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=que(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=yfn(a.get("orient"));o[u]??(o[u]=[bVe(e,s,!1)]);const l=qI(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function xfn(e){Zue(e),I$(e,"width"),I$(e,"height")}function wfn(e){Zue(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";I$(e,t),I$(e,n)}function Zue(e){for(const t of e.children)t.parseLayoutSize()}function I$(e,t){const n=Hze(t),r=b7(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??Wze(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=ib(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function _fn(e){const{size:t,component:n}=e;for(const r of C0){const i=Xc(r);if(t[i]){const s=t[i];n.layoutSize.set(i,i0(s)?"step":s,!0)}else{const s=Efn(e,i);n.layoutSize.set(i,s,!1)}}}function Efn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(ja(s)){const a=C$(r.view,t);return Xb(o)||i0(a)?"step":a}else return nQ(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return nQ(r.view,t);{const s=C$(r.view,t);return i0(s)?s.step:s}}}function gQ(e,t,n){return Pt(t,{suffix:`by_${Pt(e)}`,...n})}class Bk extends yVe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=ile(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!_P(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=xt(t),r={};for(const i of n){if(![$g,Lg].includes(i)){Tt(_7(i,"facet"));break}const s=t[i];if(s.field===void 0){Tt(QX(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=_ue(t,n);return r.header?r.header=vc(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=tj(this),this.child.parseData()}parseLayoutSize(){Zue(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),vfn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Nd)for(const r of Vue){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=lT("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=V7(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Bk))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Bk?{...this.channelHasField("column")?{encode:{update:{columns:{field:Pt(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof Bk){if(this.child.channelHasField("column")){const i=Pt(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of C0){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(ja(o)&&Xb(a)){const u=q7(this.child,i),l=Xue(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Tt(Qae(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Nd){const f=this.facet[c];if(f){u.push(Pt(f));const{bin:d,sort:h}=f;if(ms(d)&&u.push(Pt(f,{binSuffix:"end"})),Fm(h)){const{field:p,op:m=D7}=h,g=gQ(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(at(h)){const p=uT(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Fm(r.sort)?[gQ(r,r.sort,{expr:"datum"})]:at(r.sort)?[uT(r,t,{expr:"datum"})]:[Pt(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Fm(i)?i.order:!at(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return cQ(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of zue)if(t[s]){const o=lT("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return cQ(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=mfn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Nd.map(u=>this.facetSortFields(u)).flat(),order:Nd.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(Oun(this,[]))}]}getMapping(){return this.facet}}function Sfn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Fm(s.sort)){const{field:o,op:a=D7}=s.sort;e=i=new pE(e,{joinaggregate:[{op:a,field:o,as:gQ(s,s.sort,{forAs:!0})}],groupby:[Pt(s)]})}return i}return null}function xVe(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(k3(e)&&k3(a)){if(Cf(e.values,a.values))return o}else if(sT(e)&&sT(a)){if(e.url===a.url)return o}else if(lze(e)&&e.name===o.dataName)return o}}return null}function Cfn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new __({values:[]});return t.push(r),r}const n=xVe(e.data,t);if(n)return vv(e.data)||(n.data.format=sje({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new __(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Tfn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(pun(i))o=e=new aT(e,i),s="derived";else if(Fue(i)){const a=ycn(i);o=e=Gu.makeWithAncestors(e,{},a,n)??e,e=new IA(e,t,i.filter)}else if(ize(i))o=e=$m.makeFromTransform(e,i,t),s="number";else if(gun(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new Gu(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Mm.makeFromTransform(e,i);else if(yun(i))o=e=op.makeFromTransform(e,i),s="number",Uue(t)&&(e=new ab(e));else if(rze(i))o=e=P3.make(e,t,i,r++),s="derived";else if(fun(i))o=e=new RA(e,i),s="number";else if(dun(i))o=e=new pE(e,i),s="number";else if(vun(i))o=e=jg.makeFromTransform(e,i),s="derived";else if(bun(i))o=e=new K7(e,i),s="derived";else if(xun(i))o=e=new G7(e,i),s="derived";else if(hun(i))o=e=new Y7(e,i),s="derived";else if(sun(i))o=e=new Z7(e,i),s="derived";else if(cun(i))e=new ej(e,i);else if(mun(i))o=e=Bw.makeFromTransform(e,i),s="derived";else if(oun(i))o=e=new W7(e,i),s="derived";else if(aun(i))o=e=new Q7(e,i),s="derived";else if(uun(i))o=e=new J7(e,i),s="derived";else if(lun(i))o=e=new X7(e,i),s="derived";else{Tt(jin(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function tj(e){var h;let t=Cfn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(vv(i)||sT(i)||k3(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Nun;vv(i)?(cze(i)?t=new DP(t,i.sequence):Mue(i)&&(t=new AP(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=Gu.makeExplicit(t,e,o)??t,t=new ab(t);const a=e.parent&&NA(e.parent);(co(e)||Nf(e))&&a&&(t=$m.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Tfn(t,e,o));const u=bcn(e),l=vcn(e);t=Gu.makeWithAncestors(t,{},{...u,...l},o)??t,co(e)&&(t=jS.parseAll(t,e),t=N3.parseAll(t,e)),(co(e)||Nf(e))&&(a||(t=$m.makeFromEncoding(t,e)??t),t=Mm.makeFromEncoding(t,e)??t,t=aT.parseAllForSortIndex(t,e));const c=t=uEe(Ms.Raw,e,t);if(co(e)){const p=op.makeFromEncoding(t,e);p&&(t=p,Uue(e)&&(t=new ab(t))),t=Bw.makeFromEncoding(t,e)??t,t=jg.makeFromEncoding(t,e)??t}co(e)&&(t=R3.make(t,e)??t);const f=t=uEe(Ms.Main,e,t);co(e)&&pln(e,f);let d=null;if(Nf(e)){const p=e.getName("facet");t=Sfn(t,e.facet)??t,d=new kA(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function uEe(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Lc(n,s,e,i);return r[s]=o,o}class Afn extends Jue{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Tt($in),this.children=this.getChildren(t).map((l,c)=>ile(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=tj(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of xt(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return M7(t)?t.vconcat:Pue(t)?t.hconcat:t.concat}parseLayoutSize(){wfn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Hue(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Dfn(e){return e===!1||e===null}const Ifn={disable:1,gridScale:1,scale:1,...DUe,labelExpr:1,encode:1},wVe=xt(Ifn);class ele extends Uy{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new ele(zn(this.explicit),zn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Dfn(this.get(t))}hasOrientSignalRef(){return rn(this.explicit.orient)}}function kfn(e,t,n){const{encoding:r,config:i}=e,s=fa(r[t])??fa(r[S0(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(v_(u))return{text:Jh({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(nT(s)==="quantitative"){if(rT(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Jh({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Jh({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(nT(s)==="temporal"&&i.timeFormatType&&At(s)&&!s.timeUnit)return{text:Jh({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Rfn(e){return C0.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Lfn(n,e)]),t),{})}const Nfn={bottom:"top",top:"bottom",left:"right",right:"left"};function Pfn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of xt(i.component.axes))n.axis[s]=que(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=Ofn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of C0){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!rn(a)){if(r[a]>0&&!u){const l=Nfn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function Ofn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=Ffn(i,s)}}}else return t.map(n=>n.clone());return e}function Ffn(e,t){for(const n of wVe){const r=ib(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return Pje(i,s);case"gridScale":return{explicit:i.explicit,value:Io(i.value,s.value)}}return L7(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Mfn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(rn(n.labelAngle)?n.labelAngle:D3(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===Bze(r,i))return!0}return e===n[t]}const $fn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Lfn(e,t){var y,v;let n=t.axis(e);const r=new ele,i=fa(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||Sln(e),u=t.getScaleComponent(e).get("type"),l=yln(e,u,a,t.config),c=n!==void 0?!n:uQ("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=wln(i,n,e,o.style,l),d=uUe(n.formatType,i,u),h=aUe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of wVe){const _=b in W_e?W_e[b](p):b_e(b)?n[b]:void 0,w=_!==void 0,S=Mfn(_,b,n,t,e);if(w&&S)r.set(b,_,S);else{const{configValue:T=void 0,configFrom:A=void 0}=b_e(b)&&b!=="values"?uQ(b,o.style,n.style,l):{},k=T!==void 0;w&&!k?r.set(b,_,S):(A!=="vgAxisConfig"||$fn.has(b)&&k||CP(T)||rn(T))&&r.set(b,T,!1)}}const m=n.encoding??{},g=AUe.reduce((b,_)=>{if(!r.hasAxisPart(_))return b;const w=qze(m[_]??{},t),S=_==="labels"?kfn(t,e,w):w;return S!==void 0&&!Qi(S)&&(b[_]={update:S}),b},{});return Qi(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Bfn({encoding:e,size:t}){for(const n of C0){const r=Xc(n);i0(t[r])&&X1(e[n])&&(delete t[r],Tt(Lje(r)))}return t}const jfn={vgMark:"arc",encodeEntry:e=>({...sh(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Wu("x",e,{defaultPos:"mid"}),...Wu("y",e,{defaultPos:"mid"}),...sb(e,"radius"),...sb(e,"theta")})},Ufn={vgMark:"area",encodeEntry:e=>({...sh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...T$("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...T$("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...jue(e)})},zfn={vgMark:"rect",encodeEntry:e=>({...sh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...sb(e,"x"),...sb(e,"y")})},Vfn={vgMark:"shape",encodeEntry:e=>({...sh(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&At(n)&&n.type===AA?{field:Pt(n,{expr:"datum"})}:{}}]}},Hfn={vgMark:"image",encodeEntry:e=>({...sh(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...sb(e,"x"),...sb(e,"y"),...Lue(e,"url")})},qfn={vgMark:"line",encodeEntry:e=>({...sh(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Wu("x",e,{defaultPos:"mid"}),...Wu("y",e,{defaultPos:"mid"}),...Ra("size",e,{vgChannel:"strokeWidth"}),...jue(e)})},Wfn={vgMark:"trail",encodeEntry:e=>({...sh(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Wu("x",e,{defaultPos:"mid"}),...Wu("y",e,{defaultPos:"mid"}),...Ra("size",e),...jue(e)})};function tle(e,t){const{config:n}=e;return{...sh(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Wu("x",e,{defaultPos:"mid"}),...Wu("y",e,{defaultPos:"mid"}),...Ra("size",e),...Ra("angle",e),...Gfn(e,n,t)}}function Gfn(e,t,n){return n?{shape:{value:n}}:Ra("shape",e)}const Yfn={vgMark:"symbol",encodeEntry:e=>tle(e)},Kfn={vgMark:"symbol",encodeEntry:e=>tle(e,"circle")},Xfn={vgMark:"symbol",encodeEntry:e=>tle(e,"square")},Qfn={vgMark:"rect",encodeEntry:e=>({...sh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...sb(e,"x"),...sb(e,"y")})},Jfn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...sh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...T$("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...T$("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Ra("size",e,{vgChannel:"strokeWidth"})}}},Zfn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...sh(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Wu("x",e,{defaultPos:"mid"}),...Wu("y",e,{defaultPos:"mid"}),...Lue(e),...Ra("size",e,{vgChannel:"fontSize"}),...Ra("angle",e),...z_e("align",edn(e.markDef,n,t)),...z_e("baseline",tdn(e.markDef,n,t)),...Wu("radius",e,{defaultPos:null}),...Wu("theta",e,{defaultPos:null})}}};function edn(e,t,n){if(Di("align",e,n)===void 0)return"center"}function tdn(e,t,n){if(Di("baseline",e,n)===void 0)return"middle"}const ndn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...sh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Wu("x",e,{defaultPos:"mid",vgChannel:"xc"}),...Wu("y",e,{defaultPos:"mid",vgChannel:"yc"}),...Ra("size",e,{defaultValue:rdn(e),vgChannel:i}),[s]:_s(Di("thickness",n,t))}}};function rdn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=Di("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&Xb(a)&&fi(a.step)?a.step*3/4:S$(t.view,i)*3/4}}const a6={arc:jfn,area:Ufn,bar:zfn,circle:Kfn,geoshape:Vfn,image:Hfn,line:qfn,point:Yfn,rect:Qfn,rule:Jfn,square:Xfn,text:Zfn,tick:ndn,trail:Wfn};function idn(e){if(Mr([T7,S7,bon],e.mark)){const t=PUe(e.mark,e.encoding);if(t.length>0)return sdn(e,t)}else if(e.mark===C7){const t=XX.some(n=>Di(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return odn(e)}return nle(e)}const lEe="faceted_path_";function sdn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:lEe+e.requestDataName(Ms.Main),data:e.requestDataName(Ms.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:nle(e,{fromPrefix:lEe})}]}const cEe="stack_group_";function odn(e){var l;const[t]=nle(e,{fromPrefix:cEe}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...XC(t.encode.update,["y","yc","y2","height",...XX]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Mc(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...XC(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Mc(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of XX){const f=hy(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=_s(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=Pt(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(Pt(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=hy(f,e.markDef,e.config);return d!==void 0?{...c,[f]:_s(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Ms.Main),name:cEe+e.requestDataName(Ms.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function adn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!at(o)&&bp(o)&&YX(o.value)||!o&&YX(Di("order",i,s)))){if((at(o)||At(o))&&!n)return kje(o,{expr:"datum"});if(fE(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(At(l)){const c=l.sort;if(at(c))return{field:Pt(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Fm(c))return{field:Pt({aggregate:Eue(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(mUe(c)){const f=e.fieldDef(c.encoding);return{field:Pt(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:Pt(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function nle(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=Io(r.clip,udn(e),ldn(e)),a=Dje(r),u=i.key,l=adn(e),c=cdn(e),f=Di("aria",r,s),d=a6[n].postEncodingTransform?a6[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:a6[n].vgMark,...o?{clip:o}:{},style:a,...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Ms.Main)},encode:{update:a6[n].encodeEntry(e)},...d?{transform:d}:{}}]}function udn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function ldn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function cdn(e){if(!e.component.selection)return null;const t=xt(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=xt(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class _Ve extends yVe{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,w_e(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=n0(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=Yan(o,s,{graticule:t.data&&Mue(t.data)}));const u=this.encoding=Jon(t.encoding||{},a,o.filled,s);this.markDef=eze(o,u,s),this.size=Bfn({encoding:u,size:w_e(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=ZUe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Rue(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===dUe,r=t&&Xrn.some(i=>Qn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return x7.reduce((r,i)=>{const s=fa(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=vc(t);return at(n)&&(i.domain=n.map(vf)),at(r)&&(i.range=r.map(vf)),i}initAxes(t){return C0.reduce((n,r)=>{const i=t[r];if(Qn(i)||r===zs&&Qn(t.x2)||r===Va&&Qn(t.y2)){const s=Qn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=xt(t),r={};for(const i of n){const s=t[i];r[i]=CP(s)?Aje(s):vf(s)}return r}initLegends(t){return oin.reduce((n,r)=>{const i=fa(t[r]);if(i&&uin(r)){const s=i.legend;n[r]=s&&vc(s)}return n},{})}parseData(){this.component.data=tj(this)}parseLayoutSize(){_fn(this)}parseSelections(){this.component.selection=hln(this,this.selection)}parseMarkGroup(){this.component.mark=idn(this)}parseAxesAndHeaders(){this.component.axes=Rfn(this)}assembleSelectionTopLevelSignals(t){return Fun(this,t)}assembleSignals(){return[...Mze(this),...Pun(this,[])]}assembleSelectionData(t){return Mun(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Hue(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!NA(this.parent))&&(t=hze(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return $w(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return r0(n)}typedFieldDef(t){const n=this.fieldDef(t);return ql(n)?n:null}}class rle extends Jue{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if($7(a))return new rle(a,this,this.getName(`layer_${u}`),o,s);if(jy(a))return new _Ve(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Xae(a))})}parseData(){this.component.data=tj(this);for(const t of this.children)t.parseData()}parseLayoutSize(){xfn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of xt(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Pfn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),Mze(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Hue(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Lt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return $un(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),Zze(this))}}function ile(e,t,n,r,i){if(I7(e))return new Bk(e,t,n,i);if($7(e))return new rle(e,t,n,r,i);if(jy(e))return new _Ve(e,t,n,r,i);if(_an(e))return new Afn(e,t,n,i);throw new Error(Xae(e))}function fdn(e,t={}){t.logger&&Asn(t.logger),t.fieldTitle&&SUe(t.fieldTitle);try{const n=JUe(pA(t.config,e.config)),r=aze(e,n),i=ile(r,null,"",void 0,n);return i.parse(),Fcn(i.component.data,i),{spec:hdn(i,ddn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&Dsn(),t.fieldTitle&&Von()}}function ddn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Bt(t)&&(t={type:t}),i&&s&&Iun(t.type)){if(i==="step"&&s==="step")Tt(s_e()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Tt(s_e(b7(o)));const a=o==="width"?"height":"width";t.type=kun(a)}}return{...xt(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...P_e(n,!1),...P_e(e,!0)}}function hdn(e,t,n={},r){const i=e.config?Man(e.config):void 0,s=[].concat(e.assembleSelectionData([]),gfn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...YUe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const pdn=Hrn.version,mdn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:QC,accessPathWithDatum:Uae,compile:fdn,contains:Mr,deepEqual:Cf,deleteNestedProperty:p$,duplicate:zn,entries:tb,every:Lae,fieldIntersection:jae,flatAccessWithDatum:aje,getFirstDefined:Io,hasIntersection:Bae,hash:Fr,internalField:cje,isBoolean:A3,isEmpty:Qi,isEqual:Wrn,isInternalField:fje,isNullOrFalse:YX,isNumeric:h7,keys:xt,logicalExpr:$k,mergeDeep:sje,never:ije,normalize:aze,normalizeAngle:D3,omit:Mc,pick:XC,prefixGenerator:KX,removePathFromField:CA,replaceAll:p_,replacePathInField:Wd,resetIdCounter:Yrn,setEqual:oje,some:h_,stringify:Ji,titleCase:mP,unique:wm,uniqueId:lje,vals:cu,varName:Us,version:pdn},Symbol.toStringTag,{value:"Module"}));function EVe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var gdn="vega-themes",ydn="2.15.0",vdn="Themes for stylized Vega and Vega-Lite visualizations.",bdn=["vega","vega-lite","themes","style"],xdn="BSD-3-Clause",wdn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},_dn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Edn="build/vega-themes.js",sle="build/vega-themes.module.js",Sdn="build/vega-themes.min.js",Cdn="build/vega-themes.min.js",Tdn="build/vega-themes.module.d.ts",Adn={type:"git",url:"https://github.com/vega/vega-themes.git"},Ddn=["src","build"],Idn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},kdn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},Rdn={vega:"*","vega-lite":"*"},Ndn={},Pdn={name:gdn,version:ydn,description:vdn,keywords:bdn,license:xdn,author:wdn,contributors:_dn,main:Edn,module:sle,unpkg:Sdn,jsdelivr:Cdn,types:Tdn,repository:Adn,files:Ddn,scripts:Idn,devDependencies:kdn,peerDependencies:Rdn,dependencies:Ndn};const d2="#fff",fEe="#888",Odn={background:"#333",view:{stroke:fEe},title:{color:d2,subtitleColor:d2},style:{"guide-label":{fill:d2},"guide-title":{fill:d2}},axis:{domainColor:d2,gridColor:fEe,tickColor:d2}},xx="#4572a7",Fdn={background:"#fff",arc:{fill:xx},area:{fill:xx},line:{stroke:xx,strokeWidth:2},path:{stroke:xx},rect:{fill:xx},shape:{stroke:xx},symbol:{fill:xx,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},wx="#30a2da",Aq="#cbcbcb",Mdn="#999",$dn="#333",dEe="#f0f0f0",hEe="#333",Ldn={arc:{fill:wx},area:{fill:wx},axis:{domainColor:Aq,grid:!0,gridColor:Aq,gridWidth:1,labelColor:Mdn,labelFontSize:10,titleColor:$dn,tickColor:Aq,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:dEe,group:{fill:dEe},legend:{labelColor:hEe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:hEe,titleFontSize:14,titlePadding:10},line:{stroke:wx,strokeWidth:2},path:{stroke:wx,strokeWidth:.5},rect:{fill:wx},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:wx},bar:{binSpacing:2,fill:wx,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},_x="#000",Bdn={group:{fill:"#e5e5e5"},arc:{fill:_x},area:{fill:_x},line:{stroke:_x},path:{stroke:_x},rect:{fill:_x},shape:{stroke:_x},symbol:{fill:_x,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},jdn=22,Udn="normal",pEe="Benton Gothic, sans-serif",mEe=11.5,zdn="normal",Ex="#82c6df",Dq="Benton Gothic Bold, sans-serif",gEe="normal",yEe=13,KD={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Vdn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Dq,fontSize:jdn,fontWeight:Udn},arc:{fill:Ex},area:{fill:Ex},line:{stroke:Ex,strokeWidth:2},path:{stroke:Ex},rect:{fill:Ex},shape:{stroke:Ex},symbol:{fill:Ex,size:30},axis:{labelFont:pEe,labelFontSize:mEe,labelFontWeight:zdn,titleFont:Dq,titleFontSize:yEe,titleFontWeight:gEe},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:pEe,labelFontSize:mEe,symbolType:"square",titleFont:Dq,titleFontSize:yEe,titleFontWeight:gEe},range:{category:KD["category-6"],diverging:KD["fireandice-6"],heatmap:KD["fire-7"],ordinal:KD["fire-7"],ramp:KD["fire-7"]}},Sx="#ab5787",u6="#979797",Hdn={background:"#f9f9f9",arc:{fill:Sx},area:{fill:Sx},line:{stroke:Sx},path:{stroke:Sx},rect:{fill:Sx},shape:{stroke:Sx},symbol:{fill:Sx,size:30},axis:{domainColor:u6,domainWidth:.5,gridWidth:.2,labelColor:u6,tickColor:u6,tickWidth:.2,titleColor:u6},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Cx="#3e5c69",qdn={background:"#fff",arc:{fill:Cx},area:{fill:Cx},line:{stroke:Cx},path:{stroke:Cx},rect:{fill:Cx},shape:{stroke:Cx},symbol:{fill:Cx},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},pd="#1696d2",vEe="#000000",Wdn="#FFFFFF",l6="Lato",Iq="Lato",Gdn="Lato",Ydn="#DEDDDD",Kdn=18,XD={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Xdn={background:Wdn,title:{anchor:"start",fontSize:Kdn,font:l6},axisX:{domain:!0,domainColor:vEe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Iq,labelAngle:0,tickColor:vEe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:l6},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Ydn,gridWidth:1,labelFontSize:12,labelFont:Iq,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:l6,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Iq,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:l6,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:XD["six-groups-cat-1"],diverging:XD["diverging-colors"],heatmap:XD["diverging-colors"],ordinal:XD["six-groups-seq"],ramp:XD["shades-blue"]},area:{fill:pd},rect:{fill:pd},line:{color:pd,stroke:pd,strokeWidth:5},trail:{color:pd,stroke:pd,strokeWidth:0,size:1},path:{stroke:pd,strokeWidth:.5},point:{filled:!0},text:{font:Gdn,color:pd,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:pd,stroke:null}},arc:{fill:pd},shape:{stroke:pd},symbol:{fill:pd,size:30}},Tx="#3366CC",bEe="#ccc",c6="Arial, sans-serif",Qdn={arc:{fill:Tx},area:{fill:Tx},path:{stroke:Tx},rect:{fill:Tx},shape:{stroke:Tx},symbol:{stroke:Tx},circle:{fill:Tx},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:c6,fontSize:12},"guide-title":{font:c6,fontSize:12},"group-title":{font:c6,fontSize:12}},title:{font:c6,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:bEe,tickColor:bEe,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},ole=e=>e*(1/3+1),xEe=ole(9),wEe=ole(10),_Ee=ole(12),QD="Segoe UI",EEe="wf_standard-font, helvetica, arial, sans-serif",SEe="#252423",JD="#605E5C",CEe="transparent",Jdn="#C8C6C4",Sh="#118DFF",Zdn="#12239E",ehn="#E66C37",thn="#6B007B",nhn="#E044A7",rhn="#744EC2",ihn="#D9B300",shn="#D64550",SVe=Sh,CVe="#DEEFFF",TEe=[CVe,SVe],ohn=[CVe,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",SVe],ahn={view:{stroke:CEe},background:CEe,font:QD,header:{titleFont:EEe,titleFontSize:_Ee,titleColor:SEe,labelFont:QD,labelFontSize:wEe,labelColor:JD},axis:{ticks:!1,grid:!1,domain:!1,labelColor:JD,labelFontSize:xEe,titleFont:EEe,titleColor:SEe,titleFontSize:_Ee,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Jdn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Sh},line:{stroke:Sh,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:QD,fontSize:xEe,fill:JD},arc:{fill:Sh},area:{fill:Sh,line:!0,opacity:.6},path:{stroke:Sh},rect:{fill:Sh},point:{fill:Sh,filled:!0,size:75},shape:{stroke:Sh},symbol:{fill:Sh,strokeWidth:1.5,size:50},legend:{titleFont:QD,titleFontWeight:"bold",titleColor:JD,labelFont:QD,labelFontSize:wEe,labelColor:JD,symbolType:"circle",symbolSize:75},range:{category:[Sh,Zdn,ehn,thn,nhn,rhn,ihn,shn],diverging:TEe,heatmap:TEe,ordinal:ohn}},kq='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',uhn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',Rq=400,f6={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},lhn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],chn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function nj({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=f6.gridBg[e],i=f6.textPrimary[e],s=f6.textSecondary[e],o=n==="dark"?lhn:chn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:kq,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:uhn,labelFontWeight:Rq,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:f6.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:kq,fill:s,fontWeight:Rq},"guide-title":{font:kq,fill:s,fontWeight:Rq}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const fhn=nj({theme:"white",background:"#ffffff"}),dhn=nj({theme:"g10",background:"#f4f4f4"}),hhn=nj({theme:"g90",background:"#262626"}),phn=nj({theme:"g100",background:"#161616"}),mhn=Pdn.version,ghn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:dhn,carbong100:phn,carbong90:hhn,carbonwhite:fhn,dark:Odn,excel:Fdn,fivethirtyeight:Ldn,ggplot2:Bdn,googlecharts:Qdn,latimes:Vdn,powerbi:ahn,quartz:Hdn,urbaninstitute:Xdn,version:mhn,vox:qdn},Symbol.toStringTag,{value:"Module"}));function yhn(e,t,n,r){if(at(e))return`[${e.map(i=>t(Bt(i)?i:AEe(i,n))).join(", ")}]`;if(jt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(jt(c)&&(c=AEe(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function vhn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function AEe(e,t){return JSON.stringify(e,vhn(t))}var bhn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const TVe="vg-tooltip-element",xhn={offsetX:10,offsetY:10,id:TVe,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:whn,maxDepth:2,formatTooltip:yhn,baseURL:""};function whn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function _hn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return bhn.toString().replace(TVe,e)}function Ehn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class Shn{constructor(t){this.options={...xhn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=_hn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=Ehn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var Nq={};function Chn(e){return e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Pq,DEe;function Thn(){return DEe||(DEe=1,Pq=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),Pq}var Ahn=wi;wi.Node=E_;wi.create=wi;function wi(e){var t=this;if(t instanceof wi||(t=new wi),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}wi.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};wi.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};wi.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};wi.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Ihn(this,arguments[e]);return this.length};wi.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)khn(this,arguments[e]);return this.length};wi.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};wi.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};wi.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};wi.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};wi.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};wi.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};wi.prototype.map=function(e,t){t=t||this;for(var n=new wi,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};wi.prototype.mapReverse=function(e,t){t=t||this;for(var n=new wi,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};wi.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};wi.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};wi.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};wi.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};wi.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new wi;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};wi.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new wi;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};wi.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Dhn(this,i,n[r]);return s};wi.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function Dhn(e,t,n){var r=t===e.head?new E_(n,null,t,e):new E_(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function Ihn(e,t){e.tail=new E_(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function khn(e,t){e.head=new E_(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function E_(e,t,n,r){if(!(this instanceof E_))return new E_(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Thn()(wi)}catch{}const Rhn=Ahn,nw=Symbol("max"),ag=Symbol("length"),h2=Symbol("lengthCalculator"),jk=Symbol("allowStale"),Sw=Symbol("maxAge"),tg=Symbol("dispose"),IEe=Symbol("noDisposeOnSet"),Sa=Symbol("lruList"),Ah=Symbol("cache"),AVe=Symbol("updateAgeOnGet"),Oq=()=>1;class Nhn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[nw]=t.max||1/0;const n=t.length||Oq;if(this[h2]=typeof n!="function"?Oq:n,this[jk]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Sw]=t.maxAge||0,this[tg]=t.dispose,this[IEe]=t.noDisposeOnSet||!1,this[AVe]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[nw]=t||1/0,ZD(this)}get max(){return this[nw]}set allowStale(t){this[jk]=!!t}get allowStale(){return this[jk]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Sw]=t,ZD(this)}get maxAge(){return this[Sw]}set lengthCalculator(t){typeof t!="function"&&(t=Oq),t!==this[h2]&&(this[h2]=t,this[ag]=0,this[Sa].forEach(n=>{n.length=this[h2](n.value,n.key),this[ag]+=n.length})),ZD(this)}get lengthCalculator(){return this[h2]}get length(){return this[ag]}get itemCount(){return this[Sa].length}rforEach(t,n){n=n||this;for(let r=this[Sa].tail;r!==null;){const i=r.prev;kEe(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Sa].head;r!==null;){const i=r.next;kEe(this,t,r,n),r=i}}keys(){return this[Sa].toArray().map(t=>t.key)}values(){return this[Sa].toArray().map(t=>t.value)}reset(){this[tg]&&this[Sa]&&this[Sa].length&&this[Sa].forEach(t=>this[tg](t.key,t.value)),this[Ah]=new Map,this[Sa]=new Rhn,this[ag]=0}dump(){return this[Sa].map(t=>k$(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Sa]}set(t,n,r){if(r=r||this[Sw],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[h2](n,t);if(this[Ah].has(t)){if(s>this[nw])return US(this,this[Ah].get(t)),!1;const u=this[Ah].get(t).value;return this[tg]&&(this[IEe]||this[tg](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[ag]+=s-u.length,u.length=s,this.get(t),ZD(this),!0}const o=new Phn(t,n,s,i,r);return o.length>this[nw]?(this[tg]&&this[tg](t,n),!1):(this[ag]+=o.length,this[Sa].unshift(o),this[Ah].set(t,this[Sa].head),ZD(this),!0)}has(t){if(!this[Ah].has(t))return!1;const n=this[Ah].get(t).value;return!k$(this,n)}get(t){return Fq(this,t,!0)}peek(t){return Fq(this,t,!1)}pop(){const t=this[Sa].tail;return t?(US(this,t),t.value):null}del(t){US(this,this[Ah].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Ah].forEach((t,n)=>Fq(this,n,!1))}}const Fq=(e,t,n)=>{const r=e[Ah].get(t);if(r){const i=r.value;if(k$(e,i)){if(US(e,r),!e[jk])return}else n&&(e[AVe]&&(r.value.now=Date.now()),e[Sa].unshiftNode(r));return i.value}},k$=(e,t)=>{if(!t||!t.maxAge&&!e[Sw])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Sw]&&n>e[Sw]},ZD=e=>{if(e[ag]>e[nw])for(let t=e[Sa].tail;e[ag]>e[nw]&&t!==null;){const n=t.prev;US(e,t),t=n}},US=(e,t)=>{if(t){const n=t.value;e[tg]&&e[tg](n.key,n.value),e[ag]-=n.length,e[Ah].delete(n.key),e[Sa].removeNode(t)}};class Phn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const kEe=(e,t,n,r)=>{let i=n.value;k$(e,i)&&(US(e,n),e[jk]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var Ohn=Nhn;const Fhn=Object.freeze({loose:!0}),Mhn=Object.freeze({}),$hn=e=>e?typeof e!="object"?Fhn:e:Mhn;var ale=$hn,yQ={exports:{}};const Lhn="2.0.0",DVe=256,Bhn=Number.MAX_SAFE_INTEGER||9007199254740991,jhn=16,Uhn=DVe-6,zhn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var ule={MAX_LENGTH:DVe,MAX_SAFE_COMPONENT_LENGTH:jhn,MAX_SAFE_BUILD_LENGTH:Uhn,MAX_SAFE_INTEGER:Bhn,RELEASE_TYPES:zhn,SEMVER_SPEC_VERSION:Lhn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Vhn=typeof process=="object"&&Nq&&Nq.NODE_DEBUG&&/\bsemver\b/i.test(Nq.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var rj=Vhn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=ule,s=rj;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(yQ,yQ.exports);var lle=yQ.exports;const REe=/^[0-9]+$/,IVe=(e,t)=>{const n=REe.test(e),r=REe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Hhn=(e,t)=>IVe(t,e);var qhn={compareIdentifiers:IVe,rcompareIdentifiers:Hhn};const d6=rj,{MAX_LENGTH:NEe,MAX_SAFE_INTEGER:h6}=ule,{safeRe:PEe,t:OEe}=lle,Whn=ale,{compareIdentifiers:p2}=qhn;let Ghn=class Gp{constructor(t,n){if(n=Whn(n),t instanceof Gp){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>NEe)throw new TypeError(`version is longer than ${NEe} characters`);d6("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?PEe[OEe.LOOSE]:PEe[OEe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>h6||this.major<0)throw new TypeError("Invalid major version");if(this.minor>h6||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>h6||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<h6)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(d6("SemVer.compare",this.version,this.options,t),!(t instanceof Gp)){if(typeof t=="string"&&t===this.version)return 0;t=new Gp(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Gp||(t=new Gp(t,this.options)),p2(this.major,t.major)||p2(this.minor,t.minor)||p2(this.patch,t.patch)}comparePre(t){if(t instanceof Gp||(t=new Gp(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(d6("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return p2(r,i)}while(++n)}compareBuild(t){t instanceof Gp||(t=new Gp(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(d6("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return p2(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),p2(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var cle=Ghn;const FEe=cle,Yhn=(e,t,n)=>new FEe(e,n).compare(new FEe(t,n));var PA=Yhn;const Khn=PA,Xhn=(e,t,n)=>Khn(e,t,n)===0;var Qhn=Xhn;const Jhn=PA,Zhn=(e,t,n)=>Jhn(e,t,n)!==0;var epn=Zhn;const tpn=PA,npn=(e,t,n)=>tpn(e,t,n)>0;var rpn=npn;const ipn=PA,spn=(e,t,n)=>ipn(e,t,n)>=0;var opn=spn;const apn=PA,upn=(e,t,n)=>apn(e,t,n)<0;var lpn=upn;const cpn=PA,fpn=(e,t,n)=>cpn(e,t,n)<=0;var dpn=fpn;const hpn=Qhn,ppn=epn,mpn=rpn,gpn=opn,ypn=lpn,vpn=dpn,bpn=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return hpn(e,n,r);case"!=":return ppn(e,n,r);case">":return mpn(e,n,r);case">=":return gpn(e,n,r);case"<":return ypn(e,n,r);case"<=":return vpn(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var xpn=bpn,Mq,MEe;function wpn(){if(MEe)return Mq;MEe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}Mq=t;const n=ale,{safeRe:r,t:i}=lle,s=xpn,o=rj,a=cle,u=kVe();return Mq}var $q,$Ee;function kVe(){if($Ee)return $q;$Ee=1;class e{constructor(L,H){if(H=r(H),L instanceof e)return L.loose===!!H.loose&&L.includePrerelease===!!H.includePrerelease?L:new e(L.raw,H);if(L instanceof i)return this.raw=L.value,this.set=[[L]],this.format(),this;if(this.options=H,this.loose=!!H.loose,this.includePrerelease=!!H.includePrerelease,this.raw=L.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(U=>this.parseRange(U.trim())).filter(U=>U.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const U=this.set[0];if(this.set=this.set.filter(G=>!p(G[0])),this.set.length===0)this.set=[U];else if(this.set.length>1){for(const G of this.set)if(G.length===1&&m(G[0])){this.set=[G];break}}}this.format()}format(){return this.range=this.set.map(L=>L.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(L){const U=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+L,G=n.get(U);if(G)return G;const Y=this.options.loose,J=Y?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];L=L.replace(J,R(this.options.includePrerelease)),s("hyphen replace",L),L=L.replace(a[u.COMPARATORTRIM],l),s("comparator trim",L),L=L.replace(a[u.TILDETRIM],c),s("tilde trim",L),L=L.replace(a[u.CARETTRIM],f),s("caret trim",L);let $=L.split(" ").map(q=>y(q,this.options)).join(" ").split(/\s+/).map(q=>I(q,this.options));Y&&($=$.filter(q=>(s("loose invalid filter",q,this.options),!!q.match(a[u.COMPARATORLOOSE])))),s("range list",$);const j=new Map,W=$.map(q=>new i(q,this.options));for(const q of W){if(p(q))return[q];j.set(q.value,q)}j.size>1&&j.has("")&&j.delete("");const B=[...j.values()];return n.set(U,B),B}intersects(L,H){if(!(L instanceof e))throw new TypeError("a Range is required");return this.set.some(U=>g(U,H)&&L.set.some(G=>g(G,H)&&U.every(Y=>G.every(J=>Y.intersects(J,H)))))}test(L){if(!L)return!1;if(typeof L=="string")try{L=new o(L,this.options)}catch{return!1}for(let H=0;H<this.set.length;H++)if(F(this.set[H],L,this.options))return!0;return!1}}$q=e;const t=Ohn,n=new t({max:1e3}),r=ale,i=wpn(),s=rj,o=cle,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=lle,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=ule,p=O=>O.value==="<0.0.0-0",m=O=>O.value==="",g=(O,L)=>{let H=!0;const U=O.slice();let G=U.pop();for(;H&&U.length;)H=U.every(Y=>G.intersects(Y,L)),G=U.pop();return H},y=(O,L)=>(s("comp",O,L),O=w(O,L),s("caret",O),O=b(O,L),s("tildes",O),O=T(O,L),s("xrange",O),O=k(O,L),s("stars",O),O),v=O=>!O||O.toLowerCase()==="x"||O==="*",b=(O,L)=>O.trim().split(/\s+/).map(H=>_(H,L)).join(" "),_=(O,L)=>{const H=L.loose?a[u.TILDELOOSE]:a[u.TILDE];return O.replace(H,(U,G,Y,J,$)=>{s("tilde",O,U,G,Y,J,$);let j;return v(G)?j="":v(Y)?j=`>=${G}.0.0 <${+G+1}.0.0-0`:v(J)?j=`>=${G}.${Y}.0 <${G}.${+Y+1}.0-0`:$?(s("replaceTilde pr",$),j=`>=${G}.${Y}.${J}-${$} <${G}.${+Y+1}.0-0`):j=`>=${G}.${Y}.${J} <${G}.${+Y+1}.0-0`,s("tilde return",j),j})},w=(O,L)=>O.trim().split(/\s+/).map(H=>S(H,L)).join(" "),S=(O,L)=>{s("caret",O,L);const H=L.loose?a[u.CARETLOOSE]:a[u.CARET],U=L.includePrerelease?"-0":"";return O.replace(H,(G,Y,J,$,j)=>{s("caret",O,G,Y,J,$,j);let W;return v(Y)?W="":v(J)?W=`>=${Y}.0.0${U} <${+Y+1}.0.0-0`:v($)?Y==="0"?W=`>=${Y}.${J}.0${U} <${Y}.${+J+1}.0-0`:W=`>=${Y}.${J}.0${U} <${+Y+1}.0.0-0`:j?(s("replaceCaret pr",j),Y==="0"?J==="0"?W=`>=${Y}.${J}.${$}-${j} <${Y}.${J}.${+$+1}-0`:W=`>=${Y}.${J}.${$}-${j} <${Y}.${+J+1}.0-0`:W=`>=${Y}.${J}.${$}-${j} <${+Y+1}.0.0-0`):(s("no pr"),Y==="0"?J==="0"?W=`>=${Y}.${J}.${$}${U} <${Y}.${J}.${+$+1}-0`:W=`>=${Y}.${J}.${$}${U} <${Y}.${+J+1}.0-0`:W=`>=${Y}.${J}.${$} <${+Y+1}.0.0-0`),s("caret return",W),W})},T=(O,L)=>(s("replaceXRanges",O,L),O.split(/\s+/).map(H=>A(H,L)).join(" ")),A=(O,L)=>{O=O.trim();const H=L.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return O.replace(H,(U,G,Y,J,$,j)=>{s("xRange",O,U,G,Y,J,$,j);const W=v(Y),B=W||v(J),q=B||v($),Z=q;return G==="="&&Z&&(G=""),j=L.includePrerelease?"-0":"",W?G===">"||G==="<"?U="<0.0.0-0":U="*":G&&Z?(B&&(J=0),$=0,G===">"?(G=">=",B?(Y=+Y+1,J=0,$=0):(J=+J+1,$=0)):G==="<="&&(G="<",B?Y=+Y+1:J=+J+1),G==="<"&&(j="-0"),U=`${G+Y}.${J}.${$}${j}`):B?U=`>=${Y}.0.0${j} <${+Y+1}.0.0-0`:q&&(U=`>=${Y}.${J}.0${j} <${Y}.${+J+1}.0-0`),s("xRange return",U),U})},k=(O,L)=>(s("replaceStars",O,L),O.trim().replace(a[u.STAR],"")),I=(O,L)=>(s("replaceGTE0",O,L),O.trim().replace(a[L.includePrerelease?u.GTE0PRE:u.GTE0],"")),R=O=>(L,H,U,G,Y,J,$,j,W,B,q,Z,re)=>(v(U)?H="":v(G)?H=`>=${U}.0.0${O?"-0":""}`:v(Y)?H=`>=${U}.${G}.0${O?"-0":""}`:J?H=`>=${H}`:H=`>=${H}${O?"-0":""}`,v(W)?j="":v(B)?j=`<${+W+1}.0.0-0`:v(q)?j=`<${W}.${+B+1}.0-0`:Z?j=`<=${W}.${B}.${q}-${Z}`:O?j=`<${W}.${B}.${+q+1}-0`:j=`<=${j}`,`${H} ${j}`.trim()),F=(O,L,H)=>{for(let U=0;U<O.length;U++)if(!O[U].test(L))return!1;if(L.prerelease.length&&!H.includePrerelease){for(let U=0;U<O.length;U++)if(s(O[U].semver),O[U].semver!==i.ANY&&O[U].semver.prerelease.length>0){const G=O[U].semver;if(G.major===L.major&&G.minor===L.minor&&G.patch===L.patch)return!0}return!1}return!0};return $q}const _pn=kVe(),Epn=(e,t,n)=>{try{t=new _pn(t,n)}catch{return!1}return t.test(e)};var Spn=Epn,RVe=Chn(Spn);function Cpn(e,t,n){const r=e.open(t),i=250,{origin:s}=new URL(t);let o=40;function a(l){l.source===r&&(o=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function u(){o<=0||(r.postMessage(n,s),setTimeout(u,i),o-=1)}setTimeout(u,i)}var Tpn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function NVe(e,...t){for(const n of t)Apn(e,n);return e}function Apn(e,t){for(const n of Object.keys(t))mA(e,n,t[n],!0)}const Ih=crn;let O3=mdn;const p6=typeof window<"u"?window:void 0;var oCe;O3===void 0&&((oCe=p6==null?void 0:p6.vl)!=null&&oCe.compile)&&(O3=p6.vl);const Dpn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Ipn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},GI={vega:"Vega","vega-lite":"Vega-Lite"},R$={vega:Ih.version,"vega-lite":O3?O3.version:"not available"},kpn={vega:e=>e,"vega-lite":(e,t)=>O3.compile(e,{config:t}).spec},Rpn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Npn="chart-wrapper";function Ppn(e){return typeof e=="function"}function LEe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${GI[r]} JSON Source`}function Opn(e,t){if(e.$schema){const n=EVe(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${GI[n.library]}, but mode argument sets ${GI[t]??t}.`);const r=n.library;return RVe(R$[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${GI[r]} ${n.version}, but the current version of ${GI[r]} is v${R$[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function PVe(e){return!!(e&&"load"in e)}function BEe(e){return PVe(e)?e:Ih.loader(e)}function Fpn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Bt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Mpn(e,t,n={}){let r,i;Bt(t)?(i=BEe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=Fpn(r),o=s.loader;(!i||o)&&(i=BEe(n.loader??o));const a=await jEe(s,i),u=await jEe(n,i),l={...NVe(u,a),config:pA(u.config??{},a.config??{})};return await Lpn(e,r,l,i)}async function jEe(e,t){const n=Bt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Bt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function $pn(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Lpn(e,t,n={},r){const i=n.theme?pA(ghn[n.theme],n.config??{}):n.config,s=Ub(n.actions)?n.actions:NVe({},Dpn,n.actions??{}),o={...Ipn,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Ih.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const w="vega-embed-style",{root:S,rootContainer:T}=$pn(c);if(!S.getElementById(w)){const A=document.createElement("style");A.id=w,A.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Tpn.toString():n.defaultStyle,T.appendChild(A)}}const f=Opn(t,n.mode);let d=kpn[f](t,i);if(f==="vega-lite"&&d.$schema){const w=EVe(d.$schema);RVe(R$.vega,`^${w.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${w.version}, but current version is v${R$.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const w=document.createElement("div");w.classList.add(Npn),c.appendChild(w),h=w}const p=n.patch;if(p&&(d=p instanceof Function?p(d):v9(d,p,!0,!1).newDocument),n.formatLocale&&Ih.formatLocale(n.formatLocale),n.timeFormatLocale&&Ih.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const w in n.expressionFunctions){const S=n.expressionFunctions[w];"fn"in S?Ih.expressionFunction(w,S.fn,S.visitor):S instanceof Function&&Ih.expressionFunction(w,S)}const{ast:m}=n,g=Ih.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||Ih.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:Ih.expressionInterpreter??n.expr??xrn}:{}});if(y.addSignalListener("autosize",(w,S)=>{const{type:T}=S;T=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):T=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):T=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:w,tooltip:S}=n,T=w&&!PVe(w)?w==null?void 0:w.baseURL:void 0,A=Ppn(S)?S:new Shn({baseURL:T,...S===!0?{}:S}).call;y.tooltip(A)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:w,updateSet:S}=typeof v=="boolean"?{}:v;y.hover(w,S)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let w=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const T=document.createElement("details");T.title=o.CLICK_TO_VIEW_ACTIONS,c.append(T),w=T;const A=document.createElement("summary");A.innerHTML=Rpn,T.append(A),b=k=>{T.contains(k.target)||T.removeAttribute("open")},document.addEventListener("click",b)}const S=document.createElement("div");if(w.append(S),S.classList.add("vega-actions"),s===!0||s.export!==!1){for(const T of["svg","png"])if(s===!0||s.export===!0||s.export[T]){const A=o[`${T.toUpperCase()}_ACTION`],k=document.createElement("a"),I=jt(n.scaleFactor)?n.scaleFactor[T]:n.scaleFactor;k.text=A,k.href="#",k.target="_blank",k.download=`${l}.${T}`,k.addEventListener("mousedown",async function(R){R.preventDefault();const F=await y.toImageURL(T,I);this.href=F}),S.append(k)}}if(s===!0||s.source!==!1){const T=document.createElement("a");T.text=o.SOURCE_ACTION,T.href="#",T.addEventListener("click",function(A){LEe(LH(t),n.sourceHeader??"",n.sourceFooter??"",f),A.preventDefault()}),S.append(T)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const T=document.createElement("a");T.text=o.COMPILED_ACTION,T.href="#",T.addEventListener("click",function(A){LEe(LH(d),n.sourceHeader??"",n.sourceFooter??"","vega"),A.preventDefault()}),S.append(T)}if(s===!0||s.editor!==!1){const T=n.editorUrl??"https://vega.github.io/editor/",A=document.createElement("a");A.text=o.EDITOR_ACTION,A.href="#",A.addEventListener("click",function(k){Cpn(window,T,{config:i,mode:f,renderer:a,spec:LH(t)}),k.preventDefault()}),S.append(A)}}function _(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:_,embedOptions:n}}function Bpn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function jpn(e,t,n){n&&(Bpn(n)?n(e.data(t)):e.change(t,Ih.changeset().remove(()=>!0).insert(n)))}function Upn(e,t){Object.keys(t).forEach(n=>{jpn(e,n,t[n])})}function OVe(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const FVe=()=>{};function Lq(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function zpn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=OVe([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!iF(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function UEe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function Bq(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function YI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class MVe extends yi.PureComponent{constructor(){super(...arguments),YI(this,"containerRef",yi.createRef()),YI(this,"resultPromise",void 0),YI(this,"handleError",t=>{const{onError:n=FVe}=this.props;n(t,this.containerRef.current),console.warn(t)}),YI(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=OVe([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=zpn(Bq(this.props),Bq(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!HK(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&UEe(a,s),i&&Lq(a,i)),a.run()})}else HK(i,s)||this.modifyView(o=>{s&&UEe(o,s),i&&Lq(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=Bq(this.props);this.resultPromise=Mpn(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;Lq(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return yi.createElement("div",{ref:this.containerRef,className:t,style:n})}}YI(MVe,"propTypes",{className:pme.string,onError:pme.func});function vQ(){return vQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vQ.apply(this,arguments)}function bQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Vpn={};class fle extends yi.PureComponent{constructor(){super(...arguments),bQ(this,"vegaEmbed",yi.createRef()),bQ(this,"handleNewView",t=>{this.update();const{onNewView:n=FVe}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){HK(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Upn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return yi.createElement(MVe,vQ({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}bQ(fle,"defaultProps",{data:Vpn});function xQ(){return xQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xQ.apply(this,arguments)}function zEe(e){return yi.createElement(fle,xQ({},e,{mode:"vega-lite"}))}function Hpn({currentConfig:e,provState:t}){const n=Zd(),r=eh(),i=Jc(),[s,o]=N.useState(null),[a,u]=N.useState(!0),{updateResponseBlockValidation:l,setIframeAnswers:c}=Bl(),[f,d]=N.useState(),{actions:h,trrack:p}=N.useMemo(()=>{const b=Ob.create(),_=b.register("signal",(S,T)=>(S.event=T,S)),w=QT({registry:b,initialState:{event:{}}});return{actions:{signalAction:_},trrack:w}},[]),m=N.useCallback(({status:b,provenanceGraph:_,answers:w})=>{i(l({location:"sidebar",identifier:`${r}_${n}`,status:b,values:w,provenanceGraph:_})),i(c(w))},[r,n,i,c,l]),g=N.useCallback((b,_)=>{p.apply(b,h.signalAction({key:b,value:_}))},[h,p]),y=N.useCallback((b,_)=>{const{responseId:w,response:S}=_;m({status:!0,provenanceGraph:p.graph.backend,answers:{[w]:S}})},[m,p.graph.backend]),v=N.useMemo(()=>{var _;const b=(_=s==null?void 0:s.config)==null?void 0:_.signals;return b?b.reduce((w,S)=>(S.name==="revisitAnswer"?w[S.name]=y:w[S.name]=g,w),{}):{}},[y,g,s]);return N.useEffect(()=>{async function b(){u(!0);let _;"path"in e?_=await tEt(e.path):_=e.config,_!==void 0&&o(_),u(!1)}e&&b()},[e]),N.useEffect(()=>{f&&t&&t.event&&t.event.key&&f.signal(t.event.key,t.event.value).run()},[f,t]),a?E.jsx("div",{children:"Loading..."}):"path"in e&&!s?E.jsx(kv,{path:e.path}):s?E.jsx(fle,{spec:structuredClone(s),signalListeners:v,onNewView:b=>d(b)}):E.jsx("div",{children:"Failed to load vega config"})}function qpn(){const e=ey(),t=Zd(),n=eh()||"Notfound",r=e.components[n],{storageEngine:i}=Po(),s=N.useRef(null),[o,a]=N.useState(null),{setIsRecording:u}=Bl(),l=vi(k=>k.analysisProvState),c=HT(),f=Ite(),d=vi(k=>k.sequence),[h]=Sb(),p=vi(k=>k.participantId),m=N.useMemo(()=>h.get("participantId"),[h]);v5e();const g=Jc(),{setAlertModal:y}=Bl();N.useEffect(()=>{(i==null?void 0:i.getEngine())!=="localStorage"&&g(y({show:!0,message:"There was an issue connecting to the localStorage database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[y,i,g]),N.useEffect(()=>{!e||!e.recordStudyAudio||!i||i.getEngine()!=="firebase"||f&&f.endTime>0||c||(s.current&&o&&i.saveAudio(s.current,o),s.current&&(s.current.stream.getTracks().forEach(k=>{var I;k.stop(),(I=s.current)==null||I.stream.removeTrack(k)}),s.current.stream.getAudioTracks().forEach(k=>{var I;k.stop(),(I=s.current)==null||I.stream.removeTrack(k)}),s.current.stop(),s.current=null),r&&r.recordAudio!==void 0&&!r.recordAudio||n==="end"?(a(null),g(u(!1))):navigator.mediaDevices.getUserMedia({audio:!0}).then(k=>{const I=new MediaRecorder(k);s.current=I,s.current.start(),g(u(!0)),a(`${n}_${t}`)}))},[n,t]);const[v,b]=N.useState([]),_=N.useRef([]);N.useEffect(()=>{async function k(){var F;const R=((F=Ete(d,t))==null?void 0:F.map(O=>O.currentBlock.id).filter(O=>O!==void 0))||[];b(R)}async function I(){const R=_.current;JSON.stringify(R)!==JSON.stringify(v)&&v.length>0&&i&&await i.addParticipantTags(v),_.current=v}k().then(I)},[t,i,d]);const w=N.useMemo(()=>{var k;return n!=="end"&&dA(r)&&e.baseComponents?Dte({},(k=e.baseComponents)==null?void 0:k[r.baseComponent],r):r},[r,e]);if(n==="end")return E.jsx(uUt,{});if(n==="__trainingFailed")return E.jsx(lUt,{});if(n==="__timedOut")return E.jsx(cUt,{});if(n==="Notfound")return E.jsx(kv,{email:e.uiConfig.contactEmail});if(m&&p!==m)return E.jsx(ma,{style:{height:"80vh"},children:E.jsx(Qc,{})});const S=w.instruction||"",{instructionLocation:T}=w,A=e.uiConfig.sidebar&&(T==="sidebar"||T===void 0);return E.jsxs(E.Fragment,{children:[T==="aboveStimulus"&&E.jsx(Zu,{text:S}),E.jsx(JM,{status:f,config:w,location:"aboveStimulus"},`${t}-above-response-block`),E.jsxs(N.Suspense,{fallback:E.jsx("div",{children:"Loading..."}),children:[w.type==="markdown"&&E.jsx(Qjt,{currentConfig:w}),w.type==="website"&&E.jsx(eEt,{currentConfig:w}),w.type==="image"&&E.jsx(rEt,{currentConfig:w}),w.type==="react-component"&&E.jsx(Xjt,{currentConfig:w,provState:l}),w.type==="vega"&&E.jsx(Hpn,{currentConfig:w,provState:l})]},`${t}-stimulus`),(T==="belowStimulus"||T===void 0&&!A)&&E.jsx(Zu,{text:S}),E.jsx(JM,{status:f,config:w,location:"belowStimulus"},`${t}-below-response-block`)]})}function $Ve(e){const[t]=Sb();return E.jsx(Gee,{...e,to:{pathname:e.to,search:t.toString()}})}function LVe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=LVe(o,t,n,r),r.includes(o.orderPath))break}return i}function BVe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=BVe(s,r)}}),n}function Wpn(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function Gpn({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=G_(),c=Ep(),f=Zd(),[d,{close:h,open:p}]=sZ(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?LVe(n,e,r,a.orderPath):-1,{trialId:y}=zm(),[v]=Sb(),b=N.useMemo(()=>v.get("participantId"),[v]),_=y===e,w=s?f===g:f===`reviewer-${e}`,S=u?_:w,T=N.useCallback(()=>c(y?`./../${e}`:`./${e}`),[c,e,y]),k=u?T:()=>c(s?b?`/${l}/${Lh(g)}?participantId=${b}`:`/${l}/${Lh(g)}`:`/${l}/reviewer-${e}`),I=e.includes(".co.")?".co.":e.includes(".components.")?".components.":!1,R=e.includes("$")&&I&&e.includes(I)?e.split(I).at(-1):e;return E.jsxs(Pc,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[E.jsx(Pc.Target,{children:E.jsx(Fe,{onMouseEnter:p,onMouseLeave:h,children:E.jsx(zL,{active:S,style:{lineHeight:"32px",height:"32px"},label:E.jsxs(Fe,{children:[i&&E.jsx(rpt,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),e!==R&&E.jsx(vpt,{size:16,style:{marginRight:4,marginBottom:-2},color:"var(--mantine-color-blue-outline)"}),E.jsx(tt,{size:"sm",span:S,fw:S?"700":void 0,display:"inline",children:R})]}),onClick:k,disabled:t})})}),m&&(m.description||m.meta)&&E.jsx(Pc.Dropdown,{onMouseLeave:h,children:E.jsxs(Fe,{children:[m.description&&E.jsxs(Fe,{children:[E.jsx(tt,{fw:900,display:"inline-block",mr:2,children:"Description:"}),E.jsx(tt,{fw:400,component:"span",children:m.description})]}),m.meta&&E.jsxs(Fe,{children:[E.jsx(tt,{fw:"900",component:"span",children:"Task Meta: "}),E.jsx(tt,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})]})}function N$({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=Pg(e.components);return n&&r&&(o=Wpn(Pg(e.components),Pg(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),E.jsx(E.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return E.jsx(Gpn,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?dp(c).length-BVe(u,c):0,d=dp(u);return E.jsx(zL,{label:E.jsxs(Fe,{style:{opacity:f>0?1:.5},children:[E.jsx(tt,{size:"sm",display:"inline",children:u.order}),u.order==="random"||u.order==="latinSquare"?E.jsx(tpt,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&E.jsxs(av,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&E.jsx(av,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:E.jsx(Fe,{style:{borderLeft:"1px solid #e9ecef"},children:E.jsx(N$,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function jVe(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function VEe({text:e}){return E.jsx(xs,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:E.jsx(Kee,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function Ypn(){const e=vi(h=>h.sequence),t=vi(h=>h.metadata),{toggleStudyBrowser:n}=Bl(),r=ey(),i=Jc(),s=G_(),o=gke(`/${s}`),{storageEngine:a}=Po(),u=HT(),l=N.useMemo(()=>{let h=Pg(r.sequence);return h=Ste(h,"root"),h.components.push("end"),h},[r.sequence]),[c,f]=N.useState("participant"),d=N.useMemo(()=>c==="allTrials"||u,[c,u]);return E.jsxs(Yi.Aside,{p:"0",children:[E.jsx(Yi.Section,{p:"md",children:E.jsxs(Jt,{direction:"row",justify:"space-between",children:[E.jsx(tt,{size:"md",fw:700,pt:3,children:"Study Browser"}),E.jsx(xs,{label:"Go to the sequence of the next participant in the experiment. Sequences can be different between participants due to randomization, etc.",w:280,multiline:!0,disabled:d,children:E.jsx(_n,{variant:"light",leftSection:E.jsx(Xee,{size:14}),onClick:()=>jVe(a,r,t,o),size:"xs",disabled:d,children:"Next Participant"})}),E.jsx(bb,{onClick:()=>i(n()),mt:1})]})}),E.jsx(Yi.Section,{grow:!0,component:Yg,p:"md",children:E.jsxs(Hr,{value:c,onChange:f,children:[E.jsx(Fe,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:E.jsxs(Hr.List,{grow:!0,children:[E.jsxs(Hr.Tab,{value:"participant",children:["Participant View",E.jsx(VEe,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),E.jsxs(Hr.Tab,{value:"allTrials",disabled:u,children:["All Trials View",E.jsx(VEe,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),E.jsx(Hr.Panel,{value:"participant",children:E.jsx(N$,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),E.jsx(Hr.Panel,{value:"allTrials",children:E.jsx(N$,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}function Kpn({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=vi(A=>A.config),r=vi(A=>A.metadata),i=Cte(),s=Jc(),{toggleShowHelpText:o,toggleStudyBrowser:a,incrementHelpCounter:u}=Bl(),{storageEngine:l}=Po(),c=eh(),f=Zd(),d=i.length-1,h=typeof f=="number"?f/d*100:0,[p,m]=N.useState(!1),g=n==null?void 0:n.uiConfig.logoPath,y=n==null?void 0:n.uiConfig.withProgressBar,v=G_(),b=gke(`/${v}`),_=N.useRef(null),[w,S]=N.useState(!1),T=vi(A=>A.isRecording);return N.useEffect(()=>{const A=_.current;A&&S(A.scrollWidth>A.offsetWidth)},[n]),E.jsx(Yi.Header,{p:"md",children:E.jsxs(wf,{mt:-7,align:"center",children:[E.jsx(wf.Col,{span:4,children:E.jsxs(Jt,{align:"center",children:[E.jsx(_b,{w:40,src:`${Ll}${g}`,alt:"Study Logo"}),E.jsx(If,{w:"md"}),E.jsx(lo,{ref:_,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:w?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),E.jsx(wf.Col,{span:4,children:y&&E.jsx(PT,{radius:"md",size:"lg",value:h})}),E.jsx(wf.Col,{span:4,children:E.jsxs($i,{wrap:"nowrap",justify:"right",children:[T?E.jsxs($i,{ml:"xl",gap:20,wrap:"nowrap",children:[E.jsx(tt,{color:"red",children:"Recording audio"}),E.jsx(g8e,{})]}):null,!t&&E.jsx(xs,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:E.jsx(av,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&E.jsx(_n,{variant:"outline",onClick:()=>{s(o()),s(u({identifier:`${c}_${f}`}))},children:"Help"}),E.jsxs(El,{shadow:"md",width:200,withinPortal:!0,opened:p,onChange:m,children:[E.jsx(El.Target,{children:E.jsx(L_,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:E.jsx(cpt,{})})}),E.jsxs(El.Dropdown,{children:[e&&E.jsx(El.Item,{leftSection:E.jsx(Ept,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),E.jsx(El.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:E.jsx(gpt,{size:14}),children:"Contact"}),e&&E.jsx(El.Item,{leftSection:E.jsx(Xee,{size:14}),onClick:()=>jVe(l,n,r,b),children:"Next Participant"}),e&&E.jsx(El.Item,{leftSection:E.jsx(wke,{size:14}),component:"a",href:`${Ll}analysis/stats/${v}`,children:"Analyze & Manage"})]})]})]})})]})})}function UVe(e,t){var n;return dA(e)&&t.baseComponents?Dte({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function Xpn(){var u;const e=(u=ey())==null?void 0:u.uiConfig.sidebar,t=ey(),n=eh(),r=t.components[n],i=N.useMemo(()=>r?UVe(r,t):null,[r,t]),s=Ite(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?E.jsxs(Yi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&E.jsx(Yi.Section,{bg:"gray.3",p:"md",children:E.jsxs(tt,{c:"gray.9",children:[E.jsx(tt,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),E.jsx(Zu,{text:o})]})}),E.jsx(Yi.Section,{p:"md",children:E.jsx(JM,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):E.jsx(Yi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:E.jsx(JM,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function Qpn(){const e=vi(u=>u.showHelpText),t=vi(u=>u.config),n=Jc(),{toggleShowHelpText:r}=Bl(),[i,s]=N.useState(""),[o,a]=N.useState(!0);return N.useEffect(()=>{async function u(){if(!t.uiConfig.helpTextPath){a(!1);return}const l=await Rte(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),E.jsx(ho,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?E.jsx(Zu,{text:i}):E.jsx(kv,{path:t.uiConfig.helpTextPath})})}function Jpn(){const e=vi(o=>o.alertModal),{setAlertModal:t}=Bl(),n=Jc(),[r,i]=N.useState(e.show),s=N.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return N.useEffect(()=>i(e.show),[e.show]),E.jsx(ho,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:E.jsxs(Ng,{color:"red",radius:"xs",title:"Alert",icon:E.jsx(ept,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[E.jsx(tt,{my:"md",children:e.message}),E.jsx($i,{w:"100%",justify:"end",children:E.jsx(_n,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}const HEe=15,qEe=3;function Zpn({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){return E.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(o=>{const[a,u]=o;return E.jsx("g",{onClick:()=>i(a,u.createdOn,s),children:E.jsx("rect",{fill:a===r?"#e15759":"#484848",x:e(u.createdOn)-qEe/2,y:n/2-HEe/2,width:qEe,height:HEe})},a)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?E.jsx("rect",{fill:"var(--mantine-color-blue-filled)",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null]})}const WEe={left:5,top:0,right:5,bottom:0};function emn({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,setPlayTime:o,trialName:a}){const u=N.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),l=N.useCallback((f,d)=>{o(d,(d-e.domain()[0])/u),s(f)},[s,o,u,e]),c=N.useMemo(()=>Object.entries(t.answers).filter(f=>a?a===f[0]:!0).map(f=>{const[d,h]=f;return E.jsx(Zpn,{taskName:d,answer:h,height:r,currentNode:i,setCurrentNode:l,xScale:e},d)}),[i,l,r,t.answers,a,e]);return E.jsxs("svg",{style:{width:n,height:r},children:[E.jsx("line",{stroke:"black",strokeWidth:1,x1:WEe.left,x2:n+WEe.left,y1:r/2,y2:r/2}),c]})}function tmn(e){const t=N.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return N.useLayoutEffect(()=>{t.current=e}),N.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function nmn({width:e,height:t,updateTimer:n,duration:r,isPlaying:i,xScale:s,startTime:o}){const a=N.useRef(0),u=N.useRef(Date.now()),[l,c]=N.useState(0);N.useEffect(()=>{o&&(a.current=0,n(o,0))},[o,n]);const f=tmn(()=>{if(a.current>=r)return;const h=Date.now();a.current=h-u.current,n(o+a.current,void 0),c(l+1)});N.useEffect(()=>{let h=null;return i&&(u.current=Date.now()-a.current,h=setInterval(()=>{i&&f()},30)),()=>{h&&clearInterval(h)}},[f,i]);const d=N.useCallback(h=>{a.current=s.invert(h.clientX-10)-s.domain()[0],u.current=Date.now()-a.current,c(l+1),n(o+a.current,a.current/r)},[r,l,o,n,s]);return E.jsx("svg",{onClick:d,style:{width:e,height:t,position:"absolute",zIndex:1e4},children:E.jsx("line",{stroke:"#e15759",strokeWidth:3,y1:0,y2:t,x1:s(o+a.current),x2:s(o+a.current)})})}function wQ(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`,o=t<10?`0${t}`:`${t}`;return`${t>0?`${o}h`:""} ${n>0?`${s}m`:""} ${i}s`}const jq={left:0,top:0,right:0,bottom:0};function rmn(e,t){return t?t.getParticipantData(e):null}function imn({setTimeString:e}){const[t]=Sb(),n=N.useMemo(()=>t.get("participantId")||void 0,[t]),{storageEngine:r}=Po(),i=vi(j=>j.analysisIsPlaying),s=vi(j=>j.analysisHasAudio),o=vi(j=>j.analysisHasProvenance),{saveAnalysisState:a,setAnalysisHasAudio:u,setAnalysisHasProvenance:l}=Bl(),c=Jc(),f=eh(),d=Zd();N.useEffect(()=>{c(a(null))},[d,a,c]);const[h,{width:p}]=Df(),[m,g]=N.useState(0),[y,v]=N.useState(null),[b,_]=N.useState(0),{value:w,status:S}=$5(rmn,[n,r]),[T,A]=Krt(0,100),k=N.useRef(null),[I,R]=N.useState(!0),F=N.useRef(null),O=N.useMemo(()=>`${f}_${d}`,[f,d]);N.useEffect(()=>{var j;if(O&&w&&((j=w.answers[O])!=null&&j.provenanceGraph)){const W=Ob.create(),B=QT({registry:W,initialState:{}});w.answers[O].provenanceGraph&&(B.importObject(Pg(w.answers[O].provenanceGraph)),c(l(!0)),F.current=B)}else c(l(!1))},[w,O,c,l]);const L=N.useCallback(j=>{var W;j&&(O&&w&&F.current&&(c(a(F.current.getState((W=w.answers[O].provenanceGraph)==null?void 0:W.nodes[j]))),F.current.to(j)),v(j))},[w,a,c,O]);N.useEffect(()=>{var B;if(!O||!w||!F.current||!((B=w.answers[O])!=null&&B.provenanceGraph))return;const j=w.answers[O].provenanceGraph;if(!j)return;if(!y||!j.nodes[y]){L(j.root);return}let W=j.nodes[y];for(;;)if(T<W.createdOn){if(cNt(W))break;{const q=W.parent;W=j.nodes[q]}}else if(W.children.length>0){const q=W.children[0];if(T>j.nodes[q].createdOn)W=j.nodes[q];else break}else break;W.id!==y&&L(W.id)},[L,y,w,n,T,O]);const H=N.useMemo(()=>(w==null?void 0:w.answers[O].startTime)||0,[w,O]);N.useEffect(()=>{b===0?e(""):T!==0&&e(`${wQ(T-H)} / ${wQ(b*1e3)}`)},[O,w,T,e,H,b]);const U=HT(),G=N.useRef(null),Y=N.useCallback(async j=>{if(G.current=j,j&&w&&U&&O&&r)try{const W=await r.getAudio(O,n);await j.load(W),R(!1),c(u(!0)),_(j.getDuration()),g(j.getWidth()),j.seekTo(0),j.on("redrawcomplete",()=>g(j.getWidth()))}catch(W){c(u(!1));const B=w.answers[O].endTime-w.answers[O].startTime;throw _(B>-1?B/1e3:0),c(u(!1)),new Error(W)}else c(u(!1)),_(0)},[w,U,O,r,n,c,u]),J=N.useCallback((j,W)=>{A(j),G.current&&W&&setTimeout(()=>{var B;(B=G.current)==null||B.seekTo(W)})},[A,G]);N.useEffect(()=>{G.current&&(i?G.current.play():G.current.pause())},[G,i]);const $=N.useMemo(()=>{var B,q;if(!w||!((B=w.answers[O])!=null&&B.startTime)||!((q=w.answers[O])!=null&&q.endTime))return null;const j=b>0?w.answers[O].startTime+b*1e3:w.answers[O].endTime;return el([jq.left,p+jq.left+jq.right]).domain([w.answers[O].startTime,j]).clamp(!0)},[w,O,p,b]);return N.useEffect(()=>{Y(G.current)},[J,Y,w,n,G]),E.jsx($i,{wrap:"nowrap",gap:10,mx:10,children:E.jsxs(Ys,{ref:h,style:{width:"100%"},gap:0,children:[E.jsx(ma,{}),w!==null&&O?E.jsxs(Fe,{ref:k,style:{overflow:"hidden",width:"100%",pointerEvents:"none"},display:s?"block":"none",id:"waveformDiv",children:[E.jsx(h8e,{onMount:Y,plugins:[],container:"#waveformDiv",height:50,waveColor:"#484848",progressColor:"#e15759",barHeight:0,cursorColor:"rgba(0, 0, 0, 0)",children:E.jsx(p8e,{id:"waveform",height:50})}),I?E.jsx(Qc,{}):null]}):null,S==="success"&&w&&$&&O&&w.answers[O].provenanceGraph?E.jsx(emn,{xScale:$,trialName:O,setPlayTime:J,currentNode:y,setCurrentNode:L,participantData:w,width:m||p,height:25}):null,$&&w&&(s||o)?E.jsx(nmn,{duration:b*1e3,height:(s?50:0)+(o?25:0),isPlaying:i,startTime:w.answers[O].startTime,width:p,xScale:$,updateTimer:J}):null]})})}function smn(e,t){return t?t.getParticipantData(e):null}function omn(e){return e?e.getAllParticipantsData():null}function amn(){const[e]=Sb(),t=N.useMemo(()=>e.get("participantId")||void 0,[e]),n=eh(),r=Zd(),i=Ep(),{setAnalysisIsPlaying:s}=Bl(),o=Jc(),a=vi(y=>y.analysisIsPlaying),{storageEngine:u}=Po(),{value:l,status:c}=$5(smn,[t,u]),{value:f}=$5(omn,[u]),[d,h]=N.useMemo(()=>{if(f&&l&&t&&n){const y=f.filter(w=>w.participantConfigHash===l.participantConfigHash),v=y.findIndex(w=>w.participantId===t),b=v<y.length-1?y[v+1]:y[0],_=v>0?y[v-1]:y[y.length-1];return[[b.participantId,dp(b.sequence).indexOf(n)],[_.participantId,dp(_.sequence).indexOf(n)]]}return[["",0],["",0]]},[f,n,l,t]),p=N.useMemo(()=>{const y={};return f==null||f.forEach(v=>{y[v.participantConfigHash]||(y[v.participantConfigHash]=new Set),y[v.participantConfigHash].add(v.participantId)}),Object.keys(y).sort((v,b)=>v===(l==null?void 0:l.participantConfigHash)?-1:b===(l==null?void 0:l.participantConfigHash)?1:0).map(v=>({group:`Config version: ${v}`,items:[...y[v]].map(b=>({value:b,label:b,disabled:v!==(l==null?void 0:l.participantConfigHash)}))}))},[f,l==null?void 0:l.participantConfigHash]),[m,g]=N.useState("");return E.jsx(Yi.Footer,{zIndex:101,withBorder:!1,children:E.jsxs(Fe,{style:{backgroundColor:"var(--mantine-color-blue-1)",height:"150px"},children:[E.jsx($f,{visible:c!=="success",overlayProps:{backgroundOpacity:.4}}),E.jsx(imn,{setTimeString:g}),E.jsx(ma,{children:E.jsxs($i,{gap:"xs",style:{height:"50px"},children:[E.jsx(tt,{size:"sm",ff:"monospace",children:m}),E.jsx(L_,{variant:"filled",size:30,onClick:()=>o(s(!a)),children:a?E.jsx(Ipt,{}):E.jsx(kpt,{})}),E.jsx(tt,{mx:"0",children:"Participant:"}),E.jsx(OT,{style:{width:"300px"},value:(l==null?void 0:l.participantId)||"",onChange:y=>{i(`./${Lh(0)}?participantId=${y}`,{relative:"path"})},data:p}),E.jsx(_n,{onClick:()=>i(`./${Lh(+r-1)}?participantId=${t}`,{relative:"path"}),children:E.jsx(Tme,{})}),E.jsx(_n,{onClick:()=>i(`./${Lh(+r+1)}?participantId=${t}`,{relative:"path"}),children:E.jsx(Ame,{})}),E.jsxs(_n,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./${Lh(h[1])}?participantId=${h[0]}`),children:[E.jsx(Tme,{}),E.jsx(Ime,{})]}),E.jsxs(_n,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./${Lh(d[1])}?participantId=${d[0]}`),children:[E.jsx(Ime,{}),E.jsx(Ame,{})]})]})})]})})}function umn(){const e=N.useRef([]),t=ey(),n=t.uiConfig.windowEventDebounceTime??100,r=vi(d=>d.showStudyBrowser),i=vi(d=>d.analysisHasAudio),s=vi(d=>d.analysisHasProvenance),o=vi(d=>d.modes);N.useEffect(()=>{const d=Th(w=>{e.current.push([Date.now(),"focus",w.target instanceof HTMLElement?w.target.tagName:""])},n,{maxWait:n}),h=Th(w=>{e.current.push([Date.now(),"input",w.data??""])},n,{maxWait:n}),p=Th(w=>{e.current.push([Date.now(),"keypress",w.key])},n,{maxWait:n}),m=Th(w=>{e.current.push([Date.now(),"mousedown",[w.clientX,w.clientY]])},n,{maxWait:n}),g=Th(w=>{e.current.push([Date.now(),"mouseup",[w.clientX,w.clientY]])},n,{maxWait:n}),y=Th(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=Th(w=>{e.current.push([Date.now(),"mousemove",[w.clientX,w.clientY]])},n,{maxWait:n}),b=Th(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),_=Th(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",b),document.addEventListener("visibilitychange",_),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",b),document.removeEventListener("visibilitychange",_)}},[]);const a=t.uiConfig.sidebarWidth??300,{studyNavigatorEnabled:u,dataCollectionEnabled:l}=N.useMemo(()=>o,[o]),c=N.useMemo(()=>u&&r,[u,r]),f=HT();return E.jsx(I3e.Provider,{value:e,children:E.jsxs(Yi,{padding:"md",header:{height:70},navbar:{width:a,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!c,mobile:!c}},footer:{height:(f?50:0)+(i?50:0)+(s?25:0)},children:[E.jsx(Xpn,{}),E.jsx(Ypn,{}),E.jsx(Kpn,{studyNavigatorEnabled:u,dataCollectionEnabled:l}),E.jsx(Qpn,{}),E.jsx(Jpn,{}),E.jsx(Yi.Main,{children:E.jsx(Bht,{})}),f&&E.jsx(amn,{})]})})}function lmn(e,t=!1){return typeof e=="number"?GEe(e,t):GEe(e.length,t).map(r=>r.map(i=>e[i]))}function GEe(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function zVe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=zVe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function cmn(e,t){const n=Pg(e);return zVe(n,t,"root")}function VVe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&VVe(s,t,i,o)})}function fmn(e){const t=[];return VVe(e,t,"",0),t}function YEe(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return lmn(i.sort(()=>.5-Math.random()),!0)}function KEe(e){const n=fmn(e.sequence).map(s=>({[s]:YEe(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=cmn(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=YEe(e,o))})}),i}var dmn=T3e;function hmn(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function pmn(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function mmn(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function gmn(e){return e.__COMMENTS__}function ymn(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var ij={EOL:dmn.EOL||`
`,tryParseNumber:hmn,createComment:pmn,removeComment:mmn,getComment:gmn,forceComment:ymn},vmn="3.2.1";function bmn(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return XEe}else if(e.length===0)return XEe;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return wmn(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),xmn.bind(null,n)}function xmn(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function XEe(){}function wmn(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function HVe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}HVe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function qVe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}qVe.description="parse hexadecimal numbers prefixed with 0x";function WVe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}WVe.description="support ISO dates";var dle={loadDsf:bmn,std:{math:HVe,hex:qVe,date:WVe}},_mn=function(e,t){var n=ij,r=dle,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(L){return L==="{"||L==="}"||L==="["||L==="]"||L===","||L===":"}function d(L){var H,U=0,G=1;for(H=s-1;H>0&&i[H]!==`
`;H--,U++);for(;H>0;H--)i[H]===`
`&&G++;throw new Error(L+" at line "+G+","+U+" >>>"+i.substr(s-U,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(L){return i.charAt(s+L)}function m(L){for(var H="",U=o;h();){if(o===U)return h(),L&&U==="'"&&o==="'"&&H.length===0?(h(),g()):H;if(o==="\\")if(h(),o==="u"){for(var G=0,Y=0;Y<4;Y++){h();var J=o.charCodeAt(0),$;o>="0"&&o<="9"?$=J-48:o>="a"&&o<="f"?$=J-97+10:o>="A"&&o<="F"?$=J-65+10:d("Bad \\u char "+o),G=G*16+$}H+=String.fromCharCode(G)}else if(typeof a[o]=="string")H+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):H+=o}d("Bad string")}function g(){for(var L="",H=0,U=0;;){var G=p(-U-5);if(!G||G===`
`)break;U++}function Y(){for(var J=U;o&&o<=" "&&o!==`
`&&J-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),Y());;){if(!o)d("Bad multiline string");else if(o==="'"){if(H++,h(),H===3)return L.slice(-1)===`
`&&(L=L.slice(0,-1)),L;continue}else for(;H>0;)L+="'",H--;o===`
`?(L+=`
`,h(),Y()):(o!=="\r"&&(L+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var L="",H=s,U=-1;;){if(o===":")return L?U>=0&&U!==L.length&&(s=H+U,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),L;o<=" "?o?U<0&&(U=L.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):L+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var L=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var H=o==="\r"||o===`
`||o==="";if(H||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var U=L[0];switch(U){case"f":if(L.trim()==="false")return!1;break;case"n":if(L.trim()==="null")return null;break;case"t":if(L.trim()==="true")return!0;break;default:if(U==="-"||U>="0"&&U<="9"){var G=n.tryParseNumber(L);if(G!==void 0)return G}}if(H){L=L.trim();var Y=l(L);return Y!==void 0?Y:L}}L+=o}}function _(L,H){var U;for(L--,U=s-2;U>L&&i[U]<=" "&&i[U]!==`
`;U--);i[U]===`
`&&U--,i[U]==="\r"&&U--;var G=i.substr(L,U-L+1);for(U=0;U<G.length;U++)if(G[U]>" "){var Y=G.indexOf(`
`);if(Y>=0){var J=[G.substr(0,Y),G.substr(Y+1)];return H&&J[0].trim().length===0&&J.shift(),J}else return[G]}return[]}function w(L){function H(G,Y){var J,$,j,W;switch(typeof G){case"string":G.indexOf(Y)>=0&&(W=G);break;case"object":if(Object.prototype.toString.apply(G)==="[object Array]")for(J=0,j=G.length;J<j;J++)W=H(G[J],Y)||W;else for($ in G)Object.prototype.hasOwnProperty.call(G,$)&&(W=H(G[$],Y)||W)}return W}function U(G){var Y=H(L,G);return Y?"found '"+G+`' in a string value, your mistake could be with:
  > `+Y+`
  (unquoted strings contain everything up to the next line!)`:""}return U("}")||U("]")}function S(){var L=[],H,U,G;try{if(u&&(H=n.createComment(L,{a:[]})),h(),U=s,v(),H&&(G=_(U,!0).join(`
`)),o==="]")return h(),H&&(H.e=[G]),L;for(;o;){if(L.push(A()),U=s,v(),o===","&&(h(),U=s,v()),H){var Y=_(U);H.a.push([G||"",Y[0]||""]),G=Y[1]}if(o==="]")return h(),H&&(H.a[H.a.length-1][1]+=G||""),L;v()}d("End of input while parsing an array (missing ']')")}catch(J){throw J.hint=J.hint||w(L),J}}function T(L){var H="",U={},G,Y,J;try{if(u&&(G=n.createComment(U,{c:{},o:[]})),L?Y=1:(h(),Y=s),v(),G&&(J=_(Y,!0).join(`
`)),o==="}"&&!L)return G&&(G.e=[J]),h(),U;for(;o;){if(H=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),U[H]=A(),Y=s,v(),o===","&&(h(),Y=s,v()),G){var $=_(Y);G.c[H]=[J||"",$[0]||""],J=$[1],G.o.push(H)}if(o==="}"&&!L)return h(),G&&(G.c[H][1]+=J||""),U;v()}if(L)return U;d("End of input while parsing an object (missing '}')")}catch(j){throw j.hint=j.hint||w(U),j}}function A(){switch(v(),o){case"{":return T();case"[":return S();case"'":case'"':return m(!0);default:return b()}}function k(L,H){var U=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var G=H.join(`
`),Y=_(U).join(`
`);if(Y||G){var J=n.createComment(L,n.getComment(L));J.r=[G,Y]}}return L}function I(){v();var L=u?_(1):null;switch(o){case"{":return k(T(),L);case"[":return k(S(),L);default:return k(A(),L)}}function R(){v();var L=u?_(1):null;switch(o){case"{":return k(T(),L);case"[":return k(S(),L)}try{return k(T(!0),L)}catch(H){c();try{return k(A(),L)}catch{throw H}}}if(typeof e!="string")throw new Error("source is not a string");var F=null,O=!0;return t&&typeof t=="object"&&(u=t.keepWsc,F=t.dsf,O=t.legacyRoot!==!1),l=r.loadDsf(F,"parse"),i=e,c(),O?R():I()},Emn=function(e,t){var n=ij,r=dle,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var _,w="---\u2028--\uFEFF-",S=new RegExp('[\\\\\\"\0-'+w+"]","g"),T=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+w+"]","g"),A=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+w+"]","g"),k=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),I={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},R=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,F="",O=0;function L(W,B){return O+=W[0].length+W[1].length-W[2]-W[3],W[0]+B+W[1]}function H(W){return W.replace(S,function(B){var q=I[B];return typeof q=="string"?L(g.esc,q):L(g.uni,("0000"+B.charCodeAt(0).toString(16)).slice(-4))})}function U(W,B,q,Z){return W?(T.lastIndex=0,k.lastIndex=0,c||q||T.test(W)||n.tryParseNumber(W,!0)!==void 0||k.test(W)?(S.lastIndex=0,A.lastIndex=0,S.test(W)?!A.test(W)&&!Z&&d?G(W,B):L(g.qstr,H(W)):L(g.qstr,W)):L(g.str,W)):L(g.qstr,"")}function G(W,B){var q,Z=W.replace(/\r/g,"").split(`
`);if(B+=o,Z.length===1)return L(g.mstr,Z[0]);var re=s+B+g.mstr[0];for(q=0;q<Z.length;q++)re+=s,Z[q]&&(re+=B+Z[q]);return re+s+B+g.mstr[1]}function Y(W){return W?l||R.test(W)?(S.lastIndex=0,L(g.qkey,S.test(W)?H(W):W)):L(g.key,W):'""'}function J(W,B,q,Z){function re(Wt){return Wt&&Wt[Wt[0]==="\r"?1:0]===`
`}function xe(Wt){return Wt&&!re(Wt)}function pe(Wt,an,Sn){if(!Wt)return"";Wt=n.forceComment(Wt);var Mn,ki=Wt.length;for(Mn=0;Mn<ki&&Wt[Mn]<=" ";Mn++);return Sn&&Mn>0&&(Wt=Wt.substr(Mn)),Mn<ki?an+L(g.rem,Wt):Wt}var Te=_(W);if(Te!==void 0)return L(g.dsf,Te);switch(typeof W){case"string":return U(W,F,B,Z);case"number":return isFinite(W)?L(g.num,String(W)):L(g.lit,"null");case"boolean":return L(g.lit,String(W));case"object":if(!W)return L(g.lit,"null");var ke;a&&(ke=n.getComment(W));var it=Object.prototype.toString.apply(W)==="[object Array]",Re=F;F+=o;var ut=s+Re,Ke=s+F,Ct=q||u?"":ut,gt=[],Ie,Ve=f?[]:null,ft=c,_t=d,Mt=h?"":g.com[0],st=0,X,de,we,ae,he,Ee,$e,Be,lt;if(it){for(X=0,de=W.length;X<de;X++){if(Ie=X<de-1,ke?(Ee=ke.a[X]||[],$e=xe(Ee[1]),gt.push(pe(Ee[0],`
`)+Ke),Ve&&(Ee[0]||Ee[1]||$e)&&(Ve=null)):gt.push(Ke),O=0,ae=W[X],gt.push(J(ae,ke?$e:!1,!0)+(Ie?h:"")),Ve){switch(typeof ae){case"string":O=0,c=!0,d=0,Ve.push(J(ae,!1,!0)+(Ie?g.com[0]:"")),c=ft,d=_t;break;case"object":if(ae){Ve=null;break}default:Ve.push(gt[gt.length-1]+(Ie?Mt:""));break}Ie&&(O+=g.com[0].length-g.com[2]),st+=O}ke&&Ee[1]&&gt.push(pe(Ee[1],$e?" ":`
`,$e))}de===0?ke&&ke.e&&gt.push(pe(ke.e[0],`
`)+ut):gt.push(ut),gt.length===0?Be=L(g.arr,""):(Be=Ct+L(g.arr,gt.join("")),Ve&&(lt=Ve.join(" "),lt.length-st<=f&&(Be=L(g.arr,lt))))}else{var Je=ke?ke.o.slice():[],Xt=[];for(we in W)Object.prototype.hasOwnProperty.call(W,we)&&Je.indexOf(we)<0&&Xt.push(we);m&&Xt.sort();var fn=Je.concat(Xt);for(X=0,de=fn.length;X<de;X++)if(Ie=X<de-1,we=fn[X],ke?(Ee=ke.c[we]||[],$e=xe(Ee[1]),gt.push(pe(Ee[0],`
`)+Ke),Ve&&(Ee[0]||Ee[1]||$e)&&(Ve=null)):gt.push(Ke),O=0,ae=W[we],he=J(ae,ke&&$e),gt.push(Y(we)+g.col[0]+(re(he)?"":" ")+he+(Ie?h:"")),ke&&Ee[1]&&gt.push(pe(Ee[1],$e?" ":`
`,$e)),Ve){switch(typeof ae){case"string":O=0,c=!0,d=0,he=J(ae,!1),c=ft,d=_t,Ve.push(Y(we)+g.col[0]+" "+he+(Ie?g.com[0]:""));break;case"object":if(ae){Ve=null;break}default:Ve.push(gt[gt.length-1]+(Ie?Mt:""));break}O+=g.col[0].length-g.col[2],Ie&&(O+=g.com[0].length-g.com[2]),st+=O}de===0?ke&&ke.e&&gt.push(pe(ke.e[0],`
`)+ut):gt.push(ut),gt.length===0?Be=L(g.obj,""):(Be=Ct+L(g.obj,gt.join("")),Ve&&(lt=Ve.join(" "),lt.length-st<=f&&(Be=L(g.obj,lt))))}return F=Re,Be}}_=r.loadDsf(p,"stringify");var $="",j=a?j=(n.getComment(e)||{}).r:null;return j&&j[0]&&($=j[0]+`
`),$+=J(e,null,!0,!0),j&&($+=j[1]||""),$},zS=ij;function Uk(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function _Q(e,t){if(!(e===null||typeof e!="object")){var n=zS.getComment(e);n&&zS.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)QEe(o.a,r,n.a[r],_Q(e[r]))&&(s=!0);!s&&n.e&&(o.e=Uk(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];QEe(o.s,l,n.c[l],_Q(e[l]))&&(s=!0)}!s&&n.e&&(o.e=Uk(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=Uk(n.r[0],n.r[1])),s?o:void 0}}function Smn(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function Cmn(e,t){var n=[];if(EQ(e,t,n,[]),n.length>0){var r=P$(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+Smn(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),P$(t,r,1)}}function QEe(e,t,n,r){var i=Uk(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function zk(e,t){var n=Uk(t.b,t.a);return n.path=e,n}function Vk(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(zk(s,o)),Vk(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(zk(u,l)),Vk(l.x,t,u))});e.e&&t.push(zk(n,e.e))}}function EQ(e,t,n,r){if(e){if(t===null||typeof t!="object"){Vk(e,n,r);return}var i,s=zS.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],EQ(u.x,t[i],n,l)):(n.push(zk(l,u)),Vk(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],EQ(d.x,t[c],n,f))):d&&(n.push(zk(f,d)),Vk(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function P$(e,t,n){var r=zS.createComment(e,zS.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=zS.forceComment(t)),r.r[n]||""}var Tmn={extract:function(e){return _Q(e,!0)},merge:Cmn,header:function(e,t){return P$(e,t,0)},footer:function(e,t){return P$(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var JEe=ij,Amn=vmn,ZEe=_mn,e2e=Emn,Dmn=Tmn,Imn=dle,sj={parse:ZEe,stringify:e2e,endOfLine:function(){return JEe.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(JEe.EOL=e)},version:Amn,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,ZEe(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,e2e(e,t)}},comments:Dmn,dsf:Imn.std},SQ={exports:{}},GVe={},ap={},cT={},IP={},Tr={},F3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,_)=>`${b}${_}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,_)=>(_ instanceof n&&(b[_.str]=(b[_.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let _=0;for(;_<v.length;)a(b,v[_]),b.push(y[++_]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let _=0;for(;_<v.length;)b.push(s),a(b,v[_]),b.push(s,h(y[++_]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(F3);var CQ={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=F3;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(CQ);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=F3,n=CQ;var r=F3;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=CQ;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(q,Z){return this}}class o extends s{constructor(q,Z,re){super(),this.varKind=q,this.name=Z,this.rhs=re}render({es5:q,_n:Z}){const re=q?n.varKinds.var:this.varKind,xe=this.rhs===void 0?"":` = ${this.rhs}`;return`${re} ${this.name}${xe};`+Z}optimizeNames(q,Z){if(q[this.name.str])return this.rhs&&(this.rhs=L(this.rhs,q,Z)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(q,Z,re){super(),this.lhs=q,this.rhs=Z,this.sideEffects=re}render({_n:q}){return`${this.lhs} = ${this.rhs};`+q}optimizeNames(q,Z){if(!(this.lhs instanceof t.Name&&!q[this.lhs.str]&&!this.sideEffects))return this.rhs=L(this.rhs,q,Z),this}get names(){const q=this.lhs instanceof t.Name?{}:{...this.lhs.names};return O(q,this.rhs)}}class u extends a{constructor(q,Z,re,xe){super(q,re,xe),this.op=Z}render({_n:q}){return`${this.lhs} ${this.op}= ${this.rhs};`+q}}class l extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`${this.label}:`+q}}class c extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`break${this.label?` ${this.label}`:""};`+q}}class f extends s{constructor(q){super(),this.error=q}render({_n:q}){return`throw ${this.error};`+q}get names(){return this.error.names}}class d extends s{constructor(q){super(),this.code=q}render({_n:q}){return`${this.code};`+q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(q,Z){return this.code=L(this.code,q,Z),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(q=[]){super(),this.nodes=q}render(q){return this.nodes.reduce((Z,re)=>Z+re.render(q),"")}optimizeNodes(){const{nodes:q}=this;let Z=q.length;for(;Z--;){const re=q[Z].optimizeNodes();Array.isArray(re)?q.splice(Z,1,...re):re?q[Z]=re:q.splice(Z,1)}return q.length>0?this:void 0}optimizeNames(q,Z){const{nodes:re}=this;let xe=re.length;for(;xe--;){const pe=re[xe];pe.optimizeNames(q,Z)||(H(q,pe.names),re.splice(xe,1))}return re.length>0?this:void 0}get names(){return this.nodes.reduce((q,Z)=>F(q,Z.names),{})}}class p extends h{render(q){return"{"+q._n+super.render(q)+"}"+q._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(q,Z){super(Z),this.condition=q}render(q){let Z=`if(${this.condition})`+super.render(q);return this.else&&(Z+="else "+this.else.render(q)),Z}optimizeNodes(){super.optimizeNodes();const q=this.condition;if(q===!0)return this.nodes;let Z=this.else;if(Z){const re=Z.optimizeNodes();Z=this.else=Array.isArray(re)?new g(re):re}if(Z)return q===!1?Z instanceof y?Z:Z.nodes:this.nodes.length?this:new y(U(q),Z instanceof y?[Z]:Z.nodes);if(!(q===!1||!this.nodes.length))return this}optimizeNames(q,Z){var re;if(this.else=(re=this.else)===null||re===void 0?void 0:re.optimizeNames(q,Z),!!(super.optimizeNames(q,Z)||this.else))return this.condition=L(this.condition,q,Z),this}get names(){const q=super.names;return O(q,this.condition),this.else&&F(q,this.else.names),q}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(q){super(),this.iteration=q}render(q){return`for(${this.iteration})`+super.render(q)}optimizeNames(q,Z){if(super.optimizeNames(q,Z))return this.iteration=L(this.iteration,q,Z),this}get names(){return F(super.names,this.iteration.names)}}class _ extends v{constructor(q,Z,re,xe){super(),this.varKind=q,this.name=Z,this.from=re,this.to=xe}render(q){const Z=q.es5?n.varKinds.var:this.varKind,{name:re,from:xe,to:pe}=this;return`for(${Z} ${re}=${xe}; ${re}<${pe}; ${re}++)`+super.render(q)}get names(){const q=O(super.names,this.from);return O(q,this.to)}}class w extends v{constructor(q,Z,re,xe){super(),this.loop=q,this.varKind=Z,this.name=re,this.iterable=xe}render(q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(q)}optimizeNames(q,Z){if(super.optimizeNames(q,Z))return this.iterable=L(this.iterable,q,Z),this}get names(){return F(super.names,this.iterable.names)}}class S extends p{constructor(q,Z,re){super(),this.name=q,this.args=Z,this.async=re}render(q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(q)}}S.kind="func";class T extends h{render(q){return"return "+super.render(q)}}T.kind="return";class A extends p{render(q){let Z="try"+super.render(q);return this.catch&&(Z+=this.catch.render(q)),this.finally&&(Z+=this.finally.render(q)),Z}optimizeNodes(){var q,Z;return super.optimizeNodes(),(q=this.catch)===null||q===void 0||q.optimizeNodes(),(Z=this.finally)===null||Z===void 0||Z.optimizeNodes(),this}optimizeNames(q,Z){var re,xe;return super.optimizeNames(q,Z),(re=this.catch)===null||re===void 0||re.optimizeNames(q,Z),(xe=this.finally)===null||xe===void 0||xe.optimizeNames(q,Z),this}get names(){const q=super.names;return this.catch&&F(q,this.catch.names),this.finally&&F(q,this.finally.names),q}}class k extends p{constructor(q){super(),this.error=q}render(q){return`catch(${this.error})`+super.render(q)}}k.kind="catch";class I extends p{render(q){return"finally"+super.render(q)}}I.kind="finally";class R{constructor(q,Z={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...Z,_n:Z.lines?`
`:""},this._extScope=q,this._scope=new n.Scope({parent:q}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(q){return this._scope.name(q)}scopeName(q){return this._extScope.name(q)}scopeValue(q,Z){const re=this._extScope.value(q,Z);return(this._values[re.prefix]||(this._values[re.prefix]=new Set)).add(re),re}getScopeValue(q,Z){return this._extScope.getValue(q,Z)}scopeRefs(q){return this._extScope.scopeRefs(q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(q,Z,re,xe){const pe=this._scope.toName(Z);return re!==void 0&&xe&&(this._constants[pe.str]=re),this._leafNode(new o(q,pe,re)),pe}const(q,Z,re){return this._def(n.varKinds.const,q,Z,re)}let(q,Z,re){return this._def(n.varKinds.let,q,Z,re)}var(q,Z,re){return this._def(n.varKinds.var,q,Z,re)}assign(q,Z,re){return this._leafNode(new a(q,Z,re))}add(q,Z){return this._leafNode(new u(q,e.operators.ADD,Z))}code(q){return typeof q=="function"?q():q!==t.nil&&this._leafNode(new d(q)),this}object(...q){const Z=["{"];for(const[re,xe]of q)Z.length>1&&Z.push(","),Z.push(re),(re!==xe||this.opts.es5)&&(Z.push(":"),(0,t.addCodeArg)(Z,xe));return Z.push("}"),new t._Code(Z)}if(q,Z,re){if(this._blockNode(new y(q)),Z&&re)this.code(Z).else().code(re).endIf();else if(Z)this.code(Z).endIf();else if(re)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(q){return this._elseNode(new y(q))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(q,Z){return this._blockNode(q),Z&&this.code(Z).endFor(),this}for(q,Z){return this._for(new b(q),Z)}forRange(q,Z,re,xe,pe=this.opts.es5?n.varKinds.var:n.varKinds.let){const Te=this._scope.toName(q);return this._for(new _(pe,Te,Z,re),()=>xe(Te))}forOf(q,Z,re,xe=n.varKinds.const){const pe=this._scope.toName(q);if(this.opts.es5){const Te=Z instanceof t.Name?Z:this.var("_arr",Z);return this.forRange("_i",0,(0,t._)`${Te}.length`,ke=>{this.var(pe,(0,t._)`${Te}[${ke}]`),re(pe)})}return this._for(new w("of",xe,pe,Z),()=>re(pe))}forIn(q,Z,re,xe=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(q,(0,t._)`Object.keys(${Z})`,re);const pe=this._scope.toName(q);return this._for(new w("in",xe,pe,Z),()=>re(pe))}endFor(){return this._endBlockNode(v)}label(q){return this._leafNode(new l(q))}break(q){return this._leafNode(new c(q))}return(q){const Z=new T;if(this._blockNode(Z),this.code(q),Z.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(T)}try(q,Z,re){if(!Z&&!re)throw new Error('CodeGen: "try" without "catch" and "finally"');const xe=new A;if(this._blockNode(xe),this.code(q),Z){const pe=this.name("e");this._currNode=xe.catch=new k(pe),Z(pe)}return re&&(this._currNode=xe.finally=new I,this.code(re)),this._endBlockNode(k,I)}throw(q){return this._leafNode(new f(q))}block(q,Z){return this._blockStarts.push(this._nodes.length),q&&this.code(q).endBlock(Z),this}endBlock(q){const Z=this._blockStarts.pop();if(Z===void 0)throw new Error("CodeGen: not in self-balancing block");const re=this._nodes.length-Z;if(re<0||q!==void 0&&re!==q)throw new Error(`CodeGen: wrong number of nodes: ${re} vs ${q} expected`);return this._nodes.length=Z,this}func(q,Z=t.nil,re,xe){return this._blockNode(new S(q,Z,re)),xe&&this.code(xe).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(q=1){for(;q-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(q){return this._currNode.nodes.push(q),this}_blockNode(q){this._currNode.nodes.push(q),this._nodes.push(q)}_endBlockNode(q,Z){const re=this._currNode;if(re instanceof q||Z&&re instanceof Z)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${Z?`${q.kind}/${Z.kind}`:q.kind}"`)}_elseNode(q){const Z=this._currNode;if(!(Z instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=Z.else=q,this}get _root(){return this._nodes[0]}get _currNode(){const q=this._nodes;return q[q.length-1]}set _currNode(q){const Z=this._nodes;Z[Z.length-1]=q}}e.CodeGen=R;function F(B,q){for(const Z in q)B[Z]=(B[Z]||0)+(q[Z]||0);return B}function O(B,q){return q instanceof t._CodeOrName?F(B,q.names):B}function L(B,q,Z){if(B instanceof t.Name)return re(B);if(!xe(B))return B;return new t._Code(B._items.reduce((pe,Te)=>(Te instanceof t.Name&&(Te=re(Te)),Te instanceof t._Code?pe.push(...Te._items):pe.push(Te),pe),[]));function re(pe){const Te=Z[pe.str];return Te===void 0||q[pe.str]!==1?pe:(delete q[pe.str],Te)}function xe(pe){return pe instanceof t._Code&&pe._items.some(Te=>Te instanceof t.Name&&q[Te.str]===1&&Z[Te.str]!==void 0)}}function H(B,q){for(const Z in q)B[Z]=(B[Z]||0)-(q[Z]||0)}function U(B){return typeof B=="boolean"||typeof B=="number"||B===null?!B:(0,t._)`!${W(B)}`}e.not=U;const G=j(e.operators.AND);function Y(...B){return B.reduce(G)}e.and=Y;const J=j(e.operators.OR);function $(...B){return B.reduce(J)}e.or=$;function j(B){return(q,Z)=>q===t.nil?Z:Z===t.nil?q:(0,t._)`${W(q)} ${B} ${W(Z)}`}function W(B){return B instanceof t.Name?B:(0,t._)`(${B})`}})(Tr);var qt={};Object.defineProperty(qt,"__esModule",{value:!0});qt.checkStrictMode=qt.getErrorPath=qt.Type=qt.useFunc=qt.setEvaluated=qt.evaluatedPropsToName=qt.mergeEvaluated=qt.eachItem=qt.unescapeJsonPointer=qt.escapeJsonPointer=qt.escapeFragment=qt.unescapeFragment=qt.schemaRefOrVal=qt.schemaHasRulesButRef=qt.schemaHasRules=qt.checkUnknownRules=qt.alwaysValidSchema=qt.toHash=void 0;const ss=Tr,kmn=F3;function Rmn(e){const t={};for(const n of e)t[n]=!0;return t}qt.toHash=Rmn;function Nmn(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(YVe(e,t),!KVe(t,e.self.RULES.all))}qt.alwaysValidSchema=Nmn;function YVe(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||JVe(e,`unknown keyword: "${s}"`)}qt.checkUnknownRules=YVe;function KVe(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}qt.schemaHasRules=KVe;function Pmn(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}qt.schemaHasRulesButRef=Pmn;function Omn({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,ss._)`${n}`}return(0,ss._)`${e}${t}${(0,ss.getProperty)(r)}`}qt.schemaRefOrVal=Omn;function Fmn(e){return XVe(decodeURIComponent(e))}qt.unescapeFragment=Fmn;function Mmn(e){return encodeURIComponent(hle(e))}qt.escapeFragment=Mmn;function hle(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}qt.escapeJsonPointer=hle;function XVe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}qt.unescapeJsonPointer=XVe;function $mn(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}qt.eachItem=$mn;function t2e({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof ss.Name?(s instanceof ss.Name?e(i,s,o):t(i,s,o),o):s instanceof ss.Name?(t(i,o,s),s):n(s,o);return a===ss.Name&&!(u instanceof ss.Name)?r(i,u):u}}qt.mergeEvaluated={props:t2e({mergeNames:(e,t,n)=>e.if((0,ss._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,ss._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,ss._)`${n} || {}`).code((0,ss._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,ss._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,ss._)`${n} || {}`),ple(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:QVe}),items:t2e({mergeNames:(e,t,n)=>e.if((0,ss._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,ss._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,ss._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,ss._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function QVe(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,ss._)`{}`);return t!==void 0&&ple(e,n,t),n}qt.evaluatedPropsToName=QVe;function ple(e,t,n){Object.keys(n).forEach(r=>e.assign((0,ss._)`${t}${(0,ss.getProperty)(r)}`,!0))}qt.setEvaluated=ple;const n2e={};function Lmn(e,t){return e.scopeValue("func",{ref:t,code:n2e[t.code]||(n2e[t.code]=new kmn._Code(t.code))})}qt.useFunc=Lmn;var TQ;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(TQ||(qt.Type=TQ={}));function Bmn(e,t,n){if(e instanceof ss.Name){const r=t===TQ.Num;return n?r?(0,ss._)`"[" + ${e} + "]"`:(0,ss._)`"['" + ${e} + "']"`:r?(0,ss._)`"/" + ${e}`:(0,ss._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,ss.getProperty)(e).toString():"/"+hle(e)}qt.getErrorPath=Bmn;function JVe(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}qt.checkStrictMode=JVe;var A0={};Object.defineProperty(A0,"__esModule",{value:!0});const ku=Tr,jmn={data:new ku.Name("data"),valCxt:new ku.Name("valCxt"),instancePath:new ku.Name("instancePath"),parentData:new ku.Name("parentData"),parentDataProperty:new ku.Name("parentDataProperty"),rootData:new ku.Name("rootData"),dynamicAnchors:new ku.Name("dynamicAnchors"),vErrors:new ku.Name("vErrors"),errors:new ku.Name("errors"),this:new ku.Name("this"),self:new ku.Name("self"),scope:new ku.Name("scope"),json:new ku.Name("json"),jsonPos:new ku.Name("jsonPos"),jsonLen:new ku.Name("jsonLen"),jsonPart:new ku.Name("jsonPart")};A0.default=jmn;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Tr,n=qt,r=A0;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:_}=g,{gen:w,compositeRule:S,allErrors:T}=_,A=f(g,y,v);b??(S||T)?u(w,A):l(_,(0,t._)`[${A}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:_,compositeRule:w,allErrors:S}=b,T=f(g,y,v);u(_,T),w||S||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:_,it:w}){if(_===void 0)throw new Error("ajv implementation error");const S=g.name("err");g.forRange("i",_,r.default.errors,T=>{g.const(S,(0,t._)`${r.default.vErrors}[${T}]`),g.if((0,t._)`${S}.instancePath === undefined`,()=>g.assign((0,t._)`${S}.instancePath`,(0,t.strConcat)(r.default.instancePath,w.errorPath))),g.assign((0,t._)`${S}.schemaPath`,(0,t.str)`${w.errSchemaPath}/${y}`),w.opts.verbose&&(g.assign((0,t._)`${S}.schema`,v),g.assign((0,t._)`${S}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:_}=g;_.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:_}=g,w=[h(_,v),p(g,v)];return m(g,y,w),b.object(...w)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let _=b?y:(0,t.str)`${y}/${g}`;return v&&(_=(0,t.str)`${_}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,_]}function m(g,{params:y,message:v},b){const{keyword:_,data:w,schemaValue:S,it:T}=g,{opts:A,propertyName:k,topSchemaRef:I,schemaPath:R}=T;b.push([c.keyword,_],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),A.messages&&b.push([c.message,typeof v=="function"?v(g):v]),A.verbose&&b.push([c.schema,S],[c.parentSchema,(0,t._)`${I}${R}`],[r.default.data,w]),k&&b.push([c.propertyName,k])}})(IP);Object.defineProperty(cT,"__esModule",{value:!0});cT.boolOrEmptySchema=cT.topBoolOrEmptySchema=void 0;const Umn=IP,zmn=Tr,Vmn=A0,Hmn={message:"boolean schema is false"};function qmn(e){const{gen:t,schema:n,validateName:r}=e;n===!1?ZVe(e,!1):typeof n=="object"&&n.$async===!0?t.return(Vmn.default.data):(t.assign((0,zmn._)`${r}.errors`,null),t.return(!0))}cT.topBoolOrEmptySchema=qmn;function Wmn(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),ZVe(e)):n.var(t,!0)}cT.boolOrEmptySchema=Wmn;function ZVe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Umn.reportError)(i,Hmn,void 0,t)}var ra={},S_={};Object.defineProperty(S_,"__esModule",{value:!0});S_.getRules=S_.isJSONType=void 0;const Gmn=["string","number","integer","boolean","null","object","array"],Ymn=new Set(Gmn);function Kmn(e){return typeof e=="string"&&Ymn.has(e)}S_.isJSONType=Kmn;function Xmn(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}S_.getRules=Xmn;var Ug={};Object.defineProperty(Ug,"__esModule",{value:!0});Ug.shouldUseRule=Ug.shouldUseGroup=Ug.schemaHasRulesForType=void 0;function Qmn({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&eHe(e,r)}Ug.schemaHasRulesForType=Qmn;function eHe(e,t){return t.rules.some(n=>tHe(e,n))}Ug.shouldUseGroup=eHe;function tHe(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Ug.shouldUseRule=tHe;Object.defineProperty(ra,"__esModule",{value:!0});ra.reportTypeError=ra.checkDataTypes=ra.checkDataType=ra.coerceAndCheckDataType=ra.getJSONTypes=ra.getSchemaTypes=ra.DataType=void 0;const Jmn=S_,Zmn=Ug,e0n=IP,dr=Tr,nHe=qt;var VS;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(VS||(ra.DataType=VS={}));function t0n(e){const t=rHe(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}ra.getSchemaTypes=t0n;function rHe(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(Jmn.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}ra.getJSONTypes=rHe;function n0n(e,t){const{gen:n,data:r,opts:i}=e,s=r0n(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,Zmn.schemaHasRulesForType)(e,t[0]));if(o){const a=mle(t,r,i.strictNumbers,VS.Wrong);n.if(a,()=>{s.length?i0n(e,t,s):gle(e)})}return o}ra.coerceAndCheckDataType=n0n;const iHe=new Set(["string","number","integer","boolean","null"]);function r0n(e,t){return t?e.filter(n=>iHe.has(n)||t==="array"&&n==="array"):[]}function i0n(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,dr._)`typeof ${i}`),a=r.let("coerced",(0,dr._)`undefined`);s.coerceTypes==="array"&&r.if((0,dr._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,dr._)`${i}[0]`).assign(o,(0,dr._)`typeof ${i}`).if(mle(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,dr._)`${a} !== undefined`);for(const l of n)(iHe.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),gle(e),r.endIf(),r.if((0,dr._)`${a} !== undefined`,()=>{r.assign(i,a),s0n(e,a)});function u(l){switch(l){case"string":r.elseIf((0,dr._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,dr._)`"" + ${i}`).elseIf((0,dr._)`${i} === null`).assign(a,(0,dr._)`""`);return;case"number":r.elseIf((0,dr._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,dr._)`+${i}`);return;case"integer":r.elseIf((0,dr._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,dr._)`+${i}`);return;case"boolean":r.elseIf((0,dr._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,dr._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,dr._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,dr._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,dr._)`[${i}]`)}}}function s0n({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,dr._)`${t} !== undefined`,()=>e.assign((0,dr._)`${t}[${n}]`,r))}function AQ(e,t,n,r=VS.Correct){const i=r===VS.Correct?dr.operators.EQ:dr.operators.NEQ;let s;switch(e){case"null":return(0,dr._)`${t} ${i} null`;case"array":s=(0,dr._)`Array.isArray(${t})`;break;case"object":s=(0,dr._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,dr._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,dr._)`typeof ${t} ${i} ${e}`}return r===VS.Correct?s:(0,dr.not)(s);function o(a=dr.nil){return(0,dr.and)((0,dr._)`typeof ${t} == "number"`,a,n?(0,dr._)`isFinite(${t})`:dr.nil)}}ra.checkDataType=AQ;function mle(e,t,n,r){if(e.length===1)return AQ(e[0],t,n,r);let i;const s=(0,nHe.toHash)(e);if(s.array&&s.object){const o=(0,dr._)`typeof ${t} != "object"`;i=s.null?o:(0,dr._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=dr.nil;s.number&&delete s.integer;for(const o in s)i=(0,dr.and)(i,AQ(o,t,n,r));return i}ra.checkDataTypes=mle;const o0n={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,dr._)`{type: ${e}}`:(0,dr._)`{type: ${t}}`};function gle(e){const t=a0n(e);(0,e0n.reportError)(t,o0n)}ra.reportTypeError=gle;function a0n(e){const{gen:t,data:n,schema:r}=e,i=(0,nHe.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var oj={};Object.defineProperty(oj,"__esModule",{value:!0});oj.assignDefaults=void 0;const m2=Tr,u0n=qt;function l0n(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)r2e(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>r2e(e,s,i.default))}oj.assignDefaults=l0n;function r2e(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,m2._)`${s}${(0,m2.getProperty)(t)}`;if(i){(0,u0n.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,m2._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,m2._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,m2._)`${a} = ${(0,m2.stringify)(n)}`)}var _m={},Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});Sr.validateUnion=Sr.validateArray=Sr.usePattern=Sr.callValidateCode=Sr.schemaProperties=Sr.allSchemaProperties=Sr.noPropertyInData=Sr.propertyInData=Sr.isOwnProperty=Sr.hasPropFunc=Sr.reportMissingProp=Sr.checkMissingProp=Sr.checkReportMissingProp=void 0;const Es=Tr,yle=qt,r1=A0,c0n=qt;function f0n(e,t){const{gen:n,data:r,it:i}=e;n.if(ble(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,Es._)`${t}`},!0),e.error()})}Sr.checkReportMissingProp=f0n;function d0n({gen:e,data:t,it:{opts:n}},r,i){return(0,Es.or)(...r.map(s=>(0,Es.and)(ble(e,t,s,n.ownProperties),(0,Es._)`${i} = ${s}`)))}Sr.checkMissingProp=d0n;function h0n(e,t){e.setParams({missingProperty:t},!0),e.error()}Sr.reportMissingProp=h0n;function sHe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Es._)`Object.prototype.hasOwnProperty`})}Sr.hasPropFunc=sHe;function vle(e,t,n){return(0,Es._)`${sHe(e)}.call(${t}, ${n})`}Sr.isOwnProperty=vle;function p0n(e,t,n,r){const i=(0,Es._)`${t}${(0,Es.getProperty)(n)} !== undefined`;return r?(0,Es._)`${i} && ${vle(e,t,n)}`:i}Sr.propertyInData=p0n;function ble(e,t,n,r){const i=(0,Es._)`${t}${(0,Es.getProperty)(n)} === undefined`;return r?(0,Es.or)(i,(0,Es.not)(vle(e,t,n))):i}Sr.noPropertyInData=ble;function oHe(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Sr.allSchemaProperties=oHe;function m0n(e,t){return oHe(t).filter(n=>!(0,yle.alwaysValidSchema)(e,t[n]))}Sr.schemaProperties=m0n;function g0n({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,Es._)`${e}, ${t}, ${r}${i}`:t,f=[[r1.default.instancePath,(0,Es.strConcat)(r1.default.instancePath,s)],[r1.default.parentData,o.parentData],[r1.default.parentDataProperty,o.parentDataProperty],[r1.default.rootData,r1.default.rootData]];o.opts.dynamicRef&&f.push([r1.default.dynamicAnchors,r1.default.dynamicAnchors]);const d=(0,Es._)`${c}, ${n.object(...f)}`;return u!==Es.nil?(0,Es._)`${a}.call(${u}, ${d})`:(0,Es._)`${a}(${d})`}Sr.callValidateCode=g0n;const y0n=(0,Es._)`new RegExp`;function v0n({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,Es._)`${i.code==="new RegExp"?y0n:(0,c0n.useFunc)(e,i)}(${n}, ${r})`})}Sr.usePattern=v0n;function b0n(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,Es._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:yle.Type.Num},s),t.if((0,Es.not)(s),a)})}}Sr.validateArray=b0n;function x0n(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,yle.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,Es._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,Es.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Sr.validateUnion=x0n;Object.defineProperty(_m,"__esModule",{value:!0});_m.validateKeywordUsage=_m.validSchemaType=_m.funcKeywordCode=_m.macroKeywordCode=void 0;const _l=Tr,rw=A0,w0n=Sr,_0n=IP;function E0n(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=aHe(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:_l.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}_m.macroKeywordCode=E0n;function S0n(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;T0n(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=aHe(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&i2e(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&i2e(e),g(()=>C0n(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,_l._)`await `),v=>r.assign(f,!1).if((0,_l._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,_l._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,_l._)`${c}.errors`;return r.assign(y,null),m(_l.nil),y}function m(y=t.async?(0,_l._)`await `:_l.nil){const v=u.opts.passContext?rw.default.this:rw.default.self,b=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,_l._)`${y}${(0,w0n.callValidateCode)(e,c,v,b)}`,t.modifying)}function g(y){var v;r.if((0,_l.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}_m.funcKeywordCode=S0n;function i2e(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,_l._)`${r.parentData}[${r.parentDataProperty}]`))}function C0n(e,t){const{gen:n}=e;n.if((0,_l._)`Array.isArray(${t})`,()=>{n.assign(rw.default.vErrors,(0,_l._)`${rw.default.vErrors} === null ? ${t} : ${rw.default.vErrors}.concat(${t})`).assign(rw.default.errors,(0,_l._)`${rw.default.vErrors}.length`),(0,_0n.extendErrors)(e)},()=>e.error())}function T0n({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function aHe(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,_l.stringify)(n)})}function A0n(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}_m.validSchemaType=A0n;function D0n({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}_m.validateKeywordUsage=D0n;var bv={};Object.defineProperty(bv,"__esModule",{value:!0});bv.extendSubschemaMode=bv.extendSubschemaData=bv.getSubschema=void 0;const vm=Tr,uHe=qt;function I0n(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,vm._)`${e.schemaPath}${(0,vm.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,vm._)`${e.schemaPath}${(0,vm.getProperty)(t)}${(0,vm.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,uHe.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}bv.getSubschema=I0n;function k0n(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,vm._)`${t.data}${(0,vm.getProperty)(n)}`,!0);u(d),e.errorPath=(0,vm.str)`${l}${(0,uHe.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,vm._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof vm.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}bv.extendSubschemaData=k0n;function R0n(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}bv.extendSubschemaMode=R0n;var nu={},lHe={exports:{}},Q1=lHe.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};HF(t,r,i,e,"",e)};Q1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Q1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Q1.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Q1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function HF(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in Q1.arrayKeywords)for(var d=0;d<f.length;d++)HF(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in Q1.propsKeywords){if(f&&typeof f=="object")for(var h in f)HF(e,t,n,f[h],i+"/"+c+"/"+N0n(h),s,i,c,r,h)}else(c in Q1.keywords||e.allKeys&&!(c in Q1.skipKeywords))&&HF(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function N0n(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var P0n=lHe.exports;Object.defineProperty(nu,"__esModule",{value:!0});nu.getSchemaRefs=nu.resolveUrl=nu.normalizeId=nu._getFullPath=nu.getFullPath=nu.inlineRef=void 0;const O0n=qt,F0n=kte,M0n=P0n,$0n=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function L0n(e,t=!0){return typeof e=="boolean"?!0:t===!0?!DQ(e):t?cHe(e)<=t:!1}nu.inlineRef=L0n;const B0n=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function DQ(e){for(const t in e){if(B0n.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(DQ)||typeof n=="object"&&DQ(n))return!0}return!1}function cHe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!$0n.has(n)&&(typeof e[n]=="object"&&(0,O0n.eachItem)(e[n],r=>t+=cHe(r)),t===1/0))return 1/0}return t}function fHe(e,t="",n){n!==!1&&(t=HS(t));const r=e.parse(t);return dHe(e,r)}nu.getFullPath=fHe;function dHe(e,t){return e.serialize(t).split("#")[0]+"#"}nu._getFullPath=dHe;const j0n=/#\/?$/;function HS(e){return e?e.replace(j0n,""):""}nu.normalizeId=HS;function U0n(e,t,n){return n=HS(n),e.resolve(t,n)}nu.resolveUrl=U0n;const z0n=/^[a-z_][-a-z0-9._]*$/i;function V0n(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=HS(e[n]||t),s={"":i},o=fHe(r,i,!1),a={},u=new Set;return M0n(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const _=this.opts.uriResolver.resolve;if(b=HS(g?_(g,b):b),u.has(b))throw c(b);u.add(b);let w=this.refs[b];return typeof w=="string"&&(w=this.refs[w]),typeof w=="object"?l(f,w.schema,b):b!==HS(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!z0n.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!F0n(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}nu.getSchemaRefs=V0n;Object.defineProperty(ap,"__esModule",{value:!0});ap.getData=ap.KeywordCxt=ap.validateFunctionCode=void 0;const hHe=cT,s2e=ra,xle=Ug,O$=ra,H0n=oj,Hk=_m,Uq=bv,ln=Tr,Hn=A0,q0n=nu,zg=qt,eI=IP;function W0n(e){if(gHe(e)&&(yHe(e),mHe(e))){K0n(e);return}pHe(e,()=>(0,hHe.topBoolOrEmptySchema)(e))}ap.validateFunctionCode=W0n;function pHe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,ln._)`${Hn.default.data}, ${Hn.default.valCxt}`,r.$async,()=>{e.code((0,ln._)`"use strict"; ${o2e(n,i)}`),Y0n(e,i),e.code(s)}):e.func(t,(0,ln._)`${Hn.default.data}, ${G0n(i)}`,r.$async,()=>e.code(o2e(n,i)).code(s))}function G0n(e){return(0,ln._)`{${Hn.default.instancePath}="", ${Hn.default.parentData}, ${Hn.default.parentDataProperty}, ${Hn.default.rootData}=${Hn.default.data}${e.dynamicRef?(0,ln._)`, ${Hn.default.dynamicAnchors}={}`:ln.nil}}={}`}function Y0n(e,t){e.if(Hn.default.valCxt,()=>{e.var(Hn.default.instancePath,(0,ln._)`${Hn.default.valCxt}.${Hn.default.instancePath}`),e.var(Hn.default.parentData,(0,ln._)`${Hn.default.valCxt}.${Hn.default.parentData}`),e.var(Hn.default.parentDataProperty,(0,ln._)`${Hn.default.valCxt}.${Hn.default.parentDataProperty}`),e.var(Hn.default.rootData,(0,ln._)`${Hn.default.valCxt}.${Hn.default.rootData}`),t.dynamicRef&&e.var(Hn.default.dynamicAnchors,(0,ln._)`${Hn.default.valCxt}.${Hn.default.dynamicAnchors}`)},()=>{e.var(Hn.default.instancePath,(0,ln._)`""`),e.var(Hn.default.parentData,(0,ln._)`undefined`),e.var(Hn.default.parentDataProperty,(0,ln._)`undefined`),e.var(Hn.default.rootData,Hn.default.data),t.dynamicRef&&e.var(Hn.default.dynamicAnchors,(0,ln._)`{}`)})}function K0n(e){const{schema:t,opts:n,gen:r}=e;pHe(e,()=>{n.$comment&&t.$comment&&bHe(e),egn(e),r.let(Hn.default.vErrors,null),r.let(Hn.default.errors,0),n.unevaluated&&X0n(e),vHe(e),rgn(e)})}function X0n(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,ln._)`${n}.evaluated`),t.if((0,ln._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,ln._)`${e.evaluated}.props`,(0,ln._)`undefined`)),t.if((0,ln._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,ln._)`${e.evaluated}.items`,(0,ln._)`undefined`))}function o2e(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,ln._)`/*# sourceURL=${n} */`:ln.nil}function Q0n(e,t){if(gHe(e)&&(yHe(e),mHe(e))){J0n(e,t);return}(0,hHe.boolOrEmptySchema)(e,t)}function mHe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function gHe(e){return typeof e.schema!="boolean"}function J0n(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&bHe(e),tgn(e),ngn(e);const s=r.const("_errs",Hn.default.errors);vHe(e,s),r.var(t,(0,ln._)`${s} === ${Hn.default.errors}`)}function yHe(e){(0,zg.checkUnknownRules)(e),Z0n(e)}function vHe(e,t){if(e.opts.jtd)return a2e(e,[],!1,t);const n=(0,s2e.getSchemaTypes)(e.schema),r=(0,s2e.coerceAndCheckDataType)(e,n);a2e(e,n,!r,t)}function Z0n(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,zg.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function egn(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,zg.checkStrictMode)(e,"default is ignored in the schema root")}function tgn(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,q0n.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function ngn(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function bHe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,ln._)`${Hn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,ln.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,ln._)`${Hn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function rgn(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,ln._)`${Hn.default.errors} === 0`,()=>t.return(Hn.default.data),()=>t.throw((0,ln._)`new ${i}(${Hn.default.vErrors})`)):(t.assign((0,ln._)`${r}.errors`,Hn.default.vErrors),s.unevaluated&&ign(e),t.return((0,ln._)`${Hn.default.errors} === 0`))}function ign({gen:e,evaluated:t,props:n,items:r}){n instanceof ln.Name&&e.assign((0,ln._)`${t}.props`,n),r instanceof ln.Name&&e.assign((0,ln._)`${t}.items`,r)}function a2e(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,zg.schemaHasRulesButRef)(s,c))){i.block(()=>_He(e,"$ref",c.all.$ref.definition));return}u.jtd||sgn(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,xle.shouldUseGroup)(s,d)&&(d.type?(i.if((0,O$.checkDataType)(d.type,o,u.strictNumbers)),u2e(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,O$.reportTypeError)(e)),i.endIf()):u2e(e,d),a||i.if((0,ln._)`${Hn.default.errors} === ${r||0}`))}}function u2e(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,H0n.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,xle.shouldUseRule)(r,s)&&_He(e,s.keyword,s.definition,t.type)})}function sgn(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(ogn(e,t),e.opts.allowUnionTypes||agn(e,t),ugn(e,e.dataTypes))}function ogn(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{xHe(e.dataTypes,n)||wle(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),cgn(e,t)}}function agn(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&wle(e,"use allowUnionTypes to allow union type keyword")}function ugn(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,xle.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>lgn(t,o))&&wle(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function lgn(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function xHe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function cgn(e,t){const n=[];for(const r of e.dataTypes)xHe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function wle(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,zg.checkStrictMode)(e,t,e.opts.strictTypes)}class wHe{constructor(t,n,r){if((0,Hk.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,zg.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",EHe(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Hk.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",Hn.default.errors))}result(t,n,r){this.failResult((0,ln.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,ln.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,ln._)`${n} !== undefined && (${(0,ln.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?eI.reportExtraError:eI.reportError)(this,this.def.error,n)}$dataError(){(0,eI.reportError)(this,this.def.$dataError||eI.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,eI.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=ln.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=ln.nil,n=ln.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,ln.or)((0,ln._)`${i} === undefined`,n)),t!==ln.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==ln.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,ln.or)(o(),a());function o(){if(r.length){if(!(n instanceof ln.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,ln._)`${(0,O$.checkDataTypes)(u,n,s.opts.strictNumbers,O$.DataType.Wrong)}`}return ln.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,ln._)`!${u}(${n})`}return ln.nil}}subschema(t,n){const r=(0,Uq.getSubschema)(this.it,t);(0,Uq.extendSubschemaData)(r,this.it,t),(0,Uq.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return Q0n(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=zg.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=zg.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,ln.Name)),!0}}ap.KeywordCxt=wHe;function _He(e,t,n,r){const i=new wHe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,Hk.funcKeywordCode)(i,n):"macro"in n?(0,Hk.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,Hk.funcKeywordCode)(i,n)}const fgn=/^\/(?:[^~]|~0|~1)*$/,dgn=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function EHe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return Hn.default.rootData;if(e[0]==="/"){if(!fgn.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=Hn.default.rootData}else{const l=dgn.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,ln._)`${s}${(0,ln.getProperty)((0,zg.unescapeJsonPointer)(l))}`,o=(0,ln._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}ap.getData=EHe;var kP={};Object.defineProperty(kP,"__esModule",{value:!0});class hgn extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}kP.default=hgn;var OA={};Object.defineProperty(OA,"__esModule",{value:!0});const zq=nu;class pgn extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,zq.resolveUrl)(t,n,r),this.missingSchema=(0,zq.normalizeId)((0,zq.getFullPath)(t,this.missingRef))}}OA.default=pgn;var xc={};Object.defineProperty(xc,"__esModule",{value:!0});xc.resolveSchema=xc.getCompilingSchema=xc.resolveRef=xc.compileSchema=xc.SchemaEnv=void 0;const xh=Tr,mgn=kP,Ax=A0,Vh=nu,l2e=qt,ggn=ap;class aj{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,Vh.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}xc.SchemaEnv=aj;function _le(e){const t=SHe.call(this,e);if(t)return t;const n=(0,Vh.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new xh.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:mgn.default,code:(0,xh._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:Ax.default.data,parentData:Ax.default.parentData,parentDataProperty:Ax.default.parentDataProperty,dataNames:[Ax.default.data],dataPathArr:[xh.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,xh.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:xh.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,xh._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,ggn.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(Ax.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${Ax.default.self}`,`${Ax.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof xh.Name?void 0:p,items:m instanceof xh.Name?void 0:m,dynamicProps:p instanceof xh.Name,dynamicItems:m instanceof xh.Name},h.source&&(h.source.evaluated=(0,xh.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}xc.compileSchema=_le;function ygn(e,t,n){var r;n=(0,Vh.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=xgn.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new aj({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=vgn.call(this,s)}xc.resolveRef=ygn;function vgn(e){return(0,Vh.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:_le.call(this,e)}function SHe(e){for(const t of this._compilations)if(bgn(t,e))return t}xc.getCompilingSchema=SHe;function bgn(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function xgn(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||uj.call(this,e,t)}function uj(e,t){const n=this.opts.uriResolver.parse(t),r=(0,Vh._getFullPath)(this.opts.uriResolver,n);let i=(0,Vh.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return Vq.call(this,n,e);const s=(0,Vh.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=uj.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:Vq.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||_le.call(this,o),s===(0,Vh.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,Vh.resolveUrl)(this.opts.uriResolver,i,l)),new aj({schema:a,schemaId:u,root:e,baseId:i})}return Vq.call(this,n,o)}}xc.resolveSchema=uj;const wgn=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Vq(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,l2e.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!wgn.has(a)&&l&&(t=(0,Vh.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,l2e.schemaHasRulesButRef)(n,this.RULES)){const a=(0,Vh.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=uj.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new aj({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const _gn="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Egn="Meta-schema for $data reference (JSON AnySchema extension proposal)",Sgn="object",Cgn=["$data"],Tgn={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Agn=!1,Dgn={$id:_gn,description:Egn,type:Sgn,required:Cgn,properties:Tgn,additionalProperties:Agn};var Ele={},IQ={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(on,function(n){function r(){for(var ve=arguments.length,ce=Array(ve),_e=0;_e<ve;_e++)ce[_e]=arguments[_e];if(ce.length>1){ce[0]=ce[0].slice(0,-1);for(var Ue=ce.length-1,je=1;je<Ue;++je)ce[je]=ce[je].slice(1,-1);return ce[Ue]=ce[Ue].slice(1),ce.join("")}else return ce[0]}function i(ve){return"(?:"+ve+")"}function s(ve){return ve===void 0?"undefined":ve===null?"null":Object.prototype.toString.call(ve).split(" ").pop().split("]").shift().toLowerCase()}function o(ve){return ve.toUpperCase()}function a(ve){return ve!=null?ve instanceof Array?ve:typeof ve.length!="number"||ve.split||ve.setInterval||ve.call?[ve]:Array.prototype.slice.call(ve):[]}function u(ve,ce){var _e=ve;if(ce)for(var Ue in ce)_e[Ue]=ce[Ue];return _e}function l(ve){var ce="[A-Za-z]",_e="[0-9]",Ue=r(_e,"[A-Fa-f]"),je=i(i("%[EFef]"+Ue+"%"+Ue+Ue+"%"+Ue+Ue)+"|"+i("%[89A-Fa-f]"+Ue+"%"+Ue+Ue)+"|"+i("%"+Ue+Ue)),Dt="[\\:\\/\\?\\#\\[\\]\\@]",Ht="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",bn=r(Dt,Ht),rr=ve?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",mr=ve?"[\\uE000-\\uF8FF]":"[]",jn=r(ce,_e,"[\\-\\.\\_\\~]",rr);i(ce+r(ce,_e,"[\\+\\-\\.]")+"*"),i(i(je+"|"+r(jn,Ht,"[\\:]"))+"*");var Ar=i(i("25[0-5]")+"|"+i("2[0-4]"+_e)+"|"+i("1"+_e+_e)+"|"+i("0?[1-9]"+_e)+"|0?0?"+_e),ii=i(Ar+"\\."+Ar+"\\."+Ar+"\\."+Ar),dn=i(Ue+"{1,4}"),Dr=i(i(dn+"\\:"+dn)+"|"+ii),Qr=i(i(dn+"\\:")+"{6}"+Dr),ir=i("\\:\\:"+i(dn+"\\:")+"{5}"+Dr),un=i(i(dn)+"?\\:\\:"+i(dn+"\\:")+"{4}"+Dr),Br=i(i(i(dn+"\\:")+"{0,1}"+dn)+"?\\:\\:"+i(dn+"\\:")+"{3}"+Dr),Pi=i(i(i(dn+"\\:")+"{0,2}"+dn)+"?\\:\\:"+i(dn+"\\:")+"{2}"+Dr),Ds=i(i(i(dn+"\\:")+"{0,3}"+dn)+"?\\:\\:"+dn+"\\:"+Dr),_i=i(i(i(dn+"\\:")+"{0,4}"+dn)+"?\\:\\:"+Dr),ns=i(i(i(dn+"\\:")+"{0,5}"+dn)+"?\\:\\:"+dn),Yo=i(i(i(dn+"\\:")+"{0,6}"+dn)+"?\\:\\:"),qa=i([Qr,ir,un,Br,Pi,Ds,_i,ns,Yo].join("|")),Mo=i(i(jn+"|"+je)+"+");i("[vV]"+Ue+"+\\."+r(jn,Ht,"[\\:]")+"+"),i(i(je+"|"+r(jn,Ht))+"*");var Jl=i(je+"|"+r(jn,Ht,"[\\:\\@]"));return i(i(je+"|"+r(jn,Ht,"[\\@]"))+"+"),i(i(Jl+"|"+r("[\\/\\?]",mr))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ce,_e,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",jn,Ht),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",jn,Ht),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",jn,Ht),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",jn,Ht),"g"),NOT_QUERY:new RegExp(r("[^\\%]",jn,Ht,"[\\:\\@\\/\\?]",mr),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",jn,Ht,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",jn,Ht),"g"),UNRESERVED:new RegExp(jn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",jn,bn),"g"),PCT_ENCODED:new RegExp(je,"g"),IPV4ADDRESS:new RegExp("^("+ii+")$"),IPV6ADDRESS:new RegExp("^\\[?("+qa+")"+i(i("\\%25|\\%(?!"+Ue+"{2})")+"("+Mo+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function ve(ce,_e){var Ue=[],je=!0,Dt=!1,Ht=void 0;try{for(var bn=ce[Symbol.iterator](),rr;!(je=(rr=bn.next()).done)&&(Ue.push(rr.value),!(_e&&Ue.length===_e));je=!0);}catch(mr){Dt=!0,Ht=mr}finally{try{!je&&bn.return&&bn.return()}finally{if(Dt)throw Ht}}return Ue}return function(ce,_e){if(Array.isArray(ce))return ce;if(Symbol.iterator in Object(ce))return ve(ce,_e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(ve){if(Array.isArray(ve)){for(var ce=0,_e=Array(ve.length);ce<ve.length;ce++)_e[ce]=ve[ce];return _e}else return Array.from(ve)},p=2147483647,m=36,g=1,y=26,v=38,b=700,_=72,w=128,S="-",T=/^xn--/,A=/[^\0-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=m-g,F=Math.floor,O=String.fromCharCode;function L(ve){throw new RangeError(I[ve])}function H(ve,ce){for(var _e=[],Ue=ve.length;Ue--;)_e[Ue]=ce(ve[Ue]);return _e}function U(ve,ce){var _e=ve.split("@"),Ue="";_e.length>1&&(Ue=_e[0]+"@",ve=_e[1]),ve=ve.replace(k,".");var je=ve.split("."),Dt=H(je,ce).join(".");return Ue+Dt}function G(ve){for(var ce=[],_e=0,Ue=ve.length;_e<Ue;){var je=ve.charCodeAt(_e++);if(je>=55296&&je<=56319&&_e<Ue){var Dt=ve.charCodeAt(_e++);(Dt&64512)==56320?ce.push(((je&1023)<<10)+(Dt&1023)+65536):(ce.push(je),_e--)}else ce.push(je)}return ce}var Y=function(ce){return String.fromCodePoint.apply(String,h(ce))},J=function(ce){return ce-48<10?ce-22:ce-65<26?ce-65:ce-97<26?ce-97:m},$=function(ce,_e){return ce+22+75*(ce<26)-((_e!=0)<<5)},j=function(ce,_e,Ue){var je=0;for(ce=Ue?F(ce/b):ce>>1,ce+=F(ce/_e);ce>R*y>>1;je+=m)ce=F(ce/R);return F(je+(R+1)*ce/(ce+v))},W=function(ce){var _e=[],Ue=ce.length,je=0,Dt=w,Ht=_,bn=ce.lastIndexOf(S);bn<0&&(bn=0);for(var rr=0;rr<bn;++rr)ce.charCodeAt(rr)>=128&&L("not-basic"),_e.push(ce.charCodeAt(rr));for(var mr=bn>0?bn+1:0;mr<Ue;){for(var jn=je,Ar=1,ii=m;;ii+=m){mr>=Ue&&L("invalid-input");var dn=J(ce.charCodeAt(mr++));(dn>=m||dn>F((p-je)/Ar))&&L("overflow"),je+=dn*Ar;var Dr=ii<=Ht?g:ii>=Ht+y?y:ii-Ht;if(dn<Dr)break;var Qr=m-Dr;Ar>F(p/Qr)&&L("overflow"),Ar*=Qr}var ir=_e.length+1;Ht=j(je-jn,ir,jn==0),F(je/ir)>p-Dt&&L("overflow"),Dt+=F(je/ir),je%=ir,_e.splice(je++,0,Dt)}return String.fromCodePoint.apply(String,_e)},B=function(ce){var _e=[];ce=G(ce);var Ue=ce.length,je=w,Dt=0,Ht=_,bn=!0,rr=!1,mr=void 0;try{for(var jn=ce[Symbol.iterator](),Ar;!(bn=(Ar=jn.next()).done);bn=!0){var ii=Ar.value;ii<128&&_e.push(O(ii))}}catch(Xe){rr=!0,mr=Xe}finally{try{!bn&&jn.return&&jn.return()}finally{if(rr)throw mr}}var dn=_e.length,Dr=dn;for(dn&&_e.push(S);Dr<Ue;){var Qr=p,ir=!0,un=!1,Br=void 0;try{for(var Pi=ce[Symbol.iterator](),Ds;!(ir=(Ds=Pi.next()).done);ir=!0){var _i=Ds.value;_i>=je&&_i<Qr&&(Qr=_i)}}catch(Xe){un=!0,Br=Xe}finally{try{!ir&&Pi.return&&Pi.return()}finally{if(un)throw Br}}var ns=Dr+1;Qr-je>F((p-Dt)/ns)&&L("overflow"),Dt+=(Qr-je)*ns,je=Qr;var Yo=!0,qa=!1,Mo=void 0;try{for(var Jl=ce[Symbol.iterator](),Jf;!(Yo=(Jf=Jl.next()).done);Yo=!0){var te=Jf.value;if(te<je&&++Dt>p&&L("overflow"),te==je){for(var be=Dt,ue=m;;ue+=m){var De=ue<=Ht?g:ue>=Ht+y?y:ue-Ht;if(be<De)break;var Pe=be-De,Ae=m-De;_e.push(O($(De+Pe%Ae,0))),be=F(Pe/Ae)}_e.push(O($(be,0))),Ht=j(Dt,ns,Dr==dn),Dt=0,++Dr}}}catch(Xe){qa=!0,Mo=Xe}finally{try{!Yo&&Jl.return&&Jl.return()}finally{if(qa)throw Mo}}++Dt,++je}return _e.join("")},q=function(ce){return U(ce,function(_e){return T.test(_e)?W(_e.slice(4).toLowerCase()):_e})},Z=function(ce){return U(ce,function(_e){return A.test(_e)?"xn--"+B(_e):_e})},re={version:"2.1.0",ucs2:{decode:G,encode:Y},decode:W,encode:B,toASCII:Z,toUnicode:q},xe={};function pe(ve){var ce=ve.charCodeAt(0),_e=void 0;return ce<16?_e="%0"+ce.toString(16).toUpperCase():ce<128?_e="%"+ce.toString(16).toUpperCase():ce<2048?_e="%"+(ce>>6|192).toString(16).toUpperCase()+"%"+(ce&63|128).toString(16).toUpperCase():_e="%"+(ce>>12|224).toString(16).toUpperCase()+"%"+(ce>>6&63|128).toString(16).toUpperCase()+"%"+(ce&63|128).toString(16).toUpperCase(),_e}function Te(ve){for(var ce="",_e=0,Ue=ve.length;_e<Ue;){var je=parseInt(ve.substr(_e+1,2),16);if(je<128)ce+=String.fromCharCode(je),_e+=3;else if(je>=194&&je<224){if(Ue-_e>=6){var Dt=parseInt(ve.substr(_e+4,2),16);ce+=String.fromCharCode((je&31)<<6|Dt&63)}else ce+=ve.substr(_e,6);_e+=6}else if(je>=224){if(Ue-_e>=9){var Ht=parseInt(ve.substr(_e+4,2),16),bn=parseInt(ve.substr(_e+7,2),16);ce+=String.fromCharCode((je&15)<<12|(Ht&63)<<6|bn&63)}else ce+=ve.substr(_e,9);_e+=9}else ce+=ve.substr(_e,3),_e+=3}return ce}function ke(ve,ce){function _e(Ue){var je=Te(Ue);return je.match(ce.UNRESERVED)?je:Ue}return ve.scheme&&(ve.scheme=String(ve.scheme).replace(ce.PCT_ENCODED,_e).toLowerCase().replace(ce.NOT_SCHEME,"")),ve.userinfo!==void 0&&(ve.userinfo=String(ve.userinfo).replace(ce.PCT_ENCODED,_e).replace(ce.NOT_USERINFO,pe).replace(ce.PCT_ENCODED,o)),ve.host!==void 0&&(ve.host=String(ve.host).replace(ce.PCT_ENCODED,_e).toLowerCase().replace(ce.NOT_HOST,pe).replace(ce.PCT_ENCODED,o)),ve.path!==void 0&&(ve.path=String(ve.path).replace(ce.PCT_ENCODED,_e).replace(ve.scheme?ce.NOT_PATH:ce.NOT_PATH_NOSCHEME,pe).replace(ce.PCT_ENCODED,o)),ve.query!==void 0&&(ve.query=String(ve.query).replace(ce.PCT_ENCODED,_e).replace(ce.NOT_QUERY,pe).replace(ce.PCT_ENCODED,o)),ve.fragment!==void 0&&(ve.fragment=String(ve.fragment).replace(ce.PCT_ENCODED,_e).replace(ce.NOT_FRAGMENT,pe).replace(ce.PCT_ENCODED,o)),ve}function it(ve){return ve.replace(/^0*(.*)/,"$1")||"0"}function Re(ve,ce){var _e=ve.match(ce.IPV4ADDRESS)||[],Ue=d(_e,2),je=Ue[1];return je?je.split(".").map(it).join("."):ve}function ut(ve,ce){var _e=ve.match(ce.IPV6ADDRESS)||[],Ue=d(_e,3),je=Ue[1],Dt=Ue[2];if(je){for(var Ht=je.toLowerCase().split("::").reverse(),bn=d(Ht,2),rr=bn[0],mr=bn[1],jn=mr?mr.split(":").map(it):[],Ar=rr.split(":").map(it),ii=ce.IPV4ADDRESS.test(Ar[Ar.length-1]),dn=ii?7:8,Dr=Ar.length-dn,Qr=Array(dn),ir=0;ir<dn;++ir)Qr[ir]=jn[ir]||Ar[Dr+ir]||"";ii&&(Qr[dn-1]=Re(Qr[dn-1],ce));var un=Qr.reduce(function(ns,Yo,qa){if(!Yo||Yo==="0"){var Mo=ns[ns.length-1];Mo&&Mo.index+Mo.length===qa?Mo.length++:ns.push({index:qa,length:1})}return ns},[]),Br=un.sort(function(ns,Yo){return Yo.length-ns.length})[0],Pi=void 0;if(Br&&Br.length>1){var Ds=Qr.slice(0,Br.index),_i=Qr.slice(Br.index+Br.length);Pi=Ds.join(":")+"::"+_i.join(":")}else Pi=Qr.join(":");return Dt&&(Pi+="%"+Dt),Pi}else return ve}var Ke=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ct="".match(/(){0}/)[1]===void 0;function gt(ve){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_e={},Ue=ce.iri!==!1?f:c;ce.reference==="suffix"&&(ve=(ce.scheme?ce.scheme+":":"")+"//"+ve);var je=ve.match(Ke);if(je){Ct?(_e.scheme=je[1],_e.userinfo=je[3],_e.host=je[4],_e.port=parseInt(je[5],10),_e.path=je[6]||"",_e.query=je[7],_e.fragment=je[8],isNaN(_e.port)&&(_e.port=je[5])):(_e.scheme=je[1]||void 0,_e.userinfo=ve.indexOf("@")!==-1?je[3]:void 0,_e.host=ve.indexOf("//")!==-1?je[4]:void 0,_e.port=parseInt(je[5],10),_e.path=je[6]||"",_e.query=ve.indexOf("?")!==-1?je[7]:void 0,_e.fragment=ve.indexOf("#")!==-1?je[8]:void 0,isNaN(_e.port)&&(_e.port=ve.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?je[4]:void 0)),_e.host&&(_e.host=ut(Re(_e.host,Ue),Ue)),_e.scheme===void 0&&_e.userinfo===void 0&&_e.host===void 0&&_e.port===void 0&&!_e.path&&_e.query===void 0?_e.reference="same-document":_e.scheme===void 0?_e.reference="relative":_e.fragment===void 0?_e.reference="absolute":_e.reference="uri",ce.reference&&ce.reference!=="suffix"&&ce.reference!==_e.reference&&(_e.error=_e.error||"URI is not a "+ce.reference+" reference.");var Dt=xe[(ce.scheme||_e.scheme||"").toLowerCase()];if(!ce.unicodeSupport&&(!Dt||!Dt.unicodeSupport)){if(_e.host&&(ce.domainHost||Dt&&Dt.domainHost))try{_e.host=re.toASCII(_e.host.replace(Ue.PCT_ENCODED,Te).toLowerCase())}catch(Ht){_e.error=_e.error||"Host's domain name can not be converted to ASCII via punycode: "+Ht}ke(_e,c)}else ke(_e,Ue);Dt&&Dt.parse&&Dt.parse(_e,ce)}else _e.error=_e.error||"URI can not be parsed.";return _e}function Ie(ve,ce){var _e=ce.iri!==!1?f:c,Ue=[];return ve.userinfo!==void 0&&(Ue.push(ve.userinfo),Ue.push("@")),ve.host!==void 0&&Ue.push(ut(Re(String(ve.host),_e),_e).replace(_e.IPV6ADDRESS,function(je,Dt,Ht){return"["+Dt+(Ht?"%25"+Ht:"")+"]"})),(typeof ve.port=="number"||typeof ve.port=="string")&&(Ue.push(":"),Ue.push(String(ve.port))),Ue.length?Ue.join(""):void 0}var Ve=/^\.\.?\//,ft=/^\/\.(\/|$)/,_t=/^\/\.\.(\/|$)/,Mt=/^\/?(?:.|\n)*?(?=\/|$)/;function st(ve){for(var ce=[];ve.length;)if(ve.match(Ve))ve=ve.replace(Ve,"");else if(ve.match(ft))ve=ve.replace(ft,"/");else if(ve.match(_t))ve=ve.replace(_t,"/"),ce.pop();else if(ve==="."||ve==="..")ve="";else{var _e=ve.match(Mt);if(_e){var Ue=_e[0];ve=ve.slice(Ue.length),ce.push(Ue)}else throw new Error("Unexpected dot segment condition")}return ce.join("")}function X(ve){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_e=ce.iri?f:c,Ue=[],je=xe[(ce.scheme||ve.scheme||"").toLowerCase()];if(je&&je.serialize&&je.serialize(ve,ce),ve.host&&!_e.IPV6ADDRESS.test(ve.host)){if(ce.domainHost||je&&je.domainHost)try{ve.host=ce.iri?re.toUnicode(ve.host):re.toASCII(ve.host.replace(_e.PCT_ENCODED,Te).toLowerCase())}catch(bn){ve.error=ve.error||"Host's domain name can not be converted to "+(ce.iri?"Unicode":"ASCII")+" via punycode: "+bn}}ke(ve,_e),ce.reference!=="suffix"&&ve.scheme&&(Ue.push(ve.scheme),Ue.push(":"));var Dt=Ie(ve,ce);if(Dt!==void 0&&(ce.reference!=="suffix"&&Ue.push("//"),Ue.push(Dt),ve.path&&ve.path.charAt(0)!=="/"&&Ue.push("/")),ve.path!==void 0){var Ht=ve.path;!ce.absolutePath&&(!je||!je.absolutePath)&&(Ht=st(Ht)),Dt===void 0&&(Ht=Ht.replace(/^\/\//,"/%2F")),Ue.push(Ht)}return ve.query!==void 0&&(Ue.push("?"),Ue.push(ve.query)),ve.fragment!==void 0&&(Ue.push("#"),Ue.push(ve.fragment)),Ue.join("")}function de(ve,ce){var _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ue=arguments[3],je={};return Ue||(ve=gt(X(ve,_e),_e),ce=gt(X(ce,_e),_e)),_e=_e||{},!_e.tolerant&&ce.scheme?(je.scheme=ce.scheme,je.userinfo=ce.userinfo,je.host=ce.host,je.port=ce.port,je.path=st(ce.path||""),je.query=ce.query):(ce.userinfo!==void 0||ce.host!==void 0||ce.port!==void 0?(je.userinfo=ce.userinfo,je.host=ce.host,je.port=ce.port,je.path=st(ce.path||""),je.query=ce.query):(ce.path?(ce.path.charAt(0)==="/"?je.path=st(ce.path):((ve.userinfo!==void 0||ve.host!==void 0||ve.port!==void 0)&&!ve.path?je.path="/"+ce.path:ve.path?je.path=ve.path.slice(0,ve.path.lastIndexOf("/")+1)+ce.path:je.path=ce.path,je.path=st(je.path)),je.query=ce.query):(je.path=ve.path,ce.query!==void 0?je.query=ce.query:je.query=ve.query),je.userinfo=ve.userinfo,je.host=ve.host,je.port=ve.port),je.scheme=ve.scheme),je.fragment=ce.fragment,je}function we(ve,ce,_e){var Ue=u({scheme:"null"},_e);return X(de(gt(ve,Ue),gt(ce,Ue),Ue,!0),Ue)}function ae(ve,ce){return typeof ve=="string"?ve=X(gt(ve,ce),ce):s(ve)==="object"&&(ve=gt(X(ve,ce),ce)),ve}function he(ve,ce,_e){return typeof ve=="string"?ve=X(gt(ve,_e),_e):s(ve)==="object"&&(ve=X(ve,_e)),typeof ce=="string"?ce=X(gt(ce,_e),_e):s(ce)==="object"&&(ce=X(ce,_e)),ve===ce}function Ee(ve,ce){return ve&&ve.toString().replace(!ce||!ce.iri?c.ESCAPE:f.ESCAPE,pe)}function $e(ve,ce){return ve&&ve.toString().replace(!ce||!ce.iri?c.PCT_ENCODED:f.PCT_ENCODED,Te)}var Be={scheme:"http",domainHost:!0,parse:function(ce,_e){return ce.host||(ce.error=ce.error||"HTTP URIs must have a host."),ce},serialize:function(ce,_e){var Ue=String(ce.scheme).toLowerCase()==="https";return(ce.port===(Ue?443:80)||ce.port==="")&&(ce.port=void 0),ce.path||(ce.path="/"),ce}},lt={scheme:"https",domainHost:Be.domainHost,parse:Be.parse,serialize:Be.serialize};function Je(ve){return typeof ve.secure=="boolean"?ve.secure:String(ve.scheme).toLowerCase()==="wss"}var Xt={scheme:"ws",domainHost:!0,parse:function(ce,_e){var Ue=ce;return Ue.secure=Je(Ue),Ue.resourceName=(Ue.path||"/")+(Ue.query?"?"+Ue.query:""),Ue.path=void 0,Ue.query=void 0,Ue},serialize:function(ce,_e){if((ce.port===(Je(ce)?443:80)||ce.port==="")&&(ce.port=void 0),typeof ce.secure=="boolean"&&(ce.scheme=ce.secure?"wss":"ws",ce.secure=void 0),ce.resourceName){var Ue=ce.resourceName.split("?"),je=d(Ue,2),Dt=je[0],Ht=je[1];ce.path=Dt&&Dt!=="/"?Dt:void 0,ce.query=Ht,ce.resourceName=void 0}return ce.fragment=void 0,ce}},fn={scheme:"wss",domainHost:Xt.domainHost,parse:Xt.parse,serialize:Xt.serialize},Wt={},an="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Sn="[0-9A-Fa-f]",Mn=i(i("%[EFef]"+Sn+"%"+Sn+Sn+"%"+Sn+Sn)+"|"+i("%[89A-Fa-f]"+Sn+"%"+Sn+Sn)+"|"+i("%"+Sn+Sn)),ki="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",di="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Li=r(di,'[\\"\\\\]'),As="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Lr=new RegExp(an,"g"),ls=new RegExp(Mn,"g"),ll=new RegExp(r("[^]",ki,"[\\.]",'[\\"]',Li),"g"),Fo=new RegExp(r("[^]",an,As),"g"),Ha=Fo;function Rr(ve){var ce=Te(ve);return ce.match(Lr)?ce:ve}var Ri={scheme:"mailto",parse:function(ce,_e){var Ue=ce,je=Ue.to=Ue.path?Ue.path.split(","):[];if(Ue.path=void 0,Ue.query){for(var Dt=!1,Ht={},bn=Ue.query.split("&"),rr=0,mr=bn.length;rr<mr;++rr){var jn=bn[rr].split("=");switch(jn[0]){case"to":for(var Ar=jn[1].split(","),ii=0,dn=Ar.length;ii<dn;++ii)je.push(Ar[ii]);break;case"subject":Ue.subject=$e(jn[1],_e);break;case"body":Ue.body=$e(jn[1],_e);break;default:Dt=!0,Ht[$e(jn[0],_e)]=$e(jn[1],_e);break}}Dt&&(Ue.headers=Ht)}Ue.query=void 0;for(var Dr=0,Qr=je.length;Dr<Qr;++Dr){var ir=je[Dr].split("@");if(ir[0]=$e(ir[0]),_e.unicodeSupport)ir[1]=$e(ir[1],_e).toLowerCase();else try{ir[1]=re.toASCII($e(ir[1],_e).toLowerCase())}catch(un){Ue.error=Ue.error||"Email address's domain name can not be converted to ASCII via punycode: "+un}je[Dr]=ir.join("@")}return Ue},serialize:function(ce,_e){var Ue=ce,je=a(ce.to);if(je){for(var Dt=0,Ht=je.length;Dt<Ht;++Dt){var bn=String(je[Dt]),rr=bn.lastIndexOf("@"),mr=bn.slice(0,rr).replace(ls,Rr).replace(ls,o).replace(ll,pe),jn=bn.slice(rr+1);try{jn=_e.iri?re.toUnicode(jn):re.toASCII($e(jn,_e).toLowerCase())}catch(Dr){Ue.error=Ue.error||"Email address's domain name can not be converted to "+(_e.iri?"Unicode":"ASCII")+" via punycode: "+Dr}je[Dt]=mr+"@"+jn}Ue.path=je.join(",")}var Ar=ce.headers=ce.headers||{};ce.subject&&(Ar.subject=ce.subject),ce.body&&(Ar.body=ce.body);var ii=[];for(var dn in Ar)Ar[dn]!==Wt[dn]&&ii.push(dn.replace(ls,Rr).replace(ls,o).replace(Fo,pe)+"="+Ar[dn].replace(ls,Rr).replace(ls,o).replace(Ha,pe));return ii.length&&(Ue.query=ii.join("&")),Ue}},hi=/^([^\:]+)\:(.*)/,Vs={scheme:"urn",parse:function(ce,_e){var Ue=ce.path&&ce.path.match(hi),je=ce;if(Ue){var Dt=_e.scheme||je.scheme||"urn",Ht=Ue[1].toLowerCase(),bn=Ue[2],rr=Dt+":"+(_e.nid||Ht),mr=xe[rr];je.nid=Ht,je.nss=bn,je.path=void 0,mr&&(je=mr.parse(je,_e))}else je.error=je.error||"URN can not be parsed.";return je},serialize:function(ce,_e){var Ue=_e.scheme||ce.scheme||"urn",je=ce.nid,Dt=Ue+":"+(_e.nid||je),Ht=xe[Dt];Ht&&(ce=Ht.serialize(ce,_e));var bn=ce,rr=ce.nss;return bn.path=(je||_e.nid)+":"+rr,bn}},ri=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ni={scheme:"urn:uuid",parse:function(ce,_e){var Ue=ce;return Ue.uuid=Ue.nss,Ue.nss=void 0,!_e.tolerant&&(!Ue.uuid||!Ue.uuid.match(ri))&&(Ue.error=Ue.error||"UUID is not valid."),Ue},serialize:function(ce,_e){var Ue=ce;return Ue.nss=(ce.uuid||"").toLowerCase(),Ue}};xe[Be.scheme]=Be,xe[lt.scheme]=lt,xe[Xt.scheme]=Xt,xe[fn.scheme]=fn,xe[Ri.scheme]=Ri,xe[Vs.scheme]=Vs,xe[Ni.scheme]=Ni,n.SCHEMES=xe,n.pctEncChar=pe,n.pctDecChars=Te,n.parse=gt,n.removeDotSegments=st,n.serialize=X,n.resolveComponents=de,n.resolve=we,n.normalize=ae,n.equal=he,n.escapeComponent=Ee,n.unescapeComponent=$e,Object.defineProperty(n,"__esModule",{value:!0})})})(IQ,IQ.exports);var Ign=IQ.exports;Object.defineProperty(Ele,"__esModule",{value:!0});const CHe=Ign;CHe.code='require("ajv/dist/runtime/uri").default';Ele.default=CHe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=ap;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Tr;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=kP,i=OA,s=S_,o=xc,a=Tr,u=nu,l=ra,c=qt,f=Dgn,d=Ele,h=($,j)=>new RegExp($,j);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b($){var j,W,B,q,Z,re,xe,pe,Te,ke,it,Re,ut,Ke,Ct,gt,Ie,Ve,ft,_t,Mt,st,X,de,we;const ae=$.strict,he=(j=$.code)===null||j===void 0?void 0:j.optimize,Ee=he===!0||he===void 0?1:he||0,$e=(B=(W=$.code)===null||W===void 0?void 0:W.regExp)!==null&&B!==void 0?B:h,Be=(q=$.uriResolver)!==null&&q!==void 0?q:d.default;return{strictSchema:(re=(Z=$.strictSchema)!==null&&Z!==void 0?Z:ae)!==null&&re!==void 0?re:!0,strictNumbers:(pe=(xe=$.strictNumbers)!==null&&xe!==void 0?xe:ae)!==null&&pe!==void 0?pe:!0,strictTypes:(ke=(Te=$.strictTypes)!==null&&Te!==void 0?Te:ae)!==null&&ke!==void 0?ke:"log",strictTuples:(Re=(it=$.strictTuples)!==null&&it!==void 0?it:ae)!==null&&Re!==void 0?Re:"log",strictRequired:(Ke=(ut=$.strictRequired)!==null&&ut!==void 0?ut:ae)!==null&&Ke!==void 0?Ke:!1,code:$.code?{...$.code,optimize:Ee,regExp:$e}:{optimize:Ee,regExp:$e},loopRequired:(Ct=$.loopRequired)!==null&&Ct!==void 0?Ct:v,loopEnum:(gt=$.loopEnum)!==null&&gt!==void 0?gt:v,meta:(Ie=$.meta)!==null&&Ie!==void 0?Ie:!0,messages:(Ve=$.messages)!==null&&Ve!==void 0?Ve:!0,inlineRefs:(ft=$.inlineRefs)!==null&&ft!==void 0?ft:!0,schemaId:(_t=$.schemaId)!==null&&_t!==void 0?_t:"$id",addUsedSchema:(Mt=$.addUsedSchema)!==null&&Mt!==void 0?Mt:!0,validateSchema:(st=$.validateSchema)!==null&&st!==void 0?st:!0,validateFormats:(X=$.validateFormats)!==null&&X!==void 0?X:!0,unicodeRegExp:(de=$.unicodeRegExp)!==null&&de!==void 0?de:!0,int32range:(we=$.int32range)!==null&&we!==void 0?we:!0,uriResolver:Be}}class _{constructor(j={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,j=this.opts={...j,...b(j)};const{es5:W,lines:B}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:B}),this.logger=F(j.logger);const q=j.validateFormats;j.validateFormats=!1,this.RULES=(0,s.getRules)(),w.call(this,g,j,"NOT SUPPORTED"),w.call(this,y,j,"DEPRECATED","warn"),this._metaOpts=I.call(this),j.formats&&A.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),j.keywords&&k.call(this,j.keywords),typeof j.meta=="object"&&this.addMetaSchema(j.meta),T.call(this),j.validateFormats=q}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:j,meta:W,schemaId:B}=this.opts;let q=f;B==="id"&&(q={...f},q.id=q.$id,delete q.$id),W&&j&&this.addMetaSchema(q,q[B],!1)}defaultMeta(){const{meta:j,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof j=="object"?j[W]||j:void 0}validate(j,W){let B;if(typeof j=="string"){if(B=this.getSchema(j),!B)throw new Error(`no schema with key or ref "${j}"`)}else B=this.compile(j);const q=B(W);return"$async"in B||(this.errors=B.errors),q}compile(j,W){const B=this._addSchema(j,W);return B.validate||this._compileSchemaEnv(B)}compileAsync(j,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:B}=this.opts;return q.call(this,j,W);async function q(ke,it){await Z.call(this,ke.$schema);const Re=this._addSchema(ke,it);return Re.validate||re.call(this,Re)}async function Z(ke){ke&&!this.getSchema(ke)&&await q.call(this,{$ref:ke},!0)}async function re(ke){try{return this._compileSchemaEnv(ke)}catch(it){if(!(it instanceof i.default))throw it;return xe.call(this,it),await pe.call(this,it.missingSchema),re.call(this,ke)}}function xe({missingSchema:ke,missingRef:it}){if(this.refs[ke])throw new Error(`AnySchema ${ke} is loaded but ${it} cannot be resolved`)}async function pe(ke){const it=await Te.call(this,ke);this.refs[ke]||await Z.call(this,it.$schema),this.refs[ke]||this.addSchema(it,ke,W)}async function Te(ke){const it=this._loading[ke];if(it)return it;try{return await(this._loading[ke]=B(ke))}finally{delete this._loading[ke]}}}addSchema(j,W,B,q=this.opts.validateSchema){if(Array.isArray(j)){for(const re of j)this.addSchema(re,void 0,B,q);return this}let Z;if(typeof j=="object"){const{schemaId:re}=this.opts;if(Z=j[re],Z!==void 0&&typeof Z!="string")throw new Error(`schema ${re} must be string`)}return W=(0,u.normalizeId)(W||Z),this._checkUnique(W),this.schemas[W]=this._addSchema(j,B,W,q,!0),this}addMetaSchema(j,W,B=this.opts.validateSchema){return this.addSchema(j,W,!0,B),this}validateSchema(j,W){if(typeof j=="boolean")return!0;let B;if(B=j.$schema,B!==void 0&&typeof B!="string")throw new Error("$schema must be a string");if(B=B||this.opts.defaultMeta||this.defaultMeta(),!B)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const q=this.validate(B,j);if(!q&&W){const Z="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(Z);else throw new Error(Z)}return q}getSchema(j){let W;for(;typeof(W=S.call(this,j))=="string";)j=W;if(W===void 0){const{schemaId:B}=this.opts,q=new o.SchemaEnv({schema:{},schemaId:B});if(W=o.resolveSchema.call(this,q,j),!W)return;this.refs[j]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(j){if(j instanceof RegExp)return this._removeAllSchemas(this.schemas,j),this._removeAllSchemas(this.refs,j),this;switch(typeof j){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=S.call(this,j);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[j],delete this.refs[j],this}case"object":{const W=j;this._cache.delete(W);let B=j[this.opts.schemaId];return B&&(B=(0,u.normalizeId)(B),delete this.schemas[B],delete this.refs[B]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(j){for(const W of j)this.addKeyword(W);return this}addKeyword(j,W){let B;if(typeof j=="string")B=j,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=B);else if(typeof j=="object"&&W===void 0){if(W=j,B=W.keyword,Array.isArray(B)&&!B.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(L.call(this,B,W),!W)return(0,c.eachItem)(B,Z=>H.call(this,Z)),this;G.call(this,W);const q={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(B,q.type.length===0?Z=>H.call(this,Z,q):Z=>q.type.forEach(re=>H.call(this,Z,q,re))),this}getKeyword(j){const W=this.RULES.all[j];return typeof W=="object"?W.definition:!!W}removeKeyword(j){const{RULES:W}=this;delete W.keywords[j],delete W.all[j];for(const B of W.rules){const q=B.rules.findIndex(Z=>Z.keyword===j);q>=0&&B.rules.splice(q,1)}return this}addFormat(j,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[j]=W,this}errorsText(j=this.errors,{separator:W=", ",dataVar:B="data"}={}){return!j||j.length===0?"No errors":j.map(q=>`${B}${q.instancePath} ${q.message}`).reduce((q,Z)=>q+W+Z)}$dataMetaSchema(j,W){const B=this.RULES.all;j=JSON.parse(JSON.stringify(j));for(const q of W){const Z=q.split("/").slice(1);let re=j;for(const xe of Z)re=re[xe];for(const xe in B){const pe=B[xe];if(typeof pe!="object")continue;const{$data:Te}=pe.definition,ke=re[xe];Te&&ke&&(re[xe]=J(ke))}}return j}_removeAllSchemas(j,W){for(const B in j){const q=j[B];(!W||W.test(B))&&(typeof q=="string"?delete j[B]:q&&!q.meta&&(this._cache.delete(q.schema),delete j[B]))}}_addSchema(j,W,B,q=this.opts.validateSchema,Z=this.opts.addUsedSchema){let re;const{schemaId:xe}=this.opts;if(typeof j=="object")re=j[xe];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof j!="boolean")throw new Error("schema must be object or boolean")}let pe=this._cache.get(j);if(pe!==void 0)return pe;B=(0,u.normalizeId)(re||B);const Te=u.getSchemaRefs.call(this,j,B);return pe=new o.SchemaEnv({schema:j,schemaId:xe,meta:W,baseId:B,localRefs:Te}),this._cache.set(pe.schema,pe),Z&&!B.startsWith("#")&&(B&&this._checkUnique(B),this.refs[B]=pe),q&&this.validateSchema(j,!0),pe}_checkUnique(j){if(this.schemas[j]||this.refs[j])throw new Error(`schema with key or id "${j}" already exists`)}_compileSchemaEnv(j){if(j.meta?this._compileMetaSchema(j):o.compileSchema.call(this,j),!j.validate)throw new Error("ajv implementation error");return j.validate}_compileMetaSchema(j){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,j)}finally{this.opts=W}}}_.ValidationError=r.default,_.MissingRefError=i.default,e.default=_;function w($,j,W,B="error"){for(const q in $){const Z=q;Z in j&&this.logger[B](`${W}: option ${q}. ${$[Z]}`)}}function S($){return $=(0,u.normalizeId)($),this.schemas[$]||this.refs[$]}function T(){const $=this.opts.schemas;if($)if(Array.isArray($))this.addSchema($);else for(const j in $)this.addSchema($[j],j)}function A(){for(const $ in this.opts.formats){const j=this.opts.formats[$];j&&this.addFormat($,j)}}function k($){if(Array.isArray($)){this.addVocabulary($);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const j in $){const W=$[j];W.keyword||(W.keyword=j),this.addKeyword(W)}}function I(){const $={...this.opts};for(const j of p)delete $[j];return $}const R={log(){},warn(){},error(){}};function F($){if($===!1)return R;if($===void 0)return console;if($.log&&$.warn&&$.error)return $;throw new Error("logger must implement log, warn and error methods")}const O=/^[a-z_$][a-z0-9_$:-]*$/i;function L($,j){const{RULES:W}=this;if((0,c.eachItem)($,B=>{if(W.keywords[B])throw new Error(`Keyword ${B} is already defined`);if(!O.test(B))throw new Error(`Keyword ${B} has invalid name`)}),!!j&&j.$data&&!("code"in j||"validate"in j))throw new Error('$data keyword must have "code" or "validate" function')}function H($,j,W){var B;const q=j==null?void 0:j.post;if(W&&q)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:Z}=this;let re=q?Z.post:Z.rules.find(({type:pe})=>pe===W);if(re||(re={type:W,rules:[]},Z.rules.push(re)),Z.keywords[$]=!0,!j)return;const xe={keyword:$,definition:{...j,type:(0,l.getJSONTypes)(j.type),schemaType:(0,l.getJSONTypes)(j.schemaType)}};j.before?U.call(this,re,xe,j.before):re.rules.push(xe),Z.all[$]=xe,(B=j.implements)===null||B===void 0||B.forEach(pe=>this.addKeyword(pe))}function U($,j,W){const B=$.rules.findIndex(q=>q.keyword===W);B>=0?$.rules.splice(B,0,j):($.rules.push(j),this.logger.warn(`rule ${W} is not defined`))}function G($){let{metaSchema:j}=$;j!==void 0&&($.$data&&this.opts.$data&&(j=J(j)),$.validateSchema=this.compile(j,!0))}const Y={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function J($){return{anyOf:[$,Y]}}})(GVe);var Sle={},Cle={},Tle={};Object.defineProperty(Tle,"__esModule",{value:!0});const kgn={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Tle.default=kgn;var C_={};Object.defineProperty(C_,"__esModule",{value:!0});C_.callRef=C_.getValidate=void 0;const Rgn=OA,c2e=Sr,lc=Tr,g2=A0,f2e=xc,m6=qt,Ngn={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=f2e.resolveRef.call(u,l,i,n);if(c===void 0)throw new Rgn.default(r.opts.uriResolver,i,n);if(c instanceof f2e.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return qF(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return qF(e,(0,lc._)`${p}.validate`,l,l.$async)}function d(p){const m=THe(e,p);qF(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,lc.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:lc.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function THe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,lc._)`${n.scopeValue("wrapper",{ref:t})}.validate`}C_.getValidate=THe;function qF(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?g2.default.this:lc.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,lc._)`await ${(0,c2e.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,lc._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,c2e.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,lc._)`${p}.errors`;i.assign(g2.default.vErrors,(0,lc._)`${g2.default.vErrors} === null ? ${m} : ${g2.default.vErrors}.concat(${m})`),i.assign(g2.default.errors,(0,lc._)`${g2.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=m6.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,lc._)`${p}.evaluated.props`);s.props=m6.mergeEvaluated.props(i,y,s.props,lc.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=m6.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,lc._)`${p}.evaluated.items`);s.items=m6.mergeEvaluated.items(i,y,s.items,lc.Name)}}}C_.callRef=qF;C_.default=Ngn;Object.defineProperty(Cle,"__esModule",{value:!0});const Pgn=Tle,Ogn=C_,Fgn=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Pgn.default,Ogn.default];Cle.default=Fgn;var Ale={},Dle={};Object.defineProperty(Dle,"__esModule",{value:!0});const F$=Tr,i1=F$.operators,M$={maximum:{okStr:"<=",ok:i1.LTE,fail:i1.GT},minimum:{okStr:">=",ok:i1.GTE,fail:i1.LT},exclusiveMaximum:{okStr:"<",ok:i1.LT,fail:i1.GTE},exclusiveMinimum:{okStr:">",ok:i1.GT,fail:i1.LTE}},Mgn={message:({keyword:e,schemaCode:t})=>(0,F$.str)`must be ${M$[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,F$._)`{comparison: ${M$[e].okStr}, limit: ${t}}`},$gn={keyword:Object.keys(M$),type:"number",schemaType:"number",$data:!0,error:Mgn,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,F$._)`${n} ${M$[t].fail} ${r} || isNaN(${n})`)}};Dle.default=$gn;var Ile={};Object.defineProperty(Ile,"__esModule",{value:!0});const qk=Tr,Lgn={message:({schemaCode:e})=>(0,qk.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,qk._)`{multipleOf: ${e}}`},Bgn={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Lgn,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,qk._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,qk._)`${o} !== parseInt(${o})`;e.fail$data((0,qk._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};Ile.default=Bgn;var kle={},Rle={};Object.defineProperty(Rle,"__esModule",{value:!0});function AHe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}Rle.default=AHe;AHe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(kle,"__esModule",{value:!0});const iw=Tr,jgn=qt,Ugn=Rle,zgn={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,iw.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,iw._)`{limit: ${e}}`},Vgn={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:zgn,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?iw.operators.GT:iw.operators.LT,o=i.opts.unicode===!1?(0,iw._)`${n}.length`:(0,iw._)`${(0,jgn.useFunc)(e.gen,Ugn.default)}(${n})`;e.fail$data((0,iw._)`${o} ${s} ${r}`)}};kle.default=Vgn;var Nle={};Object.defineProperty(Nle,"__esModule",{value:!0});const Hgn=Sr,$$=Tr,qgn={message:({schemaCode:e})=>(0,$$.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,$$._)`{pattern: ${e}}`},Wgn={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:qgn,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,$$._)`(new RegExp(${i}, ${o}))`:(0,Hgn.usePattern)(e,r);e.fail$data((0,$$._)`!${a}.test(${t})`)}};Nle.default=Wgn;var Ple={};Object.defineProperty(Ple,"__esModule",{value:!0});const Wk=Tr,Ggn={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,Wk.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,Wk._)`{limit: ${e}}`},Ygn={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Ggn,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?Wk.operators.GT:Wk.operators.LT;e.fail$data((0,Wk._)`Object.keys(${n}).length ${i} ${r}`)}};Ple.default=Ygn;var Ole={};Object.defineProperty(Ole,"__esModule",{value:!0});const tI=Sr,Gk=Tr,Kgn=qt,Xgn={message:({params:{missingProperty:e}})=>(0,Gk.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Gk._)`{missingProperty: ${e}}`},Qgn={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Xgn,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,Kgn.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(Gk.nil,f);else for(const h of n)(0,tI.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,tI.checkMissingProp)(e,n,h)),(0,tI.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,tI.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,tI.propertyInData)(t,i,h,a.ownProperties)),t.if((0,Gk.not)(p),()=>{e.error(),t.break()})},Gk.nil)}}};Ole.default=Qgn;var Fle={};Object.defineProperty(Fle,"__esModule",{value:!0});const Yk=Tr,Jgn={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,Yk.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,Yk._)`{limit: ${e}}`},Zgn={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Jgn,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?Yk.operators.GT:Yk.operators.LT;e.fail$data((0,Yk._)`${n}.length ${i} ${r}`)}};Fle.default=Zgn;var Mle={},RP={};Object.defineProperty(RP,"__esModule",{value:!0});const DHe=kte;DHe.code='require("ajv/dist/runtime/equal").default';RP.default=DHe;Object.defineProperty(Mle,"__esModule",{value:!0});const Hq=ra,Xa=Tr,eyn=qt,tyn=RP,nyn={message:({params:{i:e,j:t}})=>(0,Xa.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Xa._)`{i: ${e}, j: ${t}}`},ryn={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:nyn,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,Hq.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,Xa._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,Xa._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,Xa._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,Hq.checkDataTypes)(l,g,a.opts.strictNumbers,Hq.DataType.Wrong),v=t.const("indices",(0,Xa._)`{}`);t.for((0,Xa._)`;${p}--;`,()=>{t.let(g,(0,Xa._)`${n}[${p}]`),t.if(y,(0,Xa._)`continue`),l.length>1&&t.if((0,Xa._)`typeof ${g} == "string"`,(0,Xa._)`${g} += "_"`),t.if((0,Xa._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,Xa._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,Xa._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,eyn.useFunc)(t,tyn.default),y=t.name("outer");t.label(y).for((0,Xa._)`;${p}--;`,()=>t.for((0,Xa._)`${m} = ${p}; ${m}--;`,()=>t.if((0,Xa._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};Mle.default=ryn;var $le={};Object.defineProperty($le,"__esModule",{value:!0});const kQ=Tr,iyn=qt,syn=RP,oyn={message:"must be equal to constant",params:({schemaCode:e})=>(0,kQ._)`{allowedValue: ${e}}`},ayn={keyword:"const",$data:!0,error:oyn,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,kQ._)`!${(0,iyn.useFunc)(t,syn.default)}(${n}, ${i})`):e.fail((0,kQ._)`${s} !== ${n}`)}};$le.default=ayn;var Lle={};Object.defineProperty(Lle,"__esModule",{value:!0});const KI=Tr,uyn=qt,lyn=RP,cyn={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,KI._)`{allowedValues: ${e}}`},fyn={keyword:"enum",schemaType:"array",$data:!0,error:cyn,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,uyn.useFunc)(t,lyn.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,KI.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,KI._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,KI._)`${l()}(${n}, ${h}[${p}])`:(0,KI._)`${n} === ${m}`}}};Lle.default=fyn;Object.defineProperty(Ale,"__esModule",{value:!0});const dyn=Dle,hyn=Ile,pyn=kle,myn=Nle,gyn=Ple,yyn=Ole,vyn=Fle,byn=Mle,xyn=$le,wyn=Lle,_yn=[dyn.default,hyn.default,pyn.default,myn.default,gyn.default,yyn.default,vyn.default,byn.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},xyn.default,wyn.default];Ale.default=_yn;var Ble={},FA={};Object.defineProperty(FA,"__esModule",{value:!0});FA.validateAdditionalItems=void 0;const sw=Tr,RQ=qt,Eyn={message:({params:{len:e}})=>(0,sw.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,sw._)`{limit: ${e}}`},Syn={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Eyn,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,RQ.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}IHe(e,r)}};function IHe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,sw._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,sw._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,RQ.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,sw._)`${a} <= ${t.length}`);n.if((0,sw.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:RQ.Type.Num},l),o.allErrors||n.if((0,sw.not)(l),()=>n.break())})}}FA.validateAdditionalItems=IHe;FA.default=Syn;var jle={},MA={};Object.defineProperty(MA,"__esModule",{value:!0});MA.validateTuple=void 0;const d2e=Tr,WF=qt,Cyn=Sr,Tyn={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return kHe(e,"additionalItems",t);n.items=!0,!(0,WF.alwaysValidSchema)(n,t)&&e.ok((0,Cyn.validateArray)(e))}};function kHe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=WF.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,d2e._)`${s}.length`);n.forEach((f,d)=>{(0,WF.alwaysValidSchema)(a,f)||(r.if((0,d2e._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,WF.checkStrictMode)(a,g,d.strictTuples)}}}MA.validateTuple=kHe;MA.default=Tyn;Object.defineProperty(jle,"__esModule",{value:!0});const Ayn=MA,Dyn={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Ayn.validateTuple)(e,"items")};jle.default=Dyn;var Ule={};Object.defineProperty(Ule,"__esModule",{value:!0});const h2e=Tr,Iyn=qt,kyn=Sr,Ryn=FA,Nyn={message:({params:{len:e}})=>(0,h2e.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,h2e._)`{limit: ${e}}`},Pyn={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Nyn,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,Iyn.alwaysValidSchema)(r,t)&&(i?(0,Ryn.validateAdditionalItems)(e,i):e.ok((0,kyn.validateArray)(e)))}};Ule.default=Pyn;var zle={};Object.defineProperty(zle,"__esModule",{value:!0});const bd=Tr,g6=qt,Oyn={message:({params:{min:e,max:t}})=>t===void 0?(0,bd.str)`must contain at least ${e} valid item(s)`:(0,bd.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,bd._)`{minContains: ${e}}`:(0,bd._)`{minContains: ${e}, maxContains: ${t}}`},Fyn={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Oyn,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,bd._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,g6.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,g6.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,g6.alwaysValidSchema)(s,n)){let m=(0,bd._)`${c} >= ${o}`;a!==void 0&&(m=(0,bd._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,bd._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:g6.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,bd._)`${m}++`),a===void 0?t.if((0,bd._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,bd._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,bd._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};zle.default=Fyn;var RHe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Tr,n=qt,r=Sr;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(RHe);var Vle={};Object.defineProperty(Vle,"__esModule",{value:!0});const NHe=Tr,Myn=qt,$yn={message:"property name must be valid",params:({params:e})=>(0,NHe._)`{propertyName: ${e.propertyName}}`},Lyn={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:$yn,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,Myn.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,NHe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};Vle.default=Lyn;var lj={};Object.defineProperty(lj,"__esModule",{value:!0});const y6=Sr,Ch=Tr,Byn=A0,v6=qt,jyn={message:"must NOT have additional properties",params:({params:e})=>(0,Ch._)`{additionalProperty: ${e.additionalProperty}}`},Uyn={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:jyn,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,v6.alwaysValidSchema)(o,n))return;const l=(0,y6.allSchemaProperties)(r.properties),c=(0,y6.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Ch._)`${s} === ${Byn.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,v6.schemaRefOrVal)(o,r.properties,"properties");y=(0,y6.isOwnProperty)(t,v,g)}else l.length?y=(0,Ch.or)(...l.map(v=>(0,Ch._)`${g} === ${v}`)):y=Ch.nil;return c.length&&(y=(0,Ch.or)(y,...c.map(v=>(0,Ch._)`${(0,y6.usePattern)(e,v)}.test(${g})`))),(0,Ch.not)(y)}function h(g){t.code((0,Ch._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,v6.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,Ch.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,Ch.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:v6.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};lj.default=Uyn;var Hle={};Object.defineProperty(Hle,"__esModule",{value:!0});const zyn=ap,p2e=Sr,qq=qt,m2e=lj,Vyn={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&m2e.default.code(new zyn.KeywordCxt(s,m2e.default,"additionalProperties"));const o=(0,p2e.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=qq.mergeEvaluated.props(t,(0,qq.toHash)(o),s.props));const a=o.filter(f=>!(0,qq.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,p2e.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};Hle.default=Vyn;var qle={};Object.defineProperty(qle,"__esModule",{value:!0});const g2e=Sr,b6=Tr,y2e=qt,v2e=qt,Hyn={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,g2e.allSchemaProperties)(n),u=a.filter(m=>(0,y2e.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof b6.Name)&&(s.props=(0,v2e.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,y2e.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,b6._)`${(0,g2e.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:v2e.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,b6._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,b6.not)(c),()=>t.break())})})}}};qle.default=Hyn;var Wle={};Object.defineProperty(Wle,"__esModule",{value:!0});const qyn=qt,Wyn={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,qyn.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};Wle.default=Wyn;var Gle={};Object.defineProperty(Gle,"__esModule",{value:!0});const Gyn=Sr,Yyn={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Gyn.validateUnion,error:{message:"must match a schema in anyOf"}};Gle.default=Yyn;var Yle={};Object.defineProperty(Yle,"__esModule",{value:!0});const GF=Tr,Kyn=qt,Xyn={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,GF._)`{passingSchemas: ${e.passing}}`},Qyn={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Xyn,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,Kyn.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,GF._)`${u} && ${o}`).assign(o,!1).assign(a,(0,GF._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,GF.Name)})})}}};Yle.default=Qyn;var Kle={};Object.defineProperty(Kle,"__esModule",{value:!0});const Jyn=qt,Zyn={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,Jyn.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};Kle.default=Zyn;var Xle={};Object.defineProperty(Xle,"__esModule",{value:!0});const L$=Tr,PHe=qt,e1n={message:({params:e})=>(0,L$.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,L$._)`{failingKeyword: ${e.ifClause}}`},t1n={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:e1n,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,PHe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=b2e(r,"then"),s=b2e(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,L$.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,L$._)`${c}`):e.setParams({ifClause:c})}}}};function b2e(e,t){const n=e.schema[t];return n!==void 0&&!(0,PHe.alwaysValidSchema)(e,n)}Xle.default=t1n;var Qle={};Object.defineProperty(Qle,"__esModule",{value:!0});const n1n=qt,r1n={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,n1n.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};Qle.default=r1n;Object.defineProperty(Ble,"__esModule",{value:!0});const i1n=FA,s1n=jle,o1n=MA,a1n=Ule,u1n=zle,l1n=RHe,c1n=Vle,f1n=lj,d1n=Hle,h1n=qle,p1n=Wle,m1n=Gle,g1n=Yle,y1n=Kle,v1n=Xle,b1n=Qle;function x1n(e=!1){const t=[p1n.default,m1n.default,g1n.default,y1n.default,v1n.default,b1n.default,c1n.default,f1n.default,l1n.default,d1n.default,h1n.default];return e?t.push(s1n.default,a1n.default):t.push(i1n.default,o1n.default),t.push(u1n.default),t}Ble.default=x1n;var Jle={},Zle={};Object.defineProperty(Zle,"__esModule",{value:!0});const wo=Tr,w1n={message:({schemaCode:e})=>(0,wo.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,wo._)`{format: ${e}}`},_1n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:w1n,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,wo._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,wo._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,wo._)`${m}.type || "string"`).assign(y,(0,wo._)`${m}.validate`),()=>n.assign(g,(0,wo._)`"string"`).assign(y,m)),e.fail$data((0,wo.or)(v(),b()));function v(){return u.strictSchema===!1?wo.nil:(0,wo._)`${o} && !${y}`}function b(){const _=c.$async?(0,wo._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,wo._)`${y}(${r})`,w=(0,wo._)`(typeof ${y} == "function" ? ${_} : ${y}.test(${r}))`;return(0,wo._)`${y} && ${y} !== true && ${g} === ${t} && !${w}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(_());function v(){if(u.strictSchema===!1){f.logger.warn(w());return}throw new Error(w());function w(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(w){const S=w instanceof RegExp?(0,wo.regexpCode)(w):u.code.formats?(0,wo._)`${u.code.formats}${(0,wo.getProperty)(s)}`:void 0,T=n.scopeValue("formats",{key:s,ref:w,code:S});return typeof w=="object"&&!(w instanceof RegExp)?[w.type||"string",w.validate,(0,wo._)`${T}.validate`]:["string",w,T]}function _(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,wo._)`await ${y}(${r})`}return typeof g=="function"?(0,wo._)`${y}(${r})`:(0,wo._)`${y}.test(${r})`}}}};Zle.default=_1n;Object.defineProperty(Jle,"__esModule",{value:!0});const E1n=Zle,S1n=[E1n.default];Jle.default=S1n;var fT={};Object.defineProperty(fT,"__esModule",{value:!0});fT.contentVocabulary=fT.metadataVocabulary=void 0;fT.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];fT.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(Sle,"__esModule",{value:!0});const C1n=Cle,T1n=Ale,A1n=Ble,D1n=Jle,x2e=fT,I1n=[C1n.default,T1n.default,(0,A1n.default)(),D1n.default,x2e.metadataVocabulary,x2e.contentVocabulary];Sle.default=I1n;var ece={},cj={};Object.defineProperty(cj,"__esModule",{value:!0});cj.DiscrError=void 0;var w2e;(function(e){e.Tag="tag",e.Mapping="mapping"})(w2e||(cj.DiscrError=w2e={}));Object.defineProperty(ece,"__esModule",{value:!0});const I2=Tr,NQ=cj,_2e=xc,k1n=OA,R1n=qt,N1n={message:({params:{discrError:e,tagName:t}})=>e===NQ.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,I2._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},P1n={keyword:"discriminator",type:"object",schemaType:"object",error:N1n,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,I2._)`${n}${(0,I2.getProperty)(a)}`);t.if((0,I2._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:NQ.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,I2._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:NQ.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,I2.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let _=0;_<o.length;_++){let w=o[_];if(w!=null&&w.$ref&&!(0,R1n.schemaHasRulesButRef)(w,s.self.RULES)){const T=w.$ref;if(w=_2e.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,T),w instanceof _2e.SchemaEnv&&(w=w.schema),w===void 0)throw new k1n.default(s.opts.uriResolver,s.baseId,T)}const S=(h=w==null?void 0:w.properties)===null||h===void 0?void 0:h[a];if(typeof S!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(w)),v(S,_)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:_}){return Array.isArray(_)&&_.includes(a)}function v(_,w){if(_.const)b(_.const,w);else if(_.enum)for(const S of _.enum)b(S,w);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(_,w){if(typeof _!="string"||_ in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[_]=w}}}};ece.default=P1n;const O1n="http://json-schema.org/draft-07/schema#",F1n="http://json-schema.org/draft-07/schema#",M1n="Core schema meta-schema",$1n={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},L1n=["object","boolean"],B1n={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},j1n={$schema:O1n,$id:F1n,title:M1n,definitions:$1n,type:L1n,properties:B1n,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=GVe,r=Sle,i=ece,s=j1n,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=ap;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Tr;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=kP;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=OA;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(SQ,SQ.exports);var U1n=SQ.exports;const tce=l0(U1n),z1n="#/definitions/StudyConfig",V1n="http://json-schema.org/draft-07/schema#",H1n={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"},{$ref:"#/definitions/VegaComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},MatrixResponse:{additionalProperties:!1,description:`The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, \`answerOptions\` can be set to one of the following custom strings: 'satisfaction5','satisfaction7', 'likely5', 'likely7'. This will automatically generate the appropriate headers for the matrix.

Example for a 5-scale satisfaction matrix with three questions:

\`\`\`js { "id": "multi-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.", "location": "aboveStimulus", "type": "matrix-radio", "answerOptions": "satisfaction5", "questionOptions": [  "The tool we created",  "The technique we developed",  "The authors of the tools" ] } \`\`\`

Here's an example using custom columns (answerOptions):

\`\`\`js { "id": "multi-custom", "prompt": "Which categories do the following items belong to?", "location": "aboveStimulus", "type": "matrix-checkbox", "answerOptions": [  "Has Legs",  "Has Wings",  "Can Swim" ], "questionOptions": [  "Dog",  "Snake",  "Eagle",  "Salmon",  "Platypus" ]

} \`\`\``,properties:{answerOptions:{anyOf:[{items:{type:"string"},type:"array"},{const:"likely5",type:"string"},{const:"likely7",type:"string"},{const:"satisfaction5",type:"string"},{const:"satisfaction7",type:"string"}],description:"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},questionOptions:{description:"The question options (rows) are the prompts for each response you'd like to record.",items:{type:"string"},type:"array"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{enum:["matrix-radio","matrix-checkbox"],type:"string"}},required:["answerOptions","id","prompt","questionOptions","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/example-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"},{$ref:"#/definitions/MatrixResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v2.0.0-rc3/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},importedLibraries:{description:"A list of libraries that are used in the study. This is used to import external libraries into the study. Library names are valid namespaces to be used later.",items:{type:"string"},type:"array"},recordStudyAudio:{description:"Whether or not we want to utilize think-aloud features. If true, will record audio on all components unless deactivated on individual components. Defaults to false.",type:"boolean"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},timeoutReject:{description:"Whether to redirect a timed out participant to a rejection page. This only works for components where the `nextButtonDisableTime` field is set.",type:"boolean"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},VegaComponent:{anyOf:[{$ref:"#/definitions/VegaComponentPath"},{$ref:"#/definitions/VegaComponentConfig"}]},VegaComponentConfig:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["config","response","type"],type:"object"},VegaComponentPath:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["path","response","type"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},q1n={$ref:z1n,$schema:V1n,definitions:H1n},W1n="#/definitions/GlobalConfig",G1n="http://json-schema.org/draft-07/schema#",Y1n={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},K1n={$ref:W1n,$schema:G1n,definitions:Y1n};var B$={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */B$.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,d=2,h=4,p=1,m=2,g=1,y=2,v=4,b=8,_=16,w=32,S=64,T=128,A=256,k=512,I=30,R="...",F=800,O=16,L=1,H=2,U=3,G=1/0,Y=9007199254740991,J=17976931348623157e292,$=NaN,j=4294967295,W=j-1,B=j>>>1,q=[["ary",T],["bind",g],["bindKey",y],["curry",b],["curryRight",_],["flip",k],["partial",w],["partialRight",S],["rearg",A]],Z="[object Arguments]",re="[object Array]",xe="[object AsyncFunction]",pe="[object Boolean]",Te="[object Date]",ke="[object DOMException]",it="[object Error]",Re="[object Function]",ut="[object GeneratorFunction]",Ke="[object Map]",Ct="[object Number]",gt="[object Null]",Ie="[object Object]",Ve="[object Promise]",ft="[object Proxy]",_t="[object RegExp]",Mt="[object Set]",st="[object String]",X="[object Symbol]",de="[object Undefined]",we="[object WeakMap]",ae="[object WeakSet]",he="[object ArrayBuffer]",Ee="[object DataView]",$e="[object Float32Array]",Be="[object Float64Array]",lt="[object Int8Array]",Je="[object Int16Array]",Xt="[object Int32Array]",fn="[object Uint8Array]",Wt="[object Uint8ClampedArray]",an="[object Uint16Array]",Sn="[object Uint32Array]",Mn=/\b__p \+= '';/g,ki=/\b(__p \+=) '' \+/g,di=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Li=/&(?:amp|lt|gt|quot|#39);/g,As=/[&<>"']/g,Lr=RegExp(Li.source),ls=RegExp(As.source),ll=/<%-([\s\S]+?)%>/g,Fo=/<%([\s\S]+?)%>/g,Ha=/<%=([\s\S]+?)%>/g,Rr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ri=/^\w*$/,hi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vs=/[\\^$.*+?()[\]{}|]/g,ri=RegExp(Vs.source),Ni=/^\s+/,ve=/\s/,ce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_e=/\{\n\/\* \[wrapped with (.+)\] \*/,Ue=/,? & /,je=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Dt=/[()=,{}\[\]\/\s]/,Ht=/\\(\\)?/g,bn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,rr=/\w*$/,mr=/^[-+]0x[0-9a-f]+$/i,jn=/^0b[01]+$/i,Ar=/^\[object .+?Constructor\]$/,ii=/^0o[0-7]+$/i,dn=/^(?:0|[1-9]\d*)$/,Dr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qr=/($^)/,ir=/['\n\r\u2028\u2029\\]/g,un="\\ud800-\\udfff",Br="\\u0300-\\u036f",Pi="\\ufe20-\\ufe2f",Ds="\\u20d0-\\u20ff",_i=Br+Pi+Ds,ns="\\u2700-\\u27bf",Yo="a-z\\xdf-\\xf6\\xf8-\\xff",qa="\\xac\\xb1\\xd7\\xf7",Mo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Jl="\\u2000-\\u206f",Jf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",te="A-Z\\xc0-\\xd6\\xd8-\\xde",be="\\ufe0e\\ufe0f",ue=qa+Mo+Jl+Jf,De="[']",Pe="["+un+"]",Ae="["+ue+"]",Xe="["+_i+"]",pt="\\d+",yt="["+ns+"]",vt="["+Yo+"]",It="[^"+un+ue+pt+ns+Yo+te+"]",zt="\\ud83c[\\udffb-\\udfff]",Xn="(?:"+Xe+"|"+zt+")",nn="[^"+un+"]",gr="(?:\\ud83c[\\udde6-\\uddff]){2}",si="[\\ud800-\\udbff][\\udc00-\\udfff]",Nr="["+te+"]",Ko="\\u200d",nf="(?:"+vt+"|"+It+")",oh="(?:"+Nr+"|"+It+")",zy="(?:"+De+"(?:d|ll|m|re|s|t|ve))?",$p="(?:"+De+"(?:D|LL|M|RE|S|T|VE))?",Jb=Xn+"?",cl="["+be+"]?",vu="(?:"+Ko+"(?:"+[nn,gr,si].join("|")+")"+cl+Jb+")*",ah="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Vy="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Zb=cl+Jb+vu,uh="(?:"+[yt,gr,si].join("|")+")"+Zb,ex="(?:"+[nn+Xe+"?",Xe,gr,si,Pe].join("|")+")",xE=RegExp(De,"g"),lh=RegExp(Xe,"g"),xa=RegExp(zt+"(?="+zt+")|"+ex+Zb,"g"),HA=RegExp([Nr+"?"+vt+"+"+zy+"(?="+[Ae,Nr,"$"].join("|")+")",oh+"+"+$p+"(?="+[Ae,Nr+nf,"$"].join("|")+")",Nr+"?"+nf+"+"+zy,Nr+"+"+$p,Vy,ah,pt,uh].join("|"),"g"),wE=RegExp("["+Ko+un+_i+be+"]"),I0=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,k0=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_E=-1,oi={};oi[$e]=oi[Be]=oi[lt]=oi[Je]=oi[Xt]=oi[fn]=oi[Wt]=oi[an]=oi[Sn]=!0,oi[Z]=oi[re]=oi[he]=oi[pe]=oi[Ee]=oi[Te]=oi[it]=oi[Re]=oi[Ke]=oi[Ct]=oi[Ie]=oi[_t]=oi[Mt]=oi[st]=oi[we]=!1;var jr={};jr[Z]=jr[re]=jr[he]=jr[Ee]=jr[pe]=jr[Te]=jr[$e]=jr[Be]=jr[lt]=jr[Je]=jr[Xt]=jr[Ke]=jr[Ct]=jr[Ie]=jr[_t]=jr[Mt]=jr[st]=jr[X]=jr[fn]=jr[Wt]=jr[an]=jr[Sn]=!0,jr[it]=jr[Re]=jr[we]=!1;var EE={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},fe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Se={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},He={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Qt=parseFloat,xr=parseInt,ai=typeof on=="object"&&on&&on.Object===Object&&on,Bi=typeof self=="object"&&self&&self.Object===Object&&self,xn=ai||Bi||Function("return this")(),Ei=t&&!t.nodeType&&t,ji=Ei&&!0&&e&&!e.nodeType&&e,Xo=ji&&ji.exports===Ei,ch=Xo&&ai.process,Zs=function(){try{var Ne=ji&&ji.require&&ji.require("util").types;return Ne||ch&&ch.binding&&ch.binding("util")}catch{}}(),R0=Zs&&Zs.isArrayBuffer,N0=Zs&&Zs.isDate,tx=Zs&&Zs.isMap,qA=Zs&&Zs.isRegExp,nx=Zs&&Zs.isSet,KP=Zs&&Zs.isTypedArray;function bu(Ne,nt,qe){switch(qe.length){case 0:return Ne.call(nt);case 1:return Ne.call(nt,qe[0]);case 2:return Ne.call(nt,qe[0],qe[1]);case 3:return Ne.call(nt,qe[0],qe[1],qe[2])}return Ne.apply(nt,qe)}function rx(Ne,nt,qe,Yt){for(var Zn=-1,Ci=Ne==null?0:Ne.length;++Zn<Ci;){var Jo=Ne[Zn];nt(Yt,Jo,qe(Jo),Ne)}return Yt}function fl(Ne,nt){for(var qe=-1,Yt=Ne==null?0:Ne.length;++qe<Yt&&nt(Ne[qe],qe,Ne)!==!1;);return Ne}function XP(Ne,nt){for(var qe=Ne==null?0:Ne.length;qe--&&nt(Ne[qe],qe,Ne)!==!1;);return Ne}function SE(Ne,nt){for(var qe=-1,Yt=Ne==null?0:Ne.length;++qe<Yt;)if(!nt(Ne[qe],qe,Ne))return!1;return!0}function Zf(Ne,nt){for(var qe=-1,Yt=Ne==null?0:Ne.length,Zn=0,Ci=[];++qe<Yt;){var Jo=Ne[qe];nt(Jo,qe,Ne)&&(Ci[Zn++]=Jo)}return Ci}function ix(Ne,nt){var qe=Ne==null?0:Ne.length;return!!qe&&P0(Ne,nt,0)>-1}function Hy(Ne,nt,qe){for(var Yt=-1,Zn=Ne==null?0:Ne.length;++Yt<Zn;)if(qe(nt,Ne[Yt]))return!0;return!1}function rs(Ne,nt){for(var qe=-1,Yt=Ne==null?0:Ne.length,Zn=Array(Yt);++qe<Yt;)Zn[qe]=nt(Ne[qe],qe,Ne);return Zn}function fh(Ne,nt){for(var qe=-1,Yt=nt.length,Zn=Ne.length;++qe<Yt;)Ne[Zn+qe]=nt[qe];return Ne}function dh(Ne,nt,qe,Yt){var Zn=-1,Ci=Ne==null?0:Ne.length;for(Yt&&Ci&&(qe=Ne[++Zn]);++Zn<Ci;)qe=nt(qe,Ne[Zn],Zn,Ne);return qe}function QP(Ne,nt,qe,Yt){var Zn=Ne==null?0:Ne.length;for(Yt&&Zn&&(qe=Ne[--Zn]);Zn--;)qe=nt(qe,Ne[Zn],Zn,Ne);return qe}function CE(Ne,nt){for(var qe=-1,Yt=Ne==null?0:Ne.length;++qe<Yt;)if(nt(Ne[qe],qe,Ne))return!0;return!1}var JP=K("length");function ZP(Ne){return Ne.split("")}function TE(Ne){return Ne.match(je)||[]}function xu(Ne,nt,qe){var Yt;return qe(Ne,function(Zn,Ci,Jo){if(nt(Zn,Ci,Jo))return Yt=Ci,!1}),Yt}function sx(Ne,nt,qe,Yt){for(var Zn=Ne.length,Ci=qe+(Yt?1:-1);Yt?Ci--:++Ci<Zn;)if(nt(Ne[Ci],Ci,Ne))return Ci;return-1}function P0(Ne,nt,qe){return nt===nt?UGe(Ne,nt,qe):sx(Ne,D,qe)}function qy(Ne,nt,qe,Yt){for(var Zn=qe-1,Ci=Ne.length;++Zn<Ci;)if(Yt(Ne[Zn],nt))return Zn;return-1}function D(Ne){return Ne!==Ne}function z(Ne,nt){var qe=Ne==null?0:Ne.length;return qe?Ft(Ne,nt)/qe:$}function K(Ne){return function(nt){return nt==null?n:nt[Ne]}}function ie(Ne){return function(nt){return Ne==null?n:Ne[nt]}}function Me(Ne,nt,qe,Yt,Zn){return Zn(Ne,function(Ci,Jo,is){qe=Yt?(Yt=!1,Ci):nt(qe,Ci,Jo,is)}),qe}function Ge(Ne,nt){var qe=Ne.length;for(Ne.sort(nt);qe--;)Ne[qe]=Ne[qe].value;return Ne}function Ft(Ne,nt){for(var qe,Yt=-1,Zn=Ne.length;++Yt<Zn;){var Ci=nt(Ne[Yt]);Ci!==n&&(qe=qe===n?Ci:qe+Ci)}return qe}function Si(Ne,nt){for(var qe=-1,Yt=Array(Ne);++qe<Ne;)Yt[qe]=nt(qe);return Yt}function Qo(Ne,nt){return rs(nt,function(qe){return[qe,Ne[qe]]})}function Ur(Ne){return Ne&&Ne.slice(0,cfe(Ne)+1).replace(Ni,"")}function Oi(Ne){return function(nt){return Ne(nt)}}function $o(Ne,nt){return rs(nt,function(qe){return Ne[qe]})}function ed(Ne,nt){return Ne.has(nt)}function Zl(Ne,nt){for(var qe=-1,Yt=Ne.length;++qe<Yt&&P0(nt,Ne[qe],0)>-1;);return qe}function ox(Ne,nt){for(var qe=Ne.length;qe--&&P0(nt,Ne[qe],0)>-1;);return qe}function WA(Ne,nt){for(var qe=Ne.length,Yt=0;qe--;)Ne[qe]===nt&&++Yt;return Yt}var OGe=ie(EE),FGe=ie(fe);function MGe(Ne){return"\\"+He[Ne]}function $Ge(Ne,nt){return Ne==null?n:Ne[nt]}function AE(Ne){return wE.test(Ne)}function LGe(Ne){return I0.test(Ne)}function BGe(Ne){for(var nt,qe=[];!(nt=Ne.next()).done;)qe.push(nt.value);return qe}function Oj(Ne){var nt=-1,qe=Array(Ne.size);return Ne.forEach(function(Yt,Zn){qe[++nt]=[Zn,Yt]}),qe}function lfe(Ne,nt){return function(qe){return Ne(nt(qe))}}function Wy(Ne,nt){for(var qe=-1,Yt=Ne.length,Zn=0,Ci=[];++qe<Yt;){var Jo=Ne[qe];(Jo===nt||Jo===c)&&(Ne[qe]=c,Ci[Zn++]=qe)}return Ci}function eO(Ne){var nt=-1,qe=Array(Ne.size);return Ne.forEach(function(Yt){qe[++nt]=Yt}),qe}function jGe(Ne){var nt=-1,qe=Array(Ne.size);return Ne.forEach(function(Yt){qe[++nt]=[Yt,Yt]}),qe}function UGe(Ne,nt,qe){for(var Yt=qe-1,Zn=Ne.length;++Yt<Zn;)if(Ne[Yt]===nt)return Yt;return-1}function zGe(Ne,nt,qe){for(var Yt=qe+1;Yt--;)if(Ne[Yt]===nt)return Yt;return Yt}function DE(Ne){return AE(Ne)?HGe(Ne):JP(Ne)}function hh(Ne){return AE(Ne)?qGe(Ne):ZP(Ne)}function cfe(Ne){for(var nt=Ne.length;nt--&&ve.test(Ne.charAt(nt)););return nt}var VGe=ie(Se);function HGe(Ne){for(var nt=xa.lastIndex=0;xa.test(Ne);)++nt;return nt}function qGe(Ne){return Ne.match(xa)||[]}function WGe(Ne){return Ne.match(HA)||[]}var GGe=function Ne(nt){nt=nt==null?xn:IE.defaults(xn.Object(),nt,IE.pick(xn,k0));var qe=nt.Array,Yt=nt.Date,Zn=nt.Error,Ci=nt.Function,Jo=nt.Math,is=nt.Object,Fj=nt.RegExp,YGe=nt.String,td=nt.TypeError,tO=qe.prototype,KGe=Ci.prototype,kE=is.prototype,nO=nt["__core-js_shared__"],rO=KGe.toString,Ui=kE.hasOwnProperty,XGe=0,ffe=function(){var x=/[^.]+$/.exec(nO&&nO.keys&&nO.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}(),iO=kE.toString,QGe=rO.call(is),JGe=xn._,ZGe=Fj("^"+rO.call(Ui).replace(Vs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),sO=Xo?nt.Buffer:n,Gy=nt.Symbol,oO=nt.Uint8Array,dfe=sO?sO.allocUnsafe:n,aO=lfe(is.getPrototypeOf,is),hfe=is.create,pfe=kE.propertyIsEnumerable,uO=tO.splice,mfe=Gy?Gy.isConcatSpreadable:n,GA=Gy?Gy.iterator:n,ax=Gy?Gy.toStringTag:n,lO=function(){try{var x=dx(is,"defineProperty");return x({},"",{}),x}catch{}}(),eYe=nt.clearTimeout!==xn.clearTimeout&&nt.clearTimeout,tYe=Yt&&Yt.now!==xn.Date.now&&Yt.now,nYe=nt.setTimeout!==xn.setTimeout&&nt.setTimeout,cO=Jo.ceil,fO=Jo.floor,Mj=is.getOwnPropertySymbols,rYe=sO?sO.isBuffer:n,gfe=nt.isFinite,iYe=tO.join,sYe=lfe(is.keys,is),Zo=Jo.max,wu=Jo.min,oYe=Yt.now,aYe=nt.parseInt,yfe=Jo.random,uYe=tO.reverse,$j=dx(nt,"DataView"),YA=dx(nt,"Map"),Lj=dx(nt,"Promise"),RE=dx(nt,"Set"),KA=dx(nt,"WeakMap"),XA=dx(is,"create"),dO=KA&&new KA,NE={},lYe=hx($j),cYe=hx(YA),fYe=hx(Lj),dYe=hx(RE),hYe=hx(KA),hO=Gy?Gy.prototype:n,QA=hO?hO.valueOf:n,vfe=hO?hO.toString:n;function ee(x){if(eo(x)&&!nr(x)&&!(x instanceof Pr)){if(x instanceof nd)return x;if(Ui.call(x,"__wrapped__"))return bde(x)}return new nd(x)}var PE=function(){function x(){}return function(C){if(!Hs(C))return{};if(hfe)return hfe(C);x.prototype=C;var P=new x;return x.prototype=n,P}}();function pO(){}function nd(x,C){this.__wrapped__=x,this.__actions__=[],this.__chain__=!!C,this.__index__=0,this.__values__=n}ee.templateSettings={escape:ll,evaluate:Fo,interpolate:Ha,variable:"",imports:{_:ee}},ee.prototype=pO.prototype,ee.prototype.constructor=ee,nd.prototype=PE(pO.prototype),nd.prototype.constructor=nd;function Pr(x){this.__wrapped__=x,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=j,this.__views__=[]}function pYe(){var x=new Pr(this.__wrapped__);return x.__actions__=ec(this.__actions__),x.__dir__=this.__dir__,x.__filtered__=this.__filtered__,x.__iteratees__=ec(this.__iteratees__),x.__takeCount__=this.__takeCount__,x.__views__=ec(this.__views__),x}function mYe(){if(this.__filtered__){var x=new Pr(this);x.__dir__=-1,x.__filtered__=!0}else x=this.clone(),x.__dir__*=-1;return x}function gYe(){var x=this.__wrapped__.value(),C=this.__dir__,P=nr(x),V=C<0,Q=P?x.length:0,se=DKe(0,Q,this.__views__),me=se.start,Ce=se.end,Oe=Ce-me,ct=V?Ce:me-1,dt=this.__iteratees__,bt=dt.length,Ut=0,sn=wu(Oe,this.__takeCount__);if(!P||!V&&Q==Oe&&sn==Oe)return zfe(x,this.__actions__);var In=[];e:for(;Oe--&&Ut<sn;){ct+=C;for(var yr=-1,kn=x[ct];++yr<bt;){var Ir=dt[yr],zr=Ir.iteratee,of=Ir.type,pl=zr(kn);if(of==H)kn=pl;else if(!pl){if(of==L)continue e;break e}}In[Ut++]=kn}return In}Pr.prototype=PE(pO.prototype),Pr.prototype.constructor=Pr;function ux(x){var C=-1,P=x==null?0:x.length;for(this.clear();++C<P;){var V=x[C];this.set(V[0],V[1])}}function yYe(){this.__data__=XA?XA(null):{},this.size=0}function vYe(x){var C=this.has(x)&&delete this.__data__[x];return this.size-=C?1:0,C}function bYe(x){var C=this.__data__;if(XA){var P=C[x];return P===u?n:P}return Ui.call(C,x)?C[x]:n}function xYe(x){var C=this.__data__;return XA?C[x]!==n:Ui.call(C,x)}function wYe(x,C){var P=this.__data__;return this.size+=this.has(x)?0:1,P[x]=XA&&C===n?u:C,this}ux.prototype.clear=yYe,ux.prototype.delete=vYe,ux.prototype.get=bYe,ux.prototype.has=xYe,ux.prototype.set=wYe;function O0(x){var C=-1,P=x==null?0:x.length;for(this.clear();++C<P;){var V=x[C];this.set(V[0],V[1])}}function _Ye(){this.__data__=[],this.size=0}function EYe(x){var C=this.__data__,P=mO(C,x);if(P<0)return!1;var V=C.length-1;return P==V?C.pop():uO.call(C,P,1),--this.size,!0}function SYe(x){var C=this.__data__,P=mO(C,x);return P<0?n:C[P][1]}function CYe(x){return mO(this.__data__,x)>-1}function TYe(x,C){var P=this.__data__,V=mO(P,x);return V<0?(++this.size,P.push([x,C])):P[V][1]=C,this}O0.prototype.clear=_Ye,O0.prototype.delete=EYe,O0.prototype.get=SYe,O0.prototype.has=CYe,O0.prototype.set=TYe;function F0(x){var C=-1,P=x==null?0:x.length;for(this.clear();++C<P;){var V=x[C];this.set(V[0],V[1])}}function AYe(){this.size=0,this.__data__={hash:new ux,map:new(YA||O0),string:new ux}}function DYe(x){var C=AO(this,x).delete(x);return this.size-=C?1:0,C}function IYe(x){return AO(this,x).get(x)}function kYe(x){return AO(this,x).has(x)}function RYe(x,C){var P=AO(this,x),V=P.size;return P.set(x,C),this.size+=P.size==V?0:1,this}F0.prototype.clear=AYe,F0.prototype.delete=DYe,F0.prototype.get=IYe,F0.prototype.has=kYe,F0.prototype.set=RYe;function lx(x){var C=-1,P=x==null?0:x.length;for(this.__data__=new F0;++C<P;)this.add(x[C])}function NYe(x){return this.__data__.set(x,u),this}function PYe(x){return this.__data__.has(x)}lx.prototype.add=lx.prototype.push=NYe,lx.prototype.has=PYe;function ph(x){var C=this.__data__=new O0(x);this.size=C.size}function OYe(){this.__data__=new O0,this.size=0}function FYe(x){var C=this.__data__,P=C.delete(x);return this.size=C.size,P}function MYe(x){return this.__data__.get(x)}function $Ye(x){return this.__data__.has(x)}function LYe(x,C){var P=this.__data__;if(P instanceof O0){var V=P.__data__;if(!YA||V.length<i-1)return V.push([x,C]),this.size=++P.size,this;P=this.__data__=new F0(V)}return P.set(x,C),this.size=P.size,this}ph.prototype.clear=OYe,ph.prototype.delete=FYe,ph.prototype.get=MYe,ph.prototype.has=$Ye,ph.prototype.set=LYe;function bfe(x,C){var P=nr(x),V=!P&&px(x),Q=!P&&!V&&Jy(x),se=!P&&!V&&!Q&&$E(x),me=P||V||Q||se,Ce=me?Si(x.length,YGe):[],Oe=Ce.length;for(var ct in x)(C||Ui.call(x,ct))&&!(me&&(ct=="length"||Q&&(ct=="offset"||ct=="parent")||se&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||B0(ct,Oe)))&&Ce.push(ct);return Ce}function xfe(x){var C=x.length;return C?x[Kj(0,C-1)]:n}function BYe(x,C){return DO(ec(x),cx(C,0,x.length))}function jYe(x){return DO(ec(x))}function Bj(x,C,P){(P!==n&&!mh(x[C],P)||P===n&&!(C in x))&&M0(x,C,P)}function JA(x,C,P){var V=x[C];(!(Ui.call(x,C)&&mh(V,P))||P===n&&!(C in x))&&M0(x,C,P)}function mO(x,C){for(var P=x.length;P--;)if(mh(x[P][0],C))return P;return-1}function UYe(x,C,P,V){return Yy(x,function(Q,se,me){C(V,Q,P(Q),me)}),V}function wfe(x,C){return x&&Bp(C,wa(C),x)}function zYe(x,C){return x&&Bp(C,nc(C),x)}function M0(x,C,P){C=="__proto__"&&lO?lO(x,C,{configurable:!0,enumerable:!0,value:P,writable:!0}):x[C]=P}function jj(x,C){for(var P=-1,V=C.length,Q=qe(V),se=x==null;++P<V;)Q[P]=se?n:xU(x,C[P]);return Q}function cx(x,C,P){return x===x&&(P!==n&&(x=x<=P?x:P),C!==n&&(x=x>=C?x:C)),x}function rd(x,C,P,V,Q,se){var me,Ce=C&f,Oe=C&d,ct=C&h;if(P&&(me=Q?P(x,V,Q,se):P(x)),me!==n)return me;if(!Hs(x))return x;var dt=nr(x);if(dt){if(me=kKe(x),!Ce)return ec(x,me)}else{var bt=_u(x),Ut=bt==Re||bt==ut;if(Jy(x))return qfe(x,Ce);if(bt==Ie||bt==Z||Ut&&!Q){if(me=Oe||Ut?{}:cde(x),!Ce)return Oe?bKe(x,zYe(me,x)):vKe(x,wfe(me,x))}else{if(!jr[bt])return Q?x:{};me=RKe(x,bt,Ce)}}se||(se=new ph);var sn=se.get(x);if(sn)return sn;se.set(x,me),Bde(x)?x.forEach(function(kn){me.add(rd(kn,C,P,kn,x,se))}):$de(x)&&x.forEach(function(kn,Ir){me.set(Ir,rd(kn,C,P,Ir,x,se))});var In=ct?Oe?oU:sU:Oe?nc:wa,yr=dt?n:In(x);return fl(yr||x,function(kn,Ir){yr&&(Ir=kn,kn=x[Ir]),JA(me,Ir,rd(kn,C,P,Ir,x,se))}),me}function VYe(x){var C=wa(x);return function(P){return _fe(P,x,C)}}function _fe(x,C,P){var V=P.length;if(x==null)return!V;for(x=is(x);V--;){var Q=P[V],se=C[Q],me=x[Q];if(me===n&&!(Q in x)||!se(me))return!1}return!0}function Efe(x,C,P){if(typeof x!="function")throw new td(o);return sD(function(){x.apply(n,P)},C)}function ZA(x,C,P,V){var Q=-1,se=ix,me=!0,Ce=x.length,Oe=[],ct=C.length;if(!Ce)return Oe;P&&(C=rs(C,Oi(P))),V?(se=Hy,me=!1):C.length>=i&&(se=ed,me=!1,C=new lx(C));e:for(;++Q<Ce;){var dt=x[Q],bt=P==null?dt:P(dt);if(dt=V||dt!==0?dt:0,me&&bt===bt){for(var Ut=ct;Ut--;)if(C[Ut]===bt)continue e;Oe.push(dt)}else se(C,bt,V)||Oe.push(dt)}return Oe}var Yy=Xfe(Lp),Sfe=Xfe(zj,!0);function HYe(x,C){var P=!0;return Yy(x,function(V,Q,se){return P=!!C(V,Q,se),P}),P}function gO(x,C,P){for(var V=-1,Q=x.length;++V<Q;){var se=x[V],me=C(se);if(me!=null&&(Ce===n?me===me&&!sf(me):P(me,Ce)))var Ce=me,Oe=se}return Oe}function qYe(x,C,P,V){var Q=x.length;for(P=fr(P),P<0&&(P=-P>Q?0:Q+P),V=V===n||V>Q?Q:fr(V),V<0&&(V+=Q),V=P>V?0:Ude(V);P<V;)x[P++]=C;return x}function Cfe(x,C){var P=[];return Yy(x,function(V,Q,se){C(V,Q,se)&&P.push(V)}),P}function Wa(x,C,P,V,Q){var se=-1,me=x.length;for(P||(P=PKe),Q||(Q=[]);++se<me;){var Ce=x[se];C>0&&P(Ce)?C>1?Wa(Ce,C-1,P,V,Q):fh(Q,Ce):V||(Q[Q.length]=Ce)}return Q}var Uj=Qfe(),Tfe=Qfe(!0);function Lp(x,C){return x&&Uj(x,C,wa)}function zj(x,C){return x&&Tfe(x,C,wa)}function yO(x,C){return Zf(C,function(P){return j0(x[P])})}function fx(x,C){C=Xy(C,x);for(var P=0,V=C.length;x!=null&&P<V;)x=x[jp(C[P++])];return P&&P==V?x:n}function Afe(x,C,P){var V=C(x);return nr(x)?V:fh(V,P(x))}function dl(x){return x==null?x===n?de:gt:ax&&ax in is(x)?AKe(x):jKe(x)}function Vj(x,C){return x>C}function WYe(x,C){return x!=null&&Ui.call(x,C)}function GYe(x,C){return x!=null&&C in is(x)}function YYe(x,C,P){return x>=wu(C,P)&&x<Zo(C,P)}function Hj(x,C,P){for(var V=P?Hy:ix,Q=x[0].length,se=x.length,me=se,Ce=qe(se),Oe=1/0,ct=[];me--;){var dt=x[me];me&&C&&(dt=rs(dt,Oi(C))),Oe=wu(dt.length,Oe),Ce[me]=!P&&(C||Q>=120&&dt.length>=120)?new lx(me&&dt):n}dt=x[0];var bt=-1,Ut=Ce[0];e:for(;++bt<Q&&ct.length<Oe;){var sn=dt[bt],In=C?C(sn):sn;if(sn=P||sn!==0?sn:0,!(Ut?ed(Ut,In):V(ct,In,P))){for(me=se;--me;){var yr=Ce[me];if(!(yr?ed(yr,In):V(x[me],In,P)))continue e}Ut&&Ut.push(In),ct.push(sn)}}return ct}function KYe(x,C,P,V){return Lp(x,function(Q,se,me){C(V,P(Q),se,me)}),V}function eD(x,C,P){C=Xy(C,x),x=pde(x,C);var V=x==null?x:x[jp(sd(C))];return V==null?n:bu(V,x,P)}function Dfe(x){return eo(x)&&dl(x)==Z}function XYe(x){return eo(x)&&dl(x)==he}function QYe(x){return eo(x)&&dl(x)==Te}function tD(x,C,P,V,Q){return x===C?!0:x==null||C==null||!eo(x)&&!eo(C)?x!==x&&C!==C:JYe(x,C,P,V,tD,Q)}function JYe(x,C,P,V,Q,se){var me=nr(x),Ce=nr(C),Oe=me?re:_u(x),ct=Ce?re:_u(C);Oe=Oe==Z?Ie:Oe,ct=ct==Z?Ie:ct;var dt=Oe==Ie,bt=ct==Ie,Ut=Oe==ct;if(Ut&&Jy(x)){if(!Jy(C))return!1;me=!0,dt=!1}if(Ut&&!dt)return se||(se=new ph),me||$E(x)?ade(x,C,P,V,Q,se):CKe(x,C,Oe,P,V,Q,se);if(!(P&p)){var sn=dt&&Ui.call(x,"__wrapped__"),In=bt&&Ui.call(C,"__wrapped__");if(sn||In){var yr=sn?x.value():x,kn=In?C.value():C;return se||(se=new ph),Q(yr,kn,P,V,se)}}return Ut?(se||(se=new ph),TKe(x,C,P,V,Q,se)):!1}function ZYe(x){return eo(x)&&_u(x)==Ke}function qj(x,C,P,V){var Q=P.length,se=Q,me=!V;if(x==null)return!se;for(x=is(x);Q--;){var Ce=P[Q];if(me&&Ce[2]?Ce[1]!==x[Ce[0]]:!(Ce[0]in x))return!1}for(;++Q<se;){Ce=P[Q];var Oe=Ce[0],ct=x[Oe],dt=Ce[1];if(me&&Ce[2]){if(ct===n&&!(Oe in x))return!1}else{var bt=new ph;if(V)var Ut=V(ct,dt,Oe,x,C,bt);if(!(Ut===n?tD(dt,ct,p|m,V,bt):Ut))return!1}}return!0}function Ife(x){if(!Hs(x)||FKe(x))return!1;var C=j0(x)?ZGe:Ar;return C.test(hx(x))}function eKe(x){return eo(x)&&dl(x)==_t}function tKe(x){return eo(x)&&_u(x)==Mt}function nKe(x){return eo(x)&&OO(x.length)&&!!oi[dl(x)]}function kfe(x){return typeof x=="function"?x:x==null?rc:typeof x=="object"?nr(x)?Pfe(x[0],x[1]):Nfe(x):Jde(x)}function Wj(x){if(!iD(x))return sYe(x);var C=[];for(var P in is(x))Ui.call(x,P)&&P!="constructor"&&C.push(P);return C}function rKe(x){if(!Hs(x))return BKe(x);var C=iD(x),P=[];for(var V in x)V=="constructor"&&(C||!Ui.call(x,V))||P.push(V);return P}function Gj(x,C){return x<C}function Rfe(x,C){var P=-1,V=tc(x)?qe(x.length):[];return Yy(x,function(Q,se,me){V[++P]=C(Q,se,me)}),V}function Nfe(x){var C=uU(x);return C.length==1&&C[0][2]?dde(C[0][0],C[0][1]):function(P){return P===x||qj(P,x,C)}}function Pfe(x,C){return cU(x)&&fde(C)?dde(jp(x),C):function(P){var V=xU(P,x);return V===n&&V===C?wU(P,x):tD(C,V,p|m)}}function vO(x,C,P,V,Q){x!==C&&Uj(C,function(se,me){if(Q||(Q=new ph),Hs(se))iKe(x,C,me,P,vO,V,Q);else{var Ce=V?V(dU(x,me),se,me+"",x,C,Q):n;Ce===n&&(Ce=se),Bj(x,me,Ce)}},nc)}function iKe(x,C,P,V,Q,se,me){var Ce=dU(x,P),Oe=dU(C,P),ct=me.get(Oe);if(ct){Bj(x,P,ct);return}var dt=se?se(Ce,Oe,P+"",x,C,me):n,bt=dt===n;if(bt){var Ut=nr(Oe),sn=!Ut&&Jy(Oe),In=!Ut&&!sn&&$E(Oe);dt=Oe,Ut||sn||In?nr(Ce)?dt=Ce:vo(Ce)?dt=ec(Ce):sn?(bt=!1,dt=qfe(Oe,!0)):In?(bt=!1,dt=Wfe(Oe,!0)):dt=[]:oD(Oe)||px(Oe)?(dt=Ce,px(Ce)?dt=zde(Ce):(!Hs(Ce)||j0(Ce))&&(dt=cde(Oe))):bt=!1}bt&&(me.set(Oe,dt),Q(dt,Oe,V,se,me),me.delete(Oe)),Bj(x,P,dt)}function Ofe(x,C){var P=x.length;if(P)return C+=C<0?P:0,B0(C,P)?x[C]:n}function Ffe(x,C,P){C.length?C=rs(C,function(se){return nr(se)?function(me){return fx(me,se.length===1?se[0]:se)}:se}):C=[rc];var V=-1;C=rs(C,Oi(An()));var Q=Rfe(x,function(se,me,Ce){var Oe=rs(C,function(ct){return ct(se)});return{criteria:Oe,index:++V,value:se}});return Ge(Q,function(se,me){return yKe(se,me,P)})}function sKe(x,C){return Mfe(x,C,function(P,V){return wU(x,V)})}function Mfe(x,C,P){for(var V=-1,Q=C.length,se={};++V<Q;){var me=C[V],Ce=fx(x,me);P(Ce,me)&&nD(se,Xy(me,x),Ce)}return se}function oKe(x){return function(C){return fx(C,x)}}function Yj(x,C,P,V){var Q=V?qy:P0,se=-1,me=C.length,Ce=x;for(x===C&&(C=ec(C)),P&&(Ce=rs(x,Oi(P)));++se<me;)for(var Oe=0,ct=C[se],dt=P?P(ct):ct;(Oe=Q(Ce,dt,Oe,V))>-1;)Ce!==x&&uO.call(Ce,Oe,1),uO.call(x,Oe,1);return x}function $fe(x,C){for(var P=x?C.length:0,V=P-1;P--;){var Q=C[P];if(P==V||Q!==se){var se=Q;B0(Q)?uO.call(x,Q,1):Jj(x,Q)}}return x}function Kj(x,C){return x+fO(yfe()*(C-x+1))}function aKe(x,C,P,V){for(var Q=-1,se=Zo(cO((C-x)/(P||1)),0),me=qe(se);se--;)me[V?se:++Q]=x,x+=P;return me}function Xj(x,C){var P="";if(!x||C<1||C>Y)return P;do C%2&&(P+=x),C=fO(C/2),C&&(x+=x);while(C);return P}function wr(x,C){return hU(hde(x,C,rc),x+"")}function uKe(x){return xfe(LE(x))}function lKe(x,C){var P=LE(x);return DO(P,cx(C,0,P.length))}function nD(x,C,P,V){if(!Hs(x))return x;C=Xy(C,x);for(var Q=-1,se=C.length,me=se-1,Ce=x;Ce!=null&&++Q<se;){var Oe=jp(C[Q]),ct=P;if(Oe==="__proto__"||Oe==="constructor"||Oe==="prototype")return x;if(Q!=me){var dt=Ce[Oe];ct=V?V(dt,Oe,Ce):n,ct===n&&(ct=Hs(dt)?dt:B0(C[Q+1])?[]:{})}JA(Ce,Oe,ct),Ce=Ce[Oe]}return x}var Lfe=dO?function(x,C){return dO.set(x,C),x}:rc,cKe=lO?function(x,C){return lO(x,"toString",{configurable:!0,enumerable:!1,value:EU(C),writable:!0})}:rc;function fKe(x){return DO(LE(x))}function id(x,C,P){var V=-1,Q=x.length;C<0&&(C=-C>Q?0:Q+C),P=P>Q?Q:P,P<0&&(P+=Q),Q=C>P?0:P-C>>>0,C>>>=0;for(var se=qe(Q);++V<Q;)se[V]=x[V+C];return se}function dKe(x,C){var P;return Yy(x,function(V,Q,se){return P=C(V,Q,se),!P}),!!P}function bO(x,C,P){var V=0,Q=x==null?V:x.length;if(typeof C=="number"&&C===C&&Q<=B){for(;V<Q;){var se=V+Q>>>1,me=x[se];me!==null&&!sf(me)&&(P?me<=C:me<C)?V=se+1:Q=se}return Q}return Qj(x,C,rc,P)}function Qj(x,C,P,V){var Q=0,se=x==null?0:x.length;if(se===0)return 0;C=P(C);for(var me=C!==C,Ce=C===null,Oe=sf(C),ct=C===n;Q<se;){var dt=fO((Q+se)/2),bt=P(x[dt]),Ut=bt!==n,sn=bt===null,In=bt===bt,yr=sf(bt);if(me)var kn=V||In;else ct?kn=In&&(V||Ut):Ce?kn=In&&Ut&&(V||!sn):Oe?kn=In&&Ut&&!sn&&(V||!yr):sn||yr?kn=!1:kn=V?bt<=C:bt<C;kn?Q=dt+1:se=dt}return wu(se,W)}function Bfe(x,C){for(var P=-1,V=x.length,Q=0,se=[];++P<V;){var me=x[P],Ce=C?C(me):me;if(!P||!mh(Ce,Oe)){var Oe=Ce;se[Q++]=me===0?0:me}}return se}function jfe(x){return typeof x=="number"?x:sf(x)?$:+x}function rf(x){if(typeof x=="string")return x;if(nr(x))return rs(x,rf)+"";if(sf(x))return vfe?vfe.call(x):"";var C=x+"";return C=="0"&&1/x==-1/0?"-0":C}function Ky(x,C,P){var V=-1,Q=ix,se=x.length,me=!0,Ce=[],Oe=Ce;if(P)me=!1,Q=Hy;else if(se>=i){var ct=C?null:EKe(x);if(ct)return eO(ct);me=!1,Q=ed,Oe=new lx}else Oe=C?[]:Ce;e:for(;++V<se;){var dt=x[V],bt=C?C(dt):dt;if(dt=P||dt!==0?dt:0,me&&bt===bt){for(var Ut=Oe.length;Ut--;)if(Oe[Ut]===bt)continue e;C&&Oe.push(bt),Ce.push(dt)}else Q(Oe,bt,P)||(Oe!==Ce&&Oe.push(bt),Ce.push(dt))}return Ce}function Jj(x,C){return C=Xy(C,x),x=pde(x,C),x==null||delete x[jp(sd(C))]}function Ufe(x,C,P,V){return nD(x,C,P(fx(x,C)),V)}function xO(x,C,P,V){for(var Q=x.length,se=V?Q:-1;(V?se--:++se<Q)&&C(x[se],se,x););return P?id(x,V?0:se,V?se+1:Q):id(x,V?se+1:0,V?Q:se)}function zfe(x,C){var P=x;return P instanceof Pr&&(P=P.value()),dh(C,function(V,Q){return Q.func.apply(Q.thisArg,fh([V],Q.args))},P)}function Zj(x,C,P){var V=x.length;if(V<2)return V?Ky(x[0]):[];for(var Q=-1,se=qe(V);++Q<V;)for(var me=x[Q],Ce=-1;++Ce<V;)Ce!=Q&&(se[Q]=ZA(se[Q]||me,x[Ce],C,P));return Ky(Wa(se,1),C,P)}function Vfe(x,C,P){for(var V=-1,Q=x.length,se=C.length,me={};++V<Q;){var Ce=V<se?C[V]:n;P(me,x[V],Ce)}return me}function eU(x){return vo(x)?x:[]}function tU(x){return typeof x=="function"?x:rc}function Xy(x,C){return nr(x)?x:cU(x,C)?[x]:vde(Fi(x))}var hKe=wr;function Qy(x,C,P){var V=x.length;return P=P===n?V:P,!C&&P>=V?x:id(x,C,P)}var Hfe=eYe||function(x){return xn.clearTimeout(x)};function qfe(x,C){if(C)return x.slice();var P=x.length,V=dfe?dfe(P):new x.constructor(P);return x.copy(V),V}function nU(x){var C=new x.constructor(x.byteLength);return new oO(C).set(new oO(x)),C}function pKe(x,C){var P=C?nU(x.buffer):x.buffer;return new x.constructor(P,x.byteOffset,x.byteLength)}function mKe(x){var C=new x.constructor(x.source,rr.exec(x));return C.lastIndex=x.lastIndex,C}function gKe(x){return QA?is(QA.call(x)):{}}function Wfe(x,C){var P=C?nU(x.buffer):x.buffer;return new x.constructor(P,x.byteOffset,x.length)}function Gfe(x,C){if(x!==C){var P=x!==n,V=x===null,Q=x===x,se=sf(x),me=C!==n,Ce=C===null,Oe=C===C,ct=sf(C);if(!Ce&&!ct&&!se&&x>C||se&&me&&Oe&&!Ce&&!ct||V&&me&&Oe||!P&&Oe||!Q)return 1;if(!V&&!se&&!ct&&x<C||ct&&P&&Q&&!V&&!se||Ce&&P&&Q||!me&&Q||!Oe)return-1}return 0}function yKe(x,C,P){for(var V=-1,Q=x.criteria,se=C.criteria,me=Q.length,Ce=P.length;++V<me;){var Oe=Gfe(Q[V],se[V]);if(Oe){if(V>=Ce)return Oe;var ct=P[V];return Oe*(ct=="desc"?-1:1)}}return x.index-C.index}function Yfe(x,C,P,V){for(var Q=-1,se=x.length,me=P.length,Ce=-1,Oe=C.length,ct=Zo(se-me,0),dt=qe(Oe+ct),bt=!V;++Ce<Oe;)dt[Ce]=C[Ce];for(;++Q<me;)(bt||Q<se)&&(dt[P[Q]]=x[Q]);for(;ct--;)dt[Ce++]=x[Q++];return dt}function Kfe(x,C,P,V){for(var Q=-1,se=x.length,me=-1,Ce=P.length,Oe=-1,ct=C.length,dt=Zo(se-Ce,0),bt=qe(dt+ct),Ut=!V;++Q<dt;)bt[Q]=x[Q];for(var sn=Q;++Oe<ct;)bt[sn+Oe]=C[Oe];for(;++me<Ce;)(Ut||Q<se)&&(bt[sn+P[me]]=x[Q++]);return bt}function ec(x,C){var P=-1,V=x.length;for(C||(C=qe(V));++P<V;)C[P]=x[P];return C}function Bp(x,C,P,V){var Q=!P;P||(P={});for(var se=-1,me=C.length;++se<me;){var Ce=C[se],Oe=V?V(P[Ce],x[Ce],Ce,P,x):n;Oe===n&&(Oe=x[Ce]),Q?M0(P,Ce,Oe):JA(P,Ce,Oe)}return P}function vKe(x,C){return Bp(x,lU(x),C)}function bKe(x,C){return Bp(x,ude(x),C)}function wO(x,C){return function(P,V){var Q=nr(P)?rx:UYe,se=C?C():{};return Q(P,x,An(V,2),se)}}function OE(x){return wr(function(C,P){var V=-1,Q=P.length,se=Q>1?P[Q-1]:n,me=Q>2?P[2]:n;for(se=x.length>3&&typeof se=="function"?(Q--,se):n,me&&hl(P[0],P[1],me)&&(se=Q<3?n:se,Q=1),C=is(C);++V<Q;){var Ce=P[V];Ce&&x(C,Ce,V,se)}return C})}function Xfe(x,C){return function(P,V){if(P==null)return P;if(!tc(P))return x(P,V);for(var Q=P.length,se=C?Q:-1,me=is(P);(C?se--:++se<Q)&&V(me[se],se,me)!==!1;);return P}}function Qfe(x){return function(C,P,V){for(var Q=-1,se=is(C),me=V(C),Ce=me.length;Ce--;){var Oe=me[x?Ce:++Q];if(P(se[Oe],Oe,se)===!1)break}return C}}function xKe(x,C,P){var V=C&g,Q=rD(x);function se(){var me=this&&this!==xn&&this instanceof se?Q:x;return me.apply(V?P:this,arguments)}return se}function Jfe(x){return function(C){C=Fi(C);var P=AE(C)?hh(C):n,V=P?P[0]:C.charAt(0),Q=P?Qy(P,1).join(""):C.slice(1);return V[x]()+Q}}function FE(x){return function(C){return dh(Xde(Kde(C).replace(xE,"")),x,"")}}function rD(x){return function(){var C=arguments;switch(C.length){case 0:return new x;case 1:return new x(C[0]);case 2:return new x(C[0],C[1]);case 3:return new x(C[0],C[1],C[2]);case 4:return new x(C[0],C[1],C[2],C[3]);case 5:return new x(C[0],C[1],C[2],C[3],C[4]);case 6:return new x(C[0],C[1],C[2],C[3],C[4],C[5]);case 7:return new x(C[0],C[1],C[2],C[3],C[4],C[5],C[6])}var P=PE(x.prototype),V=x.apply(P,C);return Hs(V)?V:P}}function wKe(x,C,P){var V=rD(x);function Q(){for(var se=arguments.length,me=qe(se),Ce=se,Oe=ME(Q);Ce--;)me[Ce]=arguments[Ce];var ct=se<3&&me[0]!==Oe&&me[se-1]!==Oe?[]:Wy(me,Oe);if(se-=ct.length,se<P)return rde(x,C,_O,Q.placeholder,n,me,ct,n,n,P-se);var dt=this&&this!==xn&&this instanceof Q?V:x;return bu(dt,this,me)}return Q}function Zfe(x){return function(C,P,V){var Q=is(C);if(!tc(C)){var se=An(P,3);C=wa(C),P=function(Ce){return se(Q[Ce],Ce,Q)}}var me=x(C,P,V);return me>-1?Q[se?C[me]:me]:n}}function ede(x){return L0(function(C){var P=C.length,V=P,Q=nd.prototype.thru;for(x&&C.reverse();V--;){var se=C[V];if(typeof se!="function")throw new td(o);if(Q&&!me&&TO(se)=="wrapper")var me=new nd([],!0)}for(V=me?V:P;++V<P;){se=C[V];var Ce=TO(se),Oe=Ce=="wrapper"?aU(se):n;Oe&&fU(Oe[0])&&Oe[1]==(T|b|w|A)&&!Oe[4].length&&Oe[9]==1?me=me[TO(Oe[0])].apply(me,Oe[3]):me=se.length==1&&fU(se)?me[Ce]():me.thru(se)}return function(){var ct=arguments,dt=ct[0];if(me&&ct.length==1&&nr(dt))return me.plant(dt).value();for(var bt=0,Ut=P?C[bt].apply(this,ct):dt;++bt<P;)Ut=C[bt].call(this,Ut);return Ut}})}function _O(x,C,P,V,Q,se,me,Ce,Oe,ct){var dt=C&T,bt=C&g,Ut=C&y,sn=C&(b|_),In=C&k,yr=Ut?n:rD(x);function kn(){for(var Ir=arguments.length,zr=qe(Ir),of=Ir;of--;)zr[of]=arguments[of];if(sn)var pl=ME(kn),af=WA(zr,pl);if(V&&(zr=Yfe(zr,V,Q,sn)),se&&(zr=Kfe(zr,se,me,sn)),Ir-=af,sn&&Ir<ct){var bo=Wy(zr,pl);return rde(x,C,_O,kn.placeholder,P,zr,bo,Ce,Oe,ct-Ir)}var gh=bt?P:this,z0=Ut?gh[x]:x;return Ir=zr.length,Ce?zr=UKe(zr,Ce):In&&Ir>1&&zr.reverse(),dt&&Oe<Ir&&(zr.length=Oe),this&&this!==xn&&this instanceof kn&&(z0=yr||rD(z0)),z0.apply(gh,zr)}return kn}function tde(x,C){return function(P,V){return KYe(P,x,C(V),{})}}function EO(x,C){return function(P,V){var Q;if(P===n&&V===n)return C;if(P!==n&&(Q=P),V!==n){if(Q===n)return V;typeof P=="string"||typeof V=="string"?(P=rf(P),V=rf(V)):(P=jfe(P),V=jfe(V)),Q=x(P,V)}return Q}}function rU(x){return L0(function(C){return C=rs(C,Oi(An())),wr(function(P){var V=this;return x(C,function(Q){return bu(Q,V,P)})})})}function SO(x,C){C=C===n?" ":rf(C);var P=C.length;if(P<2)return P?Xj(C,x):C;var V=Xj(C,cO(x/DE(C)));return AE(C)?Qy(hh(V),0,x).join(""):V.slice(0,x)}function _Ke(x,C,P,V){var Q=C&g,se=rD(x);function me(){for(var Ce=-1,Oe=arguments.length,ct=-1,dt=V.length,bt=qe(dt+Oe),Ut=this&&this!==xn&&this instanceof me?se:x;++ct<dt;)bt[ct]=V[ct];for(;Oe--;)bt[ct++]=arguments[++Ce];return bu(Ut,Q?P:this,bt)}return me}function nde(x){return function(C,P,V){return V&&typeof V!="number"&&hl(C,P,V)&&(P=V=n),C=U0(C),P===n?(P=C,C=0):P=U0(P),V=V===n?C<P?1:-1:U0(V),aKe(C,P,V,x)}}function CO(x){return function(C,P){return typeof C=="string"&&typeof P=="string"||(C=od(C),P=od(P)),x(C,P)}}function rde(x,C,P,V,Q,se,me,Ce,Oe,ct){var dt=C&b,bt=dt?me:n,Ut=dt?n:me,sn=dt?se:n,In=dt?n:se;C|=dt?w:S,C&=~(dt?S:w),C&v||(C&=-4);var yr=[x,C,Q,sn,bt,In,Ut,Ce,Oe,ct],kn=P.apply(n,yr);return fU(x)&&mde(kn,yr),kn.placeholder=V,gde(kn,x,C)}function iU(x){var C=Jo[x];return function(P,V){if(P=od(P),V=V==null?0:wu(fr(V),292),V&&gfe(P)){var Q=(Fi(P)+"e").split("e"),se=C(Q[0]+"e"+(+Q[1]+V));return Q=(Fi(se)+"e").split("e"),+(Q[0]+"e"+(+Q[1]-V))}return C(P)}}var EKe=RE&&1/eO(new RE([,-0]))[1]==G?function(x){return new RE(x)}:TU;function ide(x){return function(C){var P=_u(C);return P==Ke?Oj(C):P==Mt?jGe(C):Qo(C,x(C))}}function $0(x,C,P,V,Q,se,me,Ce){var Oe=C&y;if(!Oe&&typeof x!="function")throw new td(o);var ct=V?V.length:0;if(ct||(C&=-97,V=Q=n),me=me===n?me:Zo(fr(me),0),Ce=Ce===n?Ce:fr(Ce),ct-=Q?Q.length:0,C&S){var dt=V,bt=Q;V=Q=n}var Ut=Oe?n:aU(x),sn=[x,C,P,V,Q,dt,bt,se,me,Ce];if(Ut&&LKe(sn,Ut),x=sn[0],C=sn[1],P=sn[2],V=sn[3],Q=sn[4],Ce=sn[9]=sn[9]===n?Oe?0:x.length:Zo(sn[9]-ct,0),!Ce&&C&(b|_)&&(C&=-25),!C||C==g)var In=xKe(x,C,P);else C==b||C==_?In=wKe(x,C,Ce):(C==w||C==(g|w))&&!Q.length?In=_Ke(x,C,P,V):In=_O.apply(n,sn);var yr=Ut?Lfe:mde;return gde(yr(In,sn),x,C)}function sde(x,C,P,V){return x===n||mh(x,kE[P])&&!Ui.call(V,P)?C:x}function ode(x,C,P,V,Q,se){return Hs(x)&&Hs(C)&&(se.set(C,x),vO(x,C,n,ode,se),se.delete(C)),x}function SKe(x){return oD(x)?n:x}function ade(x,C,P,V,Q,se){var me=P&p,Ce=x.length,Oe=C.length;if(Ce!=Oe&&!(me&&Oe>Ce))return!1;var ct=se.get(x),dt=se.get(C);if(ct&&dt)return ct==C&&dt==x;var bt=-1,Ut=!0,sn=P&m?new lx:n;for(se.set(x,C),se.set(C,x);++bt<Ce;){var In=x[bt],yr=C[bt];if(V)var kn=me?V(yr,In,bt,C,x,se):V(In,yr,bt,x,C,se);if(kn!==n){if(kn)continue;Ut=!1;break}if(sn){if(!CE(C,function(Ir,zr){if(!ed(sn,zr)&&(In===Ir||Q(In,Ir,P,V,se)))return sn.push(zr)})){Ut=!1;break}}else if(!(In===yr||Q(In,yr,P,V,se))){Ut=!1;break}}return se.delete(x),se.delete(C),Ut}function CKe(x,C,P,V,Q,se,me){switch(P){case Ee:if(x.byteLength!=C.byteLength||x.byteOffset!=C.byteOffset)return!1;x=x.buffer,C=C.buffer;case he:return!(x.byteLength!=C.byteLength||!se(new oO(x),new oO(C)));case pe:case Te:case Ct:return mh(+x,+C);case it:return x.name==C.name&&x.message==C.message;case _t:case st:return x==C+"";case Ke:var Ce=Oj;case Mt:var Oe=V&p;if(Ce||(Ce=eO),x.size!=C.size&&!Oe)return!1;var ct=me.get(x);if(ct)return ct==C;V|=m,me.set(x,C);var dt=ade(Ce(x),Ce(C),V,Q,se,me);return me.delete(x),dt;case X:if(QA)return QA.call(x)==QA.call(C)}return!1}function TKe(x,C,P,V,Q,se){var me=P&p,Ce=sU(x),Oe=Ce.length,ct=sU(C),dt=ct.length;if(Oe!=dt&&!me)return!1;for(var bt=Oe;bt--;){var Ut=Ce[bt];if(!(me?Ut in C:Ui.call(C,Ut)))return!1}var sn=se.get(x),In=se.get(C);if(sn&&In)return sn==C&&In==x;var yr=!0;se.set(x,C),se.set(C,x);for(var kn=me;++bt<Oe;){Ut=Ce[bt];var Ir=x[Ut],zr=C[Ut];if(V)var of=me?V(zr,Ir,Ut,C,x,se):V(Ir,zr,Ut,x,C,se);if(!(of===n?Ir===zr||Q(Ir,zr,P,V,se):of)){yr=!1;break}kn||(kn=Ut=="constructor")}if(yr&&!kn){var pl=x.constructor,af=C.constructor;pl!=af&&"constructor"in x&&"constructor"in C&&!(typeof pl=="function"&&pl instanceof pl&&typeof af=="function"&&af instanceof af)&&(yr=!1)}return se.delete(x),se.delete(C),yr}function L0(x){return hU(hde(x,n,_de),x+"")}function sU(x){return Afe(x,wa,lU)}function oU(x){return Afe(x,nc,ude)}var aU=dO?function(x){return dO.get(x)}:TU;function TO(x){for(var C=x.name+"",P=NE[C],V=Ui.call(NE,C)?P.length:0;V--;){var Q=P[V],se=Q.func;if(se==null||se==x)return Q.name}return C}function ME(x){var C=Ui.call(ee,"placeholder")?ee:x;return C.placeholder}function An(){var x=ee.iteratee||SU;return x=x===SU?kfe:x,arguments.length?x(arguments[0],arguments[1]):x}function AO(x,C){var P=x.__data__;return OKe(C)?P[typeof C=="string"?"string":"hash"]:P.map}function uU(x){for(var C=wa(x),P=C.length;P--;){var V=C[P],Q=x[V];C[P]=[V,Q,fde(Q)]}return C}function dx(x,C){var P=$Ge(x,C);return Ife(P)?P:n}function AKe(x){var C=Ui.call(x,ax),P=x[ax];try{x[ax]=n;var V=!0}catch{}var Q=iO.call(x);return V&&(C?x[ax]=P:delete x[ax]),Q}var lU=Mj?function(x){return x==null?[]:(x=is(x),Zf(Mj(x),function(C){return pfe.call(x,C)}))}:AU,ude=Mj?function(x){for(var C=[];x;)fh(C,lU(x)),x=aO(x);return C}:AU,_u=dl;($j&&_u(new $j(new ArrayBuffer(1)))!=Ee||YA&&_u(new YA)!=Ke||Lj&&_u(Lj.resolve())!=Ve||RE&&_u(new RE)!=Mt||KA&&_u(new KA)!=we)&&(_u=function(x){var C=dl(x),P=C==Ie?x.constructor:n,V=P?hx(P):"";if(V)switch(V){case lYe:return Ee;case cYe:return Ke;case fYe:return Ve;case dYe:return Mt;case hYe:return we}return C});function DKe(x,C,P){for(var V=-1,Q=P.length;++V<Q;){var se=P[V],me=se.size;switch(se.type){case"drop":x+=me;break;case"dropRight":C-=me;break;case"take":C=wu(C,x+me);break;case"takeRight":x=Zo(x,C-me);break}}return{start:x,end:C}}function IKe(x){var C=x.match(_e);return C?C[1].split(Ue):[]}function lde(x,C,P){C=Xy(C,x);for(var V=-1,Q=C.length,se=!1;++V<Q;){var me=jp(C[V]);if(!(se=x!=null&&P(x,me)))break;x=x[me]}return se||++V!=Q?se:(Q=x==null?0:x.length,!!Q&&OO(Q)&&B0(me,Q)&&(nr(x)||px(x)))}function kKe(x){var C=x.length,P=new x.constructor(C);return C&&typeof x[0]=="string"&&Ui.call(x,"index")&&(P.index=x.index,P.input=x.input),P}function cde(x){return typeof x.constructor=="function"&&!iD(x)?PE(aO(x)):{}}function RKe(x,C,P){var V=x.constructor;switch(C){case he:return nU(x);case pe:case Te:return new V(+x);case Ee:return pKe(x,P);case $e:case Be:case lt:case Je:case Xt:case fn:case Wt:case an:case Sn:return Wfe(x,P);case Ke:return new V;case Ct:case st:return new V(x);case _t:return mKe(x);case Mt:return new V;case X:return gKe(x)}}function NKe(x,C){var P=C.length;if(!P)return x;var V=P-1;return C[V]=(P>1?"& ":"")+C[V],C=C.join(P>2?", ":" "),x.replace(ce,`{
/* [wrapped with `+C+`] */
`)}function PKe(x){return nr(x)||px(x)||!!(mfe&&x&&x[mfe])}function B0(x,C){var P=typeof x;return C=C??Y,!!C&&(P=="number"||P!="symbol"&&dn.test(x))&&x>-1&&x%1==0&&x<C}function hl(x,C,P){if(!Hs(P))return!1;var V=typeof C;return(V=="number"?tc(P)&&B0(C,P.length):V=="string"&&C in P)?mh(P[C],x):!1}function cU(x,C){if(nr(x))return!1;var P=typeof x;return P=="number"||P=="symbol"||P=="boolean"||x==null||sf(x)?!0:Ri.test(x)||!Rr.test(x)||C!=null&&x in is(C)}function OKe(x){var C=typeof x;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?x!=="__proto__":x===null}function fU(x){var C=TO(x),P=ee[C];if(typeof P!="function"||!(C in Pr.prototype))return!1;if(x===P)return!0;var V=aU(P);return!!V&&x===V[0]}function FKe(x){return!!ffe&&ffe in x}var MKe=nO?j0:DU;function iD(x){var C=x&&x.constructor,P=typeof C=="function"&&C.prototype||kE;return x===P}function fde(x){return x===x&&!Hs(x)}function dde(x,C){return function(P){return P==null?!1:P[x]===C&&(C!==n||x in is(P))}}function $Ke(x){var C=NO(x,function(V){return P.size===l&&P.clear(),V}),P=C.cache;return C}function LKe(x,C){var P=x[1],V=C[1],Q=P|V,se=Q<(g|y|T),me=V==T&&P==b||V==T&&P==A&&x[7].length<=C[8]||V==(T|A)&&C[7].length<=C[8]&&P==b;if(!(se||me))return x;V&g&&(x[2]=C[2],Q|=P&g?0:v);var Ce=C[3];if(Ce){var Oe=x[3];x[3]=Oe?Yfe(Oe,Ce,C[4]):Ce,x[4]=Oe?Wy(x[3],c):C[4]}return Ce=C[5],Ce&&(Oe=x[5],x[5]=Oe?Kfe(Oe,Ce,C[6]):Ce,x[6]=Oe?Wy(x[5],c):C[6]),Ce=C[7],Ce&&(x[7]=Ce),V&T&&(x[8]=x[8]==null?C[8]:wu(x[8],C[8])),x[9]==null&&(x[9]=C[9]),x[0]=C[0],x[1]=Q,x}function BKe(x){var C=[];if(x!=null)for(var P in is(x))C.push(P);return C}function jKe(x){return iO.call(x)}function hde(x,C,P){return C=Zo(C===n?x.length-1:C,0),function(){for(var V=arguments,Q=-1,se=Zo(V.length-C,0),me=qe(se);++Q<se;)me[Q]=V[C+Q];Q=-1;for(var Ce=qe(C+1);++Q<C;)Ce[Q]=V[Q];return Ce[C]=P(me),bu(x,this,Ce)}}function pde(x,C){return C.length<2?x:fx(x,id(C,0,-1))}function UKe(x,C){for(var P=x.length,V=wu(C.length,P),Q=ec(x);V--;){var se=C[V];x[V]=B0(se,P)?Q[se]:n}return x}function dU(x,C){if(!(C==="constructor"&&typeof x[C]=="function")&&C!="__proto__")return x[C]}var mde=yde(Lfe),sD=nYe||function(x,C){return xn.setTimeout(x,C)},hU=yde(cKe);function gde(x,C,P){var V=C+"";return hU(x,NKe(V,zKe(IKe(V),P)))}function yde(x){var C=0,P=0;return function(){var V=oYe(),Q=O-(V-P);if(P=V,Q>0){if(++C>=F)return arguments[0]}else C=0;return x.apply(n,arguments)}}function DO(x,C){var P=-1,V=x.length,Q=V-1;for(C=C===n?V:C;++P<C;){var se=Kj(P,Q),me=x[se];x[se]=x[P],x[P]=me}return x.length=C,x}var vde=$Ke(function(x){var C=[];return x.charCodeAt(0)===46&&C.push(""),x.replace(hi,function(P,V,Q,se){C.push(Q?se.replace(Ht,"$1"):V||P)}),C});function jp(x){if(typeof x=="string"||sf(x))return x;var C=x+"";return C=="0"&&1/x==-1/0?"-0":C}function hx(x){if(x!=null){try{return rO.call(x)}catch{}try{return x+""}catch{}}return""}function zKe(x,C){return fl(q,function(P){var V="_."+P[0];C&P[1]&&!ix(x,V)&&x.push(V)}),x.sort()}function bde(x){if(x instanceof Pr)return x.clone();var C=new nd(x.__wrapped__,x.__chain__);return C.__actions__=ec(x.__actions__),C.__index__=x.__index__,C.__values__=x.__values__,C}function VKe(x,C,P){(P?hl(x,C,P):C===n)?C=1:C=Zo(fr(C),0);var V=x==null?0:x.length;if(!V||C<1)return[];for(var Q=0,se=0,me=qe(cO(V/C));Q<V;)me[se++]=id(x,Q,Q+=C);return me}function HKe(x){for(var C=-1,P=x==null?0:x.length,V=0,Q=[];++C<P;){var se=x[C];se&&(Q[V++]=se)}return Q}function qKe(){var x=arguments.length;if(!x)return[];for(var C=qe(x-1),P=arguments[0],V=x;V--;)C[V-1]=arguments[V];return fh(nr(P)?ec(P):[P],Wa(C,1))}var WKe=wr(function(x,C){return vo(x)?ZA(x,Wa(C,1,vo,!0)):[]}),GKe=wr(function(x,C){var P=sd(C);return vo(P)&&(P=n),vo(x)?ZA(x,Wa(C,1,vo,!0),An(P,2)):[]}),YKe=wr(function(x,C){var P=sd(C);return vo(P)&&(P=n),vo(x)?ZA(x,Wa(C,1,vo,!0),n,P):[]});function KKe(x,C,P){var V=x==null?0:x.length;return V?(C=P||C===n?1:fr(C),id(x,C<0?0:C,V)):[]}function XKe(x,C,P){var V=x==null?0:x.length;return V?(C=P||C===n?1:fr(C),C=V-C,id(x,0,C<0?0:C)):[]}function QKe(x,C){return x&&x.length?xO(x,An(C,3),!0,!0):[]}function JKe(x,C){return x&&x.length?xO(x,An(C,3),!0):[]}function ZKe(x,C,P,V){var Q=x==null?0:x.length;return Q?(P&&typeof P!="number"&&hl(x,C,P)&&(P=0,V=Q),qYe(x,C,P,V)):[]}function xde(x,C,P){var V=x==null?0:x.length;if(!V)return-1;var Q=P==null?0:fr(P);return Q<0&&(Q=Zo(V+Q,0)),sx(x,An(C,3),Q)}function wde(x,C,P){var V=x==null?0:x.length;if(!V)return-1;var Q=V-1;return P!==n&&(Q=fr(P),Q=P<0?Zo(V+Q,0):wu(Q,V-1)),sx(x,An(C,3),Q,!0)}function _de(x){var C=x==null?0:x.length;return C?Wa(x,1):[]}function eXe(x){var C=x==null?0:x.length;return C?Wa(x,G):[]}function tXe(x,C){var P=x==null?0:x.length;return P?(C=C===n?1:fr(C),Wa(x,C)):[]}function nXe(x){for(var C=-1,P=x==null?0:x.length,V={};++C<P;){var Q=x[C];V[Q[0]]=Q[1]}return V}function Ede(x){return x&&x.length?x[0]:n}function rXe(x,C,P){var V=x==null?0:x.length;if(!V)return-1;var Q=P==null?0:fr(P);return Q<0&&(Q=Zo(V+Q,0)),P0(x,C,Q)}function iXe(x){var C=x==null?0:x.length;return C?id(x,0,-1):[]}var sXe=wr(function(x){var C=rs(x,eU);return C.length&&C[0]===x[0]?Hj(C):[]}),oXe=wr(function(x){var C=sd(x),P=rs(x,eU);return C===sd(P)?C=n:P.pop(),P.length&&P[0]===x[0]?Hj(P,An(C,2)):[]}),aXe=wr(function(x){var C=sd(x),P=rs(x,eU);return C=typeof C=="function"?C:n,C&&P.pop(),P.length&&P[0]===x[0]?Hj(P,n,C):[]});function uXe(x,C){return x==null?"":iYe.call(x,C)}function sd(x){var C=x==null?0:x.length;return C?x[C-1]:n}function lXe(x,C,P){var V=x==null?0:x.length;if(!V)return-1;var Q=V;return P!==n&&(Q=fr(P),Q=Q<0?Zo(V+Q,0):wu(Q,V-1)),C===C?zGe(x,C,Q):sx(x,D,Q,!0)}function cXe(x,C){return x&&x.length?Ofe(x,fr(C)):n}var fXe=wr(Sde);function Sde(x,C){return x&&x.length&&C&&C.length?Yj(x,C):x}function dXe(x,C,P){return x&&x.length&&C&&C.length?Yj(x,C,An(P,2)):x}function hXe(x,C,P){return x&&x.length&&C&&C.length?Yj(x,C,n,P):x}var pXe=L0(function(x,C){var P=x==null?0:x.length,V=jj(x,C);return $fe(x,rs(C,function(Q){return B0(Q,P)?+Q:Q}).sort(Gfe)),V});function mXe(x,C){var P=[];if(!(x&&x.length))return P;var V=-1,Q=[],se=x.length;for(C=An(C,3);++V<se;){var me=x[V];C(me,V,x)&&(P.push(me),Q.push(V))}return $fe(x,Q),P}function pU(x){return x==null?x:uYe.call(x)}function gXe(x,C,P){var V=x==null?0:x.length;return V?(P&&typeof P!="number"&&hl(x,C,P)?(C=0,P=V):(C=C==null?0:fr(C),P=P===n?V:fr(P)),id(x,C,P)):[]}function yXe(x,C){return bO(x,C)}function vXe(x,C,P){return Qj(x,C,An(P,2))}function bXe(x,C){var P=x==null?0:x.length;if(P){var V=bO(x,C);if(V<P&&mh(x[V],C))return V}return-1}function xXe(x,C){return bO(x,C,!0)}function wXe(x,C,P){return Qj(x,C,An(P,2),!0)}function _Xe(x,C){var P=x==null?0:x.length;if(P){var V=bO(x,C,!0)-1;if(mh(x[V],C))return V}return-1}function EXe(x){return x&&x.length?Bfe(x):[]}function SXe(x,C){return x&&x.length?Bfe(x,An(C,2)):[]}function CXe(x){var C=x==null?0:x.length;return C?id(x,1,C):[]}function TXe(x,C,P){return x&&x.length?(C=P||C===n?1:fr(C),id(x,0,C<0?0:C)):[]}function AXe(x,C,P){var V=x==null?0:x.length;return V?(C=P||C===n?1:fr(C),C=V-C,id(x,C<0?0:C,V)):[]}function DXe(x,C){return x&&x.length?xO(x,An(C,3),!1,!0):[]}function IXe(x,C){return x&&x.length?xO(x,An(C,3)):[]}var kXe=wr(function(x){return Ky(Wa(x,1,vo,!0))}),RXe=wr(function(x){var C=sd(x);return vo(C)&&(C=n),Ky(Wa(x,1,vo,!0),An(C,2))}),NXe=wr(function(x){var C=sd(x);return C=typeof C=="function"?C:n,Ky(Wa(x,1,vo,!0),n,C)});function PXe(x){return x&&x.length?Ky(x):[]}function OXe(x,C){return x&&x.length?Ky(x,An(C,2)):[]}function FXe(x,C){return C=typeof C=="function"?C:n,x&&x.length?Ky(x,n,C):[]}function mU(x){if(!(x&&x.length))return[];var C=0;return x=Zf(x,function(P){if(vo(P))return C=Zo(P.length,C),!0}),Si(C,function(P){return rs(x,K(P))})}function Cde(x,C){if(!(x&&x.length))return[];var P=mU(x);return C==null?P:rs(P,function(V){return bu(C,n,V)})}var MXe=wr(function(x,C){return vo(x)?ZA(x,C):[]}),$Xe=wr(function(x){return Zj(Zf(x,vo))}),LXe=wr(function(x){var C=sd(x);return vo(C)&&(C=n),Zj(Zf(x,vo),An(C,2))}),BXe=wr(function(x){var C=sd(x);return C=typeof C=="function"?C:n,Zj(Zf(x,vo),n,C)}),jXe=wr(mU);function UXe(x,C){return Vfe(x||[],C||[],JA)}function zXe(x,C){return Vfe(x||[],C||[],nD)}var VXe=wr(function(x){var C=x.length,P=C>1?x[C-1]:n;return P=typeof P=="function"?(x.pop(),P):n,Cde(x,P)});function Tde(x){var C=ee(x);return C.__chain__=!0,C}function HXe(x,C){return C(x),x}function IO(x,C){return C(x)}var qXe=L0(function(x){var C=x.length,P=C?x[0]:0,V=this.__wrapped__,Q=function(se){return jj(se,x)};return C>1||this.__actions__.length||!(V instanceof Pr)||!B0(P)?this.thru(Q):(V=V.slice(P,+P+(C?1:0)),V.__actions__.push({func:IO,args:[Q],thisArg:n}),new nd(V,this.__chain__).thru(function(se){return C&&!se.length&&se.push(n),se}))});function WXe(){return Tde(this)}function GXe(){return new nd(this.value(),this.__chain__)}function YXe(){this.__values__===n&&(this.__values__=jde(this.value()));var x=this.__index__>=this.__values__.length,C=x?n:this.__values__[this.__index__++];return{done:x,value:C}}function KXe(){return this}function XXe(x){for(var C,P=this;P instanceof pO;){var V=bde(P);V.__index__=0,V.__values__=n,C?Q.__wrapped__=V:C=V;var Q=V;P=P.__wrapped__}return Q.__wrapped__=x,C}function QXe(){var x=this.__wrapped__;if(x instanceof Pr){var C=x;return this.__actions__.length&&(C=new Pr(this)),C=C.reverse(),C.__actions__.push({func:IO,args:[pU],thisArg:n}),new nd(C,this.__chain__)}return this.thru(pU)}function JXe(){return zfe(this.__wrapped__,this.__actions__)}var ZXe=wO(function(x,C,P){Ui.call(x,P)?++x[P]:M0(x,P,1)});function eQe(x,C,P){var V=nr(x)?SE:HYe;return P&&hl(x,C,P)&&(C=n),V(x,An(C,3))}function tQe(x,C){var P=nr(x)?Zf:Cfe;return P(x,An(C,3))}var nQe=Zfe(xde),rQe=Zfe(wde);function iQe(x,C){return Wa(kO(x,C),1)}function sQe(x,C){return Wa(kO(x,C),G)}function oQe(x,C,P){return P=P===n?1:fr(P),Wa(kO(x,C),P)}function Ade(x,C){var P=nr(x)?fl:Yy;return P(x,An(C,3))}function Dde(x,C){var P=nr(x)?XP:Sfe;return P(x,An(C,3))}var aQe=wO(function(x,C,P){Ui.call(x,P)?x[P].push(C):M0(x,P,[C])});function uQe(x,C,P,V){x=tc(x)?x:LE(x),P=P&&!V?fr(P):0;var Q=x.length;return P<0&&(P=Zo(Q+P,0)),FO(x)?P<=Q&&x.indexOf(C,P)>-1:!!Q&&P0(x,C,P)>-1}var lQe=wr(function(x,C,P){var V=-1,Q=typeof C=="function",se=tc(x)?qe(x.length):[];return Yy(x,function(me){se[++V]=Q?bu(C,me,P):eD(me,C,P)}),se}),cQe=wO(function(x,C,P){M0(x,P,C)});function kO(x,C){var P=nr(x)?rs:Rfe;return P(x,An(C,3))}function fQe(x,C,P,V){return x==null?[]:(nr(C)||(C=C==null?[]:[C]),P=V?n:P,nr(P)||(P=P==null?[]:[P]),Ffe(x,C,P))}var dQe=wO(function(x,C,P){x[P?0:1].push(C)},function(){return[[],[]]});function hQe(x,C,P){var V=nr(x)?dh:Me,Q=arguments.length<3;return V(x,An(C,4),P,Q,Yy)}function pQe(x,C,P){var V=nr(x)?QP:Me,Q=arguments.length<3;return V(x,An(C,4),P,Q,Sfe)}function mQe(x,C){var P=nr(x)?Zf:Cfe;return P(x,PO(An(C,3)))}function gQe(x){var C=nr(x)?xfe:uKe;return C(x)}function yQe(x,C,P){(P?hl(x,C,P):C===n)?C=1:C=fr(C);var V=nr(x)?BYe:lKe;return V(x,C)}function vQe(x){var C=nr(x)?jYe:fKe;return C(x)}function bQe(x){if(x==null)return 0;if(tc(x))return FO(x)?DE(x):x.length;var C=_u(x);return C==Ke||C==Mt?x.size:Wj(x).length}function xQe(x,C,P){var V=nr(x)?CE:dKe;return P&&hl(x,C,P)&&(C=n),V(x,An(C,3))}var wQe=wr(function(x,C){if(x==null)return[];var P=C.length;return P>1&&hl(x,C[0],C[1])?C=[]:P>2&&hl(C[0],C[1],C[2])&&(C=[C[0]]),Ffe(x,Wa(C,1),[])}),RO=tYe||function(){return xn.Date.now()};function _Qe(x,C){if(typeof C!="function")throw new td(o);return x=fr(x),function(){if(--x<1)return C.apply(this,arguments)}}function Ide(x,C,P){return C=P?n:C,C=x&&C==null?x.length:C,$0(x,T,n,n,n,n,C)}function kde(x,C){var P;if(typeof C!="function")throw new td(o);return x=fr(x),function(){return--x>0&&(P=C.apply(this,arguments)),x<=1&&(C=n),P}}var gU=wr(function(x,C,P){var V=g;if(P.length){var Q=Wy(P,ME(gU));V|=w}return $0(x,V,C,P,Q)}),Rde=wr(function(x,C,P){var V=g|y;if(P.length){var Q=Wy(P,ME(Rde));V|=w}return $0(C,V,x,P,Q)});function Nde(x,C,P){C=P?n:C;var V=$0(x,b,n,n,n,n,n,C);return V.placeholder=Nde.placeholder,V}function Pde(x,C,P){C=P?n:C;var V=$0(x,_,n,n,n,n,n,C);return V.placeholder=Pde.placeholder,V}function Ode(x,C,P){var V,Q,se,me,Ce,Oe,ct=0,dt=!1,bt=!1,Ut=!0;if(typeof x!="function")throw new td(o);C=od(C)||0,Hs(P)&&(dt=!!P.leading,bt="maxWait"in P,se=bt?Zo(od(P.maxWait)||0,C):se,Ut="trailing"in P?!!P.trailing:Ut);function sn(bo){var gh=V,z0=Q;return V=Q=n,ct=bo,me=x.apply(z0,gh),me}function In(bo){return ct=bo,Ce=sD(Ir,C),dt?sn(bo):me}function yr(bo){var gh=bo-Oe,z0=bo-ct,Zde=C-gh;return bt?wu(Zde,se-z0):Zde}function kn(bo){var gh=bo-Oe,z0=bo-ct;return Oe===n||gh>=C||gh<0||bt&&z0>=se}function Ir(){var bo=RO();if(kn(bo))return zr(bo);Ce=sD(Ir,yr(bo))}function zr(bo){return Ce=n,Ut&&V?sn(bo):(V=Q=n,me)}function of(){Ce!==n&&Hfe(Ce),ct=0,V=Oe=Q=Ce=n}function pl(){return Ce===n?me:zr(RO())}function af(){var bo=RO(),gh=kn(bo);if(V=arguments,Q=this,Oe=bo,gh){if(Ce===n)return In(Oe);if(bt)return Hfe(Ce),Ce=sD(Ir,C),sn(Oe)}return Ce===n&&(Ce=sD(Ir,C)),me}return af.cancel=of,af.flush=pl,af}var EQe=wr(function(x,C){return Efe(x,1,C)}),SQe=wr(function(x,C,P){return Efe(x,od(C)||0,P)});function CQe(x){return $0(x,k)}function NO(x,C){if(typeof x!="function"||C!=null&&typeof C!="function")throw new td(o);var P=function(){var V=arguments,Q=C?C.apply(this,V):V[0],se=P.cache;if(se.has(Q))return se.get(Q);var me=x.apply(this,V);return P.cache=se.set(Q,me)||se,me};return P.cache=new(NO.Cache||F0),P}NO.Cache=F0;function PO(x){if(typeof x!="function")throw new td(o);return function(){var C=arguments;switch(C.length){case 0:return!x.call(this);case 1:return!x.call(this,C[0]);case 2:return!x.call(this,C[0],C[1]);case 3:return!x.call(this,C[0],C[1],C[2])}return!x.apply(this,C)}}function TQe(x){return kde(2,x)}var AQe=hKe(function(x,C){C=C.length==1&&nr(C[0])?rs(C[0],Oi(An())):rs(Wa(C,1),Oi(An()));var P=C.length;return wr(function(V){for(var Q=-1,se=wu(V.length,P);++Q<se;)V[Q]=C[Q].call(this,V[Q]);return bu(x,this,V)})}),yU=wr(function(x,C){var P=Wy(C,ME(yU));return $0(x,w,n,C,P)}),Fde=wr(function(x,C){var P=Wy(C,ME(Fde));return $0(x,S,n,C,P)}),DQe=L0(function(x,C){return $0(x,A,n,n,n,C)});function IQe(x,C){if(typeof x!="function")throw new td(o);return C=C===n?C:fr(C),wr(x,C)}function kQe(x,C){if(typeof x!="function")throw new td(o);return C=C==null?0:Zo(fr(C),0),wr(function(P){var V=P[C],Q=Qy(P,0,C);return V&&fh(Q,V),bu(x,this,Q)})}function RQe(x,C,P){var V=!0,Q=!0;if(typeof x!="function")throw new td(o);return Hs(P)&&(V="leading"in P?!!P.leading:V,Q="trailing"in P?!!P.trailing:Q),Ode(x,C,{leading:V,maxWait:C,trailing:Q})}function NQe(x){return Ide(x,1)}function PQe(x,C){return yU(tU(C),x)}function OQe(){if(!arguments.length)return[];var x=arguments[0];return nr(x)?x:[x]}function FQe(x){return rd(x,h)}function MQe(x,C){return C=typeof C=="function"?C:n,rd(x,h,C)}function $Qe(x){return rd(x,f|h)}function LQe(x,C){return C=typeof C=="function"?C:n,rd(x,f|h,C)}function BQe(x,C){return C==null||_fe(x,C,wa(C))}function mh(x,C){return x===C||x!==x&&C!==C}var jQe=CO(Vj),UQe=CO(function(x,C){return x>=C}),px=Dfe(function(){return arguments}())?Dfe:function(x){return eo(x)&&Ui.call(x,"callee")&&!pfe.call(x,"callee")},nr=qe.isArray,zQe=R0?Oi(R0):XYe;function tc(x){return x!=null&&OO(x.length)&&!j0(x)}function vo(x){return eo(x)&&tc(x)}function VQe(x){return x===!0||x===!1||eo(x)&&dl(x)==pe}var Jy=rYe||DU,HQe=N0?Oi(N0):QYe;function qQe(x){return eo(x)&&x.nodeType===1&&!oD(x)}function WQe(x){if(x==null)return!0;if(tc(x)&&(nr(x)||typeof x=="string"||typeof x.splice=="function"||Jy(x)||$E(x)||px(x)))return!x.length;var C=_u(x);if(C==Ke||C==Mt)return!x.size;if(iD(x))return!Wj(x).length;for(var P in x)if(Ui.call(x,P))return!1;return!0}function GQe(x,C){return tD(x,C)}function YQe(x,C,P){P=typeof P=="function"?P:n;var V=P?P(x,C):n;return V===n?tD(x,C,n,P):!!V}function vU(x){if(!eo(x))return!1;var C=dl(x);return C==it||C==ke||typeof x.message=="string"&&typeof x.name=="string"&&!oD(x)}function KQe(x){return typeof x=="number"&&gfe(x)}function j0(x){if(!Hs(x))return!1;var C=dl(x);return C==Re||C==ut||C==xe||C==ft}function Mde(x){return typeof x=="number"&&x==fr(x)}function OO(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=Y}function Hs(x){var C=typeof x;return x!=null&&(C=="object"||C=="function")}function eo(x){return x!=null&&typeof x=="object"}var $de=tx?Oi(tx):ZYe;function XQe(x,C){return x===C||qj(x,C,uU(C))}function QQe(x,C,P){return P=typeof P=="function"?P:n,qj(x,C,uU(C),P)}function JQe(x){return Lde(x)&&x!=+x}function ZQe(x){if(MKe(x))throw new Zn(s);return Ife(x)}function eJe(x){return x===null}function tJe(x){return x==null}function Lde(x){return typeof x=="number"||eo(x)&&dl(x)==Ct}function oD(x){if(!eo(x)||dl(x)!=Ie)return!1;var C=aO(x);if(C===null)return!0;var P=Ui.call(C,"constructor")&&C.constructor;return typeof P=="function"&&P instanceof P&&rO.call(P)==QGe}var bU=qA?Oi(qA):eKe;function nJe(x){return Mde(x)&&x>=-9007199254740991&&x<=Y}var Bde=nx?Oi(nx):tKe;function FO(x){return typeof x=="string"||!nr(x)&&eo(x)&&dl(x)==st}function sf(x){return typeof x=="symbol"||eo(x)&&dl(x)==X}var $E=KP?Oi(KP):nKe;function rJe(x){return x===n}function iJe(x){return eo(x)&&_u(x)==we}function sJe(x){return eo(x)&&dl(x)==ae}var oJe=CO(Gj),aJe=CO(function(x,C){return x<=C});function jde(x){if(!x)return[];if(tc(x))return FO(x)?hh(x):ec(x);if(GA&&x[GA])return BGe(x[GA]());var C=_u(x),P=C==Ke?Oj:C==Mt?eO:LE;return P(x)}function U0(x){if(!x)return x===0?x:0;if(x=od(x),x===G||x===-1/0){var C=x<0?-1:1;return C*J}return x===x?x:0}function fr(x){var C=U0(x),P=C%1;return C===C?P?C-P:C:0}function Ude(x){return x?cx(fr(x),0,j):0}function od(x){if(typeof x=="number")return x;if(sf(x))return $;if(Hs(x)){var C=typeof x.valueOf=="function"?x.valueOf():x;x=Hs(C)?C+"":C}if(typeof x!="string")return x===0?x:+x;x=Ur(x);var P=jn.test(x);return P||ii.test(x)?xr(x.slice(2),P?2:8):mr.test(x)?$:+x}function zde(x){return Bp(x,nc(x))}function uJe(x){return x?cx(fr(x),-9007199254740991,Y):x===0?x:0}function Fi(x){return x==null?"":rf(x)}var lJe=OE(function(x,C){if(iD(C)||tc(C)){Bp(C,wa(C),x);return}for(var P in C)Ui.call(C,P)&&JA(x,P,C[P])}),Vde=OE(function(x,C){Bp(C,nc(C),x)}),MO=OE(function(x,C,P,V){Bp(C,nc(C),x,V)}),cJe=OE(function(x,C,P,V){Bp(C,wa(C),x,V)}),fJe=L0(jj);function dJe(x,C){var P=PE(x);return C==null?P:wfe(P,C)}var hJe=wr(function(x,C){x=is(x);var P=-1,V=C.length,Q=V>2?C[2]:n;for(Q&&hl(C[0],C[1],Q)&&(V=1);++P<V;)for(var se=C[P],me=nc(se),Ce=-1,Oe=me.length;++Ce<Oe;){var ct=me[Ce],dt=x[ct];(dt===n||mh(dt,kE[ct])&&!Ui.call(x,ct))&&(x[ct]=se[ct])}return x}),pJe=wr(function(x){return x.push(n,ode),bu(Hde,n,x)});function mJe(x,C){return xu(x,An(C,3),Lp)}function gJe(x,C){return xu(x,An(C,3),zj)}function yJe(x,C){return x==null?x:Uj(x,An(C,3),nc)}function vJe(x,C){return x==null?x:Tfe(x,An(C,3),nc)}function bJe(x,C){return x&&Lp(x,An(C,3))}function xJe(x,C){return x&&zj(x,An(C,3))}function wJe(x){return x==null?[]:yO(x,wa(x))}function _Je(x){return x==null?[]:yO(x,nc(x))}function xU(x,C,P){var V=x==null?n:fx(x,C);return V===n?P:V}function EJe(x,C){return x!=null&&lde(x,C,WYe)}function wU(x,C){return x!=null&&lde(x,C,GYe)}var SJe=tde(function(x,C,P){C!=null&&typeof C.toString!="function"&&(C=iO.call(C)),x[C]=P},EU(rc)),CJe=tde(function(x,C,P){C!=null&&typeof C.toString!="function"&&(C=iO.call(C)),Ui.call(x,C)?x[C].push(P):x[C]=[P]},An),TJe=wr(eD);function wa(x){return tc(x)?bfe(x):Wj(x)}function nc(x){return tc(x)?bfe(x,!0):rKe(x)}function AJe(x,C){var P={};return C=An(C,3),Lp(x,function(V,Q,se){M0(P,C(V,Q,se),V)}),P}function DJe(x,C){var P={};return C=An(C,3),Lp(x,function(V,Q,se){M0(P,Q,C(V,Q,se))}),P}var IJe=OE(function(x,C,P){vO(x,C,P)}),Hde=OE(function(x,C,P,V){vO(x,C,P,V)}),kJe=L0(function(x,C){var P={};if(x==null)return P;var V=!1;C=rs(C,function(se){return se=Xy(se,x),V||(V=se.length>1),se}),Bp(x,oU(x),P),V&&(P=rd(P,f|d|h,SKe));for(var Q=C.length;Q--;)Jj(P,C[Q]);return P});function RJe(x,C){return qde(x,PO(An(C)))}var NJe=L0(function(x,C){return x==null?{}:sKe(x,C)});function qde(x,C){if(x==null)return{};var P=rs(oU(x),function(V){return[V]});return C=An(C),Mfe(x,P,function(V,Q){return C(V,Q[0])})}function PJe(x,C,P){C=Xy(C,x);var V=-1,Q=C.length;for(Q||(Q=1,x=n);++V<Q;){var se=x==null?n:x[jp(C[V])];se===n&&(V=Q,se=P),x=j0(se)?se.call(x):se}return x}function OJe(x,C,P){return x==null?x:nD(x,C,P)}function FJe(x,C,P,V){return V=typeof V=="function"?V:n,x==null?x:nD(x,C,P,V)}var Wde=ide(wa),Gde=ide(nc);function MJe(x,C,P){var V=nr(x),Q=V||Jy(x)||$E(x);if(C=An(C,4),P==null){var se=x&&x.constructor;Q?P=V?new se:[]:Hs(x)?P=j0(se)?PE(aO(x)):{}:P={}}return(Q?fl:Lp)(x,function(me,Ce,Oe){return C(P,me,Ce,Oe)}),P}function $Je(x,C){return x==null?!0:Jj(x,C)}function LJe(x,C,P){return x==null?x:Ufe(x,C,tU(P))}function BJe(x,C,P,V){return V=typeof V=="function"?V:n,x==null?x:Ufe(x,C,tU(P),V)}function LE(x){return x==null?[]:$o(x,wa(x))}function jJe(x){return x==null?[]:$o(x,nc(x))}function UJe(x,C,P){return P===n&&(P=C,C=n),P!==n&&(P=od(P),P=P===P?P:0),C!==n&&(C=od(C),C=C===C?C:0),cx(od(x),C,P)}function zJe(x,C,P){return C=U0(C),P===n?(P=C,C=0):P=U0(P),x=od(x),YYe(x,C,P)}function VJe(x,C,P){if(P&&typeof P!="boolean"&&hl(x,C,P)&&(C=P=n),P===n&&(typeof C=="boolean"?(P=C,C=n):typeof x=="boolean"&&(P=x,x=n)),x===n&&C===n?(x=0,C=1):(x=U0(x),C===n?(C=x,x=0):C=U0(C)),x>C){var V=x;x=C,C=V}if(P||x%1||C%1){var Q=yfe();return wu(x+Q*(C-x+Qt("1e-"+((Q+"").length-1))),C)}return Kj(x,C)}var HJe=FE(function(x,C,P){return C=C.toLowerCase(),x+(P?Yde(C):C)});function Yde(x){return _U(Fi(x).toLowerCase())}function Kde(x){return x=Fi(x),x&&x.replace(Dr,OGe).replace(lh,"")}function qJe(x,C,P){x=Fi(x),C=rf(C);var V=x.length;P=P===n?V:cx(fr(P),0,V);var Q=P;return P-=C.length,P>=0&&x.slice(P,Q)==C}function WJe(x){return x=Fi(x),x&&ls.test(x)?x.replace(As,FGe):x}function GJe(x){return x=Fi(x),x&&ri.test(x)?x.replace(Vs,"\\$&"):x}var YJe=FE(function(x,C,P){return x+(P?"-":"")+C.toLowerCase()}),KJe=FE(function(x,C,P){return x+(P?" ":"")+C.toLowerCase()}),XJe=Jfe("toLowerCase");function QJe(x,C,P){x=Fi(x),C=fr(C);var V=C?DE(x):0;if(!C||V>=C)return x;var Q=(C-V)/2;return SO(fO(Q),P)+x+SO(cO(Q),P)}function JJe(x,C,P){x=Fi(x),C=fr(C);var V=C?DE(x):0;return C&&V<C?x+SO(C-V,P):x}function ZJe(x,C,P){x=Fi(x),C=fr(C);var V=C?DE(x):0;return C&&V<C?SO(C-V,P)+x:x}function eZe(x,C,P){return P||C==null?C=0:C&&(C=+C),aYe(Fi(x).replace(Ni,""),C||0)}function tZe(x,C,P){return(P?hl(x,C,P):C===n)?C=1:C=fr(C),Xj(Fi(x),C)}function nZe(){var x=arguments,C=Fi(x[0]);return x.length<3?C:C.replace(x[1],x[2])}var rZe=FE(function(x,C,P){return x+(P?"_":"")+C.toLowerCase()});function iZe(x,C,P){return P&&typeof P!="number"&&hl(x,C,P)&&(C=P=n),P=P===n?j:P>>>0,P?(x=Fi(x),x&&(typeof C=="string"||C!=null&&!bU(C))&&(C=rf(C),!C&&AE(x))?Qy(hh(x),0,P):x.split(C,P)):[]}var sZe=FE(function(x,C,P){return x+(P?" ":"")+_U(C)});function oZe(x,C,P){return x=Fi(x),P=P==null?0:cx(fr(P),0,x.length),C=rf(C),x.slice(P,P+C.length)==C}function aZe(x,C,P){var V=ee.templateSettings;P&&hl(x,C,P)&&(C=n),x=Fi(x),C=MO({},C,V,sde);var Q=MO({},C.imports,V.imports,sde),se=wa(Q),me=$o(Q,se),Ce,Oe,ct=0,dt=C.interpolate||Qr,bt="__p += '",Ut=Fj((C.escape||Qr).source+"|"+dt.source+"|"+(dt===Ha?bn:Qr).source+"|"+(C.evaluate||Qr).source+"|$","g"),sn="//# sourceURL="+(Ui.call(C,"sourceURL")?(C.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_E+"]")+`
`;x.replace(Ut,function(kn,Ir,zr,of,pl,af){return zr||(zr=of),bt+=x.slice(ct,af).replace(ir,MGe),Ir&&(Ce=!0,bt+=`' +
__e(`+Ir+`) +
'`),pl&&(Oe=!0,bt+=`';
`+pl+`;
__p += '`),zr&&(bt+=`' +
((__t = (`+zr+`)) == null ? '' : __t) +
'`),ct=af+kn.length,kn}),bt+=`';
`;var In=Ui.call(C,"variable")&&C.variable;if(!In)bt=`with (obj) {
`+bt+`
}
`;else if(Dt.test(In))throw new Zn(a);bt=(Oe?bt.replace(Mn,""):bt).replace(ki,"$1").replace(di,"$1;"),bt="function("+(In||"obj")+`) {
`+(In?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ce?", __e = _.escape":"")+(Oe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+bt+`return __p
}`;var yr=Qde(function(){return Ci(se,sn+"return "+bt).apply(n,me)});if(yr.source=bt,vU(yr))throw yr;return yr}function uZe(x){return Fi(x).toLowerCase()}function lZe(x){return Fi(x).toUpperCase()}function cZe(x,C,P){if(x=Fi(x),x&&(P||C===n))return Ur(x);if(!x||!(C=rf(C)))return x;var V=hh(x),Q=hh(C),se=Zl(V,Q),me=ox(V,Q)+1;return Qy(V,se,me).join("")}function fZe(x,C,P){if(x=Fi(x),x&&(P||C===n))return x.slice(0,cfe(x)+1);if(!x||!(C=rf(C)))return x;var V=hh(x),Q=ox(V,hh(C))+1;return Qy(V,0,Q).join("")}function dZe(x,C,P){if(x=Fi(x),x&&(P||C===n))return x.replace(Ni,"");if(!x||!(C=rf(C)))return x;var V=hh(x),Q=Zl(V,hh(C));return Qy(V,Q).join("")}function hZe(x,C){var P=I,V=R;if(Hs(C)){var Q="separator"in C?C.separator:Q;P="length"in C?fr(C.length):P,V="omission"in C?rf(C.omission):V}x=Fi(x);var se=x.length;if(AE(x)){var me=hh(x);se=me.length}if(P>=se)return x;var Ce=P-DE(V);if(Ce<1)return V;var Oe=me?Qy(me,0,Ce).join(""):x.slice(0,Ce);if(Q===n)return Oe+V;if(me&&(Ce+=Oe.length-Ce),bU(Q)){if(x.slice(Ce).search(Q)){var ct,dt=Oe;for(Q.global||(Q=Fj(Q.source,Fi(rr.exec(Q))+"g")),Q.lastIndex=0;ct=Q.exec(dt);)var bt=ct.index;Oe=Oe.slice(0,bt===n?Ce:bt)}}else if(x.indexOf(rf(Q),Ce)!=Ce){var Ut=Oe.lastIndexOf(Q);Ut>-1&&(Oe=Oe.slice(0,Ut))}return Oe+V}function pZe(x){return x=Fi(x),x&&Lr.test(x)?x.replace(Li,VGe):x}var mZe=FE(function(x,C,P){return x+(P?" ":"")+C.toUpperCase()}),_U=Jfe("toUpperCase");function Xde(x,C,P){return x=Fi(x),C=P?n:C,C===n?LGe(x)?WGe(x):TE(x):x.match(C)||[]}var Qde=wr(function(x,C){try{return bu(x,n,C)}catch(P){return vU(P)?P:new Zn(P)}}),gZe=L0(function(x,C){return fl(C,function(P){P=jp(P),M0(x,P,gU(x[P],x))}),x});function yZe(x){var C=x==null?0:x.length,P=An();return x=C?rs(x,function(V){if(typeof V[1]!="function")throw new td(o);return[P(V[0]),V[1]]}):[],wr(function(V){for(var Q=-1;++Q<C;){var se=x[Q];if(bu(se[0],this,V))return bu(se[1],this,V)}})}function vZe(x){return VYe(rd(x,f))}function EU(x){return function(){return x}}function bZe(x,C){return x==null||x!==x?C:x}var xZe=ede(),wZe=ede(!0);function rc(x){return x}function SU(x){return kfe(typeof x=="function"?x:rd(x,f))}function _Ze(x){return Nfe(rd(x,f))}function EZe(x,C){return Pfe(x,rd(C,f))}var SZe=wr(function(x,C){return function(P){return eD(P,x,C)}}),CZe=wr(function(x,C){return function(P){return eD(x,P,C)}});function CU(x,C,P){var V=wa(C),Q=yO(C,V);P==null&&!(Hs(C)&&(Q.length||!V.length))&&(P=C,C=x,x=this,Q=yO(C,wa(C)));var se=!(Hs(P)&&"chain"in P)||!!P.chain,me=j0(x);return fl(Q,function(Ce){var Oe=C[Ce];x[Ce]=Oe,me&&(x.prototype[Ce]=function(){var ct=this.__chain__;if(se||ct){var dt=x(this.__wrapped__),bt=dt.__actions__=ec(this.__actions__);return bt.push({func:Oe,args:arguments,thisArg:x}),dt.__chain__=ct,dt}return Oe.apply(x,fh([this.value()],arguments))})}),x}function TZe(){return xn._===this&&(xn._=JGe),this}function TU(){}function AZe(x){return x=fr(x),wr(function(C){return Ofe(C,x)})}var DZe=rU(rs),IZe=rU(SE),kZe=rU(CE);function Jde(x){return cU(x)?K(jp(x)):oKe(x)}function RZe(x){return function(C){return x==null?n:fx(x,C)}}var NZe=nde(),PZe=nde(!0);function AU(){return[]}function DU(){return!1}function OZe(){return{}}function FZe(){return""}function MZe(){return!0}function $Ze(x,C){if(x=fr(x),x<1||x>Y)return[];var P=j,V=wu(x,j);C=An(C),x-=j;for(var Q=Si(V,C);++P<x;)C(P);return Q}function LZe(x){return nr(x)?rs(x,jp):sf(x)?[x]:ec(vde(Fi(x)))}function BZe(x){var C=++XGe;return Fi(x)+C}var jZe=EO(function(x,C){return x+C},0),UZe=iU("ceil"),zZe=EO(function(x,C){return x/C},1),VZe=iU("floor");function HZe(x){return x&&x.length?gO(x,rc,Vj):n}function qZe(x,C){return x&&x.length?gO(x,An(C,2),Vj):n}function WZe(x){return z(x,rc)}function GZe(x,C){return z(x,An(C,2))}function YZe(x){return x&&x.length?gO(x,rc,Gj):n}function KZe(x,C){return x&&x.length?gO(x,An(C,2),Gj):n}var XZe=EO(function(x,C){return x*C},1),QZe=iU("round"),JZe=EO(function(x,C){return x-C},0);function ZZe(x){return x&&x.length?Ft(x,rc):0}function eet(x,C){return x&&x.length?Ft(x,An(C,2)):0}return ee.after=_Qe,ee.ary=Ide,ee.assign=lJe,ee.assignIn=Vde,ee.assignInWith=MO,ee.assignWith=cJe,ee.at=fJe,ee.before=kde,ee.bind=gU,ee.bindAll=gZe,ee.bindKey=Rde,ee.castArray=OQe,ee.chain=Tde,ee.chunk=VKe,ee.compact=HKe,ee.concat=qKe,ee.cond=yZe,ee.conforms=vZe,ee.constant=EU,ee.countBy=ZXe,ee.create=dJe,ee.curry=Nde,ee.curryRight=Pde,ee.debounce=Ode,ee.defaults=hJe,ee.defaultsDeep=pJe,ee.defer=EQe,ee.delay=SQe,ee.difference=WKe,ee.differenceBy=GKe,ee.differenceWith=YKe,ee.drop=KKe,ee.dropRight=XKe,ee.dropRightWhile=QKe,ee.dropWhile=JKe,ee.fill=ZKe,ee.filter=tQe,ee.flatMap=iQe,ee.flatMapDeep=sQe,ee.flatMapDepth=oQe,ee.flatten=_de,ee.flattenDeep=eXe,ee.flattenDepth=tXe,ee.flip=CQe,ee.flow=xZe,ee.flowRight=wZe,ee.fromPairs=nXe,ee.functions=wJe,ee.functionsIn=_Je,ee.groupBy=aQe,ee.initial=iXe,ee.intersection=sXe,ee.intersectionBy=oXe,ee.intersectionWith=aXe,ee.invert=SJe,ee.invertBy=CJe,ee.invokeMap=lQe,ee.iteratee=SU,ee.keyBy=cQe,ee.keys=wa,ee.keysIn=nc,ee.map=kO,ee.mapKeys=AJe,ee.mapValues=DJe,ee.matches=_Ze,ee.matchesProperty=EZe,ee.memoize=NO,ee.merge=IJe,ee.mergeWith=Hde,ee.method=SZe,ee.methodOf=CZe,ee.mixin=CU,ee.negate=PO,ee.nthArg=AZe,ee.omit=kJe,ee.omitBy=RJe,ee.once=TQe,ee.orderBy=fQe,ee.over=DZe,ee.overArgs=AQe,ee.overEvery=IZe,ee.overSome=kZe,ee.partial=yU,ee.partialRight=Fde,ee.partition=dQe,ee.pick=NJe,ee.pickBy=qde,ee.property=Jde,ee.propertyOf=RZe,ee.pull=fXe,ee.pullAll=Sde,ee.pullAllBy=dXe,ee.pullAllWith=hXe,ee.pullAt=pXe,ee.range=NZe,ee.rangeRight=PZe,ee.rearg=DQe,ee.reject=mQe,ee.remove=mXe,ee.rest=IQe,ee.reverse=pU,ee.sampleSize=yQe,ee.set=OJe,ee.setWith=FJe,ee.shuffle=vQe,ee.slice=gXe,ee.sortBy=wQe,ee.sortedUniq=EXe,ee.sortedUniqBy=SXe,ee.split=iZe,ee.spread=kQe,ee.tail=CXe,ee.take=TXe,ee.takeRight=AXe,ee.takeRightWhile=DXe,ee.takeWhile=IXe,ee.tap=HXe,ee.throttle=RQe,ee.thru=IO,ee.toArray=jde,ee.toPairs=Wde,ee.toPairsIn=Gde,ee.toPath=LZe,ee.toPlainObject=zde,ee.transform=MJe,ee.unary=NQe,ee.union=kXe,ee.unionBy=RXe,ee.unionWith=NXe,ee.uniq=PXe,ee.uniqBy=OXe,ee.uniqWith=FXe,ee.unset=$Je,ee.unzip=mU,ee.unzipWith=Cde,ee.update=LJe,ee.updateWith=BJe,ee.values=LE,ee.valuesIn=jJe,ee.without=MXe,ee.words=Xde,ee.wrap=PQe,ee.xor=$Xe,ee.xorBy=LXe,ee.xorWith=BXe,ee.zip=jXe,ee.zipObject=UXe,ee.zipObjectDeep=zXe,ee.zipWith=VXe,ee.entries=Wde,ee.entriesIn=Gde,ee.extend=Vde,ee.extendWith=MO,CU(ee,ee),ee.add=jZe,ee.attempt=Qde,ee.camelCase=HJe,ee.capitalize=Yde,ee.ceil=UZe,ee.clamp=UJe,ee.clone=FQe,ee.cloneDeep=$Qe,ee.cloneDeepWith=LQe,ee.cloneWith=MQe,ee.conformsTo=BQe,ee.deburr=Kde,ee.defaultTo=bZe,ee.divide=zZe,ee.endsWith=qJe,ee.eq=mh,ee.escape=WJe,ee.escapeRegExp=GJe,ee.every=eQe,ee.find=nQe,ee.findIndex=xde,ee.findKey=mJe,ee.findLast=rQe,ee.findLastIndex=wde,ee.findLastKey=gJe,ee.floor=VZe,ee.forEach=Ade,ee.forEachRight=Dde,ee.forIn=yJe,ee.forInRight=vJe,ee.forOwn=bJe,ee.forOwnRight=xJe,ee.get=xU,ee.gt=jQe,ee.gte=UQe,ee.has=EJe,ee.hasIn=wU,ee.head=Ede,ee.identity=rc,ee.includes=uQe,ee.indexOf=rXe,ee.inRange=zJe,ee.invoke=TJe,ee.isArguments=px,ee.isArray=nr,ee.isArrayBuffer=zQe,ee.isArrayLike=tc,ee.isArrayLikeObject=vo,ee.isBoolean=VQe,ee.isBuffer=Jy,ee.isDate=HQe,ee.isElement=qQe,ee.isEmpty=WQe,ee.isEqual=GQe,ee.isEqualWith=YQe,ee.isError=vU,ee.isFinite=KQe,ee.isFunction=j0,ee.isInteger=Mde,ee.isLength=OO,ee.isMap=$de,ee.isMatch=XQe,ee.isMatchWith=QQe,ee.isNaN=JQe,ee.isNative=ZQe,ee.isNil=tJe,ee.isNull=eJe,ee.isNumber=Lde,ee.isObject=Hs,ee.isObjectLike=eo,ee.isPlainObject=oD,ee.isRegExp=bU,ee.isSafeInteger=nJe,ee.isSet=Bde,ee.isString=FO,ee.isSymbol=sf,ee.isTypedArray=$E,ee.isUndefined=rJe,ee.isWeakMap=iJe,ee.isWeakSet=sJe,ee.join=uXe,ee.kebabCase=YJe,ee.last=sd,ee.lastIndexOf=lXe,ee.lowerCase=KJe,ee.lowerFirst=XJe,ee.lt=oJe,ee.lte=aJe,ee.max=HZe,ee.maxBy=qZe,ee.mean=WZe,ee.meanBy=GZe,ee.min=YZe,ee.minBy=KZe,ee.stubArray=AU,ee.stubFalse=DU,ee.stubObject=OZe,ee.stubString=FZe,ee.stubTrue=MZe,ee.multiply=XZe,ee.nth=cXe,ee.noConflict=TZe,ee.noop=TU,ee.now=RO,ee.pad=QJe,ee.padEnd=JJe,ee.padStart=ZJe,ee.parseInt=eZe,ee.random=VJe,ee.reduce=hQe,ee.reduceRight=pQe,ee.repeat=tZe,ee.replace=nZe,ee.result=PJe,ee.round=QZe,ee.runInContext=Ne,ee.sample=gQe,ee.size=bQe,ee.snakeCase=rZe,ee.some=xQe,ee.sortedIndex=yXe,ee.sortedIndexBy=vXe,ee.sortedIndexOf=bXe,ee.sortedLastIndex=xXe,ee.sortedLastIndexBy=wXe,ee.sortedLastIndexOf=_Xe,ee.startCase=sZe,ee.startsWith=oZe,ee.subtract=JZe,ee.sum=ZZe,ee.sumBy=eet,ee.template=aZe,ee.times=$Ze,ee.toFinite=U0,ee.toInteger=fr,ee.toLength=Ude,ee.toLower=uZe,ee.toNumber=od,ee.toSafeInteger=uJe,ee.toString=Fi,ee.toUpper=lZe,ee.trim=cZe,ee.trimEnd=fZe,ee.trimStart=dZe,ee.truncate=hZe,ee.unescape=pZe,ee.uniqueId=BZe,ee.upperCase=mZe,ee.upperFirst=_U,ee.each=Ade,ee.eachRight=Dde,ee.first=Ede,CU(ee,function(){var x={};return Lp(ee,function(C,P){Ui.call(ee.prototype,P)||(x[P]=C)}),x}(),{chain:!1}),ee.VERSION=r,fl(["bind","bindKey","curry","curryRight","partial","partialRight"],function(x){ee[x].placeholder=ee}),fl(["drop","take"],function(x,C){Pr.prototype[x]=function(P){P=P===n?1:Zo(fr(P),0);var V=this.__filtered__&&!C?new Pr(this):this.clone();return V.__filtered__?V.__takeCount__=wu(P,V.__takeCount__):V.__views__.push({size:wu(P,j),type:x+(V.__dir__<0?"Right":"")}),V},Pr.prototype[x+"Right"]=function(P){return this.reverse()[x](P).reverse()}}),fl(["filter","map","takeWhile"],function(x,C){var P=C+1,V=P==L||P==U;Pr.prototype[x]=function(Q){var se=this.clone();return se.__iteratees__.push({iteratee:An(Q,3),type:P}),se.__filtered__=se.__filtered__||V,se}}),fl(["head","last"],function(x,C){var P="take"+(C?"Right":"");Pr.prototype[x]=function(){return this[P](1).value()[0]}}),fl(["initial","tail"],function(x,C){var P="drop"+(C?"":"Right");Pr.prototype[x]=function(){return this.__filtered__?new Pr(this):this[P](1)}}),Pr.prototype.compact=function(){return this.filter(rc)},Pr.prototype.find=function(x){return this.filter(x).head()},Pr.prototype.findLast=function(x){return this.reverse().find(x)},Pr.prototype.invokeMap=wr(function(x,C){return typeof x=="function"?new Pr(this):this.map(function(P){return eD(P,x,C)})}),Pr.prototype.reject=function(x){return this.filter(PO(An(x)))},Pr.prototype.slice=function(x,C){x=fr(x);var P=this;return P.__filtered__&&(x>0||C<0)?new Pr(P):(x<0?P=P.takeRight(-x):x&&(P=P.drop(x)),C!==n&&(C=fr(C),P=C<0?P.dropRight(-C):P.take(C-x)),P)},Pr.prototype.takeRightWhile=function(x){return this.reverse().takeWhile(x).reverse()},Pr.prototype.toArray=function(){return this.take(j)},Lp(Pr.prototype,function(x,C){var P=/^(?:filter|find|map|reject)|While$/.test(C),V=/^(?:head|last)$/.test(C),Q=ee[V?"take"+(C=="last"?"Right":""):C],se=V||/^find/.test(C);Q&&(ee.prototype[C]=function(){var me=this.__wrapped__,Ce=V?[1]:arguments,Oe=me instanceof Pr,ct=Ce[0],dt=Oe||nr(me),bt=function(Ir){var zr=Q.apply(ee,fh([Ir],Ce));return V&&Ut?zr[0]:zr};dt&&P&&typeof ct=="function"&&ct.length!=1&&(Oe=dt=!1);var Ut=this.__chain__,sn=!!this.__actions__.length,In=se&&!Ut,yr=Oe&&!sn;if(!se&&dt){me=yr?me:new Pr(this);var kn=x.apply(me,Ce);return kn.__actions__.push({func:IO,args:[bt],thisArg:n}),new nd(kn,Ut)}return In&&yr?x.apply(this,Ce):(kn=this.thru(bt),In?V?kn.value()[0]:kn.value():kn)})}),fl(["pop","push","shift","sort","splice","unshift"],function(x){var C=tO[x],P=/^(?:push|sort|unshift)$/.test(x)?"tap":"thru",V=/^(?:pop|shift)$/.test(x);ee.prototype[x]=function(){var Q=arguments;if(V&&!this.__chain__){var se=this.value();return C.apply(nr(se)?se:[],Q)}return this[P](function(me){return C.apply(nr(me)?me:[],Q)})}}),Lp(Pr.prototype,function(x,C){var P=ee[C];if(P){var V=P.name+"";Ui.call(NE,V)||(NE[V]=[]),NE[V].push({name:C,func:P})}}),NE[_O(n,y).name]=[{name:"wrapper",func:n}],Pr.prototype.clone=pYe,Pr.prototype.reverse=mYe,Pr.prototype.value=gYe,ee.prototype.at=qXe,ee.prototype.chain=WXe,ee.prototype.commit=GXe,ee.prototype.next=YXe,ee.prototype.plant=XXe,ee.prototype.reverse=QXe,ee.prototype.toJSON=ee.prototype.valueOf=ee.prototype.value=JXe,ee.prototype.first=ee.prototype.head,GA&&(ee.prototype[GA]=KXe),ee},IE=GGe();ji?((ji.exports=IE)._=IE,Ei._=IE):xn._=IE}).call(on)})(B$,B$.exports);var X1n=B$.exports;const Q1n="#/definitions/LibraryConfig",J1n="http://json-schema.org/draft-07/schema#",Z1n={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"},{$ref:"#/definitions/VegaComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LibraryConfig:{additionalProperties:!1,description:'LibraryConfig is used to define the properties of a library configuration. This is a JSON object with three main components: baseComponents, components, and the sequences. Libraries are useful for defining components and sequences of these components that are to be reused across multiple studies. We (the reVISit team) provide several libraries that can be used in your study configurations. Check the public/libraries folder in the reVISit-studies repository for available libraries. We also plan to accept community contributions for libraries. If you have a library that you think would be useful for others, please reach out to us. We would love to include it in our repository.\n\nBelow is the general template that should be followed when constructing a Library configuration file.\n\n```js {  "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v2.0.0-rc3/src/parser/LibraryConfigSchema.json",  "baseComponents": {    // BaseComponents here are defined exactly as is in the StudyConfig  },  "components": {    // Components here are defined exactly as is in the StudyConfig  },  "sequences": {   // Sequences here are defined as "key": "value" pairs where the key is the name of the sequence and the value is a ComponentBlock, just like in the StudyConfig  } } ```',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},description:{description:"A description of the library.",type:"string"},name:{description:"The name of the library.",type:"string"},reference:{description:"The reference to the paper where the content of the library is based on.",type:"string"},sequences:{additionalProperties:{$ref:"#/definitions/ComponentBlock"},description:"The order of the components in the study. This might include some randomness.",type:"object"}},required:["$schema","components","sequences"],type:"object"},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},MatrixResponse:{additionalProperties:!1,description:`The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, \`answerOptions\` can be set to one of the following custom strings: 'satisfaction5','satisfaction7', 'likely5', 'likely7'. This will automatically generate the appropriate headers for the matrix.

Example for a 5-scale satisfaction matrix with three questions:

\`\`\`js { "id": "multi-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.", "location": "aboveStimulus", "type": "matrix-radio", "answerOptions": "satisfaction5", "questionOptions": [  "The tool we created",  "The technique we developed",  "The authors of the tools" ] } \`\`\`

Here's an example using custom columns (answerOptions):

\`\`\`js { "id": "multi-custom", "prompt": "Which categories do the following items belong to?", "location": "aboveStimulus", "type": "matrix-checkbox", "answerOptions": [  "Has Legs",  "Has Wings",  "Can Swim" ], "questionOptions": [  "Dog",  "Snake",  "Eagle",  "Salmon",  "Platypus" ]

} \`\`\``,properties:{answerOptions:{anyOf:[{items:{type:"string"},type:"array"},{const:"likely5",type:"string"},{const:"likely7",type:"string"},{const:"satisfaction5",type:"string"},{const:"satisfaction7",type:"string"}],description:"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},questionOptions:{description:"The question options (rows) are the prompts for each response you'd like to record.",items:{type:"string"},type:"array"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{enum:["matrix-radio","matrix-checkbox"],type:"string"}},required:["answerOptions","id","prompt","questionOptions","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/v2.0.0-rc3/src/public/example-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"},{$ref:"#/definitions/MatrixResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},VegaComponent:{anyOf:[{$ref:"#/definitions/VegaComponentPath"},{$ref:"#/definitions/VegaComponentConfig"}]},VegaComponentConfig:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["config","response","type"],type:"object"},VegaComponentPath:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["path","response","type"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},evn={$ref:Q1n,$schema:J1n,definitions:Z1n},OHe=new tce;OHe.addSchema(evn);const tvn=OHe.getSchema("#/definitions/LibraryConfig");function FHe(e,t){return{...e,components:e.components.map(n=>typeof n=="object"?FHe(n,t):`$${t}.components.${n}`)}}function MHe(e,t,n=[]){return{...e,components:e.components.map(r=>{if(typeof r=="object")return MHe(r,t);const i=r.includes(".se.")?".se.":r.includes(".sequences.")?".sequences.":!1;if(typeof r=="string"&&r.startsWith("$")&&i){const[s,o]=r.split(i),a=s.slice(1);if(!t[a]){const c={message:`Library ${a} not found in imported libraries`,instancePath:"",params:{action:"check the library name"}};return n.push(c),r}let l=t[a].sequences[o];if(!l){const c={message:`Sequence ${o} not found in library ${s}`,instancePath:"",params:{action:"check the sequence name"}};return n.push(c),r}return l=FHe(l,a),l}return r})}}function nvn(e,t,n){Object.entries(n).forEach(([r,i])=>{Object.entries(i.components).forEach(([s,o])=>{var a;dA(o)&&!((a=i.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object in library \`${r}\``,instancePath:`/importedLibraries/${r}/components/${s}`,params:{action:"add the base component to the baseComponents object"}})})})}function rvn(e,t){let n=!1,r;try{r=sj.parse(e),n=tvn(r)}catch{n=!1}const i=[],s=[];return r?n||i.push({message:"Library config is not valid",instancePath:"",params:{action:"fix the errors in the library config"}}):i.push({message:`Could not find library \`${t}\``,instancePath:"/importedLibraries/",params:{action:"make sure the library is in the correct location"}}),{...r,errors:i,warnings:s}}async function ivn(e){const t=await(await fetch(`${Ll}libraries/${e}/config.json`)).text();return rvn(t,e)}async function svn(e,t,n){const r=e.map(async s=>{const o=await ivn(s);return o.errors&&t.push(...o.errors),o.warnings&&n.push(...o.warnings),[s,o]}),i=Object.fromEntries(await Promise.all(r));return Object.entries(i).forEach(([s,o])=>{o.components||delete i[s]}),e.forEach(s=>{i[s]&&(i[s].components=Object.fromEntries(Object.entries(i[s].components).map(([o,a])=>{if(dA(a)){const u=X1n.merge({},i[s].baseComponents[a.baseComponent],a);return delete u.baseComponent,[[`$${s}.components.${o}`,u],[`$${s}.co.${o}`,u]]}return[[`$${s}.components.${o}`,a],[`$${s}.co.${o}`,a]]}).reduce((o,[a,u])=>(o.push(a,u),o),[])))}),i}const $He=new tce;$He.addSchema(K1n);const E2e=$He.getSchema("#/definitions/GlobalConfig"),LHe=new tce;LHe.addSchema(q1n);const S2e=LHe.getSchema("#/definitions/StudyConfig");function ovn(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function avn(e){const t=sj.parse(e),n=E2e(t),r=ovn(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...E2e.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function BHe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):BHe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function uvn(e,t){const n=[],r=[];nvn(e,n,t),Object.entries(e.components).forEach(([o,a])=>{var u;dA(a)&&!((u=e.baseComponents)!=null&&u[a.baseComponent])&&n.push({message:`Base component \`${a.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${o}`,params:{action:"add the base component to the baseComponents object"}})});const i=x3e(e.sequence);i.forEach(o=>{var a;e.components[o]||n.push({message:(a=e.baseComponents)!=null&&a[o]?`Component \`${o}\` is a base component and cannot be used in the sequence`:`Component \`${o}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(o=>!i.includes(o)&&!o.includes(".se.")&&!o.includes(".sequences.")&&!o.includes(".co.")&&!o.includes(".components.")).forEach(o=>{r.push({message:`Component \`${o}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const s=[];return BHe(e.sequence,s),s.forEach(o=>{n.push({message:`Skip target \`${o}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:n,warnings:r}}async function nce(e){let t=!1,n;try{n=sj.parse(e),t=S2e(n)}catch{t=!1}let r=S2e.errors||[],i=[];if(t&&n){const s=n.importedLibraries||[],o=await svn(s,r,i);Object.values(o).forEach(l=>{n.components={...n.components,...l.components},n.baseComponents={...n.baseComponents,...l.components}}),n.sequence=MHe(n.sequence,o,r);const{errors:a,warnings:u}=uvn(n,o);r=[...r,...a],i=[...i,...u]}else r=[...r,{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}async function lvn(e){const t=await(await fetch(`${Ll}${e}`)).text();return await nce(t)}async function rce(e,t){const n=t.configsList.find(r=>Ake(r)===e);if(n){const r=t.configs[n];return await lvn(`${r.path}`)}return null}async function cvn(e){const t={},n=e.configsList.map(async i=>rce(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function fvn({globalConfig:e}){const t=G_(),[n,r]=N.useState(null),i=e.configsList.includes(t)||t==="__revisit-widget";N.useEffect(()=>{if(t!=="__revisit-widget")return rce(t,e).then(p=>{r(p)}),()=>{};if(e&&t){const p=m=>{m.data.type==="revisitWidget/CONFIG"&&nce(m.data.payload).then(async g=>{r(g);const y=await KEe(g);window.parent.postMessage({type:"revisitWidget/SEQUENCE_ARRAY",payload:y},"*")})};return window.addEventListener("message",p),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",p)}}return()=>{}},[e,t]);const[s,o]=N.useState([]),[a,u]=N.useState(null),{storageEngine:l}=Po(),[c]=Sb(),f=N.useMemo(()=>c.get("participantId"),[c]);N.useEffect(()=>{async function p(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await KEe(n));const g=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,y=Object.fromEntries(c.entries()),v=await fetch("https://api.ipify.org?format=json").catch(A=>""),b=v instanceof Response?await v.json():{ip:""},_={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:b.ip},w=await l.initializeParticipantSession(t,y,n,_,f||g),S=await l.getModes(t),T=await Uwt(t,n,w.sequence,_,w.answers,S,w.participantId);u(T),o([{element:E.jsx(umn,{}),children:[{path:"/",element:E.jsx($Ve,{to:Lh(0),replace:!0})},{path:"/:index",element:n.errors.length>0?E.jsxs(E.Fragment,{children:[E.jsx(lo,{order:2,mb:8,children:"Error loading config"}),E.jsx(rF,{issues:n.errors,type:"error"})]}):E.jsx(qpn,{})}]}])}p()},[l,n,t,c,f]);const d=vke(s);let h=null;return i?s.length===0?h=E.jsx($f,{visible:!0}):h=d&&a?E.jsx(S3e.Provider,{value:a,children:E.jsx($xt,{store:a.store,children:d})}):E.jsx(kv,{}):h=E.jsx(kv,{}),h}function YF({studyIds:e}){const t=Ep(),{studyId:n}=zm(),r=Eb(),i=e.map(o=>({value:o,label:o})),s=r.pathname.includes("analysis");return E.jsx(Yi.Header,{p:"md",children:E.jsxs(wf,{mt:-7,align:"center",children:[E.jsx(wf.Col,{span:6,children:E.jsxs(Jt,{align:"center",onClick:()=>t("/"),style:{cursor:"pointer"},children:[E.jsx(_b,{w:40,src:`${Ll}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),E.jsx(If,{w:"md"}),E.jsx(lo,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),E.jsx(wf.Col,{span:6,children:E.jsxs(Jt,{justify:"flex-end",direction:"row",children:[s&&E.jsx(OT,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:o=>t(`/analysis/stats/${o}`),mr:16}),E.jsx(Ske,{onClick:()=>t("/settings"),style:{cursor:"pointer",marginTop:s?6:void 0}})]})})]})})}function jHe({visibleParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=sZ(!1),[a,u]=N.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;Cie(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return E.jsxs(E.Fragment,{children:[E.jsxs($i,{style:{gap:n},children:[E.jsx(xs,{label:"Download all participants data as JSON",children:E.jsx(_n,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:E.jsx(lpt,{})})}),E.jsx(xs,{label:"Download all participants data as a tidy CSV",children:E.jsx(_n,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:E.jsx(Cke,{})})})]}),i&&a.length>0&&E.jsx(aUt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}var C2e={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UHe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},dvn=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},ice={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(UHe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):dvn(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new hvn;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class hvn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pvn=function(e){const t=UHe(e);return ice.encodeByteArray(t,!0)},j$=function(e){return pvn(e).replace(/\./g,"")},zHe=function(e){try{return ice.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VHe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mvn=()=>VHe().__FIREBASE_DEFAULTS__,gvn=()=>{if(typeof process>"u"||typeof C2e>"u")return;const e=C2e.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},yvn=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&zHe(e[1]);return t&&JSON.parse(t)},fj=()=>{try{return mvn()||gvn()||yvn()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},HHe=e=>{var t,n;return(n=(t=fj())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},vvn=e=>{const t=HHe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},qHe=()=>{var e;return(e=fj())===null||e===void 0?void 0:e.config},WHe=e=>{var t;return(t=fj())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bvn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[j$(JSON.stringify(n)),j$(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xvn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pu())}function wvn(){var e;const t=(e=fj())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _vn(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Evn(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Svn(){const e=pu();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Cvn(){return!wvn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sce(){try{return typeof indexedDB=="object"}catch{return!1}}function Tvn(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Avn="FirebaseError";class D0 extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Avn,Object.setPrototypeOf(this,D0.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$A.prototype.create)}}class $A{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?Dvn(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new D0(i,a,r)}}function Dvn(e,t){return e.replace(Ivn,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const Ivn=/\{\$([^}]+)}/g;function kvn(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function $3(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(T2e(s)&&T2e(o)){if(!$3(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function T2e(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Rvn(e,t){const n=new Nvn(e,t);return n.subscribe.bind(n)}class Nvn{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Pvn(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=Wq),i.error===void 0&&(i.error=Wq),i.complete===void 0&&(i.complete=Wq);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Pvn(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Wq(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ovn=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fvn=1e3,Mvn=2,$vn=4*60*60*1e3,Lvn=.5;function Bvn(e,t=Fvn,n=Mvn){const r=t*Math.pow(n,e),i=Math.round(Lvn*r*(Math.random()-.5)*2);return Math.min($vn,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(e){return e&&e._delegate?e._delegate:e}class s0{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jvn{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new M3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(zvn(t))try{this.getOrInitializeService({instanceIdentifier:qx})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=qx){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=qx){return this.instances.has(t)}getOptions(t=qx){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Uvn(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=qx){return this.component?this.component.multipleInstances?t:qx:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Uvn(e){return e===qx?void 0:e}function zvn(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vvn{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new jvn(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qr;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(qr||(qr={}));const Hvn={debug:qr.DEBUG,verbose:qr.VERBOSE,info:qr.INFO,warn:qr.WARN,error:qr.ERROR,silent:qr.SILENT},qvn=qr.INFO,Wvn={[qr.DEBUG]:"log",[qr.VERBOSE]:"log",[qr.INFO]:"info",[qr.WARN]:"warn",[qr.ERROR]:"error"},Gvn=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=Wvn[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class dj{constructor(t){this.name=t,this._logLevel=qvn,this._logHandler=Gvn,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in qr))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Hvn[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,qr.DEBUG,...t),this._logHandler(this,qr.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,qr.VERBOSE,...t),this._logHandler(this,qr.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,qr.INFO,...t),this._logHandler(this,qr.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,qr.WARN,...t),this._logHandler(this,qr.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,qr.ERROR,...t),this._logHandler(this,qr.ERROR,...t)}}const Yvn=(e,t)=>t.some(n=>e instanceof n);let A2e,D2e;function Kvn(){return A2e||(A2e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xvn(){return D2e||(D2e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GHe=new WeakMap,PQ=new WeakMap,YHe=new WeakMap,Gq=new WeakMap,oce=new WeakMap;function Qvn(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(xv(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&GHe.set(n,e)}).catch(()=>{}),oce.set(t,e),t}function Jvn(e){if(PQ.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});PQ.set(e,t)}let OQ={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return PQ.get(e);if(t==="objectStoreNames")return e.objectStoreNames||YHe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xv(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Zvn(e){OQ=e(OQ)}function ebn(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Yq(this),t,...n);return YHe.set(r,t.sort?t.sort():[t]),xv(r)}:Xvn().includes(e)?function(...t){return e.apply(Yq(this),t),xv(GHe.get(this))}:function(...t){return xv(e.apply(Yq(this),t))}}function tbn(e){return typeof e=="function"?ebn(e):(e instanceof IDBTransaction&&Jvn(e),Yvn(e,Kvn())?new Proxy(e,OQ):e)}function xv(e){if(e instanceof IDBRequest)return Qvn(e);if(Gq.has(e))return Gq.get(e);const t=tbn(e);return t!==e&&(Gq.set(e,t),oce.set(t,e)),t}const Yq=e=>oce.get(e);function nbn(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=xv(o);return r&&o.addEventListener("upgradeneeded",u=>{r(xv(o.result),u.oldVersion,u.newVersion,xv(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const rbn=["get","getKey","getAll","getAllKeys","count"],ibn=["put","add","delete","clear"],Kq=new Map;function I2e(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Kq.get(t))return Kq.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ibn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rbn.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return Kq.set(t,s),s}Zvn(e=>({...e,get:(t,n,r)=>I2e(t,n)||e.get(t,n,r),has:(t,n)=>!!I2e(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sbn{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(obn(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function obn(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const FQ="@firebase/app",k2e="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=new dj("@firebase/app"),abn="@firebase/app-compat",ubn="@firebase/analytics-compat",lbn="@firebase/analytics",cbn="@firebase/app-check-compat",fbn="@firebase/app-check",dbn="@firebase/auth",hbn="@firebase/auth-compat",pbn="@firebase/database",mbn="@firebase/database-compat",gbn="@firebase/functions",ybn="@firebase/functions-compat",vbn="@firebase/installations",bbn="@firebase/installations-compat",xbn="@firebase/messaging",wbn="@firebase/messaging-compat",_bn="@firebase/performance",Ebn="@firebase/performance-compat",Sbn="@firebase/remote-config",Cbn="@firebase/remote-config-compat",Tbn="@firebase/storage",Abn="@firebase/storage-compat",Dbn="@firebase/firestore",Ibn="@firebase/vertexai-preview",kbn="@firebase/firestore-compat",Rbn="firebase",Nbn="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MQ="[DEFAULT]",Pbn={[FQ]:"fire-core",[abn]:"fire-core-compat",[lbn]:"fire-analytics",[ubn]:"fire-analytics-compat",[fbn]:"fire-app-check",[cbn]:"fire-app-check-compat",[dbn]:"fire-auth",[hbn]:"fire-auth-compat",[pbn]:"fire-rtdb",[mbn]:"fire-rtdb-compat",[gbn]:"fire-fn",[ybn]:"fire-fn-compat",[vbn]:"fire-iid",[bbn]:"fire-iid-compat",[xbn]:"fire-fcm",[wbn]:"fire-fcm-compat",[_bn]:"fire-perf",[Ebn]:"fire-perf-compat",[Sbn]:"fire-rc",[Cbn]:"fire-rc-compat",[Tbn]:"fire-gcs",[Abn]:"fire-gcs-compat",[Dbn]:"fire-fst",[kbn]:"fire-fst-compat",[Ibn]:"fire-vertex","fire-js":"fire-js",[Rbn]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U$=new Map,Obn=new Map,$Q=new Map;function R2e(e,t){try{e.container.addComponent(t)}catch(n){T_.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function py(e){const t=e.name;if($Q.has(t))return T_.debug(`There were multiple attempts to register component ${t}.`),!1;$Q.set(t,e);for(const n of U$.values())R2e(n,e);for(const n of Obn.values())R2e(n,e);return!0}function LA(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Em(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fbn={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wv=new $A("app","Firebase",Fbn);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mbn{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new s0("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw wv.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE=Nbn;function KHe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:MQ,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw wv.create("bad-app-name",{appName:String(i)});if(n||(n=qHe()),!n)throw wv.create("no-options");const s=U$.get(i);if(s){if($3(n,s.options)&&$3(r,s.config))return s;throw wv.create("duplicate-app",{appName:i})}const o=new Vvn(i);for(const u of $Q.values())o.addComponent(u);const a=new Mbn(n,r,o);return U$.set(i,a),a}function ace(e=MQ){const t=U$.get(e);if(!t&&e===MQ&&qHe())return KHe();if(!t)throw wv.create("no-app",{appName:e});return t}function up(e,t,n){var r;let i=(r=Pbn[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),T_.warn(a.join(" "));return}py(new s0(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $bn="firebase-heartbeat-database",Lbn=1,L3="firebase-heartbeat-store";let Xq=null;function XHe(){return Xq||(Xq=nbn($bn,Lbn,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(L3)}catch(n){console.warn(n)}}}}).catch(e=>{throw wv.create("idb-open",{originalErrorMessage:e.message})})),Xq}async function Bbn(e){try{const n=(await XHe()).transaction(L3),r=await n.objectStore(L3).get(QHe(e));return await n.done,r}catch(t){if(t instanceof D0)T_.warn(t.message);else{const n=wv.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});T_.warn(n.message)}}}async function N2e(e,t){try{const r=(await XHe()).transaction(L3,"readwrite");await r.objectStore(L3).put(t,QHe(e)),await r.done}catch(n){if(n instanceof D0)T_.warn(n.message);else{const r=wv.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});T_.warn(r.message)}}}function QHe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jbn=1024,Ubn=30*24*60*60*1e3;class zbn{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Hbn(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=P2e();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Ubn}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=P2e(),{heartbeatsToSend:r,unsentEntries:i}=Vbn(this._heartbeatsCache.heartbeats),s=j$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function P2e(){return new Date().toISOString().substring(0,10)}function Vbn(e,t=jbn){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),O2e(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),O2e(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Hbn{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sce()?Tvn().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Bbn(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return N2e(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return N2e(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function O2e(e){return j$(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qbn(e){py(new s0("platform-logger",t=>new sbn(t),"PRIVATE")),py(new s0("heartbeat",t=>new zbn(t),"PRIVATE")),up(FQ,k2e,e),up(FQ,k2e,"esm2017"),up("fire-js","")}qbn("");function JHe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Wbn=JHe,ZHe=new $A("auth","Firebase",JHe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$=new dj("@firebase/auth");function Gbn(e,...t){z$.logLevel<=qr.WARN&&z$.warn(`Auth (${mE}): ${e}`,...t)}function KF(e,...t){z$.logLevel<=qr.ERROR&&z$.error(`Auth (${mE}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(e,...t){throw lce(e,...t)}function lp(e,...t){return lce(e,...t)}function uce(e,t,n){const r=Object.assign(Object.assign({},Wbn()),{[t]:n});return new $A("auth","Firebase",r).create(t,{appName:e.name})}function _v(e){return uce(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ybn(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&o0(e,"argument-error"),uce(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lce(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return ZHe.create(e,...t)}function qn(e,t,...n){if(!e)throw lce(t,...n)}function Ag(e){const t="INTERNAL ASSERTION FAILED: "+e;throw KF(t),new Error(t)}function my(e,t){e||Ag(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LQ(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Kbn(){return F2e()==="http:"||F2e()==="https:"}function F2e(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xbn(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Kbn()||_vn()||"connection"in navigator)?navigator.onLine:!0}function Qbn(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(t,n){this.shortDelay=t,this.longDelay=n,my(n>t,"Short delay should be less than long delay!"),this.isMobile=xvn()||Evn()}get(){return Xbn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cce(e,t){my(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eqe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ag("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ag("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ag("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jbn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zbn=new PP(3e4,6e4);function hj(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function BA(e,t,n,r,i={}){return tqe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=NP(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),eqe.fetch()(rqe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function tqe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Jbn),t);try{const i=new exn(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw x6(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw x6(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw x6(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw x6(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw uce(e,c,l);o0(e,c)}}catch(i){if(i instanceof D0)throw i;o0(e,"network-request-failed",{message:String(i)})}}async function nqe(e,t,n,r,i={}){const s=await BA(e,t,n,r,i);return"mfaPendingCredential"in s&&o0(e,"multi-factor-auth-required",{_serverResponse:s}),s}function rqe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?cce(e.config,i):`${e.config.apiScheme}://${i}`}class exn{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(lp(this.auth,"network-request-failed")),Zbn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function x6(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=lp(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function txn(e,t){return BA(e,"POST","/v1/accounts:delete",t)}async function iqe(e,t){return BA(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function nxn(e,t=!1){const n=gs(e),r=await n.getIdToken(t),i=fce(r);qn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Kk(Qq(i.auth_time)),issuedAtTime:Kk(Qq(i.iat)),expirationTime:Kk(Qq(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Qq(e){return Number(e)*1e3}function fce(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return KF("JWT malformed, contained fewer than 3 sections"),null;try{const i=zHe(n);return i?JSON.parse(i):(KF("Failed to decode base64 JWT payload"),null)}catch(i){return KF("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function M2e(e){const t=fce(e);return qn(t,"internal-error"),qn(typeof t.exp<"u","internal-error"),qn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B3(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof D0&&rxn(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function rxn({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ixn{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BQ{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kk(this.lastLoginAt),this.creationTime=Kk(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V$(e){var t;const n=e.auth,r=await e.getIdToken(),i=await B3(e,iqe(n,{idToken:r}));qn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?sqe(s.providerUserInfo):[],a=oxn(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new BQ(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function sxn(e){const t=gs(e);await V$(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function oxn(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function sqe(e){return e.map(t=>{var{providerId:n}=t,r=rN(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function axn(e,t){const n=await tqe(e,{},async()=>{const r=NP({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=rqe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",eqe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function uxn(e,t){return BA(e,"POST","/v2/accounts:revokeToken",hj(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){qn(t.idToken,"internal-error"),qn(typeof t.idToken<"u","internal-error"),qn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):M2e(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){qn(t.length!==0,"internal-error");const n=M2e(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(qn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await axn(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new qS;return r&&(qn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(qn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(qn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new qS,this.toJSON())}_performRefresh(){return Ag("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(e,t){qn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Dg{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=rN(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ixn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new BQ(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await B3(this,this.stsTokenManager.getToken(this.auth,t));return qn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return nxn(this,t)}reload(){return sxn(this)}_assign(t){this!==t&&(qn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Dg(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){qn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await V$(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Em(this.auth.app))return Promise.reject(_v(this.auth));const t=await this.getIdToken();return await B3(this,txn(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:_,isAnonymous:w,providerData:S,stsTokenManager:T}=n;qn(b&&T,t,"internal-error");const A=qS.fromJSON(this.name,T);qn(typeof b=="string",t,"internal-error"),s1(f,t.name),s1(d,t.name),qn(typeof _=="boolean",t,"internal-error"),qn(typeof w=="boolean",t,"internal-error"),s1(h,t.name),s1(p,t.name),s1(m,t.name),s1(g,t.name),s1(y,t.name),s1(v,t.name);const k=new Dg({uid:b,auth:t,email:d,emailVerified:_,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:A,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(k.providerData=S.map(I=>Object.assign({},I))),g&&(k._redirectEventId=g),k}static async _fromIdTokenResponse(t,n,r=!1){const i=new qS;i.updateFromServerResponse(n);const s=new Dg({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await V$(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];qn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?sqe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new qS;a.updateFromIdToken(r);const u=new Dg({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new BQ(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2e=new Map;function Ig(e){my(e instanceof Function,"Expected a class definition");let t=$2e.get(e);return t?(my(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,$2e.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oqe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}oqe.type="NONE";const L2e=oqe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(e,t,n){return`firebase:${e}:${t}:${n}`}class WS{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=XF(this.userKey,i.apiKey,s),this.fullPersistenceKey=XF("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Dg._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new WS(Ig(L2e),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Ig(L2e);const o=XF(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Dg._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new WS(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new WS(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2e(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(lqe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(aqe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(fqe(t))return"Blackberry";if(dqe(t))return"Webos";if(dce(t))return"Safari";if((t.includes("chrome/")||uqe(t))&&!t.includes("edge/"))return"Chrome";if(cqe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function aqe(e=pu()){return/firefox\//i.test(e)}function dce(e=pu()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function uqe(e=pu()){return/crios\//i.test(e)}function lqe(e=pu()){return/iemobile/i.test(e)}function cqe(e=pu()){return/android/i.test(e)}function fqe(e=pu()){return/blackberry/i.test(e)}function dqe(e=pu()){return/webos/i.test(e)}function pj(e=pu()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function lxn(e=pu()){var t;return pj(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function cxn(){return Svn()&&document.documentMode===10}function hqe(e=pu()){return pj(e)||cqe(e)||dqe(e)||fqe(e)||/windows phone/i.test(e)||lqe(e)}function fxn(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pqe(e,t=[]){let n;switch(e){case"Browser":n=B2e(pu());break;case"Worker":n=`${B2e(pu())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${mE}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dxn{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hxn(e,t={}){return BA(e,"GET","/v2/passwordPolicy",hj(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pxn=6;class mxn{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:pxn,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gxn{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new j2e(this),this.idTokenSubscription=new j2e(this),this.beforeStateQueue=new dxn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZHe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Ig(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await WS.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await iqe(this,{idToken:t}),r=await Dg._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Em(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return qn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await V$(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Qbn()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Em(this.app))return Promise.reject(_v(this));const n=t?gs(t):null;return n&&qn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&qn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Em(this.app)?Promise.reject(_v(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Em(this.app)?Promise.reject(_v(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ig(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await hxn(this),n=new mxn(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new $A("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await uxn(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Ig(t)||this._popupRedirectResolver;qn(n,this,"argument-error"),this.redirectPersistenceManager=await WS.create(this,[Ig(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(qn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return qn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=pqe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&Gbn(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function OP(e){return gs(e)}class j2e{constructor(t){this.auth=t,this.observer=null,this.addObserver=Rvn(n=>this.observer=n)}get next(){return qn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hce={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yxn(e){hce=e}function vxn(e){return hce.loadJS(e)}function bxn(){return hce.gapiScript}function xxn(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wxn(e,t){const n=LA(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if($3(s,t??{}))return i;o0(i,"already-initialized")}return n.initialize({options:t})}function _xn(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ig);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function Exn(e,t,n){const r=OP(e);qn(r._canInitEmulator,r,"emulator-config-failed"),qn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=mqe(t),{host:o,port:a}=Sxn(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Cxn()}function mqe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Sxn(e){const t=mqe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:U2e(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:U2e(o)}}}function U2e(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Cxn(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gqe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Ag("not implemented")}_getIdTokenResponse(t){return Ag("not implemented")}_linkToIdToken(t,n){return Ag("not implemented")}_getReauthenticationResolver(t){return Ag("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GS(e,t){return nqe(e,"POST","/v1/accounts:signInWithIdp",hj(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Txn="http://localhost";class A_ extends gqe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new A_(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):o0("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=rN(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new A_(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return GS(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,GS(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,GS(t,n)}buildRequest(){const t={requestUri:Txn,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=NP(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pce{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP extends pce{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1 extends FP{constructor(){super("facebook.com")}static credential(t){return A_._fromParams({providerId:N1.PROVIDER_ID,signInMethod:N1.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return N1.credentialFromTaggedObject(t)}static credentialFromError(t){return N1.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return N1.credential(t.oauthAccessToken)}catch{return null}}}N1.FACEBOOK_SIGN_IN_METHOD="facebook.com";N1.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg extends FP{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return A_._fromParams({providerId:pg.PROVIDER_ID,signInMethod:pg.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return pg.credentialFromTaggedObject(t)}static credentialFromError(t){return pg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return pg.credential(n,r)}catch{return null}}}pg.GOOGLE_SIGN_IN_METHOD="google.com";pg.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1 extends FP{constructor(){super("github.com")}static credential(t){return A_._fromParams({providerId:P1.PROVIDER_ID,signInMethod:P1.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return P1.credentialFromTaggedObject(t)}static credentialFromError(t){return P1.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return P1.credential(t.oauthAccessToken)}catch{return null}}}P1.GITHUB_SIGN_IN_METHOD="github.com";P1.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1 extends FP{constructor(){super("twitter.com")}static credential(t,n){return A_._fromParams({providerId:O1.PROVIDER_ID,signInMethod:O1.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return O1.credentialFromTaggedObject(t)}static credentialFromError(t){return O1.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return O1.credential(n,r)}catch{return null}}}O1.TWITTER_SIGN_IN_METHOD="twitter.com";O1.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Axn(e,t){return nqe(e,"POST","/v1/accounts:signUp",hj(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Dg._fromIdTokenResponse(t,r,i),o=z2e(r);return new ub({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=z2e(r);return new ub({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function z2e(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dxn(e){var t;if(Em(e.app))return Promise.reject(_v(e));const n=OP(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new ub({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Axn(n,{returnSecureToken:!0}),i=await ub._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H$ extends D0{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,H$.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new H$(t,n,r,i)}}function yqe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?H$._fromErrorAndOperation(e,s,t,r):s})}async function Ixn(e,t,n=!1){const r=await B3(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ub._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kxn(e,t,n=!1){const{auth:r}=e;if(Em(r.app))return Promise.reject(_v(r));const i="reauthenticate";try{const s=await B3(e,yqe(r,i,t,e),n);qn(s.idToken,r,"internal-error");const o=fce(s.idToken);qn(o,r,"internal-error");const{sub:a}=o;return qn(e.uid===a,r,"user-mismatch"),ub._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&o0(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rxn(e,t,n=!1){if(Em(e.app))return Promise.reject(_v(e));const r="signIn",i=await yqe(e,r,t),s=await ub._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function Nxn(e,t,n,r){return gs(e).onIdTokenChanged(t,n,r)}function Pxn(e,t,n){return gs(e).beforeAuthStateChanged(t,n)}function Oxn(e,t,n,r){return gs(e).onAuthStateChanged(t,n,r)}function Fxn(e){return gs(e).signOut()}const q$="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vqe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(q$,"1"),this.storage.removeItem(q$),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mxn(){const e=pu();return dce(e)||pj(e)}const $xn=1e3,Lxn=10;class bqe extends vqe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Mxn()&&fxn(),this.fallbackToPolling=hqe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);cxn()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,Lxn):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},$xn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}bqe.type="LOCAL";const Bxn=bqe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xqe extends vqe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}xqe.type="SESSION";const wqe=xqe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jxn(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new mj(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await jxn(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mj.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mce(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uxn{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=mce("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(){return window}function zxn(e){Lm().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _qe(){return typeof Lm().WorkerGlobalScope<"u"&&typeof Lm().importScripts=="function"}async function Vxn(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Hxn(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function qxn(){return _qe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eqe="firebaseLocalStorageDb",Wxn=1,W$="firebaseLocalStorage",Sqe="fbase_key";class MP{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gj(e,t){return e.transaction([W$],t?"readwrite":"readonly").objectStore(W$)}function Gxn(){const e=indexedDB.deleteDatabase(Eqe);return new MP(e).toPromise()}function jQ(){const e=indexedDB.open(Eqe,Wxn);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(W$,{keyPath:Sqe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(W$)?t(r):(r.close(),await Gxn(),t(await jQ()))})})}async function V2e(e,t,n){const r=gj(e,!0).put({[Sqe]:t,value:n});return new MP(r).toPromise()}async function Yxn(e,t){const n=gj(e,!1).get(t),r=await new MP(n).toPromise();return r===void 0?null:r.value}function H2e(e,t){const n=gj(e,!0).delete(t);return new MP(n).toPromise()}const Kxn=800,Xxn=3;class Cqe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jQ(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>Xxn)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _qe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mj._getInstance(qxn()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await Vxn(),!this.activeServiceWorker)return;this.sender=new Uxn(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Hxn()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await jQ();return await V2e(t,q$,"1"),await H2e(t,q$),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>V2e(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>Yxn(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>H2e(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=gj(i,!1).getAll();return new MP(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Kxn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Cqe.type="LOCAL";const Qxn=Cqe;new PP(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tqe(e,t){return t?Ig(t):(qn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gce extends gqe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return GS(t,this._buildIdpRequest())}_linkToIdToken(t,n){return GS(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return GS(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Jxn(e){return Rxn(e.auth,new gce(e),e.bypassAuthState)}function Zxn(e){const{auth:t,user:n}=e;return qn(n,t,"internal-error"),kxn(n,new gce(e),e.bypassAuthState)}async function ewn(e){const{auth:t,user:n}=e;return qn(n,t,"internal-error"),Ixn(n,new gce(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aqe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Jxn;case"linkViaPopup":case"linkViaRedirect":return ewn;case"reauthViaPopup":case"reauthViaRedirect":return Zxn;default:o0(this.auth,"internal-error")}}resolve(t){my(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){my(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const twn=new PP(2e3,1e4);async function nwn(e,t,n){if(Em(e.app))return Promise.reject(lp(e,"operation-not-supported-in-this-environment"));const r=OP(e);Ybn(e,t,pce);const i=Tqe(r,n);return new Cw(r,"signInViaPopup",t,i).executeNotNull()}class Cw extends Aqe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Cw.currentPopupAction&&Cw.currentPopupAction.cancel(),Cw.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return qn(t,this.auth,"internal-error"),t}async onExecution(){my(this.filter.length===1,"Popup operations only handle one event");const t=mce();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(lp(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(lp(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Cw.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lp(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,twn.get())};t()}}Cw.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rwn="pendingRedirect",QF=new Map;class iwn extends Aqe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=QF.get(this.auth._key());if(!t){try{const r=await swn(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}QF.set(this.auth._key(),t)}return this.bypassAuthState||QF.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function swn(e,t){const n=uwn(t),r=awn(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function own(e,t){QF.set(e._key(),t)}function awn(e){return Ig(e._redirectPersistence)}function uwn(e){return XF(rwn,e.config.apiKey,e.name)}async function lwn(e,t,n=!1){if(Em(e.app))return Promise.reject(_v(e));const r=OP(e),i=Tqe(r,t),o=await new iwn(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cwn=10*60*1e3;class fwn{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!dwn(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!Dqe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(lp(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=cwn&&this.cachedEventUids.clear(),this.cachedEventUids.has(q2e(t))}saveEventToCache(t){this.cachedEventUids.add(q2e(t)),this.lastProcessedEventTime=Date.now()}}function q2e(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Dqe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function dwn(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Dqe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hwn(e,t={}){return BA(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pwn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mwn=/^https?/;async function gwn(e){if(e.config.emulator)return;const{authorizedDomains:t}=await hwn(e);for(const n of t)try{if(ywn(n))return}catch{}o0(e,"unauthorized-domain")}function ywn(e){const t=LQ(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!mwn.test(n))return!1;if(pwn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vwn=new PP(3e4,6e4);function W2e(){const e=Lm().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function bwn(e){return new Promise((t,n)=>{var r,i,s;function o(){W2e(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{W2e(),n(lp(e,"network-request-failed"))},timeout:vwn.get()})}if(!((i=(r=Lm().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Lm().gapi)===null||s===void 0)&&s.load)o();else{const a=xxn("iframefcb");return Lm()[a]=()=>{gapi.load?o():n(lp(e,"network-request-failed"))},vxn(`${bxn()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw JF=null,t})}let JF=null;function xwn(e){return JF=JF||bwn(e),JF}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wwn=new PP(5e3,15e3),_wn="__/auth/iframe",Ewn="emulator/auth/iframe",Swn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cwn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Twn(e){const t=e.config;qn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?cce(t,Ewn):`https://${e.config.authDomain}/${_wn}`,r={apiKey:t.apiKey,appName:e.name,v:mE},i=Cwn.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${NP(r).slice(1)}`}async function Awn(e){const t=await xwn(e),n=Lm().gapi;return qn(n,e,"internal-error"),t.open({where:document.body,url:Twn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Swn,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=lp(e,"network-request-failed"),a=Lm().setTimeout(()=>{s(o)},wwn.get());function u(){Lm().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dwn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Iwn=500,kwn=600,Rwn="_blank",Nwn="http://localhost";class G2e{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Pwn(e,t,n,r=Iwn,i=kwn){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Dwn),{width:r.toString(),height:i.toString(),top:s,left:o}),l=pu().toLowerCase();n&&(a=uqe(l)?Rwn:n),aqe(l)&&(t=t||Nwn,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(lxn(l)&&a!=="_self")return Own(t||"",a),new G2e(null);const f=window.open(t||"",a,c);qn(f,e,"popup-blocked");try{f.focus()}catch{}return new G2e(f)}function Own(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fwn="__/auth/handler",Mwn="emulator/auth/handler",$wn=encodeURIComponent("fac");async function Y2e(e,t,n,r,i,s){qn(e.config.authDomain,e,"auth-domain-config-required"),qn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:mE,eventId:i};if(t instanceof pce){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",kvn(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof FP){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${$wn}=${encodeURIComponent(u)}`:"";return`${Lwn(e)}?${NP(a).slice(1)}${l}`}function Lwn({config:e}){return e.emulator?cce(e,Mwn):`https://${e.authDomain}/${Fwn}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jq="webStorageSupport";class Bwn{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wqe,this._completeRedirectFn=lwn,this._overrideRedirectResult=own}async _openPopup(t,n,r,i){var s;my((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Y2e(t,n,r,LQ(),i);return Pwn(t,o,mce())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await Y2e(t,n,r,LQ(),i);return zxn(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(my(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await Awn(t),r=new fwn(t);return n.register("authEvent",i=>(qn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Jq,{type:Jq},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Jq];o!==void 0&&n(!!o),o0(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gwn(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return hqe()||dce()||pj()}}const Iqe=Bwn;var K2e="@firebase/auth",X2e="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jwn{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){qn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uwn(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zwn(e){py(new s0("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;qn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pqe(e)},l=new gxn(r,i,s,u);return _xn(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),py(new s0("auth-internal",t=>{const n=OP(t.getProvider("auth").getImmediate());return(r=>new jwn(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),up(K2e,X2e,Uwn(e)),up(K2e,X2e,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vwn=5*60,Hwn=WHe("authIdTokenMaxAge")||Vwn;let Q2e=null;const qwn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Hwn)return;const i=n==null?void 0:n.token;Q2e!==i&&(Q2e=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function G$(e=ace()){const t=LA(e,"auth");if(t.isInitialized())return t.getImmediate();const n=wxn(e,{popupRedirectResolver:Iqe,persistence:[Qxn,Bxn,wqe]}),r=WHe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=qwn(s.toString());Pxn(n,o,()=>o(n.currentUser)),Nxn(n,a=>o(a))}}const i=HHe("auth");return i&&Exn(n,`http://${i}`),n}function Wwn(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}yxn({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=lp("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Wwn().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zwn("Browser");var Gwn="firebase",Ywn="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */up(Gwn,Ywn,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kqe="firebasestorage.googleapis.com",Rqe="storageBucket",Kwn=2*60*1e3,Xwn=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends D0{constructor(t,n,r=0){super(Zq(t),`Firebase Storage: ${n} (${Zq(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yo.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Zq(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var go;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(go||(go={}));function Zq(e){return"storage/"+e}function yce(){const e="An unknown error occurred, please check the error payload for server response.";return new yo(go.UNKNOWN,e)}function Qwn(e){return new yo(go.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Jwn(e){return new yo(go.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Zwn(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new yo(go.UNAUTHENTICATED,e)}function e_n(){return new yo(go.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function t_n(e){return new yo(go.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function n_n(){return new yo(go.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function r_n(){return new yo(go.CANCELED,"User canceled the upload/download.")}function i_n(e){return new yo(go.INVALID_URL,"Invalid URL '"+e+"'.")}function s_n(e){return new yo(go.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function o_n(){return new yo(go.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Rqe+"' property when initializing the app?")}function a_n(){return new yo(go.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function u_n(){return new yo(go.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function l_n(e){return new yo(go.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function UQ(e){return new yo(go.INVALID_ARGUMENT,e)}function Nqe(){return new yo(go.APP_DELETED,"The Firebase app was deleted.")}function c_n(e){return new yo(go.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xk(e,t){return new yo(go.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function nI(e){throw new yo(go.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Rl.makeFromUrl(t,n)}catch{return new Rl(t,"")}if(r.path==="")return r;throw s_n(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(_){_.path.charAt(_.path.length-1)==="/"&&(_.path_=_.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(_){_.path_=decodeURIComponent(_.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===kqe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let _=0;_<b.length;_++){const w=b[_],S=w.regex.exec(t);if(S){const T=S[w.indices.bucket];let A=S[w.indices.path];A||(A=""),r=new Rl(T,A),w.postModify(r);break}}if(r==null)throw i_n(t);return r}}class f_n{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_n(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function h_n(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_n(e){return e!==void 0}function m_n(e){return typeof e=="object"&&!Array.isArray(e)}function vce(e){return typeof e=="string"||e instanceof String}function J2e(e){return bce()&&e instanceof Blob}function bce(){return typeof Blob<"u"}function zQ(e,t,n,r){if(r<t)throw UQ(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw UQ(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function Pqe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jw;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(jw||(jw={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_n(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_n{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new w6(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===jw.NO_ERROR,u=s.getStatus();if(!a||g_n(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===jw.ABORT;r(!1,new w6(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new w6(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());p_n(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=yce();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?Nqe():r_n();o(u)}else{const u=n_n();o(u)}};this.canceled_?n(!1,new w6(!1,null,!0)):this.backoffId_=d_n(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&h_n(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class w6{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function v_n(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function b_n(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function x_n(e,t){t&&(e["X-Firebase-GMPID"]=t)}function w_n(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function __n(e,t,n,r,i,s,o=!0){const a=Pqe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return x_n(l,t),v_n(l,n),b_n(l,s),w_n(l,r),new y_n(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_n(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function S_n(...e){const t=E_n();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(bce())return new Blob(e);throw new yo(go.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function C_n(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_n(e){if(typeof atob>"u")throw l_n("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class eW{constructor(t,n){this.data=t,this.contentType=n||null}}function A_n(e,t){switch(e){case Sm.RAW:return new eW(Oqe(t));case Sm.BASE64:case Sm.BASE64URL:return new eW(Fqe(e,t));case Sm.DATA_URL:return new eW(I_n(t),k_n(t))}throw yce()}function Oqe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function D_n(e){let t;try{t=decodeURIComponent(e)}catch{throw Xk(Sm.DATA_URL,"Malformed data URL.")}return Oqe(t)}function Fqe(e,t){switch(e){case Sm.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw Xk(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Sm.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw Xk(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=T_n(t)}catch(i){throw i.message.includes("polyfill")?i:Xk(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Mqe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw Xk(Sm.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=R_n(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function I_n(e){const t=new Mqe(e);return t.base64?Fqe(Sm.BASE64,t.rest):D_n(t.rest)}function k_n(e){return new Mqe(e).contentType}function R_n(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(t,n){let r=0,i="";J2e(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(J2e(this.data_)){const r=this.data_,i=C_n(r,t,n);return i===null?null:new F1(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new F1(r,!0)}}static getBlob(...t){if(bce()){const n=t.map(r=>r instanceof F1?r.data_:r);return new F1(S_n.apply(null,n))}else{const n=t.map(o=>vce(o)?A_n(Sm.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new F1(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xce(e){let t;try{t=JSON.parse(e)}catch{return null}return m_n(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_n(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function P_n(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function $qe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_n(e,t){return t}class bl{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||O_n}}let _6=null;function F_n(e){return!vce(e)||e.length<2?e:$qe(e)}function Lqe(){if(_6)return _6;const e=[];e.push(new bl("bucket")),e.push(new bl("generation")),e.push(new bl("metageneration")),e.push(new bl("name","fullPath",!0));function t(s,o){return F_n(o)}const n=new bl("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new bl("size");return i.xform=r,e.push(i),e.push(new bl("timeCreated")),e.push(new bl("updated")),e.push(new bl("md5Hash",null,!0)),e.push(new bl("cacheControl",null,!0)),e.push(new bl("contentDisposition",null,!0)),e.push(new bl("contentEncoding",null,!0)),e.push(new bl("contentLanguage",null,!0)),e.push(new bl("contentType",null,!0)),e.push(new bl("metadata","customMetadata",!0)),_6=e,_6}function M_n(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Rl(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function $_n(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return M_n(r,e),r}function Bqe(e,t,n){const r=xce(t);return r===null?null:$_n(e,r,n)}function L_n(e,t,n,r){const i=xce(t);if(i===null||!vce(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=$P(d,n,r),p=Pqe({alt:"media",token:l});return h+p})[0]}function B_n(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2e="prefixes",eSe="items";function j_n(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Z2e])for(const i of n[Z2e]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Rl(t,s));r.prefixes.push(o)}if(n[eSe])for(const i of n[eSe]){const s=e._makeStorageReference(new Rl(t,i.name));r.items.push(s)}return r}function U_n(e,t,n){const r=xce(n);return r===null?null:j_n(e,t,r)}class yj{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wce(e){if(!e)throw yce()}function z_n(e,t){function n(r,i){const s=Bqe(e,i,t);return wce(s!==null),s}return n}function V_n(e,t){function n(r,i){const s=U_n(e,t,i);return wce(s!==null),s}return n}function H_n(e,t){function n(r,i){const s=Bqe(e,i,t);return wce(s!==null),L_n(s,i,e.host,e._protocol)}return n}function _ce(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=e_n():i=Zwn():n.getStatus()===402?i=Jwn(e.bucket):n.getStatus()===403?i=t_n(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function jqe(e){const t=_ce(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=Qwn(e.path)),s.serverResponse=i.serverResponse,s}return n}function q_n(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=$P(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new yj(a,u,V_n(e,t.bucket),l);return c.urlParams=s,c.errorHandler=_ce(t),c}function W_n(e,t,n){const r=t.fullServerUrl(),i=$P(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new yj(i,s,H_n(e,n),o);return a.errorHandler=jqe(t),a}function G_n(e,t){const n=t.fullServerUrl(),r=$P(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new yj(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=jqe(t),a}function Y_n(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function K_n(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=Y_n(null,t)),r}function X_n(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let _=0;_<2;_++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=K_n(t,r,i),c=B_n(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=F1.getBlob(f,r,d);if(h===null)throw a_n();const p={name:l.fullPath},m=$P(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new yj(m,g,z_n(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=_ce(t),v}class Q_n{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=jw.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=jw.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=jw.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw nI("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw nI("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw nI("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw nI("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw nI("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class J_n extends Q_n{initXhr(){this.xhr_.responseType="text"}}function vj(){return new J_n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(t,n){this._service=t,n instanceof Rl?this._location=n:this._location=Rl.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new D_(t,n)}get root(){const t=new Rl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $qe(this._location.path)}get storage(){return this._service}get parent(){const t=N_n(this._location.path);if(t===null)return null;const n=new Rl(this._location.bucket,t);return new D_(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw c_n(t)}}function Z_n(e,t,n){e._throwIfRoot("uploadBytes");const r=X_n(e.storage,e._location,Lqe(),new F1(t,!0),n);return e.storage.makeRequestWithTokens(r,vj).then(i=>({metadata:i,ref:e}))}function eEn(e){const t={prefixes:[],items:[]};return Uqe(e,t).then(()=>t)}async function Uqe(e,t,n){const i=await tEn(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await Uqe(e,t,i.nextPageToken)}function tEn(e,t){t!=null&&typeof t.maxResults=="number"&&zQ("options.maxResults",1,1e3,t.maxResults);const n=t,r=q_n(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,vj)}function nEn(e){e._throwIfRoot("getDownloadURL");const t=W_n(e.storage,e._location,Lqe());return e.storage.makeRequestWithTokens(t,vj).then(n=>{if(n===null)throw u_n();return n})}function rEn(e){e._throwIfRoot("deleteObject");const t=G_n(e.storage,e._location);return e.storage.makeRequestWithTokens(t,vj)}function iEn(e,t){const n=P_n(e._location.path,t),r=new Rl(e._location.bucket,n);return new D_(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sEn(e){return/^[A-Za-z]+:\/\//.test(e)}function oEn(e,t){return new D_(e,t)}function zqe(e,t){if(e instanceof Ece){const n=e;if(n._bucket==null)throw o_n();const r=new D_(n,n._bucket);return t!=null?zqe(r,t):r}else return t!==void 0?iEn(e,t):e}function aEn(e,t){if(t&&sEn(t)){if(e instanceof Ece)return oEn(e,t);throw UQ("To use ref(service, url), the first argument must be a Storage instance.")}else return zqe(e,t)}function tSe(e,t){const n=t==null?void 0:t[Rqe];return n==null?null:Rl.makeFromBucketSpec(n,e)}function uEn(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:bvn(i,e.app.options.projectId))}class Ece{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=kqe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Kwn,this._maxUploadRetryTime=Xwn,this._requests=new Set,i!=null?this._bucket=Rl.makeFromBucketSpec(i,this._host):this._bucket=tSe(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Rl.makeFromBucketSpec(this._url,t):this._bucket=tSe(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){zQ("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){zQ("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new D_(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new f_n(Nqe());{const o=__n(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const nSe="@firebase/storage",rSe="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vqe="storage";function E6(e,t,n){return e=gs(e),Z_n(e,t,n)}function rI(e){return e=gs(e),eEn(e)}function S6(e){return e=gs(e),nEn(e)}function iSe(e){return e=gs(e),rEn(e)}function uf(e,t){return e=gs(e),aEn(e,t)}function sSe(e=ace(),t){e=gs(e);const r=LA(e,Vqe).getImmediate({identifier:t}),i=vvn("storage");return i&&lEn(r,...i),r}function lEn(e,t,n,r={}){uEn(e,t,n,r)}function cEn(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Ece(n,r,i,t,mE)}function fEn(){py(new s0(Vqe,cEn,"PUBLIC").setMultipleInstances(!0)),up(nSe,rSe,""),up(nSe,rSe,"esm2017")}fEn();var oSe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Uw,Hqe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,A){function k(){}k.prototype=A.prototype,T.D=A.prototype,T.prototype=new k,T.prototype.constructor=T,T.C=function(I,R,F){for(var O=Array(arguments.length-2),L=2;L<arguments.length;L++)O[L-2]=arguments[L];return A.prototype[R].apply(I,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,A,k){k||(k=0);var I=Array(16);if(typeof A=="string")for(var R=0;16>R;++R)I[R]=A.charCodeAt(k++)|A.charCodeAt(k++)<<8|A.charCodeAt(k++)<<16|A.charCodeAt(k++)<<24;else for(R=0;16>R;++R)I[R]=A[k++]|A[k++]<<8|A[k++]<<16|A[k++]<<24;A=T.g[0],k=T.g[1],R=T.g[2];var F=T.g[3],O=A+(F^k&(R^F))+I[0]+3614090360&4294967295;A=k+(O<<7&4294967295|O>>>25),O=F+(R^A&(k^R))+I[1]+3905402710&4294967295,F=A+(O<<12&4294967295|O>>>20),O=R+(k^F&(A^k))+I[2]+606105819&4294967295,R=F+(O<<17&4294967295|O>>>15),O=k+(A^R&(F^A))+I[3]+3250441966&4294967295,k=R+(O<<22&4294967295|O>>>10),O=A+(F^k&(R^F))+I[4]+4118548399&4294967295,A=k+(O<<7&4294967295|O>>>25),O=F+(R^A&(k^R))+I[5]+1200080426&4294967295,F=A+(O<<12&4294967295|O>>>20),O=R+(k^F&(A^k))+I[6]+2821735955&4294967295,R=F+(O<<17&4294967295|O>>>15),O=k+(A^R&(F^A))+I[7]+4249261313&4294967295,k=R+(O<<22&4294967295|O>>>10),O=A+(F^k&(R^F))+I[8]+1770035416&4294967295,A=k+(O<<7&4294967295|O>>>25),O=F+(R^A&(k^R))+I[9]+2336552879&4294967295,F=A+(O<<12&4294967295|O>>>20),O=R+(k^F&(A^k))+I[10]+4294925233&4294967295,R=F+(O<<17&4294967295|O>>>15),O=k+(A^R&(F^A))+I[11]+2304563134&4294967295,k=R+(O<<22&4294967295|O>>>10),O=A+(F^k&(R^F))+I[12]+1804603682&4294967295,A=k+(O<<7&4294967295|O>>>25),O=F+(R^A&(k^R))+I[13]+4254626195&4294967295,F=A+(O<<12&4294967295|O>>>20),O=R+(k^F&(A^k))+I[14]+2792965006&4294967295,R=F+(O<<17&4294967295|O>>>15),O=k+(A^R&(F^A))+I[15]+1236535329&4294967295,k=R+(O<<22&4294967295|O>>>10),O=A+(R^F&(k^R))+I[1]+4129170786&4294967295,A=k+(O<<5&4294967295|O>>>27),O=F+(k^R&(A^k))+I[6]+3225465664&4294967295,F=A+(O<<9&4294967295|O>>>23),O=R+(A^k&(F^A))+I[11]+643717713&4294967295,R=F+(O<<14&4294967295|O>>>18),O=k+(F^A&(R^F))+I[0]+3921069994&4294967295,k=R+(O<<20&4294967295|O>>>12),O=A+(R^F&(k^R))+I[5]+3593408605&4294967295,A=k+(O<<5&4294967295|O>>>27),O=F+(k^R&(A^k))+I[10]+38016083&4294967295,F=A+(O<<9&4294967295|O>>>23),O=R+(A^k&(F^A))+I[15]+3634488961&4294967295,R=F+(O<<14&4294967295|O>>>18),O=k+(F^A&(R^F))+I[4]+3889429448&4294967295,k=R+(O<<20&4294967295|O>>>12),O=A+(R^F&(k^R))+I[9]+568446438&4294967295,A=k+(O<<5&4294967295|O>>>27),O=F+(k^R&(A^k))+I[14]+3275163606&4294967295,F=A+(O<<9&4294967295|O>>>23),O=R+(A^k&(F^A))+I[3]+4107603335&4294967295,R=F+(O<<14&4294967295|O>>>18),O=k+(F^A&(R^F))+I[8]+1163531501&4294967295,k=R+(O<<20&4294967295|O>>>12),O=A+(R^F&(k^R))+I[13]+2850285829&4294967295,A=k+(O<<5&4294967295|O>>>27),O=F+(k^R&(A^k))+I[2]+4243563512&4294967295,F=A+(O<<9&4294967295|O>>>23),O=R+(A^k&(F^A))+I[7]+1735328473&4294967295,R=F+(O<<14&4294967295|O>>>18),O=k+(F^A&(R^F))+I[12]+2368359562&4294967295,k=R+(O<<20&4294967295|O>>>12),O=A+(k^R^F)+I[5]+4294588738&4294967295,A=k+(O<<4&4294967295|O>>>28),O=F+(A^k^R)+I[8]+2272392833&4294967295,F=A+(O<<11&4294967295|O>>>21),O=R+(F^A^k)+I[11]+1839030562&4294967295,R=F+(O<<16&4294967295|O>>>16),O=k+(R^F^A)+I[14]+4259657740&4294967295,k=R+(O<<23&4294967295|O>>>9),O=A+(k^R^F)+I[1]+2763975236&4294967295,A=k+(O<<4&4294967295|O>>>28),O=F+(A^k^R)+I[4]+1272893353&4294967295,F=A+(O<<11&4294967295|O>>>21),O=R+(F^A^k)+I[7]+4139469664&4294967295,R=F+(O<<16&4294967295|O>>>16),O=k+(R^F^A)+I[10]+3200236656&4294967295,k=R+(O<<23&4294967295|O>>>9),O=A+(k^R^F)+I[13]+681279174&4294967295,A=k+(O<<4&4294967295|O>>>28),O=F+(A^k^R)+I[0]+3936430074&4294967295,F=A+(O<<11&4294967295|O>>>21),O=R+(F^A^k)+I[3]+3572445317&4294967295,R=F+(O<<16&4294967295|O>>>16),O=k+(R^F^A)+I[6]+76029189&4294967295,k=R+(O<<23&4294967295|O>>>9),O=A+(k^R^F)+I[9]+3654602809&4294967295,A=k+(O<<4&4294967295|O>>>28),O=F+(A^k^R)+I[12]+3873151461&4294967295,F=A+(O<<11&4294967295|O>>>21),O=R+(F^A^k)+I[15]+530742520&4294967295,R=F+(O<<16&4294967295|O>>>16),O=k+(R^F^A)+I[2]+3299628645&4294967295,k=R+(O<<23&4294967295|O>>>9),O=A+(R^(k|~F))+I[0]+4096336452&4294967295,A=k+(O<<6&4294967295|O>>>26),O=F+(k^(A|~R))+I[7]+1126891415&4294967295,F=A+(O<<10&4294967295|O>>>22),O=R+(A^(F|~k))+I[14]+2878612391&4294967295,R=F+(O<<15&4294967295|O>>>17),O=k+(F^(R|~A))+I[5]+4237533241&4294967295,k=R+(O<<21&4294967295|O>>>11),O=A+(R^(k|~F))+I[12]+1700485571&4294967295,A=k+(O<<6&4294967295|O>>>26),O=F+(k^(A|~R))+I[3]+2399980690&4294967295,F=A+(O<<10&4294967295|O>>>22),O=R+(A^(F|~k))+I[10]+4293915773&4294967295,R=F+(O<<15&4294967295|O>>>17),O=k+(F^(R|~A))+I[1]+2240044497&4294967295,k=R+(O<<21&4294967295|O>>>11),O=A+(R^(k|~F))+I[8]+1873313359&4294967295,A=k+(O<<6&4294967295|O>>>26),O=F+(k^(A|~R))+I[15]+4264355552&4294967295,F=A+(O<<10&4294967295|O>>>22),O=R+(A^(F|~k))+I[6]+2734768916&4294967295,R=F+(O<<15&4294967295|O>>>17),O=k+(F^(R|~A))+I[13]+1309151649&4294967295,k=R+(O<<21&4294967295|O>>>11),O=A+(R^(k|~F))+I[4]+4149444226&4294967295,A=k+(O<<6&4294967295|O>>>26),O=F+(k^(A|~R))+I[11]+3174756917&4294967295,F=A+(O<<10&4294967295|O>>>22),O=R+(A^(F|~k))+I[2]+718787259&4294967295,R=F+(O<<15&4294967295|O>>>17),O=k+(F^(R|~A))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+A&4294967295,T.g[1]=T.g[1]+(R+(O<<21&4294967295|O>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+F&4294967295}r.prototype.u=function(T,A){A===void 0&&(A=T.length);for(var k=A-this.blockSize,I=this.B,R=this.h,F=0;F<A;){if(R==0)for(;F<=k;)i(this,T,F),F+=this.blockSize;if(typeof T=="string"){for(;F<A;)if(I[R++]=T.charCodeAt(F++),R==this.blockSize){i(this,I),R=0;break}}else for(;F<A;)if(I[R++]=T[F++],R==this.blockSize){i(this,I),R=0;break}}this.h=R,this.o+=A},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var A=1;A<T.length-8;++A)T[A]=0;var k=8*this.o;for(A=T.length-8;A<T.length;++A)T[A]=k&255,k/=256;for(this.u(T),T=Array(16),A=k=0;4>A;++A)for(var I=0;32>I;I+=8)T[k++]=this.g[A]>>>I&255;return T};function s(T,A){var k=a;return Object.prototype.hasOwnProperty.call(k,T)?k[T]:k[T]=A(T)}function o(T,A){this.h=A;for(var k=[],I=!0,R=T.length-1;0<=R;R--){var F=T[R]|0;I&&F==A||(k[R]=F,I=!1)}this.g=k}var a={};function u(T){return-128<=T&&128>T?s(T,function(A){return new o([A|0],0>A?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return g(l(-T));for(var A=[],k=1,I=0;T>=k;I++)A[I]=T/k|0,k*=4294967296;return new o(A,0)}function c(T,A){if(T.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(T.charAt(0)=="-")return g(c(T.substring(1),A));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=l(Math.pow(A,8)),I=f,R=0;R<T.length;R+=8){var F=Math.min(8,T.length-R),O=parseInt(T.substring(R,R+F),A);8>F?(F=l(Math.pow(A,F)),I=I.j(F).add(l(O))):(I=I.j(k),I=I.add(l(O)))}return I}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var T=0,A=1,k=0;k<this.g.length;k++){var I=this.i(k);T+=(0<=I?I:4294967296+I)*A,A*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(p(this))return"0";if(m(this))return"-"+g(this).toString(T);for(var A=l(Math.pow(T,6)),k=this,I="";;){var R=_(k,A).g;k=y(k,R.j(A));var F=((0<k.g.length?k.g[0]:k.h)>>>0).toString(T);if(k=R,p(k))return F+I;for(;6>F.length;)F="0"+F;I=F+I}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function p(T){if(T.h!=0)return!1;for(var A=0;A<T.g.length;A++)if(T.g[A]!=0)return!1;return!0}function m(T){return T.h==-1}e.l=function(T){return T=y(this,T),m(T)?-1:p(T)?0:1};function g(T){for(var A=T.g.length,k=[],I=0;I<A;I++)k[I]=~T.g[I];return new o(k,~T.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(T){for(var A=Math.max(this.g.length,T.g.length),k=[],I=0,R=0;R<=A;R++){var F=I+(this.i(R)&65535)+(T.i(R)&65535),O=(F>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);I=O>>>16,F&=65535,O&=65535,k[R]=O<<16|F}return new o(k,k[k.length-1]&-2147483648?-1:0)};function y(T,A){return T.add(g(A))}e.j=function(T){if(p(this)||p(T))return f;if(m(this))return m(T)?g(this).j(g(T)):g(g(this).j(T));if(m(T))return g(this.j(g(T)));if(0>this.l(h)&&0>T.l(h))return l(this.m()*T.m());for(var A=this.g.length+T.g.length,k=[],I=0;I<2*A;I++)k[I]=0;for(I=0;I<this.g.length;I++)for(var R=0;R<T.g.length;R++){var F=this.i(I)>>>16,O=this.i(I)&65535,L=T.i(R)>>>16,H=T.i(R)&65535;k[2*I+2*R]+=O*H,v(k,2*I+2*R),k[2*I+2*R+1]+=F*H,v(k,2*I+2*R+1),k[2*I+2*R+1]+=O*L,v(k,2*I+2*R+1),k[2*I+2*R+2]+=F*L,v(k,2*I+2*R+2)}for(I=0;I<A;I++)k[I]=k[2*I+1]<<16|k[2*I];for(I=A;I<2*A;I++)k[I]=0;return new o(k,0)};function v(T,A){for(;(T[A]&65535)!=T[A];)T[A+1]+=T[A]>>>16,T[A]&=65535,A++}function b(T,A){this.g=T,this.h=A}function _(T,A){if(p(A))throw Error("division by zero");if(p(T))return new b(f,f);if(m(T))return A=_(g(T),A),new b(g(A.g),g(A.h));if(m(A))return A=_(T,g(A)),new b(g(A.g),A.h);if(30<T.g.length){if(m(T)||m(A))throw Error("slowDivide_ only works with positive integers.");for(var k=d,I=A;0>=I.l(T);)k=w(k),I=w(I);var R=S(k,1),F=S(I,1);for(I=S(I,2),k=S(k,2);!p(I);){var O=F.add(I);0>=O.l(T)&&(R=R.add(k),F=O),I=S(I,1),k=S(k,1)}return A=y(T,R.j(A)),new b(R,A)}for(R=f;0<=T.l(A);){for(k=Math.max(1,Math.floor(T.m()/A.m())),I=Math.ceil(Math.log(k)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),F=l(k),O=F.j(A);m(O)||0<O.l(T);)k-=I,F=l(k),O=F.j(A);p(F)&&(F=d),R=R.add(F),T=y(T,O)}return new b(R,T)}e.A=function(T){return _(this,T).h},e.and=function(T){for(var A=Math.max(this.g.length,T.g.length),k=[],I=0;I<A;I++)k[I]=this.i(I)&T.i(I);return new o(k,this.h&T.h)},e.or=function(T){for(var A=Math.max(this.g.length,T.g.length),k=[],I=0;I<A;I++)k[I]=this.i(I)|T.i(I);return new o(k,this.h|T.h)},e.xor=function(T){for(var A=Math.max(this.g.length,T.g.length),k=[],I=0;I<A;I++)k[I]=this.i(I)^T.i(I);return new o(k,this.h^T.h)};function w(T){for(var A=T.g.length+1,k=[],I=0;I<A;I++)k[I]=T.i(I)<<1|T.i(I-1)>>>31;return new o(k,T.h)}function S(T,A){var k=A>>5;A%=32;for(var I=T.g.length-k,R=[],F=0;F<I;F++)R[F]=0<A?T.i(F+k)>>>A|T.i(F+k+1)<<32-A:T.i(F+k);return new o(R,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Hqe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,Uw=o}).apply(typeof oSe<"u"?oSe:typeof self<"u"?self:typeof window<"u"?window:{});var C6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qqe,Wqe,XI,Gqe,ZF,VQ,Yqe,Kqe,Xqe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(D,z,K){return D==Array.prototype||D==Object.prototype||(D[z]=K.value),D};function n(D){D=[typeof globalThis=="object"&&globalThis,D,typeof window=="object"&&window,typeof self=="object"&&self,typeof C6=="object"&&C6];for(var z=0;z<D.length;++z){var K=D[z];if(K&&K.Math==Math)return K}throw Error("Cannot find global object")}var r=n(this);function i(D,z){if(z)e:{var K=r;D=D.split(".");for(var ie=0;ie<D.length-1;ie++){var Me=D[ie];if(!(Me in K))break e;K=K[Me]}D=D[D.length-1],ie=K[D],z=z(ie),z!=ie&&z!=null&&t(K,D,{configurable:!0,writable:!0,value:z})}}function s(D,z){D instanceof String&&(D+="");var K=0,ie=!1,Me={next:function(){if(!ie&&K<D.length){var Ge=K++;return{value:z(Ge,D[Ge]),done:!1}}return ie=!0,{done:!0,value:void 0}}};return Me[Symbol.iterator]=function(){return Me},Me}i("Array.prototype.values",function(D){return D||function(){return s(this,function(z,K){return K})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(D){var z=typeof D;return z=z!="object"?z:D?Array.isArray(D)?"array":z:"null",z=="array"||z=="object"&&typeof D.length=="number"}function l(D){var z=typeof D;return z=="object"&&D!=null||z=="function"}function c(D,z,K){return D.call.apply(D.bind,arguments)}function f(D,z,K){if(!D)throw Error();if(2<arguments.length){var ie=Array.prototype.slice.call(arguments,2);return function(){var Me=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Me,ie),D.apply(z,Me)}}return function(){return D.apply(z,arguments)}}function d(D,z,K){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(D,z){var K=Array.prototype.slice.call(arguments,1);return function(){var ie=K.slice();return ie.push.apply(ie,arguments),D.apply(this,ie)}}function p(D,z){function K(){}K.prototype=z.prototype,D.aa=z.prototype,D.prototype=new K,D.prototype.constructor=D,D.Qb=function(ie,Me,Ge){for(var Ft=Array(arguments.length-2),Si=2;Si<arguments.length;Si++)Ft[Si-2]=arguments[Si];return z.prototype[Me].apply(ie,Ft)}}function m(D){const z=D.length;if(0<z){const K=Array(z);for(let ie=0;ie<z;ie++)K[ie]=D[ie];return K}return[]}function g(D,z){for(let K=1;K<arguments.length;K++){const ie=arguments[K];if(u(ie)){const Me=D.length||0,Ge=ie.length||0;D.length=Me+Ge;for(let Ft=0;Ft<Ge;Ft++)D[Me+Ft]=ie[Ft]}else D.push(ie)}}class y{constructor(z,K){this.i=z,this.j=K,this.h=0,this.g=null}get(){let z;return 0<this.h?(this.h--,z=this.g,this.g=z.next,z.next=null):z=this.i(),z}}function v(D){return/^[\s\xa0]*$/.test(D)}function b(){var D=a.navigator;return D&&(D=D.userAgent)?D:""}function _(D){return _[" "](D),D}_[" "]=function(){};var w=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function S(D,z,K){for(const ie in D)z.call(K,D[ie],ie,D)}function T(D,z){for(const K in D)z.call(void 0,D[K],K,D)}function A(D){const z={};for(const K in D)z[K]=D[K];return z}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(D,z){let K,ie;for(let Me=1;Me<arguments.length;Me++){ie=arguments[Me];for(K in ie)D[K]=ie[K];for(let Ge=0;Ge<k.length;Ge++)K=k[Ge],Object.prototype.hasOwnProperty.call(ie,K)&&(D[K]=ie[K])}}function R(D){var z=1;D=D.split(":");const K=[];for(;0<z&&D.length;)K.push(D.shift()),z--;return D.length&&K.push(D.join(":")),K}function F(D){a.setTimeout(()=>{throw D},0)}function O(){var D=J;let z=null;return D.g&&(z=D.g,D.g=D.g.next,D.g||(D.h=null),z.next=null),z}class L{constructor(){this.h=this.g=null}add(z,K){const ie=H.get();ie.set(z,K),this.h?this.h.next=ie:this.g=ie,this.h=ie}}var H=new y(()=>new U,D=>D.reset());class U{constructor(){this.next=this.g=this.h=null}set(z,K){this.h=z,this.g=K,this.next=null}reset(){this.next=this.g=this.h=null}}let G,Y=!1,J=new L,$=()=>{const D=a.Promise.resolve(void 0);G=()=>{D.then(j)}};var j=()=>{for(var D;D=O();){try{D.h.call(D.g)}catch(K){F(K)}var z=H;z.j(D),100>z.h&&(z.h++,D.next=z.g,z.g=D)}Y=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(D,z){this.type=D,this.g=this.target=z,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var D=!1,z=Object.defineProperty({},"passive",{get:function(){D=!0}});try{const K=()=>{};a.addEventListener("test",K,z),a.removeEventListener("test",K,z)}catch{}return D}();function Z(D,z){if(B.call(this,D?D.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,D){var K=this.type=D.type,ie=D.changedTouches&&D.changedTouches.length?D.changedTouches[0]:null;if(this.target=D.target||D.srcElement,this.g=z,z=D.relatedTarget){if(w){e:{try{_(z.nodeName);var Me=!0;break e}catch{}Me=!1}Me||(z=null)}}else K=="mouseover"?z=D.fromElement:K=="mouseout"&&(z=D.toElement);this.relatedTarget=z,ie?(this.clientX=ie.clientX!==void 0?ie.clientX:ie.pageX,this.clientY=ie.clientY!==void 0?ie.clientY:ie.pageY,this.screenX=ie.screenX||0,this.screenY=ie.screenY||0):(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0),this.button=D.button,this.key=D.key||"",this.ctrlKey=D.ctrlKey,this.altKey=D.altKey,this.shiftKey=D.shiftKey,this.metaKey=D.metaKey,this.pointerId=D.pointerId||0,this.pointerType=typeof D.pointerType=="string"?D.pointerType:re[D.pointerType]||"",this.state=D.state,this.i=D,D.defaultPrevented&&Z.aa.h.call(this)}}p(Z,B);var re={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var D=this.i;D.preventDefault?D.preventDefault():D.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),pe=0;function Te(D,z,K,ie,Me){this.listener=D,this.proxy=null,this.src=z,this.type=K,this.capture=!!ie,this.ha=Me,this.key=++pe,this.da=this.fa=!1}function ke(D){D.da=!0,D.listener=null,D.proxy=null,D.src=null,D.ha=null}function it(D){this.src=D,this.g={},this.h=0}it.prototype.add=function(D,z,K,ie,Me){var Ge=D.toString();D=this.g[Ge],D||(D=this.g[Ge]=[],this.h++);var Ft=ut(D,z,ie,Me);return-1<Ft?(z=D[Ft],K||(z.fa=!1)):(z=new Te(z,this.src,Ge,!!ie,Me),z.fa=K,D.push(z)),z};function Re(D,z){var K=z.type;if(K in D.g){var ie=D.g[K],Me=Array.prototype.indexOf.call(ie,z,void 0),Ge;(Ge=0<=Me)&&Array.prototype.splice.call(ie,Me,1),Ge&&(ke(z),D.g[K].length==0&&(delete D.g[K],D.h--))}}function ut(D,z,K,ie){for(var Me=0;Me<D.length;++Me){var Ge=D[Me];if(!Ge.da&&Ge.listener==z&&Ge.capture==!!K&&Ge.ha==ie)return Me}return-1}var Ke="closure_lm_"+(1e6*Math.random()|0),Ct={};function gt(D,z,K,ie,Me){if(Array.isArray(z)){for(var Ge=0;Ge<z.length;Ge++)gt(D,z[Ge],K,ie,Me);return null}return K=we(K),D&&D[xe]?D.K(z,K,l(ie)?!!ie.capture:!1,Me):Ie(D,z,K,!1,ie,Me)}function Ie(D,z,K,ie,Me,Ge){if(!z)throw Error("Invalid event type");var Ft=l(Me)?!!Me.capture:!!Me,Si=X(D);if(Si||(D[Ke]=Si=new it(D)),K=Si.add(z,K,ie,Ft,Ge),K.proxy)return K;if(ie=Ve(),K.proxy=ie,ie.src=D,ie.listener=K,D.addEventListener)q||(Me=Ft),Me===void 0&&(Me=!1),D.addEventListener(z.toString(),ie,Me);else if(D.attachEvent)D.attachEvent(Mt(z.toString()),ie);else if(D.addListener&&D.removeListener)D.addListener(ie);else throw Error("addEventListener and attachEvent are unavailable.");return K}function Ve(){function D(K){return z.call(D.src,D.listener,K)}const z=st;return D}function ft(D,z,K,ie,Me){if(Array.isArray(z))for(var Ge=0;Ge<z.length;Ge++)ft(D,z[Ge],K,ie,Me);else ie=l(ie)?!!ie.capture:!!ie,K=we(K),D&&D[xe]?(D=D.i,z=String(z).toString(),z in D.g&&(Ge=D.g[z],K=ut(Ge,K,ie,Me),-1<K&&(ke(Ge[K]),Array.prototype.splice.call(Ge,K,1),Ge.length==0&&(delete D.g[z],D.h--)))):D&&(D=X(D))&&(z=D.g[z.toString()],D=-1,z&&(D=ut(z,K,ie,Me)),(K=-1<D?z[D]:null)&&_t(K))}function _t(D){if(typeof D!="number"&&D&&!D.da){var z=D.src;if(z&&z[xe])Re(z.i,D);else{var K=D.type,ie=D.proxy;z.removeEventListener?z.removeEventListener(K,ie,D.capture):z.detachEvent?z.detachEvent(Mt(K),ie):z.addListener&&z.removeListener&&z.removeListener(ie),(K=X(z))?(Re(K,D),K.h==0&&(K.src=null,z[Ke]=null)):ke(D)}}}function Mt(D){return D in Ct?Ct[D]:Ct[D]="on"+D}function st(D,z){if(D.da)D=!0;else{z=new Z(z,this);var K=D.listener,ie=D.ha||D.src;D.fa&&_t(D),D=K.call(ie,z)}return D}function X(D){return D=D[Ke],D instanceof it?D:null}var de="__closure_events_fn_"+(1e9*Math.random()>>>0);function we(D){return typeof D=="function"?D:(D[de]||(D[de]=function(z){return D.handleEvent(z)}),D[de])}function ae(){W.call(this),this.i=new it(this),this.M=this,this.F=null}p(ae,W),ae.prototype[xe]=!0,ae.prototype.removeEventListener=function(D,z,K,ie){ft(this,D,z,K,ie)};function he(D,z){var K,ie=D.F;if(ie)for(K=[];ie;ie=ie.F)K.push(ie);if(D=D.M,ie=z.type||z,typeof z=="string")z=new B(z,D);else if(z instanceof B)z.target=z.target||D;else{var Me=z;z=new B(ie,D),I(z,Me)}if(Me=!0,K)for(var Ge=K.length-1;0<=Ge;Ge--){var Ft=z.g=K[Ge];Me=Ee(Ft,ie,!0,z)&&Me}if(Ft=z.g=D,Me=Ee(Ft,ie,!0,z)&&Me,Me=Ee(Ft,ie,!1,z)&&Me,K)for(Ge=0;Ge<K.length;Ge++)Ft=z.g=K[Ge],Me=Ee(Ft,ie,!1,z)&&Me}ae.prototype.N=function(){if(ae.aa.N.call(this),this.i){var D=this.i,z;for(z in D.g){for(var K=D.g[z],ie=0;ie<K.length;ie++)ke(K[ie]);delete D.g[z],D.h--}}this.F=null},ae.prototype.K=function(D,z,K,ie){return this.i.add(String(D),z,!1,K,ie)},ae.prototype.L=function(D,z,K,ie){return this.i.add(String(D),z,!0,K,ie)};function Ee(D,z,K,ie){if(z=D.i.g[String(z)],!z)return!0;z=z.concat();for(var Me=!0,Ge=0;Ge<z.length;++Ge){var Ft=z[Ge];if(Ft&&!Ft.da&&Ft.capture==K){var Si=Ft.listener,Qo=Ft.ha||Ft.src;Ft.fa&&Re(D.i,Ft),Me=Si.call(Qo,ie)!==!1&&Me}}return Me&&!ie.defaultPrevented}function $e(D,z,K){if(typeof D=="function")K&&(D=d(D,K));else if(D&&typeof D.handleEvent=="function")D=d(D.handleEvent,D);else throw Error("Invalid listener argument");return 2147483647<Number(z)?-1:a.setTimeout(D,z||0)}function Be(D){D.g=$e(()=>{D.g=null,D.i&&(D.i=!1,Be(D))},D.l);const z=D.h;D.h=null,D.m.apply(null,z)}class lt extends W{constructor(z,K){super(),this.m=z,this.l=K,this.h=null,this.i=!1,this.g=null}j(z){this.h=arguments,this.g?this.i=!0:Be(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Je(D){W.call(this),this.h=D,this.g={}}p(Je,W);var Xt=[];function fn(D){S(D.g,function(z,K){this.g.hasOwnProperty(K)&&_t(z)},D),D.g={}}Je.prototype.N=function(){Je.aa.N.call(this),fn(this)},Je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wt=a.JSON.stringify,an=a.JSON.parse,Sn=class{stringify(D){return a.JSON.stringify(D,void 0)}parse(D){return a.JSON.parse(D,void 0)}};function Mn(){}Mn.prototype.h=null;function ki(D){return D.h||(D.h=D.i())}function di(){}var Li={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function As(){B.call(this,"d")}p(As,B);function Lr(){B.call(this,"c")}p(Lr,B);var ls={},ll=null;function Fo(){return ll=ll||new ae}ls.La="serverreachability";function Ha(D){B.call(this,ls.La,D)}p(Ha,B);function Rr(D){const z=Fo();he(z,new Ha(z))}ls.STAT_EVENT="statevent";function Ri(D,z){B.call(this,ls.STAT_EVENT,D),this.stat=z}p(Ri,B);function hi(D){const z=Fo();he(z,new Ri(z,D))}ls.Ma="timingevent";function Vs(D,z){B.call(this,ls.Ma,D),this.size=z}p(Vs,B);function ri(D,z){if(typeof D!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){D()},z)}function Ni(){this.g=!0}Ni.prototype.xa=function(){this.g=!1};function ve(D,z,K,ie,Me,Ge){D.info(function(){if(D.g)if(Ge)for(var Ft="",Si=Ge.split("&"),Qo=0;Qo<Si.length;Qo++){var Ur=Si[Qo].split("=");if(1<Ur.length){var Oi=Ur[0];Ur=Ur[1];var $o=Oi.split("_");Ft=2<=$o.length&&$o[1]=="type"?Ft+(Oi+"="+Ur+"&"):Ft+(Oi+"=redacted&")}}else Ft=null;else Ft=Ge;return"XMLHTTP REQ ("+ie+") [attempt "+Me+"]: "+z+`
`+K+`
`+Ft})}function ce(D,z,K,ie,Me,Ge,Ft){D.info(function(){return"XMLHTTP RESP ("+ie+") [ attempt "+Me+"]: "+z+`
`+K+`
`+Ge+" "+Ft})}function _e(D,z,K,ie){D.info(function(){return"XMLHTTP TEXT ("+z+"): "+je(D,K)+(ie?" "+ie:"")})}function Ue(D,z){D.info(function(){return"TIMEOUT: "+z})}Ni.prototype.info=function(){};function je(D,z){if(!D.g)return z;if(!z)return null;try{var K=JSON.parse(z);if(K){for(D=0;D<K.length;D++)if(Array.isArray(K[D])){var ie=K[D];if(!(2>ie.length)){var Me=ie[1];if(Array.isArray(Me)&&!(1>Me.length)){var Ge=Me[0];if(Ge!="noop"&&Ge!="stop"&&Ge!="close")for(var Ft=1;Ft<Me.length;Ft++)Me[Ft]=""}}}}return Wt(K)}catch{return z}}var Dt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ht={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bn;function rr(){}p(rr,Mn),rr.prototype.g=function(){return new XMLHttpRequest},rr.prototype.i=function(){return{}},bn=new rr;function mr(D,z,K,ie){this.j=D,this.i=z,this.l=K,this.R=ie||1,this.U=new Je(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jn}function jn(){this.i=null,this.g="",this.h=!1}var Ar={},ii={};function dn(D,z,K){D.L=1,D.v=gr(vt(z)),D.m=K,D.P=!0,Dr(D,null)}function Dr(D,z){D.F=Date.now(),un(D),D.A=vt(D.v);var K=D.A,ie=D.R;Array.isArray(ie)||(ie=[String(ie)]),Zb(K.i,"t",ie),D.C=0,K=D.j.J,D.h=new jn,D.g=JP(D.j,K?z:null,!D.m),0<D.O&&(D.M=new lt(d(D.Y,D,D.g),D.O)),z=D.U,K=D.g,ie=D.ca;var Me="readystatechange";Array.isArray(Me)||(Me&&(Xt[0]=Me.toString()),Me=Xt);for(var Ge=0;Ge<Me.length;Ge++){var Ft=gt(K,Me[Ge],ie||z.handleEvent,!1,z.h||z);if(!Ft)break;z.g[Ft.key]=Ft}z=D.H?A(D.H):{},D.m?(D.u||(D.u="POST"),z["Content-Type"]="application/x-www-form-urlencoded",D.g.ea(D.A,D.u,D.m,z)):(D.u="GET",D.g.ea(D.A,D.u,null,z)),Rr(),ve(D.i,D.u,D.A,D.l,D.R,D.m)}mr.prototype.ca=function(D){D=D.target;const z=this.M;z&&ji(D)==3?z.j():this.Y(D)},mr.prototype.Y=function(D){try{if(D==this.g)e:{const $o=ji(this.g);var z=this.g.Ba();const ed=this.g.Z();if(!(3>$o)&&($o!=3||this.g&&(this.h.h||this.g.oa()||Xo(this.g)))){this.J||$o!=4||z==7||(z==8||0>=ed?Rr(3):Rr(2)),Pi(this);var K=this.g.Z();this.X=K;t:if(Qr(this)){var ie=Xo(this.g);D="";var Me=ie.length,Ge=ji(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_i(this),Ds(this);var Ft="";break t}this.h.i=new a.TextDecoder}for(z=0;z<Me;z++)this.h.h=!0,D+=this.h.i.decode(ie[z],{stream:!(Ge&&z==Me-1)});ie.length=0,this.h.g+=D,this.C=0,Ft=this.h.g}else Ft=this.g.oa();if(this.o=K==200,ce(this.i,this.u,this.A,this.l,this.R,$o,K),this.o){if(this.T&&!this.K){t:{if(this.g){var Si,Qo=this.g;if((Si=Qo.g?Qo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Si)){var Ur=Si;break t}}Ur=null}if(K=Ur)_e(this.i,this.l,K,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ns(this,K);else{this.o=!1,this.s=3,hi(12),_i(this),Ds(this);break e}}if(this.P){K=!0;let Zl;for(;!this.J&&this.C<Ft.length;)if(Zl=ir(this,Ft),Zl==ii){$o==4&&(this.s=4,hi(14),K=!1),_e(this.i,this.l,null,"[Incomplete Response]");break}else if(Zl==Ar){this.s=4,hi(15),_e(this.i,this.l,Ft,"[Invalid Chunk]"),K=!1;break}else _e(this.i,this.l,Zl,null),ns(this,Zl);if(Qr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$o!=4||Ft.length!=0||this.h.h||(this.s=1,hi(16),K=!1),this.o=this.o&&K,!K)_e(this.i,this.l,Ft,"[Invalid Chunked Response]"),_i(this),Ds(this);else if(0<Ft.length&&!this.W){this.W=!0;var Oi=this.j;Oi.g==this&&Oi.ba&&!Oi.M&&(Oi.j.info("Great, no buffering proxy detected. Bytes received: "+Ft.length),Zf(Oi),Oi.M=!0,hi(11))}}else _e(this.i,this.l,Ft,null),ns(this,Ft);$o==4&&_i(this),this.o&&!this.J&&($o==4?rs(this.j,this):(this.o=!1,un(this)))}else ch(this.g),K==400&&0<Ft.indexOf("Unknown SID")?(this.s=3,hi(12)):(this.s=0,hi(13)),_i(this),Ds(this)}}}catch{}finally{}};function Qr(D){return D.g?D.u=="GET"&&D.L!=2&&D.j.Ca:!1}function ir(D,z){var K=D.C,ie=z.indexOf(`
`,K);return ie==-1?ii:(K=Number(z.substring(K,ie)),isNaN(K)?Ar:(ie+=1,ie+K>z.length?ii:(z=z.slice(ie,ie+K),D.C=ie+K,z)))}mr.prototype.cancel=function(){this.J=!0,_i(this)};function un(D){D.S=Date.now()+D.I,Br(D,D.I)}function Br(D,z){if(D.B!=null)throw Error("WatchDog timer not null");D.B=ri(d(D.ba,D),z)}function Pi(D){D.B&&(a.clearTimeout(D.B),D.B=null)}mr.prototype.ba=function(){this.B=null;const D=Date.now();0<=D-this.S?(Ue(this.i,this.A),this.L!=2&&(Rr(),hi(17)),_i(this),this.s=2,Ds(this)):Br(this,this.S-D)};function Ds(D){D.j.G==0||D.J||rs(D.j,D)}function _i(D){Pi(D);var z=D.M;z&&typeof z.ma=="function"&&z.ma(),D.M=null,fn(D.U),D.g&&(z=D.g,D.g=null,z.abort(),z.ma())}function ns(D,z){try{var K=D.j;if(K.G!=0&&(K.g==D||Jf(K.h,D))){if(!D.K&&Jf(K.h,D)&&K.G==3){try{var ie=K.Da.g.parse(z)}catch{ie=null}if(Array.isArray(ie)&&ie.length==3){var Me=ie;if(Me[0]==0){e:if(!K.u){if(K.g)if(K.g.F+3e3<D.F)Hy(K),tx(K);else break e;SE(K),hi(18)}}else K.za=Me[1],0<K.za-K.T&&37500>Me[2]&&K.F&&K.v==0&&!K.C&&(K.C=ri(d(K.Za,K),6e3));if(1>=Jl(K.h)&&K.ca){try{K.ca()}catch{}K.ca=void 0}}else dh(K,11)}else if((D.K||K.g==D)&&Hy(K),!v(z))for(Me=K.Da.g.parse(z),z=0;z<Me.length;z++){let Ur=Me[z];if(K.T=Ur[0],Ur=Ur[1],K.G==2)if(Ur[0]=="c"){K.K=Ur[1],K.ia=Ur[2];const Oi=Ur[3];Oi!=null&&(K.la=Oi,K.j.info("VER="+K.la));const $o=Ur[4];$o!=null&&(K.Aa=$o,K.j.info("SVER="+K.Aa));const ed=Ur[5];ed!=null&&typeof ed=="number"&&0<ed&&(ie=1.5*ed,K.L=ie,K.j.info("backChannelRequestTimeoutMs_="+ie)),ie=K;const Zl=D.g;if(Zl){const ox=Zl.g?Zl.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ox){var Ge=ie.h;Ge.g||ox.indexOf("spdy")==-1&&ox.indexOf("quic")==-1&&ox.indexOf("h2")==-1||(Ge.j=Ge.l,Ge.g=new Set,Ge.h&&(te(Ge,Ge.h),Ge.h=null))}if(ie.D){const WA=Zl.g?Zl.g.getResponseHeader("X-HTTP-Session-Id"):null;WA&&(ie.ya=WA,nn(ie.I,ie.D,WA))}}K.G=3,K.l&&K.l.ua(),K.ba&&(K.R=Date.now()-D.F,K.j.info("Handshake RTT: "+K.R+"ms")),ie=K;var Ft=D;if(ie.qa=CE(ie,ie.J?ie.ia:null,ie.W),Ft.K){be(ie.h,Ft);var Si=Ft,Qo=ie.L;Qo&&(Si.I=Qo),Si.B&&(Pi(Si),un(Si)),ie.g=Ft}else XP(ie);0<K.i.length&&nx(K)}else Ur[0]!="stop"&&Ur[0]!="close"||dh(K,7);else K.G==3&&(Ur[0]=="stop"||Ur[0]=="close"?Ur[0]=="stop"?dh(K,7):N0(K):Ur[0]!="noop"&&K.l&&K.l.ta(Ur),K.v=0)}}Rr(4)}catch{}}var Yo=class{constructor(D,z){this.g=D,this.map=z}};function qa(D){this.l=D||10,a.PerformanceNavigationTiming?(D=a.performance.getEntriesByType("navigation"),D=0<D.length&&(D[0].nextHopProtocol=="hq"||D[0].nextHopProtocol=="h2")):D=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=D?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mo(D){return D.h?!0:D.g?D.g.size>=D.j:!1}function Jl(D){return D.h?1:D.g?D.g.size:0}function Jf(D,z){return D.h?D.h==z:D.g?D.g.has(z):!1}function te(D,z){D.g?D.g.add(z):D.h=z}function be(D,z){D.h&&D.h==z?D.h=null:D.g&&D.g.has(z)&&D.g.delete(z)}qa.prototype.cancel=function(){if(this.i=ue(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const D of this.g.values())D.cancel();this.g.clear()}};function ue(D){if(D.h!=null)return D.i.concat(D.h.D);if(D.g!=null&&D.g.size!==0){let z=D.i;for(const K of D.g.values())z=z.concat(K.D);return z}return m(D.i)}function De(D){if(D.V&&typeof D.V=="function")return D.V();if(typeof Map<"u"&&D instanceof Map||typeof Set<"u"&&D instanceof Set)return Array.from(D.values());if(typeof D=="string")return D.split("");if(u(D)){for(var z=[],K=D.length,ie=0;ie<K;ie++)z.push(D[ie]);return z}z=[],K=0;for(ie in D)z[K++]=D[ie];return z}function Pe(D){if(D.na&&typeof D.na=="function")return D.na();if(!D.V||typeof D.V!="function"){if(typeof Map<"u"&&D instanceof Map)return Array.from(D.keys());if(!(typeof Set<"u"&&D instanceof Set)){if(u(D)||typeof D=="string"){var z=[];D=D.length;for(var K=0;K<D;K++)z.push(K);return z}z=[],K=0;for(const ie in D)z[K++]=ie;return z}}}function Ae(D,z){if(D.forEach&&typeof D.forEach=="function")D.forEach(z,void 0);else if(u(D)||typeof D=="string")Array.prototype.forEach.call(D,z,void 0);else for(var K=Pe(D),ie=De(D),Me=ie.length,Ge=0;Ge<Me;Ge++)z.call(void 0,ie[Ge],K&&K[Ge],D)}var Xe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pt(D,z){if(D){D=D.split("&");for(var K=0;K<D.length;K++){var ie=D[K].indexOf("="),Me=null;if(0<=ie){var Ge=D[K].substring(0,ie);Me=D[K].substring(ie+1)}else Ge=D[K];z(Ge,Me?decodeURIComponent(Me.replace(/\+/g," ")):"")}}}function yt(D){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,D instanceof yt){this.h=D.h,It(this,D.j),this.o=D.o,this.g=D.g,zt(this,D.s),this.l=D.l;var z=D.i,K=new cl;K.i=z.i,z.g&&(K.g=new Map(z.g),K.h=z.h),Xn(this,K),this.m=D.m}else D&&(z=String(D).match(Xe))?(this.h=!1,It(this,z[1]||"",!0),this.o=si(z[2]||""),this.g=si(z[3]||"",!0),zt(this,z[4]),this.l=si(z[5]||"",!0),Xn(this,z[6]||"",!0),this.m=si(z[7]||"")):(this.h=!1,this.i=new cl(null,this.h))}yt.prototype.toString=function(){var D=[],z=this.j;z&&D.push(Nr(z,nf,!0),":");var K=this.g;return(K||z=="file")&&(D.push("//"),(z=this.o)&&D.push(Nr(z,nf,!0),"@"),D.push(encodeURIComponent(String(K)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),K=this.s,K!=null&&D.push(":",String(K))),(K=this.l)&&(this.g&&K.charAt(0)!="/"&&D.push("/"),D.push(Nr(K,K.charAt(0)=="/"?zy:oh,!0))),(K=this.i.toString())&&D.push("?",K),(K=this.m)&&D.push("#",Nr(K,Jb)),D.join("")};function vt(D){return new yt(D)}function It(D,z,K){D.j=K?si(z,!0):z,D.j&&(D.j=D.j.replace(/:$/,""))}function zt(D,z){if(z){if(z=Number(z),isNaN(z)||0>z)throw Error("Bad port number "+z);D.s=z}else D.s=null}function Xn(D,z,K){z instanceof cl?(D.i=z,ex(D.i,D.h)):(K||(z=Nr(z,$p)),D.i=new cl(z,D.h))}function nn(D,z,K){D.i.set(z,K)}function gr(D){return nn(D,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),D}function si(D,z){return D?z?decodeURI(D.replace(/%25/g,"%2525")):decodeURIComponent(D):""}function Nr(D,z,K){return typeof D=="string"?(D=encodeURI(D).replace(z,Ko),K&&(D=D.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D):null}function Ko(D){return D=D.charCodeAt(0),"%"+(D>>4&15).toString(16)+(D&15).toString(16)}var nf=/[#\/\?@]/g,oh=/[#\?:]/g,zy=/[#\?]/g,$p=/[#\?@]/g,Jb=/#/g;function cl(D,z){this.h=this.g=null,this.i=D||null,this.j=!!z}function vu(D){D.g||(D.g=new Map,D.h=0,D.i&&pt(D.i,function(z,K){D.add(decodeURIComponent(z.replace(/\+/g," ")),K)}))}e=cl.prototype,e.add=function(D,z){vu(this),this.i=null,D=uh(this,D);var K=this.g.get(D);return K||this.g.set(D,K=[]),K.push(z),this.h+=1,this};function ah(D,z){vu(D),z=uh(D,z),D.g.has(z)&&(D.i=null,D.h-=D.g.get(z).length,D.g.delete(z))}function Vy(D,z){return vu(D),z=uh(D,z),D.g.has(z)}e.forEach=function(D,z){vu(this),this.g.forEach(function(K,ie){K.forEach(function(Me){D.call(z,Me,ie,this)},this)},this)},e.na=function(){vu(this);const D=Array.from(this.g.values()),z=Array.from(this.g.keys()),K=[];for(let ie=0;ie<z.length;ie++){const Me=D[ie];for(let Ge=0;Ge<Me.length;Ge++)K.push(z[ie])}return K},e.V=function(D){vu(this);let z=[];if(typeof D=="string")Vy(this,D)&&(z=z.concat(this.g.get(uh(this,D))));else{D=Array.from(this.g.values());for(let K=0;K<D.length;K++)z=z.concat(D[K])}return z},e.set=function(D,z){return vu(this),this.i=null,D=uh(this,D),Vy(this,D)&&(this.h-=this.g.get(D).length),this.g.set(D,[z]),this.h+=1,this},e.get=function(D,z){return D?(D=this.V(D),0<D.length?String(D[0]):z):z};function Zb(D,z,K){ah(D,z),0<K.length&&(D.i=null,D.g.set(uh(D,z),m(K)),D.h+=K.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const D=[],z=Array.from(this.g.keys());for(var K=0;K<z.length;K++){var ie=z[K];const Ge=encodeURIComponent(String(ie)),Ft=this.V(ie);for(ie=0;ie<Ft.length;ie++){var Me=Ge;Ft[ie]!==""&&(Me+="="+encodeURIComponent(String(Ft[ie]))),D.push(Me)}}return this.i=D.join("&")};function uh(D,z){return z=String(z),D.j&&(z=z.toLowerCase()),z}function ex(D,z){z&&!D.j&&(vu(D),D.i=null,D.g.forEach(function(K,ie){var Me=ie.toLowerCase();ie!=Me&&(ah(this,ie),Zb(this,Me,K))},D)),D.j=z}function xE(D,z){const K=new Ni;if(a.Image){const ie=new Image;ie.onload=h(xa,K,"TestLoadImage: loaded",!0,z,ie),ie.onerror=h(xa,K,"TestLoadImage: error",!1,z,ie),ie.onabort=h(xa,K,"TestLoadImage: abort",!1,z,ie),ie.ontimeout=h(xa,K,"TestLoadImage: timeout",!1,z,ie),a.setTimeout(function(){ie.ontimeout&&ie.ontimeout()},1e4),ie.src=D}else z(!1)}function lh(D,z){const K=new Ni,ie=new AbortController,Me=setTimeout(()=>{ie.abort(),xa(K,"TestPingServer: timeout",!1,z)},1e4);fetch(D,{signal:ie.signal}).then(Ge=>{clearTimeout(Me),Ge.ok?xa(K,"TestPingServer: ok",!0,z):xa(K,"TestPingServer: server error",!1,z)}).catch(()=>{clearTimeout(Me),xa(K,"TestPingServer: error",!1,z)})}function xa(D,z,K,ie,Me){try{Me&&(Me.onload=null,Me.onerror=null,Me.onabort=null,Me.ontimeout=null),ie(K)}catch{}}function HA(){this.g=new Sn}function wE(D,z,K){const ie=K||"";try{Ae(D,function(Me,Ge){let Ft=Me;l(Me)&&(Ft=Wt(Me)),z.push(ie+Ge+"="+encodeURIComponent(Ft))})}catch(Me){throw z.push(ie+"type="+encodeURIComponent("_badmap")),Me}}function I0(D){this.l=D.Ub||null,this.j=D.eb||!1}p(I0,Mn),I0.prototype.g=function(){return new k0(this.l,this.j)},I0.prototype.i=function(D){return function(){return D}}({});function k0(D,z){ae.call(this),this.D=D,this.o=z,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(k0,ae),e=k0.prototype,e.open=function(D,z){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=D,this.A=z,this.readyState=1,jr(this)},e.send=function(D){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const z={headers:this.u,method:this.B,credentials:this.m,cache:void 0};D&&(z.body=D),(this.D||a).fetch(new Request(this.A,z)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oi(this)),this.readyState=0},e.Sa=function(D){if(this.g&&(this.l=D,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=D.headers,this.readyState=2,jr(this)),this.g&&(this.readyState=3,jr(this),this.g)))if(this.responseType==="arraybuffer")D.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in D){if(this.j=D.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_E(this)}else D.text().then(this.Ra.bind(this),this.ga.bind(this))};function _E(D){D.j.read().then(D.Pa.bind(D)).catch(D.ga.bind(D))}e.Pa=function(D){if(this.g){if(this.o&&D.value)this.response.push(D.value);else if(!this.o){var z=D.value?D.value:new Uint8Array(0);(z=this.v.decode(z,{stream:!D.done}))&&(this.response=this.responseText+=z)}D.done?oi(this):jr(this),this.readyState==3&&_E(this)}},e.Ra=function(D){this.g&&(this.response=this.responseText=D,oi(this))},e.Qa=function(D){this.g&&(this.response=D,oi(this))},e.ga=function(){this.g&&oi(this)};function oi(D){D.readyState=4,D.l=null,D.j=null,D.v=null,jr(D)}e.setRequestHeader=function(D,z){this.u.append(D,z)},e.getResponseHeader=function(D){return this.h&&this.h.get(D.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const D=[],z=this.h.entries();for(var K=z.next();!K.done;)K=K.value,D.push(K[0]+": "+K[1]),K=z.next();return D.join(`\r
`)};function jr(D){D.onreadystatechange&&D.onreadystatechange.call(D)}Object.defineProperty(k0.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(D){this.m=D?"include":"same-origin"}});function EE(D){let z="";return S(D,function(K,ie){z+=ie,z+=":",z+=K,z+=`\r
`}),z}function fe(D,z,K){e:{for(ie in K){var ie=!1;break e}ie=!0}ie||(K=EE(K),typeof D=="string"?K!=null&&encodeURIComponent(String(K)):nn(D,z,K))}function Se(D){ae.call(this),this.headers=new Map,this.o=D||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(Se,ae);var He=/^https?$/i,Qt=["POST","PUT"];e=Se.prototype,e.Ha=function(D){this.J=D},e.ea=function(D,z,K,ie){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+D);z=z?z.toUpperCase():"GET",this.D=D,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bn.g(),this.v=this.o?ki(this.o):ki(bn),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(z,String(D),!0),this.B=!1}catch(Ge){xr(this,Ge);return}if(D=K||"",K=new Map(this.headers),ie)if(Object.getPrototypeOf(ie)===Object.prototype)for(var Me in ie)K.set(Me,ie[Me]);else if(typeof ie.keys=="function"&&typeof ie.get=="function")for(const Ge of ie.keys())K.set(Ge,ie.get(Ge));else throw Error("Unknown input type for opt_headers: "+String(ie));ie=Array.from(K.keys()).find(Ge=>Ge.toLowerCase()=="content-type"),Me=a.FormData&&D instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Qt,z,void 0))||ie||Me||K.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ge,Ft]of K)this.g.setRequestHeader(Ge,Ft);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ei(this),this.u=!0,this.g.send(D),this.u=!1}catch(Ge){xr(this,Ge)}};function xr(D,z){D.h=!1,D.g&&(D.j=!0,D.g.abort(),D.j=!1),D.l=z,D.m=5,ai(D),xn(D)}function ai(D){D.A||(D.A=!0,he(D,"complete"),he(D,"error"))}e.abort=function(D){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=D||7,he(this,"complete"),he(this,"abort"),xn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xn(this,!0)),Se.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bi(this):this.bb())},e.bb=function(){Bi(this)};function Bi(D){if(D.h&&typeof o<"u"&&(!D.v[1]||ji(D)!=4||D.Z()!=2)){if(D.u&&ji(D)==4)$e(D.Ea,0,D);else if(he(D,"readystatechange"),ji(D)==4){D.h=!1;try{const Ft=D.Z();e:switch(Ft){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var z=!0;break e;default:z=!1}var K;if(!(K=z)){var ie;if(ie=Ft===0){var Me=String(D.D).match(Xe)[1]||null;!Me&&a.self&&a.self.location&&(Me=a.self.location.protocol.slice(0,-1)),ie=!He.test(Me?Me.toLowerCase():"")}K=ie}if(K)he(D,"complete"),he(D,"success");else{D.m=6;try{var Ge=2<ji(D)?D.g.statusText:""}catch{Ge=""}D.l=Ge+" ["+D.Z()+"]",ai(D)}}finally{xn(D)}}}}function xn(D,z){if(D.g){Ei(D);const K=D.g,ie=D.v[0]?()=>{}:null;D.g=null,D.v=null,z||he(D,"ready");try{K.onreadystatechange=ie}catch{}}}function Ei(D){D.I&&(a.clearTimeout(D.I),D.I=null)}e.isActive=function(){return!!this.g};function ji(D){return D.g?D.g.readyState:0}e.Z=function(){try{return 2<ji(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(D){if(this.g){var z=this.g.responseText;return D&&z.indexOf(D)==0&&(z=z.substring(D.length)),an(z)}};function Xo(D){try{if(!D.g)return null;if("response"in D.g)return D.g.response;switch(D.H){case"":case"text":return D.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in D.g)return D.g.mozResponseArrayBuffer}return null}catch{return null}}function ch(D){const z={};D=(D.g&&2<=ji(D)&&D.g.getAllResponseHeaders()||"").split(`\r
`);for(let ie=0;ie<D.length;ie++){if(v(D[ie]))continue;var K=R(D[ie]);const Me=K[0];if(K=K[1],typeof K!="string")continue;K=K.trim();const Ge=z[Me]||[];z[Me]=Ge,Ge.push(K)}T(z,function(ie){return ie.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zs(D,z,K){return K&&K.internalChannelParams&&K.internalChannelParams[D]||z}function R0(D){this.Aa=0,this.i=[],this.j=new Ni,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zs("failFast",!1,D),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zs("baseRetryDelayMs",5e3,D),this.cb=Zs("retryDelaySeedMs",1e4,D),this.Wa=Zs("forwardChannelMaxRetries",2,D),this.wa=Zs("forwardChannelRequestTimeoutMs",2e4,D),this.pa=D&&D.xmlHttpFactory||void 0,this.Xa=D&&D.Tb||void 0,this.Ca=D&&D.useFetchStreams||!1,this.L=void 0,this.J=D&&D.supportsCrossDomainXhr||!1,this.K="",this.h=new qa(D&&D.concurrentRequestLimit),this.Da=new HA,this.P=D&&D.fastHandshake||!1,this.O=D&&D.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=D&&D.Rb||!1,D&&D.xa&&this.j.xa(),D&&D.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&D&&D.detectBufferingProxy||!1,this.ja=void 0,D&&D.longPollingTimeout&&0<D.longPollingTimeout&&(this.ja=D.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=R0.prototype,e.la=8,e.G=1,e.connect=function(D,z,K,ie){hi(0),this.W=D,this.H=z||{},K&&ie!==void 0&&(this.H.OSID=K,this.H.OAID=ie),this.F=this.X,this.I=CE(this,null,this.W),nx(this)};function N0(D){if(qA(D),D.G==3){var z=D.U++,K=vt(D.I);if(nn(K,"SID",D.K),nn(K,"RID",z),nn(K,"TYPE","terminate"),rx(D,K),z=new mr(D,D.j,z),z.L=2,z.v=gr(vt(K)),K=!1,a.navigator&&a.navigator.sendBeacon)try{K=a.navigator.sendBeacon(z.v.toString(),"")}catch{}!K&&a.Image&&(new Image().src=z.v,K=!0),K||(z.g=JP(z.j,null),z.g.ea(z.v)),z.F=Date.now(),un(z)}QP(D)}function tx(D){D.g&&(Zf(D),D.g.cancel(),D.g=null)}function qA(D){tx(D),D.u&&(a.clearTimeout(D.u),D.u=null),Hy(D),D.h.cancel(),D.s&&(typeof D.s=="number"&&a.clearTimeout(D.s),D.s=null)}function nx(D){if(!Mo(D.h)&&!D.s){D.s=!0;var z=D.Ga;G||$(),Y||(G(),Y=!0),J.add(z,D),D.B=0}}function KP(D,z){return Jl(D.h)>=D.h.j-(D.s?1:0)?!1:D.s?(D.i=z.D.concat(D.i),!0):D.G==1||D.G==2||D.B>=(D.Va?0:D.Wa)?!1:(D.s=ri(d(D.Ga,D,z),fh(D,D.B)),D.B++,!0)}e.Ga=function(D){if(this.s)if(this.s=null,this.G==1){if(!D){this.U=Math.floor(1e5*Math.random()),D=this.U++;const Me=new mr(this,this.j,D);let Ge=this.o;if(this.S&&(Ge?(Ge=A(Ge),I(Ge,this.S)):Ge=this.S),this.m!==null||this.O||(Me.H=Ge,Ge=null),this.P)e:{for(var z=0,K=0;K<this.i.length;K++){t:{var ie=this.i[K];if("__data__"in ie.map&&(ie=ie.map.__data__,typeof ie=="string")){ie=ie.length;break t}ie=void 0}if(ie===void 0)break;if(z+=ie,4096<z){z=K;break e}if(z===4096||K===this.i.length-1){z=K+1;break e}}z=1e3}else z=1e3;z=fl(this,Me,z),K=vt(this.I),nn(K,"RID",D),nn(K,"CVER",22),this.D&&nn(K,"X-HTTP-Session-Id",this.D),rx(this,K),Ge&&(this.O?z="headers="+encodeURIComponent(String(EE(Ge)))+"&"+z:this.m&&fe(K,this.m,Ge)),te(this.h,Me),this.Ua&&nn(K,"TYPE","init"),this.P?(nn(K,"$req",z),nn(K,"SID","null"),Me.T=!0,dn(Me,K,null)):dn(Me,K,z),this.G=2}}else this.G==3&&(D?bu(this,D):this.i.length==0||Mo(this.h)||bu(this))};function bu(D,z){var K;z?K=z.l:K=D.U++;const ie=vt(D.I);nn(ie,"SID",D.K),nn(ie,"RID",K),nn(ie,"AID",D.T),rx(D,ie),D.m&&D.o&&fe(ie,D.m,D.o),K=new mr(D,D.j,K,D.B+1),D.m===null&&(K.H=D.o),z&&(D.i=z.D.concat(D.i)),z=fl(D,K,1e3),K.I=Math.round(.5*D.wa)+Math.round(.5*D.wa*Math.random()),te(D.h,K),dn(K,ie,z)}function rx(D,z){D.H&&S(D.H,function(K,ie){nn(z,ie,K)}),D.l&&Ae({},function(K,ie){nn(z,ie,K)})}function fl(D,z,K){K=Math.min(D.i.length,K);var ie=D.l?d(D.l.Na,D.l,D):null;e:{var Me=D.i;let Ge=-1;for(;;){const Ft=["count="+K];Ge==-1?0<K?(Ge=Me[0].g,Ft.push("ofs="+Ge)):Ge=0:Ft.push("ofs="+Ge);let Si=!0;for(let Qo=0;Qo<K;Qo++){let Ur=Me[Qo].g;const Oi=Me[Qo].map;if(Ur-=Ge,0>Ur)Ge=Math.max(0,Me[Qo].g-100),Si=!1;else try{wE(Oi,Ft,"req"+Ur+"_")}catch{ie&&ie(Oi)}}if(Si){ie=Ft.join("&");break e}}}return D=D.i.splice(0,K),z.D=D,ie}function XP(D){if(!D.g&&!D.u){D.Y=1;var z=D.Fa;G||$(),Y||(G(),Y=!0),J.add(z,D),D.v=0}}function SE(D){return D.g||D.u||3<=D.v?!1:(D.Y++,D.u=ri(d(D.Fa,D),fh(D,D.v)),D.v++,!0)}e.Fa=function(){if(this.u=null,ix(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var D=2*this.R;this.j.info("BP detection timer enabled: "+D),this.A=ri(d(this.ab,this),D)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,hi(10),tx(this),ix(this))};function Zf(D){D.A!=null&&(a.clearTimeout(D.A),D.A=null)}function ix(D){D.g=new mr(D,D.j,"rpc",D.Y),D.m===null&&(D.g.H=D.o),D.g.O=0;var z=vt(D.qa);nn(z,"RID","rpc"),nn(z,"SID",D.K),nn(z,"AID",D.T),nn(z,"CI",D.F?"0":"1"),!D.F&&D.ja&&nn(z,"TO",D.ja),nn(z,"TYPE","xmlhttp"),rx(D,z),D.m&&D.o&&fe(z,D.m,D.o),D.L&&(D.g.I=D.L);var K=D.g;D=D.ia,K.L=1,K.v=gr(vt(z)),K.m=null,K.P=!0,Dr(K,D)}e.Za=function(){this.C!=null&&(this.C=null,tx(this),SE(this),hi(19))};function Hy(D){D.C!=null&&(a.clearTimeout(D.C),D.C=null)}function rs(D,z){var K=null;if(D.g==z){Hy(D),Zf(D),D.g=null;var ie=2}else if(Jf(D.h,z))K=z.D,be(D.h,z),ie=1;else return;if(D.G!=0){if(z.o)if(ie==1){K=z.m?z.m.length:0,z=Date.now()-z.F;var Me=D.B;ie=Fo(),he(ie,new Vs(ie,K)),nx(D)}else XP(D);else if(Me=z.s,Me==3||Me==0&&0<z.X||!(ie==1&&KP(D,z)||ie==2&&SE(D)))switch(K&&0<K.length&&(z=D.h,z.i=z.i.concat(K)),Me){case 1:dh(D,5);break;case 4:dh(D,10);break;case 3:dh(D,6);break;default:dh(D,2)}}}function fh(D,z){let K=D.Ta+Math.floor(Math.random()*D.cb);return D.isActive()||(K*=2),K*z}function dh(D,z){if(D.j.info("Error code "+z),z==2){var K=d(D.fb,D),ie=D.Xa;const Me=!ie;ie=new yt(ie||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||It(ie,"https"),gr(ie),Me?xE(ie.toString(),K):lh(ie.toString(),K)}else hi(2);D.G=0,D.l&&D.l.sa(z),QP(D),qA(D)}e.fb=function(D){D?(this.j.info("Successfully pinged google.com"),hi(2)):(this.j.info("Failed to ping google.com"),hi(1))};function QP(D){if(D.G=0,D.ka=[],D.l){const z=ue(D.h);(z.length!=0||D.i.length!=0)&&(g(D.ka,z),g(D.ka,D.i),D.h.i.length=0,m(D.i),D.i.length=0),D.l.ra()}}function CE(D,z,K){var ie=K instanceof yt?vt(K):new yt(K);if(ie.g!="")z&&(ie.g=z+"."+ie.g),zt(ie,ie.s);else{var Me=a.location;ie=Me.protocol,z=z?z+"."+Me.hostname:Me.hostname,Me=+Me.port;var Ge=new yt(null);ie&&It(Ge,ie),z&&(Ge.g=z),Me&&zt(Ge,Me),K&&(Ge.l=K),ie=Ge}return K=D.D,z=D.ya,K&&z&&nn(ie,K,z),nn(ie,"VER",D.la),rx(D,ie),ie}function JP(D,z,K){if(z&&!D.J)throw Error("Can't create secondary domain capable XhrIo object.");return z=D.Ca&&!D.pa?new Se(new I0({eb:K})):new Se(D.pa),z.Ha(D.J),z}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function ZP(){}e=ZP.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function TE(){}TE.prototype.g=function(D,z){return new xu(D,z)};function xu(D,z){ae.call(this),this.g=new R0(z),this.l=D,this.h=z&&z.messageUrlParams||null,D=z&&z.messageHeaders||null,z&&z.clientProtocolHeaderRequired&&(D?D["X-Client-Protocol"]="webchannel":D={"X-Client-Protocol":"webchannel"}),this.g.o=D,D=z&&z.initMessageHeaders||null,z&&z.messageContentType&&(D?D["X-WebChannel-Content-Type"]=z.messageContentType:D={"X-WebChannel-Content-Type":z.messageContentType}),z&&z.va&&(D?D["X-WebChannel-Client-Profile"]=z.va:D={"X-WebChannel-Client-Profile":z.va}),this.g.S=D,(D=z&&z.Sb)&&!v(D)&&(this.g.m=D),this.v=z&&z.supportsCrossDomainXhr||!1,this.u=z&&z.sendRawJson||!1,(z=z&&z.httpSessionIdParam)&&!v(z)&&(this.g.D=z,D=this.h,D!==null&&z in D&&(D=this.h,z in D&&delete D[z])),this.j=new qy(this)}p(xu,ae),xu.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xu.prototype.close=function(){N0(this.g)},xu.prototype.o=function(D){var z=this.g;if(typeof D=="string"){var K={};K.__data__=D,D=K}else this.u&&(K={},K.__data__=Wt(D),D=K);z.i.push(new Yo(z.Ya++,D)),z.G==3&&nx(z)},xu.prototype.N=function(){this.g.l=null,delete this.j,N0(this.g),delete this.g,xu.aa.N.call(this)};function sx(D){As.call(this),D.__headers__&&(this.headers=D.__headers__,this.statusCode=D.__status__,delete D.__headers__,delete D.__status__);var z=D.__sm__;if(z){e:{for(const K in z){D=K;break e}D=void 0}(this.i=D)&&(D=this.i,z=z!==null&&D in z?z[D]:void 0),this.data=z}else this.data=D}p(sx,As);function P0(){Lr.call(this),this.status=1}p(P0,Lr);function qy(D){this.g=D}p(qy,ZP),qy.prototype.ua=function(){he(this.g,"a")},qy.prototype.ta=function(D){he(this.g,new sx(D))},qy.prototype.sa=function(D){he(this.g,new P0)},qy.prototype.ra=function(){he(this.g,"b")},TE.prototype.createWebChannel=TE.prototype.g,xu.prototype.send=xu.prototype.o,xu.prototype.open=xu.prototype.m,xu.prototype.close=xu.prototype.close,Xqe=function(){return new TE},Kqe=function(){return Fo()},Yqe=ls,VQ={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Dt.NO_ERROR=0,Dt.TIMEOUT=8,Dt.HTTP_ERROR=6,ZF=Dt,Ht.COMPLETE="complete",Gqe=Ht,di.EventType=Li,Li.OPEN="a",Li.CLOSE="b",Li.ERROR="c",Li.MESSAGE="d",ae.prototype.listen=ae.prototype.K,XI=di,Wqe=I0,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,qqe=Se}).apply(typeof C6<"u"?C6:typeof self<"u"?self:typeof window<"u"?window:{});const aSe="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}cc.UNAUTHENTICATED=new cc(null),cc.GOOGLE_CREDENTIALS=new cc("google-credentials-uid"),cc.FIRST_PARTY=new cc("first-party-uid"),cc.MOCK_USER=new cc("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jA="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=new dj("@firebase/firestore");function iI(){return I_.logLevel}function tn(e,...t){if(I_.logLevel<=qr.DEBUG){const n=t.map(Sce);I_.debug(`Firestore (${jA}): ${e}`,...n)}}function gy(e,...t){if(I_.logLevel<=qr.ERROR){const n=t.map(Sce);I_.error(`Firestore (${jA}): ${e}`,...n)}}function j3(e,...t){if(I_.logLevel<=qr.WARN){const n=t.map(Sce);I_.warn(`Firestore (${jA}): ${e}`,...n)}}function Sce(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(e="Unexpected state"){const t=`FIRESTORE (${jA}) INTERNAL ASSERTION FAILED: `+e;throw gy(t),new Error(t)}function ps(e,t){e||Wn()}function tr(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Vt extends D0{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dEn{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class hEn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(cc.UNAUTHENTICATED))}shutdown(){}}class pEn{constructor(t){this.t=t,this.currentUser=cc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Vg;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Vg,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{tn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(tn("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Vg)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(tn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ps(typeof r.accessToken=="string"),new dEn(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ps(t===null||typeof t=="string"),new cc(t)}}class mEn{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=cc.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class gEn{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new mEn(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(cc.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yEn{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vEn{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&tn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,tn("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{tn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):tn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ps(typeof n.token=="string"),this.R=n.token,new yEn(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bEn(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qqe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=bEn(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function Ti(e,t){return e<t?-1:e>t?1:0}function dT(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Vt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Vt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Vt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Vt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ha.fromMillis(Date.now())}static fromDate(t){return ha.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new ha(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Ti(this.nanoseconds,t.nanoseconds):Ti(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(t){this.timestamp=t}static fromTimestamp(t){return new er(t)}static min(){return new er(new ha(0,0))}static max(){return new er(new ha(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(t,n,r){n===void 0?n=0:n>t.length&&Wn(),r===void 0?r=t.length-n:r>t.length-n&&Wn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return U3.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof U3?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Ss extends U3{construct(t,n,r){return new Ss(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Vt(ht.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ss(n)}static emptyPath(){return new Ss([])}}const xEn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ru extends U3{construct(t,n,r){return new ru(t,n,r)}static isValidIdentifier(t){return xEn.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ru.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ru(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Vt(ht.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Vt(ht.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Vt(ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Vt(ht.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ru(n)}static emptyPath(){return new ru([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t){this.path=t}static fromPath(t){return new En(Ss.fromString(t))}static fromName(t){return new En(Ss.fromString(t).popFirst(5))}static empty(){return new En(Ss.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ss.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Ss.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new En(new Ss(t.slice()))}}function wEn(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=er.fromTimestamp(r===1e9?new ha(n+1,0):new ha(n,r));return new lb(i,En.empty(),t)}function _En(e){return new lb(e.readTime,e.key,-1)}class lb{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new lb(er.min(),En.empty(),-1)}static max(){return new lb(er.max(),En.empty(),-1)}}function EEn(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=En.comparator(e.documentKey,t.documentKey),n!==0?n:Ti(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SEn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CEn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LP(e){if(e.code!==ht.FAILED_PRECONDITION||e.message!==SEn)throw e;tn("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Wn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Et((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Et?n:Et.resolve(n)}catch(n){return Et.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Et.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Et.reject(n)}static resolve(t){return new Et((n,r)=>{n(t)})}static reject(t){return new Et((n,r)=>{r(t)})}static waitFor(t){return new Et((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Et.resolve(!1);for(const r of t)n=n.next(i=>i?Et.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Et((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Et((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function TEn(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function BP(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cce{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Cce.oe=-1;function bj(e){return e==null}function Y$(e){return e===0&&1/e==-1/0}function AEn(e){return typeof e=="number"&&Number.isInteger(e)&&!Y$(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uSe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function gE(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Jqe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(t,n){this.comparator=t,this.root=n||tu.EMPTY}insert(t,n){return new Qs(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,tu.BLACK,null,null))}remove(t){return new Qs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,tu.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new T6(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new T6(this.root,t,this.comparator,!1)}getReverseIterator(){return new T6(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new T6(this.root,t,this.comparator,!0)}}class T6{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class tu{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??tu.RED,this.left=i??tu.EMPTY,this.right=s??tu.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new tu(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return tu.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return tu.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,tu.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,tu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Wn();const t=this.left.check();if(t!==this.right.check())throw Wn();return t+(this.isRed()?0:1)}}tu.EMPTY=null,tu.RED=!0,tu.BLACK=!1;tu.EMPTY=new class{constructor(){this.size=0}get key(){throw Wn()}get value(){throw Wn()}get color(){throw Wn()}get left(){throw Wn()}get right(){throw Wn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new tu(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(t){this.comparator=t,this.data=new Qs(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new lSe(this.data.getIterator())}getIteratorFrom(t){return new lSe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof fu)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new fu(this.comparator);return n.data=t,n}}class lSe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(t){this.fields=t,t.sort(ru.comparator)}static empty(){return new Tf([])}unionWith(t){let n=new fu(ru.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Tf(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return dT(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zqe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Zqe("Invalid base64 string: "+s):s}}(t);return new sl(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new sl(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ti(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}sl.EMPTY_BYTE_STRING=new sl("");const DEn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cb(e){if(ps(!!e),typeof e=="string"){let t=0;const n=DEn.exec(e);if(ps(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:zo(e.seconds),nanos:zo(e.nanos)}}function zo(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function k_(e){return typeof e=="string"?sl.fromBase64String(e):sl.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tce(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ace(e){const t=e.mapValue.fields.__previous_value__;return Tce(t)?Ace(t):t}function z3(e){const t=cb(e.mapValue.fields.__local_write_time__.timestampValue);return new ha(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IEn{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class V3{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new V3("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof V3&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function R_(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Tce(e)?4:kEn(e)?9007199254740991:10:Wn()}function a0(e,t){if(e===t)return!0;const n=R_(e);if(n!==R_(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return z3(e).isEqual(z3(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=cb(i.timestampValue),a=cb(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return k_(i.bytesValue).isEqual(k_(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return zo(i.geoPointValue.latitude)===zo(s.geoPointValue.latitude)&&zo(i.geoPointValue.longitude)===zo(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return zo(i.integerValue)===zo(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=zo(i.doubleValue),a=zo(s.doubleValue);return o===a?Y$(o)===Y$(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return dT(e.arrayValue.values||[],t.arrayValue.values||[],a0);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(uSe(o)!==uSe(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!a0(o[u],a[u])))return!1;return!0}(e,t);default:return Wn()}}function H3(e,t){return(e.values||[]).find(n=>a0(n,t))!==void 0}function hT(e,t){if(e===t)return 0;const n=R_(e),r=R_(t);if(n!==r)return Ti(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ti(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=zo(s.integerValue||s.doubleValue),u=zo(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return cSe(e.timestampValue,t.timestampValue);case 4:return cSe(z3(e),z3(t));case 5:return Ti(e.stringValue,t.stringValue);case 6:return function(s,o){const a=k_(s),u=k_(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=Ti(a[l],u[l]);if(c!==0)return c}return Ti(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=Ti(zo(s.latitude),zo(o.latitude));return a!==0?a:Ti(zo(s.longitude),zo(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=hT(a[l],u[l]);if(c)return c}return Ti(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===A6.mapValue&&o===A6.mapValue)return 0;if(s===A6.mapValue)return 1;if(o===A6.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=Ti(u[f],c[f]);if(d!==0)return d;const h=hT(a[u[f]],l[c[f]]);if(h!==0)return h}return Ti(u.length,c.length)}(e.mapValue,t.mapValue);default:throw Wn()}}function cSe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Ti(e,t);const n=cb(e),r=cb(t),i=Ti(n.seconds,r.seconds);return i!==0?i:Ti(n.nanos,r.nanos)}function pT(e){return HQ(e)}function HQ(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=cb(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return k_(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return En.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=HQ(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${HQ(n.fields[o])}`;return i+"}"}(e.mapValue):Wn()}function fSe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function qQ(e){return!!e&&"integerValue"in e}function Dce(e){return!!e&&"arrayValue"in e}function dSe(e){return!!e&&"nullValue"in e}function hSe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function eM(e){return!!e&&"mapValue"in e}function Qk(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return gE(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Qk(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Qk(e.arrayValue.values[n]);return t}return Object.assign({},e)}function kEn(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(t){this.value=t}static empty(){return new wc({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!eM(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Qk(n)}setAll(t){let n=ru.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Qk(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());eM(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return a0(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];eM(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){gE(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new wc(Qk(this.value))}}function eWe(e){const t=[];return gE(e.fields,(n,r)=>{const i=new ru([n]);if(eM(r)){const s=eWe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Tf(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new ju(t,0,er.min(),er.min(),er.min(),wc.empty(),0)}static newFoundDocument(t,n,r,i){return new ju(t,1,n,er.min(),r,i,0)}static newNoDocument(t,n){return new ju(t,2,n,er.min(),er.min(),wc.empty(),0)}static newUnknownDocument(t,n){return new ju(t,3,n,er.min(),er.min(),wc.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(er.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=wc.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=wc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=er.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ju&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ju(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K${constructor(t,n){this.position=t,this.inclusive=n}}function pSe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=En.comparator(En.fromName(o.referenceValue),n.key):r=hT(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function mSe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!a0(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(t,n="asc"){this.field=t,this.dir=n}}function REn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tWe{}class Ho extends tWe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new PEn(t,n,r):n==="array-contains"?new MEn(t,r):n==="in"?new $En(t,r):n==="not-in"?new LEn(t,r):n==="array-contains-any"?new BEn(t,r):new Ho(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new OEn(t,r):new FEn(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(hT(n,this.value)):n!==null&&R_(this.value)===R_(n)&&this.matchesComparison(hT(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Wn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wp extends tWe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new wp(t,n)}matches(t){return nWe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function nWe(e){return e.op==="and"}function rWe(e){return NEn(e)&&nWe(e)}function NEn(e){for(const t of e.filters)if(t instanceof wp)return!1;return!0}function WQ(e){if(e instanceof Ho)return e.field.canonicalString()+e.op.toString()+pT(e.value);if(rWe(e))return e.filters.map(t=>WQ(t)).join(",");{const t=e.filters.map(n=>WQ(n)).join(",");return`${e.op}(${t})`}}function iWe(e,t){return e instanceof Ho?function(r,i){return i instanceof Ho&&r.op===i.op&&r.field.isEqual(i.field)&&a0(r.value,i.value)}(e,t):e instanceof wp?function(r,i){return i instanceof wp&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&iWe(o,i.filters[a]),!0):!1}(e,t):void Wn()}function sWe(e){return e instanceof Ho?function(n){return`${n.field.canonicalString()} ${n.op} ${pT(n.value)}`}(e):e instanceof wp?function(n){return n.op.toString()+" {"+n.getFilters().map(sWe).join(" ,")+"}"}(e):"Filter"}class PEn extends Ho{constructor(t,n,r){super(t,n,r),this.key=En.fromName(r.referenceValue)}matches(t){const n=En.comparator(t.key,this.key);return this.matchesComparison(n)}}class OEn extends Ho{constructor(t,n){super(t,"in",n),this.keys=oWe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class FEn extends Ho{constructor(t,n){super(t,"not-in",n),this.keys=oWe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function oWe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>En.fromName(r.referenceValue))}class MEn extends Ho{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Dce(n)&&H3(n.arrayValue,this.value)}}class $En extends Ho{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&H3(this.value.arrayValue,n)}}class LEn extends Ho{constructor(t,n){super(t,"not-in",n)}matches(t){if(H3(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!H3(this.value.arrayValue,n)}}class BEn extends Ho{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Dce(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>H3(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jEn{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function gSe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new jEn(e,t,n,r,i,s,o)}function Ice(e){const t=tr(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>WQ(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),bj(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>pT(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>pT(r)).join(",")),t.ue=n}return t.ue}function kce(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!REn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!iWe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!mSe(e.startAt,t.startAt)&&mSe(e.endAt,t.endAt)}function GQ(e){return En.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function UEn(e,t,n,r,i,s,o,a){return new UA(e,t,n,r,i,s,o,a)}function Rce(e){return new UA(e)}function ySe(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function aWe(e){return e.collectionGroup!==null}function Jk(e){const t=tr(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new fu(ru.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new q3(s,r))}),n.has(ru.keyField().canonicalString())||t.ce.push(new q3(ru.keyField(),r))}return t.ce}function Bm(e){const t=tr(e);return t.le||(t.le=zEn(t,Jk(e))),t.le}function zEn(e,t){if(e.limitType==="F")return gSe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new q3(i.field,s)});const n=e.endAt?new K$(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new K$(e.startAt.position,e.startAt.inclusive):null;return gSe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function YQ(e,t){const n=e.filters.concat([t]);return new UA(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function KQ(e,t,n){return new UA(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function xj(e,t){return kce(Bm(e),Bm(t))&&e.limitType===t.limitType}function uWe(e){return`${Ice(Bm(e))}|lt:${e.limitType}`}function k2(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>sWe(i)).join(", ")}]`),bj(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>pT(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>pT(i)).join(",")),`Target(${r})`}(Bm(e))}; limitType=${e.limitType})`}function wj(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):En.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of Jk(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=pSe(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Jk(r),i)||r.endAt&&!function(o,a,u){const l=pSe(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Jk(r),i))}(e,t)}function VEn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function lWe(e){return(t,n)=>{let r=!1;for(const i of Jk(e)){const s=HEn(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function HEn(e,t,n){const r=e.field.isKeyField()?En.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?hT(u,l):Wn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Wn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){gE(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return Jqe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qEn=new Qs(En.comparator);function yy(){return qEn}const cWe=new Qs(En.comparator);function QI(...e){let t=cWe;for(const n of e)t=t.insert(n.key,n);return t}function fWe(e){let t=cWe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Tw(){return Zk()}function dWe(){return Zk()}function Zk(){return new zA(e=>e.toString(),(e,t)=>e.isEqual(t))}const WEn=new Qs(En.comparator),GEn=new fu(En.comparator);function Or(...e){let t=GEn;for(const n of e)t=t.add(n);return t}const YEn=new fu(Ti);function KEn(){return YEn}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hWe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Y$(t)?"-0":t}}function pWe(e){return{integerValue:""+e}}function XEn(e,t){return AEn(t)?pWe(t):hWe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(){this._=void 0}}function QEn(e,t,n){return e instanceof W3?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Tce(s)&&(s=Ace(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof G3?gWe(e,t):e instanceof Y3?yWe(e,t):function(i,s){const o=mWe(i,s),a=vSe(o)+vSe(i.Pe);return qQ(o)&&qQ(i.Pe)?pWe(a):hWe(i.serializer,a)}(e,t)}function JEn(e,t,n){return e instanceof G3?gWe(e,t):e instanceof Y3?yWe(e,t):n}function mWe(e,t){return e instanceof X$?function(r){return qQ(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class W3 extends _j{}class G3 extends _j{constructor(t){super(),this.elements=t}}function gWe(e,t){const n=vWe(t);for(const r of e.elements)n.some(i=>a0(i,r))||n.push(r);return{arrayValue:{values:n}}}class Y3 extends _j{constructor(t){super(),this.elements=t}}function yWe(e,t){let n=vWe(t);for(const r of e.elements)n=n.filter(i=>!a0(i,r));return{arrayValue:{values:n}}}class X$ extends _j{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function vSe(e){return zo(e.integerValue||e.doubleValue)}function vWe(e){return Dce(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZEn{constructor(t,n){this.field=t,this.transform=n}}function e2n(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof G3&&i instanceof G3||r instanceof Y3&&i instanceof Y3?dT(r.elements,i.elements,a0):r instanceof X$&&i instanceof X$?a0(r.Pe,i.Pe):r instanceof W3&&i instanceof W3}(e.transform,t.transform)}class t2n{constructor(t,n){this.version=t,this.transformResults=n}}class Pf{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Pf}static exists(t){return new Pf(void 0,t)}static updateTime(t){return new Pf(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function tM(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Ej{}function bWe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Nce(e.key,Pf.none()):new jP(e.key,e.data,Pf.none());{const n=e.data,r=wc.empty();let i=new fu(ru.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Qb(e.key,r,new Tf(i.toArray()),Pf.none())}}function n2n(e,t,n){e instanceof jP?function(i,s,o){const a=i.value.clone(),u=xSe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Qb?function(i,s,o){if(!tM(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=xSe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(xWe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function eR(e,t,n,r){return e instanceof jP?function(s,o,a,u){if(!tM(s.precondition,o))return a;const l=s.value.clone(),c=wSe(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Qb?function(s,o,a,u){if(!tM(s.precondition,o))return a;const l=wSe(s.fieldTransforms,u,o),c=o.data;return c.setAll(xWe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return tM(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function r2n(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=mWe(r.transform,i||null);s!=null&&(n===null&&(n=wc.empty()),n.set(r.field,s))}return n||null}function bSe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&dT(r,i,(s,o)=>e2n(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class jP extends Ej{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Qb extends Ej{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function xWe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function xSe(e,t,n){const r=new Map;ps(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,JEn(o,a,n[i]))}return r}function wSe(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,QEn(s,o,t))}return r}class Nce extends Ej{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class i2n extends Ej{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2n{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&n2n(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=eR(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=eR(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=dWe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=bWe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(er.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Or())}isEqual(t){return this.batchId===t.batchId&&dT(this.mutations,t.mutations,(n,r)=>bSe(n,r))&&dT(this.baseMutations,t.baseMutations,(n,r)=>bSe(n,r))}}class Pce{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ps(t.mutations.length===r.length);let i=function(){return WEn}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Pce(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2n{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2n{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lo,Jr;function u2n(e){switch(e){default:return Wn();case ht.CANCELLED:case ht.UNKNOWN:case ht.DEADLINE_EXCEEDED:case ht.RESOURCE_EXHAUSTED:case ht.INTERNAL:case ht.UNAVAILABLE:case ht.UNAUTHENTICATED:return!1;case ht.INVALID_ARGUMENT:case ht.NOT_FOUND:case ht.ALREADY_EXISTS:case ht.PERMISSION_DENIED:case ht.FAILED_PRECONDITION:case ht.ABORTED:case ht.OUT_OF_RANGE:case ht.UNIMPLEMENTED:case ht.DATA_LOSS:return!0}}function wWe(e){if(e===void 0)return gy("GRPC error has no .code"),ht.UNKNOWN;switch(e){case Lo.OK:return ht.OK;case Lo.CANCELLED:return ht.CANCELLED;case Lo.UNKNOWN:return ht.UNKNOWN;case Lo.DEADLINE_EXCEEDED:return ht.DEADLINE_EXCEEDED;case Lo.RESOURCE_EXHAUSTED:return ht.RESOURCE_EXHAUSTED;case Lo.INTERNAL:return ht.INTERNAL;case Lo.UNAVAILABLE:return ht.UNAVAILABLE;case Lo.UNAUTHENTICATED:return ht.UNAUTHENTICATED;case Lo.INVALID_ARGUMENT:return ht.INVALID_ARGUMENT;case Lo.NOT_FOUND:return ht.NOT_FOUND;case Lo.ALREADY_EXISTS:return ht.ALREADY_EXISTS;case Lo.PERMISSION_DENIED:return ht.PERMISSION_DENIED;case Lo.FAILED_PRECONDITION:return ht.FAILED_PRECONDITION;case Lo.ABORTED:return ht.ABORTED;case Lo.OUT_OF_RANGE:return ht.OUT_OF_RANGE;case Lo.UNIMPLEMENTED:return ht.UNIMPLEMENTED;case Lo.DATA_LOSS:return ht.DATA_LOSS;default:return Wn()}}(Jr=Lo||(Lo={}))[Jr.OK=0]="OK",Jr[Jr.CANCELLED=1]="CANCELLED",Jr[Jr.UNKNOWN=2]="UNKNOWN",Jr[Jr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jr[Jr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jr[Jr.NOT_FOUND=5]="NOT_FOUND",Jr[Jr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jr[Jr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jr[Jr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jr[Jr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jr[Jr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jr[Jr.ABORTED=10]="ABORTED",Jr[Jr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jr[Jr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jr[Jr.INTERNAL=13]="INTERNAL",Jr[Jr.UNAVAILABLE=14]="UNAVAILABLE",Jr[Jr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2n(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2n=new Uw([4294967295,4294967295],0);function _Se(e){const t=l2n().encode(e),n=new Hqe;return n.update(t),new Uint8Array(n.digest())}function ESe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Uw([n,r],0),new Uw([i,s],0)]}class Oce{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new JI(`Invalid padding: ${n}`);if(r<0)throw new JI(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new JI(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new JI(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=Uw.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(Uw.fromNumber(r)));return i.compare(c2n)===1&&(i=new Uw([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=_Se(t),[r,i]=ESe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new Oce(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=_Se(t),[r,i]=ESe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class JI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,UP.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Sj(er.min(),i,new Qs(Ti),yy(),Or())}}class UP{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new UP(r,n,Or(),Or(),Or())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class _We{constructor(t,n){this.targetId=t,this.me=n}}class EWe{constructor(t,n,r=sl.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class SSe{constructor(){this.fe=0,this.ge=TSe(),this.pe=sl.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Or(),n=Or(),r=Or();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Wn()}}),new UP(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=TSe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ps(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class f2n{constructor(t){this.Le=t,this.Be=new Map,this.ke=yy(),this.qe=CSe(),this.Qe=new Qs(Ti)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:Wn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(GQ(s))if(r===0){const o=new En(s.path);this.Ue(n,o,ju.newNoDocument(o,er.min()))}else ps(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=k_(r).toUint8Array()}catch(u){if(u instanceof Zqe)return j3("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Oce(o,i,s)}catch(u){return j3(u instanceof JI?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&GQ(a.target)){const u=new En(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ju.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Or();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new Sj(t,n,this.Qe,this.ke,r);return this.ke=yy(),this.qe=CSe(),this.Qe=new Qs(Ti),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new SSe,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new fu(Ti),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||tn("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new SSe),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function CSe(){return new Qs(En.comparator)}function TSe(){return new Qs(En.comparator)}const d2n={asc:"ASCENDING",desc:"DESCENDING"},h2n={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},p2n={and:"AND",or:"OR"};class m2n{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function XQ(e,t){return e.useProto3Json||bj(t)?t:{value:t}}function Q$(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function SWe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function g2n(e,t){return Q$(e,t.toTimestamp())}function jm(e){return ps(!!e),er.fromTimestamp(function(n){const r=cb(n);return new ha(r.seconds,r.nanos)}(e))}function Fce(e,t){return QQ(e,t).canonicalString()}function QQ(e,t){const n=function(i){return new Ss(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function CWe(e){const t=Ss.fromString(e);return ps(kWe(t)),t}function JQ(e,t){return Fce(e.databaseId,t.path)}function tW(e,t){const n=CWe(t);if(n.get(1)!==e.databaseId.projectId)throw new Vt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Vt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new En(AWe(n))}function TWe(e,t){return Fce(e.databaseId,t)}function y2n(e){const t=CWe(e);return t.length===4?Ss.emptyPath():AWe(t)}function ZQ(e){return new Ss(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function AWe(e){return ps(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function ASe(e,t,n){return{name:JQ(e,t),fields:n.value.mapValue.fields}}function v2n(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Wn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ps(c===void 0||typeof c=="string"),sl.fromBase64String(c||"")):(ps(c===void 0||c instanceof Buffer||c instanceof Uint8Array),sl.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?ht.UNKNOWN:wWe(l.code);return new Vt(c,l.message||"")}(o);n=new EWe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=tW(e,r.document.name),s=jm(r.document.updateTime),o=r.document.createTime?jm(r.document.createTime):er.min(),a=new wc({mapValue:{fields:r.document.fields}}),u=ju.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new nM(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=tW(e,r.document),s=r.readTime?jm(r.readTime):er.min(),o=ju.newNoDocument(i,s),a=r.removedTargetIds||[];n=new nM([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=tW(e,r.document),s=r.removedTargetIds||[];n=new nM([],s,i,null)}else{if(!("filter"in t))return Wn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new a2n(i,s),a=r.targetId;n=new _We(a,o)}}return n}function b2n(e,t){let n;if(t instanceof jP)n={update:ASe(e,t.key,t.value)};else if(t instanceof Nce)n={delete:JQ(e,t.key)};else if(t instanceof Qb)n={update:ASe(e,t.key,t.data),updateMask:D2n(t.fieldMask)};else{if(!(t instanceof i2n))return Wn();n={verify:JQ(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof W3)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof G3)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Y3)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof X$)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Wn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:g2n(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Wn()}(e,t.precondition)),n}function x2n(e,t){return e&&e.length>0?(ps(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?jm(i.updateTime):jm(s);return o.isEqual(er.min())&&(o=jm(s)),new t2n(o,i.transformResults||[])}(n,t))):[]}function w2n(e,t){return{documents:[TWe(e,t.path)]}}function _2n(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=TWe(e,i);const s=function(l){if(l.length!==0)return IWe(wp.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:R2(d.field),direction:C2n(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=XQ(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function E2n(e){let t=y2n(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ps(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=DWe(f);return d instanceof wp&&rWe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new q3(N2(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,bj(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new K$(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new K$(h,d)}(n.endAt)),UEn(t,i,o,s,a,"F",u,l)}function S2n(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Wn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function DWe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=N2(n.unaryFilter.field);return Ho.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=N2(n.unaryFilter.field);return Ho.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=N2(n.unaryFilter.field);return Ho.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=N2(n.unaryFilter.field);return Ho.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Wn()}}(e):e.fieldFilter!==void 0?function(n){return Ho.create(N2(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Wn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return wp.create(n.compositeFilter.filters.map(r=>DWe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Wn()}}(n.compositeFilter.op))}(e):Wn()}function C2n(e){return d2n[e]}function T2n(e){return h2n[e]}function A2n(e){return p2n[e]}function R2(e){return{fieldPath:e.canonicalString()}}function N2(e){return ru.fromServerFormat(e.fieldPath)}function IWe(e){return e instanceof Ho?function(n){if(n.op==="=="){if(hSe(n.value))return{unaryFilter:{field:R2(n.field),op:"IS_NAN"}};if(dSe(n.value))return{unaryFilter:{field:R2(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hSe(n.value))return{unaryFilter:{field:R2(n.field),op:"IS_NOT_NAN"}};if(dSe(n.value))return{unaryFilter:{field:R2(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:R2(n.field),op:T2n(n.op),value:n.value}}}(e):e instanceof wp?function(n){const r=n.getFilters().map(i=>IWe(i));return r.length===1?r[0]:{compositeFilter:{op:A2n(n.op),filters:r}}}(e):Wn()}function D2n(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function kWe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(t,n,r,i,s=er.min(),o=er.min(),a=sl.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new J1(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new J1(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new J1(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new J1(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2n{constructor(t){this.ct=t}}function k2n(e){const t=E2n({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?KQ(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2n{constructor(){this._n=new N2n}addToCollectionParentIndex(t,n){return this._n.add(n),Et.resolve()}getCollectionParents(t,n){return Et.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Et.resolve()}deleteFieldIndex(t,n){return Et.resolve()}deleteAllFieldIndexes(t){return Et.resolve()}createTargetIndexes(t,n){return Et.resolve()}getDocumentsMatchingTarget(t,n){return Et.resolve(null)}getIndexType(t,n){return Et.resolve(0)}getFieldIndexes(t,n){return Et.resolve([])}getNextCollectionGroupToUpdate(t){return Et.resolve(null)}getMinOffset(t,n){return Et.resolve(lb.min())}getMinOffsetFromCollectionGroup(t,n){return Et.resolve(lb.min())}updateCollectionGroup(t,n,r){return Et.resolve()}updateIndexEntries(t,n){return Et.resolve()}}class N2n{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new fu(Ss.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new fu(Ss.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new mT(0)}static Ln(){return new mT(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2n{constructor(){this.changes=new zA(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ju.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Et.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2n{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2n{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&eR(r.mutation,i,Tf.empty(),ha.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Or()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Or()){const i=Tw();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=QI();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=Tw();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Or()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=yy();const o=Zk(),a=function(){return Zk()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Qb)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),eR(c.mutation,l,c.mutation.getFieldMask(),ha.now())):o.set(l.key,Tf.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new O2n(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=Zk();let i=new Qs((o,a)=>o-a),s=Or();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Tf.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Or()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=dWe();c.forEach(d=>{if(!s.has(d)){const h=bWe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Et.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return En.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):aWe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Et.resolve(Tw());let a=-1,u=s;return o.next(l=>Et.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Et.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Or())).next(c=>({batchId:a,changes:fWe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new En(n)).next(r=>{let i=QI();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=QI();return this.indexManager.getCollectionParents(t,s).next(a=>Et.forEach(a,u=>{const l=function(f,d){return new UA(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,ju.newInvalidDocument(c)))});let a=QI();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&eR(c.mutation,l,Tf.empty(),ha.now()),wj(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2n{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Et.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:jm(i.createTime)}}(n)),Et.resolve()}getNamedQuery(t,n){return Et.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:k2n(i.bundledQuery),readTime:jm(i.readTime)}}(n)),Et.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2n{constructor(){this.overlays=new Qs(En.comparator),this.hr=new Map}getOverlay(t,n){return Et.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Tw();return Et.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Et.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Et.resolve()}getOverlaysForCollection(t,n,r){const i=Tw(),s=n.length+1,o=new En(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Et.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Qs((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=Tw(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=Tw(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Et.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new o2n(n,r));let s=this.hr.get(n);s===void 0&&(s=Or(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mce{constructor(){this.Pr=new fu(Ta.Ir),this.Tr=new fu(Ta.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Ta(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Ta(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new En(new Ss([])),r=new Ta(n,t),i=new Ta(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new En(new Ss([])),r=new Ta(n,t),i=new Ta(n,t+1);let s=Or();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Ta(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ta{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return En.comparator(t.key,n.key)||Ti(t.pr,n.pr)}static Er(t,n){return Ti(t.pr,n.pr)||En.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2n{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new fu(Ta.Ir)}checkEmpty(t){return Et.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new s2n(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Ta(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Et.resolve(o)}lookupMutationBatch(t,n){return Et.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Et.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Et.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Et.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ta(n,0),i=new Ta(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Et.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new fu(Ti);return n.forEach(i=>{const s=new Ta(i,0),o=new Ta(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Et.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;En.isDocumentKey(s)||(s=s.child(""));const o=new Ta(new En(s),0);let a=new fu(Ti);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Et.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ps(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Et.forEach(n.mutations,i=>{const s=new Ta(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Ta(n,0),i=this.wr.firstAfterOrEqual(r);return Et.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Et.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2n{constructor(t){this.vr=t,this.docs=function(){return new Qs(En.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Et.resolve(r?r.document.mutableCopy():ju.newInvalidDocument(n))}getEntries(t,n){let r=yy();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ju.newInvalidDocument(i))}),Et.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=yy();const o=n.path,a=new En(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||EEn(_En(c),r)<=0||(i.has(c.key)||wj(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Et.resolve(s)}getAllFromCollectionGroup(t,n,r,i){Wn()}Fr(t,n){return Et.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new j2n(this)}getSize(t){return Et.resolve(this.size)}}class j2n extends P2n{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Et.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2n{constructor(t){this.persistence=t,this.Mr=new zA(n=>Ice(n),kce),this.lastRemoteSnapshotVersion=er.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Mce,this.targetCount=0,this.Lr=mT.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Et.resolve()}getLastRemoteSnapshotVersion(t){return Et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Et.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Et.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Et.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new mT(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Et.resolve()}updateTargetData(t,n){return this.qn(n),Et.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Et.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Et.waitFor(s).next(()=>i)}getTargetCount(t){return Et.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Et.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Et.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Et.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Et.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Et.resolve(r)}containsKey(t,n){return Et.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2n{constructor(t,n){this.Br={},this.overlays={},this.kr=new Cce(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new U2n(this),this.indexManager=new R2n,this.remoteDocumentCache=function(i){return new B2n(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new I2n(n),this.$r=new M2n(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new $2n,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new L2n(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){tn("MemoryPersistence","Starting transaction:",t);const i=new V2n(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Et.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class V2n extends CEn{constructor(t){super(),this.currentSequenceNumber=t}}class $ce{constructor(t){this.persistence=t,this.zr=new Mce,this.jr=null}static Hr(t){return new $ce(t)}get Jr(){if(this.jr)return this.jr;throw Wn()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Et.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Et.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Et.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Et.forEach(this.Jr,r=>{const i=En.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,er.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Et.or([()=>Et.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lce{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=Or(),i=Or();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Lce(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2n{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2n{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Cvn()?8:TEn(pu())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new H2n;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(iI()<=qr.DEBUG&&tn("QueryEngine","SDK will not create cache indexes for query:",k2(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Et.resolve()):(iI()<=qr.DEBUG&&tn("QueryEngine","Query:",k2(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(iI()<=qr.DEBUG&&tn("QueryEngine","The SDK decides to create cache indexes for query:",k2(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Bm(n))):Et.resolve())}ji(t,n){if(ySe(n))return Et.resolve(null);let r=Bm(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=KQ(n,null,"F"),r=Bm(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=Or(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,KQ(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return ySe(n)||i.isEqual(er.min())?Et.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Et.resolve(null):(iI()<=qr.DEBUG&&tn("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),k2(n)),this.es(t,o,n,wEn(i,-1)).next(a=>a))})}Zi(t,n){let r=new fu(lWe(t));return n.forEach((i,s)=>{wj(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return iI()<=qr.DEBUG&&tn("QueryEngine","Using full collection scan to execute query:",k2(n)),this.zi.getDocumentsMatchingQuery(t,n,lb.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2n{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Qs(Ti),this.rs=new zA(s=>Ice(s),kce),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new F2n(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function G2n(e,t,n,r){return new W2n(e,t,n,r)}async function RWe(e,t){const n=tr(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Or();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function Y2n(e,t){const n=tr(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Et.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);ps(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Or();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function NWe(e){const t=tr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function K2n(e,t){const n=tr(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(sl.EMPTY_BYTE_STRING,er.min()).withLastLimboFreeSnapshotVersion(er.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=yy(),l=Or();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(X2n(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(er.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Et.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function X2n(e,t,n){let r=Or(),i=Or();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=yy();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(er.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):tn("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function Q2n(e,t){const n=tr(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function J2n(e,t){const n=tr(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Et.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new J1(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function eJ(e,t,n){const r=tr(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!BP(o))throw o;tn("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function DSe(e,t,n){const r=tr(e);let i=er.min(),s=Or();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=tr(u),d=f.rs.get(c);return d!==void 0?Et.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,Bm(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:er.min(),n?s:Or())).next(a=>(Z2n(r,VEn(t),a),{documents:a,hs:s})))}function Z2n(e,t,n){let r=e.ss.get(t)||er.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class ISe{constructor(){this.activeTargetIds=KEn()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class eSn{constructor(){this.no=new ISe,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new ISe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tSn{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kSe{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){tn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){tn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let D6=null;function nW(){return D6===null?D6=function(){return 268435456+Math.round(2147483648*Math.random())}():D6++,"0x"+D6.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nSn={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rSn{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru="WebChannelConnection";class iSn extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=nW(),u=this.vo(n,r.toUriEncodedString());tn("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(tn("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw j3("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jA}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=nSn[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=nW();return new Promise((o,a)=>{const u=new qqe;u.setWithCredentials(!0),u.listenOnce(Gqe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ZF.NO_ERROR:const c=u.getResponseJson();tn(Ru,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case ZF.TIMEOUT:tn(Ru,`RPC '${t}' ${s} timed out`),a(new Vt(ht.DEADLINE_EXCEEDED,"Request time out"));break;case ZF.HTTP_ERROR:const f=u.getStatus();if(tn(Ru,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(ht).indexOf(y)>=0?y:ht.UNKNOWN}(h.status);a(new Vt(p,h.message))}else a(new Vt(ht.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Vt(ht.UNAVAILABLE,"Connection failed."));break;default:Wn()}}finally{tn(Ru,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);tn(Ru,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=nW(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Xqe(),a=Kqe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new Wqe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");tn(Ru,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new rSn({lo:g=>{h?tn(Ru,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(tn(Ru,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),tn(Ru,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(_){setTimeout(()=>{throw _},0)}})};return m(f,XI.EventType.OPEN,()=>{h||(tn(Ru,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,XI.EventType.CLOSE,()=>{h||(h=!0,tn(Ru,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,XI.EventType.ERROR,g=>{h||(h=!0,j3(Ru,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new Vt(ht.UNAVAILABLE,"The operation could not be completed")))}),m(f,XI.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];ps(!!v);const b=v,_=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(_){tn(Ru,`RPC '${t}' stream ${i} received error:`,_);const w=_.status;let S=function(k){const I=Lo[k];if(I!==void 0)return wWe(I)}(w),T=_.message;S===void 0&&(S=ht.INTERNAL,T="Unknown error status: "+w+" with message "+_.message),h=!0,p.po(new Vt(S,T)),f.close()}else tn(Ru,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,Yqe.STAT_EVENT,g=>{g.stat===VQ.PROXY?tn(Ru,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===VQ.NOPROXY&&tn(Ru,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function rW(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(e){return new m2n(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PWe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&tn("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OWe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new PWe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===ht.RESOURCE_EXHAUSTED?(gy(n.toString()),gy("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===ht.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new Vt(ht.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return tn("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(tn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sSn extends OWe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=v2n(this.serializer,t),r=function(s){if(!("targetChange"in s))return er.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?er.min():o.readTime?jm(o.readTime):er.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=ZQ(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=GQ(u)?{documents:w2n(s,u)}:{query:_2n(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=SWe(s,o.resumeToken);const l=XQ(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(er.min())>0){a.readTime=Q$(s,o.snapshotVersion.toTimestamp());const l=XQ(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=S2n(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=ZQ(this.serializer),n.removeTarget=t,this.i_(n)}}class oSn extends OWe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(ps(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=x2n(t.writeResults,t.commitTime),r=jm(t.commitTime);return this.listener.A_(r,n)}return ps(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=ZQ(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>b2n(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aSn extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Vt(ht.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,QQ(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Vt(ht.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,QQ(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Vt(ht.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class uSn{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(gy(n),this.y_=!1):tn("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lSn{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{yE(this)&&(tn("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=tr(u);l.M_.add(4),await VP(l),l.N_.set("Unknown"),l.M_.delete(4),await zP(l)}(this))})}),this.N_=new uSn(r,i)}}async function zP(e){if(yE(e))for(const t of e.x_)await t(!0)}async function VP(e){for(const t of e.x_)await t(!1)}function FWe(e,t){const n=tr(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),zce(n)?Uce(n):VA(n).Xo()&&jce(n,t))}function Bce(e,t){const n=tr(e),r=VA(n);n.F_.delete(t),r.Xo()&&MWe(n,t),n.F_.size===0&&(r.Xo()?r.n_():yE(n)&&n.N_.set("Unknown"))}function jce(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(er.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}VA(e).P_(t)}function MWe(e,t){e.L_.xe(t),VA(e).I_(t)}function Uce(e){e.L_=new f2n({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),VA(e).start(),e.N_.w_()}function zce(e){return yE(e)&&!VA(e).Zo()&&e.F_.size>0}function yE(e){return tr(e).M_.size===0}function $We(e){e.L_=void 0}async function cSn(e){e.N_.set("Online")}async function fSn(e){e.F_.forEach((t,n)=>{jce(e,t)})}async function dSn(e,t){$We(e),zce(e)?(e.N_.D_(t),Uce(e)):e.N_.set("Unknown")}async function hSn(e,t,n){if(e.N_.set("Online"),t instanceof EWe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){tn("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await J$(e,r)}else if(t instanceof nM?e.L_.Ke(t):t instanceof _We?e.L_.He(t):e.L_.We(t),!n.isEqual(er.min()))try{const r=await NWe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(sl.EMPTY_BYTE_STRING,c.snapshotVersion)),MWe(s,u);const f=new J1(c.target,u,l,c.sequenceNumber);jce(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){tn("RemoteStore","Failed to raise snapshot:",r),await J$(e,r)}}async function J$(e,t,n){if(!BP(t))throw t;e.M_.add(1),await VP(e),e.N_.set("Offline"),n||(n=()=>NWe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{tn("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await zP(e)})}function LWe(e,t){return t().catch(n=>J$(e,n,t))}async function Tj(e){const t=tr(e),n=fb(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;pSn(t);)try{const i=await Q2n(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,mSn(t,i)}catch(i){await J$(t,i)}BWe(t)&&jWe(t)}function pSn(e){return yE(e)&&e.v_.length<10}function mSn(e,t){e.v_.push(t);const n=fb(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function BWe(e){return yE(e)&&!fb(e).Zo()&&e.v_.length>0}function jWe(e){fb(e).start()}async function gSn(e){fb(e).V_()}async function ySn(e){const t=fb(e);for(const n of e.v_)t.d_(n.mutations)}async function vSn(e,t,n){const r=e.v_.shift(),i=Pce.from(r,t,n);await LWe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Tj(e)}async function bSn(e,t){t&&fb(e).E_&&await async function(r,i){if(function(o){return u2n(o)&&o!==ht.ABORTED}(i.code)){const s=r.v_.shift();fb(r).t_(),await LWe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Tj(r)}}(e,t),BWe(e)&&jWe(e)}async function RSe(e,t){const n=tr(e);n.asyncQueue.verifyOperationInProgress(),tn("RemoteStore","RemoteStore received new credentials");const r=yE(n);n.M_.add(3),await VP(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await zP(n)}async function xSn(e,t){const n=tr(e);t?(n.M_.delete(2),await zP(n)):t||(n.M_.add(2),await VP(n),n.N_.set("Unknown"))}function VA(e){return e.B_||(e.B_=function(n,r,i){const s=tr(n);return s.f_(),new sSn(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:cSn.bind(null,e),To:fSn.bind(null,e),Ao:dSn.bind(null,e),h_:hSn.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),zce(e)?Uce(e):e.N_.set("Unknown")):(await e.B_.stop(),$We(e))})),e.B_}function fb(e){return e.k_||(e.k_=function(n,r,i){const s=tr(n);return s.f_(),new oSn(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:gSn.bind(null,e),Ao:bSn.bind(null,e),R_:ySn.bind(null,e),A_:vSn.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await Tj(e)):(await e.k_.stop(),e.v_.length>0&&(tn("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vce{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Vg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new Vce(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Vt(ht.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hce(e,t){if(gy("AsyncQueue",`${t}: ${e}`),BP(e))return new Vt(ht.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(t){this.comparator=t?(n,r)=>t(n,r)||En.comparator(n.key,r.key):(n,r)=>En.comparator(n.key,r.key),this.keyedMap=QI(),this.sortedSet=new Qs(this.comparator)}static emptySet(t){return new YS(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof YS)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new YS;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NSe{constructor(){this.q_=new Qs(En.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):Wn():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class gT{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new gT(t,n,YS.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&xj(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wSn{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class _Sn{constructor(){this.queries=new zA(t=>uWe(t),xj),this.onlineState="Unknown",this.z_=new Set}}async function UWe(e,t){const n=tr(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new wSn,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Hce(o,`Initialization of query '${k2(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&qce(n)}async function zWe(e,t){const n=tr(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ESn(e,t){const n=tr(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&qce(n)}function SSn(e,t,n){const r=tr(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function qce(e){e.z_.forEach(t=>{t.next()})}var tJ,PSe;(PSe=tJ||(tJ={})).J_="default",PSe.Cache="cache";class VWe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new gT(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=gT.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==tJ.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HWe{constructor(t){this.key=t}}class qWe{constructor(t){this.key=t}}class CSn{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Or(),this.mutatedKeys=Or(),this.Ia=lWe(t),this.Ta=new YS(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new NSe,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=wj(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wn()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new gT(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new NSe,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=Or(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new qWe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new HWe(r))}),n}pa(t){this.la=t.hs,this.Pa=Or();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return gT.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class TSn{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class ASn{constructor(t){this.key=t,this.wa=!1}}class DSn{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new zA(a=>uWe(a),xj),this.Da=new Map,this.Ca=new Set,this.va=new Qs(En.comparator),this.Fa=new Map,this.Ma=new Mce,this.xa={},this.Oa=new Map,this.Na=mT.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function ISn(e,t,n=!0){const r=QWe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await WWe(r,t,n,!0),i}async function kSn(e,t){const n=QWe(e);await WWe(n,t,!0,!1)}async function WWe(e,t,n,r){const i=await J2n(e.localStore,Bm(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await RSn(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&FWe(e.remoteStore,i),a}async function RSn(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let b=g.view.da(y);b.Xi&&(b=await DSe(m.localStore,g.query,!1).then(({documents:T})=>g.view.da(T,b)));const _=v&&v.targetChanges.get(g.targetId),w=v&&v.targetMismatches.get(g.targetId)!=null,S=g.view.applyChanges(b,m.isPrimaryClient,_,w);return FSe(m,g.targetId,S.fa),S.snapshot}(e,f,d,h);const s=await DSe(e.localStore,t,!0),o=new CSn(t,s.hs),a=o.da(s.documents),u=UP.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);FSe(e,n,l.fa);const c=new TSn(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function NSn(e,t,n){const r=tr(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!xj(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await eJ(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Bce(r.remoteStore,i.targetId),nJ(r,i.targetId)}).catch(LP)):(nJ(r,i.targetId),await eJ(r.localStore,i.targetId,!0))}async function PSn(e,t){const n=tr(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Bce(n.remoteStore,r.targetId))}async function OSn(e,t,n){const r=USn(e);try{const i=await function(o,a){const u=tr(o),l=ha.now(),c=a.reduce((h,p)=>h.add(p.key),Or());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=yy(),m=Or();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=r2n(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new Qb(v.key,b,eWe(b.value.mapValue),Pf.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:fWe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Qs(Ti)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await HP(r,i.changes),await Tj(r.remoteStore)}catch(i){const s=Hce(i,"Failed to persist write");n.reject(s)}}async function GWe(e,t){const n=tr(e);try{const r=await K2n(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ps(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ps(o.wa):i.removedDocuments.size>0&&(ps(o.wa),o.wa=!1))}),await HP(n,r,t)}catch(r){await LP(r)}}function OSe(e,t,n){const r=tr(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=tr(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&qce(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function FSn(e,t,n){const r=tr(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Qs(En.comparator);o=o.insert(s,ju.newNoDocument(s,er.min()));const a=Or().add(s),u=new Sj(er.min(),new Map,new Qs(Ti),o,a);await GWe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),Wce(r)}else await eJ(r.localStore,t,!1).then(()=>nJ(r,t,n)).catch(LP)}async function MSn(e,t){const n=tr(e),r=t.batch.batchId;try{const i=await Y2n(n.localStore,t);KWe(n,r,null),YWe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await HP(n,i)}catch(i){await LP(i)}}async function $Sn(e,t,n){const r=tr(e);try{const i=await function(o,a){const u=tr(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ps(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);KWe(r,t,n),YWe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await HP(r,i)}catch(i){await LP(i)}}function YWe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function KWe(e,t,n){const r=tr(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function nJ(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||XWe(e,r)})}function XWe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(Bce(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),Wce(e))}function FSe(e,t,n){for(const r of n)r instanceof HWe?(e.Ma.addReference(r.key,t),LSn(e,r)):r instanceof qWe?(tn("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||XWe(e,r.key)):Wn()}function LSn(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(tn("SyncEngine","New document in limbo: "+n),e.Ca.add(r),Wce(e))}function Wce(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new En(Ss.fromString(t)),r=e.Na.next();e.Fa.set(r,new ASn(n)),e.va=e.va.insert(n,r),FWe(e.remoteStore,new J1(Bm(Rce(n.path)),r,"TargetPurposeLimboResolution",Cce.oe))}}async function HP(e,t,n){const r=tr(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=Lce.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=tr(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Et.forEach(l,d=>Et.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Et.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!BP(f))throw f;tn("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function BSn(e,t){const n=tr(e);if(!n.currentUser.isEqual(t)){tn("SyncEngine","User change. New user:",t.toKey());const r=await RWe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new Vt(ht.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await HP(n,r.us)}}function jSn(e,t){const n=tr(e),r=n.Fa.get(t);if(r&&r.wa)return Or().add(r.key);{let i=Or();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function QWe(e){const t=tr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=GWe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=jSn.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=FSn.bind(null,t),t.Sa.h_=ESn.bind(null,t.eventManager),t.Sa.ka=SSn.bind(null,t.eventManager),t}function USn(e){const t=tr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=MSn.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=$Sn.bind(null,t),t}class MSe{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Cj(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return G2n(this.persistence,new q2n,t.initialUser,this.serializer)}createPersistence(t){return new z2n($ce.Hr,this.serializer)}createSharedClientState(t){return new eSn}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class zSn{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>OSe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=BSn.bind(null,this.syncEngine),await xSn(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new _Sn}()}createDatastore(t){const n=Cj(t.databaseInfo.databaseId),r=function(s){return new iSn(s)}(t.databaseInfo);return function(s,o,a,u){return new aSn(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new lSn(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>OSe(this.syncEngine,n,0),function(){return kSe.D()?new kSe:new tSn}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new DSn(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=tr(r);tn("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await VP(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JWe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):gy("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VSn{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=cc.UNAUTHENTICATED,this.clientId=Qqe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{tn("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(tn("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Vt(ht.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Vg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Hce(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function iW(e,t){e.asyncQueue.verifyOperationInProgress(),tn("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await RWe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function $Se(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ZWe(e);tn("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>RSe(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>RSe(t.remoteStore,i)),e._onlineComponents=t}function HSn(e){return e.name==="FirebaseError"?e.code===ht.FAILED_PRECONDITION||e.code===ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function ZWe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){tn("FirestoreClient","Using user provided OfflineComponentProvider");try{await iW(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!HSn(n))throw n;j3("Error using user provided cache. Falling back to memory cache: "+n),await iW(e,new MSe)}}else tn("FirestoreClient","Using default OfflineComponentProvider"),await iW(e,new MSe);return e._offlineComponents}async function Gce(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(tn("FirestoreClient","Using user provided OnlineComponentProvider"),await $Se(e,e._uninitializedComponentsProvider._online)):(tn("FirestoreClient","Using default OnlineComponentProvider"),await $Se(e,new zSn))),e._onlineComponents}function qSn(e){return ZWe(e).then(t=>t.persistence)}function WSn(e){return Gce(e).then(t=>t.remoteStore)}function GSn(e){return Gce(e).then(t=>t.syncEngine)}async function eGe(e){const t=await Gce(e),n=t.eventManager;return n.onListen=ISn.bind(null,t.syncEngine),n.onUnlisten=NSn.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=kSn.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=PSn.bind(null,t.syncEngine),n}function YSn(e){return e.asyncQueue.enqueue(async()=>{const t=await qSn(e),n=await WSn(e);return t.setNetworkEnabled(!0),function(i){const s=tr(i);return s.M_.delete(0),zP(s)}(n)})}function KSn(e,t,n={}){const r=new Vg;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new JWe({next:d=>{o.enqueueAndForget(()=>zWe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new Vt(ht.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new Vt(ht.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new VWe(Rce(a.path),c,{includeMetadataChanges:!0,ra:!0});return UWe(s,f)}(await eGe(e),e.asyncQueue,t,n,r)),r.promise}function XSn(e,t,n={}){const r=new Vg;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new JWe({next:d=>{o.enqueueAndForget(()=>zWe(s,f)),d.fromCache&&u.source==="server"?l.reject(new Vt(ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new VWe(a,c,{includeMetadataChanges:!0,ra:!0});return UWe(s,f)}(await eGe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tGe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LSe=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nGe(e,t,n){if(!n)throw new Vt(ht.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function QSn(e,t,n,r){if(t===!0&&r===!0)throw new Vt(ht.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function BSe(e){if(!En.isDocumentKey(e))throw new Vt(ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function jSe(e){if(En.isDocumentKey(e))throw new Vt(ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Aj(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Wn()}function u0(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Vt(ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Aj(e);throw new Vt(ht.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class USe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Vt(ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Vt(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}QSn("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tGe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Vt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Vt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Vt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Yce{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new USe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Vt(ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Vt(ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new USe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new hEn;switch(r.type){case"firstParty":return new gEn(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Vt(ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=LSe.get(n);r&&(tn("ComponentProvider","Removing Datastore"),LSe.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new vE(this.firestore,t,this._query)}}class $l{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ev(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new $l(this.firestore,t,this._key)}}class Ev extends vE{constructor(t,n,r){super(t,n,Rce(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new $l(this.firestore,null,new En(t))}withConverter(t){return new Ev(this.firestore,t,this._path)}}function oc(e,t,...n){if(e=gs(e),nGe("collection","path",t),e instanceof Yce){const r=Ss.fromString(t,...n);return jSe(r),new Ev(e,null,r)}{if(!(e instanceof $l||e instanceof Ev))throw new Vt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ss.fromString(t,...n));return jSe(r),new Ev(e.firestore,null,r)}}function ys(e,t,...n){if(e=gs(e),arguments.length===1&&(t=Qqe.newId()),nGe("doc","path",t),e instanceof Yce){const r=Ss.fromString(t,...n);return BSe(r),new $l(e,null,new En(r))}{if(!(e instanceof $l||e instanceof Ev))throw new Vt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ss.fromString(t,...n));return BSe(r),new $l(e.firestore,e instanceof Ev?e.converter:null,new En(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JSn{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new PWe(this,"async_queue_retry"),this.hu=()=>{const n=rW();n&&tn("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=rW();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=rW();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Vg;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!BP(t))throw t;tn("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw gy("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=Vce.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Wn()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class bE extends Yce{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new JSn}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||rGe(this),this._firestoreClient.terminate()}}function ZSn(e,t,n){n||(n="(default)");const r=LA(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if($3(s,t))return i;throw new Vt(ht.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Vt(ht.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Vt(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function qP(e){return e._firestoreClient||rGe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function rGe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new IEn(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,tGe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new VSn(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function eCn(e){return YSn(qP(e=u0(e,bE)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(t){this._byteString=t}static fromBase64String(t){try{return new yT(sl.fromBase64String(t))}catch(n){throw new Vt(ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new yT(sl.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Vt(ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ru(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kce{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Vt(ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Vt(ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ti(this._lat,t._lat)||Ti(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tCn=/^__.*__$/;class nCn{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Qb(t,this.data,this.fieldMask,n,this.fieldTransforms):new jP(t,this.data,n,this.fieldTransforms)}}class iGe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Qb(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function sGe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wn()}}class Xce{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new Xce(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return Z$(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(sGe(this.fu)&&tCn.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class rCn{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Cj(t)}Fu(t,n,r,i=!1){return new Xce({fu:t,methodName:n,vu:r,path:ru.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ij(e){const t=e._freezeSettings(),n=Cj(e._databaseId);return new rCn(e._databaseId,!!t.ignoreUndefinedProperties,n)}function oGe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);Jce("Data must be an object, but it was:",o,r);const a=lGe(r,o);let u,l;if(s.merge)u=new Tf(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=rJ(t,f,n);if(!o.contains(d))throw new Vt(ht.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);fGe(c,d)||c.push(d)}u=new Tf(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new nCn(new wc(a),u,l)}class kj extends Dj{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof kj}}class Qce extends Dj{_toFieldTransform(t){return new ZEn(t.path,new W3)}isEqual(t){return t instanceof Qce}}function aGe(e,t,n,r){const i=e.Fu(1,t,n);Jce("Data must be an object, but it was:",i,r);const s=[],o=wc.empty();gE(r,(u,l)=>{const c=Zce(t,u,n);l=gs(l);const f=i.Su(c);if(l instanceof kj)s.push(c);else{const d=GP(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Tf(s);return new iGe(o,a,i.fieldTransforms)}function uGe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[rJ(t,r,n)],u=[i];if(s.length%2!=0)throw new Vt(ht.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(rJ(t,s[d])),u.push(s[d+1]);const l=[],c=wc.empty();for(let d=a.length-1;d>=0;--d)if(!fGe(l,a[d])){const h=a[d];let p=u[d];p=gs(p);const m=o.Su(h);if(p instanceof kj)l.push(h);else{const g=GP(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new Tf(l);return new iGe(c,f,o.fieldTransforms)}function iCn(e,t,n,r=!1){return GP(n,e.Fu(r?4:3,t))}function GP(e,t){if(cGe(e=gs(e)))return Jce("Unsupported field value:",t,e),lGe(e,t);if(e instanceof Dj)return function(r,i){if(!sGe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=GP(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=gs(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return XEn(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ha.fromDate(r);return{timestampValue:Q$(i.serializer,s)}}if(r instanceof ha){const s=new ha(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Q$(i.serializer,s)}}if(r instanceof Kce)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yT)return{bytesValue:SWe(i.serializer,r._byteString)};if(r instanceof $l){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Fce(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Aj(r)}`)}(e,t)}function lGe(e,t){const n={};return Jqe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):gE(e,(r,i)=>{const s=GP(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function cGe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ha||e instanceof Kce||e instanceof yT||e instanceof $l||e instanceof Dj)}function Jce(e,t,n){if(!cGe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Aj(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function rJ(e,t,n){if((t=gs(t))instanceof WP)return t._internalPath;if(typeof t=="string")return Zce(e,t);throw Z$("Field path arguments must be of type string or ",e,!1,void 0,n)}const sCn=new RegExp("[~\\*/\\[\\]]");function Zce(e,t,n){if(t.search(sCn)>=0)throw Z$(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new WP(...t.split("."))._internalPath}catch{throw Z$(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Z$(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Vt(ht.INVALID_ARGUMENT,a+e+u)}function fGe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dGe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $l(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new oCn(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Rj("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class oCn extends dGe{data(){return super.data()}}function Rj(e,t){return typeof t=="string"?Zce(e,t):t instanceof WP?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aCn(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Vt(ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class efe{}class hGe extends efe{}function sW(e,t,...n){let r=[];t instanceof efe&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof tfe).length,a=s.filter(u=>u instanceof Nj).length;if(o>1||o>0&&a>0)throw new Vt(ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class Nj extends hGe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new Nj(t,n,r)}_apply(t){const n=this._parse(t);return pGe(t._query,n),new vE(t.firestore,t.converter,YQ(t._query,n))}_parse(t){const n=Ij(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Vt(ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){qSe(f,c);const h=[];for(const p of f)h.push(HSe(u,s,p));d={arrayValue:{values:h}}}else d=HSe(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||qSe(f,c),d=iCn(a,o,f,c==="in"||c==="not-in");return Ho.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function zSe(e,t,n){const r=t,i=Rj("where",e);return Nj._create(i,r,n)}class tfe extends efe{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new tfe(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:wp.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)pGe(o,u),o=YQ(o,u)}(t._query,n),new vE(t.firestore,t.converter,YQ(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class nfe extends hGe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new nfe(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new Vt(ht.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Vt(ht.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new q3(s,o)}(t._query,this._field,this._direction);return new vE(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new UA(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function VSe(e,t="asc"){const n=t,r=Rj("orderBy",e);return nfe._create(r,n)}function HSe(e,t,n){if(typeof(n=gs(n))=="string"){if(n==="")throw new Vt(ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aWe(t)&&n.indexOf("/")!==-1)throw new Vt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Ss.fromString(n));if(!En.isDocumentKey(r))throw new Vt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fSe(e,new En(r))}if(n instanceof $l)return fSe(e,n._key);throw new Vt(ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Aj(n)}.`)}function qSe(e,t){if(!Array.isArray(e)||e.length===0)throw new Vt(ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function pGe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Vt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Vt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class uCn{convertValue(t,n="none"){switch(R_(t)){case 0:return null;case 1:return t.booleanValue;case 2:return zo(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(k_(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Wn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return gE(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new Kce(zo(t.latitude),zo(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Ace(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(z3(t));default:return null}}convertTimestamp(t){const n=cb(t);return new ha(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Ss.fromString(t);ps(kWe(r));const i=new V3(r.get(1),r.get(3)),s=new En(r.popFirst(5));return i.isEqual(n)||gy(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mGe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class gGe extends dGe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new rM(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Rj("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class rM extends gGe{data(t={}){return super.data(t)}}class lCn{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new ZI(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new rM(this._firestore,this._userDataWriter,r.key,r,new ZI(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Vt(ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new rM(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ZI(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new rM(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ZI(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:cCn(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function cCn(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(e){e=u0(e,$l);const t=u0(e.firestore,bE);return KSn(qP(t),e._key).then(n=>fCn(t,e,n))}class yGe extends uCn{constructor(t){super(),this.firestore=t}convertBytes(t){return new yT(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new $l(this.firestore,null,n)}}function y2(e){e=u0(e,vE);const t=u0(e.firestore,bE),n=qP(t),r=new yGe(t);return aCn(e._query),XSn(n,e._query).then(i=>new lCn(t,r,e,i))}function Nu(e,t,n){e=u0(e,$l);const r=u0(e.firestore,bE),i=mGe(e.converter,t,n);return rfe(r,[oGe(Ij(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Pf.none())])}function WSe(e,t,n,...r){e=u0(e,$l);const i=u0(e.firestore,bE),s=Ij(i);let o;return o=typeof(t=gs(t))=="string"||t instanceof WP?uGe(s,"updateDoc",e._key,t,n,r):aGe(s,"updateDoc",e._key,t),rfe(i,[o.toMutation(e._key,Pf.exists(!0))])}function rfe(e,t){return function(r,i){const s=new Vg;return r.asyncQueue.enqueueAndForget(async()=>OSn(await GSn(r),i,s)),s.promise}(qP(e),t)}function fCn(e,t,n){const r=n.docs.get(t._key),i=new yGe(e);return new gGe(e,i,t._key,r,new ZI(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dCn{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ij(t)}set(t,n,r){this._verifyNotCommitted();const i=oW(t,this._firestore),s=mGe(i.converter,n,r),o=oGe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Pf.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=oW(t,this._firestore);let o;return o=typeof(n=gs(n))=="string"||n instanceof WP?uGe(this._dataReader,"WriteBatch.update",s._key,n,r,i):aGe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Pf.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=oW(t,this._firestore);return this._mutations=this._mutations.concat(new Nce(n._key,Pf.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Vt(ht.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function oW(e,t){if((e=gs(e)).firestore!==t)throw new Vt(ht.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function GSe(){return new Qce("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YSe(e){return qP(e=u0(e,bE)),new dCn(e,t=>rfe(e,t))}(function(t,n=!0){(function(i){jA=i})(mE),py(new s0("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new bE(new pEn(r.getProvider("auth-internal")),new vEn(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Vt(ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new V3(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),up(aSe,"4.6.3",t),up(aSe,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iJ=new Map,vGe={activated:!1,tokenObservers:[]},hCn={initialized:!1,enabled:!1};function pa(e){return iJ.get(e)||Object.assign({},vGe)}function pCn(e,t){return iJ.set(e,t),iJ.get(e)}function Pj(){return hCn}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bGe="https://content-firebaseappcheck.googleapis.com/v1",mCn="exchangeRecaptchaV3Token",gCn="exchangeDebugToken",KSe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},yCn=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vCn{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new M3,this.pending.promise.catch(n=>{}),await bCn(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new M3,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function bCn(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xCn={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Dc=new $A("appCheck","AppCheck",xCn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XSe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function ife(e){if(!pa(e).activated)throw Dc.create("use-before-activation",{appName:e.name})}function xGe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=k6(n)+"d:"),r&&(o+=k6(r)+"h:"),o+=k6(i)+"m:"+k6(s)+"s",o}function k6(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sfe({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Dc.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Dc.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Dc.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Dc.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function wCn(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${bGe}/projects/${n}/apps/${r}:${mCn}?key=${i}`,body:{recaptcha_v3_token:t}}}function wGe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${bGe}/projects/${n}/apps/${r}:${gCn}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Cn="firebase-app-check-database",ECn=1,K3="firebase-app-check-store",_Ge="debug-token";let R6=null;function EGe(){return R6||(R6=new Promise((e,t)=>{try{const n=indexedDB.open(_Cn,ECn);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Dc.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(K3,{keyPath:"compositeKey"})}}}catch(n){t(Dc.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),R6)}function SCn(e){return CGe(TGe(e))}function CCn(e,t){return SGe(TGe(e),t)}function TCn(e){return SGe(_Ge,e)}function ACn(){return CGe(_Ge)}async function SGe(e,t){const r=(await EGe()).transaction(K3,"readwrite"),s=r.objectStore(K3).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Dc.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function CGe(e){const n=(await EGe()).transaction(K3,"readonly"),i=n.objectStore(K3).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Dc.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function TGe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3=new dj("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DCn(e){if(sce()){let t;try{t=await SCn(e)}catch(n){X3.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function aW(e,t){return sce()?CCn(e,t).catch(n=>{X3.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function ICn(){let e;try{e=await ACn()}catch{}if(e)return e;{const t=Ovn();return TCn(t).catch(n=>X3.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ofe(){return Pj().enabled}async function afe(){const e=Pj();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function kCn(){const e=VHe(),t=Pj();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new M3;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(ICn())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RCn={error:"UNKNOWN_ERROR"};function NCn(e){return ice.encodeString(JSON.stringify(e),!1)}async function sJ(e,t=!1){const n=e.app;ife(n);const r=pa(n);let i=r.token,s;if(i&&!sS(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(sS(u)?i=u:await aW(n,void 0))}if(!t&&i&&sS(i))return{token:i.token};let o=!1;if(ofe()){r.exchangeTokenPromise||(r.exchangeTokenPromise=sfe(wGe(n,await afe()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await aW(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await pa(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?X3.warn(u.message):X3.error(u),s=u}let a;return i?s?sS(i)?a={token:i.token,internalError:s}:a=JSe(s):(a={token:i.token},r.token=i,await aW(n,i)):a=JSe(s),o&&IGe(n,a),a}async function PCn(e){const t=e.app;ife(t);const{provider:n}=pa(t);if(ofe()){const r=await afe(),{token:i}=await sfe(wGe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function AGe(e,t,n,r){const{app:i}=e,s=pa(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&sS(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),QSe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>QSe(e))}function DGe(e,t){const n=pa(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function QSe(e){const{app:t}=e,n=pa(t);let r=n.tokenRefresher;r||(r=OCn(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function OCn(e){const{app:t}=e;return new vCn(async()=>{const n=pa(t);let r;if(n.token?r=await sJ(e,!0):r=await sJ(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=pa(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},KSe.RETRIAL_MIN_WAIT,KSe.RETRIAL_MAX_WAIT)}function IGe(e,t){const n=pa(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function sS(e){return e.expireTimeMillis-Date.now()>0}function JSe(e){return{token:NCn(RCn),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FCn{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=pa(this.app);for(const n of t)DGe(this.app,n.next);return Promise.resolve()}}function MCn(e,t){return new FCn(e,t)}function $Cn(e){return{getToken:t=>sJ(e,t),getLimitedUseToken:()=>PCn(e),addTokenListener:t=>AGe(e,"INTERNAL",t),removeTokenListener:t=>DGe(e.app,t)}}const LCn="@firebase/app-check",BCn="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jCn="https://www.google.com/recaptcha/api.js";function UCn(e,t){const n=new M3,r=pa(e);r.reCAPTCHAState={initialized:n};const i=zCn(e),s=XSe(!1);return s?ZSe(e,t,s,i,n):qCn(()=>{const o=XSe(!1);if(!o)throw new Error("no recaptcha");ZSe(e,t,o,i,n)}),n.promise}function ZSe(e,t,n,r,i){n.ready(()=>{HCn(e,t,n,r),i.resolve(n)})}function zCn(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function VCn(e){ife(e);const n=await pa(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=pa(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function HCn(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{pa(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{pa(e).reCAPTCHAState.succeeded=!1}}),s=pa(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function qCn(e){const t=document.createElement("script");t.src=jCn,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ufe{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;GCn(this._throttleData);const i=await VCn(this._app).catch(o=>{throw Dc.create("recaptcha-error")});if(!(!((t=pa(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Dc.create("recaptcha-error");let s;try{s=await sfe(wCn(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=WCn(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Dc.create("throttled",{time:xGe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=LA(t,"heartbeat"),UCn(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof ufe?this._siteKey===t._siteKey:!1}}function WCn(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+yCn,httpStatus:e};{const n=t?t.backoffCount:0,r=Bvn(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function GCn(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Dc.create("throttled",{time:xGe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YCn(e=ace(),t){e=gs(e);const n=LA(e,"app-check");if(Pj().initialized||kCn(),ofe()&&afe().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Dc.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return KCn(e,t.provider,t.isTokenAutoRefreshEnabled),pa(e).isTokenAutoRefreshEnabled&&AGe(r,"INTERNAL",()=>{}),r}function KCn(e,t,n){const r=pCn(e,Object.assign({},vGe));r.activated=!0,r.provider=t,r.cachedTokenPromise=DCn(e).then(i=>(i&&sS(i)&&(r.token=i,IGe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const XCn="app-check",eCe="app-check-internal";function QCn(){py(new s0(XCn,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return MCn(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(eCe).initialize()})),py(new s0(eCe,e=>{const t=e.getProvider("app-check").getImmediate();return $Cn(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),up(LCn,BCn)}QCn();var kGe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof mI=="function"&&mI;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof mI=="function"&&mI,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof on<"u"?on:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,w!==o&&m(this,w)}f.prototype.catch=function(w){return this.then(null,w)},f.prototype.then=function(w,S){if(typeof w!="function"&&this.state===l||typeof S!="function"&&this.state===u)return this;var T=new this.constructor(o);if(this.state!==c){var A=this.state===l?w:S;h(T,A,this.outcome)}else this.queue.push(new d(T,w,S));return T};function d(w,S,T){this.promise=w,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(w){a.resolve(this.promise,w)},d.prototype.otherCallFulfilled=function(w){h(this.promise,this.onFulfilled,w)},d.prototype.callRejected=function(w){a.reject(this.promise,w)},d.prototype.otherCallRejected=function(w){h(this.promise,this.onRejected,w)};function h(w,S,T){s(function(){var A;try{A=S(T)}catch(k){return a.reject(w,k)}A===w?a.reject(w,new TypeError("Cannot resolve promise with itself")):a.resolve(w,A)})}a.resolve=function(w,S){var T=g(p,S);if(T.status==="error")return a.reject(w,T.value);var A=T.value;if(A)m(w,A);else{w.state=l,w.outcome=S;for(var k=-1,I=w.queue.length;++k<I;)w.queue[k].callFulfilled(S)}return w},a.reject=function(w,S){w.state=u,w.outcome=S;for(var T=-1,A=w.queue.length;++T<A;)w.queue[T].callRejected(S);return w};function p(w){var S=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof S=="function")return function(){S.apply(w,arguments)}}function m(w,S){var T=!1;function A(F){T||(T=!0,a.reject(w,F))}function k(F){T||(T=!0,a.resolve(w,F))}function I(){S(k,A)}var R=g(I);R.status==="error"&&A(R.value)}function g(w,S){var T={};try{T.value=w(S),T.status="success"}catch(A){T.status="error",T.value=A}return T}f.resolve=y;function y(w){return w instanceof this?w:a.resolve(new this(o),w)}f.reject=v;function v(w){var S=new this(o);return a.reject(S,w)}f.all=b;function b(w){var S=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=w.length,A=!1;if(!T)return this.resolve([]);for(var k=new Array(T),I=0,R=-1,F=new this(o);++R<T;)O(w[R],R);return F;function O(L,H){S.resolve(L).then(U,function(G){A||(A=!0,a.reject(F,G))});function U(G){k[H]=G,++I===T&&!A&&(A=!0,a.resolve(F,k))}}}f.race=_;function _(w){var S=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=w.length,A=!1;if(!T)return this.resolve([]);for(var k=-1,I=new this(o);++k<T;)R(w[k]);return I;function R(F){S.resolve(F).then(function(O){A||(A=!0,a.resolve(I,O))},function(O){A||(A=!0,a.reject(I,O))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof on<"u"?on:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te};function o(te,be){if(!(te instanceof be))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var te=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),be=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!te||be)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(te,be){te=te||[],be=be||{};try{return new Blob(te,be)}catch(Ae){if(Ae.name!=="TypeError")throw Ae;for(var ue=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,De=new ue,Pe=0;Pe<te.length;Pe+=1)De.append(te[Pe]);return De.getBlob(be.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(te,be){be&&te.then(function(ue){be(null,ue)},function(ue){be(ue)})}function h(te,be,ue){typeof be=="function"&&te.then(be),typeof ue=="function"&&te.catch(ue)}function p(te){return typeof te!="string"&&(console.warn(te+" used as a key, but it is not a string."),te=String(te)),te}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,_="readonly",w="readwrite";function S(te){for(var be=te.length,ue=new ArrayBuffer(be),De=new Uint8Array(ue),Pe=0;Pe<be;Pe++)De[Pe]=te.charCodeAt(Pe);return ue}function T(te){return new f(function(be){var ue=te.transaction(g,w),De=c([""]);ue.objectStore(g).put(De,"key"),ue.onabort=function(Pe){Pe.preventDefault(),Pe.stopPropagation(),be(!1)},ue.oncomplete=function(){var Pe=navigator.userAgent.match(/Chrome\/(\d+)/),Ae=navigator.userAgent.match(/Edge\//);be(Ae||!Pe||parseInt(Pe[1],10)>=43)}}).catch(function(){return!1})}function A(te){return typeof y=="boolean"?f.resolve(y):T(te).then(function(be){return y=be,y})}function k(te){var be=v[te.name],ue={};ue.promise=new f(function(De,Pe){ue.resolve=De,ue.reject=Pe}),be.deferredOperations.push(ue),be.dbReady?be.dbReady=be.dbReady.then(function(){return ue.promise}):be.dbReady=ue.promise}function I(te){var be=v[te.name],ue=be.deferredOperations.pop();if(ue)return ue.resolve(),ue.promise}function R(te,be){var ue=v[te.name],De=ue.deferredOperations.pop();if(De)return De.reject(be),De.promise}function F(te,be){return new f(function(ue,De){if(v[te.name]=v[te.name]||W(),te.db)if(be)k(te),te.db.close();else return ue(te.db);var Pe=[te.name];be&&Pe.push(te.version);var Ae=u.open.apply(u,Pe);be&&(Ae.onupgradeneeded=function(Xe){var pt=Ae.result;try{pt.createObjectStore(te.storeName),Xe.oldVersion<=1&&pt.createObjectStore(g)}catch(yt){if(yt.name==="ConstraintError")console.warn('The database "'+te.name+'" has been upgraded from version '+Xe.oldVersion+" to version "+Xe.newVersion+', but the storage "'+te.storeName+'" already exists.');else throw yt}}),Ae.onerror=function(Xe){Xe.preventDefault(),De(Ae.error)},Ae.onsuccess=function(){var Xe=Ae.result;Xe.onversionchange=function(pt){pt.target.close()},ue(Xe),I(te)}})}function O(te){return F(te,!1)}function L(te){return F(te,!0)}function H(te,be){if(!te.db)return!0;var ue=!te.db.objectStoreNames.contains(te.storeName),De=te.version<te.db.version,Pe=te.version>te.db.version;if(De&&(te.version!==be&&console.warn('The database "'+te.name+`" can't be downgraded from version `+te.db.version+" to version "+te.version+"."),te.version=te.db.version),Pe||ue){if(ue){var Ae=te.db.version+1;Ae>te.version&&(te.version=Ae)}return!0}return!1}function U(te){return new f(function(be,ue){var De=new FileReader;De.onerror=ue,De.onloadend=function(Pe){var Ae=btoa(Pe.target.result||"");be({__local_forage_encoded_blob:!0,data:Ae,type:te.type})},De.readAsBinaryString(te)})}function G(te){var be=S(atob(te.data));return c([be],{type:te.type})}function Y(te){return te&&te.__local_forage_encoded_blob}function J(te){var be=this,ue=be._initReady().then(function(){var De=v[be._dbInfo.name];if(De&&De.dbReady)return De.dbReady});return h(ue,te,te),ue}function $(te){k(te);for(var be=v[te.name],ue=be.forages,De=0;De<ue.length;De++){var Pe=ue[De];Pe._dbInfo.db&&(Pe._dbInfo.db.close(),Pe._dbInfo.db=null)}return te.db=null,O(te).then(function(Ae){return te.db=Ae,H(te)?L(te):Ae}).then(function(Ae){te.db=be.db=Ae;for(var Xe=0;Xe<ue.length;Xe++)ue[Xe]._dbInfo.db=Ae}).catch(function(Ae){throw R(te,Ae),Ae})}function j(te,be,ue,De){De===void 0&&(De=1);try{var Pe=te.db.transaction(te.storeName,be);ue(null,Pe)}catch(Ae){if(De>0&&(!te.db||Ae.name==="InvalidStateError"||Ae.name==="NotFoundError"))return f.resolve().then(function(){if(!te.db||Ae.name==="NotFoundError"&&!te.db.objectStoreNames.contains(te.storeName)&&te.version<=te.db.version)return te.db&&(te.version=te.db.version+1),L(te)}).then(function(){return $(te).then(function(){j(te,be,ue,De-1)})}).catch(ue);ue(Ae)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function B(te){var be=this,ue={db:null};if(te)for(var De in te)ue[De]=te[De];var Pe=v[ue.name];Pe||(Pe=W(),v[ue.name]=Pe),Pe.forages.push(be),be._initReady||(be._initReady=be.ready,be.ready=J);var Ae=[];function Xe(){return f.resolve()}for(var pt=0;pt<Pe.forages.length;pt++){var yt=Pe.forages[pt];yt!==be&&Ae.push(yt._initReady().catch(Xe))}var vt=Pe.forages.slice(0);return f.all(Ae).then(function(){return ue.db=Pe.db,O(ue)}).then(function(It){return ue.db=It,H(ue,be._defaultConfig.version)?L(ue):It}).then(function(It){ue.db=Pe.db=It,be._dbInfo=ue;for(var zt=0;zt<vt.length;zt++){var Xn=vt[zt];Xn!==be&&(Xn._dbInfo.db=ue.db,Xn._dbInfo.version=ue.version)}})}function q(te,be){var ue=this;te=p(te);var De=new f(function(Pe,Ae){ue.ready().then(function(){j(ue._dbInfo,_,function(Xe,pt){if(Xe)return Ae(Xe);try{var yt=pt.objectStore(ue._dbInfo.storeName),vt=yt.get(te);vt.onsuccess=function(){var It=vt.result;It===void 0&&(It=null),Y(It)&&(It=G(It)),Pe(It)},vt.onerror=function(){Ae(vt.error)}}catch(It){Ae(It)}})}).catch(Ae)});return d(De,be),De}function Z(te,be){var ue=this,De=new f(function(Pe,Ae){ue.ready().then(function(){j(ue._dbInfo,_,function(Xe,pt){if(Xe)return Ae(Xe);try{var yt=pt.objectStore(ue._dbInfo.storeName),vt=yt.openCursor(),It=1;vt.onsuccess=function(){var zt=vt.result;if(zt){var Xn=zt.value;Y(Xn)&&(Xn=G(Xn));var nn=te(Xn,zt.key,It++);nn!==void 0?Pe(nn):zt.continue()}else Pe()},vt.onerror=function(){Ae(vt.error)}}catch(zt){Ae(zt)}})}).catch(Ae)});return d(De,be),De}function re(te,be,ue){var De=this;te=p(te);var Pe=new f(function(Ae,Xe){var pt;De.ready().then(function(){return pt=De._dbInfo,b.call(be)==="[object Blob]"?A(pt.db).then(function(yt){return yt?be:U(be)}):be}).then(function(yt){j(De._dbInfo,w,function(vt,It){if(vt)return Xe(vt);try{var zt=It.objectStore(De._dbInfo.storeName);yt===null&&(yt=void 0);var Xn=zt.put(yt,te);It.oncomplete=function(){yt===void 0&&(yt=null),Ae(yt)},It.onabort=It.onerror=function(){var nn=Xn.error?Xn.error:Xn.transaction.error;Xe(nn)}}catch(nn){Xe(nn)}})}).catch(Xe)});return d(Pe,ue),Pe}function xe(te,be){var ue=this;te=p(te);var De=new f(function(Pe,Ae){ue.ready().then(function(){j(ue._dbInfo,w,function(Xe,pt){if(Xe)return Ae(Xe);try{var yt=pt.objectStore(ue._dbInfo.storeName),vt=yt.delete(te);pt.oncomplete=function(){Pe()},pt.onerror=function(){Ae(vt.error)},pt.onabort=function(){var It=vt.error?vt.error:vt.transaction.error;Ae(It)}}catch(It){Ae(It)}})}).catch(Ae)});return d(De,be),De}function pe(te){var be=this,ue=new f(function(De,Pe){be.ready().then(function(){j(be._dbInfo,w,function(Ae,Xe){if(Ae)return Pe(Ae);try{var pt=Xe.objectStore(be._dbInfo.storeName),yt=pt.clear();Xe.oncomplete=function(){De()},Xe.onabort=Xe.onerror=function(){var vt=yt.error?yt.error:yt.transaction.error;Pe(vt)}}catch(vt){Pe(vt)}})}).catch(Pe)});return d(ue,te),ue}function Te(te){var be=this,ue=new f(function(De,Pe){be.ready().then(function(){j(be._dbInfo,_,function(Ae,Xe){if(Ae)return Pe(Ae);try{var pt=Xe.objectStore(be._dbInfo.storeName),yt=pt.count();yt.onsuccess=function(){De(yt.result)},yt.onerror=function(){Pe(yt.error)}}catch(vt){Pe(vt)}})}).catch(Pe)});return d(ue,te),ue}function ke(te,be){var ue=this,De=new f(function(Pe,Ae){if(te<0){Pe(null);return}ue.ready().then(function(){j(ue._dbInfo,_,function(Xe,pt){if(Xe)return Ae(Xe);try{var yt=pt.objectStore(ue._dbInfo.storeName),vt=!1,It=yt.openKeyCursor();It.onsuccess=function(){var zt=It.result;if(!zt){Pe(null);return}te===0||vt?Pe(zt.key):(vt=!0,zt.advance(te))},It.onerror=function(){Ae(It.error)}}catch(zt){Ae(zt)}})}).catch(Ae)});return d(De,be),De}function it(te){var be=this,ue=new f(function(De,Pe){be.ready().then(function(){j(be._dbInfo,_,function(Ae,Xe){if(Ae)return Pe(Ae);try{var pt=Xe.objectStore(be._dbInfo.storeName),yt=pt.openKeyCursor(),vt=[];yt.onsuccess=function(){var It=yt.result;if(!It){De(vt);return}vt.push(It.key),It.continue()},yt.onerror=function(){Pe(yt.error)}}catch(It){Pe(It)}})}).catch(Pe)});return d(ue,te),ue}function Re(te,be){be=m.apply(this,arguments);var ue=this.config();te=typeof te!="function"&&te||{},te.name||(te.name=te.name||ue.name,te.storeName=te.storeName||ue.storeName);var De=this,Pe;if(!te.name)Pe=f.reject("Invalid arguments");else{var Ae=te.name===ue.name&&De._dbInfo.db,Xe=Ae?f.resolve(De._dbInfo.db):O(te).then(function(pt){var yt=v[te.name],vt=yt.forages;yt.db=pt;for(var It=0;It<vt.length;It++)vt[It]._dbInfo.db=pt;return pt});te.storeName?Pe=Xe.then(function(pt){if(pt.objectStoreNames.contains(te.storeName)){var yt=pt.version+1;k(te);var vt=v[te.name],It=vt.forages;pt.close();for(var zt=0;zt<It.length;zt++){var Xn=It[zt];Xn._dbInfo.db=null,Xn._dbInfo.version=yt}var nn=new f(function(gr,si){var Nr=u.open(te.name,yt);Nr.onerror=function(Ko){var nf=Nr.result;nf.close(),si(Ko)},Nr.onupgradeneeded=function(){var Ko=Nr.result;Ko.deleteObjectStore(te.storeName)},Nr.onsuccess=function(){var Ko=Nr.result;Ko.close(),gr(Ko)}});return nn.then(function(gr){vt.db=gr;for(var si=0;si<It.length;si++){var Nr=It[si];Nr._dbInfo.db=gr,I(Nr._dbInfo)}}).catch(function(gr){throw(R(te,gr)||f.resolve()).catch(function(){}),gr})}}):Pe=Xe.then(function(pt){k(te);var yt=v[te.name],vt=yt.forages;pt.close();for(var It=0;It<vt.length;It++){var zt=vt[It];zt._dbInfo.db=null}var Xn=new f(function(nn,gr){var si=u.deleteDatabase(te.name);si.onerror=function(){var Nr=si.result;Nr&&Nr.close(),gr(si.error)},si.onblocked=function(){console.warn('dropInstance blocked for database "'+te.name+'" until all open connections are closed')},si.onsuccess=function(){var Nr=si.result;Nr&&Nr.close(),nn(Nr)}});return Xn.then(function(nn){yt.db=nn;for(var gr=0;gr<vt.length;gr++){var si=vt[gr];I(si._dbInfo)}}).catch(function(nn){throw(R(te,nn)||f.resolve()).catch(function(){}),nn})})}return d(Pe,be),Pe}var ut={_driver:"asyncStorage",_initStorage:B,_support:l(),iterate:Z,getItem:q,setItem:re,removeItem:xe,clear:pe,length:Te,key:ke,keys:it,dropInstance:Re};function Ke(){return typeof openDatabase=="function"}var Ct="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gt="~~local_forage_type~",Ie=/^~~local_forage_type~([^~]+)~/,Ve="__lfsc__:",ft=Ve.length,_t="arbf",Mt="blob",st="si08",X="ui08",de="uic8",we="si16",ae="si32",he="ur16",Ee="ui32",$e="fl32",Be="fl64",lt=ft+_t.length,Je=Object.prototype.toString;function Xt(te){var be=te.length*.75,ue=te.length,De,Pe=0,Ae,Xe,pt,yt;te[te.length-1]==="="&&(be--,te[te.length-2]==="="&&be--);var vt=new ArrayBuffer(be),It=new Uint8Array(vt);for(De=0;De<ue;De+=4)Ae=Ct.indexOf(te[De]),Xe=Ct.indexOf(te[De+1]),pt=Ct.indexOf(te[De+2]),yt=Ct.indexOf(te[De+3]),It[Pe++]=Ae<<2|Xe>>4,It[Pe++]=(Xe&15)<<4|pt>>2,It[Pe++]=(pt&3)<<6|yt&63;return vt}function fn(te){var be=new Uint8Array(te),ue="",De;for(De=0;De<be.length;De+=3)ue+=Ct[be[De]>>2],ue+=Ct[(be[De]&3)<<4|be[De+1]>>4],ue+=Ct[(be[De+1]&15)<<2|be[De+2]>>6],ue+=Ct[be[De+2]&63];return be.length%3===2?ue=ue.substring(0,ue.length-1)+"=":be.length%3===1&&(ue=ue.substring(0,ue.length-2)+"=="),ue}function Wt(te,be){var ue="";if(te&&(ue=Je.call(te)),te&&(ue==="[object ArrayBuffer]"||te.buffer&&Je.call(te.buffer)==="[object ArrayBuffer]")){var De,Pe=Ve;te instanceof ArrayBuffer?(De=te,Pe+=_t):(De=te.buffer,ue==="[object Int8Array]"?Pe+=st:ue==="[object Uint8Array]"?Pe+=X:ue==="[object Uint8ClampedArray]"?Pe+=de:ue==="[object Int16Array]"?Pe+=we:ue==="[object Uint16Array]"?Pe+=he:ue==="[object Int32Array]"?Pe+=ae:ue==="[object Uint32Array]"?Pe+=Ee:ue==="[object Float32Array]"?Pe+=$e:ue==="[object Float64Array]"?Pe+=Be:be(new Error("Failed to get type for BinaryArray"))),be(Pe+fn(De))}else if(ue==="[object Blob]"){var Ae=new FileReader;Ae.onload=function(){var Xe=gt+te.type+"~"+fn(this.result);be(Ve+Mt+Xe)},Ae.readAsArrayBuffer(te)}else try{be(JSON.stringify(te))}catch(Xe){console.error("Couldn't convert value into a JSON string: ",te),be(null,Xe)}}function an(te){if(te.substring(0,ft)!==Ve)return JSON.parse(te);var be=te.substring(lt),ue=te.substring(ft,lt),De;if(ue===Mt&&Ie.test(be)){var Pe=be.match(Ie);De=Pe[1],be=be.substring(Pe[0].length)}var Ae=Xt(be);switch(ue){case _t:return Ae;case Mt:return c([Ae],{type:De});case st:return new Int8Array(Ae);case X:return new Uint8Array(Ae);case de:return new Uint8ClampedArray(Ae);case we:return new Int16Array(Ae);case he:return new Uint16Array(Ae);case ae:return new Int32Array(Ae);case Ee:return new Uint32Array(Ae);case $e:return new Float32Array(Ae);case Be:return new Float64Array(Ae);default:throw new Error("Unkown type: "+ue)}}var Sn={serialize:Wt,deserialize:an,stringToBuffer:Xt,bufferToString:fn};function Mn(te,be,ue,De){te.executeSql("CREATE TABLE IF NOT EXISTS "+be.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ue,De)}function ki(te){var be=this,ue={db:null};if(te)for(var De in te)ue[De]=typeof te[De]!="string"?te[De].toString():te[De];var Pe=new f(function(Ae,Xe){try{ue.db=openDatabase(ue.name,String(ue.version),ue.description,ue.size)}catch(pt){return Xe(pt)}ue.db.transaction(function(pt){Mn(pt,ue,function(){be._dbInfo=ue,Ae()},function(yt,vt){Xe(vt)})},Xe)});return ue.serializer=Sn,Pe}function di(te,be,ue,De,Pe,Ae){te.executeSql(ue,De,Pe,function(Xe,pt){pt.code===pt.SYNTAX_ERR?Xe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[be.storeName],function(yt,vt){vt.rows.length?Ae(yt,pt):Mn(yt,be,function(){yt.executeSql(ue,De,Pe,Ae)},Ae)},Ae):Ae(Xe,pt)},Ae)}function Li(te,be){var ue=this;te=p(te);var De=new f(function(Pe,Ae){ue.ready().then(function(){var Xe=ue._dbInfo;Xe.db.transaction(function(pt){di(pt,Xe,"SELECT * FROM "+Xe.storeName+" WHERE key = ? LIMIT 1",[te],function(yt,vt){var It=vt.rows.length?vt.rows.item(0).value:null;It&&(It=Xe.serializer.deserialize(It)),Pe(It)},function(yt,vt){Ae(vt)})})}).catch(Ae)});return d(De,be),De}function As(te,be){var ue=this,De=new f(function(Pe,Ae){ue.ready().then(function(){var Xe=ue._dbInfo;Xe.db.transaction(function(pt){di(pt,Xe,"SELECT * FROM "+Xe.storeName,[],function(yt,vt){for(var It=vt.rows,zt=It.length,Xn=0;Xn<zt;Xn++){var nn=It.item(Xn),gr=nn.value;if(gr&&(gr=Xe.serializer.deserialize(gr)),gr=te(gr,nn.key,Xn+1),gr!==void 0){Pe(gr);return}}Pe()},function(yt,vt){Ae(vt)})})}).catch(Ae)});return d(De,be),De}function Lr(te,be,ue,De){var Pe=this;te=p(te);var Ae=new f(function(Xe,pt){Pe.ready().then(function(){be===void 0&&(be=null);var yt=be,vt=Pe._dbInfo;vt.serializer.serialize(be,function(It,zt){zt?pt(zt):vt.db.transaction(function(Xn){di(Xn,vt,"INSERT OR REPLACE INTO "+vt.storeName+" (key, value) VALUES (?, ?)",[te,It],function(){Xe(yt)},function(nn,gr){pt(gr)})},function(Xn){if(Xn.code===Xn.QUOTA_ERR){if(De>0){Xe(Lr.apply(Pe,[te,yt,ue,De-1]));return}pt(Xn)}})})}).catch(pt)});return d(Ae,ue),Ae}function ls(te,be,ue){return Lr.apply(this,[te,be,ue,1])}function ll(te,be){var ue=this;te=p(te);var De=new f(function(Pe,Ae){ue.ready().then(function(){var Xe=ue._dbInfo;Xe.db.transaction(function(pt){di(pt,Xe,"DELETE FROM "+Xe.storeName+" WHERE key = ?",[te],function(){Pe()},function(yt,vt){Ae(vt)})})}).catch(Ae)});return d(De,be),De}function Fo(te){var be=this,ue=new f(function(De,Pe){be.ready().then(function(){var Ae=be._dbInfo;Ae.db.transaction(function(Xe){di(Xe,Ae,"DELETE FROM "+Ae.storeName,[],function(){De()},function(pt,yt){Pe(yt)})})}).catch(Pe)});return d(ue,te),ue}function Ha(te){var be=this,ue=new f(function(De,Pe){be.ready().then(function(){var Ae=be._dbInfo;Ae.db.transaction(function(Xe){di(Xe,Ae,"SELECT COUNT(key) as c FROM "+Ae.storeName,[],function(pt,yt){var vt=yt.rows.item(0).c;De(vt)},function(pt,yt){Pe(yt)})})}).catch(Pe)});return d(ue,te),ue}function Rr(te,be){var ue=this,De=new f(function(Pe,Ae){ue.ready().then(function(){var Xe=ue._dbInfo;Xe.db.transaction(function(pt){di(pt,Xe,"SELECT key FROM "+Xe.storeName+" WHERE id = ? LIMIT 1",[te+1],function(yt,vt){var It=vt.rows.length?vt.rows.item(0).key:null;Pe(It)},function(yt,vt){Ae(vt)})})}).catch(Ae)});return d(De,be),De}function Ri(te){var be=this,ue=new f(function(De,Pe){be.ready().then(function(){var Ae=be._dbInfo;Ae.db.transaction(function(Xe){di(Xe,Ae,"SELECT key FROM "+Ae.storeName,[],function(pt,yt){for(var vt=[],It=0;It<yt.rows.length;It++)vt.push(yt.rows.item(It).key);De(vt)},function(pt,yt){Pe(yt)})})}).catch(Pe)});return d(ue,te),ue}function hi(te){return new f(function(be,ue){te.transaction(function(De){De.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Pe,Ae){for(var Xe=[],pt=0;pt<Ae.rows.length;pt++)Xe.push(Ae.rows.item(pt).name);be({db:te,storeNames:Xe})},function(Pe,Ae){ue(Ae)})},function(De){ue(De)})})}function Vs(te,be){be=m.apply(this,arguments);var ue=this.config();te=typeof te!="function"&&te||{},te.name||(te.name=te.name||ue.name,te.storeName=te.storeName||ue.storeName);var De=this,Pe;return te.name?Pe=new f(function(Ae){var Xe;te.name===ue.name?Xe=De._dbInfo.db:Xe=openDatabase(te.name,"","",0),te.storeName?Ae({db:Xe,storeNames:[te.storeName]}):Ae(hi(Xe))}).then(function(Ae){return new f(function(Xe,pt){Ae.db.transaction(function(yt){function vt(nn){return new f(function(gr,si){yt.executeSql("DROP TABLE IF EXISTS "+nn,[],function(){gr()},function(Nr,Ko){si(Ko)})})}for(var It=[],zt=0,Xn=Ae.storeNames.length;zt<Xn;zt++)It.push(vt(Ae.storeNames[zt]));f.all(It).then(function(){Xe()}).catch(function(nn){pt(nn)})},function(yt){pt(yt)})})}):Pe=f.reject("Invalid arguments"),d(Pe,be),Pe}var ri={_driver:"webSQLStorage",_initStorage:ki,_support:Ke(),iterate:As,getItem:Li,setItem:ls,removeItem:ll,clear:Fo,length:Ha,key:Rr,keys:Ri,dropInstance:Vs};function Ni(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ve(te,be){var ue=te.name+"/";return te.storeName!==be.storeName&&(ue+=te.storeName+"/"),ue}function ce(){var te="_localforage_support_test";try{return localStorage.setItem(te,!0),localStorage.removeItem(te),!1}catch{return!0}}function _e(){return!ce()||localStorage.length>0}function Ue(te){var be=this,ue={};if(te)for(var De in te)ue[De]=te[De];return ue.keyPrefix=ve(te,be._defaultConfig),_e()?(be._dbInfo=ue,ue.serializer=Sn,f.resolve()):f.reject()}function je(te){var be=this,ue=be.ready().then(function(){for(var De=be._dbInfo.keyPrefix,Pe=localStorage.length-1;Pe>=0;Pe--){var Ae=localStorage.key(Pe);Ae.indexOf(De)===0&&localStorage.removeItem(Ae)}});return d(ue,te),ue}function Dt(te,be){var ue=this;te=p(te);var De=ue.ready().then(function(){var Pe=ue._dbInfo,Ae=localStorage.getItem(Pe.keyPrefix+te);return Ae&&(Ae=Pe.serializer.deserialize(Ae)),Ae});return d(De,be),De}function Ht(te,be){var ue=this,De=ue.ready().then(function(){for(var Pe=ue._dbInfo,Ae=Pe.keyPrefix,Xe=Ae.length,pt=localStorage.length,yt=1,vt=0;vt<pt;vt++){var It=localStorage.key(vt);if(It.indexOf(Ae)===0){var zt=localStorage.getItem(It);if(zt&&(zt=Pe.serializer.deserialize(zt)),zt=te(zt,It.substring(Xe),yt++),zt!==void 0)return zt}}});return d(De,be),De}function bn(te,be){var ue=this,De=ue.ready().then(function(){var Pe=ue._dbInfo,Ae;try{Ae=localStorage.key(te)}catch{Ae=null}return Ae&&(Ae=Ae.substring(Pe.keyPrefix.length)),Ae});return d(De,be),De}function rr(te){var be=this,ue=be.ready().then(function(){for(var De=be._dbInfo,Pe=localStorage.length,Ae=[],Xe=0;Xe<Pe;Xe++){var pt=localStorage.key(Xe);pt.indexOf(De.keyPrefix)===0&&Ae.push(pt.substring(De.keyPrefix.length))}return Ae});return d(ue,te),ue}function mr(te){var be=this,ue=be.keys().then(function(De){return De.length});return d(ue,te),ue}function jn(te,be){var ue=this;te=p(te);var De=ue.ready().then(function(){var Pe=ue._dbInfo;localStorage.removeItem(Pe.keyPrefix+te)});return d(De,be),De}function Ar(te,be,ue){var De=this;te=p(te);var Pe=De.ready().then(function(){be===void 0&&(be=null);var Ae=be;return new f(function(Xe,pt){var yt=De._dbInfo;yt.serializer.serialize(be,function(vt,It){if(It)pt(It);else try{localStorage.setItem(yt.keyPrefix+te,vt),Xe(Ae)}catch(zt){(zt.name==="QuotaExceededError"||zt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&pt(zt),pt(zt)}})})});return d(Pe,ue),Pe}function ii(te,be){if(be=m.apply(this,arguments),te=typeof te!="function"&&te||{},!te.name){var ue=this.config();te.name=te.name||ue.name,te.storeName=te.storeName||ue.storeName}var De=this,Pe;return te.name?Pe=new f(function(Ae){te.storeName?Ae(ve(te,De._defaultConfig)):Ae(te.name+"/")}).then(function(Ae){for(var Xe=localStorage.length-1;Xe>=0;Xe--){var pt=localStorage.key(Xe);pt.indexOf(Ae)===0&&localStorage.removeItem(pt)}}):Pe=f.reject("Invalid arguments"),d(Pe,be),Pe}var dn={_driver:"localStorageWrapper",_initStorage:Ue,_support:Ni(),iterate:Ht,getItem:Dt,setItem:Ar,removeItem:jn,clear:je,length:mr,key:bn,keys:rr,dropInstance:ii},Dr=function(be,ue){return be===ue||typeof be=="number"&&typeof ue=="number"&&isNaN(be)&&isNaN(ue)},Qr=function(be,ue){for(var De=be.length,Pe=0;Pe<De;){if(Dr(be[Pe],ue))return!0;Pe++}return!1},ir=Array.isArray||function(te){return Object.prototype.toString.call(te)==="[object Array]"},un={},Br={},Pi={INDEXEDDB:ut,WEBSQL:ri,LOCALSTORAGE:dn},Ds=[Pi.INDEXEDDB._driver,Pi.WEBSQL._driver,Pi.LOCALSTORAGE._driver],_i=["dropInstance"],ns=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(_i),Yo={description:"",driver:Ds.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function qa(te,be){te[be]=function(){var ue=arguments;return te.ready().then(function(){return te[be].apply(te,ue)})}}function Mo(){for(var te=1;te<arguments.length;te++){var be=arguments[te];if(be)for(var ue in be)be.hasOwnProperty(ue)&&(ir(be[ue])?arguments[0][ue]=be[ue].slice():arguments[0][ue]=be[ue])}return arguments[0]}var Jl=function(){function te(be){o(this,te);for(var ue in Pi)if(Pi.hasOwnProperty(ue)){var De=Pi[ue],Pe=De._driver;this[ue]=Pe,un[Pe]||this.defineDriver(De)}this._defaultConfig=Mo({},Yo),this._config=Mo({},this._defaultConfig,be),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return te.prototype.config=function(ue){if((typeof ue>"u"?"undefined":s(ue))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var De in ue){if(De==="storeName"&&(ue[De]=ue[De].replace(/\W/g,"_")),De==="version"&&typeof ue[De]!="number")return new Error("Database version must be a number.");this._config[De]=ue[De]}return"driver"in ue&&ue.driver?this.setDriver(this._config.driver):!0}else return typeof ue=="string"?this._config[ue]:this._config},te.prototype.defineDriver=function(ue,De,Pe){var Ae=new f(function(Xe,pt){try{var yt=ue._driver,vt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ue._driver){pt(vt);return}for(var It=ns.concat("_initStorage"),zt=0,Xn=It.length;zt<Xn;zt++){var nn=It[zt],gr=!Qr(_i,nn);if((gr||ue[nn])&&typeof ue[nn]!="function"){pt(vt);return}}var si=function(){for(var nf=function(cl){return function(){var vu=new Error("Method "+cl+" is not implemented by the current driver"),ah=f.reject(vu);return d(ah,arguments[arguments.length-1]),ah}},oh=0,zy=_i.length;oh<zy;oh++){var $p=_i[oh];ue[$p]||(ue[$p]=nf($p))}};si();var Nr=function(nf){un[yt]&&console.info("Redefining LocalForage driver: "+yt),un[yt]=ue,Br[yt]=nf,Xe()};"_support"in ue?ue._support&&typeof ue._support=="function"?ue._support().then(Nr,pt):Nr(!!ue._support):Nr(!0)}catch(Ko){pt(Ko)}});return h(Ae,De,Pe),Ae},te.prototype.driver=function(){return this._driver||null},te.prototype.getDriver=function(ue,De,Pe){var Ae=un[ue]?f.resolve(un[ue]):f.reject(new Error("Driver not found."));return h(Ae,De,Pe),Ae},te.prototype.getSerializer=function(ue){var De=f.resolve(Sn);return h(De,ue),De},te.prototype.ready=function(ue){var De=this,Pe=De._driverSet.then(function(){return De._ready===null&&(De._ready=De._initDriver()),De._ready});return h(Pe,ue,ue),Pe},te.prototype.setDriver=function(ue,De,Pe){var Ae=this;ir(ue)||(ue=[ue]);var Xe=this._getSupportedDrivers(ue);function pt(){Ae._config.driver=Ae.driver()}function yt(zt){return Ae._extend(zt),pt(),Ae._ready=Ae._initStorage(Ae._config),Ae._ready}function vt(zt){return function(){var Xn=0;function nn(){for(;Xn<zt.length;){var gr=zt[Xn];return Xn++,Ae._dbInfo=null,Ae._ready=null,Ae.getDriver(gr).then(yt).catch(nn)}pt();var si=new Error("No available storage method found.");return Ae._driverSet=f.reject(si),Ae._driverSet}return nn()}}var It=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=It.then(function(){var zt=Xe[0];return Ae._dbInfo=null,Ae._ready=null,Ae.getDriver(zt).then(function(Xn){Ae._driver=Xn._driver,pt(),Ae._wrapLibraryMethodsWithReady(),Ae._initDriver=vt(Xe)})}).catch(function(){pt();var zt=new Error("No available storage method found.");return Ae._driverSet=f.reject(zt),Ae._driverSet}),h(this._driverSet,De,Pe),this._driverSet},te.prototype.supports=function(ue){return!!Br[ue]},te.prototype._extend=function(ue){Mo(this,ue)},te.prototype._getSupportedDrivers=function(ue){for(var De=[],Pe=0,Ae=ue.length;Pe<Ae;Pe++){var Xe=ue[Pe];this.supports(Xe)&&De.push(Xe)}return De},te.prototype._wrapLibraryMethodsWithReady=function(){for(var ue=0,De=ns.length;ue<De;ue++)qa(this,ns[ue])},te.prototype.createInstance=function(ue){return new te(ue)},te}(),Jf=new Jl;r.exports=Jf},{3:3}]},{},[4])(4)})})(kGe);var JCn=kGe.exports;const P2=l0(JCn);var Ka=[];for(var uW=0;uW<256;++uW)Ka.push((uW+256).toString(16).slice(1));function ZCn(e,t=0){return(Ka[e[t+0]]+Ka[e[t+1]]+Ka[e[t+2]]+Ka[e[t+3]]+"-"+Ka[e[t+4]]+Ka[e[t+5]]+"-"+Ka[e[t+6]]+Ka[e[t+7]]+"-"+Ka[e[t+8]]+Ka[e[t+9]]+"-"+Ka[e[t+10]]+Ka[e[t+11]]+Ka[e[t+12]]+Ka[e[t+13]]+Ka[e[t+14]]+Ka[e[t+15]]).toLowerCase()}var N6,eTn=new Uint8Array(16);function tTn(){if(!N6&&(N6=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!N6))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return N6(eTn)}var nTn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const tCe={randomUUID:nTn};function eL(e,t,n){if(tCe.randomUUID&&!e)return tCe.randomUUID();e=e||{};var r=e.random||(e.rng||tTn)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,ZCn(r)}class RGe{constructor(t){ml(this,"engine");ml(this,"connected",!1);ml(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function tL(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function sI(e){return e.participantId!==void 0}class im extends RGe{constructor(){super("firebase");ml(this,"RECAPTCHAV3TOKEN","6LdQ8qUqAAAAAPE14fuWshHdzOerFOSMhzEdA1Wp");ml(this,"firestore");ml(this,"collectionPrefix","prod-");ml(this,"studyCollection");ml(this,"storage");ml(this,"studyId","");ml(this,"localForage",P2.createInstance({name:"currentParticipantId"}));ml(this,"participantData",null);ml(this,"userManagementData",{});const n=sj.parse(`
{
  apiKey: "AIzaSyBB3ZVfd5sNerH0LLPbe8Pn-NXtLOO4-8M",
  authDomain: "vis-decode-operator-1eb8d.firebaseapp.com",
  projectId: "vis-decode-operator-1eb8d",
  storageBucket: "vis-decode-operator-1eb8d.firebasestorage.app",
  messagingSenderId: "967262141033",
  appId: "1:967262141033:web:b1ed6ad992b441194440f8"
}
`),r=KHe(n);this.firestore=ZSn(r,{}),this.storage=sSe();try{YCn(r,{provider:new ufe(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await eCn(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=G$();if(!i.currentUser&&(await Dxn(i),!i.currentUser))throw new Error("Login failed with firebase");this.studyCollection=oc(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const s=await this.getCurrentConfigHash(),o=await tL(JSON.stringify(r));if(await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this._setCurrentConfigHash(o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(sI(a))return this.participantData=a,a;const l=await tL(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=ys(this.studyCollection,"configHash"),r=await I6(n);return r.exists()?r.data().configHash:null}async _setCurrentConfigHash(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=ys(this.studyCollection,"configHash");await Nu(r,{configHash:n})}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=uf(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=eL(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAudio(n,r){const i=s=>{this._pushToFirebaseStorage(`/audio/${this.currentParticipantId}`,r,s.data)};n.addEventListener("dataavailable",i),n.requestData(),setTimeout(()=>{n.removeEventListener("dataavailable",i)},0)}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=ys(this.studyCollection,"sequenceAssignment");await Nu(i,{});const s=oc(i,"sequenceAssignment"),o=ys(s,this.currentParticipantId),a=sW(s,zSe("rejected","==",!0),zSe("claimed","==",!1)),u=await y2(a);if(u.docs.length>0){const m=u.docs[0],g=m.data().timestamp;r.dataCollectionEnabled&&(await Nu(m.ref,{claimed:!0}),await Nu(o,{participantId:this.currentParticipantId,timestamp:g,rejected:!1,claimed:!1,completed:null}))}else r.dataCollectionEnabled&&await Nu(o,{participantId:this.currentParticipantId,timestamp:GSe(),rejected:!1,claimed:!1,completed:null});const l=sW(s,VSe("timestamp","asc")),d=(await y2(l)).docs.map(m=>m.data()).filter(m=>!m.rejected).findIndex(m=>m.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=uf(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await rI(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");sI(a)&&i.push(a)});return await Promise.all(s),i}async getAudio(n,r){const i=sSe(),s=await S6(uf(i,`${this.collectionPrefix}${this.studyId}/audio/${r}_${n}`));return new Promise(a=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{const l=u.response,c=URL.createObjectURL(l);a(c)},u.open("GET",s),u.send()})}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null&&!n)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return sI(r)?r:null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=eL();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);if(this.participantData.completed)return!0;this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData);const r=ys(this.studyCollection,"sequenceAssignment"),i=oc(r,"sequenceAssignment"),s=ys(i,this.currentParticipantId);return await WSe(s,{completed:GSe()}),!0}async getUserManagementData(n){if(Object.keys(this.userManagementData).length===0){const r=oc(this.firestore,"user-management"),i=await y2(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));this.userManagementData=s}return n in this.userManagementData?this.userManagementData[n]:null}async validateUser(n,r=!1){if(r&&(this.userManagementData={}),n!=null&&n.user){const i=await this.getUserManagementData("authentication");if(i!=null&&i.isEnabled){const s=await this.getUserManagementData("adminUsers");if(s&&s.adminUsersList){const o=Object.fromEntries(s.adminUsersList.map(u=>[u.email,u.uid]));if(n.user.email&&(o[n.user.email]===n.user.uid||o[n.user.email]===null)){if(n.user.email&&o[n.user.email]===null){const u=s.adminUsersList.find(l=>l.email===n.user.email);u&&(u.uid=n.user.uid),await Nu(ys(this.firestore,"user-management","adminUsers"),{adminUsersList:s.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await Nu(ys(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await Nu(ys(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await Nu(ys(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await Nu(ys(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=uf(this.storage,`${this.collectionPrefix}${n}/participants`),i=await rI(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");sI(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r,i){const s=oc(this.firestore,`${this.collectionPrefix}${n}`),o=uf(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),a=await this._getFromFirebaseStorageByRef(o,"participantData");try{if(!a||!sI(a)||a.rejected)return;a.rejected={reason:i,timestamp:new Date().getTime()},await this._pushToFirebaseStorageByRef(o,"participantData",a);const u=ys(s,"sequenceAssignment"),l=oc(u,"sequenceAssignment"),c=ys(l,r);await WSe(c,{rejected:!0})}catch{console.warn("Failed to reject the participant.")}}async rejectCurrentParticipant(n,r){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){const s=ys(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await Nu(s,{[r]:i},{merge:!0})}async getModes(n){const r=ys(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await I6(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await Nu(r,s),s}async getParticipantsStatusCounts(n){const r=oc(this.firestore,`${this.collectionPrefix}${n}`),i=ys(r,"sequenceAssignment"),s=oc(i,"sequenceAssignment"),o=sW(s,VSe("timestamp","asc")),u=(await y2(o)).docs.map(p=>p.data()),l=u.filter(p=>p.completed&&!p.rejected).length,c=u.filter(p=>p.rejected).length,f=u.length-l-c,d=u.length>0?u[0].timestamp:null,h=u.length>0?u.at(-1).timestamp:null;return{completed:l,rejected:c,inProgress:f,minTime:d,maxTime:h}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=ys(this.firestore,"metadata","collections"),i=await I6(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=ys(this.firestore,"metadata","collections");await Nu(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=ys(this.firestore,"metadata","collections");return await Nu(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=ys(this.firestore,"metadata","collections"),i=await I6(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await Nu(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=uf(this.storage,n),s=(await rI(r)).items.map(o=>iSe(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=uf(this.storage,n),o=(await rI(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=uf(this.storage,n),s=uf(this.storage,r),o=await S6(i),u=await(await fetch(o)).blob();await E6(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=oc(this.firestore,n),s=ys(i,"sequenceAssignment"),o=oc(s,"sequenceAssignment"),a=oc(this.firestore,r),u=ys(a,"sequenceAssignment");await Nu(u,{});const l=oc(u,"sequenceAssignment"),c=await y2(o),f=YSe(this.firestore);c.docs.forEach(d=>{const h=ys(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=oc(this.firestore,n),i=ys(r,"sequenceAssignment"),s=oc(i,"sequenceAssignment"),o=await y2(s),a=YSe(this.firestore);o.forEach(u=>{const l=ys(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=uf(this.storage,n);return(await rI(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=uf(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await S6(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await S6(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){const s=uf(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);if(i instanceof Blob)await E6(s,i);else if(Object.keys(i).length>0){const o=new Blob([JSON.stringify(i)],{type:"application/json"});await E6(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await E6(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=uf(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await iSe(i)}}const NGe=N.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),YP=()=>N.useContext(NGe);function rTn({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=N.useState(t),[o,a]=N.useState(!1),{storageEngine:u}=Po(),l=async()=>{const h=G$();try{await Fxn(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h,!0):!1;N.useEffect(()=>{s(t);let h;if(u instanceof im)try{h=G$()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof im){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=Oxn(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=N.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return E.jsx(NGe.Provider,{value:d,children:i.determiningStatus?E.jsx($f,{visible:!0}):e})}function iTn({cellData:e}){return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?E.jsx(wn.Td,{children:E.jsx(Ys,{miw:100,children:e.timedOut?E.jsx(tt,{children:"Timed out"}):Object.entries(e.answer).map(([t,n])=>E.jsxs(Fe,{children:[E.jsxs(tt,{fw:700,span:!0,children:[" ",`${t}: `]}),typeof n=="object"?E.jsx(tt,{size:"xs",component:"pre",span:!0,children:`${JSON.stringify(n,null,2)}`}):E.jsx(tt,{span:!0,children:n})]},`cell-${t}`))})}):E.jsx(wn.Td,{children:"N/A"})}function nCe({cellData:e}){const t=(e.endTime-e.startTime)/1e3,n=b5e(e);return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?E.jsxs(wn.Td,{children:[t.toFixed(1)," ","s",n&&E.jsxs(E.Fragment,{children:[E.jsx("br",{})," ","(",(n/1e3).toFixed(1)," ","s)"]})]}):E.jsx(wn.Td,{children:"N/A"})}function sTn(e){const{metaData:t}=e;return E.jsx(wn.Td,{children:E.jsx(Fee,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:E.jsxs(Ys,{gap:"xs",children:[E.jsxs(Fe,{children:["IP:"," ",t.ip]}),E.jsxs(Fe,{children:["Language:"," ",t.language]}),E.jsxs(Fe,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),E.jsxs(Fe,{children:["User Agent:"," ",t.userAgent]})]})})})}function oTn({visibleParticipants:e,studyConfig:t,refresh:n}){const{storageEngine:r}=Po(),{studyId:i}=zm(),{user:s}=YP(),o=async(_,w)=>{if(r&&i)if(s.isAdmin){const S=w===""?"Rejected by admin":w;await r.rejectParticipant(i,_,S),await n()}else console.warn("You are not authorized to perform this action.")},[a,u]=N.useState([]),[l,c]=N.useState(!1),[f,d]=N.useState(!1),[h,p]=N.useState(""),m=async()=>{c(!0),d(!1);const _=a.map(async w=>await o(w,h));await Promise.all(_),u([]),await n(),c(!1)};function g(_){_==="all"?a.length===e.length?u([]):u(e.map(w=>w.participantId)):a.includes(_)?u(a.filter(w=>w!==_)):u([...a,_])}const y=E3e(t.sequence),v=[E.jsx(wn.Th,{children:E.jsx(Jt,{justify:"center",children:E.jsx(Ec,{mb:-4,checked:a.length===e.length,onChange:()=>g("all")})})},"action"),E.jsx(wn.Th,{children:"ID"},"ID"),E.jsx(wn.Th,{children:"Status"},"status"),E.jsx(wn.Th,{children:"Tags"},"tags"),E.jsx(wn.Th,{children:"Meta"},"meta"),...y.flatMap(_=>[E.jsx(wn.Th,{children:_.componentName},`header-${_.componentName}-${_.timesSeenInBlock}`),E.jsxs(wn.Th,{children:[E.jsx("span",{style:{whiteSpace:"nowrap"},children:_.componentName})," ","Duration (clean)"]},`header-${_.componentName}-${_.timesSeenInBlock}-duration`)]),E.jsx(wn.Th,{children:"Total Duration (clean)"},"total-duration")],b=e.map(_=>E.jsxs(wn.Tr,{children:[E.jsx(wn.Td,{children:E.jsx(Jt,{justify:"center",children:E.jsx(Ec,{mb:-4,checked:a.includes(_.participantId),onChange:()=>g(_.participantId)})})}),E.jsx(wn.Td,{style:{whiteSpace:"nowrap"},children:_.participantId}),E.jsx(wn.Td,{children:E.jsxs(Jt,{direction:"column",miw:100,children:[E.jsxs(Jt,{direction:"row",align:"center",children:[_.rejected?E.jsx(xs,{label:"Rejected",children:E.jsx(Qee,{size:16,color:"red",style:{marginBottom:-3}})}):_.completed?E.jsx(xs,{label:"Completed",children:E.jsx(_ke,{size:16,color:"teal",style:{marginBottom:-3}})}):E.jsx(xs,{label:"In Progress",children:E.jsx(Eke,{size:16,color:"orange",style:{marginBottom:-3}})}),!_.completed&&E.jsxs(tt,{size:"sm",mb:-1,ml:4,children:[(Object.entries(_.answers).filter(([w,S])=>S.endTime!==-1&&S.endTime!==void 0).length/(dp(_.sequence).length-1)*100).toFixed(2),"%"]})]}),_.rejected&&E.jsx(tt,{mt:5,fz:10,children:_.rejected.reason})]})}),E.jsx(wn.Td,{children:E.jsx(Jt,{direction:"column",miw:100,children:(_.participantTags||[]).map(w=>E.jsxs(tt,{fz:10,children:["-"," ",w]},`tag-${w}`))})}),_.metadata?E.jsx(sTn,{metaData:_.metadata}):E.jsx(wn.Td,{children:"N/A"}),y.map(w=>{const S=Ete(_.sequence,w.orderPath),T=S&&Object.entries(_.answers).sort((A,k)=>{const I=parseInt(A[0].slice(A[0].lastIndexOf("_")+1),10),R=parseInt(k[0].slice(k[0].lastIndexOf("_")+1),10);return I-R}).filter(([A])=>{const k=A.slice(0,A.lastIndexOf("_")),I=parseInt(A.slice(A.lastIndexOf("_")+1),10);return k===w.componentName&&I<=S[0].lastIndex&&I>=S[0].firstIndex});return T!==null&&T.length>=w.timesSeenInBlock+1&&T[w.timesSeenInBlock][1].endTime!==-1?E.jsxs(yi.Fragment,{children:[E.jsx(iTn,{cellData:T[w.timesSeenInBlock][1]}),E.jsx(nCe,{cellData:T[w.timesSeenInBlock][1]})]},`cellgroup-${_.participantId}-${w.componentName}-${w.timesSeenInBlock}`):E.jsxs(yi.Fragment,{children:[E.jsx(wn.Td,{children:"N/A"}),E.jsx(wn.Td,{children:"N/A"})]},`cellgroup-${_.participantId}-${w.componentName}-${w.timesSeenInBlock}`)}),E.jsx(nCe,{cellData:{startTime:Math.min(...Object.values(_.answers).filter(w=>w.endTime!==-1&&w.endTime!==void 0).map(w=>w.startTime)),endTime:Math.max(...Object.values(_.answers).filter(w=>w.endTime!==-1&&w.endTime!==void 0).map(w=>w.endTime)),answer:{},helpButtonClickedCount:0,incorrectAnswers:{},windowEvents:Object.values(_.answers).flatMap(w=>w.windowEvents),timedOut:!1}},`cell-${_.participantId}-total-duration`)]},_.participantId));return e.length>0?E.jsxs(E.Fragment,{children:[E.jsx($f,{visible:l,overlayProps:{blur:2}}),E.jsxs(Jt,{justify:"space-between",mb:8,p:8,children:[E.jsx($i,{children:E.jsx(OT,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...new Set(e.map(_=>_.participantId))],searchable:!0,value:null,leftSection:E.jsx(Spt,{size:14}),onChange:_=>_&&g(_)})}),E.jsxs($i,{children:[E.jsx(jHe,{visibleParticipants:e,studyId:i||""}),E.jsxs(_n,{disabled:a.length===0||!s.isAdmin,onClick:()=>d(!0),color:"red",children:["Reject Participants (",a.length,")"]})]})]}),E.jsx(Jt,{direction:"column",style:{width:"100%",overflow:"auto"},children:E.jsxs(wn,{striped:!0,withTableBorder:!0,children:[E.jsx(wn.Thead,{children:E.jsx(wn.Tr,{children:v})}),E.jsx(wn.Tbody,{children:b})]})}),E.jsxs(ho,{opened:f,onClose:()=>d(!1),title:E.jsxs(tt,{children:["Reject Participants (",a.length,")"]}),children:[E.jsx(bg,{label:"Please enter the reason for rejection.",onChange:_=>p(_.target.value)}),E.jsxs(Jt,{mt:"sm",justify:"right",children:[E.jsx(_n,{mr:5,variant:"subtle",color:"dark",onClick:()=>{d(!1),p("")},children:"Cancel"}),E.jsx(_n,{color:"red",onClick:()=>m(),children:"Reject Participants"})]})]})]}):E.jsxs(E.Fragment,{children:[E.jsx(If,{h:"xl"}),E.jsx(Jt,{justify:"center",align:"center",children:E.jsx(tt,{children:"No data available"})})]})}function aTn({studyId:e,refresh:t}){const[n,r]=N.useState(!1),[i,s]=N.useState(!1),[o,a]=N.useState(!1),[u,l]=N.useState(!1),[c,f]=N.useState(""),[d,h]=N.useState([]),[p,m]=N.useState(""),[g,y]=N.useState(""),[v,b]=N.useState(!1),[_,w]=N.useState(!1),{storageEngine:S}=Po(),T=S,A=N.useCallback(async()=>{w(!0);const $=await T.getSnapshots(e);h($),w(!1)},[T,e]);N.useEffect(()=>{A()},[A]);const k=async($,...j)=>{b(!0);const W=await $(...j);W.status==="SUCCESS"?(A(),b(!1),await t(),W.notifications&&W.notifications.forEach(B=>{f3(B)})):(b(!1),f3({title:W.error.title,message:W.error.message,color:"red"}))},I=async()=>{await k(T.createSnapshot.bind(T),e,!1)},R=async()=>{m(""),r(!1),await k(T.createSnapshot.bind(T),e,!0)},F=async()=>{a(!1),await k(T.renameSnapshot.bind(T),c,g)},O=async $=>{await k(T.restoreSnapshot.bind(T),e,$)},L=async()=>{m(""),s(!1),await k(T.removeSnapshotOrLive.bind(T),c,!0)},H=async()=>{m(""),l(!1),await k(T.removeSnapshotOrLive.bind(T),e,!0)},U=()=>Sme({title:"Create a Snapshot",children:E.jsx(tt,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>I()}),G=$=>Sme({title:"Restore Snapshot",children:E.jsx(tt,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>O($)}),Y=$=>{const j=/-snapshot-(.+)$/,W=$.match(j);return W&&W[1]?W[1].replace("T"," "):null},J=async $=>{const j=$.slice($.indexOf("-")+1);return await T.getAllParticipantsDataByStudy(j)};return E.jsxs(E.Fragment,{children:[E.jsx($f,{visible:v}),E.jsxs(Jt,{justify:"space-between",align:"center",children:[E.jsxs(Fe,{style:{width:"70%"},children:[E.jsx(lo,{order:5,children:"Create a Snapshot"}),E.jsxs(tt,{children:["This will create a snapshot of the live"," ",E.jsx(tt,{span:!0,fw:700,children:e})," ","database. It will"," ",E.jsx(tt,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),E.jsx(xs,{label:"Create a snapshot",children:E.jsx(_n,{onClick:U,children:"Snapshot"})})]}),E.jsx(If,{h:"lg"}),E.jsxs(Jt,{justify:"space-between",align:"center",children:[E.jsxs(Fe,{style:{width:"70%"},children:[E.jsx(lo,{order:5,children:"Archive Data"}),E.jsxs(tt,{children:["This will create a snapshot of the live"," ",E.jsx(tt,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),E.jsx(xs,{label:"Snapshot and Delete Data",children:E.jsx(_n,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),E.jsx(If,{h:"lg"}),E.jsxs(Jt,{justify:"space-between",align:"center",children:[E.jsxs(Fe,{style:{width:"70%"},children:[E.jsx(lo,{order:5,children:"Delete Data"}),E.jsxs(tt,{children:["This will delete the live"," ",E.jsx(tt,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),E.jsx(xs,{label:"Delete Data",children:E.jsx(_n,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),E.jsx(If,{h:"xl"}),E.jsxs(Jt,{direction:"column",children:[E.jsx(Jt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:E.jsx(lo,{order:5,children:"Snapshots"})}),E.jsxs(Fe,{style:{position:"relative"},children:[E.jsx($f,{visible:_}),d.length>0?E.jsxs(wn,{children:[E.jsx(wn.Thead,{children:E.jsxs(wn.Tr,{children:[E.jsx(wn.Th,{children:"Snapshot Name"}),E.jsx(wn.Th,{children:"Date Created"}),E.jsx(wn.Th,{children:"Actions"})]})}),E.jsx(wn.Tbody,{children:d.map($=>E.jsxs(wn.Tr,{children:[E.jsx(wn.Td,{children:$.alternateName}),E.jsx(wn.Td,{children:Y($.originalName)}),E.jsx(wn.Td,{children:E.jsxs(Jt,{children:[E.jsx(xs,{label:"Rename",children:E.jsx(_n,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f($.originalName)},children:E.jsx(bpt,{})})}),E.jsx(xs,{label:"Restore Snapshot",children:E.jsx(_n,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{G($.originalName)},children:E.jsx(_pt,{})})}),E.jsx(xs,{label:"Delete Snapshot",children:E.jsx(_n,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f($.originalName)},children:E.jsx(Tke,{})})}),E.jsx(jHe,{visibleParticipants:()=>J($.originalName),studyId:e,gap:"10px",fileName:$.alternateName})]})})]},$.originalName))})]}):E.jsx(tt,{children:"No snapshots."})]})]}),E.jsxs(ho,{opened:n,onClose:()=>{r(!1),m("")},title:E.jsx(tt,{children:"Archive Data"}),children:[E.jsx(tt,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),E.jsx(bg,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:$=>m($.target.value)}),E.jsxs(Jt,{mt:"sm",justify:"right",children:[E.jsx(_n,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),E.jsx(_n,{color:"red",onClick:R,disabled:p!==e,children:"Archive"})]})]}),E.jsxs(ho,{opened:i,onClose:()=>{s(!1),m("")},title:E.jsx(tt,{children:"Delete Snapshot"}),children:[E.jsxs(tt,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",E.jsx(tt,{span:!0,fw:700,children:"irreversible"}),"."]}),E.jsx(bg,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:$=>m($.target.value)}),E.jsxs(Jt,{mt:"sm",justify:"right",children:[E.jsx(_n,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),E.jsx(_n,{color:"red",onClick:L,disabled:p!==e,children:"Delete"})]})]}),E.jsxs(ho,{opened:o,onClose:()=>{a(!1),y("")},title:E.jsx(tt,{children:"Rename Snapshot"}),children:[E.jsx(bg,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:$=>y($.target.value)}),E.jsxs(Jt,{mt:"sm",justify:"right",children:[E.jsx(_n,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),y("")},children:"Cancel"}),E.jsx(_n,{color:"green",onClick:F,disabled:!g||g.length===0,children:"Rename"})]})]}),E.jsxs(ho,{opened:u,onClose:()=>{l(!1),m("")},title:E.jsx(tt,{children:"Delete Live Data"}),children:[E.jsxs(tt,{mb:"sm",children:["This will permanently delete the live"," ",E.jsx(tt,{span:!0,fw:700,children:e})," ","data. This action is"," ",E.jsx(tt,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),E.jsx(bg,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:$=>m($.target.value)}),E.jsxs(Jt,{mt:"sm",justify:"right",children:[E.jsx(_n,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),E.jsx(_n,{color:"red",onClick:H,disabled:p!==e,children:"Delete"})]})]})]})}function uTn({studyId:e}){const{storageEngine:t}=Po(),[n,r]=N.useState(!1),[i,s]=N.useState(!1),[o,a]=N.useState(!1),[u,l]=N.useState(!1);N.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&E.jsxs(Ys,{children:[E.jsx(gS,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),E.jsx(gS,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),E.jsx(gS,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function lTn({studyId:e,refresh:t}){const{storageEngine:n}=Po();return E.jsx(Bd,{children:E.jsxs(fc,{multiple:!0,variant:"contained",children:[E.jsxs(fc.Item,{value:"ReVISit Modes",children:[E.jsx(fc.Control,{children:E.jsx(lo,{order:5,children:"ReVISit Modes"})}),E.jsx(fc.Panel,{children:E.jsx(uTn,{studyId:e})})]},"modes"),E.jsxs(fc.Item,{value:"Data Management",children:[E.jsx(fc.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:E.jsx(lo,{order:5,children:"Data Management"})}),E.jsx(fc.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&E.jsx(aTn,{studyId:e,refresh:t})})]},"dataManagement")]})})}function cTn({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=sZ(!0),[o,a]=Df(),u=N.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=N.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=N.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.filter(([g,y])=>y.endTime!==-1).map(([g,y])=>(y.endTime-y.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return E.jsxs(ET,{p:"lg",withBorder:!0,ref:o,children:[E.jsxs(Jt,{direction:"row",justify:"space-between",onClick:s,children:[E.jsxs(Jt,{align:"center",children:[e.type==="metadata"&&E.jsx(upt,{size:20}),e.type==="numerical"&&E.jsx(ypt,{size:20}),(e.type==="shortText"||e.type==="longText")&&E.jsx(spt,{size:20}),e.type==="likert"&&E.jsx(fpt,{size:20}),e.type==="dropdown"&&E.jsx(Cpt,{size:20}),e.type==="slider"&&E.jsx(Zht,{size:20}),e.type==="radio"&&E.jsx(wpt,{size:20}),e.type==="checkbox"&&E.jsx(Tpt,{size:20}),e.type==="iframe"&&E.jsx(hpt,{size:20}),E.jsx(lo,{order:5,ml:4,children:e.id})]}),E.jsx(apt,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),E.jsxs(_L,{in:i,mah:400,children:[E.jsx(Fe,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:E.jsx(kT,{})}),E.jsxs(Nee,{cols:2,h:360,children:[E.jsx(Yg,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="iframe"?E.jsx(zEe,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):E.jsxs(Jt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&E.jsx(ck,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&E.jsxs(E.Fragment,{children:[E.jsx(tt,{fw:700,children:"Response Values: "}),u.map((f,d)=>E.jsx(Jt,{align:"center",gap:"xs",children:E.jsx(tt,{children:f[e.id]})},d))]})]})}),E.jsx(Yg,{mih:200,children:e.type==="metadata"?E.jsx(zEe,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):E.jsxs(E.Fragment,{children:[E.jsx(tt,{fw:700,children:"Response Specification: "}),E.jsx(ck,{block:!0,children:JSON.stringify(e,null,2)}),E.jsx("br",{}),l&&E.jsxs(E.Fragment,{children:[E.jsx(tt,{fw:700,children:"Correct Answer: "}),E.jsx(ck,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function fTn({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&UVe(t.components[n],t),i=N.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?E.jsx(Jt,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>E.jsx(cTn,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):E.jsx(Jt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:E.jsx(tt,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function dTn({studyConfig:e,visibleParticipants:t}){const n=N.useMemo(()=>{let i=Pg(e.sequence);return i=Ste(i,"root"),i.components.push("end"),i},[e.sequence]),{trialId:r}=zm();return E.jsx(ET,{shadow:"sm",p:"md",withBorder:!0,children:t.length===0?E.jsx(Jt,{justify:"center",align:"center",pt:"lg",pb:"md",children:E.jsx(tt,{children:"No data available."})}):E.jsxs(Jt,{direction:"row",children:[E.jsx(Fe,{w:340,children:E.jsx(N$,{configSequence:n,participantSequence:n,fullSequence:n,participantView:!1,studyConfig:e,analysisNavigation:!0})}),E.jsx(kT,{orientation:"vertical",mx:"md"}),E.jsx(fTn,{participantData:t,studyConfig:e,trialId:r})]})})}function hTn({xScale:e,answer:t,height:n,labelHeight:r=0}){return E.jsx("g",{children:E.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const P6=3,v2=25,O6=25,F6=20,rCe=1;function pTn({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0}){const[a,u]=N.useState(!1),[l,{width:c}]=Df();return E.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{cursor:"pointer"},children:[E.jsx("rect",{opacity:1,fill:a||s?"cornflowerblue":"lightgray",x:e(t.startTime)+rCe,width:e(t.endTime)-e(t.startTime)-rCe*2,y:r-v2,height:v2}),E.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-P6,width:c+P6*2,y:r-v2-O6-o,height:F6,fill:"whitesmoke"}),E.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-P6,x2:c+e(t.startTime)+P6,y1:r-v2-O6+F6-o,y2:r-v2-O6+F6-o}),E.jsx("foreignObject",{x:e(t.startTime),width:c,y:r-v2-O6-o,height:F6,children:E.jsx(ma,{style:{width:"fit-content"},children:E.jsx(tt,{lineClamp:1,ref:l,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n})})})]})}const iCe=25,mTn=8,lW={left:20,top:0,right:20,bottom:0};function gTn({participantData:e,width:t,height:n,selectedTask:r,studyId:i}){const s=Ep(),o=N.useCallback(f=>{const d=f.split("_"),h=+d[d.length-1];s(`/${i}/${Lh(h)}?participantId=${e.participantId}`)},[s,e.participantId,i]),a=N.useMemo(()=>{const f=Object.values(e.answers||{}).filter(p=>p.startTime).map(p=>[p.startTime,p.endTime]).flat(),d=PR(f);return el([lW.left,t-lW.left-lW.right]).domain(d).clamp(!0)},[e,t]),u=N.useMemo(()=>{let f=0;const d=Object.entries(e.answers||{}).filter(h=>!!h[1].startTime).sort((h,p)=>h[1].startTime-p[1].startTime);return d.map((h,p)=>{const[m,g]=h,y=p>0?d[p-f-1]:null;return y&&y[0].length*mTn+a(y[1].startTime)>a(g.startTime)?f+=1:f=0,{line:E.jsx(hTn,{labelHeight:f*iCe,answer:g,height:n,xScale:a},m),label:E.jsx(pTn,{labelHeight:f*iCe,isSelected:r===m,setSelectedTask:o,answer:g,height:n,name:m,xScale:a},m)}})},[n,e.answers,r,o,a]),l=N.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const f=Object.values(e.answers).filter(d=>d.startTime).sort((d,h)=>d.startTime-h.startTime);return new Date(f[f.length-1].endTime-(f[0]?f[0].startTime:0)).getTime()},[e]),c=N.useMemo(()=>Object.entries(e.answers||{}).sort((d,h)=>d[1].startTime-h[1].startTime).map(d=>{const[h,p]=d,m=[];let g=[-1,-1],y="visible";if(p.windowEvents)for(let v=0;v<p.windowEvents.length;v+=1)p.windowEvents[v][1]==="visibility"&&(p.windowEvents[v][2]==="hidden"&&y==="visible"?(g=[p.windowEvents[v][0],-1],y="hidden"):p.windowEvents[v][2]==="visible"&&y==="hidden"&&(g[1]=p.windowEvents[v][0],m.push(g),g=[-1,-1],y="visible"));return m.map((v,b)=>E.jsx(xs,{withinPortal:!0,label:"Browsed away",children:E.jsx("rect",{x:a(v[0]),width:a(v[1])-a(v[0]),y:n-5,height:10})},b))}),[n,e,a]);return E.jsx(ma,{children:E.jsxs(Ys,{gap:25,style:{width:"100%"},children:[E.jsx(kT,{size:"md"}),E.jsxs($i,{justify:"center",children:[E.jsx(xb,{href:"",onClick:()=>s(`/${i}/${Lh(0)}?participantId=${e.participantId}`),children:e.participantId}),e.completed?null:E.jsx(tt,{size:"xl",c:"red",children:"Not completed"}),E.jsx(tt,{size:"xl",children:`${wQ(l)}`})]}),e.completed?E.jsxs("svg",{style:{width:t,height:n,overflow:"visible"},children:[u.map(f=>f.line),u.map(f=>f.label),c]}):null]})})}function yTn({visibleParticipants:e}){const{studyId:t}=zm(),[n,{width:r}]=Df();return E.jsx(Ys,{ref:n,style:{width:"100%"},children:e.map(i=>E.jsx(gTn,{studyId:t||"",height:200,participantData:i,width:r},i.participantId))})}function vTn({globalConfig:e}){const{studyId:t}=zm(),[n,r]=N.useState([]),[i,s]=N.useState(void 0),[o,a]=N.useState(!1),{storageEngine:u}=Po(),l=Ep(),{tab:c}=zm(),{user:f}=YP();N.useEffect(()=>{if(!t)return()=>{};if(t==="__revisit-widget"){const b=async _=>{if(_.data.type==="revisitWidget/CONFIG"&&u){const w=await nce(_.data.payload);s(w)}};return window.addEventListener("message",b),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",b)}}return rce(t,e).then(b=>{b&&s(b)}),()=>{}},[t,e,u]);const d=N.useCallback(async()=>{if(a(!0),t){if(!i||!u)return;await u.initializeStudyDb(t,i);const b=await u.getAllParticipantsData();r(b),a(!1)}},[u,t,i]);N.useEffect(()=>{d()},[e,u,t,d]);const[h,p]=N.useState([]),[m,g,y]=N.useMemo(()=>{const b=n.filter(S=>!S.rejected&&S.completed),_=n.filter(S=>!S.rejected&&!S.completed),w=n.filter(S=>S.rejected);return p([...b,..._,...w]),[b,_,w]},[n]),v=N.useCallback(b=>{const _=[];b.includes("completed")&&_.push(...m),b.includes("inprogress")&&_.push(...g),b.includes("rejected")&&_.push(...y),p(_)},[m,g,y]);return E.jsxs(E.Fragment,{children:[E.jsx(YF,{studyIds:e.configsList}),E.jsx(Yi.Main,{children:E.jsxs(Bd,{fluid:!0,style:{height:"100%",position:"relative"},children:[E.jsx($f,{visible:o}),E.jsxs(Jt,{direction:"row",align:"center",justify:"space-between",children:[E.jsx(lo,{order:5,children:t}),E.jsxs(Jt,{direction:"row",align:"center",children:[E.jsx(tt,{mt:-2,size:"sm",children:"Participants: "}),E.jsx(Ec.Group,{defaultValue:["completed","inprogress","rejected"],onChange:v,mb:"xs",mt:8,ml:"xs",children:E.jsxs($i,{children:[E.jsx(Ec,{value:"completed",label:"Completed"}),E.jsx(Ec,{value:"inprogress",label:"In Progress"}),E.jsx(Ec,{value:"rejected",label:"Rejected"})]})})]})]}),E.jsx(If,{h:"xs"}),E.jsxs(Hr,{variant:"outline",value:c,onChange:b=>l(`/analysis/stats/${t}/${b}`),style:{height:"100%"},children:[E.jsxs(Hr.List,{children:[E.jsx(Hr.Tab,{value:"table",leftSection:E.jsx(Apt,{size:16}),children:"Table View"}),E.jsx(Hr.Tab,{value:"stats",leftSection:E.jsx(opt,{size:16}),children:"Trial Stats"}),E.jsx(Hr.Tab,{value:"replay",leftSection:E.jsx(xpt,{size:16}),children:"Participant Replay"}),E.jsx(Hr.Tab,{value:"manage",leftSection:E.jsx(Ske,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),E.jsx(Hr.Panel,{value:"table",pt:"xs",children:i&&E.jsx(oTn,{visibleParticipants:h,studyConfig:i,refresh:d})}),E.jsx(Hr.Panel,{value:"stats",pt:"xs",children:i&&E.jsx(dTn,{studyConfig:i,visibleParticipants:h})}),E.jsx(Hr.Panel,{value:"replay",pt:"xs",children:E.jsx(yTn,{visibleParticipants:h})}),E.jsx(Hr.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?E.jsx(lTn,{studyId:t,refresh:d}):E.jsx(Bd,{mt:20,children:E.jsx(Ng,{title:"Unauthorized Access",variant:"light",color:"red",icon:E.jsx(Kee,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function sCe({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=YP(),{storageEngine:o}=Po(),[a,u]=N.useState(!1),l=zm();return N.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?E.jsx($f,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?E.jsx(Gee,{to:"/login"}):E.jsx(E.Fragment,{children:e})}async function PGe(e,t){if(e instanceof im){t(!0);const n=new pg,r=G$();try{await nwn(r,n,Iqe)}catch(i){f3({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function bTn(){const{user:e}=YP(),[t,n]=N.useState(!1),{storageEngine:r}=Po();return N.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&f3({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?E.jsx(Gee,{to:"/"}):E.jsx(Bd,{children:E.jsx(IT,{padding:"lg",children:E.jsxs(Jt,{align:"center",direction:"column",justify:"center",children:[E.jsx(_b,{maw:200,mt:50,mb:100,src:`${Ll}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),E.jsxs(E.Fragment,{children:[E.jsx(tt,{mb:20,children:"To access admin settings, please sign in using your Google account."}),E.jsx(_n,{onClick:()=>PGe(r,n),leftSection:E.jsx(Dpt,{}),variant:"filled",children:"Sign In With Google"})]}),E.jsx($f,{visible:t})]})})})}function xTn(){const{user:e,triggerAuth:t}=YP(),{storageEngine:n}=Po(),[r,i]=N.useState(!1),[s,o]=N.useState([]),[a,u]=N.useState(!1),[l,c]=N.useState(!1),[f,d]=N.useState(!1),[h,p]=N.useState(!1),[m,g]=N.useState(!1),[y,v]=N.useState(""),[b,_]=N.useState(null),w=P3e({initialValues:{email:""},validate:{email:M_t("Invalid email")}});N.useEffect(()=>{(async()=>{if(u(!0),n instanceof im){const O=await(n==null?void 0:n.getUserManagementData("authentication"));i((O==null?void 0:O.isEnabled)||!1);const L=await(n==null?void 0:n.getUserManagementData("adminUsers"));L&&L.adminUsersList&&o(L==null?void 0:L.adminUsersList.map(H=>H.email))}else i(!1);u(!1)})()},[n]);const S=async()=>{if(u(!0),n instanceof im){const F=await PGe(n,u);F&&F.email?(_({email:F.email,uid:F.uid}),p(!0)):g(!0)}u(!1)},T=async F=>{u(!0),n instanceof im&&F&&(await n.changeAuth(!0),await n.addAdminUser(F),o([F.email]),i(!0),t()),p(!1),u(!1)},A=async()=>{if(u(!0),n instanceof im){await n.addAdminUser({email:w.values.email,uid:null});const F=await n.getUserManagementData("adminUsers");o((F==null?void 0:F.adminUsersList.map(O=>O.email))||[])}u(!1),c(!1),w.setValues({email:""})},k=F=>{d(!0),v(F)},I=async()=>{if(u(!0),n instanceof im){await n.removeAdminUser(y);const F=await n.getUserManagementData("adminUsers");o((F==null?void 0:F.adminUsersList.map(O=>O.email))||[])}d(!1),u(!1)},R=N.useMemo(()=>n instanceof im,[n]);return E.jsxs(E.Fragment,{children:[E.jsx(Bd,{children:E.jsxs(IT,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[E.jsx(lo,{mb:20,order:3,children:"Authentication"}),r?E.jsx(Jt,{children:E.jsx(tt,{children:"Authentication is enabled."})}):E.jsxs(Jt,{justify:"space-between",children:[E.jsx(Fe,{children:E.jsx(tt,{children:"Authentication is currently disabled."})}),E.jsx(xs,{label:"You can only enable auth when using Firebase",disabled:R,children:E.jsx(_n,{onClick:F=>R?S():F.preventDefault(),color:"green","data-disabled":R?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?E.jsxs(Jt,{mt:40,direction:"column",children:[E.jsxs(Jt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[E.jsx(lo,{order:6,children:"Enabled Users"}),E.jsx(Xee,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(F=>{var O;return E.jsxs(Jt,{justify:"space-between",mb:10,children:[E.jsx(tt,{children:F}),F===((O=e.user)==null?void 0:O.email)?E.jsx(tt,{color:"blue",size:"xs",children:"You"}):E.jsx(L_,{variant:"subtle",onClick:()=>k(F),children:E.jsx(Tke,{color:"red"})})]},F)}):null]}):null]})}),E.jsx(ho,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:E.jsxs(Fe,{component:"form",onSubmit:w.onSubmit(()=>A()),children:[E.jsx(bg,{leftSection:E.jsx(npt,{}),placeholder:"User Gmail Account",...w.getInputProps("email")}),E.jsxs(Jt,{mt:30,justify:"right",children:[E.jsx(_n,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),E.jsx(_n,{type:"submit",children:"Save"})]})]})}),E.jsxs(ho,{opened:f,size:"large",onClose:()=>d(!1),title:E.jsxs(tt,{fw:700,children:["Remove",y,"?"]}),children:[E.jsxs(tt,{mt:40,children:["Are you sure you want to remove",E.jsx("b",{children:y})," ","as an administrator?"]}),E.jsxs(Jt,{mt:40,justify:"right",children:[E.jsx(_n,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),E.jsx(_n,{onClick:()=>I(),children:"Yes, I'm sure."})]})]}),E.jsxs(ho,{opened:h,size:"md",onClose:()=>p(!1),title:E.jsx(tt,{fw:700,children:"Enable Authentication?"}),children:[E.jsxs(tt,{mt:40,children:["User"," ",E.jsx("b",{children:b==null?void 0:b.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),E.jsxs(Jt,{mt:40,justify:"right",children:[E.jsx(_n,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),E.jsx(_n,{onClick:()=>T(b),children:"Yes, I'm sure."})]})]}),E.jsxs(ho,{opened:m,size:"md",onClose:()=>g(!1),title:E.jsx(tt,{fw:700,children:"An Error Occurred."}),children:[E.jsxs(tt,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",E.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),E.jsx(Jt,{mt:40,justify:"right",children:E.jsx(_n,{mr:5,onClick:()=>g(!1),children:"Okay"})})]}),E.jsx($f,{visible:a})]})}class wTn extends RGe{constructor(){super("localStorage");ml(this,"studyDatabase");ml(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await P2.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await tL(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(void 0)}async saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await tL(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await P2.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=eL();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=P2.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=n||await this.studyDatabase.getItem("currentParticipant");return r?await this.studyDatabase.getItem(r):null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this.studyDatabase.setItem(this.currentParticipantId,r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this.studyDatabase.setItem(this.currentParticipantId,r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=eL();await this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed||(n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n)),!0}async validateUser(n){return!0}async rejectParticipant(n,r,i){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const s=await this.studyDatabase.getItem(r);if(!s)throw new Error("Participant not found");if(s.rejected)return;s.rejected={reason:i,timestamp:new Date().getTime()};const o=await this.studyDatabase.getItem("sequenceArray");o&&(o.unshift(s.sequence),this.setSequenceArray(o)),await this.studyDatabase.setItem(r,s)}async rejectCurrentParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){this.studyDatabase=await P2.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await P2.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}async getParticipantsStatusCounts(n){const r=await this.getAllParticipantsDataByStudy(n),i=r.filter(l=>l.completed&&!l.rejected).length,s=r.filter(l=>l.rejected).length,o=r.filter(l=>!l.completed&&!l.rejected).length,a=Math.min(...r.map(l=>Math.min(...Object.values(l.answers).map(c=>c.startTime)))),u=Math.max(...r.map(l=>Math.max(...Object.values(l.answers).map(c=>c.endTime))));return{completed:i,rejected:s,inProgress:o,minTime:a===1/0?null:a,maxTime:u===-1/0?null:u}}_verifyStudyDatabase(n){return n!==void 0}}async function _Tn(){let e;{const t=new wTn;await t.connect(),e=t}return e}function oI({title:e}){const t=Eb();return N.useEffect(()=>{document.title=e},[t,e]),null}async function ETn(){const t=await(await fetch(`${Ll}global.json`)).text();return avn(t)}function STn(){const[e,t]=N.useState(null),[n,r]=N.useState({});N.useEffect(()=>{async function a(){e&&r(await cvn(e))}a()},[e]),N.useEffect(()=>{e||ETn().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Po();N.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await _Tn();s(u)}a()},[s,i]);const o=async a=>i instanceof im?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?E.jsx(qht,{basename:Ll,children:E.jsx(rTn,{children:E.jsx(Qht,{children:E.jsxs(Uht,{children:[E.jsx(Nx,{path:"/",element:E.jsxs(E.Fragment,{children:[E.jsx(oI,{title:"ReVISit | Home"}),E.jsxs(Yi,{padding:"md",header:{height:70},children:[E.jsx(YF,{studyIds:e.configsList}),E.jsx(mxt,{globalConfig:e,studyConfigs:n})]})]})}),E.jsx(Nx,{path:"/:studyId/*",element:E.jsxs(E.Fragment,{children:[E.jsx(oI,{title:"ReVISit | Study"}),E.jsx(fvn,{globalConfig:e})]})}),E.jsx(Nx,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:E.jsxs(E.Fragment,{children:[E.jsx(oI,{title:"ReVISit | Analysis"}),E.jsx(sCe,{paramToCheck:"studyId",paramCallback:o,children:E.jsx(Yi,{padding:"md",header:{height:70},children:E.jsx(vTn,{globalConfig:e})})})]})}),E.jsx(Nx,{path:"/analysis/stats/:studyId",element:E.jsx($Ve,{to:"./table",replace:!0})}),E.jsx(Nx,{path:"/settings",element:E.jsxs(sCe,{children:[E.jsx(oI,{title:"ReVISit | Settings"}),E.jsxs(Yi,{padding:"md",header:{height:70},children:[E.jsx(YF,{studyIds:e.configsList}),E.jsx(Yi.Main,{children:E.jsx(xTn,{})})]})]})}),E.jsx(Nx,{path:"/login",element:E.jsxs(E.Fragment,{children:[E.jsx(oI,{title:"ReVISit | Login"}),E.jsxs(Yi,{padding:"md",header:{height:70},children:[E.jsx(YF,{studyIds:e.configsList}),E.jsx(Yi.Main,{children:E.jsx(bTn,{})})]})]})})]})})})}):null}cW.createRoot(document.getElementById("root")).render(E.jsx(yi.StrictMode,{children:E.jsx(Qdt,{children:E.jsxs(UAe,{children:[E.jsx(Cy,{}),E.jsx(STn,{})]})})}))});export default CTn();

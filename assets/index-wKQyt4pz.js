var tZe=Object.defineProperty;var nZe=(e,t,n)=>t in e?tZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var rZe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var fl=(e,t,n)=>nZe(e,typeof t!="symbol"?t+"":t,n);var HCn=rZe((rAn,$ce)=>{function iZe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Hs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function sZe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var ZSe={exports:{}},G5={},eTe={exports:{}},Rr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GN=Symbol.for("react.element"),oZe=Symbol.for("react.portal"),aZe=Symbol.for("react.fragment"),uZe=Symbol.for("react.strict_mode"),lZe=Symbol.for("react.profiler"),cZe=Symbol.for("react.provider"),fZe=Symbol.for("react.context"),dZe=Symbol.for("react.forward_ref"),hZe=Symbol.for("react.suspense"),pZe=Symbol.for("react.memo"),mZe=Symbol.for("react.lazy"),Lde=Symbol.iterator;function gZe(e){return e===null||typeof e!="object"?null:(e=Lde&&e[Lde]||e["@@iterator"],typeof e=="function"?e:null)}var tTe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nTe=Object.assign,rTe={};function w2(e,t,n){this.props=e,this.context=t,this.refs=rTe,this.updater=n||tTe}w2.prototype.isReactComponent={};w2.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};w2.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function iTe(){}iTe.prototype=w2.prototype;function BQ(e,t,n){this.props=e,this.context=t,this.refs=rTe,this.updater=n||tTe}var jQ=BQ.prototype=new iTe;jQ.constructor=BQ;nTe(jQ,w2.prototype);jQ.isPureReactComponent=!0;var Bde=Array.isArray,sTe=Object.prototype.hasOwnProperty,UQ={current:null},oTe={key:!0,ref:!0,__self:!0,__source:!0};function aTe(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)sTe.call(t,r)&&!oTe.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:GN,type:e,key:s,ref:o,props:i,_owner:UQ.current}}function yZe(e,t){return{$$typeof:GN,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function zQ(e){return typeof e=="object"&&e!==null&&e.$$typeof===GN}function vZe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var jde=/\/+/g;function HU(e,t){return typeof e=="object"&&e!==null&&e.key!=null?vZe(""+e.key):t.toString(36)}function C$(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case GN:case oZe:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+HU(o,0):r,Bde(i)?(n="",e!=null&&(n=e.replace(jde,"$&/")+"/"),C$(i,t,n,"",function(l){return l})):i!=null&&(zQ(i)&&(i=yZe(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(jde,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Bde(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+HU(s,a);o+=C$(s,t,n,u,i)}else if(u=gZe(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+HU(s,a++),o+=C$(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function N3(e,t,n){if(e==null)return e;var r=[],i=0;return C$(e,r,"","",function(s){return t.call(n,s,i++)}),r}function bZe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var zl={current:null},A$={transition:null},wZe={ReactCurrentDispatcher:zl,ReactCurrentBatchConfig:A$,ReactCurrentOwner:UQ};function uTe(){throw Error("act(...) is not supported in production builds of React.")}Rr.Children={map:N3,forEach:function(e,t,n){N3(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return N3(e,function(){t++}),t},toArray:function(e){return N3(e,function(t){return t})||[]},only:function(e){if(!zQ(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Rr.Component=w2;Rr.Fragment=aZe;Rr.Profiler=lZe;Rr.PureComponent=BQ;Rr.StrictMode=uZe;Rr.Suspense=hZe;Rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wZe;Rr.act=uTe;Rr.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=nTe({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=UQ.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)sTe.call(t,u)&&!oTe.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:GN,type:e.type,key:i,ref:s,props:r,_owner:o}};Rr.createContext=function(e){return e={$$typeof:fZe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:cZe,_context:e},e.Consumer=e};Rr.createElement=aTe;Rr.createFactory=function(e){var t=aTe.bind(null,e);return t.type=e,t};Rr.createRef=function(){return{current:null}};Rr.forwardRef=function(e){return{$$typeof:dZe,render:e}};Rr.isValidElement=zQ;Rr.lazy=function(e){return{$$typeof:mZe,_payload:{_status:-1,_result:e},_init:bZe}};Rr.memo=function(e,t){return{$$typeof:pZe,type:e,compare:t===void 0?null:t}};Rr.startTransition=function(e){var t=A$.transition;A$.transition={};try{e()}finally{A$.transition=t}};Rr.unstable_act=uTe;Rr.useCallback=function(e,t){return zl.current.useCallback(e,t)};Rr.useContext=function(e){return zl.current.useContext(e)};Rr.useDebugValue=function(){};Rr.useDeferredValue=function(e){return zl.current.useDeferredValue(e)};Rr.useEffect=function(e,t){return zl.current.useEffect(e,t)};Rr.useId=function(){return zl.current.useId()};Rr.useImperativeHandle=function(e,t,n){return zl.current.useImperativeHandle(e,t,n)};Rr.useInsertionEffect=function(e,t){return zl.current.useInsertionEffect(e,t)};Rr.useLayoutEffect=function(e,t){return zl.current.useLayoutEffect(e,t)};Rr.useMemo=function(e,t){return zl.current.useMemo(e,t)};Rr.useReducer=function(e,t,n){return zl.current.useReducer(e,t,n)};Rr.useRef=function(e){return zl.current.useRef(e)};Rr.useState=function(e){return zl.current.useState(e)};Rr.useSyncExternalStore=function(e,t,n){return zl.current.useSyncExternalStore(e,t,n)};Rr.useTransition=function(){return zl.current.useTransition()};Rr.version="18.3.1";eTe.exports=Rr;var P=eTe.exports;const xi=zf(P),WF=iZe({__proto__:null,default:xi},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _Ze=P,EZe=Symbol.for("react.element"),xZe=Symbol.for("react.fragment"),SZe=Object.prototype.hasOwnProperty,TZe=_Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CZe={key:!0,ref:!0,__self:!0,__source:!0};function lTe(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)SZe.call(t,r)&&!CZe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:EZe,type:e,key:s,ref:o,props:i,_owner:TZe.current}}G5.Fragment=xZe;G5.jsx=lTe;G5.jsxs=lTe;ZSe.exports=G5;var _=ZSe.exports,Vq={},cTe={exports:{}},Vf={},fTe={exports:{}},dTe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(V,G){var $=V.length;V.push(G);e:for(;0<$;){var W=$-1>>>1,K=V[W];if(0<i(K,G))V[W]=G,V[$]=K,$=W;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var G=V[0],$=V.pop();if($!==G){V[0]=$;e:for(var W=0,K=V.length,q=K>>>1;W<q;){var Y=2*(W+1)-1,Z=V[Y],ae=Y+1,be=V[ae];if(0>i(Z,$))ae<K&&0>i(be,Z)?(V[W]=be,V[ae]=$,W=ae):(V[W]=Z,V[Y]=$,W=Y);else if(ae<K&&0>i(be,$))V[W]=be,V[ae]=$,W=ae;else break e}}return G}function i(V,G){var $=V.sortIndex-G.sortIndex;return $!==0?$:V.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(V){for(var G=n(l);G!==null;){if(G.callback===null)r(l);else if(G.startTime<=V)r(l),G.sortIndex=G.expirationTime,t(u,G);else break;G=n(l)}}function S(V){if(m=!1,w(V),!p)if(n(u)!==null)p=!0,B(E);else{var G=n(l);G!==null&&z(S,G.startTime-V)}}function E(V,G){p=!1,m&&(m=!1,y(A),A=-1),h=!0;var $=d;try{for(w(G),f=n(u);f!==null&&(!(f.expirationTime>G)||V&&!N());){var W=f.callback;if(typeof W=="function"){f.callback=null,d=f.priorityLevel;var K=W(f.expirationTime<=G);G=e.unstable_now(),typeof K=="function"?f.callback=K:f===n(u)&&r(u),w(G)}else r(u);f=n(u)}if(f!==null)var q=!0;else{var Y=n(l);Y!==null&&z(S,Y.startTime-G),q=!1}return q}finally{f=null,d=$,h=!1}}var T=!1,C=null,A=-1,I=5,k=-1;function N(){return!(e.unstable_now()-k<I)}function F(){if(C!==null){var V=e.unstable_now();k=V;var G=!0;try{G=C(!0,V)}finally{G?M():(T=!1,C=null)}}else T=!1}var M;if(typeof b=="function")M=function(){b(F)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,j=L.port2;L.port1.onmessage=F,M=function(){j.postMessage(null)}}else M=function(){g(F,0)};function B(V){C=V,T||(T=!0,M())}function z(V,G){A=g(function(){V(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,B(E))},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(V){switch(d){case 1:case 2:case 3:var G=3;break;default:G=d}var $=d;d=G;try{return V()}finally{d=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(V,G){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var $=d;d=V;try{return G()}finally{d=$}},e.unstable_scheduleCallback=function(V,G,$){var W=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?W+$:W):$=W,V){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=$+K,V={id:c++,callback:G,priorityLevel:V,startTime:$,expirationTime:K,sortIndex:-1},$>W?(V.sortIndex=$,t(l,V),n(u)===null&&V===n(l)&&(m?(y(A),A=-1):m=!0,z(S,$-W))):(V.sortIndex=K,t(u,V),p||h||(p=!0,B(E))),V},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(V){var G=d;return function(){var $=d;d=G;try{return V.apply(this,arguments)}finally{d=$}}}})(dTe);fTe.exports=dTe;var AZe=fTe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DZe=P,Af=AZe;function kt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hTe=new Set,eR={};function NE(e,t){KT(e,t),KT(e+"Capture",t)}function KT(e,t){for(eR[e]=t,e=0;e<t.length;e++)hTe.add(t[e])}var z0=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hq=Object.prototype.hasOwnProperty,IZe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ude={},zde={};function kZe(e){return Hq.call(zde,e)?!0:Hq.call(Ude,e)?!1:IZe.test(e)?zde[e]=!0:(Ude[e]=!0,!1)}function RZe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function NZe(e,t,n,r){if(t===null||typeof t>"u"||RZe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Vl(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var du={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){du[e]=new Vl(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];du[t]=new Vl(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){du[e]=new Vl(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){du[e]=new Vl(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){du[e]=new Vl(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){du[e]=new Vl(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){du[e]=new Vl(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){du[e]=new Vl(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){du[e]=new Vl(e,5,!1,e.toLowerCase(),null,!1,!1)});var VQ=/[\-:]([a-z])/g;function HQ(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(VQ,HQ);du[t]=new Vl(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(VQ,HQ);du[t]=new Vl(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(VQ,HQ);du[t]=new Vl(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){du[e]=new Vl(e,1,!1,e.toLowerCase(),null,!1,!1)});du.xlinkHref=new Vl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){du[e]=new Vl(e,1,!1,e.toLowerCase(),null,!0,!0)});function qQ(e,t,n,r){var i=du.hasOwnProperty(t)?du[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(NZe(t,n,i,r)&&(n=null),r||i===null?kZe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var vy=DZe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P3=Symbol.for("react.element"),PS=Symbol.for("react.portal"),OS=Symbol.for("react.fragment"),WQ=Symbol.for("react.strict_mode"),qq=Symbol.for("react.profiler"),pTe=Symbol.for("react.provider"),mTe=Symbol.for("react.context"),GQ=Symbol.for("react.forward_ref"),Wq=Symbol.for("react.suspense"),Gq=Symbol.for("react.suspense_list"),YQ=Symbol.for("react.memo"),yv=Symbol.for("react.lazy"),gTe=Symbol.for("react.offscreen"),Vde=Symbol.iterator;function sD(e){return e===null||typeof e!="object"?null:(e=Vde&&e[Vde]||e["@@iterator"],typeof e=="function"?e:null)}var Gs=Object.assign,qU;function oI(e){if(qU===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);qU=t&&t[1]||""}return`
`+qU+e}var WU=!1;function GU(e,t){if(!e||WU)return"";WU=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{WU=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?oI(e):""}function PZe(e){switch(e.tag){case 5:return oI(e.type);case 16:return oI("Lazy");case 13:return oI("Suspense");case 19:return oI("SuspenseList");case 0:case 2:case 15:return e=GU(e.type,!1),e;case 11:return e=GU(e.type.render,!1),e;case 1:return e=GU(e.type,!0),e;default:return""}}function Yq(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case OS:return"Fragment";case PS:return"Portal";case qq:return"Profiler";case WQ:return"StrictMode";case Wq:return"Suspense";case Gq:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case mTe:return(e.displayName||"Context")+".Consumer";case pTe:return(e._context.displayName||"Context")+".Provider";case GQ:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case YQ:return t=e.displayName||null,t!==null?t:Yq(e.type)||"Memo";case yv:t=e._payload,e=e._init;try{return Yq(e(t))}catch{}}return null}function OZe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yq(t);case 8:return t===WQ?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function A1(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function yTe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function MZe(e){var t=yTe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function O3(e){e._valueTracker||(e._valueTracker=MZe(e))}function vTe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=yTe(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function GF(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Kq(e,t){var n=t.checked;return Gs({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Hde(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=A1(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function bTe(e,t){t=t.checked,t!=null&&qQ(e,"checked",t,!1)}function Xq(e,t){bTe(e,t);var n=A1(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Qq(e,t.type,n):t.hasOwnProperty("defaultValue")&&Qq(e,t.type,A1(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qde(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Qq(e,t,n){(t!=="number"||GF(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var aI=Array.isArray;function oT(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+A1(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Jq(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(kt(91));return Gs({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Wde(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(kt(92));if(aI(n)){if(1<n.length)throw Error(kt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:A1(n)}}function wTe(e,t){var n=A1(t.value),r=A1(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Gde(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function _Te(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zq(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?_Te(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var M3,ETe=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(M3=M3||document.createElement("div"),M3.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=M3.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function tR(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ZI={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$Ze=["Webkit","ms","Moz","O"];Object.keys(ZI).forEach(function(e){$Ze.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ZI[t]=ZI[e]})});function xTe(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ZI.hasOwnProperty(e)&&ZI[e]?(""+t).trim():t+"px"}function STe(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=xTe(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var FZe=Gs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eW(e,t){if(t){if(FZe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(kt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(kt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(kt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(kt(62))}}function tW(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nW=null;function KQ(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var rW=null,aT=null,uT=null;function Yde(e){if(e=XN(e)){if(typeof rW!="function")throw Error(kt(280));var t=e.stateNode;t&&(t=J5(t),rW(e.stateNode,e.type,t))}}function TTe(e){aT?uT?uT.push(e):uT=[e]:aT=e}function CTe(){if(aT){var e=aT,t=uT;if(uT=aT=null,Yde(e),t)for(e=0;e<t.length;e++)Yde(t[e])}}function ATe(e,t){return e(t)}function DTe(){}var YU=!1;function ITe(e,t,n){if(YU)return e(t,n);YU=!0;try{return ATe(e,t,n)}finally{YU=!1,(aT!==null||uT!==null)&&(DTe(),CTe())}}function nR(e,t){var n=e.stateNode;if(n===null)return null;var r=J5(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(kt(231,t,typeof n));return n}var iW=!1;if(z0)try{var oD={};Object.defineProperty(oD,"passive",{get:function(){iW=!0}}),window.addEventListener("test",oD,oD),window.removeEventListener("test",oD,oD)}catch{iW=!1}function LZe(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var ek=!1,YF=null,KF=!1,sW=null,BZe={onError:function(e){ek=!0,YF=e}};function jZe(e,t,n,r,i,s,o,a,u){ek=!1,YF=null,LZe.apply(BZe,arguments)}function UZe(e,t,n,r,i,s,o,a,u){if(jZe.apply(this,arguments),ek){if(ek){var l=YF;ek=!1,YF=null}else throw Error(kt(198));KF||(KF=!0,sW=l)}}function PE(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function kTe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Kde(e){if(PE(e)!==e)throw Error(kt(188))}function zZe(e){var t=e.alternate;if(!t){if(t=PE(e),t===null)throw Error(kt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Kde(i),e;if(s===r)return Kde(i),t;s=s.sibling}throw Error(kt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(kt(189))}}if(n.alternate!==r)throw Error(kt(190))}if(n.tag!==3)throw Error(kt(188));return n.stateNode.current===n?e:t}function RTe(e){return e=zZe(e),e!==null?NTe(e):null}function NTe(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=NTe(e);if(t!==null)return t;e=e.sibling}return null}var PTe=Af.unstable_scheduleCallback,Xde=Af.unstable_cancelCallback,VZe=Af.unstable_shouldYield,HZe=Af.unstable_requestPaint,Eo=Af.unstable_now,qZe=Af.unstable_getCurrentPriorityLevel,XQ=Af.unstable_ImmediatePriority,OTe=Af.unstable_UserBlockingPriority,XF=Af.unstable_NormalPriority,WZe=Af.unstable_LowPriority,MTe=Af.unstable_IdlePriority,Y5=null,xm=null;function GZe(e){if(xm&&typeof xm.onCommitFiberRoot=="function")try{xm.onCommitFiberRoot(Y5,e,void 0,(e.current.flags&128)===128)}catch{}}var Qh=Math.clz32?Math.clz32:XZe,YZe=Math.log,KZe=Math.LN2;function XZe(e){return e>>>=0,e===0?32:31-(YZe(e)/KZe|0)|0}var $3=64,F3=4194304;function uI(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function QF(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=uI(a):(s&=o,s!==0&&(r=uI(s)))}else o=n&~i,o!==0?r=uI(o):s!==0&&(r=uI(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Qh(t),i=1<<n,r|=e[n],t&=~i;return r}function QZe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JZe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Qh(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=QZe(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function oW(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function $Te(){var e=$3;return $3<<=1,!($3&4194240)&&($3=64),e}function KU(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function YN(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Qh(t),e[t]=n}function ZZe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Qh(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function QQ(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Qh(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Li=0;function FTe(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var LTe,JQ,BTe,jTe,UTe,aW=!1,L3=[],e1=null,t1=null,n1=null,rR=new Map,iR=new Map,Dv=[],eet="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qde(e,t){switch(e){case"focusin":case"focusout":e1=null;break;case"dragenter":case"dragleave":t1=null;break;case"mouseover":case"mouseout":n1=null;break;case"pointerover":case"pointerout":rR.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":iR.delete(t.pointerId)}}function aD(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=XN(t),t!==null&&JQ(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function tet(e,t,n,r,i){switch(t){case"focusin":return e1=aD(e1,e,t,n,r,i),!0;case"dragenter":return t1=aD(t1,e,t,n,r,i),!0;case"mouseover":return n1=aD(n1,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return rR.set(s,aD(rR.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,iR.set(s,aD(iR.get(s)||null,e,t,n,r,i)),!0}return!1}function zTe(e){var t=s_(e.target);if(t!==null){var n=PE(t);if(n!==null){if(t=n.tag,t===13){if(t=kTe(n),t!==null){e.blockedOn=t,UTe(e.priority,function(){BTe(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function D$(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=uW(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);nW=r,n.target.dispatchEvent(r),nW=null}else return t=XN(n),t!==null&&JQ(t),e.blockedOn=n,!1;t.shift()}return!0}function Jde(e,t,n){D$(e)&&n.delete(t)}function net(){aW=!1,e1!==null&&D$(e1)&&(e1=null),t1!==null&&D$(t1)&&(t1=null),n1!==null&&D$(n1)&&(n1=null),rR.forEach(Jde),iR.forEach(Jde)}function uD(e,t){e.blockedOn===t&&(e.blockedOn=null,aW||(aW=!0,Af.unstable_scheduleCallback(Af.unstable_NormalPriority,net)))}function sR(e){function t(i){return uD(i,e)}if(0<L3.length){uD(L3[0],e);for(var n=1;n<L3.length;n++){var r=L3[n];r.blockedOn===e&&(r.blockedOn=null)}}for(e1!==null&&uD(e1,e),t1!==null&&uD(t1,e),n1!==null&&uD(n1,e),rR.forEach(t),iR.forEach(t),n=0;n<Dv.length;n++)r=Dv[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Dv.length&&(n=Dv[0],n.blockedOn===null);)zTe(n),n.blockedOn===null&&Dv.shift()}var lT=vy.ReactCurrentBatchConfig,JF=!0;function ret(e,t,n,r){var i=Li,s=lT.transition;lT.transition=null;try{Li=1,ZQ(e,t,n,r)}finally{Li=i,lT.transition=s}}function iet(e,t,n,r){var i=Li,s=lT.transition;lT.transition=null;try{Li=4,ZQ(e,t,n,r)}finally{Li=i,lT.transition=s}}function ZQ(e,t,n,r){if(JF){var i=uW(e,t,n,r);if(i===null)sz(e,t,r,ZF,n),Qde(e,r);else if(tet(i,e,t,n,r))r.stopPropagation();else if(Qde(e,r),t&4&&-1<eet.indexOf(e)){for(;i!==null;){var s=XN(i);if(s!==null&&LTe(s),s=uW(e,t,n,r),s===null&&sz(e,t,r,ZF,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else sz(e,t,r,null,n)}}var ZF=null;function uW(e,t,n,r){if(ZF=null,e=KQ(r),e=s_(e),e!==null)if(t=PE(e),t===null)e=null;else if(n=t.tag,n===13){if(e=kTe(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ZF=e,null}function VTe(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qZe()){case XQ:return 1;case OTe:return 4;case XF:case WZe:return 16;case MTe:return 536870912;default:return 16}default:return 16}}var Lv=null,eJ=null,I$=null;function HTe(){if(I$)return I$;var e,t=eJ,n=t.length,r,i="value"in Lv?Lv.value:Lv.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return I$=i.slice(e,1<r?1-r:void 0)}function k$(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function B3(){return!0}function Zde(){return!1}function Hf(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?B3:Zde,this.isPropagationStopped=Zde,this}return Gs(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=B3)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=B3)},persist:function(){},isPersistent:B3}),t}var _2={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tJ=Hf(_2),KN=Gs({},_2,{view:0,detail:0}),set=Hf(KN),XU,QU,lD,K5=Gs({},KN,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nJ,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lD&&(lD&&e.type==="mousemove"?(XU=e.screenX-lD.screenX,QU=e.screenY-lD.screenY):QU=XU=0,lD=e),XU)},movementY:function(e){return"movementY"in e?e.movementY:QU}}),ehe=Hf(K5),oet=Gs({},K5,{dataTransfer:0}),aet=Hf(oet),uet=Gs({},KN,{relatedTarget:0}),JU=Hf(uet),cet=Gs({},_2,{animationName:0,elapsedTime:0,pseudoElement:0}),fet=Hf(cet),det=Gs({},_2,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),het=Hf(det),pet=Gs({},_2,{data:0}),the=Hf(pet),met={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},get={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yet={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vet(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=yet[e])?!!t[e]:!1}function nJ(){return vet}var bet=Gs({},KN,{key:function(e){if(e.key){var t=met[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=k$(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?get[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nJ,charCode:function(e){return e.type==="keypress"?k$(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?k$(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wet=Hf(bet),_et=Gs({},K5,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nhe=Hf(_et),Eet=Gs({},KN,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nJ}),xet=Hf(Eet),Tet=Gs({},_2,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cet=Hf(Tet),Aet=Gs({},K5,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Det=Hf(Aet),Iet=[9,13,27,32],rJ=z0&&"CompositionEvent"in window,tk=null;z0&&"documentMode"in document&&(tk=document.documentMode);var ket=z0&&"TextEvent"in window&&!tk,qTe=z0&&(!rJ||tk&&8<tk&&11>=tk),rhe=" ",ihe=!1;function WTe(e,t){switch(e){case"keyup":return Iet.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function GTe(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var MS=!1;function Ret(e,t){switch(e){case"compositionend":return GTe(t);case"keypress":return t.which!==32?null:(ihe=!0,rhe);case"textInput":return e=t.data,e===rhe&&ihe?null:e;default:return null}}function Net(e,t){if(MS)return e==="compositionend"||!rJ&&WTe(e,t)?(e=HTe(),I$=eJ=Lv=null,MS=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qTe&&t.locale!=="ko"?null:t.data;default:return null}}var Pet={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function she(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Pet[e.type]:t==="textarea"}function YTe(e,t,n,r){TTe(r),t=eL(t,"onChange"),0<t.length&&(n=new tJ("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var nk=null,oR=null;function Oet(e){sCe(e,0)}function X5(e){var t=LS(e);if(vTe(t))return e}function Met(e,t){if(e==="change")return t}var KTe=!1;if(z0){var ZU;if(z0){var ez="oninput"in document;if(!ez){var ohe=document.createElement("div");ohe.setAttribute("oninput","return;"),ez=typeof ohe.oninput=="function"}ZU=ez}else ZU=!1;KTe=ZU&&(!document.documentMode||9<document.documentMode)}function ahe(){nk&&(nk.detachEvent("onpropertychange",XTe),oR=nk=null)}function XTe(e){if(e.propertyName==="value"&&X5(oR)){var t=[];YTe(t,oR,e,KQ(e)),ITe(Oet,t)}}function $et(e,t,n){e==="focusin"?(ahe(),nk=t,oR=n,nk.attachEvent("onpropertychange",XTe)):e==="focusout"&&ahe()}function Fet(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return X5(oR)}function Let(e,t){if(e==="click")return X5(t)}function Bet(e,t){if(e==="input"||e==="change")return X5(t)}function jet(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var up=typeof Object.is=="function"?Object.is:jet;function aR(e,t){if(up(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Hq.call(t,i)||!up(e[i],t[i]))return!1}return!0}function uhe(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lhe(e,t){var n=uhe(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=uhe(n)}}function QTe(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?QTe(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function JTe(){for(var e=window,t=GF();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=GF(e.document)}return t}function iJ(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Uet(e){var t=JTe(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&QTe(n.ownerDocument.documentElement,n)){if(r!==null&&iJ(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=lhe(n,s);var o=lhe(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var zet=z0&&"documentMode"in document&&11>=document.documentMode,$S=null,lW=null,rk=null,cW=!1;function che(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cW||$S==null||$S!==GF(r)||(r=$S,"selectionStart"in r&&iJ(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),rk&&aR(rk,r)||(rk=r,r=eL(lW,"onSelect"),0<r.length&&(t=new tJ("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=$S)))}function j3(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var FS={animationend:j3("Animation","AnimationEnd"),animationiteration:j3("Animation","AnimationIteration"),animationstart:j3("Animation","AnimationStart"),transitionend:j3("Transition","TransitionEnd")},tz={},ZTe={};z0&&(ZTe=document.createElement("div").style,"AnimationEvent"in window||(delete FS.animationend.animation,delete FS.animationiteration.animation,delete FS.animationstart.animation),"TransitionEvent"in window||delete FS.transitionend.transition);function Q5(e){if(tz[e])return tz[e];if(!FS[e])return e;var t=FS[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ZTe)return tz[e]=t[n];return e}var eCe=Q5("animationend"),tCe=Q5("animationiteration"),nCe=Q5("animationstart"),rCe=Q5("transitionend"),iCe=new Map,fhe="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pb(e,t){iCe.set(e,t),NE(t,[e])}for(var nz=0;nz<fhe.length;nz++){var rz=fhe[nz],Vet=rz.toLowerCase(),Het=rz[0].toUpperCase()+rz.slice(1);pb(Vet,"on"+Het)}pb(eCe,"onAnimationEnd");pb(tCe,"onAnimationIteration");pb(nCe,"onAnimationStart");pb("dblclick","onDoubleClick");pb("focusin","onFocus");pb("focusout","onBlur");pb(rCe,"onTransitionEnd");KT("onMouseEnter",["mouseout","mouseover"]);KT("onMouseLeave",["mouseout","mouseover"]);KT("onPointerEnter",["pointerout","pointerover"]);KT("onPointerLeave",["pointerout","pointerover"]);NE("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));NE("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));NE("onBeforeInput",["compositionend","keypress","textInput","paste"]);NE("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));NE("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));NE("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lI="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qet=new Set("cancel close invalid load scroll toggle".split(" ").concat(lI));function dhe(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,UZe(r,t,void 0,e),e.currentTarget=null}function sCe(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;dhe(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;dhe(i,a,l),s=u}}}if(KF)throw e=sW,KF=!1,sW=null,e}function fs(e,t){var n=t[mW];n===void 0&&(n=t[mW]=new Set);var r=e+"__bubble";n.has(r)||(oCe(t,e,2,!1),n.add(r))}function iz(e,t,n){var r=0;t&&(r|=4),oCe(n,e,r,t)}var U3="_reactListening"+Math.random().toString(36).slice(2);function uR(e){if(!e[U3]){e[U3]=!0,hTe.forEach(function(n){n!=="selectionchange"&&(qet.has(n)||iz(n,!1,e),iz(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[U3]||(t[U3]=!0,iz("selectionchange",!1,t))}}function oCe(e,t,n,r){switch(VTe(t)){case 1:var i=ret;break;case 4:i=iet;break;default:i=ZQ}n=i.bind(null,t,n,e),i=void 0,!iW||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function sz(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=s_(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}ITe(function(){var l=s,c=KQ(n),f=[];e:{var d=iCe.get(e);if(d!==void 0){var h=tJ,p=e;switch(e){case"keypress":if(k$(n)===0)break e;case"keydown":case"keyup":h=wet;break;case"focusin":p="focus",h=JU;break;case"focusout":p="blur",h=JU;break;case"beforeblur":case"afterblur":h=JU;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=ehe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=aet;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=xet;break;case eCe:case tCe:case nCe:h=fet;break;case rCe:h=Cet;break;case"scroll":h=set;break;case"wheel":h=Det;break;case"copy":case"cut":case"paste":h=het;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=nhe}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var b=l,w;b!==null;){w=b;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,y!==null&&(S=nR(b,y),S!=null&&m.push(lR(b,S,w)))),g)break;b=b.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==nW&&(p=n.relatedTarget||n.fromElement)&&(s_(p)||p[V0]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?s_(p):null,p!==null&&(g=PE(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=ehe,S="onMouseLeave",y="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(m=nhe,S="onPointerLeave",y="onPointerEnter",b="pointer"),g=h==null?d:LS(h),w=p==null?d:LS(p),d=new m(S,b+"leave",h,n,c),d.target=g,d.relatedTarget=w,S=null,s_(c)===l&&(m=new m(y,b+"enter",p,n,c),m.target=w,m.relatedTarget=g,S=m),g=S,h&&p)t:{for(m=h,y=p,b=0,w=m;w;w=jx(w))b++;for(w=0,S=y;S;S=jx(S))w++;for(;0<b-w;)m=jx(m),b--;for(;0<w-b;)y=jx(y),w--;for(;b--;){if(m===y||y!==null&&m===y.alternate)break t;m=jx(m),y=jx(y)}m=null}else m=null;h!==null&&hhe(f,d,h,m,!1),p!==null&&g!==null&&hhe(f,g,p,m,!0)}}e:{if(d=l?LS(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=Met;else if(she(d))if(KTe)E=Bet;else{E=Fet;var T=$et}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=Let);if(E&&(E=E(e,l))){YTe(f,E,n,c);break e}T&&T(e,d,l),e==="focusout"&&(T=d._wrapperState)&&T.controlled&&d.type==="number"&&Qq(d,"number",d.value)}switch(T=l?LS(l):window,e){case"focusin":(she(T)||T.contentEditable==="true")&&($S=T,lW=l,rk=null);break;case"focusout":rk=lW=$S=null;break;case"mousedown":cW=!0;break;case"contextmenu":case"mouseup":case"dragend":cW=!1,che(f,n,c);break;case"selectionchange":if(zet)break;case"keydown":case"keyup":che(f,n,c)}var C;if(rJ)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else MS?WTe(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(qTe&&n.locale!=="ko"&&(MS||A!=="onCompositionStart"?A==="onCompositionEnd"&&MS&&(C=HTe()):(Lv=c,eJ="value"in Lv?Lv.value:Lv.textContent,MS=!0)),T=eL(l,A),0<T.length&&(A=new the(A,e,null,n,c),f.push({event:A,listeners:T}),C?A.data=C:(C=GTe(n),C!==null&&(A.data=C)))),(C=ket?Ret(e,n):Net(e,n))&&(l=eL(l,"onBeforeInput"),0<l.length&&(c=new the("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=C))}sCe(f,t)})}function lR(e,t,n){return{instance:e,listener:t,currentTarget:n}}function eL(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=nR(e,n),s!=null&&r.unshift(lR(e,s,i)),s=nR(e,t),s!=null&&r.push(lR(e,s,i))),e=e.return}return r}function jx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function hhe(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=nR(n,s),u!=null&&o.unshift(lR(n,u,a))):i||(u=nR(n,s),u!=null&&o.push(lR(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Wet=/\r\n?/g,Get=/\u0000|\uFFFD/g;function phe(e){return(typeof e=="string"?e:""+e).replace(Wet,`
`).replace(Get,"")}function z3(e,t,n){if(t=phe(t),phe(e)!==t&&n)throw Error(kt(425))}function tL(){}var fW=null,dW=null;function hW(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pW=typeof setTimeout=="function"?setTimeout:void 0,Yet=typeof clearTimeout=="function"?clearTimeout:void 0,mhe=typeof Promise=="function"?Promise:void 0,Ket=typeof queueMicrotask=="function"?queueMicrotask:typeof mhe<"u"?function(e){return mhe.resolve(null).then(e).catch(Xet)}:pW;function Xet(e){setTimeout(function(){throw e})}function oz(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),sR(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);sR(t)}function r1(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ghe(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var E2=Math.random().toString(36).slice(2),nm="__reactFiber$"+E2,cR="__reactProps$"+E2,V0="__reactContainer$"+E2,mW="__reactEvents$"+E2,Qet="__reactListeners$"+E2,Jet="__reactHandles$"+E2;function s_(e){var t=e[nm];if(t)return t;for(var n=e.parentNode;n;){if(t=n[V0]||n[nm]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ghe(e);e!==null;){if(n=e[nm])return n;e=ghe(e)}return t}e=n,n=e.parentNode}return null}function XN(e){return e=e[nm]||e[V0],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function LS(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(kt(33))}function J5(e){return e[cR]||null}var gW=[],BS=-1;function mb(e){return{current:e}}function vs(e){0>BS||(e.current=gW[BS],gW[BS]=null,BS--)}function os(e,t){BS++,gW[BS]=e.current,e.current=t}var D1={},Ku=mb(D1),Cc=mb(!1),U_=D1;function XT(e,t){var n=e.type.contextTypes;if(!n)return D1;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ac(e){return e=e.childContextTypes,e!=null}function nL(){vs(Cc),vs(Ku)}function yhe(e,t,n){if(Ku.current!==D1)throw Error(kt(168));os(Ku,t),os(Cc,n)}function aCe(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(kt(108,OZe(e)||"Unknown",i));return Gs({},n,r)}function rL(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||D1,U_=Ku.current,os(Ku,e),os(Cc,Cc.current),!0}function vhe(e,t,n){var r=e.stateNode;if(!r)throw Error(kt(169));n?(e=aCe(e,t,U_),r.__reactInternalMemoizedMergedChildContext=e,vs(Cc),vs(Ku),os(Ku,e)):vs(Cc),os(Cc,n)}var t0=null,Z5=!1,az=!1;function uCe(e){t0===null?t0=[e]:t0.push(e)}function Zet(e){Z5=!0,uCe(e)}function gb(){if(!az&&t0!==null){az=!0;var e=0,t=Li;try{var n=t0;for(Li=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}t0=null,Z5=!1}catch(i){throw t0!==null&&(t0=t0.slice(e+1)),PTe(XQ,gb),i}finally{Li=t,az=!1}}return null}var jS=[],US=0,iL=null,sL=0,yd=[],vd=0,z_=null,p0=1,m0="";function Aw(e,t){jS[US++]=sL,jS[US++]=iL,iL=e,sL=t}function lCe(e,t,n){yd[vd++]=p0,yd[vd++]=m0,yd[vd++]=z_,z_=e;var r=p0;e=m0;var i=32-Qh(r)-1;r&=~(1<<i),n+=1;var s=32-Qh(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,p0=1<<32-Qh(t)+i|n<<i|r,m0=s+e}else p0=1<<s|n<<i|r,m0=e}function sJ(e){e.return!==null&&(Aw(e,1),lCe(e,1,0))}function oJ(e){for(;e===iL;)iL=jS[--US],jS[US]=null,sL=jS[--US],jS[US]=null;for(;e===z_;)z_=yd[--vd],yd[vd]=null,m0=yd[--vd],yd[vd]=null,p0=yd[--vd],yd[vd]=null}var Ef=null,mf=null,Ns=!1,Ph=null;function cCe(e,t){var n=Cd(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function bhe(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ef=e,mf=r1(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ef=e,mf=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=z_!==null?{id:p0,overflow:m0}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Cd(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ef=e,mf=null,!0):!1;default:return!1}}function yW(e){return(e.mode&1)!==0&&(e.flags&128)===0}function vW(e){if(Ns){var t=mf;if(t){var n=t;if(!bhe(e,t)){if(yW(e))throw Error(kt(418));t=r1(n.nextSibling);var r=Ef;t&&bhe(e,t)?cCe(r,n):(e.flags=e.flags&-4097|2,Ns=!1,Ef=e)}}else{if(yW(e))throw Error(kt(418));e.flags=e.flags&-4097|2,Ns=!1,Ef=e}}}function whe(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ef=e}function V3(e){if(e!==Ef)return!1;if(!Ns)return whe(e),Ns=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!hW(e.type,e.memoizedProps)),t&&(t=mf)){if(yW(e))throw fCe(),Error(kt(418));for(;t;)cCe(e,t),t=r1(t.nextSibling)}if(whe(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(kt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){mf=r1(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}mf=null}}else mf=Ef?r1(e.stateNode.nextSibling):null;return!0}function fCe(){for(var e=mf;e;)e=r1(e.nextSibling)}function QT(){mf=Ef=null,Ns=!1}function aJ(e){Ph===null?Ph=[e]:Ph.push(e)}var ett=vy.ReactCurrentBatchConfig;function cD(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(kt(309));var r=n.stateNode}if(!r)throw Error(kt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(kt(284));if(!n._owner)throw Error(kt(290,e))}return e}function H3(e,t){throw e=Object.prototype.toString.call(t),Error(kt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _he(e){var t=e._init;return t(e._payload)}function dCe(e){function t(y,b){if(e){var w=y.deletions;w===null?(y.deletions=[b],y.flags|=16):w.push(b)}}function n(y,b){if(!e)return null;for(;b!==null;)t(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=a1(y,b),y.index=0,y.sibling=null,y}function s(y,b,w){return y.index=w,e?(w=y.alternate,w!==null?(w=w.index,w<b?(y.flags|=2,b):w):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,b,w,S){return b===null||b.tag!==6?(b=pz(w,y.mode,S),b.return=y,b):(b=i(b,w),b.return=y,b)}function u(y,b,w,S){var E=w.type;return E===OS?c(y,b,w.props.children,S,w.key):b!==null&&(b.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===yv&&_he(E)===b.type)?(S=i(b,w.props),S.ref=cD(y,b,w),S.return=y,S):(S=F$(w.type,w.key,w.props,null,y.mode,S),S.ref=cD(y,b,w),S.return=y,S)}function l(y,b,w,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=mz(w,y.mode,S),b.return=y,b):(b=i(b,w.children||[]),b.return=y,b)}function c(y,b,w,S,E){return b===null||b.tag!==7?(b=A_(w,y.mode,S,E),b.return=y,b):(b=i(b,w),b.return=y,b)}function f(y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=pz(""+b,y.mode,w),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case P3:return w=F$(b.type,b.key,b.props,null,y.mode,w),w.ref=cD(y,null,b),w.return=y,w;case PS:return b=mz(b,y.mode,w),b.return=y,b;case yv:var S=b._init;return f(y,S(b._payload),w)}if(aI(b)||sD(b))return b=A_(b,y.mode,w,null),b.return=y,b;H3(y,b)}return null}function d(y,b,w,S){var E=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return E!==null?null:a(y,b,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case P3:return w.key===E?u(y,b,w,S):null;case PS:return w.key===E?l(y,b,w,S):null;case yv:return E=w._init,d(y,b,E(w._payload),S)}if(aI(w)||sD(w))return E!==null?null:c(y,b,w,S,null);H3(y,w)}return null}function h(y,b,w,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(w)||null,a(b,y,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case P3:return y=y.get(S.key===null?w:S.key)||null,u(b,y,S,E);case PS:return y=y.get(S.key===null?w:S.key)||null,l(b,y,S,E);case yv:var T=S._init;return h(y,b,w,T(S._payload),E)}if(aI(S)||sD(S))return y=y.get(w)||null,c(b,y,S,E,null);H3(b,S)}return null}function p(y,b,w,S){for(var E=null,T=null,C=b,A=b=0,I=null;C!==null&&A<w.length;A++){C.index>A?(I=C,C=null):I=C.sibling;var k=d(y,C,w[A],S);if(k===null){C===null&&(C=I);break}e&&C&&k.alternate===null&&t(y,C),b=s(k,b,A),T===null?E=k:T.sibling=k,T=k,C=I}if(A===w.length)return n(y,C),Ns&&Aw(y,A),E;if(C===null){for(;A<w.length;A++)C=f(y,w[A],S),C!==null&&(b=s(C,b,A),T===null?E=C:T.sibling=C,T=C);return Ns&&Aw(y,A),E}for(C=r(y,C);A<w.length;A++)I=h(C,y,A,w[A],S),I!==null&&(e&&I.alternate!==null&&C.delete(I.key===null?A:I.key),b=s(I,b,A),T===null?E=I:T.sibling=I,T=I);return e&&C.forEach(function(N){return t(y,N)}),Ns&&Aw(y,A),E}function m(y,b,w,S){var E=sD(w);if(typeof E!="function")throw Error(kt(150));if(w=E.call(w),w==null)throw Error(kt(151));for(var T=E=null,C=b,A=b=0,I=null,k=w.next();C!==null&&!k.done;A++,k=w.next()){C.index>A?(I=C,C=null):I=C.sibling;var N=d(y,C,k.value,S);if(N===null){C===null&&(C=I);break}e&&C&&N.alternate===null&&t(y,C),b=s(N,b,A),T===null?E=N:T.sibling=N,T=N,C=I}if(k.done)return n(y,C),Ns&&Aw(y,A),E;if(C===null){for(;!k.done;A++,k=w.next())k=f(y,k.value,S),k!==null&&(b=s(k,b,A),T===null?E=k:T.sibling=k,T=k);return Ns&&Aw(y,A),E}for(C=r(y,C);!k.done;A++,k=w.next())k=h(C,y,A,k.value,S),k!==null&&(e&&k.alternate!==null&&C.delete(k.key===null?A:k.key),b=s(k,b,A),T===null?E=k:T.sibling=k,T=k);return e&&C.forEach(function(F){return t(y,F)}),Ns&&Aw(y,A),E}function g(y,b,w,S){if(typeof w=="object"&&w!==null&&w.type===OS&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case P3:e:{for(var E=w.key,T=b;T!==null;){if(T.key===E){if(E=w.type,E===OS){if(T.tag===7){n(y,T.sibling),b=i(T,w.props.children),b.return=y,y=b;break e}}else if(T.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===yv&&_he(E)===T.type){n(y,T.sibling),b=i(T,w.props),b.ref=cD(y,T,w),b.return=y,y=b;break e}n(y,T);break}else t(y,T);T=T.sibling}w.type===OS?(b=A_(w.props.children,y.mode,S,w.key),b.return=y,y=b):(S=F$(w.type,w.key,w.props,null,y.mode,S),S.ref=cD(y,b,w),S.return=y,y=S)}return o(y);case PS:e:{for(T=w.key;b!==null;){if(b.key===T)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(y,b.sibling),b=i(b,w.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else t(y,b);b=b.sibling}b=mz(w,y.mode,S),b.return=y,y=b}return o(y);case yv:return T=w._init,g(y,b,T(w._payload),S)}if(aI(w))return p(y,b,w,S);if(sD(w))return m(y,b,w,S);H3(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(y,b.sibling),b=i(b,w),b.return=y,y=b):(n(y,b),b=pz(w,y.mode,S),b.return=y,y=b),o(y)):n(y,b)}return g}var JT=dCe(!0),hCe=dCe(!1),oL=mb(null),aL=null,zS=null,uJ=null;function lJ(){uJ=zS=aL=null}function cJ(e){var t=oL.current;vs(oL),e._currentValue=t}function bW(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function cT(e,t){aL=e,uJ=zS=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(bc=!0),e.firstContext=null)}function Od(e){var t=e._currentValue;if(uJ!==e)if(e={context:e,memoizedValue:t,next:null},zS===null){if(aL===null)throw Error(kt(308));zS=e,aL.dependencies={lanes:0,firstContext:e}}else zS=zS.next=e;return t}var o_=null;function fJ(e){o_===null?o_=[e]:o_.push(e)}function pCe(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,fJ(t)):(n.next=i.next,i.next=n),t.interleaved=n,H0(e,r)}function H0(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var vv=!1;function dJ(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mCe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function D0(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function i1(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ui&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,H0(e,n)}return i=r.interleaved,i===null?(t.next=t,fJ(r)):(t.next=i.next,i.next=t),r.interleaved=t,H0(e,n)}function R$(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,QQ(e,n)}}function Ehe(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function uL(e,t,n,r){var i=e.updateQueue;vv=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Gs({},f,d);break e;case 2:vv=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);H_|=o,e.lanes=o,e.memoizedState=f}}function xhe(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(kt(191,i));i.call(r)}}}var QN={},Sm=mb(QN),fR=mb(QN),dR=mb(QN);function a_(e){if(e===QN)throw Error(kt(174));return e}function hJ(e,t){switch(os(dR,t),os(fR,e),os(Sm,QN),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Zq(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Zq(t,e)}vs(Sm),os(Sm,t)}function ZT(){vs(Sm),vs(fR),vs(dR)}function gCe(e){a_(dR.current);var t=a_(Sm.current),n=Zq(t,e.type);t!==n&&(os(fR,e),os(Sm,n))}function pJ(e){fR.current===e&&(vs(Sm),vs(fR))}var zs=mb(0);function lL(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uz=[];function mJ(){for(var e=0;e<uz.length;e++)uz[e]._workInProgressVersionPrimary=null;uz.length=0}var N$=vy.ReactCurrentDispatcher,lz=vy.ReactCurrentBatchConfig,V_=0,Ws=null,ta=null,Ca=null,cL=!1,ik=!1,hR=0,ttt=0;function Eu(){throw Error(kt(321))}function gJ(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!up(e[n],t[n]))return!1;return!0}function yJ(e,t,n,r,i,s){if(V_=s,Ws=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N$.current=e===null||e.memoizedState===null?stt:ott,e=n(r,i),ik){s=0;do{if(ik=!1,hR=0,25<=s)throw Error(kt(301));s+=1,Ca=ta=null,t.updateQueue=null,N$.current=att,e=n(r,i)}while(ik)}if(N$.current=fL,t=ta!==null&&ta.next!==null,V_=0,Ca=ta=Ws=null,cL=!1,t)throw Error(kt(300));return e}function vJ(){var e=hR!==0;return hR=0,e}function Wp(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ca===null?Ws.memoizedState=Ca=e:Ca=Ca.next=e,Ca}function Md(){if(ta===null){var e=Ws.alternate;e=e!==null?e.memoizedState:null}else e=ta.next;var t=Ca===null?Ws.memoizedState:Ca.next;if(t!==null)Ca=t,ta=e;else{if(e===null)throw Error(kt(310));ta=e,e={memoizedState:ta.memoizedState,baseState:ta.baseState,baseQueue:ta.baseQueue,queue:ta.queue,next:null},Ca===null?Ws.memoizedState=Ca=e:Ca=Ca.next=e}return Ca}function pR(e,t){return typeof t=="function"?t(e):t}function cz(e){var t=Md(),n=t.queue;if(n===null)throw Error(kt(311));n.lastRenderedReducer=e;var r=ta,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((V_&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Ws.lanes|=c,H_|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,up(r,t.memoizedState)||(bc=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ws.lanes|=s,H_|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function fz(e){var t=Md(),n=t.queue;if(n===null)throw Error(kt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);up(s,t.memoizedState)||(bc=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function yCe(){}function vCe(e,t){var n=Ws,r=Md(),i=t(),s=!up(r.memoizedState,i);if(s&&(r.memoizedState=i,bc=!0),r=r.queue,bJ(_Ce.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Ca!==null&&Ca.memoizedState.tag&1){if(n.flags|=2048,mR(9,wCe.bind(null,n,r,i,t),void 0,null),$a===null)throw Error(kt(349));V_&30||bCe(n,t,i)}return i}function bCe(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ws.updateQueue,t===null?(t={lastEffect:null,stores:null},Ws.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function wCe(e,t,n,r){t.value=n,t.getSnapshot=r,ECe(t)&&xCe(e)}function _Ce(e,t,n){return n(function(){ECe(t)&&xCe(e)})}function ECe(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!up(e,n)}catch{return!0}}function xCe(e){var t=H0(e,1);t!==null&&Jh(t,e,1,-1)}function She(e){var t=Wp();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pR,lastRenderedState:e},t.queue=e,e=e.dispatch=itt.bind(null,Ws,e),[t.memoizedState,e]}function mR(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ws.updateQueue,t===null?(t={lastEffect:null,stores:null},Ws.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function SCe(){return Md().memoizedState}function P$(e,t,n,r){var i=Wp();Ws.flags|=e,i.memoizedState=mR(1|t,n,void 0,r===void 0?null:r)}function e8(e,t,n,r){var i=Md();r=r===void 0?null:r;var s=void 0;if(ta!==null){var o=ta.memoizedState;if(s=o.destroy,r!==null&&gJ(r,o.deps)){i.memoizedState=mR(t,n,s,r);return}}Ws.flags|=e,i.memoizedState=mR(1|t,n,s,r)}function The(e,t){return P$(8390656,8,e,t)}function bJ(e,t){return e8(2048,8,e,t)}function TCe(e,t){return e8(4,2,e,t)}function CCe(e,t){return e8(4,4,e,t)}function ACe(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function DCe(e,t,n){return n=n!=null?n.concat([e]):null,e8(4,4,ACe.bind(null,t,e),n)}function wJ(){}function ICe(e,t){var n=Md();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&gJ(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function kCe(e,t){var n=Md();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&gJ(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function RCe(e,t,n){return V_&21?(up(n,t)||(n=$Te(),Ws.lanes|=n,H_|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bc=!0),e.memoizedState=n)}function ntt(e,t){var n=Li;Li=n!==0&&4>n?n:4,e(!0);var r=lz.transition;lz.transition={};try{e(!1),t()}finally{Li=n,lz.transition=r}}function NCe(){return Md().memoizedState}function rtt(e,t,n){var r=o1(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},PCe(e))OCe(t,n);else if(n=pCe(e,t,n,r),n!==null){var i=kl();Jh(n,e,r,i),MCe(n,t,r)}}function itt(e,t,n){var r=o1(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(PCe(e))OCe(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,up(a,o)){var u=t.interleaved;u===null?(i.next=i,fJ(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=pCe(e,t,i,r),n!==null&&(i=kl(),Jh(n,e,r,i),MCe(n,t,r))}}function PCe(e){var t=e.alternate;return e===Ws||t!==null&&t===Ws}function OCe(e,t){ik=cL=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function MCe(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,QQ(e,n)}}var fL={readContext:Od,useCallback:Eu,useContext:Eu,useEffect:Eu,useImperativeHandle:Eu,useInsertionEffect:Eu,useLayoutEffect:Eu,useMemo:Eu,useReducer:Eu,useRef:Eu,useState:Eu,useDebugValue:Eu,useDeferredValue:Eu,useTransition:Eu,useMutableSource:Eu,useSyncExternalStore:Eu,useId:Eu,unstable_isNewReconciler:!1},stt={readContext:Od,useCallback:function(e,t){return Wp().memoizedState=[e,t===void 0?null:t],e},useContext:Od,useEffect:The,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,P$(4194308,4,ACe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return P$(4194308,4,e,t)},useInsertionEffect:function(e,t){return P$(4,2,e,t)},useMemo:function(e,t){var n=Wp();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Wp();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=rtt.bind(null,Ws,e),[r.memoizedState,e]},useRef:function(e){var t=Wp();return e={current:e},t.memoizedState=e},useState:She,useDebugValue:wJ,useDeferredValue:function(e){return Wp().memoizedState=e},useTransition:function(){var e=She(!1),t=e[0];return e=ntt.bind(null,e[1]),Wp().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ws,i=Wp();if(Ns){if(n===void 0)throw Error(kt(407));n=n()}else{if(n=t(),$a===null)throw Error(kt(349));V_&30||bCe(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,The(_Ce.bind(null,r,s,e),[e]),r.flags|=2048,mR(9,wCe.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Wp(),t=$a.identifierPrefix;if(Ns){var n=m0,r=p0;n=(r&~(1<<32-Qh(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=hR++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ttt++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ott={readContext:Od,useCallback:ICe,useContext:Od,useEffect:bJ,useImperativeHandle:DCe,useInsertionEffect:TCe,useLayoutEffect:CCe,useMemo:kCe,useReducer:cz,useRef:SCe,useState:function(){return cz(pR)},useDebugValue:wJ,useDeferredValue:function(e){var t=Md();return RCe(t,ta.memoizedState,e)},useTransition:function(){var e=cz(pR)[0],t=Md().memoizedState;return[e,t]},useMutableSource:yCe,useSyncExternalStore:vCe,useId:NCe,unstable_isNewReconciler:!1},att={readContext:Od,useCallback:ICe,useContext:Od,useEffect:bJ,useImperativeHandle:DCe,useInsertionEffect:TCe,useLayoutEffect:CCe,useMemo:kCe,useReducer:fz,useRef:SCe,useState:function(){return fz(pR)},useDebugValue:wJ,useDeferredValue:function(e){var t=Md();return ta===null?t.memoizedState=e:RCe(t,ta.memoizedState,e)},useTransition:function(){var e=fz(pR)[0],t=Md().memoizedState;return[e,t]},useMutableSource:yCe,useSyncExternalStore:vCe,useId:NCe,unstable_isNewReconciler:!1};function Ah(e,t){if(e&&e.defaultProps){t=Gs({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function wW(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Gs({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var t8={isMounted:function(e){return(e=e._reactInternals)?PE(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=kl(),i=o1(e),s=D0(r,i);s.payload=t,n!=null&&(s.callback=n),t=i1(e,s,i),t!==null&&(Jh(t,e,i,r),R$(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=kl(),i=o1(e),s=D0(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=i1(e,s,i),t!==null&&(Jh(t,e,i,r),R$(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=kl(),r=o1(e),i=D0(n,r);i.tag=2,t!=null&&(i.callback=t),t=i1(e,i,r),t!==null&&(Jh(t,e,r,n),R$(t,e,r))}};function Che(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!aR(n,r)||!aR(i,s):!0}function $Ce(e,t,n){var r=!1,i=D1,s=t.contextType;return typeof s=="object"&&s!==null?s=Od(s):(i=Ac(t)?U_:Ku.current,r=t.contextTypes,s=(r=r!=null)?XT(e,i):D1),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=t8,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ahe(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&t8.enqueueReplaceState(t,t.state,null)}function _W(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},dJ(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Od(s):(s=Ac(t)?U_:Ku.current,i.context=XT(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(wW(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&t8.enqueueReplaceState(i,i.state,null),uL(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function eC(e,t){try{var n="",r=t;do n+=PZe(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function dz(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function EW(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var utt=typeof WeakMap=="function"?WeakMap:Map;function FCe(e,t,n){n=D0(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){hL||(hL=!0,NW=r),EW(e,t)},n}function LCe(e,t,n){n=D0(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){EW(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){EW(e,t),typeof r!="function"&&(s1===null?s1=new Set([this]):s1.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Dhe(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new utt;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ett.bind(null,e,t,n),t.then(e,e))}function Ihe(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function khe(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=D0(-1,1),t.tag=2,i1(n,t,1))),n.lanes|=1),e)}var ltt=vy.ReactCurrentOwner,bc=!1;function vl(e,t,n,r){t.child=e===null?hCe(t,null,n,r):JT(t,e.child,n,r)}function Rhe(e,t,n,r,i){n=n.render;var s=t.ref;return cT(t,i),r=yJ(e,t,n,r,s,i),n=vJ(),e!==null&&!bc?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,q0(e,t,i)):(Ns&&n&&sJ(t),t.flags|=1,vl(e,t,r,i),t.child)}function Nhe(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!DJ(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,BCe(e,t,s,r,i)):(e=F$(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:aR,n(o,r)&&e.ref===t.ref)return q0(e,t,i)}return t.flags|=1,e=a1(s,r),e.ref=t.ref,e.return=t,t.child=e}function BCe(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(aR(s,r)&&e.ref===t.ref)if(bc=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(bc=!0);else return t.lanes=e.lanes,q0(e,t,i)}return xW(e,t,n,r,i)}function jCe(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},os(HS,uf),uf|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,os(HS,uf),uf|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,os(HS,uf),uf|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,os(HS,uf),uf|=r;return vl(e,t,i,n),t.child}function UCe(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xW(e,t,n,r,i){var s=Ac(n)?U_:Ku.current;return s=XT(t,s),cT(t,i),n=yJ(e,t,n,r,s,i),r=vJ(),e!==null&&!bc?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,q0(e,t,i)):(Ns&&r&&sJ(t),t.flags|=1,vl(e,t,n,i),t.child)}function Phe(e,t,n,r,i){if(Ac(n)){var s=!0;rL(t)}else s=!1;if(cT(t,i),t.stateNode===null)O$(e,t),$Ce(t,n,r),_W(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Od(l):(l=Ac(n)?U_:Ku.current,l=XT(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Ahe(t,o,r,l),vv=!1;var d=t.memoizedState;o.state=d,uL(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Cc.current||vv?(typeof c=="function"&&(wW(t,n,c,r),u=t.memoizedState),(a=vv||Che(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,mCe(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Ah(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Od(u):(u=Ac(n)?U_:Ku.current,u=XT(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&Ahe(t,o,r,u),vv=!1,d=t.memoizedState,o.state=d,uL(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Cc.current||vv?(typeof h=="function"&&(wW(t,n,h,r),p=t.memoizedState),(l=vv||Che(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return SW(e,t,n,r,s,i)}function SW(e,t,n,r,i,s){UCe(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&vhe(t,n,!1),q0(e,t,s);r=t.stateNode,ltt.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=JT(t,e.child,null,s),t.child=JT(t,null,a,s)):vl(e,t,a,s),t.memoizedState=r.state,i&&vhe(t,n,!0),t.child}function zCe(e){var t=e.stateNode;t.pendingContext?yhe(e,t.pendingContext,t.pendingContext!==t.context):t.context&&yhe(e,t.context,!1),hJ(e,t.containerInfo)}function Ohe(e,t,n,r,i){return QT(),aJ(i),t.flags|=256,vl(e,t,n,r),t.child}var TW={dehydrated:null,treeContext:null,retryLane:0};function CW(e){return{baseLanes:e,cachePool:null,transitions:null}}function VCe(e,t,n){var r=t.pendingProps,i=zs.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),os(zs,i&1),e===null)return vW(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=i8(o,r,0,null),e=A_(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=CW(n),t.memoizedState=TW,e):_J(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return ctt(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=a1(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=a1(a,s):(s=A_(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?CW(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=TW,r}return s=e.child,e=s.sibling,r=a1(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function _J(e,t){return t=i8({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function q3(e,t,n,r){return r!==null&&aJ(r),JT(t,e.child,null,n),e=_J(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ctt(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=dz(Error(kt(422))),q3(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=i8({mode:"visible",children:r.children},i,0,null),s=A_(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&JT(t,e.child,null,o),t.child.memoizedState=CW(o),t.memoizedState=TW,s);if(!(t.mode&1))return q3(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(kt(419)),r=dz(s,r,void 0),q3(e,t,o,r)}if(a=(o&e.childLanes)!==0,bc||a){if(r=$a,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,H0(e,i),Jh(r,e,i,-1))}return AJ(),r=dz(Error(kt(421))),q3(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=xtt.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,mf=r1(i.nextSibling),Ef=t,Ns=!0,Ph=null,e!==null&&(yd[vd++]=p0,yd[vd++]=m0,yd[vd++]=z_,p0=e.id,m0=e.overflow,z_=t),t=_J(t,r.children),t.flags|=4096,t)}function Mhe(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),bW(e.return,t,n)}function hz(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function HCe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(vl(e,t,r.children,n),r=zs.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mhe(e,n,t);else if(e.tag===19)Mhe(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(os(zs,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&lL(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),hz(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&lL(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}hz(t,!0,n,null,s);break;case"together":hz(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function O$(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function q0(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),H_|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(kt(153));if(t.child!==null){for(e=t.child,n=a1(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=a1(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ftt(e,t,n){switch(t.tag){case 3:zCe(t),QT();break;case 5:gCe(t);break;case 1:Ac(t.type)&&rL(t);break;case 4:hJ(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;os(oL,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(os(zs,zs.current&1),t.flags|=128,null):n&t.child.childLanes?VCe(e,t,n):(os(zs,zs.current&1),e=q0(e,t,n),e!==null?e.sibling:null);os(zs,zs.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return HCe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),os(zs,zs.current),r)break;return null;case 22:case 23:return t.lanes=0,jCe(e,t,n)}return q0(e,t,n)}var qCe,AW,WCe,GCe;qCe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};AW=function(){};WCe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,a_(Sm.current);var s=null;switch(n){case"input":i=Kq(e,i),r=Kq(e,r),s=[];break;case"select":i=Gs({},i,{value:void 0}),r=Gs({},r,{value:void 0}),s=[];break;case"textarea":i=Jq(e,i),r=Jq(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=tL)}eW(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(eR.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(eR.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&fs("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};GCe=function(e,t,n,r){n!==r&&(t.flags|=4)};function fD(e,t){if(!Ns)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function xu(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function dtt(e,t,n){var r=t.pendingProps;switch(oJ(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xu(t),null;case 1:return Ac(t.type)&&nL(),xu(t),null;case 3:return r=t.stateNode,ZT(),vs(Cc),vs(Ku),mJ(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(V3(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ph!==null&&(MW(Ph),Ph=null))),AW(e,t),xu(t),null;case 5:pJ(t);var i=a_(dR.current);if(n=t.type,e!==null&&t.stateNode!=null)WCe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(kt(166));return xu(t),null}if(e=a_(Sm.current),V3(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[nm]=t,r[cR]=s,e=(t.mode&1)!==0,n){case"dialog":fs("cancel",r),fs("close",r);break;case"iframe":case"object":case"embed":fs("load",r);break;case"video":case"audio":for(i=0;i<lI.length;i++)fs(lI[i],r);break;case"source":fs("error",r);break;case"img":case"image":case"link":fs("error",r),fs("load",r);break;case"details":fs("toggle",r);break;case"input":Hde(r,s),fs("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},fs("invalid",r);break;case"textarea":Wde(r,s),fs("invalid",r)}eW(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&z3(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&z3(r.textContent,a,e),i=["children",""+a]):eR.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&fs("scroll",r)}switch(n){case"input":O3(r),qde(r,s,!0);break;case"textarea":O3(r),Gde(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=tL)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=_Te(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[nm]=t,e[cR]=r,qCe(e,t,!1,!1),t.stateNode=e;e:{switch(o=tW(n,r),n){case"dialog":fs("cancel",e),fs("close",e),i=r;break;case"iframe":case"object":case"embed":fs("load",e),i=r;break;case"video":case"audio":for(i=0;i<lI.length;i++)fs(lI[i],e);i=r;break;case"source":fs("error",e),i=r;break;case"img":case"image":case"link":fs("error",e),fs("load",e),i=r;break;case"details":fs("toggle",e),i=r;break;case"input":Hde(e,r),i=Kq(e,r),fs("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Gs({},r,{value:void 0}),fs("invalid",e);break;case"textarea":Wde(e,r),i=Jq(e,r),fs("invalid",e);break;default:i=r}eW(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?STe(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&ETe(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&tR(e,u):typeof u=="number"&&tR(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(eR.hasOwnProperty(s)?u!=null&&s==="onScroll"&&fs("scroll",e):u!=null&&qQ(e,s,u,o))}switch(n){case"input":O3(e),qde(e,r,!1);break;case"textarea":O3(e),Gde(e);break;case"option":r.value!=null&&e.setAttribute("value",""+A1(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?oT(e,!!r.multiple,s,!1):r.defaultValue!=null&&oT(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=tL)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return xu(t),null;case 6:if(e&&t.stateNode!=null)GCe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(kt(166));if(n=a_(dR.current),a_(Sm.current),V3(t)){if(r=t.stateNode,n=t.memoizedProps,r[nm]=t,(s=r.nodeValue!==n)&&(e=Ef,e!==null))switch(e.tag){case 3:z3(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&z3(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[nm]=t,t.stateNode=r}return xu(t),null;case 13:if(vs(zs),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ns&&mf!==null&&t.mode&1&&!(t.flags&128))fCe(),QT(),t.flags|=98560,s=!1;else if(s=V3(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(kt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(kt(317));s[nm]=t}else QT(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;xu(t),s=!1}else Ph!==null&&(MW(Ph),Ph=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||zs.current&1?la===0&&(la=3):AJ())),t.updateQueue!==null&&(t.flags|=4),xu(t),null);case 4:return ZT(),AW(e,t),e===null&&uR(t.stateNode.containerInfo),xu(t),null;case 10:return cJ(t.type._context),xu(t),null;case 17:return Ac(t.type)&&nL(),xu(t),null;case 19:if(vs(zs),s=t.memoizedState,s===null)return xu(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)fD(s,!1);else{if(la!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=lL(e),o!==null){for(t.flags|=128,fD(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return os(zs,zs.current&1|2),t.child}e=e.sibling}s.tail!==null&&Eo()>tC&&(t.flags|=128,r=!0,fD(s,!1),t.lanes=4194304)}else{if(!r)if(e=lL(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),fD(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ns)return xu(t),null}else 2*Eo()-s.renderingStartTime>tC&&n!==1073741824&&(t.flags|=128,r=!0,fD(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Eo(),t.sibling=null,n=zs.current,os(zs,r?n&1|2:n&1),t):(xu(t),null);case 22:case 23:return CJ(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?uf&1073741824&&(xu(t),t.subtreeFlags&6&&(t.flags|=8192)):xu(t),null;case 24:return null;case 25:return null}throw Error(kt(156,t.tag))}function htt(e,t){switch(oJ(t),t.tag){case 1:return Ac(t.type)&&nL(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ZT(),vs(Cc),vs(Ku),mJ(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return pJ(t),null;case 13:if(vs(zs),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(kt(340));QT()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return vs(zs),null;case 4:return ZT(),null;case 10:return cJ(t.type._context),null;case 22:case 23:return CJ(),null;case 24:return null;default:return null}}var W3=!1,$u=!1,ptt=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function VS(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ro(e,t,r)}else n.current=null}function DW(e,t,n){try{n()}catch(r){ro(e,t,r)}}var $he=!1;function mtt(e,t){if(fW=JF,e=JTe(),iJ(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(dW={focusedElem:e,selectionRange:n},JF=!1,Xt=t;Xt!==null;)if(t=Xt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Xt=e;else for(;Xt!==null;){t=Xt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Ah(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(kt(163))}}catch(S){ro(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Xt=e;break}Xt=t.return}return p=$he,$he=!1,p}function sk(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&DW(t,n,s)}i=i.next}while(i!==r)}}function n8(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function IW(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function YCe(e){var t=e.alternate;t!==null&&(e.alternate=null,YCe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[nm],delete t[cR],delete t[mW],delete t[Qet],delete t[Jet])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function KCe(e){return e.tag===5||e.tag===3||e.tag===4}function Fhe(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||KCe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function kW(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=tL));else if(r!==4&&(e=e.child,e!==null))for(kW(e,t,n),e=e.sibling;e!==null;)kW(e,t,n),e=e.sibling}function RW(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(RW(e,t,n),e=e.sibling;e!==null;)RW(e,t,n),e=e.sibling}var Qa=null,Ih=!1;function nv(e,t,n){for(n=n.child;n!==null;)XCe(e,t,n),n=n.sibling}function XCe(e,t,n){if(xm&&typeof xm.onCommitFiberUnmount=="function")try{xm.onCommitFiberUnmount(Y5,n)}catch{}switch(n.tag){case 5:$u||VS(n,t);case 6:var r=Qa,i=Ih;Qa=null,nv(e,t,n),Qa=r,Ih=i,Qa!==null&&(Ih?(e=Qa,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Qa.removeChild(n.stateNode));break;case 18:Qa!==null&&(Ih?(e=Qa,n=n.stateNode,e.nodeType===8?oz(e.parentNode,n):e.nodeType===1&&oz(e,n),sR(e)):oz(Qa,n.stateNode));break;case 4:r=Qa,i=Ih,Qa=n.stateNode.containerInfo,Ih=!0,nv(e,t,n),Qa=r,Ih=i;break;case 0:case 11:case 14:case 15:if(!$u&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&DW(n,t,o),i=i.next}while(i!==r)}nv(e,t,n);break;case 1:if(!$u&&(VS(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ro(n,t,a)}nv(e,t,n);break;case 21:nv(e,t,n);break;case 22:n.mode&1?($u=(r=$u)||n.memoizedState!==null,nv(e,t,n),$u=r):nv(e,t,n);break;default:nv(e,t,n)}}function Lhe(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new ptt),t.forEach(function(r){var i=Stt.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function mh(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Qa=a.stateNode,Ih=!1;break e;case 3:Qa=a.stateNode.containerInfo,Ih=!0;break e;case 4:Qa=a.stateNode.containerInfo,Ih=!0;break e}a=a.return}if(Qa===null)throw Error(kt(160));XCe(s,o,i),Qa=null,Ih=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){ro(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)QCe(t,e),t=t.sibling}function QCe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mh(t,e),Bp(e),r&4){try{sk(3,e,e.return),n8(3,e)}catch(m){ro(e,e.return,m)}try{sk(5,e,e.return)}catch(m){ro(e,e.return,m)}}break;case 1:mh(t,e),Bp(e),r&512&&n!==null&&VS(n,n.return);break;case 5:if(mh(t,e),Bp(e),r&512&&n!==null&&VS(n,n.return),e.flags&32){var i=e.stateNode;try{tR(i,"")}catch(m){ro(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&bTe(i,s),tW(a,o);var l=tW(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?STe(i,f):c==="dangerouslySetInnerHTML"?ETe(i,f):c==="children"?tR(i,f):qQ(i,c,f,l)}switch(a){case"input":Xq(i,s);break;case"textarea":wTe(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?oT(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?oT(i,!!s.multiple,s.defaultValue,!0):oT(i,!!s.multiple,s.multiple?[]:"",!1))}i[cR]=s}catch(m){ro(e,e.return,m)}}break;case 6:if(mh(t,e),Bp(e),r&4){if(e.stateNode===null)throw Error(kt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){ro(e,e.return,m)}}break;case 3:if(mh(t,e),Bp(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{sR(t.containerInfo)}catch(m){ro(e,e.return,m)}break;case 4:mh(t,e),Bp(e);break;case 13:mh(t,e),Bp(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(SJ=Eo())),r&4&&Lhe(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?($u=(l=$u)||c,mh(t,e),$u=l):mh(t,e),Bp(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(Xt=e,c=e.child;c!==null;){for(f=Xt=c;Xt!==null;){switch(d=Xt,h=d.child,d.tag){case 0:case 11:case 14:case 15:sk(4,d,d.return);break;case 1:VS(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){ro(r,n,m)}}break;case 5:VS(d,d.return);break;case 22:if(d.memoizedState!==null){jhe(f);continue}}h!==null?(h.return=d,Xt=h):jhe(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=xTe("display",o))}catch(m){ro(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){ro(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:mh(t,e),Bp(e),r&4&&Lhe(e);break;case 21:break;default:mh(t,e),Bp(e)}}function Bp(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(KCe(n)){var r=n;break e}n=n.return}throw Error(kt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(tR(i,""),r.flags&=-33);var s=Fhe(e);RW(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Fhe(e);kW(e,a,o);break;default:throw Error(kt(161))}}catch(u){ro(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gtt(e,t,n){Xt=e,JCe(e)}function JCe(e,t,n){for(var r=(e.mode&1)!==0;Xt!==null;){var i=Xt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||W3;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||$u;a=W3;var l=$u;if(W3=o,($u=u)&&!l)for(Xt=i;Xt!==null;)o=Xt,u=o.child,o.tag===22&&o.memoizedState!==null?Uhe(i):u!==null?(u.return=o,Xt=u):Uhe(i);for(;s!==null;)Xt=s,JCe(s),s=s.sibling;Xt=i,W3=a,$u=l}Bhe(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Xt=s):Bhe(e)}}function Bhe(e){for(;Xt!==null;){var t=Xt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:$u||n8(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!$u)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ah(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&xhe(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}xhe(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&sR(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(kt(163))}$u||t.flags&512&&IW(t)}catch(d){ro(t,t.return,d)}}if(t===e){Xt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Xt=n;break}Xt=t.return}}function jhe(e){for(;Xt!==null;){var t=Xt;if(t===e){Xt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Xt=n;break}Xt=t.return}}function Uhe(e){for(;Xt!==null;){var t=Xt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{n8(4,t)}catch(u){ro(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){ro(t,i,u)}}var s=t.return;try{IW(t)}catch(u){ro(t,s,u)}break;case 5:var o=t.return;try{IW(t)}catch(u){ro(t,o,u)}}}catch(u){ro(t,t.return,u)}if(t===e){Xt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Xt=a;break}Xt=t.return}}var ytt=Math.ceil,dL=vy.ReactCurrentDispatcher,EJ=vy.ReactCurrentOwner,Rd=vy.ReactCurrentBatchConfig,ui=0,$a=null,jo=null,ou=0,uf=0,HS=mb(0),la=0,gR=null,H_=0,r8=0,xJ=0,ok=null,fc=null,SJ=0,tC=1/0,Xg=null,hL=!1,NW=null,s1=null,G3=!1,Bv=null,pL=0,ak=0,PW=null,M$=-1,$$=0;function kl(){return ui&6?Eo():M$!==-1?M$:M$=Eo()}function o1(e){return e.mode&1?ui&2&&ou!==0?ou&-ou:ett.transition!==null?($$===0&&($$=$Te()),$$):(e=Li,e!==0||(e=window.event,e=e===void 0?16:VTe(e.type)),e):1}function Jh(e,t,n,r){if(50<ak)throw ak=0,PW=null,Error(kt(185));YN(e,n,r),(!(ui&2)||e!==$a)&&(e===$a&&(!(ui&2)&&(r8|=n),la===4&&Iv(e,ou)),Dc(e,r),n===1&&ui===0&&!(t.mode&1)&&(tC=Eo()+500,Z5&&gb()))}function Dc(e,t){var n=e.callbackNode;JZe(e,t);var r=QF(e,e===$a?ou:0);if(r===0)n!==null&&Xde(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Xde(n),t===1)e.tag===0?Zet(zhe.bind(null,e)):uCe(zhe.bind(null,e)),Ket(function(){!(ui&6)&&gb()}),n=null;else{switch(FTe(r)){case 1:n=XQ;break;case 4:n=OTe;break;case 16:n=XF;break;case 536870912:n=MTe;break;default:n=XF}n=o2e(n,ZCe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ZCe(e,t){if(M$=-1,$$=0,ui&6)throw Error(kt(327));var n=e.callbackNode;if(fT()&&e.callbackNode!==n)return null;var r=QF(e,e===$a?ou:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=mL(e,r);else{t=r;var i=ui;ui|=2;var s=t2e();($a!==e||ou!==t)&&(Xg=null,tC=Eo()+500,C_(e,t));do try{wtt();break}catch(a){e2e(e,a)}while(!0);lJ(),dL.current=s,ui=i,jo!==null?t=0:($a=null,ou=0,t=la)}if(t!==0){if(t===2&&(i=oW(e),i!==0&&(r=i,t=OW(e,i))),t===1)throw n=gR,C_(e,0),Iv(e,r),Dc(e,Eo()),n;if(t===6)Iv(e,r);else{if(i=e.current.alternate,!(r&30)&&!vtt(i)&&(t=mL(e,r),t===2&&(s=oW(e),s!==0&&(r=s,t=OW(e,s))),t===1))throw n=gR,C_(e,0),Iv(e,r),Dc(e,Eo()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(kt(345));case 2:Dw(e,fc,Xg);break;case 3:if(Iv(e,r),(r&130023424)===r&&(t=SJ+500-Eo(),10<t)){if(QF(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){kl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=pW(Dw.bind(null,e,fc,Xg),t);break}Dw(e,fc,Xg);break;case 4:if(Iv(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Qh(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Eo()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ytt(r/1960))-r,10<r){e.timeoutHandle=pW(Dw.bind(null,e,fc,Xg),r);break}Dw(e,fc,Xg);break;case 5:Dw(e,fc,Xg);break;default:throw Error(kt(329))}}}return Dc(e,Eo()),e.callbackNode===n?ZCe.bind(null,e):null}function OW(e,t){var n=ok;return e.current.memoizedState.isDehydrated&&(C_(e,t).flags|=256),e=mL(e,t),e!==2&&(t=fc,fc=n,t!==null&&MW(t)),e}function MW(e){fc===null?fc=e:fc.push.apply(fc,e)}function vtt(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!up(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Iv(e,t){for(t&=~xJ,t&=~r8,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Qh(t),r=1<<n;e[n]=-1,t&=~r}}function zhe(e){if(ui&6)throw Error(kt(327));fT();var t=QF(e,0);if(!(t&1))return Dc(e,Eo()),null;var n=mL(e,t);if(e.tag!==0&&n===2){var r=oW(e);r!==0&&(t=r,n=OW(e,r))}if(n===1)throw n=gR,C_(e,0),Iv(e,t),Dc(e,Eo()),n;if(n===6)throw Error(kt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Dw(e,fc,Xg),Dc(e,Eo()),null}function TJ(e,t){var n=ui;ui|=1;try{return e(t)}finally{ui=n,ui===0&&(tC=Eo()+500,Z5&&gb())}}function q_(e){Bv!==null&&Bv.tag===0&&!(ui&6)&&fT();var t=ui;ui|=1;var n=Rd.transition,r=Li;try{if(Rd.transition=null,Li=1,e)return e()}finally{Li=r,Rd.transition=n,ui=t,!(ui&6)&&gb()}}function CJ(){uf=HS.current,vs(HS)}function C_(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Yet(n)),jo!==null)for(n=jo.return;n!==null;){var r=n;switch(oJ(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nL();break;case 3:ZT(),vs(Cc),vs(Ku),mJ();break;case 5:pJ(r);break;case 4:ZT();break;case 13:vs(zs);break;case 19:vs(zs);break;case 10:cJ(r.type._context);break;case 22:case 23:CJ()}n=n.return}if($a=e,jo=e=a1(e.current,null),ou=uf=t,la=0,gR=null,xJ=r8=H_=0,fc=ok=null,o_!==null){for(t=0;t<o_.length;t++)if(n=o_[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}o_=null}return e}function e2e(e,t){do{var n=jo;try{if(lJ(),N$.current=fL,cL){for(var r=Ws.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}cL=!1}if(V_=0,Ca=ta=Ws=null,ik=!1,hR=0,EJ.current=null,n===null||n.return===null){la=1,gR=t,jo=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=ou,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Ihe(o);if(h!==null){h.flags&=-257,khe(h,o,a,s,t),h.mode&1&&Dhe(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){Dhe(s,l,t),AJ();break e}u=Error(kt(426))}}else if(Ns&&a.mode&1){var g=Ihe(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),khe(g,o,a,s,t),aJ(eC(u,a));break e}}s=u=eC(u,a),la!==4&&(la=2),ok===null?ok=[s]:ok.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=FCe(s,u,t);Ehe(s,y);break e;case 1:a=u;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(s1===null||!s1.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t;var S=LCe(s,a,t);Ehe(s,S);break e}}s=s.return}while(s!==null)}r2e(n)}catch(E){t=E,jo===n&&n!==null&&(jo=n=n.return);continue}break}while(!0)}function t2e(){var e=dL.current;return dL.current=fL,e===null?fL:e}function AJ(){(la===0||la===3||la===2)&&(la=4),$a===null||!(H_&268435455)&&!(r8&268435455)||Iv($a,ou)}function mL(e,t){var n=ui;ui|=2;var r=t2e();($a!==e||ou!==t)&&(Xg=null,C_(e,t));do try{btt();break}catch(i){e2e(e,i)}while(!0);if(lJ(),ui=n,dL.current=r,jo!==null)throw Error(kt(261));return $a=null,ou=0,la}function btt(){for(;jo!==null;)n2e(jo)}function wtt(){for(;jo!==null&&!VZe();)n2e(jo)}function n2e(e){var t=s2e(e.alternate,e,uf);e.memoizedProps=e.pendingProps,t===null?r2e(e):jo=t,EJ.current=null}function r2e(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=htt(n,t),n!==null){n.flags&=32767,jo=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{la=6,jo=null;return}}else if(n=dtt(n,t,uf),n!==null){jo=n;return}if(t=t.sibling,t!==null){jo=t;return}jo=t=e}while(t!==null);la===0&&(la=5)}function Dw(e,t,n){var r=Li,i=Rd.transition;try{Rd.transition=null,Li=1,_tt(e,t,n,r)}finally{Rd.transition=i,Li=r}return null}function _tt(e,t,n,r){do fT();while(Bv!==null);if(ui&6)throw Error(kt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(kt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(ZZe(e,s),e===$a&&(jo=$a=null,ou=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||G3||(G3=!0,o2e(XF,function(){return fT(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Rd.transition,Rd.transition=null;var o=Li;Li=1;var a=ui;ui|=4,EJ.current=null,mtt(e,n),QCe(n,e),Uet(dW),JF=!!fW,dW=fW=null,e.current=n,gtt(n),HZe(),ui=a,Li=o,Rd.transition=s}else e.current=n;if(G3&&(G3=!1,Bv=e,pL=i),s=e.pendingLanes,s===0&&(s1=null),GZe(n.stateNode),Dc(e,Eo()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(hL)throw hL=!1,e=NW,NW=null,e;return pL&1&&e.tag!==0&&fT(),s=e.pendingLanes,s&1?e===PW?ak++:(ak=0,PW=e):ak=0,gb(),null}function fT(){if(Bv!==null){var e=FTe(pL),t=Rd.transition,n=Li;try{if(Rd.transition=null,Li=16>e?16:e,Bv===null)var r=!1;else{if(e=Bv,Bv=null,pL=0,ui&6)throw Error(kt(331));var i=ui;for(ui|=4,Xt=e.current;Xt!==null;){var s=Xt,o=s.child;if(Xt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Xt=l;Xt!==null;){var c=Xt;switch(c.tag){case 0:case 11:case 15:sk(8,c,s)}var f=c.child;if(f!==null)f.return=c,Xt=f;else for(;Xt!==null;){c=Xt;var d=c.sibling,h=c.return;if(YCe(c),c===l){Xt=null;break}if(d!==null){d.return=h,Xt=d;break}Xt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Xt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Xt=o;else e:for(;Xt!==null;){if(s=Xt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:sk(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Xt=y;break e}Xt=s.return}}var b=e.current;for(Xt=b;Xt!==null;){o=Xt;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Xt=w;else e:for(o=b;Xt!==null;){if(a=Xt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:n8(9,a)}}catch(E){ro(a,a.return,E)}if(a===o){Xt=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,Xt=S;break e}Xt=a.return}}if(ui=i,gb(),xm&&typeof xm.onPostCommitFiberRoot=="function")try{xm.onPostCommitFiberRoot(Y5,e)}catch{}r=!0}return r}finally{Li=n,Rd.transition=t}}return!1}function Vhe(e,t,n){t=eC(n,t),t=FCe(e,t,1),e=i1(e,t,1),t=kl(),e!==null&&(YN(e,1,t),Dc(e,t))}function ro(e,t,n){if(e.tag===3)Vhe(e,e,n);else for(;t!==null;){if(t.tag===3){Vhe(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(s1===null||!s1.has(r))){e=eC(n,e),e=LCe(t,e,1),t=i1(t,e,1),e=kl(),t!==null&&(YN(t,1,e),Dc(t,e));break}}t=t.return}}function Ett(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=kl(),e.pingedLanes|=e.suspendedLanes&n,$a===e&&(ou&n)===n&&(la===4||la===3&&(ou&130023424)===ou&&500>Eo()-SJ?C_(e,0):xJ|=n),Dc(e,t)}function i2e(e,t){t===0&&(e.mode&1?(t=F3,F3<<=1,!(F3&130023424)&&(F3=4194304)):t=1);var n=kl();e=H0(e,t),e!==null&&(YN(e,t,n),Dc(e,n))}function xtt(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),i2e(e,n)}function Stt(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(kt(314))}r!==null&&r.delete(t),i2e(e,n)}var s2e;s2e=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Cc.current)bc=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return bc=!1,ftt(e,t,n);bc=!!(e.flags&131072)}else bc=!1,Ns&&t.flags&1048576&&lCe(t,sL,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;O$(e,t),e=t.pendingProps;var i=XT(t,Ku.current);cT(t,n),i=yJ(null,t,r,e,i,n);var s=vJ();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ac(r)?(s=!0,rL(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,dJ(t),i.updater=t8,t.stateNode=i,i._reactInternals=t,_W(t,r,e,n),t=SW(null,t,r,!0,s,n)):(t.tag=0,Ns&&s&&sJ(t),vl(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(O$(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Ctt(r),e=Ah(r,e),i){case 0:t=xW(null,t,r,e,n);break e;case 1:t=Phe(null,t,r,e,n);break e;case 11:t=Rhe(null,t,r,e,n);break e;case 14:t=Nhe(null,t,r,Ah(r.type,e),n);break e}throw Error(kt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ah(r,i),xW(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ah(r,i),Phe(e,t,r,i,n);case 3:e:{if(zCe(t),e===null)throw Error(kt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,mCe(e,t),uL(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=eC(Error(kt(423)),t),t=Ohe(e,t,r,n,i);break e}else if(r!==i){i=eC(Error(kt(424)),t),t=Ohe(e,t,r,n,i);break e}else for(mf=r1(t.stateNode.containerInfo.firstChild),Ef=t,Ns=!0,Ph=null,n=hCe(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(QT(),r===i){t=q0(e,t,n);break e}vl(e,t,r,n)}t=t.child}return t;case 5:return gCe(t),e===null&&vW(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,hW(r,i)?o=null:s!==null&&hW(r,s)&&(t.flags|=32),UCe(e,t),vl(e,t,o,n),t.child;case 6:return e===null&&vW(t),null;case 13:return VCe(e,t,n);case 4:return hJ(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=JT(t,null,r,n):vl(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ah(r,i),Rhe(e,t,r,i,n);case 7:return vl(e,t,t.pendingProps,n),t.child;case 8:return vl(e,t,t.pendingProps.children,n),t.child;case 12:return vl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,os(oL,r._currentValue),r._currentValue=o,s!==null)if(up(s.value,o)){if(s.children===i.children&&!Cc.current){t=q0(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=D0(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),bW(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(kt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),bW(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}vl(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,cT(t,n),i=Od(i),r=r(i),t.flags|=1,vl(e,t,r,n),t.child;case 14:return r=t.type,i=Ah(r,t.pendingProps),i=Ah(r.type,i),Nhe(e,t,r,i,n);case 15:return BCe(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ah(r,i),O$(e,t),t.tag=1,Ac(r)?(e=!0,rL(t)):e=!1,cT(t,n),$Ce(t,r,i),_W(t,r,i,n),SW(null,t,r,!0,e,n);case 19:return HCe(e,t,n);case 22:return jCe(e,t,n)}throw Error(kt(156,t.tag))};function o2e(e,t){return PTe(e,t)}function Ttt(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cd(e,t,n,r){return new Ttt(e,t,n,r)}function DJ(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ctt(e){if(typeof e=="function")return DJ(e)?1:0;if(e!=null){if(e=e.$$typeof,e===GQ)return 11;if(e===YQ)return 14}return 2}function a1(e,t){var n=e.alternate;return n===null?(n=Cd(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function F$(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")DJ(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case OS:return A_(n.children,i,s,t);case WQ:o=8,i|=8;break;case qq:return e=Cd(12,n,t,i|2),e.elementType=qq,e.lanes=s,e;case Wq:return e=Cd(13,n,t,i),e.elementType=Wq,e.lanes=s,e;case Gq:return e=Cd(19,n,t,i),e.elementType=Gq,e.lanes=s,e;case gTe:return i8(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case pTe:o=10;break e;case mTe:o=9;break e;case GQ:o=11;break e;case YQ:o=14;break e;case yv:o=16,r=null;break e}throw Error(kt(130,e==null?e:typeof e,""))}return t=Cd(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function A_(e,t,n,r){return e=Cd(7,e,r,t),e.lanes=n,e}function i8(e,t,n,r){return e=Cd(22,e,r,t),e.elementType=gTe,e.lanes=n,e.stateNode={isHidden:!1},e}function pz(e,t,n){return e=Cd(6,e,null,t),e.lanes=n,e}function mz(e,t,n){return t=Cd(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Att(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=KU(0),this.expirationTimes=KU(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=KU(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function IJ(e,t,n,r,i,s,o,a,u){return e=new Att(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Cd(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dJ(s),e}function Dtt(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:PS,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function a2e(e){if(!e)return D1;e=e._reactInternals;e:{if(PE(e)!==e||e.tag!==1)throw Error(kt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ac(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(kt(171))}if(e.tag===1){var n=e.type;if(Ac(n))return aCe(e,n,t)}return t}function u2e(e,t,n,r,i,s,o,a,u){return e=IJ(n,r,!0,e,i,s,o,a,u),e.context=a2e(null),n=e.current,r=kl(),i=o1(n),s=D0(r,i),s.callback=t??null,i1(n,s,i),e.current.lanes=i,YN(e,i,r),Dc(e,r),e}function s8(e,t,n,r){var i=t.current,s=kl(),o=o1(i);return n=a2e(n),t.context===null?t.context=n:t.pendingContext=n,t=D0(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=i1(i,t,o),e!==null&&(Jh(e,i,o,s),R$(e,i,o)),o}function gL(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Hhe(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function kJ(e,t){Hhe(e,t),(e=e.alternate)&&Hhe(e,t)}var l2e=typeof reportError=="function"?reportError:function(e){console.error(e)};function RJ(e){this._internalRoot=e}o8.prototype.render=RJ.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(kt(409));s8(e,t,null,null)};o8.prototype.unmount=RJ.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;q_(function(){s8(null,e,null,null)}),t[V0]=null}};function o8(e){this._internalRoot=e}o8.prototype.unstable_scheduleHydration=function(e){if(e){var t=jTe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dv.length&&t!==0&&t<Dv[n].priority;n++);Dv.splice(n,0,e),n===0&&zTe(e)}};function NJ(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function a8(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function qhe(){}function Itt(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=gL(o);s.call(l)}}var o=u2e(t,r,e,0,null,!1,!1,"",qhe);return e._reactRootContainer=o,e[V0]=o.current,uR(e.nodeType===8?e.parentNode:e),q_(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=gL(u);a.call(l)}}var u=IJ(e,0,!1,null,null,!1,!1,"",qhe);return e._reactRootContainer=u,e[V0]=u.current,uR(e.nodeType===8?e.parentNode:e),q_(function(){s8(t,u,n,r)}),u}function u8(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=gL(o);a.call(u)}}s8(t,o,e,i)}else o=Itt(n,t,e,i,r);return gL(o)}LTe=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=uI(t.pendingLanes);n!==0&&(QQ(t,n|1),Dc(t,Eo()),!(ui&6)&&(tC=Eo()+500,gb()))}break;case 13:q_(function(){var r=H0(e,1);if(r!==null){var i=kl();Jh(r,e,1,i)}}),kJ(e,1)}};JQ=function(e){if(e.tag===13){var t=H0(e,134217728);if(t!==null){var n=kl();Jh(t,e,134217728,n)}kJ(e,134217728)}};BTe=function(e){if(e.tag===13){var t=o1(e),n=H0(e,t);if(n!==null){var r=kl();Jh(n,e,t,r)}kJ(e,t)}};jTe=function(){return Li};UTe=function(e,t){var n=Li;try{return Li=e,t()}finally{Li=n}};rW=function(e,t,n){switch(t){case"input":if(Xq(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=J5(r);if(!i)throw Error(kt(90));vTe(r),Xq(r,i)}}}break;case"textarea":wTe(e,n);break;case"select":t=n.value,t!=null&&oT(e,!!n.multiple,t,!1)}};ATe=TJ;DTe=q_;var ktt={usingClientEntryPoint:!1,Events:[XN,LS,J5,TTe,CTe,TJ]},dD={findFiberByHostInstance:s_,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Rtt={bundleType:dD.bundleType,version:dD.version,rendererPackageName:dD.rendererPackageName,rendererConfig:dD.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vy.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=RTe(e),e===null?null:e.stateNode},findFiberByHostInstance:dD.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Y3=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Y3.isDisabled&&Y3.supportsFiber)try{Y5=Y3.inject(Rtt),xm=Y3}catch{}}Vf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ktt;Vf.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!NJ(t))throw Error(kt(200));return Dtt(e,t,null,n)};Vf.createRoot=function(e,t){if(!NJ(e))throw Error(kt(299));var n=!1,r="",i=l2e;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=IJ(e,1,!1,null,null,n,!1,r,i),e[V0]=t.current,uR(e.nodeType===8?e.parentNode:e),new RJ(t)};Vf.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(kt(188)):(e=Object.keys(e).join(","),Error(kt(268,e)));return e=RTe(t),e=e===null?null:e.stateNode,e};Vf.flushSync=function(e){return q_(e)};Vf.hydrate=function(e,t,n){if(!a8(t))throw Error(kt(200));return u8(null,e,t,!0,n)};Vf.hydrateRoot=function(e,t,n){if(!NJ(e))throw Error(kt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=l2e;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=u2e(t,null,e,1,n??null,i,!1,s,o),e[V0]=t.current,uR(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new o8(t)};Vf.render=function(e,t,n){if(!a8(t))throw Error(kt(200));return u8(null,e,t,!1,n)};Vf.unmountComponentAtNode=function(e){if(!a8(e))throw Error(kt(40));return e._reactRootContainer?(q_(function(){u8(null,null,e,!1,function(){e._reactRootContainer=null,e[V0]=null})}),!0):!1};Vf.unstable_batchedUpdates=TJ;Vf.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!a8(n))throw Error(kt(200));if(e==null||e._reactInternals===void 0)throw Error(kt(38));return u8(e,t,n,!1,r)};Vf.version="18.3.1-next-f1338f8080-20240426";function c2e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c2e)}catch(e){console.error(e)}}c2e(),cTe.exports=Vf;var JN=cTe.exports;const cI=zf(JN);var Whe=JN;Vq.createRoot=Whe.createRoot,Vq.hydrateRoot=Whe.hydrateRoot;var rm=function(){return rm=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},rm.apply(this,arguments)};function ZN(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function a0(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function Ghe(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ntt(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function qr(e){return this instanceof qr?(this.v=e,this):new qr(e)}function u_(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof qr?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function gz(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:qr(e[i](o)),done:!1}:s?s(o):o}:s}}function uk(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Ghe=="function"?Ghe(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var L$="right-scroll-bar-position",B$="width-before-scroll-bar",Ptt="with-scroll-bars-hidden",Ott="--removed-body-scroll-bar-size";function yz(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Mtt(e,t){var n=P.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var $tt=typeof window<"u"?P.useLayoutEffect:P.useEffect,Yhe=new WeakMap;function Ftt(e,t){var n=Mtt(null,function(r){return e.forEach(function(i){return yz(i,r)})});return $tt(function(){var r=Yhe.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||yz(a,null)}),s.forEach(function(a){i.has(a)||yz(a,o)})}Yhe.set(n,e)},[e]),n}function Ltt(e){return e}function Btt(e,t){t===void 0&&(t=Ltt);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function jtt(e){e===void 0&&(e={});var t=Btt(null);return t.options=rm({async:!0,ssr:!1},e),t}var f2e=function(e){var t=e.sideCar,n=ZN(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return P.createElement(r,rm({},n))};f2e.isSideCarExport=!0;function Utt(e,t){return e.useMedium(t),f2e}var d2e=jtt(),vz=function(){},l8=P.forwardRef(function(e,t){var n=P.useRef(null),r=P.useState({onScrollCapture:vz,onWheelCapture:vz,onTouchMoveCapture:vz}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,b=e.gapMode,w=ZN(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=d,E=Ftt([n,t]),T=rm(rm({},w),i);return P.createElement(P.Fragment,null,c&&P.createElement(S,{sideCar:d2e,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:b}),o?P.cloneElement(P.Children.only(a),rm(rm({},T),{ref:E})):P.createElement(y,rm({},T,{className:u,ref:E}),a))});l8.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};l8.classNames={fullWidth:B$,zeroRight:L$};var ztt=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Vtt(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=ztt();return t&&e.setAttribute("nonce",t),e}function Htt(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function qtt(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Wtt=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Vtt())&&(Htt(t,n),qtt(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Gtt=function(){var e=Wtt();return function(t,n){P.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},h2e=function(){var e=Gtt(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},Ytt={left:0,top:0,right:0,gap:0},bz=function(e){return parseInt(e||"",10)||0},Ktt=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[bz(n),bz(r),bz(i)]},Xtt=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Ytt;var t=Ktt(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Qtt=h2e(),dT="data-scroll-locked",Jtt=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Ptt,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(dT,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(L$,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(B$,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(L$," .").concat(L$,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(B$," .").concat(B$,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(dT,`] {
    `).concat(Ott,": ").concat(a,`px;
  }
`)},Khe=function(){var e=parseInt(document.body.getAttribute(dT)||"0",10);return isFinite(e)?e:0},Ztt=function(){P.useEffect(function(){return document.body.setAttribute(dT,(Khe()+1).toString()),function(){var e=Khe()-1;e<=0?document.body.removeAttribute(dT):document.body.setAttribute(dT,e.toString())}},[])},ent=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;Ztt();var s=P.useMemo(function(){return Xtt(i)},[i]);return P.createElement(Qtt,{styles:Jtt(s,!t,i,n?"":"!important")})},$W=!1;if(typeof window<"u")try{var K3=Object.defineProperty({},"passive",{get:function(){return $W=!0,!0}});window.addEventListener("test",K3,K3),window.removeEventListener("test",K3,K3)}catch{$W=!1}var Ux=$W?{passive:!1}:!1,tnt=function(e){return e.tagName==="TEXTAREA"},p2e=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!tnt(e)&&n[t]==="visible")},nnt=function(e){return p2e(e,"overflowY")},rnt=function(e){return p2e(e,"overflowX")},Xhe=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=m2e(e,r);if(i){var s=g2e(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},int=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},snt=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},m2e=function(e,t){return e==="v"?nnt(t):rnt(t)},g2e=function(e,t){return e==="v"?int(t):snt(t)},ont=function(e,t){return e==="h"&&t==="rtl"?-1:1},ant=function(e,t,n,r,i){var s=ont(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=g2e(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&m2e(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},X3=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Qhe=function(e){return[e.deltaX,e.deltaY]},Jhe=function(e){return e&&"current"in e?e.current:e},unt=function(e,t){return e[0]===t[0]&&e[1]===t[1]},lnt=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},cnt=0,zx=[];function fnt(e){var t=P.useRef([]),n=P.useRef([0,0]),r=P.useRef(),i=P.useState(cnt++)[0],s=P.useState(h2e)[0],o=P.useRef(e);P.useEffect(function(){o.current=e},[e]),P.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=Ntt([e.lockRef.current],(e.shards||[]).map(Jhe),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=P.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=X3(m),b=n.current,w="deltaX"in m?m.deltaX:b[0]-y[0],S="deltaY"in m?m.deltaY:b[1]-y[1],E,T=m.target,C=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in m&&C==="h"&&T.type==="range")return!1;var A=Xhe(C,T);if(!A)return!0;if(A?E=C:(E=C==="v"?"h":"v",A=Xhe(C,T)),!A)return!1;if(!r.current&&"changedTouches"in m&&(w||S)&&(r.current=E),!E)return!0;var I=r.current||E;return ant(I,g,m,I==="h"?w:S,!0)},[]),u=P.useCallback(function(m){var g=m;if(!(!zx.length||zx[zx.length-1]!==s)){var y="deltaY"in g?Qhe(g):X3(g),b=t.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&unt(E.delta,y)})[0];if(b&&b.should){g.cancelable&&g.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(Jhe).filter(Boolean).filter(function(E){return E.contains(g.target)}),S=w.length>0?a(g,w[0]):!o.current.noIsolation;S&&g.cancelable&&g.preventDefault()}}},[]),l=P.useCallback(function(m,g,y,b){var w={name:m,delta:g,target:y,should:b,shadowParent:dnt(y)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(S){return S!==w})},1)},[]),c=P.useCallback(function(m){n.current=X3(m),r.current=void 0},[]),f=P.useCallback(function(m){l(m.type,Qhe(m),m.target,a(m,e.lockRef.current))},[]),d=P.useCallback(function(m){l(m.type,X3(m),m.target,a(m,e.lockRef.current))},[]);P.useEffect(function(){return zx.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,Ux),document.addEventListener("touchmove",u,Ux),document.addEventListener("touchstart",c,Ux),function(){zx=zx.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,Ux),document.removeEventListener("touchmove",u,Ux),document.removeEventListener("touchstart",c,Ux)}},[]);var h=e.removeScrollBar,p=e.inert;return P.createElement(P.Fragment,null,p?P.createElement(s,{styles:lnt(i)}):null,h?P.createElement(ent,{gapMode:e.gapMode}):null)}function dnt(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const hnt=Utt(d2e,fnt);var nC=P.forwardRef(function(e,t){return P.createElement(l8,rm({},e,{ref:t,sideCar:hnt}))});nC.classNames=l8.classNames;function rs(e){return Object.keys(e)}function wz(e){return e&&typeof e=="object"&&!Array.isArray(e)}function PJ(e,t){const n={...e},r=t;return wz(e)&&wz(t)&&Object.keys(t).forEach(i=>{wz(r[i])&&i in e?n[i]=PJ(n[i],r[i]):n[i]=r[i]}),n}function pnt(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function mnt(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function yR(e){const t=mnt(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function _z(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function y2e(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?_z(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?_z(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?_z(s):s}}return r}return n}const qe=y2e("rem",{shouldScale:!0}),yL=y2e("em");function yb(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function v2e(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function vb(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==P.Fragment:!1}function ja(e){const t=P.createContext(null);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>{const i=P.useContext(t);if(i===null)throw new Error(e);return i}]}function x2(e=null){const t=P.createContext(e);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>P.useContext(t)]}function vL(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function bL(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function gnt(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function ynt(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function vnt(e,t,n){return bL(e,n)===bL(t,n)}function OJ({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=bL(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>vnt(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=ynt(l,u,r),f=gnt(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const bnt={app:100,modal:200,popover:300,overlay:400,max:9999};function qf(e){return bnt[e]}const wnt=()=>{};function _nt(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||wnt:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function Vn(e,t="size",n=!0){if(e!==void 0)return v2e(e)?n?qe(e):e:`var(--${t}-${e})`}function So(e){return Vn(e,"mantine-spacing")}function Wi(e){return e===void 0?"var(--mantine-radius-default)":Vn(e,"mantine-radius")}function Fa(e){return Vn(e,"mantine-font-size")}function b2e(e){return Vn(e,"mantine-line-height",!1)}function MJ(e){if(e)return Vn(e,"mantine-shadow",!1)}function g0(e,t){return n=>{e==null||e(n),t==null||t(n)}}function $J(e,t){return e in t.breakpoints?yR(t.breakpoints[e]):yR(e)}function vR(e,t){const n=e.map(r=>({value:r,px:$J(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function zh(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function Ent(e,t,n){var r;return n?Array.from(((r=bL(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function xnt(){const[e,t]=P.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function gm(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function hT(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Hw(e){const t=P.useRef(e);return P.useEffect(()=>{t.current=e}),P.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function c8(e,t){const n=Hw(e),r=P.useRef(0);return P.useEffect(()=>()=>window.clearTimeout(r.current),[]),P.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const Zhe=["mousedown","touchstart"];function Snt(e,t,n){const r=P.useRef();return P.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||Zhe).forEach(s=>document.addEventListener(s,i)),()=>{(t||Zhe).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function Tnt(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function Cnt(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function Ant(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=P.useState(n?t:Cnt(e)),s=P.useRef();return P.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),Tnt(s.current,o=>i(o.matches))},[e]),r}const OE=typeof document<"u"?P.useLayoutEffect:P.useEffect;function jm(e,t){const n=P.useRef(!1);P.useEffect(()=>()=>{n.current=!1},[]),P.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function w2e({opened:e,shouldReturnFocus:t=!0}){const n=P.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return jm(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function Dnt(e,t="body > :not(script)"){const n=hT(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const Int=/input|select|textarea|button|object/,_2e="a, input, select, textarea, button, object, [tabindex]";function knt(e){return e.style.display==="none"}function Rnt(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(knt(n))return!1;n=n.parentNode}return!0}function E2e(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function FW(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(E2e(e));return(Int.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&Rnt(e)}function x2e(e){const t=E2e(e);return(Number.isNaN(t)||t>=0)&&FW(e)}function Nnt(e){return Array.from(e.querySelectorAll(_2e)).filter(x2e)}function Pnt(e,t){const n=Nnt(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function Ont(e=!0){const t=P.useRef(),n=P.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(_2e));o=a.find(x2e)||a.find(FW)||null,!o&&FW(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=P.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=Dnt(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return P.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&Pnt(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const Mnt=e=>(e+1)%1e6;function $nt(){const[,e]=P.useReducer(Mnt,0);return e}const Fnt=xi.useId||(()=>{});function Lnt(){const e=Fnt();return e?`mantine-${e.replace(/:/g,"")}`:""}function nl(e){const t=Lnt(),[n,r]=P.useState(t);return OE(()=>{r(hT())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function S2e(e,t,n){P.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function FJ(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function T2e(...e){return t=>{e.forEach(n=>FJ(n,t))}}function Io(...e){return P.useCallback(T2e(...e),e)}function C2e(e,t,n="ltr"){const r=P.useRef(null),i=P.useRef(!1),s=P.useRef(!1),o=P.useRef(0),[a,u]=P.useState(!1);return P.useEffect(()=>{i.current=!0},[]),P.useEffect(()=>{var b,w;const l=({x:S,y:E})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const T=r.current.getBoundingClientRect();if(T.width&&T.height){const C=gm((S-T.left)/T.width,0,1);e({x:n==="ltr"?C:1-C,y:gm((E-T.top)/T.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=S=>{d(),S.preventDefault(),m(S)},m=S=>l({x:S.clientX,y:S.clientY}),g=S=>{S.cancelable&&S.preventDefault(),d(),y(S)},y=S=>{S.cancelable&&S.preventDefault(),l({x:S.changedTouches[0].clientX,y:S.changedTouches[0].clientY})};return(b=r.current)==null||b.addEventListener("mousedown",p),(w=r.current)==null||w.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Ho({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=P.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function f8(e,t){return Ant("(prefers-reduced-motion: reduce)",e,t)}const Bnt={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Zh(e){const t=P.useRef(0),n=P.useRef(null),[r,i]=P.useState(Bnt),s=P.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return P.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function jnt(e){const[t,{width:n,height:r}]=Zh(e);return{ref:t,width:n,height:r}}function Unt(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function znt(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function Vnt(e){return t=>znt(Unt(e),t)}function Hnt(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{Vnt(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function d8(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=P.useState(e),o=P.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=P.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=P.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function qnt(e,t,n={autoInvoke:!1}){const r=P.useRef(null),i=P.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=P.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return P.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function Wnt(e,t,n){const r=P.useRef(),i=P.useRef(null);return P.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function Gnt(){const[e,t]=P.useState(!1);return P.useEffect(()=>t(!0),[]),e}function Ynt(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function Knt(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});OE(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>Ynt(`${e}:${String(r)}`,i[0])}return[t,n]}var Xnt={};function A2e(){return typeof process<"u"&&Xnt?"production":"development"}function D2e(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=D2e(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function co(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=D2e(e))&&(r&&(r+=" "),r+=t);return r}const Qnt={};function Jnt(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=co(t[r],i):t[r]=i})}),t}function h8({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||Qnt);return Jnt(s)}function wL({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const I2e=P.createContext(null);function bb(){const e=P.useContext(I2e);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function Znt(){return bb().cssVariablesResolver}function ert(){return bb().classNamesPrefix}function LJ(){return bb().getStyleNonce}function trt(){return bb().withStaticClasses}function nrt(){return bb().headless}function rrt(){var e;return(e=bb().stylesTransform)==null?void 0:e.sx}function irt(){var e;return(e=bb().stylesTransform)==null?void 0:e.styles}function srt(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function ort(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function art(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function urt(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function BJ(e){return srt(e)?ort(e):e.startsWith("rgb")?art(e):e.startsWith("hsl")?urt(e):{r:0,g:0,b:0,a:1}}function Q3(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=BJ(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function bR(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function Ez(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function lrt(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function crt(e){if(e.startsWith("oklch("))return(lrt(e)||0)/100;const{r:t,g:n,b:r}=BJ(e),i=t/255,s=n/255,o=r/255,a=Ez(i),u=Ez(s),l=Ez(o);return .2126*a+.7152*u+.0722*l}function hD(e,t=.179){return e.startsWith("var(")?!1:crt(e)>t}function og({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:hD(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:hD(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:hD(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][bR(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:hD(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:hD(e,t.luminanceThreshold),shade:s,variable:void 0}}function Bi(e,t){const n=og({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function LW(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Bi(n.from,t),i=Bi(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Gp(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=BJ(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const Vx=Gp,frt=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=og({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${qe(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${qe(1)} solid transparent`}:{background:e,hover:Q3(e,.1),color:a,border:`${qe(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${qe(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Gp(a,.1),hover:Gp(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${qe(1)} solid transparent`}}return{background:Gp(e,.1),hover:Gp(e,.12),color:e,border:`${qe(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${qe(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Gp(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${qe(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Gp(e,.05),color:e,border:`${qe(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${qe(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Gp(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${qe(1)} solid transparent`}}return{background:"transparent",hover:Gp(e,.12),color:e,border:`${qe(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${qe(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${qe(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${qe(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:Q3(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${qe(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Q3(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${qe(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Q3(t.white,.01),color:e,border:`${qe(1)} solid transparent`}:n==="gradient"?{background:LW(r,t),hover:LW(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${qe(1)} solid var(--mantine-color-default-border)`}:{}},drt={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},epe="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",jJ={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:drt,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:frt,autoContrast:!1,luminanceThreshold:.3,fontFamily:epe,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:epe,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:qe(34),lineHeight:"1.3"},h2:{fontSize:qe(26),lineHeight:"1.35"},h3:{fontSize:qe(22),lineHeight:"1.4"},h4:{fontSize:qe(18),lineHeight:"1.45"},h5:{fontSize:qe(16),lineHeight:"1.5"},h6:{fontSize:qe(14),lineHeight:"1.5"}}},fontSizes:{xs:qe(12),sm:qe(14),md:qe(16),lg:qe(18),xl:qe(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:qe(2),sm:qe(4),md:qe(8),lg:qe(16),xl:qe(32)},spacing:{xs:qe(10),sm:qe(12),md:qe(16),lg:qe(20),xl:qe(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${qe(1)} ${qe(3)} rgba(0, 0, 0, 0.05), 0 ${qe(1)} ${qe(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${qe(1)} ${qe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${qe(10)} ${qe(15)} ${qe(-5)}, rgba(0, 0, 0, 0.04) 0 ${qe(7)} ${qe(7)} ${qe(-5)}`,md:`0 ${qe(1)} ${qe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${qe(20)} ${qe(25)} ${qe(-5)}, rgba(0, 0, 0, 0.04) 0 ${qe(10)} ${qe(10)} ${qe(-5)}`,lg:`0 ${qe(1)} ${qe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${qe(28)} ${qe(23)} ${qe(-7)}, rgba(0, 0, 0, 0.04) 0 ${qe(12)} ${qe(12)} ${qe(-7)}`,xl:`0 ${qe(1)} ${qe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${qe(36)} ${qe(28)} ${qe(-7)}, rgba(0, 0, 0, 0.04) 0 ${qe(17)} ${qe(17)} ${qe(-7)}`},other:{},components:{}};function tpe(e){return e==="auto"||e==="dark"||e==="light"}function hrt({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return tpe(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&tpe(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const prt="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",npe="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function xz(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function rpe(e){if(!(e.primaryColor in e.colors))throw new Error(prt);if(typeof e.primaryShade=="object"&&(!xz(e.primaryShade.dark)||!xz(e.primaryShade.light)))throw new Error(npe);if(typeof e.primaryShade=="number"&&!xz(e.primaryShade))throw new Error(npe)}function mrt(e,t){var r;if(!t)return rpe(e),e;const n=PJ(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),rpe(n),n}const UJ=P.createContext(null),grt=()=>P.useContext(UJ)||jJ;function ko(){const e=P.useContext(UJ);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function k2e({theme:e,children:t,inherit:n=!0}){const r=grt(),i=P.useMemo(()=>mrt(n?r:jJ,e),[e,r,n]);return _.jsx(UJ.Provider,{value:i,children:t})}k2e.displayName="@mantine/core/MantineThemeProvider";function yrt(){const e=ko(),t=LJ(),n=rs(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=yR(e.breakpoints[i]),a=s?`${o-.1}px`:yL(o-.1),u=s?`${o}px`:yL(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return _.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function Sz(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function Tz(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function vrt(e,t){const n=Sz(e.variables),r=n?Tz(t,n):"",i=Sz(e.dark),s=i?Tz(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=Sz(e.light),a=o?Tz(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function wb({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&og({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function ipe(e,t){return wb({color:e.colors[e.primaryColor][bR(e,t)],theme:e,autoContrast:null})}function J3({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=bR(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:Vx(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:Vx(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:Vx(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=bR(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:Vx(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:Vx(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:Vx(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function brt(e){return Array.isArray(e)?e:Array(10).fill(e)}function wrt(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function Hx(e,t,n){rs(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const R2e=e=>{const t=bR(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:qe(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":ipe(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":ipe(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};Hx(r.variables,e.breakpoints,"breakpoint"),Hx(r.variables,e.spacing,"spacing"),Hx(r.variables,e.fontSizes,"font-size"),Hx(r.variables,e.lineHeights,"line-height"),Hx(r.variables,e.shadows,"shadow"),Hx(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),rs(e.colors).forEach(s=>{const o=e.colors[s];if(wrt(o)){Object.assign(r.light,J3({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,J3({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,J3({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,J3({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return rs(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function _rt({theme:e,generator:t}){const n=R2e(e),r=t==null?void 0:t(e);return r?PJ(n,r):n}const Cz=R2e(jJ);function Ert(e){const t={variables:{},light:{},dark:{}};return rs(e.variables).forEach(n=>{Cz.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),rs(e.light).forEach(n=>{Cz.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),rs(e.dark).forEach(n=>{Cz.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function xrt(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function N2e({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=ko(),r=LJ(),i=Znt(),s=_rt({theme:n,generator:i}),o=e===":root"&&t,a=o?Ert(s):s,u=vrt(a,e);return u?_.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":xrt(e)}`}}):null}N2e.displayName="@mantine/CssVariables";function Srt(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function qx(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function Trt({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=P.useRef(),[s,o]=P.useState(()=>e.get(t)),a=r||s,u=P.useCallback(c=>{r||(qx(c,n),o(c),e.set(c))},[e.set,a,r]),l=P.useCallback(()=>{o(t),qx(t,n),e.clear()},[e.clear,t]);return P.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),OE(()=>{qx(e.get(t),n)},[]),P.useEffect(()=>{var f;if(r)return qx(r,n),()=>{};r===void 0&&qx(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&qx(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function Crt({respectReducedMotion:e,getRootElement:t}){OE(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}Srt();function P2e({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=hrt(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=Trt({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return Crt({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),_.jsx(I2e.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:_.jsxs(k2e,{theme:e,children:[o&&_.jsx(N2e,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&_.jsx(yrt,{}),t]})})}P2e.displayName="@mantine/core/MantineProvider";function by({classNames:e,styles:t,props:n,stylesCtx:r}){const i=ko();return{resolvedClassNames:h8({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:wL({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const Art={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function Drt({theme:e,options:t,unstyled:n}){return co((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||Art[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function Irt({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return h8({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function spe({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return h8({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function krt({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function Rrt({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function Nrt({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function Prt({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=h8({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function Ort({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function Mrt({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return co(Drt({theme:e,options:t,unstyled:a||h}),Prt({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),Ort({options:t,classes:o,selector:r,unstyled:a}),spe({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),spe({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),Irt({selector:r,stylesCtx:f,options:t,props:c,theme:e}),krt({rootSelector:l,selector:r,className:u}),Rrt({selector:r,classes:o,unstyled:a||h}),d&&!h&&Nrt({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function $rt({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return wL({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function BW({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...BW({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function Frt(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...yb(n[r])}}),t),{})}function Lrt({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=Frt([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function Brt({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&$rt({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&wL({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&wL({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...Lrt({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?BW({style:u,theme:e}):null,...BW({style:r==null?void 0:r.style,theme:e})}}function jrt({props:e,stylesCtx:t,themeName:n}){var o;const r=ko(),i=(o=irt())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function $t({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=ko(),h=ert(),p=trt(),m=nrt(),g=(Array.isArray(e)?e:[e]).filter(w=>w),{withStylesTransform:y,getTransformedStyles:b}=jrt({props:n,stylesCtx:r,themeName:g});return(w,S)=>({className:Mrt({theme:d,options:S,themeName:g,selector:w,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:b([S==null?void 0:S.styles,l])}),style:Brt({theme:d,themeName:g,selector:w,options:S,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function S2(e,t){return typeof e=="boolean"?e:t.autoContrast}function Ue(e,t,n){var o;const r=ko(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...yb(n)}}function Az(e){return rs(e).reduce((t,n)=>e[n]!==void 0?`${t}${pnt(n)}:${e[n]};`:t,"").trim()}function Urt({selector:e,styles:t,media:n,container:r}){const i=t?Az(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${Az(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${Az(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function ME(e){const t=LJ();return _.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:Urt(e)}})}function $E(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:b,bd:w,bg:S,c:E,opacity:T,ff:C,fz:A,fw:I,lts:k,ta:N,lh:F,fs:M,tt:L,td:j,w:B,miw:z,maw:V,h:G,mih:$,mah:W,bgsz:K,bgp:q,bgr:Y,bga:Z,pos:ae,top:be,left:Se,bottom:we,right:Ce,inset:Le,display:ke,flex:Ze,hiddenFrom:Ke,visibleFrom:Ct,lightHidden:wt,darkHidden:Re,sx:He,...lt}=e;return{styleProps:yb({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:b,bd:w,bg:S,c:E,opacity:T,ff:C,fz:A,fw:I,lts:k,ta:N,lh:F,fs:M,tt:L,td:j,w:B,miw:z,maw:V,h:G,mih:$,mah:W,bgsz:K,bgp:q,bgr:Y,bga:Z,pos:ae,top:be,left:Se,bottom:we,right:Ce,inset:Le,display:ke,flex:Ze,hiddenFrom:Ke,visibleFrom:Ct,lightHidden:wt,darkHidden:Re,sx:He}),rest:lt}}const zrt={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function zJ(e,t){const n=og({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function Vrt(e,t){const n=og({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:zJ(e,t)}function Hrt(e,t){if(typeof e=="number")return qe(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${qe(n)}`;return r&&(s+=` ${r}`),brt.length>0&&(s+=` ${zJ(i.join(" "),t)}`),s.trim()}return e}const ope={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function qrt(e){return typeof e=="string"&&e in ope?ope[e]:e}const Wrt=["h1","h2","h3","h4","h5","h6"];function Grt(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&Wrt.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?qe(e):e}function Yrt(e){return e}const Krt=["h1","h2","h3","h4","h5","h6"];function Xrt(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&Krt.includes(e)?`var(--mantine-${e}-line-height)`:e}function Qrt(e){return typeof e=="number"?qe(e):e}function Jrt(e,t){if(typeof e=="number")return qe(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return qe(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const Dz={color:zJ,textColor:Vrt,fontSize:Grt,spacing:Jrt,identity:Yrt,size:Qrt,lineHeight:Xrt,fontFamily:qrt,border:Hrt};function ape(e){return e.replace("(min-width: ","").replace("em)","")}function Zrt({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(ape(i))-Number(ape(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function eit(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function tit(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function nit(e){return typeof e=="object"&&e!==null?rs(e).filter(t=>t!=="base"):[]}function rit(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function O2e({styleProps:e,data:t,theme:n}){return Zrt(rs(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=tit(e[i]);if(!eit(e[i]))return o.forEach(l=>{r.inlineStyles[l]=Dz[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=nit(e[i]);return o.forEach(l=>{a&&(r.styles[l]=Dz[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:Dz[s.type](rit(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function eP(){return`__m__-${P.useId().replace(/:/g,"")}`}function VJ(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...VJ(r,t)}),{}):typeof e=="function"?e(t):e??{}}function M2e(e){return e.startsWith("data-")?e:`data-${e}`}function iit(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[M2e(n)]=e[n]),t},{})}function $2e(e){return e?typeof e=="string"?{[M2e(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...$2e(n)}),{}):iit(e):null}function jW(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...jW(r,t)}),{}):typeof e=="function"?e(t):e??{}}function sit({theme:e,style:t,vars:n,styleProps:r}){const i=jW(t,e),s=jW(n,e);return{...i,...s,...r}}const F2e=P.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var A;const m=ko(),g=e||"div",{styleProps:y,rest:b}=$E(h),w=rrt(),S=(A=w==null?void 0:w())==null?void 0:A(y.sx),E=eP(),T=O2e({styleProps:y,theme:m,data:zrt}),C={ref:p,style:sit({theme:m,style:t,vars:n,styleProps:T.inlineStyles}),className:co(r,S,{[E]:T.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":v2e(o)?void 0:o||void 0,size:d,...$2e(s),...b};return _.jsxs(_.Fragment,{children:[T.hasResponsiveStyles&&_.jsx(ME,{selector:`.${E}`,styles:T.styles,media:T.media}),typeof f=="function"?f(C):_.jsx(g,{...C})]})});F2e.displayName="@mantine/core/Box";const Ne=F2e;function L2e(e){return e}function nt(e){const t=P.forwardRef(e);return t.extend=L2e,t}function ga(e){const t=P.forwardRef(e);return t.extend=L2e,t}const oit=P.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function ag(){return P.useContext(oit)}function ait(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Iz(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const pD=typeof window<"u"&&window.requestAnimationFrame;function uit({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=P.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=P.useState(r?{}:o),l=p=>{JN.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||ait(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}jm(()=>{typeof pD=="function"&&pD(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),pD(()=>{const p=Iz(i);c({...f(p),height:p})})}:()=>{const p=Iz(i);c({...f(p),willChange:"height",height:p}),pD(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=Iz(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:T2e(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const lit={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},p8=nt((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=Ue("Collapse",lit,e),c=ko(),f=f8(),h=(c.respectReducedMotion?f:!1)?0:i,p=uit({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?_.jsx(Ne,{...l,children:n}):null:_.jsx(Ne,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...VJ(o,c)},ref:t,...l}),children:n})});p8.displayName="@mantine/core/Collapse";const[cit,Gd]=ja("ScrollArea.Root component was not found in tree");function rC(e,t){const n=Hw(t);OE(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const fit=P.forwardRef((e,t)=>{const{style:n,...r}=e,i=Gd(),[s,o]=P.useState(0),[a,u]=P.useState(0),l=!!(s&&a);return rC(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),rC(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?_.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),dit=P.forwardRef((e,t)=>{const n=Gd(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?_.jsx(fit,{...e,ref:t}):null}),hit={scrollHideDelay:1e3,type:"hover"},B2e=P.forwardRef((e,t)=>{const n=Ue("ScrollAreaRoot",hit,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=P.useState(null),[l,c]=P.useState(null),[f,d]=P.useState(null),[h,p]=P.useState(null),[m,g]=P.useState(null),[y,b]=P.useState(0),[w,S]=P.useState(0),[E,T]=P.useState(!1),[C,A]=P.useState(!1),I=Io(t,k=>u(k));return _.jsx(cit,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:T,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:C,onScrollbarYEnabledChange:A,onCornerWidthChange:b,onCornerHeightChange:S},children:_.jsx(Ne,{...o,ref:I,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${w}px`}})})});B2e.displayName="@mantine/core/ScrollAreaRoot";function j2e(e,t){const n=e/t;return Number.isNaN(n)?0:n}function m8(e){const t=j2e(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function U2e(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function pit(e,[t,n]){return Math.min(n,Math.max(t,e))}function upe(e,t,n="ltr"){const r=m8(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=pit(e,u);return U2e([0,o],[0,a])(l)}function mit(e,t,n,r="ltr"){const i=m8(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return U2e([u,l],f)(e)}function z2e(e,t){return e>0&&e<t}function _L(e){return e?parseInt(e,10):0}function D_(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[git,V2e]=ja("ScrollAreaScrollbar was not found in tree"),H2e=P.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=Gd(),[h,p]=P.useState(null),m=Io(t,A=>p(A)),g=P.useRef(null),y=P.useRef(""),{viewport:b}=d,w=n.content-n.viewport,S=Hw(l),E=Hw(a),T=c8(c,10),C=A=>{if(g.current){const I=A.clientX-g.current.left,k=A.clientY-g.current.top;u({x:I,y:k})}};return P.useEffect(()=>{const A=I=>{const k=I.target;(h==null?void 0:h.contains(k))&&S(I,w)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[b,h,w,S]),P.useEffect(E,[n,E]),rC(h,T),rC(d.content,T),_.jsx(git,{value:{scrollbar:h,hasThumb:r,onThumbChange:Hw(i),onThumbPointerUp:Hw(s),onThumbPositionChange:E,onThumbPointerDown:Hw(o)},children:_.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:D_(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",C(A))}),onPointerMove:D_(e.onPointerMove,C),onPointerUp:D_(e.onPointerUp,A=>{const I=A.target;I.hasPointerCapture(A.pointerId)&&I.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),yit=P.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Gd(),[a,u]=P.useState(),l=P.useRef(null),c=Io(t,l,o.onScrollbarXChange);return P.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),_.jsx(H2e,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${m8(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),z2e(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:_L(a.paddingLeft),paddingEnd:_L(a.paddingRight)}})}})}),vit=P.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Gd(),[a,u]=P.useState(),l=P.useRef(null),c=Io(t,l,o.onScrollbarYChange);return P.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),_.jsx(H2e,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${m8(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),z2e(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:_L(a.paddingTop),paddingEnd:_L(a.paddingBottom)}})}})}),HJ=P.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=ag(),s=Gd(),o=P.useRef(null),a=P.useRef(0),[u,l]=P.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=j2e(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>mit(h,a.current,u,p);return n==="horizontal"?_.jsx(yit,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=upe(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?_.jsx(vit,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=upe(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),q2e=P.forwardRef((e,t)=>{const n=Gd(),{forceMount:r,...i}=e,[s,o]=P.useState(!1),a=e.orientation==="horizontal",u=c8(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return rC(n.viewport,u),rC(n.content,u),r||s?_.jsx(HJ,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),bit=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Gd(),[s,o]=P.useState(!1);return P.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?_.jsx(q2e,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),wit=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Gd(),s=e.orientation==="horizontal",[o,a]=P.useState("hidden"),u=c8(()=>a("idle"),100);return P.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),P.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?_.jsx(HJ,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:D_(e.onPointerEnter,()=>a("interacting")),onPointerLeave:D_(e.onPointerLeave,()=>a("idle"))}):null}),lpe=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Gd(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return P.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?_.jsx(bit,{...r,ref:t,forceMount:n}):i.type==="scroll"?_.jsx(wit,{...r,ref:t,forceMount:n}):i.type==="auto"?_.jsx(q2e,{...r,ref:t,forceMount:n}):i.type==="always"?_.jsx(HJ,{...r,ref:t}):null});function _it(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const Eit=P.forwardRef((e,t)=>{const{style:n,...r}=e,i=Gd(),s=V2e(),{onThumbPositionChange:o}=s,a=Io(t,c=>s.onThumbChange(c)),u=P.useRef(),l=c8(()=>{u.current&&(u.current(),u.current=void 0)},100);return P.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=_it(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),_.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:D_(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:D_(e.onPointerUp,s.onThumbPointerUp)})}),cpe=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=V2e();return n||i.hasThumb?_.jsx(Eit,{ref:t,...r}):null}),W2e=P.forwardRef(({children:e,style:t,...n},r)=>{const i=Gd(),s=Io(r,i.onViewportChange);return _.jsx(Ne,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:_.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});W2e.displayName="@mantine/core/ScrollAreaViewport";var qJ={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const G2e={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},xit=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":qe(t)}}),W0=nt((e,t)=>{const n=Ue("ScrollArea",G2e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...b}=n,[w,S]=P.useState(!1),E=$t({name:"ScrollArea",props:n,classes:qJ,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:xit});return _.jsxs(B2e,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...E("root"),...b,children:[_.jsx(W2e,{...d,...E("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:T=>{var C;(C=d==null?void 0:d.onScroll)==null||C.call(d,T),p==null||p({x:T.currentTarget.scrollLeft,y:T.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&_.jsx(lpe,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),children:_.jsx(cpe,{...E("thumb")})}),(y==="xy"||y==="y")&&_.jsx(lpe,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),children:_.jsx(cpe,{...E("thumb")})}),_.jsx(dit,{...E("corner"),"data-hovered":w||void 0,"data-hidden":c==="never"||void 0})]})});W0.displayName="@mantine/core/ScrollArea";const WJ=nt((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...b}=Ue("ScrollAreaAutosize",G2e,e);return _.jsx(Ne,{...b,ref:t,style:[{display:"flex",overflow:"auto"},g],children:_.jsx(Ne,{style:{display:"flex",flexDirection:"column",flex:1},children:_.jsx(W0,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});W0.classes=qJ;WJ.displayName="@mantine/core/ScrollAreaAutosize";WJ.classes=qJ;W0.Autosize=WJ;var Y2e={root:"m_87cf2631"};const Sit={__staticSelector:"UnstyledButton"},Vo=ga((e,t)=>{const n=Ue("UnstyledButton",Sit,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=$t({name:s,props:n,classes:Y2e,className:r,style:l,classNames:a,styles:u,unstyled:o});return _.jsx(Ne,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});Vo.classes=Y2e;Vo.displayName="@mantine/core/UnstyledButton";var K2e={root:"m_515a97f8"};const Tit={},GJ=nt((e,t)=>{const n=Ue("VisuallyHidden",Tit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=$t({name:"VisuallyHidden",classes:K2e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(Ne,{component:"span",ref:t,...c("root"),...l})});GJ.classes=K2e;GJ.displayName="@mantine/core/VisuallyHidden";var X2e={root:"m_1b7284a3"};const Cit={},Ait=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Wi(t),"--paper-shadow":MJ(n)}}),T2=ga((e,t)=>{const n=Ue("Paper",Cit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=$t({name:"Paper",props:n,classes:X2e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Ait});return _.jsx(Ne,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});T2.classes=X2e;T2.displayName="@mantine/core/Paper";function C2(e){return Q2e(e)?(e.nodeName||"").toLowerCase():"#document"}function Ic(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function wy(e){var t;return(t=(Q2e(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Q2e(e){return e instanceof Node||e instanceof Ic(e).Node}function Ps(e){return e instanceof Element||e instanceof Ic(e).Element}function Df(e){return e instanceof HTMLElement||e instanceof Ic(e).HTMLElement}function UW(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ic(e).ShadowRoot}function tP(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=$d(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Dit(e){return["table","td","th"].includes(C2(e))}function YJ(e){const t=KJ(),n=$d(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Iit(e){let t=G0(e);for(;Df(t)&&!I1(t);){if(YJ(t))return t;t=G0(t)}return null}function KJ(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function I1(e){return["html","body","#document"].includes(C2(e))}function $d(e){return Ic(e).getComputedStyle(e)}function g8(e){return Ps(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function G0(e){if(C2(e)==="html")return e;const t=e.assignedSlot||e.parentNode||UW(e)&&e.host||wy(e);return UW(t)?t.host:t}function J2e(e){const t=G0(e);return I1(t)?e.ownerDocument?e.ownerDocument.body:e.body:Df(t)&&tP(t)?t:J2e(t)}function I0(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=J2e(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Ic(i);return s?t.concat(o,o.visualViewport||[],tP(i)?i:[],o.frameElement&&n?I0(o.frameElement):[]):t.concat(i,I0(i,[],n))}function fpe(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function wR(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&UW(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Z2e(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function eAe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function kit(e){return Pit()?!1:!dpe()&&e.width===0&&e.height===0||dpe()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Rit(){return/apple/i.test(navigator.vendor)}function dpe(){const e=/android/i;return e.test(Z2e())||e.test(eAe())}function Nit(){return Z2e().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Pit(){return eAe().includes("jsdom/")}function zW(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function Oit(e){return"nativeEvent"in e}function Mit(e){return e.matches("html,body")}function l_(e){return(e==null?void 0:e.ownerDocument)||document}function kz(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function vS(e){return"composedPath"in e?e.composedPath()[0]:e.target}const $it="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Fit(e){return Df(e)&&e.matches($it)}const gf=Math.min,Fu=Math.max,EL=Math.round,Z3=Math.floor,k1=e=>({x:e,y:e}),Lit={left:"right",right:"left",bottom:"top",top:"bottom"},Bit={start:"end",end:"start"};function VW(e,t,n){return Fu(e,gf(t,n))}function Y0(e,t){return typeof e=="function"?e(t):e}function lp(e){return e.split("-")[0]}function A2(e){return e.split("-")[1]}function XJ(e){return e==="x"?"y":"x"}function QJ(e){return e==="y"?"height":"width"}function FE(e){return["top","bottom"].includes(lp(e))?"y":"x"}function JJ(e){return XJ(FE(e))}function jit(e,t,n){n===void 0&&(n=!1);const r=A2(e),i=JJ(e),s=QJ(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=xL(o)),[o,xL(o)]}function Uit(e){const t=xL(e);return[HW(e),t,HW(t)]}function HW(e){return e.replace(/start|end/g,t=>Bit[t])}function zit(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function Vit(e,t,n,r){const i=A2(e);let s=zit(lp(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(HW)))),s}function xL(e){return e.replace(/left|right|bottom|top/g,t=>Lit[t])}function Hit(e){return{top:0,right:0,bottom:0,left:0,...e}}function ZJ(e){return typeof e!="number"?Hit(e):{top:e,right:e,bottom:e,left:e}}function iC(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function hpe(e,t,n){let{reference:r,floating:i}=e;const s=FE(t),o=JJ(t),a=QJ(o),u=lp(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(A2(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const qit=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=hpe(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:b,y:w,data:S,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=b??c,f=w??f,h={...h,[g]:{...h[g],...S}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=hpe(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function eZ(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=Y0(t,e),p=ZJ(h),g=a[d?f==="floating"?"reference":"floating":f],y=iC(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),b=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),S=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},E=iC(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:w,strategy:u}):b);return{top:(y.top-E.top+p.top)/S.y,bottom:(E.bottom-y.bottom+p.bottom)/S.y,left:(y.left-E.left+p.left)/S.x,right:(E.right-y.right+p.right)/S.x}}const Wit=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=Y0(e,t)||{};if(l==null)return{};const f=ZJ(c),d={x:n,y:r},h=JJ(i),p=QJ(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",b=g?"bottom":"right",w=g?"clientHeight":"clientWidth",S=s.reference[p]+s.reference[h]-d[h]-s.floating[p],E=d[h]-s.reference[h],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let C=T?T[w]:0;(!C||!await(o.isElement==null?void 0:o.isElement(T)))&&(C=a.floating[w]||s.floating[p]);const A=S/2-E/2,I=C/2-m[p]/2-1,k=gf(f[y],I),N=gf(f[b],I),F=k,M=C-m[p]-N,L=C/2-m[p]/2+A,j=VW(F,L,M),B=!u.arrow&&A2(i)!=null&&L!==j&&s.reference[p]/2-(L<F?k:N)-m[p]/2<0,z=B?L<F?L-F:L-M:0;return{[h]:d[h]+z,data:{[h]:j,centerOffset:L-j-z,...B&&{alignmentOffset:z}},reset:B}}}),Git=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Y0(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=lp(i),b=lp(a)===a,w=await(u.isRTL==null?void 0:u.isRTL(l.floating)),S=d||(b||!m?[xL(a)]:Uit(a));!d&&p!=="none"&&S.push(...Vit(a,m,p,w));const E=[a,...S],T=await eZ(t,g),C=[];let A=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&C.push(T[y]),f){const F=jit(i,o,w);C.push(T[F[0]],T[F[1]])}if(A=[...A,{placement:i,overflows:C}],!C.every(F=>F<=0)){var I,k;const F=(((I=s.flip)==null?void 0:I.index)||0)+1,M=E[F];if(M)return{data:{index:F,overflows:A},reset:{placement:M}};let L=(k=A.filter(j=>j.overflows[0]<=0).sort((j,B)=>j.overflows[1]-B.overflows[1])[0])==null?void 0:k.placement;if(!L)switch(h){case"bestFit":{var N;const j=(N=A.map(B=>[B.placement,B.overflows.filter(z=>z>0).reduce((z,V)=>z+V,0)]).sort((B,z)=>B[1]-z[1])[0])==null?void 0:N[0];j&&(L=j);break}case"initialPlacement":L=a;break}if(i!==L)return{reset:{placement:L}}}return{}}}};function tAe(e){const t=gf(...e.map(s=>s.left)),n=gf(...e.map(s=>s.top)),r=Fu(...e.map(s=>s.right)),i=Fu(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function Yit(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>iC(tAe(i)))}const Kit=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=Y0(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=Yit(c),d=iC(tAe(c)),h=ZJ(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(FE(n)==="y"){const k=f[0],N=f[f.length-1],F=lp(n)==="top",M=k.top,L=N.bottom,j=F?k.left:N.left,B=F?k.right:N.right,z=B-j,V=L-M;return{top:M,bottom:L,left:j,right:B,width:z,height:V,x:j,y:M}}const g=lp(n)==="left",y=Fu(...f.map(k=>k.right)),b=gf(...f.map(k=>k.left)),w=f.filter(k=>g?k.left===b:k.right===y),S=w[0].top,E=w[w.length-1].bottom,T=b,C=y,A=C-T,I=E-S;return{top:S,bottom:E,left:T,right:C,width:A,height:I,x:T,y:S}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function Xit(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=lp(n),a=A2(n),u=FE(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=Y0(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const Qit=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await Xit(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},Jit=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:b}=g;return{x:y,y:b}}},...u}=Y0(e,t),l={x:n,y:r},c=await eZ(t,u),f=FE(lp(i)),d=XJ(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",b=h+c[g],w=h-c[y];h=VW(b,h,w)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",b=p+c[g],w=p-c[y];p=VW(b,p,w)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},Zit=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=Y0(e,t),c={x:n,y:r},f=FE(i),d=XJ(f);let h=c[d],p=c[f];const m=Y0(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const w=d==="y"?"height":"width",S=s.reference[d]-s.floating[w]+g.mainAxis,E=s.reference[d]+s.reference[w]-g.mainAxis;h<S?h=S:h>E&&(h=E)}if(l){var y,b;const w=d==="y"?"width":"height",S=["top","left"].includes(lp(i)),E=s.reference[f]-s.floating[w]+(S&&((y=o.offset)==null?void 0:y[f])||0)+(S?0:g.crossAxis),T=s.reference[f]+s.reference[w]+(S?0:((b=o.offset)==null?void 0:b[f])||0)-(S?g.crossAxis:0);p<E?p=E:p>T&&(p=T)}return{[d]:h,[f]:p}}}},est=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=Y0(e,t),u=await eZ(t,a),l=lp(n),c=A2(n),f=FE(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,b=gf(h-u[p],g),w=gf(d-u[m],y),S=!t.middlewareData.shift;let E=b,T=w;if(f?T=c||S?gf(w,y):y:E=c||S?gf(b,g):g,S&&!c){const A=Fu(u.left,0),I=Fu(u.right,0),k=Fu(u.top,0),N=Fu(u.bottom,0);f?T=d-2*(A!==0||I!==0?A+I:Fu(u.left,u.right)):E=h-2*(k!==0||N!==0?k+N:Fu(u.top,u.bottom))}await o({...t,availableWidth:T,availableHeight:E});const C=await i.getDimensions(s.floating);return d!==C.width||h!==C.height?{reset:{rects:!0}}:{}}}};function nAe(e){const t=$d(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Df(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=EL(n)!==s||EL(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function tZ(e){return Ps(e)?e:e.contextElement}function pT(e){const t=tZ(e);if(!Df(t))return k1(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=nAe(t);let o=(s?EL(n.width):n.width)/r,a=(s?EL(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const tst=k1(0);function rAe(e){const t=Ic(e);return!KJ()||!t.visualViewport?tst:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function nst(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ic(e)?!1:t}function W_(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=tZ(e);let o=k1(1);t&&(r?Ps(r)&&(o=pT(r)):o=pT(e));const a=nst(s,n,r)?rAe(s):k1(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Ic(s),h=r&&Ps(r)?Ic(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=pT(m),y=m.getBoundingClientRect(),b=$d(m),w=y.left+(m.clientLeft+parseFloat(b.paddingLeft))*g.x,S=y.top+(m.clientTop+parseFloat(b.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=w,l+=S,p=Ic(m),m=p.frameElement}}return iC({width:c,height:f,x:u,y:l})}const rst=[":popover-open",":modal"];function nZ(e){return rst.some(t=>{try{return e.matches(t)}catch{return!1}})}function ist(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=wy(r),a=t?nZ(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=k1(1);const c=k1(0),f=Df(r);if((f||!f&&!s)&&((C2(r)!=="body"||tP(o))&&(u=g8(r)),Df(r))){const d=W_(r);l=pT(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function sst(e){return Array.from(e.getClientRects())}function iAe(e){return W_(wy(e)).left+g8(e).scrollLeft}function ost(e){const t=wy(e),n=g8(e),r=e.ownerDocument.body,i=Fu(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Fu(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+iAe(e);const a=-n.scrollTop;return $d(r).direction==="rtl"&&(o+=Fu(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function ast(e,t){const n=Ic(e),r=wy(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=KJ();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function ust(e,t){const n=W_(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Df(e)?pT(e):k1(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function ppe(e,t,n){let r;if(t==="viewport")r=ast(e,n);else if(t==="document")r=ost(wy(e));else if(Ps(t))r=ust(t,n);else{const i=rAe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return iC(r)}function sAe(e,t){const n=G0(e);return n===t||!Ps(n)||I1(n)?!1:$d(n).position==="fixed"||sAe(n,t)}function lst(e,t){const n=t.get(e);if(n)return n;let r=I0(e,[],!1).filter(a=>Ps(a)&&C2(a)!=="body"),i=null;const s=$d(e).position==="fixed";let o=s?G0(e):e;for(;Ps(o)&&!I1(o);){const a=$d(o),u=YJ(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||tP(o)&&!u&&sAe(e,o))?r=r.filter(c=>c!==o):i=a,o=G0(o)}return t.set(e,r),r}function cst(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?nZ(t)?[]:lst(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=ppe(t,c,i);return l.top=Fu(f.top,l.top),l.right=gf(f.right,l.right),l.bottom=gf(f.bottom,l.bottom),l.left=Fu(f.left,l.left),l},ppe(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function fst(e){const{width:t,height:n}=nAe(e);return{width:t,height:n}}function dst(e,t,n){const r=Df(t),i=wy(t),s=n==="fixed",o=W_(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=k1(0);if(r||!r&&!s)if((C2(t)!=="body"||tP(i))&&(a=g8(t)),r){const f=W_(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=iAe(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function Rz(e){return $d(e).position==="static"}function mpe(e,t){return!Df(e)||$d(e).position==="fixed"?null:t?t(e):e.offsetParent}function oAe(e,t){const n=Ic(e);if(nZ(e))return n;if(!Df(e)){let i=G0(e);for(;i&&!I1(i);){if(Ps(i)&&!Rz(i))return i;i=G0(i)}return n}let r=mpe(e,t);for(;r&&Dit(r)&&Rz(r);)r=mpe(r,t);return r&&I1(r)&&Rz(r)&&!YJ(r)?n:r||Iit(e)||n}const hst=async function(e){const t=this.getOffsetParent||oAe,n=this.getDimensions,r=await n(e.floating);return{reference:dst(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function pst(e){return $d(e).direction==="rtl"}const mst={convertOffsetParentRelativeRectToViewportRelativeRect:ist,getDocumentElement:wy,getClippingRect:cst,getOffsetParent:oAe,getElementRects:hst,getClientRects:sst,getDimensions:fst,getScale:pT,isElement:Ps,isRTL:pst};function gst(e,t){let n=null,r;const i=wy(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=Z3(c),p=Z3(i.clientWidth-(l+f)),m=Z3(i.clientHeight-(c+d)),g=Z3(l),b={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:Fu(0,gf(1,u))||1};let w=!0;function S(E){const T=E[0].intersectionRatio;if(T!==u){if(!w)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(S,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(S,b)}n.observe(e)}return o(!0),s}function yst(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=tZ(e),c=i||s?[...l?I0(l):[],...I0(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?gst(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[b]=y;b&&b.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?W_(e):null;u&&g();function g(){const y=W_(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(b=>{i&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const vst=Qit,bst=Jit,wst=Git,_st=est,gpe=Wit,Est=Kit,xst=Zit,Sst=(e,t,n)=>{const r=new Map,i={platform:mst,...n},s={...i.platform,_c:r};return qit(e,t,{...i,platform:s})};var j$=typeof document<"u"?P.useLayoutEffect:P.useEffect;function SL(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!SL(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!SL(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function aAe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ype(e,t){const n=aAe(e);return Math.round(t*n)/n}function vpe(e){const t=P.useRef(e);return j$(()=>{t.current=e}),t}function Tst(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=P.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=P.useState(r);SL(d,r)||h(r);const[p,m]=P.useState(null),[g,y]=P.useState(null),b=P.useCallback(z=>{z!==T.current&&(T.current=z,m(z))},[]),w=P.useCallback(z=>{z!==C.current&&(C.current=z,y(z))},[]),S=s||p,E=o||g,T=P.useRef(null),C=P.useRef(null),A=P.useRef(c),I=u!=null,k=vpe(u),N=vpe(i),F=P.useCallback(()=>{if(!T.current||!C.current)return;const z={placement:t,strategy:n,middleware:d};N.current&&(z.platform=N.current),Sst(T.current,C.current,z).then(V=>{const G={...V,isPositioned:!0};M.current&&!SL(A.current,G)&&(A.current=G,JN.flushSync(()=>{f(G)}))})},[d,t,n,N]);j$(()=>{l===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(z=>({...z,isPositioned:!1})))},[l]);const M=P.useRef(!1);j$(()=>(M.current=!0,()=>{M.current=!1}),[]),j$(()=>{if(S&&(T.current=S),E&&(C.current=E),S&&E){if(k.current)return k.current(S,E,F);F()}},[S,E,F,k,I]);const L=P.useMemo(()=>({reference:T,floating:C,setReference:b,setFloating:w}),[b,w]),j=P.useMemo(()=>({reference:S,floating:E}),[S,E]),B=P.useMemo(()=>{const z={position:n,left:0,top:0};if(!j.floating)return z;const V=ype(j.floating,c.x),G=ype(j.floating,c.y);return a?{...z,transform:"translate("+V+"px, "+G+"px)",...aAe(j.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:V,top:G}},[n,a,j.floating,c.x,c.y]);return P.useMemo(()=>({...c,update:F,refs:L,elements:j,floatingStyles:B}),[c,F,L,j,B])}const Cst=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?gpe({element:r.current,padding:i}).fn(n):{}:r?gpe({element:r,padding:i}).fn(n):{}}}},uAe=(e,t)=>({...vst(e),options:[e,t]}),rZ=(e,t)=>({...bst(e),options:[e,t]}),bpe=(e,t)=>({...xst(e),options:[e,t]}),qW=(e,t)=>({...wst(e),options:[e,t]}),Ast=(e,t)=>({..._st(e),options:[e,t]}),WW=(e,t)=>({...Est(e),options:[e,t]}),lAe=(e,t)=>({...Cst(e),options:[e,t]}),cAe={...WF},Dst=cAe.useInsertionEffect,Ist=Dst||(e=>e());function kv(e){const t=P.useRef(()=>{});return Ist(()=>{t.current=e}),P.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Tm=typeof document<"u"?P.useLayoutEffect:P.useEffect;let wpe=!1,kst=0;const _pe=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+kst++;function Rst(){const[e,t]=P.useState(()=>wpe?_pe():void 0);return Tm(()=>{e==null&&t(_pe())},[]),P.useEffect(()=>{wpe=!0},[]),e}const Nst=cAe.useId,fAe=Nst||Rst;function Pst(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const Ost=P.createContext(null),Mst=P.createContext(null),iZ=()=>{var e;return((e=P.useContext(Ost))==null?void 0:e.id)||null},sZ=()=>P.useContext(Mst);function oZ(e){return"data-floating-ui-"+e}function Epe(e){const t=P.useRef(e);return Tm(()=>{t.current=e}),t}const xpe=oZ("safe-polygon");function U$(e,t,n){return n&&!zW(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function $st(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=sZ(),m=iZ(),g=Epe(c),y=Epe(l),b=P.useRef(),w=P.useRef(-1),S=P.useRef(),E=P.useRef(-1),T=P.useRef(!0),C=P.useRef(!1),A=P.useRef(()=>{}),I=P.useCallback(()=>{var M;const L=(M=i.current.openEvent)==null?void 0:M.type;return(L==null?void 0:L.includes("mouse"))&&L!=="mousedown"},[i]);P.useEffect(()=>{if(!u)return;function M(L){let{open:j}=L;j||(clearTimeout(w.current),clearTimeout(E.current),T.current=!0)}return s.on("openchange",M),()=>{s.off("openchange",M)}},[u,s]),P.useEffect(()=>{if(!u||!g.current||!n)return;function M(j){I()&&r(!1,j,"hover")}const L=l_(a).documentElement;return L.addEventListener("mouseleave",M),()=>{L.removeEventListener("mouseleave",M)}},[a,n,r,u,g,I]);const k=P.useCallback(function(M,L,j){L===void 0&&(L=!0),j===void 0&&(j="hover");const B=U$(y.current,"close",b.current);B&&!S.current?(clearTimeout(w.current),w.current=window.setTimeout(()=>r(!1,M,j),B)):L&&(clearTimeout(w.current),r(!1,M,j))},[y,r]),N=kv(()=>{A.current(),S.current=void 0}),F=kv(()=>{if(C.current){const M=l_(a).body;M.style.pointerEvents="",M.removeAttribute(xpe),C.current=!1}});return P.useEffect(()=>{if(!u)return;function M(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function L(z){if(clearTimeout(w.current),T.current=!1,f&&!zW(b.current)||d>0&&!U$(y.current,"open"))return;const V=U$(y.current,"open",b.current);V?w.current=window.setTimeout(()=>{r(!0,z,"hover")},V):r(!0,z,"hover")}function j(z){if(M())return;A.current();const V=l_(a);if(clearTimeout(E.current),g.current&&i.current.floatingContext){n||clearTimeout(w.current),S.current=g.current({...i.current.floatingContext,tree:p,x:z.clientX,y:z.clientY,onClose(){F(),N(),k(z,!0,"safe-polygon")}});const $=S.current;V.addEventListener("mousemove",$),A.current=()=>{V.removeEventListener("mousemove",$)};return}(b.current==="touch"?!wR(a,z.relatedTarget):!0)&&k(z)}function B(z){M()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:z.clientX,y:z.clientY,onClose(){F(),N(),k(z)}})(z))}if(Ps(o)){const z=o;return n&&z.addEventListener("mouseleave",B),a==null||a.addEventListener("mouseleave",B),h&&z.addEventListener("mousemove",L,{once:!0}),z.addEventListener("mouseenter",L),z.addEventListener("mouseleave",j),()=>{n&&z.removeEventListener("mouseleave",B),a==null||a.removeEventListener("mouseleave",B),h&&z.removeEventListener("mousemove",L),z.removeEventListener("mouseenter",L),z.removeEventListener("mouseleave",j)}}},[o,a,u,e,f,d,h,k,N,F,r,n,p,y,g,i]),Tm(()=>{var M;if(u&&n&&(M=g.current)!=null&&M.__options.blockPointerEvents&&I()){const j=l_(a).body;if(j.setAttribute(xpe,""),j.style.pointerEvents="none",C.current=!0,Ps(o)&&a){var L;const B=o,z=p==null||(L=p.nodesRef.current.find(V=>V.id===m))==null||(L=L.context)==null?void 0:L.elements.floating;return z&&(z.style.pointerEvents=""),B.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{B.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,I]),Tm(()=>{n||(b.current=void 0,N(),F())},[n,N,F]),P.useEffect(()=>()=>{N(),clearTimeout(w.current),clearTimeout(E.current),F()},[u,o,N,F]),P.useMemo(()=>{if(!u)return{};function M(L){b.current=L.pointerType}return{reference:{onPointerDown:M,onPointerEnter:M,onMouseMove(L){function j(){T.current||r(!0,L.nativeEvent,"hover")}f&&!zW(b.current)||n||d===0||(clearTimeout(E.current),b.current==="touch"?j():E.current=window.setTimeout(j,d))}},floating:{onMouseEnter(){clearTimeout(w.current)},onMouseLeave(L){k(L.nativeEvent,!1)}}}},[u,f,n,d,r,k])}const GW=()=>{},dAe=P.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:GW,setState:GW,isInstantPhase:!1}),hAe=()=>P.useContext(dAe);function Fst(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=P.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=P.useRef(null),a=P.useCallback(u=>{s({currentId:u})},[]);return Tm(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),P.createElement(dAe.Provider,{value:P.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function Lst(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=hAe(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return Tm(()=>{u&&(f({delay:{open:1,close:U$(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),Tm(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),Tm(()=>{l===GW||!n||l(o)},[n,l,o]),a}function Nz(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const Bst={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},jst={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Spe=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function Ust(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=sZ(),b=kv(typeof c=="function"?c:()=>!1),w=typeof c=="function"?b:c,S=P.useRef(!1),E=P.useRef(!1),{escapeKey:T,outsidePress:C}=Spe(m),{escapeKey:A,outsidePress:I}=Spe(g),k=kv(L=>{var j;if(!n||!u||!l||L.key!=="Escape")return;const B=(j=a.current.floatingContext)==null?void 0:j.nodeId,z=y?Nz(y.nodesRef.current,B):[];if(!T&&(L.stopPropagation(),z.length>0)){let V=!0;if(z.forEach(G=>{var $;if(($=G.context)!=null&&$.open&&!G.context.dataRef.current.__escapeKeyBubbles){V=!1;return}}),!V)return}r(!1,Oit(L)?L.nativeEvent:L,"escape-key")}),N=kv(L=>{var j;const B=()=>{var z;k(L),(z=vS(L))==null||z.removeEventListener("keydown",B)};(j=vS(L))==null||j.addEventListener("keydown",B)}),F=kv(L=>{var j;const B=S.current;S.current=!1;const z=E.current;if(E.current=!1,f==="click"&&z||B||typeof w=="function"&&!w(L))return;const V=vS(L),G="["+oZ("inert")+"]",$=l_(o).querySelectorAll(G);let W=Ps(V)?V:null;for(;W&&!I1(W);){const Z=G0(W);if(I1(Z)||!Ps(Z))break;W=Z}if($.length&&Ps(V)&&!Mit(V)&&!wR(V,o)&&Array.from($).every(Z=>!wR(W,Z)))return;if(Df(V)&&o){const Z=V.clientWidth>0&&V.scrollWidth>V.clientWidth,ae=V.clientHeight>0&&V.scrollHeight>V.clientHeight;let be=ae&&L.offsetX>V.clientWidth;if(ae&&$d(V).direction==="rtl"&&(be=L.offsetX<=V.offsetWidth-V.clientWidth),be||Z&&L.offsetY>V.clientHeight)return}const K=(j=a.current.floatingContext)==null?void 0:j.nodeId,q=y&&Nz(y.nodesRef.current,K).some(Z=>{var ae;return kz(L,(ae=Z.context)==null?void 0:ae.elements.floating)});if(kz(L,o)||kz(L,s)||q)return;const Y=y?Nz(y.nodesRef.current,K):[];if(Y.length>0){let Z=!0;if(Y.forEach(ae=>{var be;if((be=ae.context)!=null&&be.open&&!ae.context.dataRef.current.__outsidePressBubbles){Z=!1;return}}),!Z)return}r(!1,L,"outside-press")}),M=kv(L=>{var j;const B=()=>{var z;F(L),(z=vS(L))==null||z.removeEventListener(f,B)};(j=vS(L))==null||j.addEventListener(f,B)});return P.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=T,a.current.__outsidePressBubbles=C;function L(z){r(!1,z,"ancestor-scroll")}const j=l_(o);l&&j.addEventListener("keydown",A?N:k,A),w&&j.addEventListener(f,I?M:F,I);let B=[];return p&&(Ps(s)&&(B=I0(s)),Ps(o)&&(B=B.concat(I0(o))),!Ps(i)&&i&&i.contextElement&&(B=B.concat(I0(i.contextElement)))),B=B.filter(z=>{var V;return z!==((V=j.defaultView)==null?void 0:V.visualViewport)}),B.forEach(z=>{z.addEventListener("scroll",L,{passive:!0})}),()=>{l&&j.removeEventListener("keydown",A?N:k,A),w&&j.removeEventListener(f,I?M:F,I),B.forEach(z=>{z.removeEventListener("scroll",L)})}},[a,o,s,i,l,w,f,n,r,p,u,T,C,k,A,N,F,I,M]),P.useEffect(()=>{S.current=!1},[w,f]),P.useMemo(()=>u?{reference:{onKeyDown:k,[Bst[h]]:L=>{d&&r(!1,L.nativeEvent,"reference-press")}},floating:{onKeyDown:k,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[jst[f]]:()=>{S.current=!0}}}:{},[u,d,f,h,r,k])}function zst(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=fAe(),s=P.useRef({}),[o]=P.useState(()=>Pst()),a=iZ()!=null,[u,l]=P.useState(r.reference),c=kv((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=P.useMemo(()=>({setPositionReference:l}),[]),d=P.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return P.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function aZ(e){e===void 0&&(e={});const{nodeId:t}=e,n=zst({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=P.useState(null),[a,u]=P.useState(null),c=(i==null?void 0:i.reference)||s,f=P.useRef(null),d=sZ();Tm(()=>{c&&(f.current=c)},[c]);const h=Tst({...e,elements:{...i,...a&&{reference:a}}}),p=P.useCallback(w=>{const S=Ps(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;u(S),h.refs.setReference(S)},[h.refs]),m=P.useCallback(w=>{(Ps(w)||w===null)&&(f.current=w,o(w)),(Ps(h.refs.reference.current)||h.refs.reference.current===null||w!==null&&!Ps(w))&&h.refs.setReference(w)},[h.refs]),g=P.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=P.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),b=P.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return Tm(()=>{r.dataRef.current.floatingContext=b;const w=d==null?void 0:d.nodesRef.current.find(S=>S.id===t);w&&(w.context=b)}),P.useMemo(()=>({...h,context:b,refs:g,elements:y}),[h,g,y,b])}function Vst(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=P.useRef(!1),c=P.useRef(),f=P.useRef(!0);return P.useEffect(()=>{if(!a)return;const d=Ic(o);function h(){!n&&Df(o)&&o===fpe(l_(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),P.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),P.useEffect(()=>()=>{clearTimeout(c.current)},[]),P.useMemo(()=>a?{reference:{onPointerDown(d){kit(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=vS(d.nativeEvent);if(u&&Ps(h))try{if(Rit()&&Nit())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!Fit(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=Ps(h)&&h.hasAttribute(oZ("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=fpe(o?o.ownerDocument:document);!h&&g===o||wR((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||wR(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const Tpe="active",Cpe="selected";function Pz(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Tpe]:o,[Cpe]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Tpe,Cpe].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function Hst(e){e===void 0&&(e=[]);const t=e,n=P.useCallback(s=>Pz(s,e,"reference"),t),r=P.useCallback(s=>Pz(s,e,"floating"),t),i=P.useCallback(s=>Pz(s,e,"item"),e.map(s=>s==null?void 0:s.item));return P.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const qst=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Wst(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=qst.get(o))!=null?n:o,u=fAe(),c=iZ()!=null;return P.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function pAe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Ape(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Dpe(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const Gst={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Yst({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:qe(t),height:qe(t),transform:"rotate(45deg)",position:"absolute",[Gst[u]]:qe(r)},f=qe(-t/2);return u==="left"?{...c,...Ape(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...Ape(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...Dpe(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...Dpe(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const uZ=P.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=ag();return s?_.jsx("div",{...l,ref:c,style:{...u,...Yst({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});uZ.displayName="@mantine/core/FloatingArrow";const[Kst,mAe]=ja("Popover component was not found in the tree");function y8({children:e,active:t=!0,refProp:n="ref"}){const r=Ont(t),i=Io(r,e==null?void 0:e.ref);return vb(e)?P.cloneElement(e,{[n]:i}):e}function gAe(e){return _.jsx(GJ,{tabIndex:-1,"data-autofocus":!0,...e})}y8.displayName="@mantine/core/FocusTrap";gAe.displayName="@mantine/core/FocusTrapInitialFocus";y8.InitialFocus=gAe;function Xst(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const Qst={},yAe=P.forwardRef((e,t)=>{const{children:n,target:r,...i}=Ue("Portal",Qst,e),[s,o]=P.useState(!1),a=P.useRef(null);return OE(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:Xst(i),FJ(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:JN.createPortal(_.jsx(_.Fragment,{children:n}),a.current)});yAe.displayName="@mantine/core/Portal";function D2({withinPortal:e=!0,children:t,...n}){return e?_.jsx(yAe,{...n,children:t}):_.jsx(_.Fragment,{children:t})}D2.displayName="@mantine/core/OptionalPortal";const mD=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${qe(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),eM={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${qe(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${qe(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${qe(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${qe(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${qe(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${qe(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${qe(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${qe(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...mD("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...mD("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...mD("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...mD("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...mD("top"),common:{transformOrigin:"top right"}}},Ipe={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function Jst({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in eM?{transitionProperty:eM[e].transitionProperty,...i,...eM[e].common,...eM[e][Ipe[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Ipe[t]]}}function Zst({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=ko(),l=f8(),c=u.respectReducedMotion?l:!1,[f,d]=P.useState(c?0:e),[h,p]=P.useState(r?"entered":"exited"),m=P.useRef(-1),g=P.useRef(-1),y=b=>{const w=b?i:s,S=b?o:a;window.clearTimeout(m.current);const E=c?0:b?e:t;d(E),E===0?(typeof w=="function"&&w(),typeof S=="function"&&S(),p(b?"entered":"exited")):g.current=requestAnimationFrame(()=>{cI.flushSync(()=>{p(b?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof w=="function"&&w(),p(b?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof S=="function"&&S(),p(b?"entered":"exited")},E)})})};return jm(()=>{y(r)},[r]),P.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function _y({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=Zst({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?_.jsx(_.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:_.jsx(_.Fragment,{children:s(Jst({transition:t,duration:f,state:d,timingFunction:h}))})}_y.displayName="@mantine/core/Transition";var vAe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const eot={},lZ=nt((e,t)=>{var g,y,b,w;const n=Ue("PopoverDropdown",eot,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=mAe(),h=w2e({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=Io(t,d.floating);return d.disabled?null:_.jsx(D2,{...d.portalProps,withinPortal:d.withinPortal,children:_.jsx(_y,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((b=d.transitionProps)==null?void 0:b.exitDuration)=="number"?d.transitionProps.exitDuration:(w=d.transitionProps)==null?void 0:w.duration,children:S=>_.jsx(y8,{active:d.trapFocus,children:_.jsxs(Ne,{...p,...f,variant:u,ref:m,onKeyDownCapture:_nt(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...S,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:qe(d.width)},i]}),children:[o,_.jsx(uZ,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});lZ.classes=vAe;lZ.displayName="@mantine/core/PopoverDropdown";const tot={refProp:"ref",popupType:"dialog"},bAe=nt((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=Ue("PopoverTarget",tot,e);if(!vb(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=mAe(),u=Io(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return P.cloneElement(n,{...o,...l,...a.targetProps,className:co(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});bAe.displayName="@mantine/core/PopoverTarget";function wAe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=P.useState(0);P.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return yst(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),jm(()=>{t.update()},r),jm(()=>{s(o=>o+1)},[e])}function not(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function rot(e,t){const n=not(e.middlewares),r=[uAe(e.offset)];return n.shift&&r.push(rZ(typeof n.shift=="boolean"?{limiter:bpe(),padding:5}:{limiter:bpe(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?qW():qW(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?WW():WW(n.inline)),r.push(lAe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(Ast({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function iot(e){const[t,n]=Ho({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=aZ({strategy:e.strategy,placement:e.position,middleware:rot(e,()=>s)});return wAe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),jm(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),jm(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const sot={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:qf("popover"),__staticSelector:"Popover",width:"max-content"},oot=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Wi(t),"--popover-shadow":MJ(n)}});function au(e){var Re,He,lt,St,Vt,ht;const t=Ue("Popover",sot,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:b,closeOnClickOutside:w,withinPortal:S,portalProps:E,closeOnEscape:T,clickOutsideEvents:C,trapFocus:A,onClose:I,onOpen:k,onChange:N,zIndex:F,radius:M,shadow:L,id:j,defaultOpened:B,__staticSelector:z,withRoles:V,disabled:G,returnFocus:$,variant:W,keepMounted:K,vars:q,floatingStrategy:Y,...Z}=t,ae=$t({name:z,props:t,classes:vAe,classNames:y,styles:b,unstyled:g,rootSelector:"dropdown",vars:q,varsResolver:oot}),be=P.useRef(null),[Se,we]=P.useState(null),[Ce,Le]=P.useState(null),{dir:ke}=ag(),Ze=nl(j),Ke=iot({middlewares:c,width:l,position:pAe(ke,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:be,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:B,onChange:N,onOpen:k,onClose:I,strategy:Y});Snt(()=>w&&Ke.onClose(),C,[Se,Ce]);const Ct=P.useCallback(Q=>{we(Q),Ke.floating.refs.setReference(Q)},[Ke.floating.refs.setReference]),wt=P.useCallback(Q=>{Le(Q),Ke.floating.refs.setFloating(Q)},[Ke.floating.refs.setFloating]);return _.jsx(Kst,{value:{returnFocus:$,disabled:G,controlled:Ke.controlled,reference:Ct,floating:wt,x:Ke.floating.x,y:Ke.floating.y,arrowX:(lt=(He=(Re=Ke.floating)==null?void 0:Re.middlewareData)==null?void 0:He.arrow)==null?void 0:lt.x,arrowY:(ht=(Vt=(St=Ke.floating)==null?void 0:St.middlewareData)==null?void 0:Vt.arrow)==null?void 0:ht.y,opened:Ke.opened,arrowRef:be,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ke.floating.placement,trapFocus:A,withinPortal:S,portalProps:E,zIndex:F,radius:M,shadow:L,closeOnEscape:T,onClose:Ke.onClose,onToggle:Ke.onToggle,getTargetId:()=>`${Ze}-target`,getDropdownId:()=>`${Ze}-dropdown`,withRoles:V,targetProps:Z,__staticSelector:z,classNames:y,styles:b,unstyled:g,variant:W,keepMounted:K,getStyles:ae},children:n})}au.Target=bAe;au.Dropdown=lZ;au.displayName="@mantine/core/Popover";au.extend=e=>e;var Vh={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const aot=P.forwardRef(({className:e,...t},n)=>_.jsxs(Ne,{component:"span",className:co(Vh.barsLoader,e),...t,ref:n,children:[_.jsx("span",{className:Vh.bar}),_.jsx("span",{className:Vh.bar}),_.jsx("span",{className:Vh.bar})]})),uot=P.forwardRef(({className:e,...t},n)=>_.jsxs(Ne,{component:"span",className:co(Vh.dotsLoader,e),...t,ref:n,children:[_.jsx("span",{className:Vh.dot}),_.jsx("span",{className:Vh.dot}),_.jsx("span",{className:Vh.dot})]})),lot=P.forwardRef(({className:e,...t},n)=>_.jsx(Ne,{component:"span",className:co(Vh.ovalLoader,e),...t,ref:n})),_Ae={bars:aot,oval:lot,dots:uot},cot={loaders:_Ae,type:"oval"},fot=(e,{size:t,color:n})=>({root:{"--loader-size":Vn(t,"loader-size"),"--loader-color":n?Bi(n,e):void 0}}),Yd=nt((e,t)=>{const n=Ue("Loader",cot,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=$t({name:"Loader",props:n,classes:Vh,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:fot});return p?_.jsx(Ne,{...g("root"),ref:t,...m,children:p}):_.jsx(Ne,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});Yd.defaultLoaders=_Ae;Yd.classes=Vh;Yd.displayName="@mantine/core/Loader";var v8={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const kpe={orientation:"horizontal"},dot=(e,{borderWidth:t})=>({group:{"--ai-border-width":qe(t)}}),cZ=nt((e,t)=>{const n=Ue("ActionIconGroup",kpe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Ue("ActionIconGroup",kpe,e),p=$t({name:"ActionIconGroup",props:n,classes:v8,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:dot,rootSelector:"group"});return _.jsx(Ne,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});cZ.classes=v8;cZ.displayName="@mantine/core/ActionIconGroup";const hot={},pot=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":Vn(t,"ai-size"),"--ai-radius":n===void 0?void 0:Wi(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},LE=ga((e,t)=>{const n=Ue("ActionIcon",hot,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:b,"data-disabled":w,autoContrast:S,mod:E,...T}=n,C=$t({name:["ActionIcon",p],props:n,className:r,style:u,classes:v8,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:pot});return _.jsxs(Vo,{...C("root",{active:!b&&!l&&!w}),...T,unstyled:i,variant:s,size:f,disabled:b||l,ref:t,mod:[{loading:l,disabled:b||w},E],children:[_.jsx(_y,{mounted:!!l,transition:"slide-down",duration:150,children:A=>_.jsx(Ne,{component:"span",...C("loader",{style:A}),"aria-hidden":!0,children:_.jsx(Yd,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),_.jsx(Ne,{component:"span",mod:{loading:l},...C("icon"),children:y})]})});LE.classes=v8;LE.displayName="@mantine/core/ActionIcon";LE.Group=cZ;const EAe=P.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>_.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:_.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));EAe.displayName="@mantine/core/CloseIcon";var xAe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const mot={variant:"subtle"},got=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":Vn(t,"cb-size"),"--cb-radius":n===void 0?void 0:Wi(n),"--cb-icon-size":qe(r)}}),Ey=ga((e,t)=>{const n=Ue("CloseButton",mot,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,b=$t({name:"CloseButton",props:n,className:a,style:l,classes:xAe,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:got});return _.jsxs(Vo,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...b("root",{variant:p,active:!h&&!d}),children:[m||_.jsx(EAe,{}),i]})});Ey.classes=xAe;Ey.displayName="@mantine/core/CloseButton";function yot(e){return P.Children.toArray(e).filter(Boolean)}var SAe={root:"m_4081bf90"};const vot={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},bot=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":So(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),qi=nt((e,t)=>{const n=Ue("Group",vot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:b,...w}=n,S=yot(u),E=S.length,T=So(l??"md"),A={childWidth:`calc(${100/E}% - (${T} - ${T} / ${E}))`},I=$t({name:"Group",props:n,stylesCtx:A,className:i,style:s,classes:SAe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:bot});return _.jsx(Ne,{...I("root"),ref:t,variant:g,mod:[{grow:h},b],size:y,...w,children:S})});qi.classes=SAe;qi.displayName="@mantine/core/Group";var TAe={root:"m_9814e45f"};const wot={zIndex:qf("modal")},_ot=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Gp(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${qe(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Wi(s),"--overlay-z-index":o==null?void 0:o.toString()}}),_R=ga((e,t)=>{const n=Ue("Overlay",wot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:b,...w}=n,S=$t({name:"Overlay",props:n,classes:TAe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_ot});return _.jsx(Ne,{ref:t,...S("root"),mod:[{center:c,fixed:l},b],...w,children:f})});_R.classes=TAe;_R.displayName="@mantine/core/Overlay";const[Eot,xy]=ja("ModalBase component was not found in tree");function xot({opened:e,transitionDuration:t}){const[n,r]=P.useState(e),i=P.useRef(),o=f8()?0:t;return P.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function Sot({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=nl(e),[u,l]=P.useState(!1),[c,f]=P.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=xot({opened:n,transitionDuration:d});return S2e("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),w2e({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const CAe=P.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:b,...w},S)=>{const{_id:E,titleMounted:T,bodyMounted:C,shouldLockScroll:A,setTitleMounted:I,setBodyMounted:k}=Sot({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return _.jsx(D2,{...c,withinPortal:l,children:_.jsx(Eot,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:T,bodyMounted:C,setTitleMounted:I,setBodyMounted:k,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:_.jsx(nC,{enabled:A&&f,...b,children:_.jsx(Ne,{ref:S,...w,__vars:{...g,"--mb-z-index":(h||qf("modal")).toString(),"--mb-shadow":MJ(p),"--mb-padding":So(m)},children:d})})})})});function Tot(){const e=xy();return P.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var sC={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const fZ=P.forwardRef(({className:e,...t},n)=>{const r=Tot(),i=xy();return _.jsx(Ne,{ref:n,...t,id:r,className:co({[sC.body]:!i.unstyled},e)})});fZ.displayName="@mantine/core/ModalBaseBody";const dZ=P.forwardRef(({className:e,onClick:t,...n},r)=>{const i=xy();return _.jsx(Ey,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:co({[sC.close]:!i.unstyled},e),unstyled:i.unstyled})});dZ.displayName="@mantine/core/ModalBaseCloseButton";const AAe=P.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=xy();return _.jsx(_y,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>_.jsx("div",{...n,className:co({[sC.inner]:!a.unstyled},n.className),children:_.jsx(y8,{active:a.opened&&a.trapFocus,children:_.jsx(T2,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:co({[sC.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),hZ=P.forwardRef(({className:e,...t},n)=>{const r=xy();return _.jsx(Ne,{component:"header",ref:n,className:co({[sC.header]:!r.unstyled},e),...t})});hZ.displayName="@mantine/core/ModalBaseHeader";const Cot={duration:200,timingFunction:"ease",transition:"fade"};function Aot(e){const t=xy();return{...Cot,...t.transitionProps,...e}}const pZ=P.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=xy(),o=Aot(t);return _.jsx(_y,{mounted:s.opened,...o,transition:"fade",children:a=>_.jsx(_R,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});pZ.displayName="@mantine/core/ModalBaseOverlay";function Dot(){const e=xy();return P.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const mZ=P.forwardRef(({className:e,...t},n)=>{const r=Dot(),i=xy();return _.jsx(Ne,{component:"h2",ref:n,className:co({[sC.title]:!i.unstyled},e),...t,id:r})});mZ.displayName="@mantine/core/ModalBaseTitle";function DAe({children:e}){return _.jsx(_.Fragment,{children:e})}const[Iot,I2]=x2({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Kd={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Rpe={},kot=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${Fa(t)} - ${qe(2)})`}}),b8=nt((e,t)=>{const n=Ue("InputDescription",Rpe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=Ue("InputDescription",Rpe,n),p=I2(),m=$t({name:["InputWrapper",c],props:n,classes:Kd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:kot}),g=f&&(p==null?void 0:p.getStyles)||m;return _.jsx(Ne,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});b8.classes=Kd;b8.displayName="@mantine/core/InputDescription";const Rot={},Not=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${Fa(t)} - ${qe(2)})`}}),w8=nt((e,t)=>{const n=Ue("InputError",Rot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=$t({name:["InputWrapper",c],props:n,classes:Kd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:Not}),m=I2(),g=f&&(m==null?void 0:m.getStyles)||p;return _.jsx(Ne,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});w8.classes=Kd;w8.displayName="@mantine/core/InputError";const Npe={labelElement:"label"},Pot=(e,{size:t})=>({label:{"--input-label-size":Fa(t),"--input-asterisk-color":void 0}}),_8=nt((e,t)=>{const n=Ue("InputLabel",Npe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...b}=Ue("InputLabel",Npe,n),w=$t({name:["InputWrapper",m],props:n,classes:Kd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:Pot}),S=I2(),E=(S==null?void 0:S.getStyles)||w;return _.jsxs(Ne,{...E("label",S!=null&&S.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:T=>{h==null||h(T),!T.defaultPrevented&&T.detail>1&&T.preventDefault()},...b,children:[p,f&&_.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});_8.classes=Kd;_8.displayName="@mantine/core/InputLabel";const Ppe={},gZ=nt((e,t)=>{const n=Ue("InputPlaceholder",Ppe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=Ue("InputPlaceholder",Ppe,n),p=$t({name:["InputPlaceholder",l],props:n,classes:Kd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return _.jsx(Ne,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});gZ.classes=Kd;gZ.displayName="@mantine/core/InputPlaceholder";function Oot(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const Mot={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},$ot=(e,{size:t})=>({label:{"--input-label-size":Fa(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${Fa(t)} - ${qe(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${Fa(t)} - ${qe(2)})`}}),yZ=nt((e,t)=>{const n=Ue("InputWrapper",Mot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:b,errorProps:w,labelElement:S,children:E,withAsterisk:T,id:C,required:A,__stylesApiProps:I,mod:k,...N}=n,F=$t({name:["InputWrapper",f],props:I||n,classes:Kd,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$ot}),M={size:l,variant:c,__staticSelector:f},L=nl(C),j=typeof T=="boolean"?T:A,B=(w==null?void 0:w.id)||`${L}-error`,z=(b==null?void 0:b.id)||`${L}-description`,V=L,G=!!m&&typeof m!="boolean",$=!!g,W=`${G?B:""} ${$?z:""}`,K=W.trim().length>0?W.trim():void 0,q=(y==null?void 0:y.id)||`${L}-label`,Y=p&&_.jsx(_8,{labelElement:S,id:q,htmlFor:V,required:j,...M,...y,children:p},"label"),Z=$&&_.jsx(b8,{...b,...M,size:(b==null?void 0:b.size)||M.size,id:(b==null?void 0:b.id)||z,children:g},"description"),ae=_.jsx(P.Fragment,{children:d(E)},"input"),be=G&&P.createElement(w8,{...w,...M,size:(w==null?void 0:w.size)||M.size,key:"error",id:(w==null?void 0:w.id)||B},m),Se=h.map(we=>{switch(we){case"label":return Y;case"input":return ae;case"description":return Z;case"error":return be;default:return null}});return _.jsx(Iot,{value:{getStyles:F,describedBy:K,inputId:V,labelId:q,...Oot(h,{hasDescription:$,hasError:G})},children:_.jsx(Ne,{ref:t,variant:c,size:l,mod:[{error:!!m},k],...F("root"),...N,children:Se})})});yZ.classes=Kd;yZ.displayName="@mantine/core/InputWrapper";const Fot={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},Lot=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Vn(t.size,"input-height"),"--input-fz":Fa(t.size),"--input-radius":t.radius===void 0?void 0:Wi(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?qe(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?qe(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?Vn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),ws=ga((e,t)=>{const n=Ue("Input",Fot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:b,rightSectionProps:w,rightSectionWidth:S,rightSectionPointerEvents:E,leftSectionPointerEvents:T,variant:C,vars:A,pointer:I,multiline:k,radius:N,id:F,withAria:M,withErrorStyles:L,mod:j,inputSize:B,...z}=n,{styleProps:V,rest:G}=$E(z),$=I2(),W={offsetBottom:$==null?void 0:$.offsetBottom,offsetTop:$==null?void 0:$.offsetTop},K=$t({name:["Input",l],props:c||n,classes:Kd,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:W,rootSelector:"wrapper",vars:A,varsResolver:Lot}),q=M?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":$==null?void 0:$.describedBy,id:($==null?void 0:$.inputId)||F}:{};return _.jsxs(Ne,{...K("wrapper"),...V,...d,mod:[{error:!!h&&L,pointer:I,disabled:p,multiline:k,"data-with-right-section":!!b,"data-with-left-section":!!m},j],variant:C,size:f,children:[m&&_.jsx("div",{...g,"data-position":"left",...K("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),_.jsx(Ne,{component:"input",...G,...q,ref:t,required:u,mod:{disabled:p,error:!!h&&L},variant:C,__size:B,...K("input")}),b&&_.jsx("div",{...w,"data-position":"right",...K("section",{className:w==null?void 0:w.className,style:w==null?void 0:w.style}),children:b})]})});ws.classes=Kd;ws.Wrapper=yZ;ws.Label=_8;ws.Error=w8;ws.Description=b8;ws.Placeholder=gZ;ws.displayName="@mantine/core/Input";function IAe(e,t,n){const r=Ue(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:b,size:w,style:S,inputContainer:E,inputWrapperOrder:T,withAsterisk:C,variant:A,vars:I,mod:k,...N}=r,{styleProps:F,rest:M}=$E(N),L={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:w,style:S,inputContainer:E,inputWrapperOrder:T,withAsterisk:C,variant:A,id:b,mod:k,...y};return{...M,classNames:u,styles:l,unstyled:f,wrapperProps:{...L,...F},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:w,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:A,id:b}}}const Bot={__staticSelector:"InputBase",withAria:!0},Xd=ga((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=IAe("InputBase",Bot,e);return _.jsx(ws.Wrapper,{...r,children:_.jsx(ws,{...n,...i,ref:t})})});Xd.classes={...ws.classes,...ws.Wrapper.classes};Xd.displayName="@mantine/core/InputBase";const jot={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var kAe={root:"m_8bffd616"};const Uot={},Zt=ga((e,t)=>{const n=Ue("Flex",Uot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=$t({name:"Flex",classes:kAe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),b=ko(),w=eP(),S=O2e({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:b,data:jot});return _.jsxs(_.Fragment,{children:[S.hasResponsiveStyles&&_.jsx(ME,{selector:`.${w}`,styles:S.styles,media:S.media}),_.jsx(Ne,{ref:t,...y("root",{className:w,style:yb(S.inlineStyles)}),...g})]})});Zt.classes=kAe;Zt.displayName="@mantine/core/Flex";function zot(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function Vot({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=P.useRef(),[s,o]=P.useState(!1),[a,u]=P.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=P.useRef(),d=P.useRef();return P.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),P.useEffect(()=>{if(t){const h=p=>{zot(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),qnt(()=>{A2e()!=="test"&&o(!0)},20,{autoInvoke:!0}),Wnt(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var RAe={root:"m_96b553a6"};const Hot={},qot=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),vZ=nt((e,t)=>{const n=Ue("FloatingIndicator",Hot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=$t({name:"FloatingIndicator",classes:RAe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qot}),g=P.useRef(null),{initialized:y,hidden:b}=Vot({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),w=Io(t,g);return!l||!c?null:_.jsx(Ne,{ref:w,mod:[{initialized:y,hidden:b},d],...m("root"),...p})});vZ.displayName="@mantine/core/FloatingIndicator";vZ.classes=RAe;const[Wot,bZ]=ja("Accordion component was not found in the tree");function oC({style:e,size:t=16,...n}){return _.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:qe(t),height:qe(t),display:"block"},...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}oC.displayName="@mantine/core/AccordionChevron";const[Got,NAe]=ja("Accordion.Item component was not found in the tree");var nP={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const Yot={},wZ=nt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=Ue("AccordionControl",Yot,e),{value:m}=NAe(),g=bZ(),y=g.isItemActive(m),b=typeof g.order=="number",w=`h${g.order}`,S=_.jsxs(Vo,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:E=>{l==null||l(E),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:OJ({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[_.jsx(Ne,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),_.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&_.jsx(Ne,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return b?_.jsx(w,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:S}):S});wZ.displayName="@mantine/core/AccordionControl";wZ.classes=nP;const Kot={},_Z=nt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=Ue("AccordionItem",Kot,e),c=bZ();return _.jsx(Got,{value:{value:a},children:_.jsx(Ne,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});_Z.displayName="@mantine/core/AccordionItem";_Z.classes=nP;const Xot={},EZ=nt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=Ue("AccordionPanel",Xot,e),{value:l}=NAe(),c=bZ();return _.jsx(p8,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:_.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});EZ.displayName="@mantine/core/AccordionPanel";EZ.classes=nP;const Qot={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:_.jsx(oC,{})},Jot=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:qe(n),"--accordion-radius":r===void 0?void 0:Wi(r)}});function ac(e){const t=Ue("Accordion",Qot,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:b,order:w,chevron:S,variant:E,radius:T,...C}=t,A=nl(h),[I,k]=Ho({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),N=L=>Array.isArray(I)?I.includes(L):L===I,F=L=>{const j=Array.isArray(I)?I.includes(L)?I.filter(B=>B!==L):[...I,L]:L===I?null:L;k(j)},M=$t({name:"Accordion",classes:nP,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:Jot});return _.jsx(Wot,{value:{isItemActive:N,onChange:F,getControlId:vL(`${A}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:vL(`${A}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:w,chevron:S,loop:p,getStyles:M,variant:E,unstyled:o},children:_.jsx(Ne,{...M("root"),id:A,...C,variant:E,"data-accordion":!0,children:u})})}const Zot=e=>e;ac.extend=Zot;ac.classes=nP;ac.displayName="@mantine/core/Accordion";ac.Item=_Z;ac.Panel=EZ;ac.Control=wZ;ac.Chevron=oC;var PAe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const eat={},tat=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Wi(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},k0=nt((e,t)=>{const n=Ue("Alert",eat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:b,autoContrast:w,...S}=n,E=$t({name:"Alert",classes:PAe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:tat}),T=nl(h),C=f&&`${T}-title`||void 0,A=`${T}-body`;return _.jsx(Ne,{id:T,...E("root",{variant:b}),variant:b,ref:t,...S,role:"alert","aria-describedby":A,"aria-labelledby":C,children:_.jsxs("div",{...E("wrapper"),children:[p&&_.jsx("div",{...E("icon"),children:p}),_.jsxs("div",{...E("body"),children:[f&&_.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:_.jsx("span",{id:C,...E("label"),children:f})}),d&&_.jsx("div",{id:A,...E("message"),"data-variant":b,children:d})]}),m&&_.jsx(Ey,{...E("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});k0.classes=PAe;k0.displayName="@mantine/core/Alert";var OAe={root:"m_b6d8b162"};function nat(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const rat={inherit:!1},iat=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":Fa(i),"--text-lh":b2e(i),"--text-gradient":t==="gradient"?LW(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Bi(s,e):void 0}}),gt=ga((e,t)=>{const n=Ue("Text",rat,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:b,...w}=n,S=$t({name:["Text",l],props:n,classes:OAe,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:iat});return _.jsx(Ne,{...S("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":nat(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:b,...w})});gt.classes=OAe;gt.displayName="@mantine/core/Text";var MAe={root:"m_849cf0da"};const sat={underline:"hover"},BE=ga((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=Ue("Anchor",sat,e);return _.jsx(gt,{component:"a",ref:t,className:co({[MAe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});BE.classes=MAe;BE.displayName="@mantine/core/Anchor";const[oat,k2]=ja("AppShell was not found in tree");var _b={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const aat={},xZ=nt((e,t)=>{const n=Ue("AppShellAside",aat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=k2();return h.disabled?null:_.jsx(Ne,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});xZ.classes=_b;xZ.displayName="@mantine/core/AppShellAside";const uat={},SZ=nt((e,t)=>{var p;const n=Ue("AppShellFooter",uat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=k2();return h.disabled?null:_.jsx(Ne,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:co({[nC.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});SZ.classes=_b;SZ.displayName="@mantine/core/AppShellFooter";const lat={},TZ=nt((e,t)=>{var p;const n=Ue("AppShellHeader",lat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=k2();return h.disabled?null:_.jsx(Ne,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:co({[nC.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});TZ.classes=_b;TZ.displayName="@mantine/core/AppShellHeader";const cat={},CZ=nt((e,t)=>{const n=Ue("AppShellMain",cat,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=k2();return _.jsx(Ne,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});CZ.classes=_b;CZ.displayName="@mantine/core/AppShellMain";function rP(e){return typeof e=="object"?e.base:e}function iP(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function sP(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function fat({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),iP(s)){const f=qe(rP(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(sP(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=qe(s.base),e["--app-shell-aside-offset"]=qe(s.base)),rs(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=qe(s[f]),t[f]["--app-shell-aside-offset"]=qe(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=$J(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function dat({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(iP(r)){const o=qe(rP(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}sP(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=qe(r.base),s&&(e["--app-shell-footer-offset"]=qe(r.base))),rs(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=qe(r[o]),s&&(t[o]["--app-shell-footer-offset"]=qe(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function hat({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(iP(r)){const o=qe(rP(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}sP(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=qe(r.base),s&&(e["--app-shell-header-offset"]=qe(r.base))),rs(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=qe(r[o]),s&&(t[o]["--app-shell-header-offset"]=qe(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function pat({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),iP(s)){const f=qe(rP(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(sP(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=qe(s.base),e["--app-shell-navbar-offset"]=qe(s.base)),rs(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=qe(s[f]),t[f]["--app-shell-navbar-offset"]=qe(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=$J(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function Oz(e){return Number(e)===0?"0px":So(e)}function mat({padding:e,baseStyles:t,minMediaStyles:n}){iP(e)&&(t["--app-shell-padding"]=Oz(rP(e))),sP(e)&&(e.base&&(t["--app-shell-padding"]=Oz(e.base)),rs(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=Oz(e[r]))}))}function gat({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};pat({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),fat({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),hat({baseStyles:u,minMediaStyles:o,header:t}),dat({baseStyles:u,minMediaStyles:o,footer:n}),mat({baseStyles:u,minMediaStyles:o,padding:i});const l=vR(rs(o),s).map(d=>({query:`(min-width: ${yL(d.px)})`,styles:o[d.value]})),c=vR(rs(a),s).map(d=>({query:`(max-width: ${yL(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function yat({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=ko(),o=bb(),{media:a,baseStyles:u}=gat({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return _.jsx(ME,{media:a,styles:u,selector:o.cssVariablesSelector})}const vat={},AZ=nt((e,t)=>{const n=Ue("AppShellNavbar",vat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=k2();return h.disabled?null:_.jsx(Ne,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});AZ.classes=_b;AZ.displayName="@mantine/core/AppShellNavbar";const bat={},DZ=ga((e,t)=>{const n=Ue("AppShellSection",bat,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=k2();return _.jsx(Ne,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});DZ.classes=_b;DZ.displayName="@mantine/core/AppShellSection";function wat({transitionDuration:e,disabled:t}){const[n,r]=P.useState(!0),i=P.useRef(),s=P.useRef();return S2e("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),OE(()=>{P.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const _at={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:qf("app")},Eat=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),bs=nt((e,t)=>{const n=Ue("AppShell",_at,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:b,footer:w,offsetScrollbars:S,mod:E,...T}=n,C=$t({name:"AppShell",classes:_b,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Eat}),A=wat({disabled:y,transitionDuration:d});return _.jsxs(oat,{value:{getStyles:C,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:S},children:[_.jsx(yat,{navbar:l,header:p,aside:b,footer:w,padding:f}),_.jsx(Ne,{ref:t,...C("root"),mod:[{resizing:A,layout:g,disabled:y},E],...T})]})});bs.classes=_b;bs.displayName="@mantine/core/AppShell";bs.Navbar=AZ;bs.Header=TZ;bs.Main=CZ;bs.Aside=xZ;bs.Footer=SZ;bs.Section=DZ;function $Ae(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>$Ae(t))}:e}function FAe(e){return e?e.map(t=>$Ae(t)):[]}function IZ(e){return e.reduce((t,n)=>"group"in n?{...t,...IZ(n.items)}:(t[n.value]=n,t),{})}var $c={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const xat={error:null},Sat=(e,{size:t})=>({chevron:{"--combobox-chevron-size":Vn(t,"combobox-chevron-size")}}),kZ=nt((e,t)=>{const n=Ue("ComboboxChevron",xat,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=$t({name:"ComboboxChevron",classes:$c,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:Sat,rootSelector:"chevron"});return _.jsx(Ne,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:_.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});kZ.classes=$c;kZ.displayName="@mantine/core/ComboboxChevron";const[Tat,Qd]=ja("Combobox component was not found in tree"),LAe=P.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>_.jsx(Ey,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));LAe.displayName="@mantine/core/ComboboxClearButton";const Cat={},RZ=nt((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=Ue("ComboboxDropdown",Cat,e),u=Qd();return _.jsx(au.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});RZ.classes=$c;RZ.displayName="@mantine/core/ComboboxDropdown";const Aat={refProp:"ref"},BAe=nt((e,t)=>{const{children:n,refProp:r}=Ue("ComboboxDropdownTarget",Aat,e);if(Qd(),!vb(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return _.jsx(au.Target,{ref:t,refProp:r,children:n})});BAe.displayName="@mantine/core/ComboboxDropdownTarget";const Dat={},NZ=nt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ue("ComboboxEmpty",Dat,e),u=Qd();return _.jsx(Ne,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});NZ.classes=$c;NZ.displayName="@mantine/core/ComboboxEmpty";function PZ({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Qd(),[a,u]=P.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const Iat={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},jAe=nt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Ue("ComboboxEventsTarget",Iat,e);if(!vb(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Qd(),f=PZ({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return P.cloneElement(n,{...f,...l,[r]:Io(t,c.store.targetRef,n==null?void 0:n.ref)})});jAe.displayName="@mantine/core/ComboboxEventsTarget";const kat={},OZ=nt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ue("ComboboxFooter",kat,e),u=Qd();return _.jsx(Ne,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});OZ.classes=$c;OZ.displayName="@mantine/core/ComboboxFooter";const Rat={},MZ=nt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=Ue("ComboboxGroup",Rat,e),c=Qd();return _.jsxs(Ne,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&_.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});MZ.classes=$c;MZ.displayName="@mantine/core/ComboboxGroup";const Nat={},$Z=nt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ue("ComboboxHeader",Nat,e),u=Qd();return _.jsx(Ne,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});$Z.classes=$c;$Z.displayName="@mantine/core/ComboboxHeader";function UAe({value:e,valuesDivider:t=",",...n}){return _.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}UAe.displayName="@mantine/core/ComboboxHiddenInput";const Pat={},FZ=nt((e,t)=>{const n=Ue("ComboboxOption",Pat,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=Qd(),b=P.useId(),w=l||b;return _.jsx(Ne,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:w,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:S=>{var E;h?S.preventDefault():((E=y.onOptionSubmit)==null||E.call(y,n.value,n),u==null||u(S))},onMouseDown:S=>{S.preventDefault(),f==null||f(S)},onMouseOver:S=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(S)}})});FZ.classes=$c;FZ.displayName="@mantine/core/ComboboxOption";const Oat={},LZ=nt((e,t)=>{const n=Ue("ComboboxOptions",Oat,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=Qd(),d=nl(a);return P.useEffect(()=>{f.store.setListId(d)},[d]),_.jsx(Ne,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});LZ.classes=$c;LZ.displayName="@mantine/core/ComboboxOptions";const Mat={withAriaAttributes:!0,withKeyboardNavigation:!0},BZ=nt((e,t)=>{const n=Ue("ComboboxSearch",Mat,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=Qd(),h=d.getStyles("search"),p=PZ({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return _.jsx(ws,{ref:Io(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});BZ.classes=$c;BZ.displayName="@mantine/core/ComboboxSearch";const $at={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},zAe=nt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Ue("ComboboxTarget",$at,e);if(!vb(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Qd(),f=PZ({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=P.cloneElement(n,{...f,...l});return _.jsx(au.Target,{ref:Io(t,c.store.targetRef),children:d})});zAe.displayName="@mantine/core/ComboboxTarget";function Fat(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function Lat(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function Bat(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function jZ({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=Ho({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=P.useRef(null),c=P.useRef(-1),f=P.useRef(null),d=P.useRef(null),h=P.useRef(-1),p=P.useRef(-1),m=P.useRef(-1),g=P.useCallback((B="unknown")=>{a||(u(!0),i==null||i(B))},[u,i,a]),y=P.useCallback((B="unknown")=>{a&&(u(!1),r==null||r(B))},[u,r,a]),b=P.useCallback((B="unknown")=>{a?y(B):g(B)},[y,g,a]),w=P.useCallback(()=>{const B=document.querySelector(`#${l.current} [data-combobox-selected]`);B==null||B.removeAttribute("data-combobox-selected"),B==null||B.removeAttribute("aria-selected")},[]),S=P.useCallback(B=>{const z=document.getElementById(l.current),V=z==null?void 0:z.querySelectorAll("[data-combobox-option]");if(!V)return null;const G=B>=V.length?0:B<0?V.length-1:B;return c.current=G,V!=null&&V[G]&&!V[G].hasAttribute("data-combobox-disabled")?(w(),V[G].setAttribute("data-combobox-selected","true"),V[G].setAttribute("aria-selected","true"),V[G].scrollIntoView({block:"nearest",behavior:o}),V[G].id):null},[o,w]),E=P.useCallback(()=>{const B=document.querySelector(`#${l.current} [data-combobox-active]`);if(B){const z=document.querySelectorAll(`#${l.current} [data-combobox-option]`),V=Array.from(z).findIndex(G=>G===B);return S(V)}return S(0)},[S]),T=P.useCallback(()=>S(Lat(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[S,s]),C=P.useCallback(()=>S(Fat(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[S,s]),A=P.useCallback(()=>S(Bat(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[S]),I=P.useCallback((B="selected",z)=>{m.current=window.setTimeout(()=>{var $;const V=document.querySelectorAll(`#${l.current} [data-combobox-option]`),G=Array.from(V).findIndex(W=>W.hasAttribute(`data-combobox-${B}`));c.current=G,z!=null&&z.scrollIntoView&&(($=V[G])==null||$.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),k=P.useCallback(()=>{c.current=-1,w()},[w]),N=P.useCallback(()=>{const B=document.querySelectorAll(`#${l.current} [data-combobox-option]`),z=B==null?void 0:B[c.current];z==null||z.click()},[]),F=P.useCallback(B=>{l.current=B},[]),M=P.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),L=P.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),j=P.useCallback(()=>c.current,[]);return P.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:b,selectedOptionIndex:c.current,getSelectedOptionIndex:j,selectOption:S,selectFirstOption:A,selectActiveOption:E,selectNextOption:T,selectPreviousOption:C,resetSelectedOption:k,updateSelectedOptionIndex:I,listId:l.current,setListId:F,clickSelectedOption:N,searchRef:f,focusSearchInput:M,targetRef:d,focusTarget:L}}const jat={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},Uat=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":Fa(t),"--combobox-option-padding":Vn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:qe(n),"--combobox-option-fz":Fa(t),"--combobox-option-padding":Vn(t,"combobox-option-padding")}});function Wr(e){const t=Ue("Combobox",jat,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=jZ(),y=o||g,b=$t({name:h||"Combobox",classes:$c,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:Uat}),w=()=>{l==null||l(),y.closeDropdown()};return _.jsx(Tat,{value:{getStyles:b,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:_.jsx(au,{opened:y.dropdownOpened,...m,onClose:w,withRoles:!1,unstyled:i,children:s})})}const zat=e=>e;Wr.extend=zat;Wr.classes=$c;Wr.displayName="@mantine/core/Combobox";Wr.Target=zAe;Wr.Dropdown=RZ;Wr.Options=LZ;Wr.Option=FZ;Wr.Search=BZ;Wr.Empty=NZ;Wr.Chevron=kZ;Wr.Footer=OZ;Wr.Header=$Z;Wr.EventsTarget=jAe;Wr.DropdownTarget=BAe;Wr.Group=MZ;Wr.ClearButton=LAe;Wr.HiddenInput=UAe;var VAe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const HAe=VAe,E8=P.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:b,mod:w,...S},E)=>{const T=$t({name:e,props:t,className:n,style:y,classes:VAe,classNames:r,styles:i,unstyled:s});return _.jsx(Ne,{...T("root"),ref:E,__vars:{"--label-fz":Fa(d),"--label-lh":Vn(d,"label-lh")},mod:[{"label-position":h},w],variant:g,size:d,...S,children:_.jsxs(Ne,{component:p,htmlFor:p==="label"?l:void 0,...T("body"),children:[o,_.jsxs("div",{...T("labelWrapper"),"data-disabled":c||void 0,children:[a&&_.jsx(Ne,{component:m,htmlFor:m==="label"?l:void 0,...T("label"),"data-disabled":c||void 0,children:a}),u&&_.jsx(ws.Description,{size:d,__inheritStyles:!1,...T("description"),children:u}),f&&typeof f!="boolean"&&_.jsx(ws.Error,{size:d,__inheritStyles:!1,...T("error"),children:f})]})]})})});E8.displayName="@mantine/core/InlineInput";const qAe=P.createContext(null),Vat=qAe.Provider,WAe=()=>P.useContext(qAe),[Hat,qat]=x2();var GAe={card:"m_26775b0a"};const Wat={withBorder:!0},Gat=(e,{radius:t})=>({card:{"--card-radius":Wi(t)}}),UZ=nt((e,t)=>{const n=Ue("CheckboxCard",Wat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=$t({name:"CheckboxCard",classes:GAe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Gat,rootSelector:"card"}),g=WAe(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return _.jsx(Hat,{value:{checked:y},children:_.jsx(Vo,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:b=>{h==null||h(b),g==null||g.onChange(d||"")}})})});UZ.displayName="@mantine/core/CheckboxCard";UZ.classes=GAe;function zZ({children:e,role:t}){const n=I2();return n?_.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):_.jsx(_.Fragment,{children:e})}const Yat={},VZ=nt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Ue("CheckboxGroup",Yat,e),[c,f]=Ho({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(Vat,{value:{value:c,onChange:d,size:s},children:_.jsx(ws.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:_.jsx(zZ,{role:"group",children:a})})})});VZ.classes=ws.Wrapper.classes;VZ.displayName="@mantine/core/CheckboxGroup";function YAe({size:e,style:t,...n}){const r=e!==void 0?{width:qe(e),height:qe(e),...t}:t;return _.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:_.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function KAe({indeterminate:e,...t}){return e?_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:_.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):_.jsx(YAe,{...t})}var XAe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const Kat={icon:KAe},Xat=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=og({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":Vn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Wi(t),"--checkbox-color":s==="outline"?u:Bi(n,e),"--checkbox-icon-color":i?Bi(i,e):S2(o,e)?wb({color:n,theme:e,autoContrast:o}):void 0}}},HZ=nt((e,t)=>{const n=Ue("CheckboxIndicator",Kat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:b,...w}=n,S=l,E=$t({name:"CheckboxIndicator",classes:XAe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Xat,rootSelector:"indicator"}),T=qat(),C=typeof m=="boolean"||typeof c=="boolean"?m||c:(T==null?void 0:T.checked)||!1;return _.jsx(Ne,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:C,disabled:b},g],...w,children:_.jsx(S,{indeterminate:c,...E("icon")})})});HZ.displayName="@mantine/core/CheckboxIndicator";HZ.classes=XAe;var QAe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const Qat={labelPosition:"right",icon:KAe},Jat=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=og({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":Vn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Wi(t),"--checkbox-color":s==="outline"?u:Bi(n,e),"--checkbox-icon-color":i?Bi(i,e):S2(o,e)?wb({color:n,theme:e,autoContrast:o}):void 0}}},wc=nt((e,t)=>{const n=Ue("Checkbox",Qat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:b,error:w,disabled:S,variant:E,indeterminate:T,icon:C,rootRef:A,iconColor:I,onChange:k,autoContrast:N,mod:F,...M}=n,L=WAe(),j=d||(L==null?void 0:L.size),B=C,z=$t({name:"Checkbox",props:n,classes:QAe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Jat}),{styleProps:V,rest:G}=$E(M),$=nl(f),W=L?{checked:L.value.includes(G.value),onChange:K=>{L.onChange(K),k==null||k(K)}}:{};return _.jsx(E8,{...z("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:$,size:j,labelPosition:y,label:c,description:b,error:w,disabled:S,classNames:r,styles:o,unstyled:a,"data-checked":W.checked||g||void 0,variant:E,ref:A,mod:F,...V,...p,children:_.jsxs(Ne,{...z("inner"),mod:{"data-label-position":y},children:[_.jsx(Ne,{component:"input",id:$,ref:t,checked:g,disabled:S,mod:{error:!!w,indeterminate:T},...z("input",{focusable:!0,variant:E}),onChange:k,...G,...W,type:"checkbox"}),_.jsx(B,{indeterminate:T,...z("icon")})]})})});wc.classes={...QAe,...HAe};wc.displayName="@mantine/core/Checkbox";wc.Group=VZ;wc.Indicator=HZ;wc.Card=UZ;function aC(e){return"group"in e}function JAe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;aC(o)&&i.push({group:o.group,items:JAe({options:o.items,search:t,limit:n-i.length})}),aC(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function Zat(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function ZAe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(aC(n))ZAe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function eut(e,t){return Array.isArray(e)?e.includes(t):e===t}function eDe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!aC(e)){const a=eut(n,e.value),u=t&&a&&_.jsx(YAe,{className:$c.optionsDropdownCheckIcon}),l=_.jsxs(_.Fragment,{children:[r==="left"&&u,_.jsx("span",{children:e.label}),r==="right"&&u]});return _.jsx(Wr.Option,{value:e.value,disabled:e.disabled,className:co({[$c.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>_.jsx(eDe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return _.jsx(Wr.Group,{label:e.group,children:o})}function tDe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){ZAe(e);const w=typeof i=="string"?(r||JAe)({options:e,search:u?i:"",limit:s??1/0}):e,S=Zat(w),E=w.map(T=>_.jsx(eDe,{data:T,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},aC(T)?T.group:T.value));return _.jsx(Wr.Dropdown,{hidden:t||n&&S,children:_.jsxs(Wr.Options,{labelledBy:p,"aria-label":y,children:[a?_.jsx(W0.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:E}):E,S&&d&&_.jsx(Wr.Empty,{children:d})]})})}var nDe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const tut={},nut=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":Vn(s,"badge-height"),"--badge-padding-x":Vn(s,"badge-padding-x"),"--badge-fz":Vn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Wi(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Bi(n,e):void 0}}},u1=ga((e,t)=>{const n=Ue("Badge",tut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:b,mod:w,...S}=n,E=$t({name:"Badge",props:n,classes:nDe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nut});return _.jsxs(Ne,{variant:m,mod:[{block:g,circle:b},w],...E("root",{variant:m}),ref:t,...S,children:[d&&_.jsx("span",{...E("section"),"data-position":"left",children:d}),_.jsx("span",{...E("label"),children:p}),h&&_.jsx("span",{...E("section"),"data-position":"right",children:h})]})});u1.classes=nDe;u1.displayName="@mantine/core/Badge";var rDe={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const rut={},iut=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?Bi(t,e):void 0,"--burger-size":Vn(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),qZ=nt((e,t)=>{const n=Ue("Burger",rut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=$t({name:"Burger",classes:rDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:iut});return _.jsxs(Vo,{...p("root"),ref:t,...h,children:[_.jsx(Ne,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});qZ.classes=rDe;qZ.displayName="@mantine/core/Burger";var x8={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const Ope={orientation:"horizontal"},sut=(e,{borderWidth:t})=>({group:{"--button-border-width":qe(t)}}),WZ=nt((e,t)=>{const n=Ue("ButtonGroup",Ope,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Ue("ButtonGroup",Ope,e),p=$t({name:"ButtonGroup",props:n,classes:x8,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:sut,rootSelector:"group"});return _.jsx(Ne,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});WZ.classes=x8;WZ.displayName="@mantine/core/ButtonGroup";const out={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${qe(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},aut={},uut=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":Vn(s,"button-height"),"--button-padding-x":Vn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?Fa(s.replace("compact-","")):Fa(s),"--button-radius":t===void 0?void 0:Wi(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},Mn=ga((e,t)=>{const n=Ue("Button",aut,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:b,unstyled:w,"data-disabled":S,autoContrast:E,mod:T,...C}=n,A=$t({name:"Button",props:n,classes:x8,className:s,style:r,classNames:y,styles:b,unstyled:w,vars:i,varsResolver:uut}),I=!!l,k=!!c;return _.jsxs(Vo,{ref:t,...A("root",{active:!a&&!p&&!S}),unstyled:w,variant:d,disabled:a||p,mod:[{disabled:a||S,loading:p,block:f,"with-left-section":I,"with-right-section":k},T],...C,children:[_.jsx(_y,{mounted:!!p,transition:out,duration:150,children:N=>_.jsx(Ne,{component:"span",...A("loader",{style:N}),"aria-hidden":!0,children:_.jsx(Yd,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),_.jsxs("span",{...A("inner"),children:[l&&_.jsx(Ne,{component:"span",...A("section"),mod:{position:"left"},children:l}),_.jsx(Ne,{component:"span",mod:{loading:p},...A("label"),children:u}),c&&_.jsx(Ne,{component:"span",...A("section"),mod:{position:"right"},children:c})]})]})});Mn.classes=x8;Mn.displayName="@mantine/core/Button";Mn.Group=WZ;const[lut,cut]=ja("Card component was not found in tree");var GZ={root:"m_e615b15f",section:"m_599a2148"};const fut={},S8=ga((e,t)=>{const n=Ue("CardSection",fut,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=cut();return _.jsx(Ne,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});S8.classes=GZ;S8.displayName="@mantine/core/CardSection";const dut={},hut=(e,{padding:t})=>({root:{"--card-padding":So(t)}}),jE=ga((e,t)=>{const n=Ue("Card",dut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=$t({name:"Card",props:n,classes:GZ,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:hut}),h=P.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===S8?P.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return _.jsx(lut,{value:{getStyles:d},children:_.jsx(T2,{ref:t,unstyled:a,...d("root"),...f,children:p})})});jE.classes=GZ;jE.displayName="@mantine/core/Card";jE.Section=S8;var iDe={root:"m_4451eb3a"};const put={},If=ga((e,t)=>{const n=Ue("Center",put,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=$t({name:"Center",props:n,classes:iDe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return _.jsx(Ne,{ref:t,mod:[{inline:l},c],...d("root"),...f})});If.classes=iDe;If.displayName="@mantine/core/Center";var sDe={root:"m_b183c0a2"};const mut={},gut=(e,{color:t})=>({root:{"--code-bg":t?Bi(t,e):void 0}}),lk=nt((e,t)=>{const n=Ue("Code",mut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=$t({name:"Code",props:n,classes:sDe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gut});return _.jsx(Ne,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});lk.classes=sDe;lk.displayName="@mantine/core/Code";var oDe={root:"m_7485cace"};const yut={},vut=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:Vn(t,"container-size")}}),Fd=nt((e,t)=>{const n=Ue("Container",yut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=$t({name:"Container",classes:oDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vut});return _.jsx(Ne,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});Fd.classes=oDe;Fd.displayName="@mantine/core/Container";var aDe={root:"m_3eebeb36",label:"m_9e365f20"};const but={orientation:"horizontal"},wut=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Bi(t,e):void 0,"--divider-border-style":n,"--divider-size":Vn(r,"divider-size")}}),uC=nt((e,t)=>{const n=Ue("Divider",but,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=$t({name:"Divider",classes:aDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wut});return _.jsx(Ne,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&_.jsx(Ne,{component:"span",mod:{position:d},...m("label"),children:f})})});uC.classes=aDe;uC.displayName="@mantine/core/Divider";const[_ut,R2]=ja("Drawer component was not found in tree");var Sy={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const Eut={},T8=nt((e,t)=>{const n=Ue("DrawerBody",Eut,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=R2();return _.jsx(fZ,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});T8.classes=Sy;T8.displayName="@mantine/core/DrawerBody";const xut={},C8=nt((e,t)=>{const n=Ue("DrawerCloseButton",xut,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=R2();return _.jsx(dZ,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});C8.classes=Sy;C8.displayName="@mantine/core/DrawerCloseButton";const Sut={},A8=nt((e,t)=>{const n=Ue("DrawerContent",Sut,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=R2(),d=f.scrollAreaComponent||DAe;return _.jsx(AAe,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:_.jsx(d,{style:{height:"100vh"},children:u})})});A8.classes=Sy;A8.displayName="@mantine/core/DrawerContent";const Tut={},D8=nt((e,t)=>{const n=Ue("DrawerHeader",Tut,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=R2();return _.jsx(hZ,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});D8.classes=Sy;D8.displayName="@mantine/core/DrawerHeader";const Cut={},I8=nt((e,t)=>{const n=Ue("DrawerOverlay",Cut,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=R2();return _.jsx(pZ,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});I8.classes=Sy;I8.displayName="@mantine/core/DrawerOverlay";function Aut(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function Dut(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const Iut={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},kut={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},Rut={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:qf("modal"),position:"left"},Nut=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":Vn(n,"drawer-size"),"--drawer-flex":Dut(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":Aut(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":qe(r)}}),k8=nt((e,t)=>{const n=Ue("DrawerRoot",Rut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=ag(),m=$t({name:"Drawer",classes:Sy,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Nut}),g=(p==="rtl"?kut:Iut)[c];return _.jsx(_ut,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:_.jsx(CAe,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});k8.classes=Sy;k8.displayName="@mantine/core/DrawerRoot";const Put={},R8=nt((e,t)=>{const n=Ue("DrawerTitle",Put,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=R2();return _.jsx(mZ,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});R8.classes=Sy;R8.displayName="@mantine/core/DrawerTitle";const Out={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:qf("modal"),withOverlay:!0,withCloseButton:!0},ug=nt((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=Ue("Drawer",Out,e),l=!!n||s;return _.jsxs(k8,{ref:t,...u,children:[r&&_.jsx(I8,{...i}),_.jsxs(A8,{children:[l&&_.jsxs(D8,{children:[n&&_.jsx(R8,{children:n}),s&&_.jsx(C8,{...o})]}),_.jsx(T8,{children:a})]})]})});ug.classes=Sy;ug.displayName="@mantine/core/Drawer";ug.Root=k8;ug.Overlay=I8;ug.Content=A8;ug.Body=T8;ug.Header=D8;ug.Title=R8;ug.CloseButton=C8;function Mut({open:e,close:t,openDelay:n,closeDelay:r}){const i=P.useRef(-1),s=P.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return P.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[$ut,uDe]=ja("Grid component was not found in tree"),YW=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,Mpe=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":YW(e,t),$pe=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},Fpe=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function Fut({span:e,order:t,offset:n,selector:r}){var d;const i=ko(),s=uDe(),a=zh(e)===void 0?12:zh(e),u=yb({"--col-order":(d=zh(t))==null?void 0:d.toString(),"--col-flex-grow":$pe(a,s.grow),"--col-flex-basis":YW(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":Mpe(a,s.columns,s.grow),"--col-offset":Fpe(zh(n),s.columns)}),l=rs(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=$pe(e[p],s.grow),h[p]["--col-flex-basis"]=YW(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=Mpe(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=Fpe(n[p],s.columns)),h},{}),f=vR(rs(l),i).filter(h=>rs(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return _.jsx(ME,{styles:u,media:f,selector:r})}var YZ={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const Lut={span:12},KZ=nt((e,t)=>{const n=Ue("GridCol",Lut,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=uDe(),h=eP();return _.jsxs(_.Fragment,{children:[_.jsx(Fut,{selector:`.${h}`,span:u,order:l,offset:c}),_.jsx(Ne,{ref:t,...d.getStyles("col",{className:co(i,h),style:s,classNames:r,styles:o}),...f})]})});KZ.classes=YZ;KZ.displayName="@mantine/core/GridCol";function But({gutter:e,selector:t}){const n=ko(),r=yb({"--grid-gutter":So(zh(e))}),i=rs(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=So(e[u])),a),{}),o=vR(rs(i),n).filter(a=>rs(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return _.jsx(ME,{styles:r,media:o,selector:t})}const jut={gutter:"md",grow:!1,columns:12},Uut=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Cl=nt((e,t)=>{const n=Ue("Grid",jut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=$t({name:"Grid",classes:YZ,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Uut}),y=eP();return _.jsxs($ut,{value:{getStyles:g,grow:l,columns:f},children:[_.jsx(But,{selector:`.${y}`,...n}),_.jsx(Ne,{ref:t,...g("root",{className:y}),...m,children:_.jsx("div",{...g("inner"),children:p})})]})});Cl.classes=YZ;Cl.displayName="@mantine/core/Grid";Cl.Col=KZ;var lDe={root:"m_9e117634"};const zut={},Vut=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Wi(t),"--image-object-fit":n}}),Eb=ga((e,t)=>{const n=Ue("Image",zut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=P.useState(!c);P.useEffect(()=>y(!c),[c]);const b=$t({name:"Image",classes:lDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Vut});return g&&h?_.jsx(Ne,{component:"img",ref:t,src:h,...b("root"),onError:l,mod:["fallback",p],...m}):_.jsx(Ne,{component:"img",ref:t,...b("root"),src:c,onError:w=>{l==null||l(w),y(!0)},mod:p,...m})});Eb.classes=lDe;Eb.displayName="@mantine/core/Image";function lC(){return lC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lC.apply(null,arguments)}function XZ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var Hut=P.useLayoutEffect,qut=function(t){var n=P.useRef(t);return Hut(function(){n.current=t}),n},Lpe=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},Wut=function(t,n){var r=P.useRef();return P.useCallback(function(i){t.current=i,r.current&&Lpe(r.current,null),r.current=n,n&&Lpe(n,i)},[n])},Bpe={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Gut=function(t){Object.keys(Bpe).forEach(function(n){t.style.setProperty(n,Bpe[n],"important")})},jpe=Gut,dl=null,Upe=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Yut(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),dl||(dl=document.createElement("textarea"),dl.setAttribute("tabindex","-1"),dl.setAttribute("aria-hidden","true"),jpe(dl)),dl.parentNode===null&&document.body.appendChild(dl);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;dl.style[h]=o[h]}),jpe(dl),dl.value=t;var u=Upe(dl,e);dl.value=t,u=Upe(dl,e),dl.value="x";var l=dl.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var zpe=function(){},Kut=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},Xut=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Qut=!!document.documentElement.currentStyle,Jut=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=Kut(Xut,n),i=r.boxSizing;if(i==="")return null;Qut&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},Zut=Jut;function cDe(e,t,n){var r=qut(n);P.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var elt=function(t){cDe(window,"resize",t)},tlt=function(t){cDe(document.fonts,"loadingdone",t)},nlt=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],rlt=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?zpe:o,u=t.onHeightChange,l=u===void 0?zpe:u,c=XZ(t,nlt),f=c.value!==void 0,d=P.useRef(null),h=Wut(d,n),p=P.useRef(0),m=P.useRef(),g=function(){var w=d.current,S=r&&m.current?m.current:Zut(w);if(S){m.current=S;var E=Yut(S,w.value||w.placeholder||"x",s,i),T=E[0],C=E[1];p.current!==T&&(p.current=T,w.style.setProperty("height",T+"px","important"),l(T,{rowHeight:C}))}},y=function(w){f||g(),a(w)};return P.useLayoutEffect(g),elt(g),tlt(g),P.createElement("textarea",lC({},c,{onChange:y,ref:h}))},ilt=P.forwardRef(rlt);const slt={},QZ=nt((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=Ue("Textarea",slt,e),u=n&&A2e()!=="test",l=u?{maxRows:r,minRows:i}:{};return _.jsx(Xd,{component:u?ilt:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});QZ.classes=Xd.classes;QZ.displayName="@mantine/core/Textarea";const[olt,alt]=ja("List component was not found in tree");var JZ={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const ult={},ZZ=nt((e,t)=>{const n=Ue("ListItem",ult,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=alt(),h=u||d.icon,p={classNames:r,styles:o};return _.jsx(Ne,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:_.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&_.jsx("span",{...d.getStyles("itemIcon",p),children:h}),_.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});ZZ.classes=JZ;ZZ.displayName="@mantine/core/ListItem";const llt={type:"unordered"},clt=(e,{size:t,spacing:n})=>({root:{"--list-fz":Fa(t),"--list-lh":b2e(t),"--list-spacing":So(n)}}),ep=nt((e,t)=>{const n=Ue("List",llt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,b=$t({name:"List",classes:JZ,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:clt});return _.jsx(olt,{value:{center:p,icon:d,getStyles:b},children:_.jsx(Ne,{...b("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});ep.classes=JZ;ep.displayName="@mantine/core/List";ep.Item=ZZ;var fDe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const Vpe={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:qf("overlay")},flt=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),kf=nt((e,t)=>{const n=Ue("LoadingOverlay",Vpe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=ko(),g=$t({name:"LoadingOverlay",classes:fDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:flt}),y={...Vpe.overlayProps,...f};return _.jsx(_y,{transition:"fade",...l,mounted:!!d,children:b=>_.jsxs(Ne,{...g("root",{style:b}),ref:t,...p,children:[_.jsx(Yd,{...g("loader"),unstyled:a,...c}),_.jsx(_R,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),_.jsx(_R,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});kf.classes=fDe;kf.displayName="@mantine/core/LoadingOverlay";const[dlt,oP]=ja("Menu component was not found in the tree");var N2={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const hlt={},eee=nt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ue("MenuDivider",hlt,e),u=oP();return _.jsx(Ne,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});eee.classes=N2;eee.displayName="@mantine/core/MenuDivider";const plt={},tee=nt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=Ue("MenuDropdown",plt,e),f=P.useRef(null),d=oP(),h=g=>{var y,b;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(b=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||b.focus())},p=g0(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=g0(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return _.jsxs(au.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:Io(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[_.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});tee.classes=N2;tee.displayName="@mantine/core/MenuDropdown";const mlt={},nee=ga((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=Ue("MenuItem",mlt,e),p=oP(),m=ko(),{dir:g}=ag(),y=P.useRef(),b=p.getItemIndex(y.current),w=h,S=g0(w.onMouseLeave,()=>p.setHovered(-1)),E=g0(w.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),T=g0(w.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),C=g0(w.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),A=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,I=a?og({color:a,theme:m}):null;return _.jsxs(Vo,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:C,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:Io(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===b?!0:void 0,onMouseEnter:E,onMouseLeave:S,onClick:T,onKeyDown:OJ({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:w.onKeydown}),__vars:{"--menu-item-color":I!=null&&I.isThemeColor&&(I==null?void 0:I.shade)===void 0?`var(--mantine-color-${I.color}-6)`:A==null?void 0:A.color,"--menu-item-hover":A==null?void 0:A.hover},children:[l&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&_.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});nee.classes=N2;nee.displayName="@mantine/core/MenuItem";const glt={},ree=nt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ue("MenuLabel",glt,e),u=oP();return _.jsx(Ne,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});ree.classes=N2;ree.displayName="@mantine/core/MenuLabel";const ylt={refProp:"ref"},dDe=P.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=Ue("MenuTarget",ylt,e);if(!vb(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=oP(),o=g0(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=g0(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=g0(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return _.jsx(au.Target,{refProp:r,popupType:"menu",ref:t,...i,children:P.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});dDe.displayName="@mantine/core/MenuTarget";const vlt={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function dc(e){const t=Ue("Menu",vlt,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:b,vars:w,menuItemTabIndex:S,keepMounted:E,...T}=t,C=$t({name:"Menu",classes:N2,props:t,classNames:m,styles:g,unstyled:y}),[A,{setHovered:I,resetHovered:k}]=xnt(),[N,F]=Ho({value:s,defaultValue:o,finalValue:!1,onChange:u}),[M,L]=P.useState(!1),j=()=>{F(!1),L(!1),N&&(i==null||i())},B=()=>{F(!0),!N&&(r==null||r())},z=()=>{N?j():B()},{openDropdown:V,closeDropdown:G}=Mut({open:B,close:j,closeDelay:p,openDelay:h}),$=q=>Ent("[data-menu-item]","[data-menu-dropdown]",q),{resolvedClassNames:W,resolvedStyles:K}=by({classNames:m,styles:g,props:t});return jm(()=>{k()},[N]),_.jsx(dlt,{value:{getStyles:C,opened:N,toggleDropdown:z,getItemIndex:$,hovered:A,setHovered:I,openedViaClick:M,setOpenedViaClick:L,closeOnItemClick:l,closeDropdown:d==="click"?j:G,openDropdown:d==="click"?B:V,closeDropdownImmediately:j,loop:c,trigger:d,unstyled:y,menuItemTabIndex:S},children:_.jsx(au,{...T,opened:N,onChange:z,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:W,styles:K,unstyled:y,variant:b,keepMounted:E,children:n})})}dc.extend=e=>e;dc.classes=N2;dc.displayName="@mantine/core/Menu";dc.Item=nee;dc.Label=ree;dc.Dropdown=tee;dc.Target=dDe;dc.Divider=eee;const[blt,P2]=ja("Modal component was not found in tree");var Ty={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const wlt={},N8=nt((e,t)=>{const n=Ue("ModalBody",wlt,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=P2();return _.jsx(fZ,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});N8.classes=Ty;N8.displayName="@mantine/core/ModalBody";const _lt={},P8=nt((e,t)=>{const n=Ue("ModalCloseButton",_lt,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=P2();return _.jsx(dZ,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});P8.classes=Ty;P8.displayName="@mantine/core/ModalCloseButton";const Elt={},O8=nt((e,t)=>{const n=Ue("ModalContent",Elt,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=P2(),f=c.scrollAreaComponent||DAe;return _.jsx(AAe,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:_.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${qe(c.yOffset)} * 2))`},children:u})})});O8.classes=Ty;O8.displayName="@mantine/core/ModalContent";const xlt={},M8=nt((e,t)=>{const n=Ue("ModalHeader",xlt,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=P2();return _.jsx(hZ,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});M8.classes=Ty;M8.displayName="@mantine/core/ModalHeader";const Slt={},$8=nt((e,t)=>{const n=Ue("ModalOverlay",Slt,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=P2();return _.jsx(pZ,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});$8.classes=Ty;$8.displayName="@mantine/core/ModalOverlay";const Tlt={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:qf("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},Clt=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Wi(t),"--modal-size":Vn(n,"modal-size"),"--modal-y-offset":qe(r),"--modal-x-offset":qe(i)}}),F8=nt((e,t)=>{const n=Ue("ModalRoot",Tlt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=$t({name:m,classes:Ty,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Clt});return _.jsx(blt,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:_.jsx(CAe,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});F8.classes=Ty;F8.displayName="@mantine/core/ModalRoot";const Alt={},L8=nt((e,t)=>{const n=Ue("ModalTitle",Alt,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=P2();return _.jsx(mZ,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});L8.classes=Ty;L8.displayName="@mantine/core/ModalTitle";const Dlt={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:qf("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},qs=nt((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=Ue("Modal",Dlt,e),c=!!n||s;return _.jsxs(F8,{ref:t,radius:u,...l,children:[r&&_.jsx($8,{...i}),_.jsxs(O8,{radius:u,children:[c&&_.jsxs(M8,{children:[n&&_.jsx(L8,{children:n}),s&&_.jsx(P8,{...o})]}),_.jsx(N8,{children:a})]})]})});qs.classes=Ty;qs.displayName="@mantine/core/Modal";qs.Root=F8;qs.Overlay=$8;qs.Content=O8;qs.Body=N8;qs.Header=M8;qs.Title=L8;qs.CloseButton=P8;const[Ilt,iee]=x2(),[klt,Rlt]=x2();var B8={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const Nlt={},Plt=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?Vn(t):Vn(n,"pg-gap")}}),see=nt((e,t)=>{const n=Ue("PillGroup",Nlt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=iee(),h=(d==null?void 0:d.size)||l||void 0,p=$t({name:"PillGroup",classes:B8,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Plt,stylesCtx:{size:h},rootSelector:"group"});return _.jsx(klt,{value:{size:h,disabled:c},children:_.jsx(Ne,{ref:t,size:h,...p("group"),...f})})});see.classes=B8;see.displayName="@mantine/core/PillGroup";const Olt={variant:"default"},Mlt=(e,{radius:t},{size:n})=>({root:{"--pill-fz":Vn(n,"pill-fz"),"--pill-height":Vn(n,"pill-height"),"--pill-radius":t===void 0?void 0:Wi(t)}}),ER=nt((e,t)=>{const n=Ue("Pill",Olt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...b}=n,w=Rlt(),S=iee(),E=m||(w==null?void 0:w.size)||void 0,T=(S==null?void 0:S.variant)==="filled"?"contrast":l||"default",C=$t({name:"Pill",classes:B8,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Mlt,stylesCtx:{size:E}});return _.jsxs(Ne,{component:"span",ref:t,variant:T,size:E,...C("root",{variant:T}),mod:[{"with-remove":f&&!g,disabled:g||(w==null?void 0:w.disabled)},y],...b,children:[_.jsx("span",{...C("label"),children:c}),f&&_.jsx(Ey,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...C("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:A=>{var I;A.preventDefault(),A.stopPropagation(),(I=h==null?void 0:h.onMouseDown)==null||I.call(h,A)},onClick:A=>{var I;A.stopPropagation(),d==null||d(),(I=h==null?void 0:h.onClick)==null||I.call(h,A)}})]})});ER.classes=B8;ER.displayName="@mantine/core/Pill";ER.Group=see;var hDe={field:"m_45c4369d"};const $lt={type:"visible"},oee=nt((e,t)=>{const n=Ue("PillsInputField",$lt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=iee(),g=I2(),y=$t({name:"PillsInputField",classes:hDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),b=c||(m==null?void 0:m.disabled);return _.jsx(Ne,{component:"input",ref:Io(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:b,mod:[{disabled:b,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:w=>!d&&w.stopPropagation()})});oee.classes=hDe;oee.displayName="@mantine/core/PillsInputField";const Flt={},TL=nt((e,t)=>{const n=Ue("PillsInput",Flt,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=P.useRef();return _.jsx(Ilt,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:_.jsx(Xd,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});TL.displayName="@mantine/core/PillsInput";TL.Field=oee;function Llt({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(aC(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const Blt={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},aee=nt((e,t)=>{const n=Ue("MultiSelect",Blt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:b,onDropdownClose:w,selectFirstOptionOnChange:S,onOptionSubmit:E,comboboxProps:T,filter:C,limit:A,withScrollArea:I,maxDropdownHeight:k,searchValue:N,defaultSearchValue:F,onSearchChange:M,readOnly:L,disabled:j,onFocus:B,onBlur:z,onPaste:V,radius:G,rightSection:$,rightSectionWidth:W,rightSectionPointerEvents:K,rightSectionProps:q,leftSection:Y,leftSectionWidth:Z,leftSectionPointerEvents:ae,leftSectionProps:be,inputContainer:Se,inputWrapperOrder:we,withAsterisk:Ce,labelProps:Le,descriptionProps:ke,errorProps:Ze,wrapperProps:Ke,description:Ct,label:wt,error:Re,maxValues:He,searchable:lt,nothingFoundMessage:St,withCheckIcon:Vt,checkIconPosition:ht,hidePickedOptions:Q,withErrorStyles:de,name:_e,form:oe,id:he,clearable:Ee,clearButtonProps:Fe,hiddenInputProps:je,placeholder:ct,hiddenInputValuesDivider:rt,required:qt,mod:en,renderOption:Yt,onRemove:un,onClear:Sn,scrollAreaProps:Bn,...Ci}=n,gi=nl(he),jn=FAe(m),Ki=IZ(jn),ti=jZ({opened:g,defaultOpened:y,onDropdownOpen:b,onDropdownClose:()=>{w==null||w(),ti.resetSelectedOption()}}),{styleProps:Es,rest:{type:Jc,autoComplete:Va,...sl}}=$E(Ci),[Kr,Xi]=Ho({value:c,defaultValue:f,finalValue:[],onChange:d}),[Ai,No]=Ho({value:N,defaultValue:F,finalValue:"",onChange:M}),Go=$t({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:po,resolvedStyles:ve}=by({props:n,styles:o,classNames:r}),ce=Dt=>{h==null||h(Dt),Dt.key===" "&&!lt&&(Dt.preventDefault(),ti.toggleDropdown()),Dt.key==="Backspace"&&Ai.length===0&&Kr.length>0&&(un==null||un(Kr[Kr.length-1]),Xi(Kr.slice(0,Kr.length-1)))},xe=Kr.map((Dt,Wt)=>{var bn,ir;return _.jsx(ER,{withRemoveButton:!L&&!((bn=Ki[Dt])!=null&&bn.disabled),onRemove:()=>{Xi(Kr.filter(gr=>Dt!==gr)),un==null||un(Dt)},unstyled:a,disabled:j,...Go("pill"),children:((ir=Ki[Dt])==null?void 0:ir.label)||Dt},`${Dt}-${Wt}`)});P.useEffect(()=>{S&&ti.selectFirstOption()},[S,Kr]);const Ve=Ee&&Kr.length>0&&!j&&!L&&_.jsx(Wr.ClearButton,{size:l,...Fe,onClear:()=>{Sn==null||Sn(),Xi([]),No("")}}),ze=Llt({data:jn,value:Kr});return _.jsxs(_.Fragment,{children:[_.jsxs(Wr,{store:ti,classNames:po,styles:ve,unstyled:a,size:l,readOnly:L,__staticSelector:"MultiSelect",onOptionSubmit:Dt=>{E==null||E(Dt),No(""),ti.updateSelectedOptionIndex("selected"),Kr.includes(Ki[Dt].value)?(Xi(Kr.filter(Wt=>Wt!==Ki[Dt].value)),un==null||un(Ki[Dt].value)):Kr.length<He&&Xi([...Kr,Ki[Dt].value])},...T,children:[_.jsx(Wr.DropdownTarget,{children:_.jsx(TL,{...Es,__staticSelector:"MultiSelect",classNames:po,styles:ve,unstyled:a,size:l,className:i,style:s,variant:p,disabled:j,radius:G,rightSection:$||Ve||_.jsx(Wr.Chevron,{size:l,error:Re,unstyled:a}),rightSectionPointerEvents:K||(Ve?"all":"none"),rightSectionWidth:W,rightSectionProps:q,leftSection:Y,leftSectionWidth:Z,leftSectionPointerEvents:ae,leftSectionProps:be,inputContainer:Se,inputWrapperOrder:we,withAsterisk:Ce,labelProps:Le,descriptionProps:ke,errorProps:Ze,wrapperProps:Ke,description:Ct,label:wt,error:Re,multiline:!0,withErrorStyles:de,__stylesApiProps:{...n,rightSectionPointerEvents:K||(Ve?"all":"none"),multiline:!0},pointer:!lt,onClick:()=>lt?ti.openDropdown():ti.toggleDropdown(),"data-expanded":ti.dropdownOpened||void 0,id:gi,required:qt,mod:en,children:_.jsxs(ER.Group,{disabled:j,unstyled:a,...Go("pillsList"),children:[xe,_.jsx(Wr.EventsTarget,{autoComplete:Va,children:_.jsx(TL.Field,{...sl,ref:t,id:gi,placeholder:ct,type:!lt&&!ct?"hidden":"visible",...Go("inputField"),unstyled:a,onFocus:Dt=>{B==null||B(Dt),lt&&ti.openDropdown()},onBlur:Dt=>{z==null||z(Dt),ti.closeDropdown(),No("")},onKeyDown:ce,value:Ai,onChange:Dt=>{No(Dt.currentTarget.value),lt&&ti.openDropdown(),S&&ti.selectFirstOption()},disabled:j,readOnly:L||!lt,pointer:!lt})})]})})}),_.jsx(tDe,{data:Q?ze:jn,hidden:L||j,filter:C,search:Ai,limit:A,hiddenWhenEmpty:!lt||!St||Q&&ze.length===0&&Ai.trim().length===0,withScrollArea:I,maxDropdownHeight:k,filterOptions:lt,value:Kr,checkIconPosition:ht,withCheckIcon:Vt,nothingFoundMessage:St,unstyled:a,labelId:wt?`${gi}-label`:void 0,"aria-label":wt?void 0:Ci["aria-label"],renderOption:Yt,scrollAreaProps:Bn})]}),_.jsx(Wr.HiddenInput,{name:_e,valuesDivider:rt,value:Kr,form:oe,disabled:j,...je})]})});aee.classes={...Xd.classes,...Wr.classes};aee.displayName="@mantine/core/MultiSelect";var pDe={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const jlt={},Ult=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":So(r)}}},j8=ga((e,t)=>{const n=Ue("NavLink",jlt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:b,description:w,disableRightSectionRotation:S,noWrap:E,childrenOffset:T,onKeyDown:C,autoContrast:A,mod:I,...k}=n,N=$t({name:"NavLink",props:n,classes:pDe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Ult}),[F,M]=Ho({value:l,defaultValue:c,finalValue:!1,onChange:f}),L=!!d,j=B=>{h==null||h(B),L&&(B.preventDefault(),M(!F))};return _.jsxs(_.Fragment,{children:[_.jsxs(Vo,{...N("root"),component:"a",ref:t,onClick:j,onKeyDown:B=>{C==null||C(B),B.nativeEvent.code==="Space"&&L&&(B.preventDefault(),M(!F))},unstyled:a,mod:[{disabled:m,active:p,expanded:F},I],...k,children:[g&&_.jsx(Ne,{component:"span",...N("section"),mod:{position:"left"},children:g}),_.jsxs(Ne,{...N("body"),mod:{"no-wrap":E},children:[_.jsx(Ne,{component:"span",...N("label"),children:b}),_.jsx(Ne,{component:"span",mod:{active:p},...N("description"),children:w})]}),(L||y)&&_.jsx(Ne,{...N("section"),component:"span",mod:{rotate:F&&!S,position:"right"},children:L?y||_.jsx(oC,{...N("chevron")}):y})]}),_.jsx(p8,{in:F,...N("collapse"),children:_.jsx("div",{...N("children"),children:d})})]})});j8.classes=pDe;j8.displayName="@mantine/core/NavLink";var mDe={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const zlt={withCloseButton:!0},Vlt=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Wi(t),"--notification-color":n?Bi(n,e):void 0}}),uee=nt((e,t)=>{const n=Ue("Notification",zlt,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:y,variant:b,vars:w,mod:S,...E}=n,T=$t({name:"Notification",classes:mDe,props:n,className:r,style:m,classNames:p,styles:g,unstyled:y,vars:w,varsResolver:Vlt});return _.jsxs(Ne,{...T("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},S],ref:t,variant:b,...E,role:"alert",children:[c&&!o&&_.jsx("div",{...T("icon"),children:c}),o&&_.jsx(Yd,{size:28,color:i,...T("loader")}),_.jsxs("div",{...T("body"),children:[l&&_.jsx("div",{...T("title"),children:l}),_.jsx(Ne,{...T("description"),mod:{"data-with-title":!!l},children:f})]}),a&&_.jsx(Ey,{iconSize:16,color:"gray",...h,unstyled:y,onClick:d,...T("closeButton")})]})});uee.classes=mDe;uee.displayName="@mantine/core/Notification";function gDe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var xR;(function(e){e.event="event",e.props="prop"})(xR||(xR={}));function Rv(){}function Hlt(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function SR(e){return!!(e||"").match(/\d/)}function mT(e){return e==null}function qlt(e){return typeof e=="number"&&isNaN(e)}function yDe(e){return mT(e)||qlt(e)||typeof e=="number"&&!isFinite(e)}function vDe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Wlt(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function Glt(e,t,n){var r=Wlt(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function Ylt(e){var t=P.useRef(e);t.current=e;var n=P.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function lee(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function Klt(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function bDe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function Hpe(e,t){return Array(t+1).join(e)}function wDe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+Hpe("0",Math.abs(o))+i:o>=a?i=i+Hpe("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function qpe(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=lee(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=bDe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function qw(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var _De=Hlt(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),Xlt=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function Qlt(e,t,n){return Math.min(Math.max(e,t),n)}function Mz(e){return Math.max(e.selectionStart,e.selectionEnd)}function Jlt(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Zlt(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function ect(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function tct(e,t,n,r,i,s,o){o===void 0&&(o=ect);var a=i.findIndex(function(S){return S}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var b=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var w=y===-1||d[y]===-1?0:d[y]+1;return w>b?b:r-w<b-r?w:b}function Wpe(e,t,n,r){var i=e.length;if(t=Qlt(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function nct(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(SR(e[n])||SR(e[n-1]));return t}function EDe(e,t,n,r,i,s){s===void 0&&(s=Rv);var o=Ylt(function(p,m){var g,y;return yDe(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?wDe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=P.useState(function(){return o(mT(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;mT(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return P.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function rct(e){return e.replace(/[^0-9]/g,"")}function ict(e){return e}function sct(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=ict);var a=e.removeFormatting;a===void 0&&(a=rct);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=Rv);var h=e.onKeyDown;h===void 0&&(h=Rv);var p=e.onMouseUp;p===void 0&&(p=Rv);var m=e.onFocus;m===void 0&&(m=Rv);var g=e.onBlur;g===void 0&&(g=Rv);var y=e.value,b=e.getCaretBoundary;b===void 0&&(b=nct);var w=e.isValidInputCharacter;w===void 0&&(w=SR);var S=e.isCharacterSame,E=gDe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),T=EDe(y,u,!!l,o,a,c),C=T[0],A=C.formattedValue,I=C.numAsString,k=T[1],N=P.useRef(),F=P.useRef({formattedValue:A,numAsString:I}),M=function(Re,He){F.current={formattedValue:Re.formattedValue,numAsString:Re.value},k(Re,He)},L=P.useState(!1),j=L[0],B=L[1],z=P.useRef(null),V=P.useRef({setCaretTimeout:null,focusTimeout:null});P.useEffect(function(){return B(!0),function(){clearTimeout(V.current.setCaretTimeout),clearTimeout(V.current.focusTimeout)}},[]);var G=o,$=function(Re,He){var lt=parseFloat(He);return{formattedValue:Re,value:He,floatValue:isNaN(lt)?void 0:lt}},W=function(Re,He,lt){Re.selectionStart===0&&Re.selectionEnd===Re.value.length||(qw(Re,He),V.current.setCaretTimeout=setTimeout(function(){Re.value===lt&&Re.selectionStart!==He&&qw(Re,He)},0))},K=function(Re,He,lt){return Wpe(Re,He,b(Re),lt)},q=function(Re,He,lt){var St=b(He),Vt=tct(He,A,Re,lt,St,w,S);return Vt=Wpe(He,Vt,St),Vt},Y=function(Re){var He=Re.formattedValue;He===void 0&&(He="");var lt=Re.input,St=Re.source,Vt=Re.event,ht=Re.numAsString,Q;if(lt){var de=Re.inputValue||lt.value,_e=Mz(lt);lt.value=He,Q=q(de,He,_e),Q!==void 0&&W(lt,Q,He)}He!==A&&M($(He,ht),{event:Vt,source:St})};P.useEffect(function(){var Re=F.current,He=Re.formattedValue,lt=Re.numAsString;(A!==He||I!==lt)&&M($(A,I),{event:void 0,source:xR.props})},[A,I]);var Z=z.current?Mz(z.current):void 0,ae=typeof window<"u"?P.useLayoutEffect:P.useEffect;ae(function(){var Re=z.current;if(A!==F.current.formattedValue&&Re){var He=q(F.current.formattedValue,A,Z);Re.value=A,W(Re,He,A)}},[A]);var be=function(Re,He,lt){var St=He.target,Vt=N.current?Xlt(N.current,St.selectionEnd):_De(A,Re),ht=Object.assign(Object.assign({},Vt),{lastValue:A}),Q=a(Re,ht),de=G(Q);if(Q=a(de,void 0),f&&!f($(de,Q))){var _e=He.target,oe=Mz(_e),he=q(Re,A,oe);return _e.value=A,W(_e,he,A),!1}return Y({formattedValue:de,numAsString:Q,inputValue:Re,event:He,source:lt,input:He.target}),!0},Se=function(Re,He){He===void 0&&(He=0);var lt=Re.selectionStart,St=Re.selectionEnd;N.current={selectionStart:lt,selectionEnd:St+He}},we=function(Re){var He=Re.target,lt=He.value,St=be(lt,Re,xR.event);St&&d(Re),N.current=void 0},Ce=function(Re){var He=Re.target,lt=Re.key,St=He.selectionStart,Vt=He.selectionEnd,ht=He.value;ht===void 0&&(ht="");var Q;lt==="ArrowLeft"||lt==="Backspace"?Q=Math.max(St-1,0):lt==="ArrowRight"?Q=Math.min(St+1,ht.length):lt==="Delete"&&(Q=St);var de=0;lt==="Delete"&&St===Vt&&(de=1);var _e=lt==="ArrowLeft"||lt==="ArrowRight";if(Q===void 0||St!==Vt&&!_e){h(Re),Se(He,de);return}var oe=Q;if(_e){var he=lt==="ArrowLeft"?"left":"right";oe=K(ht,Q,he),oe!==Q&&Re.preventDefault()}else lt==="Delete"&&!w(ht[Q])?oe=K(ht,Q,"right"):lt==="Backspace"&&!w(ht[Q])&&(oe=K(ht,Q,"left"));oe!==Q&&W(He,oe,ht),h(Re),Se(He,de)},Le=function(Re){var He=Re.target,lt=function(){var St=He.selectionStart,Vt=He.selectionEnd,ht=He.value;if(ht===void 0&&(ht=""),St===Vt){var Q=K(ht,St);Q!==St&&W(He,Q,ht)}};lt(),requestAnimationFrame(function(){lt()}),p(Re),Se(He)},ke=function(Re){Re.persist&&Re.persist();var He=Re.target,lt=Re.currentTarget;z.current=He,V.current.focusTimeout=setTimeout(function(){var St=He.selectionStart,Vt=He.selectionEnd,ht=He.value;ht===void 0&&(ht="");var Q=K(ht,St);Q!==St&&!(St===0&&Vt===ht.length)&&W(He,Q,ht),m(Object.assign(Object.assign({},Re),{currentTarget:lt}))},0)},Ze=function(Re){z.current=null,clearTimeout(V.current.focusTimeout),clearTimeout(V.current.setCaretTimeout),g(Re)},Ke=j&&Jlt()?"numeric":void 0,Ct=Object.assign({inputMode:Ke},E,{type:t,value:A,onChange:we,onKeyDown:Ce,onMouseUp:Le,onFocus:ke,onBlur:Ze});if(n==="text")return i?xi.createElement(xi.Fragment,null,i(A,E)||null):xi.createElement("span",Object.assign({},E,{ref:s}),A);if(r){var wt=r;return xi.createElement(wt,Object.assign({},Ct,{ref:s}))}return xi.createElement("input",Object.assign({},Ct,{ref:s}))}function Gpe(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=U8(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=lee(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=bDe(p,n,!!r)),l&&(h=Glt(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function U8(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function oct(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function act(e,t){return new RegExp("(^-)|[0-9]|"+vDe(e),"g")}function uct(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function lct(e,t,n){var r;t===void 0&&(t=Zlt(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=U8(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(SR(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(z,V,G){var $=!1,W=!1;s.startsWith("-")?$=!1:z.startsWith("--")?($=!1,W=!0):o.startsWith("-")&&z.length===o.length?$=!1:z[0]==="-"&&($=!0);var K=$?1:0;return W&&(K=2),K&&(z=z.substring(K),V-=K,G-=K),{value:z,start:V,end:G,hasNegation:$}},b=y(e,c,f),w=b.hasNegation;r=b,e=r.value,c=r.start,f=r.end;var S=y(t.lastValue,u.start,u.end),E=S.start,T=S.end,C=S.value,A=e.substring(c,f);e.length&&C.length&&(E>C.length-o.length||T<s.length)&&!(A&&o.startsWith(A))&&(e=C);var I=0;e.startsWith(s)?I+=s.length:c<s.length&&(I=c),e=e.substring(I),f-=I;var k=e.length,N=e.length-o.length;e.endsWith(o)?k=N:(f>N||f>e.length-o.length)&&(k=f),e=e.substring(0,k),e=oct(w?"-"+e:e,i),e=(e.match(act(p))||[]).join("");var F=e.indexOf(p);e=e.replace(new RegExp(vDe(p),"g"),function(z,V){return V===F?".":""});var M=lee(e,i),L=M.beforeDecimal,j=M.afterDecimal,B=M.addNegation;return l.end-l.start<u.end-u.start&&L===""&&m&&!parseFloat(j)&&(e=B?"-":""),e}function cct(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function fct(e){var t=U8(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function dct(e){e=fct(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=Rv);var s=e.onBlur;s===void 0&&(s=Rv);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=gDe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=U8(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,b=function(B){return Gpe(B,e)},w=function(B,z){return lct(B,z,e)},S=mT(f)?c:f,E=d??uct(S,l,t);mT(f)?mT(c)||(E=E||typeof c=="number"):E=E||typeof f=="number";var T=function(B){return yDe(B)?B:(typeof B=="number"&&(B=wDe(B)),E&&typeof a=="number"?qpe(B,a,!!u):B)},C=EDe(T(f),T(c),!!E,b,w,h),A=C[0],I=A.numAsString,k=A.formattedValue,N=C[1],F=function(B){var z=B.target,V=B.key,G=z.selectionStart,$=z.selectionEnd,W=z.value;if(W===void 0&&(W=""),(V==="Backspace"||V==="Delete")&&$<l.length){B.preventDefault();return}if(G!==$){i(B);return}V==="Backspace"&&W[0]==="-"&&G===l.length+1&&n&&qw(z,1),a&&u&&(V==="Backspace"&&W[G-1]===g?(qw(z,G-1),B.preventDefault()):V==="Delete"&&W[G]===g&&B.preventDefault()),y!=null&&y.includes(V)&&W[G]===g&&qw(z,G+1);var K=o===!0?",":o;V==="Backspace"&&W[G-1]===K&&qw(z,G-1),V==="Delete"&&W[G]===K&&qw(z,G+1),i(B)},M=function(B){var z=I;if(z.match(/\d/g)||(z=""),r||(z=Klt(z)),u&&a&&(z=qpe(z,a,u)),z!==I){var V=Gpe(z,e);N({formattedValue:V,value:z,floatValue:parseFloat(z)},{event:B,source:xR.event})}s(B)},L=function(B){return B===g?!0:SR(B)},j=function(B){var z=B.currentValue,V=B.lastValue,G=B.formattedValue,$=B.currentValueIndex,W=B.formattedValueIndex,K=z[$],q=G[W],Y=_De(V,z),Z=Y.to;return $>=Z.start&&$<Z.end&&y&&y.includes(K)&&q===g?!0:K===q};return Object.assign(Object.assign({},p),{value:k,valueIsNumericString:!1,isValidInputCharacter:L,isCharacterSame:j,onValueChange:N,format:b,removeFormatting:w,getCaretBoundary:function(B){return cct(B,e)},onKeyDown:F,onBlur:M})}function hct(e){var t=dct(e);return xi.createElement(sct,Object.assign({},t))}function Ype({direction:e,style:t,...n}){return _.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var KW={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const pct=/^(0\.0*|-0(\.0*)?)$/,mct=/^-?0\d+(\.\d+)?\.?$/;function gct(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function Kpe(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const yct={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},vct=(e,{size:t})=>({controls:{"--ni-chevron-size":Vn(t,"ni-chevron-size")}}),cee=nt((e,t)=>{const n=Ue("NumberInput",yct,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:b,onBlur:w,allowDecimal:S,decimalScale:E,onKeyDown:T,onKeyDownCapture:C,handlersRef:A,startValue:I,disabled:k,rightSectionPointerEvents:N,allowNegative:F,readOnly:M,size:L,rightSectionWidth:j,stepHoldInterval:B,stepHoldDelay:z,allowLeadingZeros:V,withKeyboardEvents:G,trimLeadingZeroesOnBlur:$,...W}=n,K=$t({name:"NumberInput",classes:KW,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:vct}),{resolvedClassNames:q,resolvedStyles:Y}=by({classNames:i,styles:s,props:n}),[Z,ae]=Ho({value:c,defaultValue:f,onChange:u}),be=z!==void 0&&B!==void 0,Se=P.useRef(null),we=P.useRef(null),Ce=P.useRef(0),Le=(Q,de)=>{de.source==="event"&&ae(gct(Q.floatValue)&&!pct.test(Q.value)&&!(V&&mct.test(Q.value))?Q.floatValue:Q.value),l==null||l(Q,de)},ke=Q=>{const de=String(Q).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return de?Math.max(0,(de[1]?de[1].length:0)-(de[2]?+de[2]:0)):0},Ze=Q=>{Se.current&&typeof Q<"u"&&Se.current.setSelectionRange(Q,Q)},Ke=P.useRef();Ke.current=()=>{let Q;const de=ke(Z),_e=ke(p),oe=Math.max(de,_e),he=10**oe;if(typeof Z!="number"||Number.isNaN(Z))Q=gm(I,h,d);else if(d!==void 0){const Fe=(Math.round(Z*he)+Math.round(p*he))/he;Q=Fe<=d?Fe:d}else Q=(Math.round(Z*he)+Math.round(p*he))/he;const Ee=Q.toFixed(oe);ae(parseFloat(Ee)),l==null||l({floatValue:parseFloat(Ee),formattedValue:Ee,value:Ee},{source:"increment"}),setTimeout(()=>{var Fe;return Ze((Fe=Se.current)==null?void 0:Fe.value.length)},0)};const Ct=P.useRef();Ct.current=()=>{let Q;const de=h!==void 0?h:F?Number.MIN_SAFE_INTEGER:0,_e=ke(Z),oe=ke(p),he=Math.max(_e,oe),Ee=10**he;if(typeof Z!="number"||Number.isNaN(Z))Q=gm(I,de,d);else{const je=(Math.round(Z*Ee)-Math.round(p*Ee))/Ee;Q=de!==void 0&&je<de?de:je}const Fe=Q.toFixed(he);ae(parseFloat(Fe)),l==null||l({floatValue:parseFloat(Fe),formattedValue:Fe,value:Fe},{source:"decrement"}),setTimeout(()=>{var je;return Ze((je=Se.current)==null?void 0:je.value.length)},0)};const wt=Q=>{T==null||T(Q),!(M||!G)&&(Q.key==="ArrowUp"&&(Q.preventDefault(),Ke.current()),Q.key==="ArrowDown"&&(Q.preventDefault(),Ct.current()))},Re=Q=>{if(C==null||C(Q),Q.key==="Backspace"){const de=Se.current;de.selectionStart===0&&de.selectionStart===de.selectionEnd&&(Q.preventDefault(),window.setTimeout(()=>Ze(0),0))}};FJ(A,{increment:Ke.current,decrement:Ct.current});const He=Q=>{Q?Ke.current():Ct.current(),Ce.current+=1},lt=Q=>{if(He(Q),be){const de=typeof B=="number"?B:B(Ce.current);we.current=window.setTimeout(()=>lt(Q),de)}},St=(Q,de)=>{var _e;Q.preventDefault(),(_e=Se.current)==null||_e.focus(),He(de),be&&(we.current=window.setTimeout(()=>lt(de),z))},Vt=()=>{we.current&&window.clearTimeout(we.current),we.current=null,Ce.current=0},ht=_.jsxs("div",{...K("controls"),children:[_.jsx(Vo,{...K("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof Z=="number"&&d!==void 0&&Z>=d,mod:{direction:"up"},onMouseDown:Q=>Q.preventDefault(),onPointerDown:Q=>{St(Q,!0)},onPointerUp:Vt,onPointerLeave:Vt,children:_.jsx(Ype,{direction:"up"})}),_.jsx(Vo,{...K("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof Z=="number"&&h!==void 0&&Z<=h,mod:{direction:"down"},onMouseDown:Q=>Q.preventDefault(),onPointerDown:Q=>{St(Q,!1)},onPointerUp:Vt,onPointerLeave:Vt,children:_.jsx(Ype,{direction:"down"})})]});return _.jsx(Xd,{component:hct,allowNegative:F,className:co(KW.root,r),size:L,...W,readOnly:M,disabled:k,value:Z,getInputRef:Io(t,Se),onValueChange:Le,rightSection:m||M?g:g||ht,classNames:q,styles:Y,unstyled:o,__staticSelector:"NumberInput",decimalScale:S?E:0,onKeyDown:wt,onKeyDownCapture:Re,rightSectionPointerEvents:N??(k?"none":void 0),rightSectionWidth:j??`var(--ni-right-section-width-${L||"sm"})`,allowLeadingZeros:V,onBlur:Q=>{if(w==null||w(Q),b==="blur"&&typeof Z=="number"&&gm(Z,h,d)!==Z&&ae(gm(Z,h,d)),$&&typeof Z=="string"){const de=Z.replace(/^0+/,""),_e=parseFloat(de);ae(Number.isNaN(_e)?de:_e)}},isAllowed:Q=>b==="strict"?y?y(Q)&&Kpe(Q.floatValue,h,d):Kpe(Q.floatValue,h,d):y?y(Q):!0})});cee.classes={...Xd.classes,...KW};cee.displayName="@mantine/core/NumberInput";const[bct,xDe]=ja("Progress.Root component was not found in tree");var aP={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const wct={},fee=nt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ue("ProgressLabel",wct,e),u=xDe();return _.jsx(Ne,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});fee.classes=aP;fee.displayName="@mantine/core/ProgressLabel";const _ct={},Ect=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":Vn(t,"progress-size"),"--progress-radius":n===void 0?void 0:Wi(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),z8=nt((e,t)=>{const n=Ue("ProgressRoot",_ct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=$t({name:"Progress",classes:aP,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Ect});return _.jsx(bct,{value:{getStyles:d,autoContrast:l},children:_.jsx(Ne,{ref:t,...d("root"),...f})})});z8.classes=aP;z8.displayName="@mantine/core/ProgressRoot";const xct={withAria:!0},V8=nt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=Ue("ProgressSection",xct,e),p=xDe(),m=ko(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return _.jsx(Ne,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Bi(l,m),"--progress-label-color":S2(p.autoContrast,m)?wb({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});V8.classes=aP;V8.displayName="@mantine/core/ProgressSection";const Sct={},O2=nt((e,t)=>{const n=Ue("Progress",Sct,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=by({classNames:i,styles:s,props:n});return _.jsx(z8,{ref:t,classNames:d,styles:h,vars:o,...f,children:_.jsx(V8,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});O2.classes=aP;O2.displayName="@mantine/core/Progress";O2.Section=V8;O2.Root=z8;O2.Label=fee;const[Tct,SDe]=x2(),[Cct,Act]=x2();var TDe={card:"m_9dc8ae12"};const Dct={withBorder:!0},Ict=(e,{radius:t})=>({card:{"--card-radius":Wi(t)}}),dee=nt((e,t)=>{const n=Ue("RadioCard",Dct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=$t({name:"RadioCard",classes:TDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Ict,rootSelector:"card"}),{dir:b}=ag(),w=SDe(),S=typeof l=="boolean"?l:(w==null?void 0:w.value)===d||!1,E=p||(w==null?void 0:w.name),T=C=>{if(m==null||m(C),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(C.nativeEvent.code)){C.preventDefault();const A=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),I=A.findIndex(F=>F===C.target),k=I+1>=A.length?0:I+1,N=I-1<0?A.length-1:I-1;C.nativeEvent.code==="ArrowDown"&&(A[k].focus(),A[k].click()),C.nativeEvent.code==="ArrowUp"&&(A[N].focus(),A[N].click()),C.nativeEvent.code==="ArrowLeft"&&(A[b==="ltr"?N:k].focus(),A[b==="ltr"?N:k].click()),C.nativeEvent.code==="ArrowRight"&&(A[b==="ltr"?k:N].focus(),A[b==="ltr"?k:N].click())}};return _.jsx(Cct,{value:{checked:S},children:_.jsx(Vo,{ref:t,mod:[{"with-border":f,checked:S},c],...y("card"),...g,role:"radio","aria-checked":S,name:E,onClick:C=>{h==null||h(C),w==null||w.onChange(d||"")},onKeyDown:T})})});dee.displayName="@mantine/core/RadioCard";dee.classes=TDe;const kct={},hee=nt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=Ue("RadioGroup",kct,e),f=nl(u),[d,h]=Ho({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return _.jsx(Tct,{value:{value:d,onChange:p,size:s,name:f},children:_.jsx(ws.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:_.jsx(zZ,{role:"radiogroup",children:a})})})});hee.classes=ws.Wrapper.classes;hee.displayName="@mantine/core/RadioGroup";function CDe({size:e,style:t,...n}){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:qe(e),height:qe(e),...t},"aria-hidden":!0,...n,children:_.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var ADe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const Rct={icon:CDe},Nct=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=og({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":Vn(r,"radio-size"),"--radio-radius":t===void 0?void 0:Wi(t),"--radio-color":s==="outline"?u:Bi(n,e),"--radio-icon-size":Vn(r,"radio-icon-size"),"--radio-icon-color":i?Bi(i,e):S2(o,e)?wb({color:n,theme:e,autoContrast:o}):void 0}}},pee=nt((e,t)=>{const n=Ue("RadioIndicator",Rct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...b}=n,w=l,S=$t({name:"RadioIndicator",classes:ADe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Nct,rootSelector:"indicator"}),E=Act(),T=typeof p=="boolean"?p:(E==null?void 0:E.checked)||!1;return _.jsx(Ne,{ref:t,...S("indicator",{variant:g}),variant:g,mod:[{checked:T,disabled:y},m],...b,children:_.jsx(w,{...S("icon")})})});pee.displayName="@mantine/core/RadioIndicator";pee.classes=ADe;var DDe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const Pct={labelPosition:"right"},Oct=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=og({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":Vn(t,"radio-size"),"--radio-radius":n===void 0?void 0:Wi(n),"--radio-color":s==="outline"?u:Bi(r,e),"--radio-icon-color":i?Bi(i,e):S2(o,e)?wb({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":Vn(t,"radio-icon-size")}}},K0=nt((e,t)=>{const n=Ue("Radio",Pct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:b,wrapperProps:w,icon:S=CDe,rootRef:E,iconColor:T,onChange:C,mod:A,...I}=n,k=$t({name:"Radio",classes:DDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Oct}),N=SDe(),F=(N==null?void 0:N.size)??c,M=n.size?c:F,{styleProps:L,rest:j}=$E(I),B=nl(l),z=N?{checked:N.value===j.value,name:j.name??N.name,onChange:V=>{N.onChange(V),C==null||C(V)}}:{};return _.jsx(E8,{...k("root"),__staticSelector:"Radio",__stylesApiProps:n,id:B,size:M,labelPosition:d,label:f,description:h,error:p,disabled:b,classNames:r,styles:o,unstyled:a,"data-checked":z.checked||void 0,variant:y,ref:E,mod:A,...L,...w,children:_.jsxs(Ne,{...k("inner"),mod:{"label-position":d},children:[_.jsx(Ne,{...k("radio",{focusable:!0,variant:y}),onChange:C,...j,...z,component:"input",mod:{error:!!p},ref:t,id:B,disabled:b,type:"radio"}),_.jsx(S,{...k("icon"),"aria-hidden":!0})]})})});K0.classes=DDe;K0.displayName="@mantine/core/Radio";K0.Group=hee;K0.Card=dee;K0.Indicator=pee;const Mct={duration:100,transition:"fade"};function $ct(e,t){return{...Mct,...t,...e}}function Fct({offset:e,position:t}){const[n,r]=P.useState(!1),i=P.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=aZ({placement:t,middleware:[rZ({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=P.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return P.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=I0(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var H8={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const Lct={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:qf("popover")},Bct=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Wi(t),"--tooltip-bg":n?Bi(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),mee=nt((e,t)=>{const n=Ue("TooltipFloating",Lct,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:b,variant:w,vars:S,portalProps:E,...T}=n,C=ko(),A=$t({name:"TooltipFloating",props:n,classes:H8,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:S,varsResolver:Bct}),{handleMouseMove:I,x:k,y:N,opened:F,boundaryRef:M,floating:L,setOpened:j}=Fct({offset:p,position:m});if(!vb(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const B=Io(M,r.ref,t),z=G=>{var $,W;(W=($=r.props).onMouseEnter)==null||W.call($,G),I(G),j(!0)},V=G=>{var $,W;(W=($=r.props).onMouseLeave)==null||W.call($,G),j(!1)};return _.jsxs(_.Fragment,{children:[_.jsx(D2,{...E,withinPortal:s,children:_.jsx(Ne,{...T,...A("tooltip",{style:{...VJ(o,C),zIndex:y,display:!b&&F?"block":"none",top:(N&&Math.round(N))??"",left:(k&&Math.round(k))??""}}),variant:w,ref:L,mod:{multiline:g},children:h})}),P.cloneElement(r,{...r.props,[i]:B,onMouseEnter:z,onMouseLeave:V})]})});mee.classes=H8;mee.displayName="@mantine/core/TooltipFloating";const IDe=P.createContext(!1),jct=IDe.Provider,Uct=()=>P.useContext(IDe),zct={openDelay:0,closeDelay:0};function kDe(e){const{openDelay:t,closeDelay:n,children:r}=Ue("TooltipGroup",zct,e);return _.jsx(jct,{value:!0,children:_.jsx(Fst,{delay:{open:t,close:n},children:r})})}kDe.displayName="@mantine/core/TooltipGroup";function Vct(e){var T,C,A;const[t,n]=P.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=Uct(),o=nl(),{delay:a,currentId:u,setCurrentId:l}=hAe(),c=P.useCallback(I=>{n(I),I&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:b}={}}}=aZ({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[uAe(e.offset),rZ({padding:8}),qW(),lAe({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[WW()]:[]]}),{getReferenceProps:w,getFloatingProps:S}=Hst([$st(h,{enabled:(T=e.events)==null?void 0:T.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((C=e.events)!=null&&C.touch)}),Vst(h,{enabled:(A=e.events)==null?void 0:A.focus,visibleOnly:!0}),Wst(h,{role:"tooltip"}),Ust(h,{enabled:typeof e.opened>"u"}),Lst(h,{id:o})]);wAe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),jm(()=>{var I;(I=e.onPositionChange)==null||I.call(e,g)},[g]);const E=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:b,reference:p.setReference,floating:p.setFloating,getFloatingProps:S,getReferenceProps:w,isGroupPhase:E,opened:i,placement:g}}const Xpe={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:qf("popover"),positionDependencies:[]},Hct=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Wi(t),"--tooltip-bg":n?Bi(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),hs=nt((e,t)=>{const n=Ue("Tooltip",Xpe,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:b,withArrow:w,arrowSize:S,arrowOffset:E,arrowRadius:T,arrowPosition:C,offset:A,transitionProps:I,multiline:k,events:N,zIndex:F,disabled:M,positionDependencies:L,onClick:j,onMouseEnter:B,onMouseLeave:z,inline:V,variant:G,keepMounted:$,vars:W,portalProps:K,mod:q,floatingStrategy:Y,...Z}=Ue("Tooltip",Xpe,n),{dir:ae}=ag(),be=P.useRef(null),Se=Vct({position:pAe(ae,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:N,arrowRef:be,arrowOffset:E,offset:typeof A=="number"?A+(w?S/2:0):A,positionDependencies:[...L,r],inline:V,strategy:Y}),we=$t({name:"Tooltip",props:n,classes:H8,className:b,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:W,varsResolver:Hct});if(!vb(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Ce=Io(Se.reference,r.ref,t),Le=$ct(I,{duration:100,transition:"fade"});return _.jsxs(_.Fragment,{children:[_.jsx(D2,{...K,withinPortal:f,children:_.jsx(_y,{...Le,keepMounted:$,mounted:!M&&!!Se.opened,duration:Se.isGroupPhase?10:Le.duration,children:ke=>_.jsxs(Ne,{...Z,variant:G,mod:[{multiline:k},q],...Se.getFloatingProps({ref:Se.floating,className:we("tooltip").className,style:{...we("tooltip").style,...ke,zIndex:F,top:Se.y??0,left:Se.x??0}}),children:[o,_.jsx(uZ,{ref:be,arrowX:Se.arrowX,arrowY:Se.arrowY,visible:w,position:Se.placement,arrowSize:S,arrowOffset:E,arrowRadius:T,arrowPosition:C,...we("arrow")})]})})}),P.cloneElement(r,Se.getReferenceProps({onClick:j,onMouseEnter:B,onMouseLeave:z,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:Ce,className:co(b,r.props.className),...r.props}))]})});hs.classes=H8;hs.displayName="@mantine/core/Tooltip";hs.Floating=mee;hs.Group=kDe;var RDe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const qct={withItemsBorders:!0},Wct=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Wi(t),"--sc-color":n?Bi(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":Vn(i,"sc-padding"),"--sc-font-size":Fa(i)}}),q8=nt((e,t)=>{var ae,be;const n=Ue("SegmentedControl",qct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:b,radius:w,color:S,transitionDuration:E,transitionTimingFunction:T,variant:C,autoContrast:A,withItemsBorders:I,mod:k,...N}=n,F=$t({name:"SegmentedControl",props:n,classes:RDe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Wct}),M=ko(),L=l.map(Se=>typeof Se=="string"?{label:Se,value:Se}:Se),j=Gnt(),[B,z]=P.useState(null),[V,G]=P.useState({}),$=(Se,we)=>{V[we]=Se,G(V)},[W,K]=Ho({value:c,defaultValue:f,finalValue:Array.isArray(l)?((ae=L.find(Se=>!Se.disabled))==null?void 0:ae.value)??((be=l[0])==null?void 0:be.value)??null:null,onChange:d}),q=nl(p),Y=L.map(Se=>P.createElement(Ne,{...F("control"),mod:{active:W===Se.value,orientation:b},key:Se.value},P.createElement("input",{...F("input"),disabled:m||Se.disabled,type:"radio",name:q,value:Se.value,id:`${q}-${Se.value}`,checked:W===Se.value,onChange:()=>!g&&K(Se.value),"data-focus-ring":M.focusRing,key:`${Se.value}-input`}),P.createElement(Ne,{component:"label",...F("label"),mod:{active:W===Se.value&&!(m||Se.disabled),disabled:m||Se.disabled,"read-only":g},htmlFor:`${q}-${Se.value}`,ref:we=>$(we,Se.value),__vars:{"--sc-label-color":S!==void 0?wb({color:S,theme:M,autoContrast:A}):void 0},key:`${Se.value}-label`},_.jsx("span",{...F("innerLabel"),children:Se.label})))),Z=Io(t,Se=>z(Se));return l.length===0?null:_.jsxs(Ne,{...F("root"),variant:C,size:h,ref:Z,mod:[{"full-width":y,orientation:b,initialized:j,"with-items-borders":I},k],...N,role:"radiogroup",children:[typeof W=="string"&&_.jsx(vZ,{target:V[W],parent:B,component:"span",transitionDuration:"var(--sc-transition-duration)",...F("indicator")}),Y]})});q8.classes=RDe;q8.displayName="@mantine/core/SegmentedControl";const Gct={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},uP=nt((e,t)=>{const n=Ue("Select",Gct,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:b,onOptionSubmit:w,comboboxProps:S,readOnly:E,disabled:T,filter:C,limit:A,withScrollArea:I,maxDropdownHeight:k,size:N,searchable:F,rightSection:M,checkIconPosition:L,withCheckIcon:j,nothingFoundMessage:B,name:z,form:V,searchValue:G,defaultSearchValue:$,onSearchChange:W,allowDeselect:K,error:q,rightSectionPointerEvents:Y,id:Z,clearable:ae,clearButtonProps:be,hiddenInputProps:Se,renderOption:we,onClear:Ce,autoComplete:Le,scrollAreaProps:ke,...Ze}=n,Ke=P.useMemo(()=>FAe(m),[m]),Ct=P.useMemo(()=>IZ(Ke),[Ke]),wt=nl(Z),[Re,He,lt]=Ho({value:g,defaultValue:y,finalValue:null,onChange:p}),St=typeof Re=="string"?Ct[Re]:void 0,[Vt,ht]=Ho({value:G,defaultValue:$,finalValue:St?St.label:"",onChange:W}),Q=jZ({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),Q.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),Q.resetSelectedOption()}}),{resolvedClassNames:de,resolvedStyles:_e}=by({props:n,styles:i,classNames:r});P.useEffect(()=>{b&&Q.selectFirstOption()},[b,Re]),P.useEffect(()=>{g===null&&ht(""),typeof g=="string"&&St&&ht(St.label)},[g,St]);const oe=ae&&!!Re&&!T&&!E&&_.jsx(Wr.ClearButton,{size:N,...be,onClear:()=>{He(null,null),ht(""),Ce==null||Ce()}});return _.jsxs(_.Fragment,{children:[_.jsxs(Wr,{store:Q,__staticSelector:"Select",classNames:de,styles:_e,unstyled:s,readOnly:E,onOptionSubmit:he=>{w==null||w(he);const Ee=K&&Ct[he].value===Re?null:Ct[he],Fe=Ee?Ee.value:null;He(Fe,Ee),!lt&&ht(typeof Fe=="string"&&(Ee==null?void 0:Ee.label)||""),Q.closeDropdown()},size:N,...S,children:[_.jsx(Wr.Target,{targetType:F?"input":"button",autoComplete:Le,children:_.jsx(Xd,{id:wt,ref:t,rightSection:M||oe||_.jsx(Wr.Chevron,{size:N,error:q,unstyled:s}),rightSectionPointerEvents:Y||(oe?"all":"none"),...Ze,size:N,__staticSelector:"Select",disabled:T,readOnly:E||!F,value:Vt,onChange:he=>{ht(he.currentTarget.value),Q.openDropdown(),b&&Q.selectFirstOption()},onFocus:he=>{F&&Q.openDropdown(),f==null||f(he)},onBlur:he=>{var Ee;F&&Q.closeDropdown(),ht(Re!=null&&((Ee=Ct[Re])==null?void 0:Ee.label)||""),d==null||d(he)},onClick:he=>{F?Q.openDropdown():Q.toggleDropdown(),h==null||h(he)},classNames:de,styles:_e,unstyled:s,pointer:!F,error:q})}),_.jsx(tDe,{data:Ke,hidden:E||T,filter:C,search:Vt,limit:A,hiddenWhenEmpty:!F||!B,withScrollArea:I,maxDropdownHeight:k,filterOptions:F&&(St==null?void 0:St.label)!==Vt,value:Re,checkIconPosition:L,withCheckIcon:j,nothingFoundMessage:B,unstyled:s,labelId:Ze.label?`${wt}-label`:void 0,"aria-label":Ze.label?void 0:Ze["aria-label"],renderOption:we,scrollAreaProps:ke})]}),_.jsx(Wr.HiddenInput,{value:Re,name:z,form:V,disabled:T,...Se})]})});uP.classes={...Xd.classes,...Wr.classes};uP.displayName="@mantine/core/Select";function Yct({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=ko(),s=t===void 0?e:t,o=yb({"--sg-spacing-x":So(zh(e)),"--sg-spacing-y":So(zh(s)),"--sg-cols":(c=zh(n))==null?void 0:c.toString()}),a=rs(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=So(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=So(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=vR(rs(a),i).filter(f=>rs(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return _.jsx(ME,{styles:o,media:l,selector:r})}function $z(e){return typeof e=="object"&&e!==null?rs(e):[]}function Kct(e){return e.sort((t,n)=>yR(t)-yR(n))}function Xct({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...$z(e),...$z(t),...$z(n)]));return Kct(r)}function Qct({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=yb({"--sg-spacing-x":So(zh(e)),"--sg-spacing-y":So(zh(i)),"--sg-cols":(l=zh(n))==null?void 0:l.toString()}),o=Xct({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=So(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=So(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return _.jsx(ME,{styles:s,container:u,selector:r})}var NDe={container:"m_925c2d2c",root:"m_2415a157"};const Jct={cols:1,spacing:"md",type:"media"},gee=nt((e,t)=>{const n=Ue("SimpleGrid",Jct,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=$t({name:"SimpleGrid",classes:NDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=eP();return d==="container"?_.jsxs(_.Fragment,{children:[_.jsx(Qct,{...n,selector:`.${m}`}),_.jsx("div",{...p("container"),children:_.jsx(Ne,{ref:t,...p("root",{className:m}),...h})})]}):_.jsxs(_.Fragment,{children:[_.jsx(Yct,{...n,selector:`.${m}`}),_.jsx(Ne,{ref:t,...p("root",{className:m}),...h})]})});gee.classes=NDe;gee.displayName="@mantine/core/SimpleGrid";const[PDe,W8]=ja("SliderProvider was not found in tree"),yee=P.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=W8();return _.jsx(Ne,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});yee.displayName="@mantine/core/SliderRoot";const CL=P.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:b}=W8(),[w,S]=P.useState(!1),E=l||s||w||h&&p;return _.jsxs(Ne,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...b("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{S(!0),typeof f=="function"&&f()},onBlur:()=>{S(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:T=>T.stopPropagation(),children:[m,_.jsx(_y,{mounted:i!=null&&!!E,transition:"fade",duration:0,...u,children:T=>_.jsx("div",{...b("label",{style:T}),children:i})})]})});CL.displayName="@mantine/core/SliderThumb";function AL({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function Zct({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function ODe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=W8();if(!e)return null;const u=e.map((l,c)=>P.createElement(Ne,{...a("markWrapper"),__vars:{"--mark-offset":`${AL({value:l.value,min:t,max:n})}%`},key:c},_.jsx(Ne,{...a("mark"),mod:{filled:Zct({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&_.jsx("div",{...a("markLabel"),children:l.label})));return _.jsx("div",{children:u})}ODe.displayName="@mantine/core/SliderMarks";function vee({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=W8();return _.jsx(_.Fragment,{children:_.jsx(Ne,{...u("trackContainer"),mod:{disabled:r},...o,children:_.jsxs(Ne,{...u("track"),mod:{inverted:s,disabled:r},children:[_.jsx(Ne,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,_.jsx(ODe,{...a,offset:i,disabled:r,inverted:s})]})})})}vee.displayName="@mantine/core/SliderTrack";function XW({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function md(e,t){return parseFloat(e.toFixed(t))}function MDe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var G8={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const eft={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},tft=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Vn(t,"slider-size"),"--slider-color":n?Bi(n,e):void 0,"--slider-radius":i===void 0?void 0:Wi(i),"--slider-thumb-size":r!==void 0?qe(r):"calc(var(--slider-size) * 2)"}}),Y8=nt((e,t)=>{const n=Ue("Slider",eft,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:b,thumbLabel:w,showLabelOnHover:S,thumbChildren:E,disabled:T,unstyled:C,scale:A,inverted:I,className:k,style:N,vars:F,hiddenInputProps:M,...L}=n,j=$t({name:"Slider",props:n,classes:G8,classNames:r,className:k,styles:i,style:N,vars:F,varsResolver:tft,unstyled:C}),{dir:B}=ag(),[z,V]=P.useState(!1),[G,$]=Ho({value:typeof s=="number"?gm(s,l,c):s,defaultValue:typeof h=="number"?gm(h,l,c):h,finalValue:gm(0,l,c),onChange:o}),W=P.useRef(G),K=P.useRef(),q=P.useRef(),Y=AL({value:G,min:l,max:c}),Z=A(G),ae=typeof g=="function"?g(Z):g,be=d??MDe(f),Se=P.useCallback(({x:ke})=>{if(!T){const Ze=XW({value:ke,min:l,max:c,step:f,precision:be});$(Ze),W.current=Ze}},[T,l,c,f,be,$]),{ref:we,active:Ce}=C2e(Se,{onScrubEnd:()=>a==null?void 0:a(W.current)},B),Le=ke=>{var Ze,Ke,Ct,wt,Re,He;if(!T)switch(ke.key){case"ArrowUp":{ke.preventDefault(),(Ze=q.current)==null||Ze.focus();const lt=md(Math.min(Math.max(G+f,l),c),be);$(lt),a==null||a(lt);break}case"ArrowRight":{ke.preventDefault(),(Ke=q.current)==null||Ke.focus();const lt=md(Math.min(Math.max(B==="rtl"?G-f:G+f,l),c),be);$(lt),a==null||a(lt);break}case"ArrowDown":{ke.preventDefault(),(Ct=q.current)==null||Ct.focus();const lt=md(Math.min(Math.max(G-f,l),c),be);$(lt),a==null||a(lt);break}case"ArrowLeft":{ke.preventDefault(),(wt=q.current)==null||wt.focus();const lt=md(Math.min(Math.max(B==="rtl"?G+f:G-f,l),c),be);$(lt),a==null||a(lt);break}case"Home":{ke.preventDefault(),(Re=q.current)==null||Re.focus(),$(l),a==null||a(l);break}case"End":{ke.preventDefault(),(He=q.current)==null||He.focus(),$(c),a==null||a(c);break}}};return _.jsx(PDe,{value:{getStyles:j},children:_.jsxs(yee,{...L,ref:Io(t,K),onKeyDownCapture:Le,onMouseDownCapture:()=>{var ke;return(ke=K.current)==null?void 0:ke.focus()},size:u,disabled:T,children:[_.jsx(vee,{inverted:I,offset:0,filled:Y,marks:m,min:l,max:c,value:Z,disabled:T,containerProps:{ref:we,onMouseEnter:S?()=>V(!0):void 0,onMouseLeave:S?()=>V(!1):void 0},children:_.jsx(CL,{max:c,min:l,value:Z,position:Y,dragging:Ce,label:ae,ref:q,labelTransitionProps:y,labelAlwaysOn:b,thumbLabel:w,showLabelOnHover:S,isHovered:z,disabled:T,children:E})}),_.jsx("input",{type:"hidden",name:p,value:Z,...M})]})})});Y8.classes=G8;Y8.displayName="@mantine/core/Slider";function nft(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const rft=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Vn(t,"slider-size"),"--slider-color":n?Bi(n,e):void 0,"--slider-radius":i===void 0?void 0:Wi(i),"--slider-thumb-size":r!==void 0?qe(r):"calc(var(--slider-size) * 2)"}}),ift={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},cC=nt((e,t)=>{const n=Ue("RangeSlider",ift,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:b,labelTransitionProps:w,labelAlwaysOn:S,thumbFromLabel:E,thumbToLabel:T,showLabelOnHover:C,thumbChildren:A,disabled:I,unstyled:k,scale:N,inverted:F,className:M,style:L,vars:j,hiddenInputProps:B,...z}=n,V=$t({name:"Slider",props:n,classes:G8,classNames:r,className:M,styles:i,style:L,vars:j,varsResolver:rft,unstyled:k}),{dir:G}=ag(),[$,W]=P.useState(-1),[K,q]=P.useState(!1),[Y,Z]=Ho({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),ae=P.useRef(Y),be=P.useRef([]),Se=P.useRef(void 0),we=[AL({value:Y[0],min:l,max:c}),AL({value:Y[1],min:l,max:c})],Ce=p??MDe(h),Le=ht=>{Z(ht),ae.current=ht};P.useEffect(()=>{Array.isArray(s)&&(ae.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const ke=(ht,Q,de)=>{const _e=[...ae.current];_e[Q]=ht,Q===0&&(ht>_e[1]-(f-1e-9)&&(_e[1]=Math.min(ht+f,c)),ht>(c-(f-1e-9)||l)&&(_e[Q]=ae.current[Q]),_e[1]-ht>d&&(_e[1]=ht+d)),Q===1&&(ht<_e[0]+f&&(_e[0]=Math.max(ht-f,l)),ht<_e[0]+f&&(_e[Q]=ae.current[Q]),ht-_e[0]>d&&(_e[0]=ht-d)),_e[0]=md(_e[0],Ce),_e[1]=md(_e[1],Ce),Le(_e),de&&(a==null||a(ae.current))},Ze=ht=>{if(!I){const Q=XW({value:ht,min:l,max:c,step:h,precision:Ce});ke(Q,Se.current,!1)}},{ref:Ke,active:Ct}=C2e(({x:ht})=>Ze(ht),{onScrubEnd:()=>a==null?void 0:a(ae.current)},G);function wt(ht){Se.current=ht}const Re=ht=>{Ke.current.focus();const Q=Ke.current.getBoundingClientRect(),de=nft(ht.nativeEvent),_e=XW({value:de-Q.left,max:c,min:l,step:h,containerWidth:Q.width}),oe=Math.abs(Y[0]-_e)>Math.abs(Y[1]-_e)?1:0,he=G==="ltr"?oe:oe===1?0:1;Se.current=he},He=()=>$!==1&&$!==0?(W(0),0):$,lt=ht=>{if(!I)switch(ht.key){case"ArrowUp":{ht.preventDefault();const Q=He();be.current[Q].focus(),ke(md(Math.min(Math.max(ae.current[Q]+h,l),c),Ce),Q,!0);break}case"ArrowRight":{ht.preventDefault();const Q=He();be.current[Q].focus(),ke(md(Math.min(Math.max(G==="rtl"?ae.current[Q]-h:ae.current[Q]+h,l),c),Ce),Q,!0);break}case"ArrowDown":{ht.preventDefault();const Q=He();be.current[Q].focus(),ke(md(Math.min(Math.max(ae.current[Q]-h,l),c),Ce),Q,!0);break}case"ArrowLeft":{ht.preventDefault();const Q=He();be.current[Q].focus(),ke(md(Math.min(Math.max(G==="rtl"?ae.current[Q]+h:ae.current[Q]-h,l),c),Ce),Q,!0);break}}},St={max:c,min:l,size:u,labelTransitionProps:w,labelAlwaysOn:S,onBlur:()=>W(-1)},Vt=Array.isArray(A);return _.jsx(PDe,{value:{getStyles:V},children:_.jsxs(yee,{...z,size:u,ref:t,disabled:I,children:[_.jsxs(vee,{offset:we[0],marksOffset:Y[0],filled:we[1]-we[0],marks:y,inverted:F,min:l,max:c,value:Y[1],disabled:I,containerProps:{ref:Ke,onMouseEnter:C?()=>q(!0):void 0,onMouseLeave:C?()=>q(!1):void 0,onTouchStartCapture:Re,onTouchEndCapture:()=>{Se.current=-1},onMouseDownCapture:Re,onMouseUpCapture:()=>{Se.current=-1},onKeyDownCapture:lt},children:[_.jsx(CL,{...St,value:N(Y[0]),position:we[0],dragging:Ct,label:typeof b=="function"?b(md(N(Y[0]),Ce)):b,ref:ht=>{be.current[0]=ht},thumbLabel:E,onMouseDown:()=>wt(0),onFocus:()=>W(0),showLabelOnHover:C,isHovered:K,disabled:I,children:Vt?A[0]:A}),_.jsx(CL,{...St,thumbLabel:T,value:N(Y[1]),position:we[1],dragging:Ct,label:typeof b=="function"?b(md(N(Y[1]),Ce)):b,ref:ht=>{be.current[1]=ht},onMouseDown:()=>wt(1),onFocus:()=>W(1),showLabelOnHover:C,isHovered:K,disabled:I,children:Vt?A[1]:A})]}),_.jsx("input",{type:"hidden",name:`${g}_from`,value:Y[0],...B}),_.jsx("input",{type:"hidden",name:`${g}_to`,value:Y[1],...B})]})})});cC.classes=G8;cC.displayName="@mantine/core/RangeSlider";const sft={},xf=nt((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=Ue("Space",sft,e);return _.jsx(Ne,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});xf.displayName="@mantine/core/Space";var $De={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const oft={maxHeight:100,initialState:!1},aft=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),bee=nt((e,t)=>{const n=Ue("Spoiler",oft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,b=$t({name:"Spoiler",classes:$De,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aft}),w=nl(g),S=`${w}-region`,[E,T]=P.useState(l),{ref:C,height:A}=jnt(),I=E?f:d,k=I!==null&&c<A;return _.jsxs(Ne,{...b("root"),id:w,ref:t,"data-has-spoiler":k||void 0,...y,children:[k&&_.jsx(BE,{component:"button",type:"button",ref:p,onClick:()=>T(N=>!N),"aria-expanded":E,"aria-controls":S,...b("control"),children:I}),_.jsx("div",{...b("content",{style:{maxHeight:E?A?qe(A):void 0:qe(c)}}),"data-reduce-motion":!0,role:"region",id:S,children:_.jsx("div",{ref:C,children:h})})]})});bee.classes=$De;bee.displayName="@mantine/core/Spoiler";var FDe={root:"m_6d731127"};const uft={gap:"md",align:"stretch",justify:"flex-start"},lft=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":So(t),"--stack-align":n,"--stack-justify":r}}),Al=nt((e,t)=>{const n=Ue("Stack",uft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=$t({name:"Stack",props:n,classes:FDe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:lft});return _.jsx(Ne,{ref:t,...p("root"),variant:d,...h})});Al.classes=FDe;Al.displayName="@mantine/core/Stack";const LDe=P.createContext(null),cft=LDe.Provider,fft=()=>P.useContext(LDe),dft={},wee=nt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Ue("SwitchGroup",dft,e),[c,f]=Ho({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(cft,{value:{value:c,onChange:d,size:s},children:_.jsx(ws.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:_.jsx(zZ,{role:"group",children:a})})})});wee.classes=ws.Wrapper.classes;wee.displayName="@mantine/core/SwitchGroup";var BDe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const hft={labelPosition:"right"},pft=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Wi(t),"--switch-height":Vn(r,"switch-height"),"--switch-width":Vn(r,"switch-width"),"--switch-thumb-size":Vn(r,"switch-thumb-size"),"--switch-label-font-size":Vn(r,"switch-label-font-size"),"--switch-track-label-padding":Vn(r,"switch-track-label-padding"),"--switch-color":n?Bi(n,e):void 0}}),gT=nt((e,t)=>{const n=Ue("Switch",hft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:b,checked:w,defaultChecked:S,onChange:E,labelPosition:T,description:C,error:A,disabled:I,variant:k,rootRef:N,mod:F,...M}=n,L=fft(),j=p||(L==null?void 0:L.size),B=$t({name:"Switch",props:n,classes:BDe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:pft}),{styleProps:z,rest:V}=$E(M),G=nl(h),$=L?{checked:L.value.includes(V.value),onChange:L.onChange}:{},[W,K]=Ho({value:$.checked??w,defaultValue:S,finalValue:!1});return _.jsxs(E8,{...B("root"),__staticSelector:"Switch",__stylesApiProps:n,id:G,size:j,labelPosition:T,label:c,description:C,error:A,disabled:I,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":$.checked||void 0,variant:k,ref:N,mod:F,...z,...g,children:[_.jsx("input",{...V,disabled:I,checked:W,onChange:q=>{var Y;L?(Y=$.onChange)==null||Y.call($,q):E==null||E(q),K(q.currentTarget.checked)},id:G,ref:t,type:"checkbox",role:"switch",...B("input")}),_.jsxs(Ne,{"aria-hidden":"true",mod:{error:A,"label-position":T},...B("track"),children:[_.jsx(Ne,{component:"span",mod:"reduce-motion",...B("thumb"),children:b}),_.jsx("span",{...B("trackLabel"),children:W?d:f})]})]})});gT.classes={...BDe,...HAe};gT.displayName="@mantine/core/Switch";gT.Group=wee;const[mft,gft]=ja("Table component was not found in the tree");var lP={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function yft(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function UE(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=nt((i,s)=>{const o=Ue(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=gft();return _.jsx(Ne,{component:e,ref:s,...yft(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=lP,r}const QW=UE("th",{columnBorder:!0}),jDe=UE("td",{columnBorder:!0}),z$=UE("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),UDe=UE("thead",{stickyHeader:!0}),zDe=UE("tbody"),VDe=UE("tfoot"),HDe=UE("caption",{captionSide:!0});function _ee({data:e}){return _.jsxs(_.Fragment,{children:[e.caption&&_.jsx(HDe,{children:e.caption}),e.head&&_.jsx(UDe,{children:_.jsx(z$,{children:e.head.map((t,n)=>_.jsx(QW,{children:t},n))})}),e.body&&_.jsx(zDe,{children:e.body.map((t,n)=>_.jsx(z$,{children:t.map((r,i)=>_.jsx(jDe,{children:r},i))},n))}),e.foot&&_.jsx(VDe,{children:_.jsx(z$,{children:e.foot.map((t,n)=>_.jsx(QW,{children:t},n))})})]})}_ee.displayName="@mantine/core/TableDataRenderer";const vft={type:"scrollarea"},bft=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":qe(t),"--table-overflow":n==="native"?"auto":void 0}}),Eee=nt((e,t)=>{const n=Ue("TableScrollContainer",vft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=$t({name:"TableScrollContainer",classes:lP,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:bft,rootSelector:"scrollContainer"});return _.jsx(Ne,{component:f==="scrollarea"?W0:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:_.jsx("div",{...h("scrollContainerInner"),children:l})})});Eee.classes=lP;Eee.displayName="@mantine/core/TableScrollContainer";const wft={withRowBorders:!0,verticalSpacing:7},_ft=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":So(r),"--table-vertical-spacing":So(i),"--table-border-color":s?Bi(s,e):void 0,"--table-striped-color":u&&o?Bi(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Bi(a,e):void 0,"--table-sticky-header-offset":f?qe(c):void 0}}),_n=nt((e,t)=>{const n=Ue("Table",wft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:b,borderColor:w,layout:S,variant:E,data:T,children:C,stickyHeader:A,stickyHeaderOffset:I,mod:k,...N}=n,F=$t({name:"Table",props:n,className:i,style:s,classes:lP,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:_ft});return _.jsx(mft,{value:{getStyles:F,stickyHeader:A,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:_.jsx(Ne,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":b},k],...F("table"),...N,children:C||!!T&&_.jsx(_ee,{data:T})})})});_n.classes=lP;_n.displayName="@mantine/core/Table";_n.Td=jDe;_n.Th=QW;_n.Tr=z$;_n.Thead=UDe;_n.Tbody=zDe;_n.Tfoot=VDe;_n.Caption=HDe;_n.ScrollContainer=Eee;_n.DataRenderer=_ee;const[Eft,xee]=ja("Tabs component was not found in the tree");var cP={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const xft={},See=nt((e,t)=>{const n=Ue("TabsList",xft,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=xee();return _.jsx(Ne,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});See.classes=cP;See.displayName="@mantine/core/TabsList";const Sft={},Tee=nt((e,t)=>{const n=Ue("TabsPanel",Sft,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=xee(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return _.jsx(Ne,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});Tee.classes=cP;Tee.displayName="@mantine/core/TabsPanel";const Tft={},Cee=nt((e,t)=>{const n=Ue("TabsTab",Tft,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,b=ko(),{dir:w}=ag(),S=xee(),E=a===S.value,T=A=>{S.onChange(S.allowTabDeactivation&&a===S.value?null:a),u==null||u(A)},C={classNames:h,styles:p,props:n};return _.jsxs(Vo,{...y,...S.getStyles("tab",{className:r,style:d,variant:S.variant,...C}),disabled:c,unstyled:S.unstyled,variant:S.variant,mod:[{active:E,disabled:c,orientation:S.orientation,inverted:S.inverted,placement:S.orientation==="vertical"&&S.placement},g],ref:t,role:"tab",id:S.getTabId(a),"aria-selected":E,tabIndex:E||S.value===null?0:-1,"aria-controls":S.getPanelId(a),onClick:T,__vars:{"--tabs-color":f?Bi(f,b):void 0},onKeyDown:OJ({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:S.activateTabWithKeyboard,loop:S.loop,orientation:S.orientation||"horizontal",dir:w,onKeyDown:l}),children:[o&&_.jsx("span",{...S.getStyles("tabSection",C),"data-position":"left",children:o}),i&&_.jsx("span",{...S.getStyles("tabLabel",C),children:i}),s&&_.jsx("span",{...S.getStyles("tabSection",C),"data-position":"right",children:s})]})});Cee.classes=cP;Cee.displayName="@mantine/core/TabsTab";const Qpe="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",Cft={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},Aft=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Wi(t),"--tabs-color":Bi(n,e),"--tabs-text-color":S2(r,e)?wb({color:n,theme:e,autoContrast:r}):void 0}}),bo=nt((e,t)=>{const n=Ue("Tabs",Cft,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:b,styles:w,unstyled:S,className:E,style:T,vars:C,autoContrast:A,mod:I,...k}=n,N=nl(l),[F,M]=Ho({value:i,defaultValue:r,finalValue:null,onChange:s}),L=$t({name:"Tabs",props:n,classes:cP,className:E,style:T,classNames:b,styles:w,unstyled:S,vars:C,varsResolver:Aft});return _.jsx(Eft,{value:{placement:g,value:F,orientation:o,id:N,loop:u,activateTabWithKeyboard:c,getTabId:vL(`${N}-tab`,Qpe),getPanelId:vL(`${N}-panel`,Qpe),onChange:M,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:S,getStyles:L},children:_.jsx(Ne,{ref:t,id:N,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},I],...L("root"),...k,children:a})})});bo.classes=cP;bo.displayName="@mantine/core/Tabs";bo.Tab=Cee;bo.Panel=Tee;bo.List=See;const Dft={},y0=nt((e,t)=>{const n=Ue("TextInput",Dft,e);return _.jsx(Xd,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});y0.classes=Xd.classes;y0.displayName="@mantine/core/TextInput";const Ift=["h1","h2","h3","h4","h5","h6"];function kft(e,t){const n=t!==void 0?t:`h${e}`;return Ift.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:qe(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var qDe={root:"m_8a5d1357"};const Rft={order:1},Nft=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=kft(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},Os=nt((e,t)=>{const n=Ue("Title",Rft,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=$t({name:"Title",props:n,classes:qDe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Nft});return[1,2,3,4,5,6].includes(u)?_.jsx(Ne,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});Os.classes=qDe;Os.displayName="@mantine/core/Title";function Pft(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function Oft(e){return P.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function Mft(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const $ft=()=>Pft({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),zE=$ft(),Fft=(e=zE)=>Oft(e);function M2(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=Mft(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function Lft(e,t=zE){const n=e.id||hT();return M2(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function WDe(e,t=zE){return M2(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function Bft(e,t=zE){return M2(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function jft(e=zE){M2(e,()=>[])}function Uft(e=zE){M2(e,t=>t.slice(0,e.getState().limit))}const VE={show:Lft,hide:WDe,update:Bft,clean:jft,cleanQueue:Uft,updateState:M2};function JW(e,t){return JW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},JW(e,t)}function GDe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,JW(e,t)}var YDe={exports:{}},zft="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Vft=zft,Hft=Vft;function KDe(){}function XDe(){}XDe.resetWarningCache=KDe;var qft=function(){function e(r,i,s,o,a,u){if(u!==Hft){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:XDe,resetWarningCache:KDe};return n.PropTypes=n,n};YDe.exports=qft();var Wft=YDe.exports;const Jpe=zf(Wft),Zpe={disabled:!1},DL=xi.createContext(null);var Gft=function(t){return t.scrollTop},fI="unmounted",Iw="exited",kw="entering",bS="entered",ZW="exiting",Cy=function(e){GDe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=Iw,s.appearStatus=kw):u=bS:r.unmountOnExit||r.mountOnEnter?u=fI:u=Iw,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===fI?{status:Iw}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==kw&&o!==bS&&(s=kw):(o===kw||o===bS)&&(s=ZW)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===kw){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:cI.findDOMNode(this);o&&Gft(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Iw&&this.setState({status:fI})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[cI.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||Zpe.disabled){this.safeSetState({status:bS},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:kw},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:bS},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:cI.findDOMNode(this);if(!s||Zpe.disabled){this.safeSetState({status:Iw},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:ZW},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Iw},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:cI.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===fI)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=XZ(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return xi.createElement(DL.Provider,{value:null},typeof o=="function"?o(i,a):xi.cloneElement(xi.Children.only(o),a))},t}(xi.Component);Cy.contextType=DL;Cy.propTypes={};function Wx(){}Cy.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Wx,onEntering:Wx,onEntered:Wx,onExit:Wx,onExiting:Wx,onExited:Wx};Cy.UNMOUNTED=fI;Cy.EXITED=Iw;Cy.ENTERING=kw;Cy.ENTERED=bS;Cy.EXITING=ZW;function Yft(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Aee(e,t){var n=function(s){return t&&P.isValidElement(s)?t(s):s},r=Object.create(null);return e&&P.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function Kft(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function c_(e,t,n){return n[t]!=null?n[t]:e.props[t]}function Xft(e,t){return Aee(e.children,function(n){return P.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:c_(n,"appear",e),enter:c_(n,"enter",e),exit:c_(n,"exit",e)})})}function Qft(e,t,n){var r=Aee(e.children),i=Kft(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(P.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=P.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=P.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:c_(o,"exit",e),enter:c_(o,"enter",e)}):!u&&a&&!c?i[s]=P.cloneElement(o,{in:!1}):u&&a&&P.isValidElement(l)&&(i[s]=P.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:c_(o,"exit",e),enter:c_(o,"enter",e)}))}}),i}var Jft=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Zft={component:"div",childFactory:function(t){return t}},bv=function(e){GDe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(Yft(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?Xft(i,a):Qft(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=Aee(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=lC({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=XZ(i,["component","childFactory"]),u=this.state.contextValue,l=Jft(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?xi.createElement(DL.Provider,{value:u},l):xi.createElement(DL.Provider,{value:u},xi.createElement(s,a,l))},t}(xi.Component);bv.propTypes={};bv.defaultProps=Zft;const QDe=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function edt(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),QDe.reduce((n,r)=>(n[r]=[],n),{}))}const eme={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},tdt={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function ndt({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:eme[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:tdt[o]},l={opacity:0,maxHeight:0,transform:eme[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function rdt(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const JDe=P.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=rdt(n,e.autoClose),l=P.useRef(-1),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return P.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),P.useEffect(()=>(d(),c),[u]),_.jsx(uee,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});JDe.displayName="@mantine/notifications/NotificationContainer";var ZDe={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const idt=Cy,sdt={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:qf("overlay"),store:zE,withinPortal:!0},odt=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":qe(n)}}),Ay=nt((e,t)=>{const n=Ue("Notifications",sdt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:y,withinPortal:b,...w}=n,S=ko(),E=Fft(g),T=$nt(),C=f8(),A=P.useRef({}),I=P.useRef(0),N=(S.respectReducedMotion?C:!1)?1:f,F=$t({name:"Notifications",classes:ZDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:odt});P.useEffect(()=>{g==null||g.updateState(j=>({...j,limit:p||5,defaultPosition:l}))},[p,l]),jm(()=>{E.notifications.length>I.current&&setTimeout(()=>T(),0),I.current=E.notifications.length},[E.notifications]);const M=edt(E.notifications,l),L=QDe.reduce((j,B)=>(j[B]=M[B].map(({style:z,...V})=>_.jsx(idt,{timeout:N,onEnter:()=>A.current[V.id].offsetHeight,nodeRef:{current:A.current[V.id]},children:G=>_.jsx(JDe,{ref:$=>{A.current[V.id]=$},data:V,onHide:$=>WDe($,g),autoClose:c,...F("notification",{style:{...ndt({state:G,position:B,transitionDuration:N,maxHeight:h}),...z}})})},V.id)),j),{});return _.jsxs(D2,{withinPortal:b,...y,children:[_.jsx(Ne,{...F("root"),"data-position":"top-center",ref:t,...w,children:_.jsx(bv,{children:L["top-center"]})}),_.jsx(Ne,{...F("root"),"data-position":"top-left",...w,children:_.jsx(bv,{children:L["top-left"]})}),_.jsx(Ne,{...F("root",{className:nC.classNames.fullWidth}),"data-position":"top-right",...w,children:_.jsx(bv,{children:L["top-right"]})}),_.jsx(Ne,{...F("root",{className:nC.classNames.fullWidth}),"data-position":"bottom-right",...w,children:_.jsx(bv,{children:L["bottom-right"]})}),_.jsx(Ne,{...F("root"),"data-position":"bottom-left",...w,children:_.jsx(bv,{children:L["bottom-left"]})}),_.jsx(Ne,{...F("root"),"data-position":"bottom-center",...w,children:_.jsx(bv,{children:L["bottom-center"]})})]})});Ay.classes=ZDe;Ay.displayName="@mantine/notifications/Notifications";Ay.show=VE.show;Ay.hide=VE.hide;Ay.update=VE.update;Ay.clean=VE.clean;Ay.cleanQueue=VE.cleanQueue;Ay.updateState=VE.updateState;const eIe=P.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Wo=()=>P.useContext(eIe);function adt({children:e}){const[t,n]=P.useState(void 0),r=P.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return _.jsx(eIe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function TR(){return TR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TR.apply(this,arguments)}var jv;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(jv||(jv={}));const tme="popstate";function udt(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return eG("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:nIe(i)}return cdt(t,n,null,e)}function To(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function tIe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ldt(){return Math.random().toString(36).substr(2,8)}function nme(e,t){return{usr:e.state,key:e.key,idx:t}}function eG(e,t,n,r){return n===void 0&&(n=null),TR({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?$2(t):t,{state:n,key:t&&t.key||r||ldt()})}function nIe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function $2(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function cdt(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=jv.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(TR({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=jv.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=jv.Push;let b=eG(m.location,g,y);l=c()+1;let w=nme(b,l),S=m.createHref(b);try{o.pushState(w,"",S)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(S)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=jv.Replace;let b=eG(m.location,g,y);l=c();let w=nme(b,l),S=m.createHref(b);o.replaceState(w,"",S),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof g=="string"?g:nIe(g);return b=b.replace(/ $/,"%20"),To(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(tme,f),u=g,()=>{i.removeEventListener(tme,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var rme;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(rme||(rme={}));function fdt(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?$2(t):t,i=sIe(r.pathname||"/",n);if(i==null)return null;let s=rIe(e);ddt(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=Sdt(i);o=_dt(s[a],u)}return o}function rIe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(To(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=l1([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(To(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),rIe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:bdt(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of iIe(s.path))i(s,o,u)}),t}function iIe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=iIe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function ddt(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:wdt(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const hdt=/^:[\w-]+$/,pdt=3,mdt=2,gdt=1,ydt=10,vdt=-2,ime=e=>e==="*";function bdt(e,t){let n=e.split("/"),r=n.length;return n.some(ime)&&(r+=vdt),t&&(r+=mdt),n.filter(i=>!ime(i)).reduce((i,s)=>i+(hdt.test(s)?pdt:s===""?gdt:ydt),r)}function wdt(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function _dt(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=Edt({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:l1([i,c.pathname]),pathnameBase:Ddt(l1([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=l1([i,c.pathnameBase]))}return s}function Edt(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=xdt(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function xdt(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),tIe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Sdt(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return tIe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function sIe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Tdt(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?$2(e):e;return{pathname:n?n.startsWith("/")?n:Cdt(n,t):t,search:Idt(r),hash:kdt(i)}}function Cdt(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Fz(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Adt(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Dee(e,t){let n=Adt(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Iee(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=$2(e):(i=TR({},e),To(!i.pathname||!i.pathname.includes("?"),Fz("?","pathname","search",i)),To(!i.pathname||!i.pathname.includes("#"),Fz("#","pathname","hash",i)),To(!i.search||!i.search.includes("#"),Fz("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=Tdt(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const l1=e=>e.join("/").replace(/\/\/+/g,"/"),Ddt=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Idt=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,kdt=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Rdt(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const oIe=["post","put","patch","delete"];new Set(oIe);const Ndt=["get",...oIe];new Set(Ndt);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function CR(){return CR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CR.apply(this,arguments)}const kee=P.createContext(null),Pdt=P.createContext(null),HE=P.createContext(null),K8=P.createContext(null),lg=P.createContext({outlet:null,matches:[],isDataRoute:!1}),aIe=P.createContext(null);function uIe(e,t){let{relative:n}={};F2()||To(!1);let{basename:r,navigator:i}=P.useContext(HE),{hash:s,pathname:o,search:a}=Fdt(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:l1([r,o])),i.createHref({pathname:u,search:a,hash:s})}function F2(){return P.useContext(K8)!=null}function xb(){return F2()||To(!1),P.useContext(K8).location}function lIe(e){P.useContext(HE).static||P.useLayoutEffect(e)}function wp(){let{isDataRoute:e}=P.useContext(lg);return e?Ydt():Odt()}function Odt(){F2()||To(!1);let e=P.useContext(kee),{basename:t,future:n,navigator:r}=P.useContext(HE),{matches:i}=P.useContext(lg),{pathname:s}=xb(),o=JSON.stringify(Dee(i,n.v7_relativeSplatPath)),a=P.useRef(!1);return lIe(()=>{a.current=!0}),P.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=Iee(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:l1([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const Mdt=P.createContext(null);function $dt(e){let t=P.useContext(lg).outlet;return t&&P.createElement(Mdt.Provider,{value:e},t)}function X0(){let{matches:e}=P.useContext(lg),t=e[e.length-1];return t?t.params:{}}function Fdt(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=P.useContext(HE),{matches:i}=P.useContext(lg),{pathname:s}=xb(),o=JSON.stringify(Dee(i,r.v7_relativeSplatPath));return P.useMemo(()=>Iee(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function cIe(e,t){return Ldt(e,t)}function Ldt(e,t,n,r){F2()||To(!1);let{navigator:i}=P.useContext(HE),{matches:s}=P.useContext(lg),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=xb(),c;if(t){var f;let g=typeof t=="string"?$2(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||To(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=fdt(e,{pathname:h}),m=Vdt(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:l1([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:l1([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?P.createElement(K8.Provider,{value:{location:CR({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:jv.Pop}},m):m}function Bdt(){let e=Gdt(),t=Rdt(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),n?P.createElement("pre",{style:i},n):null,null)}const jdt=P.createElement(Bdt,null);class Udt extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?P.createElement(lg.Provider,{value:this.props.routeContext},P.createElement(aIe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zdt(e){let{routeContext:t,match:n,children:r}=e,i=P.useContext(kee);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(lg.Provider,{value:t},r)}function Vdt(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||To(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||jdt,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),b=()=>{let w;return h?w=m:p?w=g:f.route.Component?w=P.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=c,P.createElement(zdt,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:w})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?P.createElement(Udt,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var fIe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(fIe||{}),IL=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(IL||{});function Hdt(e){let t=P.useContext(kee);return t||To(!1),t}function qdt(e){let t=P.useContext(Pdt);return t||To(!1),t}function Wdt(e){let t=P.useContext(lg);return t||To(!1),t}function dIe(e){let t=Wdt(),n=t.matches[t.matches.length-1];return n.route.id||To(!1),n.route.id}function Gdt(){var e;let t=P.useContext(aIe),n=qdt(IL.UseRouteError),r=dIe(IL.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Ydt(){let{router:e}=Hdt(fIe.UseNavigateStable),t=dIe(IL.UseNavigateStable),n=P.useRef(!1);return lIe(()=>{n.current=!0}),P.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,CR({fromRouteId:t},s)))},[e,t])}function Ree(e){let{to:t,replace:n,state:r,relative:i}=e;F2()||To(!1);let{future:s,static:o}=P.useContext(HE),{matches:a}=P.useContext(lg),{pathname:u}=xb(),l=wp(),c=Iee(t,Dee(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return P.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function Kdt(e){return $dt(e.context)}function Yg(e){To(!1)}function Xdt(e){let{basename:t="/",children:n=null,location:r,navigationType:i=jv.Pop,navigator:s,static:o=!1,future:a}=e;F2()&&To(!1);let u=t.replace(/^\/*/,"/"),l=P.useMemo(()=>({basename:u,navigator:s,static:o,future:CR({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=$2(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=P.useMemo(()=>{let g=sIe(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:P.createElement(HE.Provider,{value:l},P.createElement(K8.Provider,{children:n,value:m}))}function Qdt(e){let{children:t,location:n}=e;return cIe(tG(t),n)}new Promise(()=>{});function tG(e,t){t===void 0&&(t=[]);let n=[];return P.Children.forEach(e,(r,i)=>{if(!P.isValidElement(r))return;let s=[...t,i];if(r.type===P.Fragment){n.push.apply(n,tG(r.props.children,s));return}r.type!==Yg&&To(!1),!r.props.index||!r.props.children||To(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=tG(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nG(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Jdt(e,t){let n=nG(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const Zdt="6";try{window.__reactRouterVersion=Zdt}catch{}const eht="startTransition",sme=WF[eht];function tht(e){let{basename:t,children:n,future:r,window:i}=e,s=P.useRef();s.current==null&&(s.current=udt({window:i,v5Compat:!0}));let o=s.current,[a,u]=P.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=P.useCallback(f=>{l&&sme?sme(()=>u(f)):u(f)},[u,l]);return P.useLayoutEffect(()=>o.listen(c),[o,c]),P.createElement(Xdt,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var ome;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ome||(ome={}));var ame;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ame||(ame={}));function Nee(e){let t=P.useRef(nG(e)),n=P.useRef(!1),r=xb(),i=P.useMemo(()=>Jdt(r.search,n.current?null:t.current),[r.search]),s=wp(),o=P.useCallback((a,u)=>{const l=nG(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const Pee=P.createContext(null);Pee.displayName="@mantine/modals/ModalsContext";function nht(){const e=P.useContext(Pee);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function rht({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=nht(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return _.jsxs(_.Fragment,{children:[l&&_.jsx(Ne,{mb:"md",children:l}),_.jsxs(qi,{justify:"flex-end",...o,children:[_.jsx(Mn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),_.jsx(Mn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[iht,X8]=Knt("mantine-modals");X8("openModal");X8("closeModal");X8("closeAllModals");const ume=X8("openConfirmModal");function lme(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function sht(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;lme(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{lme(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function oht(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function aht({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=P.useReducer(sht,{modals:[],current:null}),o=P.useRef(i);o.current=i;const a=P.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=P.useCallback(({modalId:g,...y})=>{const b=g||hT();return s({type:"OPEN",modal:{id:b,type:"content",props:y}}),b},[s]),l=P.useCallback(({modalId:g,...y})=>{const b=g||hT();return s({type:"OPEN",modal:{id:b,type:"confirm",props:y}}),b},[s]),c=P.useCallback((g,{modalId:y,...b})=>{const w=y||hT();return s({type:"OPEN",modal:{id:w,type:"context",props:b,ctx:g}}),w},[s]),f=P.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);iht({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...b}=g.props,w=r[g.ctx];return{modalProps:b,content:_.jsx(w,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:b}=oht(g.props);return{modalProps:y,content:_.jsx(rht,{...b,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...b}=g.props;return{modalProps:b,content:_.jsx(_.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return _.jsxs(Pee.Provider,{value:d,children:[_.jsx(qs,{zIndex:qf("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uht={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=(e,t,n,r)=>{const i=P.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>P.createElement("svg",{ref:f,...uht[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>P.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lht=mr("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cht=mr("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kL=mr("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fht=mr("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dht=mr("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hht=mr("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pht=mr("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mht=mr("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ght=mr("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yht=mr("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hIe=mr("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vht=mr("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cme=mr("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bht=mr("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wht=mr("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _ht=mr("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Eht=mr("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xht=mr("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sht=mr("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tht=mr("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Oee=mr("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cht=mr("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Aht=mr("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dht=mr("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Iht=mr("outline","package-import","IconPackageImport",[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M22 18h-7",key:"svg-4"}],["path",{d:"M18 15l-3 3l3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kht=mr("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rht=mr("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pIe=mr("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nht=mr("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pht=mr("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Oht=mr("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mht=mr("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $ht=mr("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mIe=mr("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fht=mr("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gIe=mr("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lht=mr("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yIe=mr("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mee=mr("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $ee=mr("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bht=mr("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);function vIe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Rl="/vis-decode/";function fme(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function bIe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const jht=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Uht=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,zht={};function dme(e,t){return(zht.jsx?Uht:jht).test(e)}const Vht=/[ \t\n\f\r]/g;function Hht(e){return typeof e=="object"?e.type==="text"?hme(e.value):!1:hme(e)}function hme(e){return e.replace(Vht,"")===""}let fP=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};fP.prototype.property={};fP.prototype.normal={};fP.prototype.space=null;function wIe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new fP(n,r,t)}function AR(e){return e.toLowerCase()}let Jd=class{constructor(t,n){this.property=t,this.attribute=n}};Jd.prototype.space=null;Jd.prototype.boolean=!1;Jd.prototype.booleanish=!1;Jd.prototype.overloadedBoolean=!1;Jd.prototype.number=!1;Jd.prototype.commaSeparated=!1;Jd.prototype.spaceSeparated=!1;Jd.prototype.commaOrSpaceSeparated=!1;Jd.prototype.mustUseProperty=!1;Jd.prototype.defined=!1;let qht=0;const or=qE(),$o=qE(),_Ie=qE(),Rt=qE(),ss=qE(),yT=qE(),sf=qE();function qE(){return 2**++qht}const rG=Object.freeze(Object.defineProperty({__proto__:null,boolean:or,booleanish:$o,commaOrSpaceSeparated:sf,commaSeparated:yT,number:Rt,overloadedBoolean:_Ie,spaceSeparated:ss},Symbol.toStringTag,{value:"Module"})),Lz=Object.keys(rG);class Fee extends Jd{constructor(t,n,r,i){let s=-1;if(super(t,n),pme(this,"space",i),typeof r=="number")for(;++s<Lz.length;){const o=Lz[s];pme(this,Lz[s],(r&rG[o])===rG[o])}}}Fee.prototype.defined=!0;function pme(e,t,n){n&&(e[t]=n)}const Wht={}.hasOwnProperty;function L2(e){const t={},n={};let r;for(r in e.properties)if(Wht.call(e.properties,r)){const i=e.properties[r],s=new Fee(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[AR(r)]=r,n[AR(s.attribute)]=r}return new fP(t,n,e.space)}const EIe=L2({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),xIe=L2({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function SIe(e,t){return t in e?e[t]:t}function TIe(e,t){return SIe(e,t.toLowerCase())}const CIe=L2({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:TIe,properties:{xmlns:null,xmlnsXLink:null}}),AIe=L2({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:$o,ariaAutoComplete:null,ariaBusy:$o,ariaChecked:$o,ariaColCount:Rt,ariaColIndex:Rt,ariaColSpan:Rt,ariaControls:ss,ariaCurrent:null,ariaDescribedBy:ss,ariaDetails:null,ariaDisabled:$o,ariaDropEffect:ss,ariaErrorMessage:null,ariaExpanded:$o,ariaFlowTo:ss,ariaGrabbed:$o,ariaHasPopup:null,ariaHidden:$o,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ss,ariaLevel:Rt,ariaLive:null,ariaModal:$o,ariaMultiLine:$o,ariaMultiSelectable:$o,ariaOrientation:null,ariaOwns:ss,ariaPlaceholder:null,ariaPosInSet:Rt,ariaPressed:$o,ariaReadOnly:$o,ariaRelevant:null,ariaRequired:$o,ariaRoleDescription:ss,ariaRowCount:Rt,ariaRowIndex:Rt,ariaRowSpan:Rt,ariaSelected:$o,ariaSetSize:Rt,ariaSort:null,ariaValueMax:Rt,ariaValueMin:Rt,ariaValueNow:Rt,ariaValueText:null,role:null}}),Ght=L2({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:TIe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:yT,acceptCharset:ss,accessKey:ss,action:null,allow:null,allowFullScreen:or,allowPaymentRequest:or,allowUserMedia:or,alt:null,as:null,async:or,autoCapitalize:null,autoComplete:ss,autoFocus:or,autoPlay:or,blocking:ss,capture:null,charSet:null,checked:or,cite:null,className:ss,cols:Rt,colSpan:null,content:null,contentEditable:$o,controls:or,controlsList:ss,coords:Rt|yT,crossOrigin:null,data:null,dateTime:null,decoding:null,default:or,defer:or,dir:null,dirName:null,disabled:or,download:_Ie,draggable:$o,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:or,formTarget:null,headers:ss,height:Rt,hidden:or,high:Rt,href:null,hrefLang:null,htmlFor:ss,httpEquiv:ss,id:null,imageSizes:null,imageSrcSet:null,inert:or,inputMode:null,integrity:null,is:null,isMap:or,itemId:null,itemProp:ss,itemRef:ss,itemScope:or,itemType:ss,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:or,low:Rt,manifest:null,max:null,maxLength:Rt,media:null,method:null,min:null,minLength:Rt,multiple:or,muted:or,name:null,nonce:null,noModule:or,noValidate:or,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:or,optimum:Rt,pattern:null,ping:ss,placeholder:null,playsInline:or,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:or,referrerPolicy:null,rel:ss,required:or,reversed:or,rows:Rt,rowSpan:Rt,sandbox:ss,scope:null,scoped:or,seamless:or,selected:or,shadowRootClonable:or,shadowRootDelegatesFocus:or,shadowRootMode:null,shape:null,size:Rt,sizes:null,slot:null,span:Rt,spellCheck:$o,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Rt,step:null,style:null,tabIndex:Rt,target:null,title:null,translate:null,type:null,typeMustMatch:or,useMap:null,value:$o,width:Rt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ss,axis:null,background:null,bgColor:null,border:Rt,borderColor:null,bottomMargin:Rt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:or,declare:or,event:null,face:null,frame:null,frameBorder:null,hSpace:Rt,leftMargin:Rt,link:null,longDesc:null,lowSrc:null,marginHeight:Rt,marginWidth:Rt,noResize:or,noHref:or,noShade:or,noWrap:or,object:null,profile:null,prompt:null,rev:null,rightMargin:Rt,rules:null,scheme:null,scrolling:$o,standby:null,summary:null,text:null,topMargin:Rt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Rt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:or,disableRemotePlayback:or,prefix:null,property:null,results:Rt,security:null,unselectable:null}}),Yht=L2({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:SIe,properties:{about:sf,accentHeight:Rt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Rt,amplitude:Rt,arabicForm:null,ascent:Rt,attributeName:null,attributeType:null,azimuth:Rt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Rt,by:null,calcMode:null,capHeight:Rt,className:ss,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Rt,diffuseConstant:Rt,direction:null,display:null,dur:null,divisor:Rt,dominantBaseline:null,download:or,dx:null,dy:null,edgeMode:null,editable:null,elevation:Rt,enableBackground:null,end:null,event:null,exponent:Rt,externalResourcesRequired:null,fill:null,fillOpacity:Rt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:yT,g2:yT,glyphName:yT,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Rt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Rt,horizOriginX:Rt,horizOriginY:Rt,id:null,ideographic:Rt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Rt,k:Rt,k1:Rt,k2:Rt,k3:Rt,k4:Rt,kernelMatrix:sf,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Rt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Rt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Rt,overlineThickness:Rt,paintOrder:null,panose1:null,path:null,pathLength:Rt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ss,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Rt,pointsAtY:Rt,pointsAtZ:Rt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:sf,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:sf,rev:sf,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:sf,requiredFeatures:sf,requiredFonts:sf,requiredFormats:sf,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Rt,specularExponent:Rt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Rt,strikethroughThickness:Rt,string:null,stroke:null,strokeDashArray:sf,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Rt,strokeOpacity:Rt,strokeWidth:null,style:null,surfaceScale:Rt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:sf,tabIndex:Rt,tableValues:null,target:null,targetX:Rt,targetY:Rt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:sf,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Rt,underlineThickness:Rt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Rt,values:null,vAlphabetic:Rt,vMathematical:Rt,vectorEffect:null,vHanging:Rt,vIdeographic:Rt,version:null,vertAdvY:Rt,vertOriginX:Rt,vertOriginY:Rt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Rt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Kht=/^data[-\w.:]+$/i,mme=/-[a-z]/g,Xht=/[A-Z]/g;function Q8(e,t){const n=AR(t);let r=t,i=Jd;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Kht.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(mme,Jht);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!mme.test(s)){let o=s.replace(Xht,Qht);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=Fee}return new i(r,t)}function Qht(e){return"-"+e.toLowerCase()}function Jht(e){return e.charAt(1).toUpperCase()}const Zht={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},dP=wIe([xIe,EIe,CIe,AIe,Ght],"html"),Sb=wIe([xIe,EIe,CIe,AIe,Yht],"svg");function gme(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function DIe(e){return e.join(" ").trim()}var IIe={},yme=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,ept=/\n/g,tpt=/^\s*/,npt=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,rpt=/^:\s*/,ipt=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,spt=/^[;\s]*/,opt=/^\s+|\s+$/g,apt=`
`,vme="/",bme="*",Ww="",upt="comment",lpt="declaration",cpt=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(ept);m&&(n+=m.length);var g=p.lastIndexOf(apt);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(tpt)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(vme!=e.charAt(0)||bme!=e.charAt(1))){for(var m=2;Ww!=e.charAt(m)&&(bme!=e.charAt(m)||vme!=e.charAt(m+1));)++m;if(m+=2,Ww===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:upt,comment:g})}}function d(){var p=s(),m=u(npt);if(m){if(f(),!u(rpt))return a("property missing ':'");var g=u(ipt),y=p({type:lpt,property:wme(m[0].replace(yme,Ww)),value:g?wme(g[0].replace(yme,Ww)):Ww});return u(spt),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function wme(e){return e?e.replace(opt,Ww):Ww}var fpt=Hs&&Hs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(IIe,"__esModule",{value:!0});var dpt=fpt(cpt);function hpt(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,dpt.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var _me=IIe.default=hpt;const ppt=_me.default||_me,J8=kIe("end"),cg=kIe("start");function kIe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function mpt(e){const t=cg(e),n=J8(e);if(t&&n)return{start:t,end:n}}function ck(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Eme(e.position):"start"in e||"end"in e?Eme(e):"line"in e||"column"in e?iG(e):""}function iG(e){return xme(e&&e.line)+":"+xme(e&&e.column)}function Eme(e){return iG(e&&e.start)+"-"+iG(e&&e.end)}function xme(e){return e&&typeof e=="number"?e:1}class rl extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=ck(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}rl.prototype.file="";rl.prototype.name="";rl.prototype.reason="";rl.prototype.message="";rl.prototype.stack="";rl.prototype.column=void 0;rl.prototype.line=void 0;rl.prototype.ancestors=void 0;rl.prototype.cause=void 0;rl.prototype.fatal=void 0;rl.prototype.place=void 0;rl.prototype.ruleId=void 0;rl.prototype.source=void 0;const Lee={}.hasOwnProperty,gpt=new Map,ypt=/[A-Z]/g,vpt=/-([a-z])/g,bpt=new Set(["table","tbody","thead","tfoot","tr"]),wpt=new Set(["td","th"]),RIe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function _pt(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Ipt(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Dpt(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Sb:dP,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=NIe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function NIe(e,t,n){if(t.type==="element")return Ept(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return xpt(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Tpt(e,t,n);if(t.type==="mdxjsEsm")return Spt(e,t);if(t.type==="root")return Cpt(e,t,n);if(t.type==="text")return Apt(e,t)}function Ept(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Sb,e.schema=i),e.ancestors.push(t);const s=OIe(e,t.tagName,!1),o=kpt(e,t);let a=jee(e,t);return bpt.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!Hht(u):!0})),PIe(e,o,s,t),Bee(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function xpt(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}DR(e,t.position)}function Spt(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);DR(e,t.position)}function Tpt(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Sb,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:OIe(e,t.name,!0),o=Rpt(e,t),a=jee(e,t);return PIe(e,o,s,t),Bee(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Cpt(e,t,n){const r={};return Bee(r,jee(e,t)),e.create(t,e.Fragment,r,n)}function Apt(e,t){return t.value}function PIe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Bee(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Dpt(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function Ipt(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=cg(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function kpt(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&Lee.call(t.properties,i)){const s=Npt(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&wpt.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Rpt(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else DR(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else DR(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function jee(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:gpt;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=NIe(e,s,o);a!==void 0&&n.push(a)}return n}function Npt(e,t,n){const r=Q8(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?bIe(n):DIe(n)),r.property==="style"){let i=typeof n=="object"?n:Ppt(e,String(n));return e.stylePropertyNameCase==="css"&&(i=Opt(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?Zht[r.property]||r.property:r.attribute,n]}}function Ppt(e,t){const n={};try{ppt(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new rl("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=RIe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(vpt,$pt)),n[o]=s}}function OIe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=dme(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=dme(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return Lee.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);DR(e)}function DR(e,t){const n=new rl("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=RIe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Opt(e){const t={};let n;for(n in e)Lee.call(e,n)&&(t[Mpt(n)]=e[n]);return t}function Mpt(e){let t=e.replace(ypt,Fpt);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function $pt(e,t){return t.toUpperCase()}function Fpt(e){return"-"+e.toLowerCase()}const Bz={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Lpt={};function Bpt(e,t){const n=Lpt,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return MIe(e,r,i)}function MIe(e,t,n){if(jpt(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Sme(e.children,t,n)}return Array.isArray(e)?Sme(e,t,n):""}function Sme(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=MIe(e[i],t,n);return r.join("")}function jpt(e){return!!(e&&typeof e=="object")}const Tme=document.createElement("i");function Uee(e){const t="&"+e+";";Tme.innerHTML=t;const n=Tme.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Q0(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function bd(e,t){return e.length>0?(Q0(e,e.length,0,t),e):t}const Cme={}.hasOwnProperty;function Upt(e){const t={};let n=-1;for(;++n<e.length;)zpt(t,e[n]);return t}function zpt(e,t){let n;for(n in t){const i=(Cme.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){Cme.call(i,o)||(i[o]=[]);const a=s[o];Vpt(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Vpt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Q0(e,0,0,r)}function $Ie(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function vT(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const im=Tb(/[A-Za-z]/),yf=Tb(/[\dA-Za-z]/),Hpt=Tb(/[#-'*+\--9=?A-Z^-~]/);function sG(e){return e!==null&&(e<32||e===127)}const oG=Tb(/\d/),qpt=Tb(/[\dA-Fa-f]/),Wpt=Tb(/[!-/:-@[-`{-~]/);function zn(e){return e!==null&&e<-2}function kc(e){return e!==null&&(e<0||e===32)}function Ei(e){return e===-2||e===-1||e===32}const Gpt=Tb(new RegExp("\\p{P}|\\p{S}","u")),Ypt=Tb(/\s/);function Tb(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function B2(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&yf(e.charCodeAt(n+1))&&yf(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function as(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return Ei(u)?(e.enter(n),a(u)):t(u)}function a(u){return Ei(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const Kpt={tokenize:Xpt};function Xpt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),as(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return zn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const Qpt={tokenize:Jpt},Ame={tokenize:Zpt};function Jpt(e){const t=this,n=[];let r=0,i,s,o;return a;function a(w){if(r<n.length){const S=n[r];return t.containerState=S[1],e.attempt(S[0].continuation,u,l)(w)}return l(w)}function u(w){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&b();const S=t.events.length;let E=S,T;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){T=t.events[E][1].end;break}y(r);let C=S;for(;C<t.events.length;)t.events[C][1].end=Object.assign({},T),C++;return Q0(t.events,E+1,0,t.events.slice(S)),t.events.length=C,l(w)}return a(w)}function l(w){if(r===n.length){if(!i)return d(w);if(i.currentConstruct&&i.currentConstruct.concrete)return p(w);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Ame,c,f)(w)}function c(w){return i&&b(),y(r),d(w)}function f(w){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(w)}function d(w){return t.containerState={},e.attempt(Ame,h,p)(w)}function h(w){return r++,n.push([t.currentConstruct,t.containerState]),d(w)}function p(w){if(w===null){i&&b(),y(0),e.consume(w);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(w)}function m(w){if(w===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(w);return}return zn(w)?(e.consume(w),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(w),m)}function g(w,S){const E=t.sliceStream(w);if(S&&E.push(null),w.previous=s,s&&(s.next=w),s=w,i.defineSkip(w.start),i.write(E),t.parser.lazy[w.start.line]){let T=i.events.length;for(;T--;)if(i.events[T][1].start.offset<o&&(!i.events[T][1].end||i.events[T][1].end.offset>o))return;const C=t.events.length;let A=C,I,k;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){if(I){k=t.events[A][1].end;break}I=!0}for(y(r),T=C;T<t.events.length;)t.events[T][1].end=Object.assign({},k),T++;Q0(t.events,A+1,0,t.events.slice(C)),t.events.length=T}}function y(w){let S=n.length;for(;S-- >w;){const E=n[S];t.containerState=E[1],E[0].exit.call(t,e)}n.length=w}function b(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Zpt(e,t,n){return as(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Dme(e){if(e===null||kc(e)||Ypt(e))return 1;if(Gpt(e))return 2}function zee(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const aG={name:"attention",tokenize:tmt,resolveAll:emt};function emt(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Ime(f,-u),Ime(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=bd(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=bd(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=bd(l,zee(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=bd(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=bd(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Q0(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function tmt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Dme(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Dme(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Ime(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const nmt={name:"autolink",tokenize:rmt};function rmt(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return im(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||yf(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||yf(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||sG(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):Hpt(h)?(e.consume(h),l):n(h)}function c(h){return yf(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||yf(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const Z8={tokenize:imt,partial:!0};function imt(e,t,n){return r;function r(s){return Ei(s)?as(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||zn(s)?t(s):n(s)}}const FIe={name:"blockQuote",tokenize:smt,continuation:{tokenize:omt},exit:amt};function smt(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Ei(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function omt(e,t,n){const r=this;return i;function i(o){return Ei(o)?as(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(FIe,t,n)(o)}}function amt(e){e.exit("blockQuote")}const LIe={name:"characterEscape",tokenize:umt};function umt(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return Wpt(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const BIe={name:"characterReference",tokenize:lmt};function lmt(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=yf,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=qpt,c):(e.enter("characterReferenceValue"),s=7,o=oG,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===yf&&!Uee(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const kme={tokenize:fmt,partial:!0},Rme={name:"codeFenced",tokenize:cmt,concrete:!0};function cmt(e,t,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return u;function u(T){return l(T)}function l(T){const C=r.events[r.events.length-1];return s=C&&C[1].type==="linePrefix"?C[2].sliceSerialize(C[1],!0).length:0,a=T,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(T)}function c(T){return T===a?(o++,e.consume(T),c):o<3?n(T):(e.exit("codeFencedFenceSequence"),Ei(T)?as(e,f,"whitespace")(T):f(T))}function f(T){return T===null||zn(T)?(e.exit("codeFencedFence"),r.interrupt?t(T):e.check(kme,m,S)(T)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(T))}function d(T){return T===null||zn(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(T)):Ei(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),as(e,h,"whitespace")(T)):T===96&&T===a?n(T):(e.consume(T),d)}function h(T){return T===null||zn(T)?f(T):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(T))}function p(T){return T===null||zn(T)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(T)):T===96&&T===a?n(T):(e.consume(T),p)}function m(T){return e.attempt(i,S,g)(T)}function g(T){return e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),y}function y(T){return s>0&&Ei(T)?as(e,b,"linePrefix",s+1)(T):b(T)}function b(T){return T===null||zn(T)?e.check(kme,m,S)(T):(e.enter("codeFlowValue"),w(T))}function w(T){return T===null||zn(T)?(e.exit("codeFlowValue"),b(T)):(e.consume(T),w)}function S(T){return e.exit("codeFenced"),t(T)}function E(T,C,A){let I=0;return k;function k(j){return T.enter("lineEnding"),T.consume(j),T.exit("lineEnding"),N}function N(j){return T.enter("codeFencedFence"),Ei(j)?as(T,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):F(j)}function F(j){return j===a?(T.enter("codeFencedFenceSequence"),M(j)):A(j)}function M(j){return j===a?(I++,T.consume(j),M):I>=o?(T.exit("codeFencedFenceSequence"),Ei(j)?as(T,L,"whitespace")(j):L(j)):A(j)}function L(j){return j===null||zn(j)?(T.exit("codeFencedFence"),C(j)):A(j)}}}function fmt(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const jz={name:"codeIndented",tokenize:hmt},dmt={tokenize:pmt,partial:!0};function hmt(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),as(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):zn(l)?e.attempt(dmt,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||zn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function pmt(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):zn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):as(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):zn(o)?i(o):n(o)}}const mmt={name:"codeText",tokenize:vmt,resolve:gmt,previous:ymt};function gmt(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function ymt(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function vmt(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):zn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||zn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class bmt{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&gD(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),gD(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),gD(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);gD(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);gD(this.left,n.reverse())}}}function gD(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function jIe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new bmt(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,wmt(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return Q0(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function wmt(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),b=s.pop();u.push([b,b+y.length-1]),e.splice(b,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const _mt={tokenize:Smt,resolve:xmt},Emt={tokenize:Tmt,partial:!0};function xmt(e){return jIe(e),e}function Smt(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):zn(a)?e.check(Emt,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Tmt(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),as(e,s,"linePrefix")}function s(o){if(o===null||zn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function UIe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||sG(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||zn(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||kc(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||sG(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function zIe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):zn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||zn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!Ei(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function VIe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):zn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),as(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||zn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function fk(e,t){let n;return r;function r(i){return zn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Ei(i)?as(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const Cmt={name:"definition",tokenize:Dmt},Amt={tokenize:Imt,partial:!0};function Dmt(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return zIe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=vT(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return kc(h)?fk(e,l)(h):l(h)}function l(h){return UIe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(Amt,f,f)(h)}function f(h){return Ei(h)?as(e,d,"whitespace")(h):d(h)}function d(h){return h===null||zn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function Imt(e,t,n){return r;function r(a){return kc(a)?fk(e,i)(a):n(a)}function i(a){return VIe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Ei(a)?as(e,o,"whitespace")(a):o(a)}function o(a){return a===null||zn(a)?t(a):n(a)}}const kmt={name:"hardBreakEscape",tokenize:Rmt};function Rmt(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return zn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const Nmt={name:"headingAtx",tokenize:Omt,resolve:Pmt};function Pmt(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Q0(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function Omt(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||kc(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||zn(c)?(e.exit("atxHeading"),t(c)):Ei(c)?as(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||kc(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const Mmt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Nme=["pre","script","style","textarea"],$mt={name:"htmlFlow",tokenize:jmt,resolveTo:Bmt,concrete:!0},Fmt={tokenize:zmt,partial:!0},Lmt={tokenize:Umt,partial:!0};function Bmt(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function jmt(e,t,n){const r=this;let i,s,o,a,u;return l;function l(q){return c(q)}function c(q){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(q),f}function f(q){return q===33?(e.consume(q),d):q===47?(e.consume(q),s=!0,m):q===63?(e.consume(q),i=3,r.interrupt?t:$):im(q)?(e.consume(q),o=String.fromCharCode(q),g):n(q)}function d(q){return q===45?(e.consume(q),i=2,h):q===91?(e.consume(q),i=5,a=0,p):im(q)?(e.consume(q),i=4,r.interrupt?t:$):n(q)}function h(q){return q===45?(e.consume(q),r.interrupt?t:$):n(q)}function p(q){const Y="CDATA[";return q===Y.charCodeAt(a++)?(e.consume(q),a===Y.length?r.interrupt?t:F:p):n(q)}function m(q){return im(q)?(e.consume(q),o=String.fromCharCode(q),g):n(q)}function g(q){if(q===null||q===47||q===62||kc(q)){const Y=q===47,Z=o.toLowerCase();return!Y&&!s&&Nme.includes(Z)?(i=1,r.interrupt?t(q):F(q)):Mmt.includes(o.toLowerCase())?(i=6,Y?(e.consume(q),y):r.interrupt?t(q):F(q)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(q):s?b(q):w(q))}return q===45||yf(q)?(e.consume(q),o+=String.fromCharCode(q),g):n(q)}function y(q){return q===62?(e.consume(q),r.interrupt?t:F):n(q)}function b(q){return Ei(q)?(e.consume(q),b):k(q)}function w(q){return q===47?(e.consume(q),k):q===58||q===95||im(q)?(e.consume(q),S):Ei(q)?(e.consume(q),w):k(q)}function S(q){return q===45||q===46||q===58||q===95||yf(q)?(e.consume(q),S):E(q)}function E(q){return q===61?(e.consume(q),T):Ei(q)?(e.consume(q),E):w(q)}function T(q){return q===null||q===60||q===61||q===62||q===96?n(q):q===34||q===39?(e.consume(q),u=q,C):Ei(q)?(e.consume(q),T):A(q)}function C(q){return q===u?(e.consume(q),u=null,I):q===null||zn(q)?n(q):(e.consume(q),C)}function A(q){return q===null||q===34||q===39||q===47||q===60||q===61||q===62||q===96||kc(q)?E(q):(e.consume(q),A)}function I(q){return q===47||q===62||Ei(q)?w(q):n(q)}function k(q){return q===62?(e.consume(q),N):n(q)}function N(q){return q===null||zn(q)?F(q):Ei(q)?(e.consume(q),N):n(q)}function F(q){return q===45&&i===2?(e.consume(q),B):q===60&&i===1?(e.consume(q),z):q===62&&i===4?(e.consume(q),W):q===63&&i===3?(e.consume(q),$):q===93&&i===5?(e.consume(q),G):zn(q)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Fmt,K,M)(q)):q===null||zn(q)?(e.exit("htmlFlowData"),M(q)):(e.consume(q),F)}function M(q){return e.check(Lmt,L,K)(q)}function L(q){return e.enter("lineEnding"),e.consume(q),e.exit("lineEnding"),j}function j(q){return q===null||zn(q)?M(q):(e.enter("htmlFlowData"),F(q))}function B(q){return q===45?(e.consume(q),$):F(q)}function z(q){return q===47?(e.consume(q),o="",V):F(q)}function V(q){if(q===62){const Y=o.toLowerCase();return Nme.includes(Y)?(e.consume(q),W):F(q)}return im(q)&&o.length<8?(e.consume(q),o+=String.fromCharCode(q),V):F(q)}function G(q){return q===93?(e.consume(q),$):F(q)}function $(q){return q===62?(e.consume(q),W):q===45&&i===2?(e.consume(q),$):F(q)}function W(q){return q===null||zn(q)?(e.exit("htmlFlowData"),K(q)):(e.consume(q),W)}function K(q){return e.exit("htmlFlow"),t(q)}}function Umt(e,t,n){const r=this;return i;function i(o){return zn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function zmt(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(Z8,t,n)}}const Vmt={name:"htmlText",tokenize:Hmt};function Hmt(e,t,n){const r=this;let i,s,o;return a;function a($){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume($),u}function u($){return $===33?(e.consume($),l):$===47?(e.consume($),E):$===63?(e.consume($),w):im($)?(e.consume($),A):n($)}function l($){return $===45?(e.consume($),c):$===91?(e.consume($),s=0,p):im($)?(e.consume($),b):n($)}function c($){return $===45?(e.consume($),h):n($)}function f($){return $===null?n($):$===45?(e.consume($),d):zn($)?(o=f,z($)):(e.consume($),f)}function d($){return $===45?(e.consume($),h):f($)}function h($){return $===62?B($):$===45?d($):f($)}function p($){const W="CDATA[";return $===W.charCodeAt(s++)?(e.consume($),s===W.length?m:p):n($)}function m($){return $===null?n($):$===93?(e.consume($),g):zn($)?(o=m,z($)):(e.consume($),m)}function g($){return $===93?(e.consume($),y):m($)}function y($){return $===62?B($):$===93?(e.consume($),y):m($)}function b($){return $===null||$===62?B($):zn($)?(o=b,z($)):(e.consume($),b)}function w($){return $===null?n($):$===63?(e.consume($),S):zn($)?(o=w,z($)):(e.consume($),w)}function S($){return $===62?B($):w($)}function E($){return im($)?(e.consume($),T):n($)}function T($){return $===45||yf($)?(e.consume($),T):C($)}function C($){return zn($)?(o=C,z($)):Ei($)?(e.consume($),C):B($)}function A($){return $===45||yf($)?(e.consume($),A):$===47||$===62||kc($)?I($):n($)}function I($){return $===47?(e.consume($),B):$===58||$===95||im($)?(e.consume($),k):zn($)?(o=I,z($)):Ei($)?(e.consume($),I):B($)}function k($){return $===45||$===46||$===58||$===95||yf($)?(e.consume($),k):N($)}function N($){return $===61?(e.consume($),F):zn($)?(o=N,z($)):Ei($)?(e.consume($),N):I($)}function F($){return $===null||$===60||$===61||$===62||$===96?n($):$===34||$===39?(e.consume($),i=$,M):zn($)?(o=F,z($)):Ei($)?(e.consume($),F):(e.consume($),L)}function M($){return $===i?(e.consume($),i=void 0,j):$===null?n($):zn($)?(o=M,z($)):(e.consume($),M)}function L($){return $===null||$===34||$===39||$===60||$===61||$===96?n($):$===47||$===62||kc($)?I($):(e.consume($),L)}function j($){return $===47||$===62||kc($)?I($):n($)}function B($){return $===62?(e.consume($),e.exit("htmlTextData"),e.exit("htmlText"),t):n($)}function z($){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),V}function V($){return Ei($)?as(e,G,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):G($)}function G($){return e.enter("htmlTextData"),o($)}}const Vee={name:"labelEnd",tokenize:Xmt,resolveTo:Kmt,resolveAll:Ymt},qmt={tokenize:Qmt},Wmt={tokenize:Jmt},Gmt={tokenize:Zmt};function Ymt(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function Kmt(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=bd(a,e.slice(s+1,s+r+3)),a=bd(a,[["enter",c,t]]),a=bd(a,zee(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=bd(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=bd(a,e.slice(o+1)),a=bd(a,[["exit",u,t]]),Q0(e,s,e.length,a),e}function Xmt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(vT(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(qmt,c,o?c:f)(d):d===91?e.attempt(Wmt,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(Gmt,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function Qmt(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return kc(f)?fk(e,s)(f):s(f)}function s(f){return f===41?c(f):UIe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return kc(f)?fk(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?VIe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return kc(f)?fk(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function Jmt(e,t,n){const r=this;return i;function i(a){return zIe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(vT(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function Zmt(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const egt={name:"labelStartImage",tokenize:tgt,resolveAll:Vee.resolveAll};function tgt(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const ngt={name:"labelStartLink",tokenize:rgt,resolveAll:Vee.resolveAll};function rgt(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Uz={name:"lineEnding",tokenize:igt};function igt(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),as(e,t,"linePrefix")}}const V$={name:"thematicBreak",tokenize:sgt};function sgt(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||zn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),Ei(l)?as(e,a,"whitespace")(l):a(l))}}const rc={name:"list",tokenize:ugt,continuation:{tokenize:lgt},exit:fgt},ogt={tokenize:dgt,partial:!0},agt={tokenize:cgt,partial:!0};function ugt(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:oG(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(V$,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return oG(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(Z8,r.interrupt?n:c,e.attempt(ogt,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return Ei(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function lgt(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Z8,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,as(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Ei(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(agt,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,as(e,e.attempt(rc,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function cgt(e,t,n){const r=this;return as(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function fgt(e){e.exit(this.containerState.type)}function dgt(e,t,n){const r=this;return as(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Ei(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Pme={name:"setextUnderline",tokenize:pgt,resolveTo:hgt};function hgt(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function pgt(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),Ei(l)?as(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||zn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const mgt={tokenize:ggt};function ggt(e){const t=this,n=e.attempt(Z8,r,e.attempt(this.parser.constructs.flowInitial,i,as(e,e.attempt(this.parser.constructs.flow,i,e.attempt(_mt,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const ygt={resolveAll:qIe()},vgt=HIe("string"),bgt=HIe("text");function HIe(e){return{tokenize:t,resolveAll:qIe(e==="text"?wgt:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function qIe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function wgt(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function _gt(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:b,enter:w,exit:S,attempt:C(E),check:C(T),interrupt:C(T,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(N){return o=bd(o,N),g(),o[o.length-1]!==null?[]:(A(t,0),l.events=zee(s,l.events,l),l.events)}function d(N,F){return xgt(h(N),F)}function h(N){return Egt(o,N)}function p(){const{line:N,column:F,offset:M,_index:L,_bufferIndex:j}=r;return{line:N,column:F,offset:M,_index:L,_bufferIndex:j}}function m(N){i[N.line]=N.column,k()}function g(){let N;for(;r._index<o.length;){const F=o[r._index];if(typeof F=="string")for(N=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===N&&r._bufferIndex<F.length;)y(F.charCodeAt(r._bufferIndex));else y(F)}}function y(N){c=c(N)}function b(N){zn(N)?(r.line++,r.column=1,r.offset+=N===-3?2:1,k()):N!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=N}function w(N,F){const M=F||{};return M.type=N,M.start=p(),l.events.push(["enter",M,l]),a.push(M),M}function S(N){const F=a.pop();return F.end=p(),l.events.push(["exit",F,l]),F}function E(N,F){A(N,F.from)}function T(N,F){F.restore()}function C(N,F){return M;function M(L,j,B){let z,V,G,$;return Array.isArray(L)?K(L):"tokenize"in L?K([L]):W(L);function W(ae){return be;function be(Se){const we=Se!==null&&ae[Se],Ce=Se!==null&&ae.null,Le=[...Array.isArray(we)?we:we?[we]:[],...Array.isArray(Ce)?Ce:Ce?[Ce]:[]];return K(Le)(Se)}}function K(ae){return z=ae,V=0,ae.length===0?B:q(ae[V])}function q(ae){return be;function be(Se){return $=I(),G=ae,ae.partial||(l.currentConstruct=ae),ae.name&&l.parser.constructs.disable.null.includes(ae.name)?Z():ae.tokenize.call(F?Object.assign(Object.create(l),F):l,u,Y,Z)(Se)}}function Y(ae){return N(G,$),j}function Z(ae){return $.restore(),++V<z.length?q(z[V]):B}}}function A(N,F){N.resolveAll&&!s.includes(N)&&s.push(N),N.resolve&&Q0(l.events,F,l.events.length-F,N.resolve(l.events.slice(F),l)),N.resolveTo&&(l.events=N.resolveTo(l.events,l))}function I(){const N=p(),F=l.previous,M=l.currentConstruct,L=l.events.length,j=Array.from(a);return{restore:B,from:L};function B(){r=N,l.previous=F,l.currentConstruct=M,l.events.length=L,a=j,k()}}function k(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Egt(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function xgt(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const Sgt={42:rc,43:rc,45:rc,48:rc,49:rc,50:rc,51:rc,52:rc,53:rc,54:rc,55:rc,56:rc,57:rc,62:FIe},Tgt={91:Cmt},Cgt={[-2]:jz,[-1]:jz,32:jz},Agt={35:Nmt,42:V$,45:[Pme,V$],60:$mt,61:Pme,95:V$,96:Rme,126:Rme},Dgt={38:BIe,92:LIe},Igt={[-5]:Uz,[-4]:Uz,[-3]:Uz,33:egt,38:BIe,42:aG,60:[nmt,Vmt],91:ngt,92:[kmt,LIe],93:Vee,95:aG,96:mmt},kgt={null:[aG,ygt]},Rgt={null:[42,95]},Ngt={null:[]},Pgt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Rgt,contentInitial:Tgt,disable:Ngt,document:Sgt,flow:Agt,flowInitial:Cgt,insideSpan:kgt,string:Dgt,text:Igt},Symbol.toStringTag,{value:"Module"}));function Ogt(e){const n=Upt([Pgt,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(Kpt),document:i(Qpt),flow:i(mgt),string:i(vgt),text:i(bgt)};return r;function i(s){return o;function o(a){return _gt(r,s,a)}}}function Mgt(e){for(;!jIe(e););return e}const Ome=/[\0\t\n\r]/g;function $gt(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Ome.lastIndex=f,l=Ome.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const Fgt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Lgt(e){return e.replace(Fgt,Bgt)}function Bgt(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return $Ie(n.slice(s?2:1),s?16:10)}return Uee(n)||e}const WIe={}.hasOwnProperty;function jgt(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Ugt(n)(Mgt(Ogt(n).document().write($gt()(e,t,!0))))}function Ugt(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(lt),autolinkProtocol:I,autolinkEmail:I,atxHeading:s(Ct),blockQuote:s(Ce),characterEscape:I,characterReference:I,codeFenced:s(Le),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Le,o),codeText:s(ke,o),codeTextData:I,data:I,codeFlowValue:I,definition:s(Ze),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ke),hardBreakEscape:s(wt),hardBreakTrailing:s(wt),htmlFlow:s(Re,o),htmlFlowData:I,htmlText:s(Re,o),htmlTextData:I,image:s(He),label:o,link:s(lt),listItem:s(Vt),listItemValue:d,listOrdered:s(St,f),listUnordered:s(St),paragraph:s(ht),reference:q,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Ct),strong:s(Q),thematicBreak:s(_e)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:we,autolinkProtocol:Se,blockQuote:u(),characterEscapeValue:k,characterReferenceMarkerHexadecimal:Z,characterReferenceMarkerNumeric:Z,characterReferenceValue:ae,characterReference:be,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:k,codeIndented:u(y),codeText:u(j),codeTextData:k,data:k,definition:u(),definitionDestinationString:S,definitionLabelString:b,definitionTitleString:w,emphasis:u(),hardBreakEscape:u(F),hardBreakTrailing:u(F),htmlFlow:u(M),htmlFlowData:k,htmlText:u(L),htmlTextData:k,image:u(z),label:G,labelText:V,lineEnding:N,link:u(B),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:Y,resourceDestinationString:$,resourceTitleString:W,resource:K,setextHeading:u(A),setextHeadingLineSequence:C,setextHeadingText:T,strong:u(),thematicBreak:u()}};GIe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(oe){let he={type:"root",children:[]};const Ee={stack:[he],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},Fe=[];let je=-1;for(;++je<oe.length;)if(oe[je][1].type==="listOrdered"||oe[je][1].type==="listUnordered")if(oe[je][0]==="enter")Fe.push(je);else{const ct=Fe.pop();je=i(oe,ct,je)}for(je=-1;++je<oe.length;){const ct=t[oe[je][0]];WIe.call(ct,oe[je][1].type)&&ct[oe[je][1].type].call(Object.assign({sliceSerialize:oe[je][2].sliceSerialize},Ee),oe[je][1])}if(Ee.tokenStack.length>0){const ct=Ee.tokenStack[Ee.tokenStack.length-1];(ct[1]||Mme).call(Ee,void 0,ct[0])}for(he.position={start:rv(oe.length>0?oe[0][1].start:{line:1,column:1,offset:0}),end:rv(oe.length>0?oe[oe.length-2][1].end:{line:1,column:1,offset:0})},je=-1;++je<t.transforms.length;)he=t.transforms[je](he)||he;return he}function i(oe,he,Ee){let Fe=he-1,je=-1,ct=!1,rt,qt,en,Yt;for(;++Fe<=Ee;){const un=oe[Fe];switch(un[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{un[0]==="enter"?je++:je--,Yt=void 0;break}case"lineEndingBlank":{un[0]==="enter"&&(rt&&!Yt&&!je&&!en&&(en=Fe),Yt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Yt=void 0}if(!je&&un[0]==="enter"&&un[1].type==="listItemPrefix"||je===-1&&un[0]==="exit"&&(un[1].type==="listUnordered"||un[1].type==="listOrdered")){if(rt){let Sn=Fe;for(qt=void 0;Sn--;){const Bn=oe[Sn];if(Bn[1].type==="lineEnding"||Bn[1].type==="lineEndingBlank"){if(Bn[0]==="exit")continue;qt&&(oe[qt][1].type="lineEndingBlank",ct=!0),Bn[1].type="lineEnding",qt=Sn}else if(!(Bn[1].type==="linePrefix"||Bn[1].type==="blockQuotePrefix"||Bn[1].type==="blockQuotePrefixWhitespace"||Bn[1].type==="blockQuoteMarker"||Bn[1].type==="listItemIndent"))break}en&&(!qt||en<qt)&&(rt._spread=!0),rt.end=Object.assign({},qt?oe[qt][1].start:un[1].end),oe.splice(qt||Fe,0,["exit",rt,un[2]]),Fe++,Ee++}if(un[1].type==="listItemPrefix"){const Sn={type:"listItem",_spread:!1,start:Object.assign({},un[1].start),end:void 0};rt=Sn,oe.splice(Fe,0,["enter",Sn,un[2]]),Fe++,Ee++,en=void 0,Yt=!0}}}return oe[he][1]._spread=ct,Ee}function s(oe,he){return Ee;function Ee(Fe){a.call(this,oe(Fe),Fe),he&&he.call(this,Fe)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(oe,he,Ee){this.stack[this.stack.length-1].children.push(oe),this.stack.push(oe),this.tokenStack.push([he,Ee]),oe.position={start:rv(he.start),end:void 0}}function u(oe){return he;function he(Ee){oe&&oe.call(this,Ee),l.call(this,Ee)}}function l(oe,he){const Ee=this.stack.pop(),Fe=this.tokenStack.pop();if(Fe)Fe[0].type!==oe.type&&(he?he.call(this,oe,Fe[0]):(Fe[1]||Mme).call(this,oe,Fe[0]));else throw new Error("Cannot close `"+oe.type+"` ("+ck({start:oe.start,end:oe.end})+"): its not open");Ee.position.end=rv(oe.end)}function c(){return Bpt(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(oe){if(this.data.expectingFirstListItemValue){const he=this.stack[this.stack.length-2];he.start=Number.parseInt(this.sliceSerialize(oe),10),this.data.expectingFirstListItemValue=void 0}}function h(){const oe=this.resume(),he=this.stack[this.stack.length-1];he.lang=oe}function p(){const oe=this.resume(),he=this.stack[this.stack.length-1];he.meta=oe}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const oe=this.resume(),he=this.stack[this.stack.length-1];he.value=oe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const oe=this.resume(),he=this.stack[this.stack.length-1];he.value=oe.replace(/(\r?\n|\r)$/g,"")}function b(oe){const he=this.resume(),Ee=this.stack[this.stack.length-1];Ee.label=he,Ee.identifier=vT(this.sliceSerialize(oe)).toLowerCase()}function w(){const oe=this.resume(),he=this.stack[this.stack.length-1];he.title=oe}function S(){const oe=this.resume(),he=this.stack[this.stack.length-1];he.url=oe}function E(oe){const he=this.stack[this.stack.length-1];if(!he.depth){const Ee=this.sliceSerialize(oe).length;he.depth=Ee}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function C(oe){const he=this.stack[this.stack.length-1];he.depth=this.sliceSerialize(oe).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function I(oe){const Ee=this.stack[this.stack.length-1].children;let Fe=Ee[Ee.length-1];(!Fe||Fe.type!=="text")&&(Fe=de(),Fe.position={start:rv(oe.start),end:void 0},Ee.push(Fe)),this.stack.push(Fe)}function k(oe){const he=this.stack.pop();he.value+=this.sliceSerialize(oe),he.position.end=rv(oe.end)}function N(oe){const he=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ee=he.children[he.children.length-1];Ee.position.end=rv(oe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(he.type)&&(I.call(this,oe),k.call(this,oe))}function F(){this.data.atHardBreak=!0}function M(){const oe=this.resume(),he=this.stack[this.stack.length-1];he.value=oe}function L(){const oe=this.resume(),he=this.stack[this.stack.length-1];he.value=oe}function j(){const oe=this.resume(),he=this.stack[this.stack.length-1];he.value=oe}function B(){const oe=this.stack[this.stack.length-1];if(this.data.inReference){const he=this.data.referenceType||"shortcut";oe.type+="Reference",oe.referenceType=he,delete oe.url,delete oe.title}else delete oe.identifier,delete oe.label;this.data.referenceType=void 0}function z(){const oe=this.stack[this.stack.length-1];if(this.data.inReference){const he=this.data.referenceType||"shortcut";oe.type+="Reference",oe.referenceType=he,delete oe.url,delete oe.title}else delete oe.identifier,delete oe.label;this.data.referenceType=void 0}function V(oe){const he=this.sliceSerialize(oe),Ee=this.stack[this.stack.length-2];Ee.label=Lgt(he),Ee.identifier=vT(he).toLowerCase()}function G(){const oe=this.stack[this.stack.length-1],he=this.resume(),Ee=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ee.type==="link"){const Fe=oe.children;Ee.children=Fe}else Ee.alt=he}function $(){const oe=this.resume(),he=this.stack[this.stack.length-1];he.url=oe}function W(){const oe=this.resume(),he=this.stack[this.stack.length-1];he.title=oe}function K(){this.data.inReference=void 0}function q(){this.data.referenceType="collapsed"}function Y(oe){const he=this.resume(),Ee=this.stack[this.stack.length-1];Ee.label=he,Ee.identifier=vT(this.sliceSerialize(oe)).toLowerCase(),this.data.referenceType="full"}function Z(oe){this.data.characterReferenceType=oe.type}function ae(oe){const he=this.sliceSerialize(oe),Ee=this.data.characterReferenceType;let Fe;Ee?(Fe=$Ie(he,Ee==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Fe=Uee(he);const je=this.stack[this.stack.length-1];je.value+=Fe}function be(oe){const he=this.stack.pop();he.position.end=rv(oe.end)}function Se(oe){k.call(this,oe);const he=this.stack[this.stack.length-1];he.url=this.sliceSerialize(oe)}function we(oe){k.call(this,oe);const he=this.stack[this.stack.length-1];he.url="mailto:"+this.sliceSerialize(oe)}function Ce(){return{type:"blockquote",children:[]}}function Le(){return{type:"code",lang:null,meta:null,value:""}}function ke(){return{type:"inlineCode",value:""}}function Ze(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ke(){return{type:"emphasis",children:[]}}function Ct(){return{type:"heading",depth:0,children:[]}}function wt(){return{type:"break"}}function Re(){return{type:"html",value:""}}function He(){return{type:"image",title:null,url:"",alt:null}}function lt(){return{type:"link",title:null,url:"",children:[]}}function St(oe){return{type:"list",ordered:oe.type==="listOrdered",start:null,spread:oe._spread,children:[]}}function Vt(oe){return{type:"listItem",spread:oe._spread,checked:null,children:[]}}function ht(){return{type:"paragraph",children:[]}}function Q(){return{type:"strong",children:[]}}function de(){return{type:"text",value:""}}function _e(){return{type:"thematicBreak"}}}function rv(e){return{line:e.line,column:e.column,offset:e.offset}}function GIe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?GIe(e,r):zgt(e,r)}}function zgt(e,t){let n;for(n in t)if(WIe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Mme(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+ck({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+ck({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+ck({start:t.start,end:t.end})+") is still open")}function Vgt(e){const t=this;t.parser=n;function n(r){return jgt(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Hgt(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function qgt(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Wgt(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function Ggt(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Ygt(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Kgt(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=B2(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function Xgt(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Qgt(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function YIe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Jgt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return YIe(e,t);const i={src:B2(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function Zgt(e,t){const n={src:B2(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function e0t(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function t0t(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return YIe(e,t);const i={href:B2(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function n0t(e,t){const n={href:B2(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function r0t(e,t,n){const r=e.all(t),i=n?i0t(n):KIe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function i0t(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=KIe(n[r])}return t}function KIe(e){const t=e.spread;return t??e.children.length>1}function s0t(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function o0t(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function a0t(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function u0t(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function l0t(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=cg(t.children[1]),u=J8(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function c0t(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function f0t(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const $me=9,Fme=32;function d0t(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Lme(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Lme(t.slice(i),i>0,!1)),s.join("")}function Lme(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===$me||s===Fme;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===$me||s===Fme;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function h0t(e,t){const n={type:"text",value:d0t(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function p0t(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const m0t={blockquote:Hgt,break:qgt,code:Wgt,delete:Ggt,emphasis:Ygt,footnoteReference:Kgt,heading:Xgt,html:Qgt,imageReference:Jgt,image:Zgt,inlineCode:e0t,linkReference:t0t,link:n0t,listItem:r0t,list:s0t,paragraph:o0t,root:a0t,strong:u0t,table:l0t,tableCell:f0t,tableRow:c0t,text:h0t,thematicBreak:p0t,toml:tM,yaml:tM,definition:tM,footnoteDefinition:tM};function tM(){}const XIe=-1,eB=0,RL=1,NL=2,Hee=3,qee=4,Wee=5,Gee=6,QIe=7,JIe=8,Bme=typeof self=="object"?self:globalThis,g0t=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case eB:case XIe:return n(o,i);case RL:{const a=n([],i);for(const u of o)a.push(r(u));return a}case NL:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case Hee:return n(new Date(o),i);case qee:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case Wee:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case Gee:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case QIe:{const{name:a,message:u}=o;return n(new Bme[a](u),i)}case JIe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Bme[s](o),i)};return r},jme=e=>g0t(new Map,e)(0),Gx="",{toString:y0t}={},{keys:v0t}=Object,yD=e=>{const t=typeof e;if(t!=="object"||!e)return[eB,t];const n=y0t.call(e).slice(8,-1);switch(n){case"Array":return[RL,Gx];case"Object":return[NL,Gx];case"Date":return[Hee,Gx];case"RegExp":return[qee,Gx];case"Map":return[Wee,Gx];case"Set":return[Gee,Gx]}return n.includes("Array")?[RL,n]:n.includes("Error")?[QIe,n]:[NL,n]},nM=([e,t])=>e===eB&&(t==="function"||t==="symbol"),b0t=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=yD(o);switch(a){case eB:{let c=o;switch(u){case"bigint":a=JIe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([XIe],o)}return i([a,c],o)}case RL:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case NL:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of v0t(o))(e||!nM(yD(o[d])))&&c.push([s(d),s(o[d])]);return f}case Hee:return i([a,o.toISOString()],o);case qee:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case Wee:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(nM(yD(d))||nM(yD(h))))&&c.push([s(d),s(h)]);return f}case Gee:{const c=[],f=i([a,c],o);for(const d of o)(e||!nM(yD(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},Ume=(e,{json:t,lossy:n}={})=>{const r=[];return b0t(!(t||n),!!t,new Map,r)(e),r},fC=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?jme(Ume(e,t)):structuredClone(e):(e,t)=>jme(Ume(e,t));function w0t(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function _0t(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function E0t(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||w0t,r=e.options.footnoteBackLabel||_0t,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=B2(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let b=typeof n=="string"?n:n(u,h);typeof b=="string"&&(b={type:"text",value:b}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const b=g.children[g.children.length-1];b&&b.type==="text"?b.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...fC(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const ZIe=function(e){if(e==null)return C0t;if(typeof e=="function")return tB(e);if(typeof e=="object")return Array.isArray(e)?x0t(e):S0t(e);if(typeof e=="string")return T0t(e);throw new Error("Expected function, string, or object as test")};function x0t(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=ZIe(e[n]);return tB(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function S0t(e){const t=e;return tB(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function T0t(e){return tB(t);function t(n){return n&&n.type===e}}function tB(e){return t;function t(n,r,i){return!!(A0t(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function C0t(){return!0}function A0t(e){return e!==null&&typeof e=="object"&&"type"in e}const eke=[],D0t=!0,zme=!1,I0t="skip";function k0t(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=ZIe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=eke,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=R0t(n(u,c)),h[0]===zme))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==I0t)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const b=y.children[m];if(p=a(b,m,g)(),p[0]===zme)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function R0t(e){return Array.isArray(e)?e:typeof e=="number"?[D0t,e]:e==null?eke:[e]}function Yee(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),k0t(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const uG={}.hasOwnProperty,N0t={};function P0t(e,t){const n=t||N0t,r=new Map,i=new Map,s=new Map,o={...m0t,...n.handlers},a={all:l,applyData:M0t,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:O0t,wrap:F0t};return Yee(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(uG.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=fC(g);return y.children=a.all(c),y}return fC(c)}return(a.options.unknownHandler||$0t)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Vme(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=Vme(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function O0t(e,t){e.position&&(t.position=mpt(e))}function M0t(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,fC(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function $0t(e,t){const n=t.data||{},r="value"in t&&!(uG.call(n,"hProperties")||uG.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function F0t(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Vme(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Hme(e,t){const n=P0t(e,t),r=n.one(e,void 0),i=E0t(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function L0t(e,t){return e&&"run"in e?async function(n,r){const i=Hme(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Hme(n,{file:r,...t||e})}}function qme(e){if(e)throw e}var H$=Object.prototype.hasOwnProperty,tke=Object.prototype.toString,Wme=Object.defineProperty,Gme=Object.getOwnPropertyDescriptor,Yme=function(t){return typeof Array.isArray=="function"?Array.isArray(t):tke.call(t)==="[object Array]"},Kme=function(t){if(!t||tke.call(t)!=="[object Object]")return!1;var n=H$.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&H$.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||H$.call(t,i)},Xme=function(t,n){Wme&&n.name==="__proto__"?Wme(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Qme=function(t,n){if(n==="__proto__")if(H$.call(t,n)){if(Gme)return Gme(t,n).value}else return;return t[n]},B0t=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=Qme(a,n),i=Qme(t,n),a!==i&&(c&&i&&(Kme(i)||(s=Yme(i)))?(s?(s=!1,o=r&&Yme(r)?r:[]):o=r&&Kme(r)?r:{},Xme(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&Xme(a,{name:n,newValue:i}));return a};const zz=zf(B0t);function lG(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function j0t(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?U0t(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function U0t(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Yp={basename:z0t,dirname:V0t,extname:H0t,join:q0t,sep:"/"};function z0t(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');hP(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function V0t(e){if(hP(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function H0t(e){hP(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function q0t(...e){let t=-1,n;for(;++t<e.length;)hP(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":W0t(n)}function W0t(e){hP(e);const t=e.codePointAt(0)===47;let n=G0t(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function G0t(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function hP(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Y0t={cwd:K0t};function K0t(){return"/"}function cG(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function X0t(e){if(typeof e=="string")e=new URL(e);else if(!cG(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Q0t(e)}function Q0t(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Vz=["history","path","basename","stem","extname","dirname"];class nke{constructor(t){let n;t?cG(t)?n={path:t}:typeof t=="string"||J0t(t)?n={value:t}:n=t:n={},this.cwd=Y0t.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Vz.length;){const s=Vz[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Vz.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Yp.basename(this.path):void 0}set basename(t){qz(t,"basename"),Hz(t,"basename"),this.path=Yp.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Yp.dirname(this.path):void 0}set dirname(t){Jme(this.basename,"dirname"),this.path=Yp.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Yp.extname(this.path):void 0}set extname(t){if(Hz(t,"extname"),Jme(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Yp.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){cG(t)&&(t=X0t(t)),qz(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Yp.basename(this.path,this.extname):void 0}set stem(t){qz(t,"stem"),Hz(t,"stem"),this.path=Yp.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new rl(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Hz(e,t){if(e&&e.includes(Yp.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Yp.sep+"`")}function qz(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Jme(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function J0t(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Z0t=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},eyt={}.hasOwnProperty;class Kee extends Z0t{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=j0t()}copy(){const t=new Kee;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(zz(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Yz("data",this.frozen),this.namespace[t]=n,this):eyt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Yz("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=rM(t),r=this.parser||this.Parser;return Wz("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Wz("process",this.parser||this.Parser),Gz("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=rM(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);ryt(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),Wz("processSync",this.parser||this.Parser),Gz("processSync",this.compiler||this.Compiler),this.process(t,i),ege("processSync","process",n),r;function i(s,o){n=!0,qme(s),r=o}}run(t,n,r){Zme(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=rM(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),ege("runSync","run",r),i;function s(o,a){qme(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=rM(n),i=this.compiler||this.Compiler;return Gz("stringify",i),Zme(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(Yz("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=zz(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];lG(m)&&lG(h)&&(h=zz(!0,m,h)),r[d]=[l,h,...p]}}}}const tyt=new Kee().freeze();function Wz(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Gz(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Yz(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Zme(e){if(!lG(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function ege(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function rM(e){return nyt(e)?e:new nke(e)}function nyt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function ryt(e){return typeof e=="string"||iyt(e)}function iyt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const syt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",tge=[],nge={allowDangerousHtml:!0},oyt=/^(https?|ircs?|mailto|xmpp)$/i,ayt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function uyt(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||tge,u=e.remarkPlugins||tge,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...nge}:nge,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||lyt,h=tyt().use(Vgt).use(u).use(L0t,l).use(a),p=new nke;typeof r=="string"&&(p.value=r);for(const b of ayt)Object.hasOwn(e,b.from)&&(""+b.from+(b.to?"use `"+b.to+"` instead":"remove it")+syt+b.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),Yee(g,y),_pt(g,{Fragment:_.Fragment,components:s,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function y(b,w,S){if(b.type==="raw"&&S&&typeof w=="number")return c?S.children.splice(w,1):S.children[w]={type:"text",value:b.value},w;if(b.type==="element"){let E;for(E in Bz)if(Object.hasOwn(Bz,E)&&Object.hasOwn(b.properties,E)){const T=b.properties[E],C=Bz[E];(C===null||C.includes(b.tagName))&&(b.properties[E]=d(String(T||""),E,b))}}if(b.type==="element"){let E=t?!t.includes(b.tagName):o?o.includes(b.tagName):!1;if(!E&&n&&typeof w=="number"&&(E=!n(b,w,S)),E&&S&&typeof w=="number")return f&&b.children?S.children.splice(w,1,...b.children):S.children.splice(w,1),w}}}function lyt(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||oyt.test(e.slice(0,t))?e:""}const rge=/[#.]/g;function cyt(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){rge.lastIndex=i;const a=rge.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const fyt=new Set(["button","menu","reset","submit"]),fG={}.hasOwnProperty;function rke(e,t,n){const r=n&&myt(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=cyt(s,t),l.tagName=l.tagName.toLowerCase(),r&&fG.call(r,l.tagName)&&(l.tagName=r[l.tagName]),dyt(o,l.tagName)){let c;for(c in o)fG.call(o,c)&&hyt(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)dG(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function dyt(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?fyt.has(e.type.toLowerCase()):!("value"in e)}function hyt(e,t,n,r){const i=Q8(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=gme(r):i.commaSeparated?o=fme(r):i.commaOrSpaceSeparated?o=gme(fme(r).join(" ")):o=ige(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?pyt(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=ige(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function dG(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)dG(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?dG(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function ige(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||AR(n)===AR(t)))return!0}return n}function pyt(e){const t=[];let n;for(n in e)fG.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function myt(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const gyt=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],yyt=rke(dP,"div"),vyt=rke(Sb,"g",gyt),Kz=/\r?\n|\r/g;function byt(e){const t=String(e),n=[];for(Kz.lastIndex=0;Kz.test(t);)n.push(Kz.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const f_={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ike={}.hasOwnProperty,wyt=Object.prototype;function _yt(e,t){const n=t;return Xee({file:n.file||void 0,location:!1,schema:n.space==="svg"?Sb:dP,verbose:n.verbose||!1},e)}function Xee(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},q$(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:ske(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=byt(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},q$(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},q$(e,r,n),n}default:return n=Eyt(e,t),n}}function ske(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=Xee(e,t[n]);r.push(i)}return r}function Eyt(e,t){const n=e.schema;e.schema=t.namespaceURI===f_.svg?Sb:dP;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;ike.call(wyt,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?vyt:yyt)(t.tagName,i,ske(e,t.childNodes));if(q$(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&qS(u.startTag),c=u&&u.endTag&&qS(u.endTag),f=Xee(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function q$(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=xyt(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function xyt(e,t,n){const r=qS(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)ike.call(n.attrs,o)&&(s[Q8(e.schema,o).property]=qS(n.attrs[o]));n.startTag;const a=qS(n.startTag),u=n.endTag?qS(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function qS(e){const t=sge({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=sge({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function sge(e){return e.line&&e.column?e:void 0}const oge={}.hasOwnProperty;function oke(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&oge.call(i,e)){const u=String(i[e]);o=oge.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Syt={}.hasOwnProperty,ake=oke("type",{handlers:{root:Cyt,element:Ryt,text:Iyt,comment:kyt,doctype:Dyt}});function Tyt(e,t){const r=t.space;return ake(e,r==="svg"?Sb:dP)}function Cyt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=Qee(e.children,n,t),j2(e,n),n}function Ayt(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=Qee(e.children,n,t),j2(e,n),n}function Dyt(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return j2(e,t),t}function Iyt(e){const t={nodeName:"#text",value:e.value,parentNode:null};return j2(e,t),t}function kyt(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return j2(e,t),t}function Ryt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Sb);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&Syt.call(e.properties,s)){const u=Nyt(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:f_[o],childNodes:[],parentNode:null};return a.childNodes=Qee(e.children,a,r),j2(e,a),e.tagName==="template"&&e.content&&(a.content=Ayt(e.content,r)),a}function Nyt(e,t,n){const r=Q8(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?bIe(n):DIe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=f_[r.space]}return i}function Qee(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=ake(e[r],n);s.parentNode=t,i.push(s)}return i}function j2(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Pyt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],Oyt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Cs="";var se;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(se=se||(se={}));const ec={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function uke(e){return e>=55296&&e<=57343}function Myt(e){return e>=56320&&e<=57343}function $yt(e,t){return(e-55296)*1024+9216+t}function lke(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function cke(e){return e>=64976&&e<=65007||Oyt.has(e)}var Ye;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ye=Ye||(Ye={}));const Fyt=65536;class Lyt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Fyt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Myt(n))return this.pos++,this._addGap(),$yt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,se.EOF;return this._err(Ye.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,se.EOF;const r=this.html.charCodeAt(n);return r===se.CARRIAGE_RETURN?se.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,se.EOF;let t=this.html.charCodeAt(this.pos);return t===se.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,se.LINE_FEED):t===se.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,uke(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===se.LINE_FEED||t===se.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){lke(t)?this._err(Ye.controlCharacterInInputStream):cke(t)&&this._err(Ye.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var xr;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(xr=xr||(xr={}));function fke(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const lv=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Byt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var Xz;const jyt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Uyt=(Xz=String.fromCodePoint)!==null&&Xz!==void 0?Xz:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function zyt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=jyt.get(e))!==null&&t!==void 0?t:e}var Ia;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Ia||(Ia={}));const Vyt=32;var ym;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(ym||(ym={}));function hG(e){return e>=Ia.ZERO&&e<=Ia.NINE}function Hyt(e){return e>=Ia.UPPER_A&&e<=Ia.UPPER_F||e>=Ia.LOWER_A&&e<=Ia.LOWER_F}function qyt(e){return e>=Ia.UPPER_A&&e<=Ia.UPPER_Z||e>=Ia.LOWER_A&&e<=Ia.LOWER_Z||hG(e)}function Wyt(e){return e===Ia.EQUALS||qyt(e)}var Ea;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ea||(Ea={}));var Gw;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Gw||(Gw={}));class Gyt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ea.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Gw.Strict}startEntity(t){this.decodeMode=t,this.state=Ea.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ea.EntityStart:return t.charCodeAt(n)===Ia.NUM?(this.state=Ea.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ea.NamedEntity,this.stateNamedEntity(t,n));case Ea.NumericStart:return this.stateNumericStart(t,n);case Ea.NumericDecimal:return this.stateNumericDecimal(t,n);case Ea.NumericHex:return this.stateNumericHex(t,n);case Ea.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Vyt)===Ia.LOWER_X?(this.state=Ea.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ea.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(hG(i)||Hyt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(hG(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Ia.SEMI)this.consumed+=1;else if(this.decodeMode===Gw.Strict)return 0;return this.emitCodePoint(zyt(this.result),this.consumed),this.errors&&(t!==Ia.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&ym.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=hke(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Gw.Attribute&&(s===0||Wyt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&ym.VALUE_LENGTH)>>14,s!==0){if(o===Ia.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Gw.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&ym.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~ym.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ea.NamedEntity:return this.result!==0&&(this.decodeMode!==Gw.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ea.NumericDecimal:return this.emitNumericEntity(0,2);case Ea.NumericHex:return this.emitNumericEntity(0,3);case Ea.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ea.EntityStart:return 0}}}function dke(e){let t="";const n=new Gyt(e,r=>t+=Uyt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function hke(e,t,n,r){const i=(t&ym.BRANCH_LENGTH)>>7,s=t&ym.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}dke(lv);dke(Byt);var ot;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(ot=ot||(ot={}));var c1;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(c1=c1||(c1={}));var cf;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(cf=cf||(cf={}));var Be;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Be=Be||(Be={}));var O;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(O=O||(O={}));const Yyt=new Map([[Be.A,O.A],[Be.ADDRESS,O.ADDRESS],[Be.ANNOTATION_XML,O.ANNOTATION_XML],[Be.APPLET,O.APPLET],[Be.AREA,O.AREA],[Be.ARTICLE,O.ARTICLE],[Be.ASIDE,O.ASIDE],[Be.B,O.B],[Be.BASE,O.BASE],[Be.BASEFONT,O.BASEFONT],[Be.BGSOUND,O.BGSOUND],[Be.BIG,O.BIG],[Be.BLOCKQUOTE,O.BLOCKQUOTE],[Be.BODY,O.BODY],[Be.BR,O.BR],[Be.BUTTON,O.BUTTON],[Be.CAPTION,O.CAPTION],[Be.CENTER,O.CENTER],[Be.CODE,O.CODE],[Be.COL,O.COL],[Be.COLGROUP,O.COLGROUP],[Be.DD,O.DD],[Be.DESC,O.DESC],[Be.DETAILS,O.DETAILS],[Be.DIALOG,O.DIALOG],[Be.DIR,O.DIR],[Be.DIV,O.DIV],[Be.DL,O.DL],[Be.DT,O.DT],[Be.EM,O.EM],[Be.EMBED,O.EMBED],[Be.FIELDSET,O.FIELDSET],[Be.FIGCAPTION,O.FIGCAPTION],[Be.FIGURE,O.FIGURE],[Be.FONT,O.FONT],[Be.FOOTER,O.FOOTER],[Be.FOREIGN_OBJECT,O.FOREIGN_OBJECT],[Be.FORM,O.FORM],[Be.FRAME,O.FRAME],[Be.FRAMESET,O.FRAMESET],[Be.H1,O.H1],[Be.H2,O.H2],[Be.H3,O.H3],[Be.H4,O.H4],[Be.H5,O.H5],[Be.H6,O.H6],[Be.HEAD,O.HEAD],[Be.HEADER,O.HEADER],[Be.HGROUP,O.HGROUP],[Be.HR,O.HR],[Be.HTML,O.HTML],[Be.I,O.I],[Be.IMG,O.IMG],[Be.IMAGE,O.IMAGE],[Be.INPUT,O.INPUT],[Be.IFRAME,O.IFRAME],[Be.KEYGEN,O.KEYGEN],[Be.LABEL,O.LABEL],[Be.LI,O.LI],[Be.LINK,O.LINK],[Be.LISTING,O.LISTING],[Be.MAIN,O.MAIN],[Be.MALIGNMARK,O.MALIGNMARK],[Be.MARQUEE,O.MARQUEE],[Be.MATH,O.MATH],[Be.MENU,O.MENU],[Be.META,O.META],[Be.MGLYPH,O.MGLYPH],[Be.MI,O.MI],[Be.MO,O.MO],[Be.MN,O.MN],[Be.MS,O.MS],[Be.MTEXT,O.MTEXT],[Be.NAV,O.NAV],[Be.NOBR,O.NOBR],[Be.NOFRAMES,O.NOFRAMES],[Be.NOEMBED,O.NOEMBED],[Be.NOSCRIPT,O.NOSCRIPT],[Be.OBJECT,O.OBJECT],[Be.OL,O.OL],[Be.OPTGROUP,O.OPTGROUP],[Be.OPTION,O.OPTION],[Be.P,O.P],[Be.PARAM,O.PARAM],[Be.PLAINTEXT,O.PLAINTEXT],[Be.PRE,O.PRE],[Be.RB,O.RB],[Be.RP,O.RP],[Be.RT,O.RT],[Be.RTC,O.RTC],[Be.RUBY,O.RUBY],[Be.S,O.S],[Be.SCRIPT,O.SCRIPT],[Be.SECTION,O.SECTION],[Be.SELECT,O.SELECT],[Be.SOURCE,O.SOURCE],[Be.SMALL,O.SMALL],[Be.SPAN,O.SPAN],[Be.STRIKE,O.STRIKE],[Be.STRONG,O.STRONG],[Be.STYLE,O.STYLE],[Be.SUB,O.SUB],[Be.SUMMARY,O.SUMMARY],[Be.SUP,O.SUP],[Be.TABLE,O.TABLE],[Be.TBODY,O.TBODY],[Be.TEMPLATE,O.TEMPLATE],[Be.TEXTAREA,O.TEXTAREA],[Be.TFOOT,O.TFOOT],[Be.TD,O.TD],[Be.TH,O.TH],[Be.THEAD,O.THEAD],[Be.TITLE,O.TITLE],[Be.TR,O.TR],[Be.TRACK,O.TRACK],[Be.TT,O.TT],[Be.U,O.U],[Be.UL,O.UL],[Be.SVG,O.SVG],[Be.VAR,O.VAR],[Be.WBR,O.WBR],[Be.XMP,O.XMP]]);function U2(e){var t;return(t=Yyt.get(e))!==null&&t!==void 0?t:O.UNKNOWN}const xt=O,Kyt={[ot.HTML]:new Set([xt.ADDRESS,xt.APPLET,xt.AREA,xt.ARTICLE,xt.ASIDE,xt.BASE,xt.BASEFONT,xt.BGSOUND,xt.BLOCKQUOTE,xt.BODY,xt.BR,xt.BUTTON,xt.CAPTION,xt.CENTER,xt.COL,xt.COLGROUP,xt.DD,xt.DETAILS,xt.DIR,xt.DIV,xt.DL,xt.DT,xt.EMBED,xt.FIELDSET,xt.FIGCAPTION,xt.FIGURE,xt.FOOTER,xt.FORM,xt.FRAME,xt.FRAMESET,xt.H1,xt.H2,xt.H3,xt.H4,xt.H5,xt.H6,xt.HEAD,xt.HEADER,xt.HGROUP,xt.HR,xt.HTML,xt.IFRAME,xt.IMG,xt.INPUT,xt.LI,xt.LINK,xt.LISTING,xt.MAIN,xt.MARQUEE,xt.MENU,xt.META,xt.NAV,xt.NOEMBED,xt.NOFRAMES,xt.NOSCRIPT,xt.OBJECT,xt.OL,xt.P,xt.PARAM,xt.PLAINTEXT,xt.PRE,xt.SCRIPT,xt.SECTION,xt.SELECT,xt.SOURCE,xt.STYLE,xt.SUMMARY,xt.TABLE,xt.TBODY,xt.TD,xt.TEMPLATE,xt.TEXTAREA,xt.TFOOT,xt.TH,xt.THEAD,xt.TITLE,xt.TR,xt.TRACK,xt.UL,xt.WBR,xt.XMP]),[ot.MATHML]:new Set([xt.MI,xt.MO,xt.MN,xt.MS,xt.MTEXT,xt.ANNOTATION_XML]),[ot.SVG]:new Set([xt.TITLE,xt.FOREIGN_OBJECT,xt.DESC]),[ot.XLINK]:new Set,[ot.XML]:new Set,[ot.XMLNS]:new Set};function pke(e){return e===xt.H1||e===xt.H2||e===xt.H3||e===xt.H4||e===xt.H5||e===xt.H6}Be.STYLE,Be.SCRIPT,Be.XMP,Be.IFRAME,Be.NOEMBED,Be.NOFRAMES,Be.PLAINTEXT;const Xyt=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var le;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(le||(le={}));const xo={DATA:le.DATA,RCDATA:le.RCDATA,RAWTEXT:le.RAWTEXT,SCRIPT_DATA:le.SCRIPT_DATA,PLAINTEXT:le.PLAINTEXT,CDATA_SECTION:le.CDATA_SECTION};function dk(e){return e>=se.DIGIT_0&&e<=se.DIGIT_9}function dI(e){return e>=se.LATIN_CAPITAL_A&&e<=se.LATIN_CAPITAL_Z}function Qyt(e){return e>=se.LATIN_SMALL_A&&e<=se.LATIN_SMALL_Z}function cv(e){return Qyt(e)||dI(e)}function pG(e){return cv(e)||dk(e)}function mke(e){return e>=se.LATIN_CAPITAL_A&&e<=se.LATIN_CAPITAL_F}function gke(e){return e>=se.LATIN_SMALL_A&&e<=se.LATIN_SMALL_F}function Jyt(e){return dk(e)||mke(e)||gke(e)}function iM(e){return e+32}function yke(e){return e===se.SPACE||e===se.LINE_FEED||e===se.TABULATION||e===se.FORM_FEED}function Zyt(e){return e===se.EQUALS_SIGN||pG(e)}function age(e){return yke(e)||e===se.SOLIDUS||e===se.GREATER_THAN_SIGN}class evt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=le.DATA,this.returnState=le.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Lyt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:xr.START_TAG,tagName:"",tagID:O.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:xr.END_TAG,tagName:"",tagID:O.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:xr.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:xr.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(fke(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ye.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=U2(t.tagName),t.type===xr.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ye.endTagWithAttributes),t.selfClosing&&this._err(Ye.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case xr.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case xr.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case xr.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:xr.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=yke(t)?xr.WHITESPACE_CHARACTER:t===se.NULL?xr.NULL_CHARACTER:xr.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(xr.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=lv[0];s>=0&&(s=hke(lv,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=lv[s];const a=o&ym.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==se.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Zyt(this.preprocessor.peek(1))?(n=[se.AMPERSAND],s+=u):(n=u===0?[lv[s]&~ym.VALUE_LENGTH]:u===1?[lv[++s]]:[lv[++s],lv[++s]],r=0,i=t!==se.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ye.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===le.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===le.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===le.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case le.DATA:{this._stateData(t);break}case le.RCDATA:{this._stateRcdata(t);break}case le.RAWTEXT:{this._stateRawtext(t);break}case le.SCRIPT_DATA:{this._stateScriptData(t);break}case le.PLAINTEXT:{this._statePlaintext(t);break}case le.TAG_OPEN:{this._stateTagOpen(t);break}case le.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case le.TAG_NAME:{this._stateTagName(t);break}case le.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case le.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case le.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case le.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case le.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case le.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case le.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case le.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case le.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case le.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case le.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case le.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case le.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case le.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case le.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case le.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case le.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case le.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case le.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case le.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case le.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case le.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case le.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case le.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case le.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case le.BOGUS_COMMENT:{this._stateBogusComment(t);break}case le.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case le.COMMENT_START:{this._stateCommentStart(t);break}case le.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case le.COMMENT:{this._stateComment(t);break}case le.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case le.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case le.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case le.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case le.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case le.COMMENT_END:{this._stateCommentEnd(t);break}case le.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case le.DOCTYPE:{this._stateDoctype(t);break}case le.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case le.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case le.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case le.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case le.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case le.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case le.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case le.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case le.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case le.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case le.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case le.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case le.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case le.CDATA_SECTION:{this._stateCdataSection(t);break}case le.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case le.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case le.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case le.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case le.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case le.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case le.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case le.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case le.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case le.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case se.LESS_THAN_SIGN:{this.state=le.TAG_OPEN;break}case se.AMPERSAND:{this.returnState=le.DATA,this.state=le.CHARACTER_REFERENCE;break}case se.NULL:{this._err(Ye.unexpectedNullCharacter),this._emitCodePoint(t);break}case se.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case se.AMPERSAND:{this.returnState=le.RCDATA,this.state=le.CHARACTER_REFERENCE;break}case se.LESS_THAN_SIGN:{this.state=le.RCDATA_LESS_THAN_SIGN;break}case se.NULL:{this._err(Ye.unexpectedNullCharacter),this._emitChars(Cs);break}case se.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case se.LESS_THAN_SIGN:{this.state=le.RAWTEXT_LESS_THAN_SIGN;break}case se.NULL:{this._err(Ye.unexpectedNullCharacter),this._emitChars(Cs);break}case se.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case se.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_LESS_THAN_SIGN;break}case se.NULL:{this._err(Ye.unexpectedNullCharacter),this._emitChars(Cs);break}case se.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case se.NULL:{this._err(Ye.unexpectedNullCharacter),this._emitChars(Cs);break}case se.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(cv(t))this._createStartTagToken(),this.state=le.TAG_NAME,this._stateTagName(t);else switch(t){case se.EXCLAMATION_MARK:{this.state=le.MARKUP_DECLARATION_OPEN;break}case se.SOLIDUS:{this.state=le.END_TAG_OPEN;break}case se.QUESTION_MARK:{this._err(Ye.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=le.BOGUS_COMMENT,this._stateBogusComment(t);break}case se.EOF:{this._err(Ye.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ye.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=le.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(cv(t))this._createEndTagToken(),this.state=le.TAG_NAME,this._stateTagName(t);else switch(t){case se.GREATER_THAN_SIGN:{this._err(Ye.missingEndTagName),this.state=le.DATA;break}case se.EOF:{this._err(Ye.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ye.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=le.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this.state=le.BEFORE_ATTRIBUTE_NAME;break}case se.SOLIDUS:{this.state=le.SELF_CLOSING_START_TAG;break}case se.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentTagToken();break}case se.NULL:{this._err(Ye.unexpectedNullCharacter),n.tagName+=Cs;break}case se.EOF:{this._err(Ye.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(dI(t)?iM(t):t)}}_stateRcdataLessThanSign(t){t===se.SOLIDUS?this.state=le.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=le.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){cv(t)?(this.state=le.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=le.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=le.BEFORE_ATTRIBUTE_NAME,!1;case se.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=le.SELF_CLOSING_START_TAG,!1;case se.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=le.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===se.SOLIDUS?this.state=le.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=le.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){cv(t)?(this.state=le.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=le.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case se.SOLIDUS:{this.state=le.SCRIPT_DATA_END_TAG_OPEN;break}case se.EXCLAMATION_MARK:{this.state=le.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=le.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){cv(t)?(this.state=le.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===se.HYPHEN_MINUS?(this.state=le.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===se.HYPHEN_MINUS?(this.state=le.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case se.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case se.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case se.NULL:{this._err(Ye.unexpectedNullCharacter),this._emitChars(Cs);break}case se.EOF:{this._err(Ye.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case se.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case se.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case se.NULL:{this._err(Ye.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_ESCAPED,this._emitChars(Cs);break}case se.EOF:{this._err(Ye.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case se.HYPHEN_MINUS:{this._emitChars("-");break}case se.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case se.GREATER_THAN_SIGN:{this.state=le.SCRIPT_DATA,this._emitChars(">");break}case se.NULL:{this._err(Ye.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_ESCAPED,this._emitChars(Cs);break}case se.EOF:{this._err(Ye.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===se.SOLIDUS?this.state=le.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:cv(t)?(this._emitChars("<"),this.state=le.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){cv(t)?(this.state=le.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(ec.SCRIPT,!1)&&age(this.preprocessor.peek(ec.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<ec.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case se.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case se.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case se.NULL:{this._err(Ye.unexpectedNullCharacter),this._emitChars(Cs);break}case se.EOF:{this._err(Ye.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case se.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case se.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case se.NULL:{this._err(Ye.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Cs);break}case se.EOF:{this._err(Ye.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case se.HYPHEN_MINUS:{this._emitChars("-");break}case se.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case se.GREATER_THAN_SIGN:{this.state=le.SCRIPT_DATA,this._emitChars(">");break}case se.NULL:{this._err(Ye.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Cs);break}case se.EOF:{this._err(Ye.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===se.SOLIDUS?(this.state=le.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(ec.SCRIPT,!1)&&age(this.preprocessor.peek(ec.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<ec.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=le.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.SOLIDUS:case se.GREATER_THAN_SIGN:case se.EOF:{this.state=le.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case se.EQUALS_SIGN:{this._err(Ye.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=le.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=le.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:case se.SOLIDUS:case se.GREATER_THAN_SIGN:case se.EOF:{this._leaveAttrName(),this.state=le.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case se.EQUALS_SIGN:{this._leaveAttrName(),this.state=le.BEFORE_ATTRIBUTE_VALUE;break}case se.QUOTATION_MARK:case se.APOSTROPHE:case se.LESS_THAN_SIGN:{this._err(Ye.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case se.NULL:{this._err(Ye.unexpectedNullCharacter),this.currentAttr.name+=Cs;break}default:this.currentAttr.name+=String.fromCodePoint(dI(t)?iM(t):t)}}_stateAfterAttributeName(t){switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.SOLIDUS:{this.state=le.SELF_CLOSING_START_TAG;break}case se.EQUALS_SIGN:{this.state=le.BEFORE_ATTRIBUTE_VALUE;break}case se.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentTagToken();break}case se.EOF:{this._err(Ye.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=le.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.QUOTATION_MARK:{this.state=le.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case se.APOSTROPHE:{this.state=le.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case se.GREATER_THAN_SIGN:{this._err(Ye.missingAttributeValue),this.state=le.DATA,this.emitCurrentTagToken();break}default:this.state=le.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case se.QUOTATION_MARK:{this.state=le.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case se.AMPERSAND:{this.returnState=le.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=le.CHARACTER_REFERENCE;break}case se.NULL:{this._err(Ye.unexpectedNullCharacter),this.currentAttr.value+=Cs;break}case se.EOF:{this._err(Ye.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case se.APOSTROPHE:{this.state=le.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case se.AMPERSAND:{this.returnState=le.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=le.CHARACTER_REFERENCE;break}case se.NULL:{this._err(Ye.unexpectedNullCharacter),this.currentAttr.value+=Cs;break}case se.EOF:{this._err(Ye.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this._leaveAttrValue(),this.state=le.BEFORE_ATTRIBUTE_NAME;break}case se.AMPERSAND:{this.returnState=le.ATTRIBUTE_VALUE_UNQUOTED,this.state=le.CHARACTER_REFERENCE;break}case se.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=le.DATA,this.emitCurrentTagToken();break}case se.NULL:{this._err(Ye.unexpectedNullCharacter),this.currentAttr.value+=Cs;break}case se.QUOTATION_MARK:case se.APOSTROPHE:case se.LESS_THAN_SIGN:case se.EQUALS_SIGN:case se.GRAVE_ACCENT:{this._err(Ye.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case se.EOF:{this._err(Ye.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this._leaveAttrValue(),this.state=le.BEFORE_ATTRIBUTE_NAME;break}case se.SOLIDUS:{this._leaveAttrValue(),this.state=le.SELF_CLOSING_START_TAG;break}case se.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=le.DATA,this.emitCurrentTagToken();break}case se.EOF:{this._err(Ye.eofInTag),this._emitEOFToken();break}default:this._err(Ye.missingWhitespaceBetweenAttributes),this.state=le.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case se.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=le.DATA,this.emitCurrentTagToken();break}case se.EOF:{this._err(Ye.eofInTag),this._emitEOFToken();break}default:this._err(Ye.unexpectedSolidusInTag),this.state=le.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case se.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentComment(n);break}case se.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case se.NULL:{this._err(Ye.unexpectedNullCharacter),n.data+=Cs;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(ec.DASH_DASH,!0)?(this._createCommentToken(ec.DASH_DASH.length+1),this.state=le.COMMENT_START):this._consumeSequenceIfMatch(ec.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(ec.DOCTYPE.length+1),this.state=le.DOCTYPE):this._consumeSequenceIfMatch(ec.CDATA_START,!0)?this.inForeignNode?this.state=le.CDATA_SECTION:(this._err(Ye.cdataInHtmlContent),this._createCommentToken(ec.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=le.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ye.incorrectlyOpenedComment),this._createCommentToken(2),this.state=le.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case se.HYPHEN_MINUS:{this.state=le.COMMENT_START_DASH;break}case se.GREATER_THAN_SIGN:{this._err(Ye.abruptClosingOfEmptyComment),this.state=le.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=le.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case se.HYPHEN_MINUS:{this.state=le.COMMENT_END;break}case se.GREATER_THAN_SIGN:{this._err(Ye.abruptClosingOfEmptyComment),this.state=le.DATA,this.emitCurrentComment(n);break}case se.EOF:{this._err(Ye.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=le.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case se.HYPHEN_MINUS:{this.state=le.COMMENT_END_DASH;break}case se.LESS_THAN_SIGN:{n.data+="<",this.state=le.COMMENT_LESS_THAN_SIGN;break}case se.NULL:{this._err(Ye.unexpectedNullCharacter),n.data+=Cs;break}case se.EOF:{this._err(Ye.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case se.EXCLAMATION_MARK:{n.data+="!",this.state=le.COMMENT_LESS_THAN_SIGN_BANG;break}case se.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=le.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===se.HYPHEN_MINUS?this.state=le.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=le.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===se.HYPHEN_MINUS?this.state=le.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=le.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==se.GREATER_THAN_SIGN&&t!==se.EOF&&this._err(Ye.nestedComment),this.state=le.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case se.HYPHEN_MINUS:{this.state=le.COMMENT_END;break}case se.EOF:{this._err(Ye.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=le.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case se.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentComment(n);break}case se.EXCLAMATION_MARK:{this.state=le.COMMENT_END_BANG;break}case se.HYPHEN_MINUS:{n.data+="-";break}case se.EOF:{this._err(Ye.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=le.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case se.HYPHEN_MINUS:{n.data+="--!",this.state=le.COMMENT_END_DASH;break}case se.GREATER_THAN_SIGN:{this._err(Ye.incorrectlyClosedComment),this.state=le.DATA,this.emitCurrentComment(n);break}case se.EOF:{this._err(Ye.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=le.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this.state=le.BEFORE_DOCTYPE_NAME;break}case se.GREATER_THAN_SIGN:{this.state=le.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case se.EOF:{this._err(Ye.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ye.missingWhitespaceBeforeDoctypeName),this.state=le.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(dI(t))this._createDoctypeToken(String.fromCharCode(iM(t))),this.state=le.DOCTYPE_NAME;else switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.NULL:{this._err(Ye.unexpectedNullCharacter),this._createDoctypeToken(Cs),this.state=le.DOCTYPE_NAME;break}case se.GREATER_THAN_SIGN:{this._err(Ye.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.EOF:{this._err(Ye.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=le.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this.state=le.AFTER_DOCTYPE_NAME;break}case se.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentDoctype(n);break}case se.NULL:{this._err(Ye.unexpectedNullCharacter),n.name+=Cs;break}case se.EOF:{this._err(Ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(dI(t)?iM(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentDoctype(n);break}case se.EOF:{this._err(Ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(ec.PUBLIC,!1)?this.state=le.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(ec.SYSTEM,!1)?this.state=le.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ye.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this.state=le.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case se.QUOTATION_MARK:{this._err(Ye.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case se.APOSTROPHE:{this._err(Ye.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case se.GREATER_THAN_SIGN:{this._err(Ye.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case se.EOF:{this._err(Ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ye.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.QUOTATION_MARK:{n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case se.APOSTROPHE:{n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case se.GREATER_THAN_SIGN:{this._err(Ye.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case se.EOF:{this._err(Ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ye.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case se.QUOTATION_MARK:{this.state=le.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case se.NULL:{this._err(Ye.unexpectedNullCharacter),n.publicId+=Cs;break}case se.GREATER_THAN_SIGN:{this._err(Ye.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.EOF:{this._err(Ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case se.APOSTROPHE:{this.state=le.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case se.NULL:{this._err(Ye.unexpectedNullCharacter),n.publicId+=Cs;break}case se.GREATER_THAN_SIGN:{this._err(Ye.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.EOF:{this._err(Ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this.state=le.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case se.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentDoctype(n);break}case se.QUOTATION_MARK:{this._err(Ye.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case se.APOSTROPHE:{this._err(Ye.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case se.EOF:{this._err(Ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ye.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.QUOTATION_MARK:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case se.APOSTROPHE:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case se.EOF:{this._err(Ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ye.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this.state=le.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case se.QUOTATION_MARK:{this._err(Ye.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case se.APOSTROPHE:{this._err(Ye.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case se.GREATER_THAN_SIGN:{this._err(Ye.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case se.EOF:{this._err(Ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ye.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.QUOTATION_MARK:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case se.APOSTROPHE:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case se.GREATER_THAN_SIGN:{this._err(Ye.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case se.EOF:{this._err(Ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ye.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case se.QUOTATION_MARK:{this.state=le.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case se.NULL:{this._err(Ye.unexpectedNullCharacter),n.systemId+=Cs;break}case se.GREATER_THAN_SIGN:{this._err(Ye.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.EOF:{this._err(Ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case se.APOSTROPHE:{this.state=le.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case se.NULL:{this._err(Ye.unexpectedNullCharacter),n.systemId+=Cs;break}case se.GREATER_THAN_SIGN:{this._err(Ye.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.EOF:{this._err(Ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.EOF:{this._err(Ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ye.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case se.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.NULL:{this._err(Ye.unexpectedNullCharacter);break}case se.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case se.RIGHT_SQUARE_BRACKET:{this.state=le.CDATA_SECTION_BRACKET;break}case se.EOF:{this._err(Ye.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===se.RIGHT_SQUARE_BRACKET?this.state=le.CDATA_SECTION_END:(this._emitChars("]"),this.state=le.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case se.GREATER_THAN_SIGN:{this.state=le.DATA;break}case se.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=le.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===se.NUMBER_SIGN?this.state=le.NUMERIC_CHARACTER_REFERENCE:pG(t)?(this.state=le.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(se.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(se.AMPERSAND),this.state=le.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){pG(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===se.SEMICOLON&&this._err(Ye.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===se.LATIN_SMALL_X||t===se.LATIN_CAPITAL_X?this.state=le.HEXADEMICAL_CHARACTER_REFERENCE_START:dk(t)?(this.state=le.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ye.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(se.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(se.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){Jyt(t)?(this.state=le.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ye.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(se.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(se.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){mke(t)?this.charRefCode=this.charRefCode*16+t-55:gke(t)?this.charRefCode=this.charRefCode*16+t-87:dk(t)?this.charRefCode=this.charRefCode*16+t-48:t===se.SEMICOLON?this.state=le.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ye.missingSemicolonAfterCharacterReference),this.state=le.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){dk(t)?this.charRefCode=this.charRefCode*10+t-48:t===se.SEMICOLON?this.state=le.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ye.missingSemicolonAfterCharacterReference),this.state=le.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===se.NULL)this._err(Ye.nullCharacterReference),this.charRefCode=se.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ye.characterReferenceOutsideUnicodeRange),this.charRefCode=se.REPLACEMENT_CHARACTER;else if(uke(this.charRefCode))this._err(Ye.surrogateCharacterReference),this.charRefCode=se.REPLACEMENT_CHARACTER;else if(cke(this.charRefCode))this._err(Ye.noncharacterCharacterReference);else if(lke(this.charRefCode)||this.charRefCode===se.CARRIAGE_RETURN){this._err(Ye.controlCharacterReference);const n=Xyt.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const vke=new Set([O.DD,O.DT,O.LI,O.OPTGROUP,O.OPTION,O.P,O.RB,O.RP,O.RT,O.RTC]),uge=new Set([...vke,O.CAPTION,O.COLGROUP,O.TBODY,O.TD,O.TFOOT,O.TH,O.THEAD,O.TR]),sM=new Map([[O.APPLET,ot.HTML],[O.CAPTION,ot.HTML],[O.HTML,ot.HTML],[O.MARQUEE,ot.HTML],[O.OBJECT,ot.HTML],[O.TABLE,ot.HTML],[O.TD,ot.HTML],[O.TEMPLATE,ot.HTML],[O.TH,ot.HTML],[O.ANNOTATION_XML,ot.MATHML],[O.MI,ot.MATHML],[O.MN,ot.MATHML],[O.MO,ot.MATHML],[O.MS,ot.MATHML],[O.MTEXT,ot.MATHML],[O.DESC,ot.SVG],[O.FOREIGN_OBJECT,ot.SVG],[O.TITLE,ot.SVG]]),tvt=[O.H1,O.H2,O.H3,O.H4,O.H5,O.H6],nvt=[O.TR,O.TEMPLATE,O.HTML],rvt=[O.TBODY,O.TFOOT,O.THEAD,O.TEMPLATE,O.HTML],ivt=[O.TABLE,O.TEMPLATE,O.HTML],svt=[O.TD,O.TH];class ovt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=O.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===O.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===ot.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==ot.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(tvt,ot.HTML)}popUntilTableCellPopped(){this.popUntilPopped(svt,ot.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(ivt,ot.HTML)}clearBackToTableBodyContext(){this.clearBackTo(rvt,ot.HTML)}clearBackToTableRowContext(){this.clearBackTo(nvt,ot.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===O.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===O.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ot.HTML)return!0;if(sM.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(pke(n)&&r===ot.HTML)return!0;if(sM.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ot.HTML)return!0;if((r===O.UL||r===O.OL)&&i===ot.HTML||sM.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ot.HTML)return!0;if(r===O.BUTTON&&i===ot.HTML||sM.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===ot.HTML){if(r===t)return!0;if(r===O.TABLE||r===O.TEMPLATE||r===O.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===ot.HTML){if(n===O.TBODY||n===O.THEAD||n===O.TFOOT)return!0;if(n===O.TABLE||n===O.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===ot.HTML){if(r===t)return!0;if(r!==O.OPTION&&r!==O.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;vke.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;uge.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&uge.has(this.currentTagId);)this.pop()}}const Qz=3;var Oh;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Oh=Oh||(Oh={}));const lge={type:Oh.Marker};class avt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===Oh.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<Qz)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<Qz)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=Qz&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(lge)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Oh.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Oh.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(lge);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Oh.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Oh.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Oh.Element&&n.element===t)}}function cge(e){return{nodeName:"#text",value:e,parentNode:null}}const wS={createDocument(){return{nodeName:"#document",mode:cf.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};wS.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(wS.isTextNode(n)){n.value+=t;return}}wS.appendChild(e,cge(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&wS.isTextNode(r)?r.value+=t:wS.insertBefore(e,cge(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},bke="html",uvt="about:legacy-compat",lvt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",wke=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],cvt=[...wke,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],fvt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),_ke=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],dvt=[..._ke,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function fge(e,t){return t.some(n=>e.startsWith(n))}function hvt(e){return e.name===bke&&e.publicId===null&&(e.systemId===null||e.systemId===uvt)}function pvt(e){if(e.name!==bke)return cf.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===lvt)return cf.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),fvt.has(n))return cf.QUIRKS;let r=t===null?cvt:wke;if(fge(n,r))return cf.QUIRKS;if(r=t===null?_ke:dvt,fge(n,r))return cf.LIMITED_QUIRKS}return cf.NO_QUIRKS}const dge={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},mvt="definitionurl",gvt="definitionURL",yvt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),vvt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:ot.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:ot.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:ot.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:ot.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:ot.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:ot.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:ot.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:ot.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:ot.XML}],["xml:space",{prefix:"xml",name:"space",namespace:ot.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:ot.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:ot.XMLNS}]]),bvt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),wvt=new Set([O.B,O.BIG,O.BLOCKQUOTE,O.BODY,O.BR,O.CENTER,O.CODE,O.DD,O.DIV,O.DL,O.DT,O.EM,O.EMBED,O.H1,O.H2,O.H3,O.H4,O.H5,O.H6,O.HEAD,O.HR,O.I,O.IMG,O.LI,O.LISTING,O.MENU,O.META,O.NOBR,O.OL,O.P,O.PRE,O.RUBY,O.S,O.SMALL,O.SPAN,O.STRONG,O.STRIKE,O.SUB,O.SUP,O.TABLE,O.TT,O.U,O.UL,O.VAR]);function _vt(e){const t=e.tagID;return t===O.FONT&&e.attrs.some(({name:r})=>r===c1.COLOR||r===c1.SIZE||r===c1.FACE)||wvt.has(t)}function Eke(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===mvt){e.attrs[t].name=gvt;break}}function xke(e){for(let t=0;t<e.attrs.length;t++){const n=yvt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function Jee(e){for(let t=0;t<e.attrs.length;t++){const n=vvt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Evt(e){const t=bvt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=U2(e.tagName))}function xvt(e,t){return t===ot.MATHML&&(e===O.MI||e===O.MO||e===O.MN||e===O.MS||e===O.MTEXT)}function Svt(e,t,n){if(t===ot.MATHML&&e===O.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===c1.ENCODING){const i=n[r].value.toLowerCase();return i===dge.TEXT_HTML||i===dge.APPLICATION_XML}}return t===ot.SVG&&(e===O.FOREIGN_OBJECT||e===O.DESC||e===O.TITLE)}function Tvt(e,t,n,r){return(!r||r===ot.HTML)&&Svt(e,t,n)||(!r||r===ot.MATHML)&&xvt(e,t)}const Cvt="hidden",Avt=8,Dvt=3;var ge;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ge||(ge={}));const Ivt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Ske=new Set([O.TABLE,O.TBODY,O.TFOOT,O.THEAD,O.TR]),hge={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:wS,onParseError:null};let pge=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ge.INITIAL,this.originalInsertionMode=ge.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...hge,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new evt(this.options,this),this.activeFormattingElements=new avt(this.treeAdapter),this.fragmentContextID=r?U2(this.treeAdapter.getTagName(r)):O.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new ovt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...hge,...n};t??(t=r.treeAdapter.createElement(Be.TEMPLATE,ot.HTML,[]));const i=r.treeAdapter.createElement("documentmock",ot.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===O.TEMPLATE&&s.tmplInsertionModeStack.unshift(ge.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:Ivt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===ot.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,ot.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ge.TEXT}switchToPlaintextParsing(){this.insertionMode=ge.TEXT,this.originalInsertionMode=ge.IN_BODY,this.tokenizer.state=xo.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Be.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==ot.HTML))switch(this.fragmentContextID){case O.TITLE:case O.TEXTAREA:{this.tokenizer.state=xo.RCDATA;break}case O.STYLE:case O.XMP:case O.IFRAME:case O.NOEMBED:case O.NOFRAMES:case O.NOSCRIPT:{this.tokenizer.state=xo.RAWTEXT;break}case O.SCRIPT:{this.tokenizer.state=xo.SCRIPT_DATA;break}case O.PLAINTEXT:{this.tokenizer.state=xo.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,ot.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,ot.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Be.HTML,ot.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,O.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===xr.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===O.SVG&&this.treeAdapter.getTagName(n)===Be.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===ot.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===O.MGLYPH||t.tagID===O.MALIGNMARK)&&!this._isIntegrationPoint(r,n,ot.HTML)}_processToken(t){switch(t.type){case xr.CHARACTER:{this.onCharacter(t);break}case xr.NULL_CHARACTER:{this.onNullCharacter(t);break}case xr.COMMENT:{this.onComment(t);break}case xr.DOCTYPE:{this.onDoctype(t);break}case xr.START_TAG:{this._processStartTag(t);break}case xr.END_TAG:{this.onEndTag(t);break}case xr.EOF:{this.onEof(t);break}case xr.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Tvt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Oh.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ge.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(O.P),this.openElements.popUntilTagNamePopped(O.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case O.TR:{this.insertionMode=ge.IN_ROW;return}case O.TBODY:case O.THEAD:case O.TFOOT:{this.insertionMode=ge.IN_TABLE_BODY;return}case O.CAPTION:{this.insertionMode=ge.IN_CAPTION;return}case O.COLGROUP:{this.insertionMode=ge.IN_COLUMN_GROUP;return}case O.TABLE:{this.insertionMode=ge.IN_TABLE;return}case O.BODY:{this.insertionMode=ge.IN_BODY;return}case O.FRAMESET:{this.insertionMode=ge.IN_FRAMESET;return}case O.SELECT:{this._resetInsertionModeForSelect(t);return}case O.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case O.HTML:{this.insertionMode=this.headElement?ge.AFTER_HEAD:ge.BEFORE_HEAD;return}case O.TD:case O.TH:{if(t>0){this.insertionMode=ge.IN_CELL;return}break}case O.HEAD:{if(t>0){this.insertionMode=ge.IN_HEAD;return}break}}this.insertionMode=ge.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===O.TEMPLATE)break;if(r===O.TABLE){this.insertionMode=ge.IN_SELECT_IN_TABLE;return}}this.insertionMode=ge.IN_SELECT}_isElementCausesFosterParenting(t){return Ske.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case O.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===ot.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case O.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return Kyt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){sbt(this,t);return}switch(this.insertionMode){case ge.INITIAL:{vD(this,t);break}case ge.BEFORE_HTML:{hk(this,t);break}case ge.BEFORE_HEAD:{pk(this,t);break}case ge.IN_HEAD:{mk(this,t);break}case ge.IN_HEAD_NO_SCRIPT:{gk(this,t);break}case ge.AFTER_HEAD:{yk(this,t);break}case ge.IN_BODY:case ge.IN_CAPTION:case ge.IN_CELL:case ge.IN_TEMPLATE:{Cke(this,t);break}case ge.TEXT:case ge.IN_SELECT:case ge.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ge.IN_TABLE:case ge.IN_TABLE_BODY:case ge.IN_ROW:{Jz(this,t);break}case ge.IN_TABLE_TEXT:{Nke(this,t);break}case ge.IN_COLUMN_GROUP:{PL(this,t);break}case ge.AFTER_BODY:{OL(this,t);break}case ge.AFTER_AFTER_BODY:{W$(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){ibt(this,t);return}switch(this.insertionMode){case ge.INITIAL:{vD(this,t);break}case ge.BEFORE_HTML:{hk(this,t);break}case ge.BEFORE_HEAD:{pk(this,t);break}case ge.IN_HEAD:{mk(this,t);break}case ge.IN_HEAD_NO_SCRIPT:{gk(this,t);break}case ge.AFTER_HEAD:{yk(this,t);break}case ge.TEXT:{this._insertCharacters(t);break}case ge.IN_TABLE:case ge.IN_TABLE_BODY:case ge.IN_ROW:{Jz(this,t);break}case ge.IN_COLUMN_GROUP:{PL(this,t);break}case ge.AFTER_BODY:{OL(this,t);break}case ge.AFTER_AFTER_BODY:{W$(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){mG(this,t);return}switch(this.insertionMode){case ge.INITIAL:case ge.BEFORE_HTML:case ge.BEFORE_HEAD:case ge.IN_HEAD:case ge.IN_HEAD_NO_SCRIPT:case ge.AFTER_HEAD:case ge.IN_BODY:case ge.IN_TABLE:case ge.IN_CAPTION:case ge.IN_COLUMN_GROUP:case ge.IN_TABLE_BODY:case ge.IN_ROW:case ge.IN_CELL:case ge.IN_SELECT:case ge.IN_SELECT_IN_TABLE:case ge.IN_TEMPLATE:case ge.IN_FRAMESET:case ge.AFTER_FRAMESET:{mG(this,t);break}case ge.IN_TABLE_TEXT:{bD(this,t);break}case ge.AFTER_BODY:{$vt(this,t);break}case ge.AFTER_AFTER_BODY:case ge.AFTER_AFTER_FRAMESET:{Fvt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ge.INITIAL:{Lvt(this,t);break}case ge.BEFORE_HEAD:case ge.IN_HEAD:case ge.IN_HEAD_NO_SCRIPT:case ge.AFTER_HEAD:{this._err(t,Ye.misplacedDoctype);break}case ge.IN_TABLE_TEXT:{bD(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ye.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?obt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ge.INITIAL:{vD(this,t);break}case ge.BEFORE_HTML:{Bvt(this,t);break}case ge.BEFORE_HEAD:{Uvt(this,t);break}case ge.IN_HEAD:{_p(this,t);break}case ge.IN_HEAD_NO_SCRIPT:{Hvt(this,t);break}case ge.AFTER_HEAD:{Wvt(this,t);break}case ge.IN_BODY:{il(this,t);break}case ge.IN_TABLE:{dC(this,t);break}case ge.IN_TABLE_TEXT:{bD(this,t);break}case ge.IN_CAPTION:{z1t(this,t);break}case ge.IN_COLUMN_GROUP:{tte(this,t);break}case ge.IN_TABLE_BODY:{iB(this,t);break}case ge.IN_ROW:{sB(this,t);break}case ge.IN_CELL:{q1t(this,t);break}case ge.IN_SELECT:{Mke(this,t);break}case ge.IN_SELECT_IN_TABLE:{G1t(this,t);break}case ge.IN_TEMPLATE:{K1t(this,t);break}case ge.AFTER_BODY:{Q1t(this,t);break}case ge.IN_FRAMESET:{J1t(this,t);break}case ge.AFTER_FRAMESET:{ebt(this,t);break}case ge.AFTER_AFTER_BODY:{nbt(this,t);break}case ge.AFTER_AFTER_FRAMESET:{rbt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?abt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ge.INITIAL:{vD(this,t);break}case ge.BEFORE_HTML:{jvt(this,t);break}case ge.BEFORE_HEAD:{zvt(this,t);break}case ge.IN_HEAD:{Vvt(this,t);break}case ge.IN_HEAD_NO_SCRIPT:{qvt(this,t);break}case ge.AFTER_HEAD:{Gvt(this,t);break}case ge.IN_BODY:{rB(this,t);break}case ge.TEXT:{N1t(this,t);break}case ge.IN_TABLE:{IR(this,t);break}case ge.IN_TABLE_TEXT:{bD(this,t);break}case ge.IN_CAPTION:{V1t(this,t);break}case ge.IN_COLUMN_GROUP:{H1t(this,t);break}case ge.IN_TABLE_BODY:{gG(this,t);break}case ge.IN_ROW:{Oke(this,t);break}case ge.IN_CELL:{W1t(this,t);break}case ge.IN_SELECT:{$ke(this,t);break}case ge.IN_SELECT_IN_TABLE:{Y1t(this,t);break}case ge.IN_TEMPLATE:{X1t(this,t);break}case ge.AFTER_BODY:{Lke(this,t);break}case ge.IN_FRAMESET:{Z1t(this,t);break}case ge.AFTER_FRAMESET:{tbt(this,t);break}case ge.AFTER_AFTER_BODY:{W$(this,t);break}}}onEof(t){switch(this.insertionMode){case ge.INITIAL:{vD(this,t);break}case ge.BEFORE_HTML:{hk(this,t);break}case ge.BEFORE_HEAD:{pk(this,t);break}case ge.IN_HEAD:{mk(this,t);break}case ge.IN_HEAD_NO_SCRIPT:{gk(this,t);break}case ge.AFTER_HEAD:{yk(this,t);break}case ge.IN_BODY:case ge.IN_TABLE:case ge.IN_CAPTION:case ge.IN_COLUMN_GROUP:case ge.IN_TABLE_BODY:case ge.IN_ROW:case ge.IN_CELL:case ge.IN_SELECT:case ge.IN_SELECT_IN_TABLE:{kke(this,t);break}case ge.TEXT:{P1t(this,t);break}case ge.IN_TABLE_TEXT:{bD(this,t);break}case ge.IN_TEMPLATE:{Fke(this,t);break}case ge.AFTER_BODY:case ge.IN_FRAMESET:case ge.AFTER_FRAMESET:case ge.AFTER_AFTER_BODY:case ge.AFTER_AFTER_FRAMESET:{ete(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===se.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ge.IN_HEAD:case ge.IN_HEAD_NO_SCRIPT:case ge.AFTER_HEAD:case ge.TEXT:case ge.IN_COLUMN_GROUP:case ge.IN_SELECT:case ge.IN_SELECT_IN_TABLE:case ge.IN_FRAMESET:case ge.AFTER_FRAMESET:{this._insertCharacters(t);break}case ge.IN_BODY:case ge.IN_CAPTION:case ge.IN_CELL:case ge.IN_TEMPLATE:case ge.AFTER_BODY:case ge.AFTER_AFTER_BODY:case ge.AFTER_AFTER_FRAMESET:{Tke(this,t);break}case ge.IN_TABLE:case ge.IN_TABLE_BODY:case ge.IN_ROW:{Jz(this,t);break}case ge.IN_TABLE_TEXT:{Rke(this,t);break}}}};function kvt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Ike(e,t),n}function Rvt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function Nvt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=Dvt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=Pvt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function Pvt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function Ovt(e,t,n){const r=e.treeAdapter.getTagName(t),i=U2(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===O.TEMPLATE&&s===ot.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Mvt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function Zee(e,t){for(let n=0;n<Avt;n++){const r=kvt(e,t);if(!r)break;const i=Rvt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=Nvt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&Ovt(e,o,s),Mvt(e,i,r)}}function mG(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function $vt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Fvt(e,t){e._appendCommentNode(t,e.document)}function ete(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Lvt(e,t){e._setDocumentType(t);const n=t.forceQuirks?cf.QUIRKS:pvt(t);hvt(t)||e._err(t,Ye.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ge.BEFORE_HTML}function vD(e,t){e._err(t,Ye.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,cf.QUIRKS),e.insertionMode=ge.BEFORE_HTML,e._processToken(t)}function Bvt(e,t){t.tagID===O.HTML?(e._insertElement(t,ot.HTML),e.insertionMode=ge.BEFORE_HEAD):hk(e,t)}function jvt(e,t){const n=t.tagID;(n===O.HTML||n===O.HEAD||n===O.BODY||n===O.BR)&&hk(e,t)}function hk(e,t){e._insertFakeRootElement(),e.insertionMode=ge.BEFORE_HEAD,e._processToken(t)}function Uvt(e,t){switch(t.tagID){case O.HTML:{il(e,t);break}case O.HEAD:{e._insertElement(t,ot.HTML),e.headElement=e.openElements.current,e.insertionMode=ge.IN_HEAD;break}default:pk(e,t)}}function zvt(e,t){const n=t.tagID;n===O.HEAD||n===O.BODY||n===O.HTML||n===O.BR?pk(e,t):e._err(t,Ye.endTagWithoutMatchingOpenElement)}function pk(e,t){e._insertFakeElement(Be.HEAD,O.HEAD),e.headElement=e.openElements.current,e.insertionMode=ge.IN_HEAD,e._processToken(t)}function _p(e,t){switch(t.tagID){case O.HTML:{il(e,t);break}case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:{e._appendElement(t,ot.HTML),t.ackSelfClosing=!0;break}case O.TITLE:{e._switchToTextParsing(t,xo.RCDATA);break}case O.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,xo.RAWTEXT):(e._insertElement(t,ot.HTML),e.insertionMode=ge.IN_HEAD_NO_SCRIPT);break}case O.NOFRAMES:case O.STYLE:{e._switchToTextParsing(t,xo.RAWTEXT);break}case O.SCRIPT:{e._switchToTextParsing(t,xo.SCRIPT_DATA);break}case O.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ge.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ge.IN_TEMPLATE);break}case O.HEAD:{e._err(t,Ye.misplacedStartTagForHeadElement);break}default:mk(e,t)}}function Vvt(e,t){switch(t.tagID){case O.HEAD:{e.openElements.pop(),e.insertionMode=ge.AFTER_HEAD;break}case O.BODY:case O.BR:case O.HTML:{mk(e,t);break}case O.TEMPLATE:{WE(e,t);break}default:e._err(t,Ye.endTagWithoutMatchingOpenElement)}}function WE(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==O.TEMPLATE&&e._err(t,Ye.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(O.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ye.endTagWithoutMatchingOpenElement)}function mk(e,t){e.openElements.pop(),e.insertionMode=ge.AFTER_HEAD,e._processToken(t)}function Hvt(e,t){switch(t.tagID){case O.HTML:{il(e,t);break}case O.BASEFONT:case O.BGSOUND:case O.HEAD:case O.LINK:case O.META:case O.NOFRAMES:case O.STYLE:{_p(e,t);break}case O.NOSCRIPT:{e._err(t,Ye.nestedNoscriptInHead);break}default:gk(e,t)}}function qvt(e,t){switch(t.tagID){case O.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ge.IN_HEAD;break}case O.BR:{gk(e,t);break}default:e._err(t,Ye.endTagWithoutMatchingOpenElement)}}function gk(e,t){const n=t.type===xr.EOF?Ye.openElementsLeftAfterEof:Ye.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ge.IN_HEAD,e._processToken(t)}function Wvt(e,t){switch(t.tagID){case O.HTML:{il(e,t);break}case O.BODY:{e._insertElement(t,ot.HTML),e.framesetOk=!1,e.insertionMode=ge.IN_BODY;break}case O.FRAMESET:{e._insertElement(t,ot.HTML),e.insertionMode=ge.IN_FRAMESET;break}case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:case O.NOFRAMES:case O.SCRIPT:case O.STYLE:case O.TEMPLATE:case O.TITLE:{e._err(t,Ye.abandonedHeadElementChild),e.openElements.push(e.headElement,O.HEAD),_p(e,t),e.openElements.remove(e.headElement);break}case O.HEAD:{e._err(t,Ye.misplacedStartTagForHeadElement);break}default:yk(e,t)}}function Gvt(e,t){switch(t.tagID){case O.BODY:case O.HTML:case O.BR:{yk(e,t);break}case O.TEMPLATE:{WE(e,t);break}default:e._err(t,Ye.endTagWithoutMatchingOpenElement)}}function yk(e,t){e._insertFakeElement(Be.BODY,O.BODY),e.insertionMode=ge.IN_BODY,nB(e,t)}function nB(e,t){switch(t.type){case xr.CHARACTER:{Cke(e,t);break}case xr.WHITESPACE_CHARACTER:{Tke(e,t);break}case xr.COMMENT:{mG(e,t);break}case xr.START_TAG:{il(e,t);break}case xr.END_TAG:{rB(e,t);break}case xr.EOF:{kke(e,t);break}}}function Tke(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Cke(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Yvt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Kvt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Xvt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,ot.HTML),e.insertionMode=ge.IN_FRAMESET)}function Qvt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,ot.HTML)}function Jvt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),pke(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,ot.HTML)}function Zvt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,ot.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function e1t(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,ot.HTML),n||(e.formElement=e.openElements.current))}function t1t(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===O.LI&&i===O.LI||(n===O.DD||n===O.DT)&&(i===O.DD||i===O.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==O.ADDRESS&&i!==O.DIV&&i!==O.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,ot.HTML)}function n1t(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,ot.HTML),e.tokenizer.state=xo.PLAINTEXT}function r1t(e,t){e.openElements.hasInScope(O.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.framesetOk=!1}function i1t(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Be.A);n&&(Zee(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function s1t(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function o1t(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(O.NOBR)&&(Zee(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,ot.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function a1t(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function u1t(e,t){e.treeAdapter.getDocumentMode(e.document)!==cf.QUIRKS&&e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,ot.HTML),e.framesetOk=!1,e.insertionMode=ge.IN_TABLE}function Ake(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,ot.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Dke(e){const t=fke(e,c1.TYPE);return t!=null&&t.toLowerCase()===Cvt}function l1t(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,ot.HTML),Dke(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function c1t(e,t){e._appendElement(t,ot.HTML),t.ackSelfClosing=!0}function f1t(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._appendElement(t,ot.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function d1t(e,t){t.tagName=Be.IMG,t.tagID=O.IMG,Ake(e,t)}function h1t(e,t){e._insertElement(t,ot.HTML),e.skipNextNewLine=!0,e.tokenizer.state=xo.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ge.TEXT}function p1t(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,xo.RAWTEXT)}function m1t(e,t){e.framesetOk=!1,e._switchToTextParsing(t,xo.RAWTEXT)}function mge(e,t){e._switchToTextParsing(t,xo.RAWTEXT)}function g1t(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ge.IN_TABLE||e.insertionMode===ge.IN_CAPTION||e.insertionMode===ge.IN_TABLE_BODY||e.insertionMode===ge.IN_ROW||e.insertionMode===ge.IN_CELL?ge.IN_SELECT_IN_TABLE:ge.IN_SELECT}function y1t(e,t){e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML)}function v1t(e,t){e.openElements.hasInScope(O.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,ot.HTML)}function b1t(e,t){e.openElements.hasInScope(O.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(O.RTC),e._insertElement(t,ot.HTML)}function w1t(e,t){e._reconstructActiveFormattingElements(),Eke(t),Jee(t),t.selfClosing?e._appendElement(t,ot.MATHML):e._insertElement(t,ot.MATHML),t.ackSelfClosing=!0}function _1t(e,t){e._reconstructActiveFormattingElements(),xke(t),Jee(t),t.selfClosing?e._appendElement(t,ot.SVG):e._insertElement(t,ot.SVG),t.ackSelfClosing=!0}function gge(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ot.HTML)}function il(e,t){switch(t.tagID){case O.I:case O.S:case O.B:case O.U:case O.EM:case O.TT:case O.BIG:case O.CODE:case O.FONT:case O.SMALL:case O.STRIKE:case O.STRONG:{s1t(e,t);break}case O.A:{i1t(e,t);break}case O.H1:case O.H2:case O.H3:case O.H4:case O.H5:case O.H6:{Jvt(e,t);break}case O.P:case O.DL:case O.OL:case O.UL:case O.DIV:case O.DIR:case O.NAV:case O.MAIN:case O.MENU:case O.ASIDE:case O.CENTER:case O.FIGURE:case O.FOOTER:case O.HEADER:case O.HGROUP:case O.DIALOG:case O.DETAILS:case O.ADDRESS:case O.ARTICLE:case O.SECTION:case O.SUMMARY:case O.FIELDSET:case O.BLOCKQUOTE:case O.FIGCAPTION:{Qvt(e,t);break}case O.LI:case O.DD:case O.DT:{t1t(e,t);break}case O.BR:case O.IMG:case O.WBR:case O.AREA:case O.EMBED:case O.KEYGEN:{Ake(e,t);break}case O.HR:{f1t(e,t);break}case O.RB:case O.RTC:{v1t(e,t);break}case O.RT:case O.RP:{b1t(e,t);break}case O.PRE:case O.LISTING:{Zvt(e,t);break}case O.XMP:{p1t(e,t);break}case O.SVG:{_1t(e,t);break}case O.HTML:{Yvt(e,t);break}case O.BASE:case O.LINK:case O.META:case O.STYLE:case O.TITLE:case O.SCRIPT:case O.BGSOUND:case O.BASEFONT:case O.TEMPLATE:{_p(e,t);break}case O.BODY:{Kvt(e,t);break}case O.FORM:{e1t(e,t);break}case O.NOBR:{o1t(e,t);break}case O.MATH:{w1t(e,t);break}case O.TABLE:{u1t(e,t);break}case O.INPUT:{l1t(e,t);break}case O.PARAM:case O.TRACK:case O.SOURCE:{c1t(e,t);break}case O.IMAGE:{d1t(e,t);break}case O.BUTTON:{r1t(e,t);break}case O.APPLET:case O.OBJECT:case O.MARQUEE:{a1t(e,t);break}case O.IFRAME:{m1t(e,t);break}case O.SELECT:{g1t(e,t);break}case O.OPTION:case O.OPTGROUP:{y1t(e,t);break}case O.NOEMBED:{mge(e,t);break}case O.FRAMESET:{Xvt(e,t);break}case O.TEXTAREA:{h1t(e,t);break}case O.NOSCRIPT:{e.options.scriptingEnabled?mge(e,t):gge(e,t);break}case O.PLAINTEXT:{n1t(e,t);break}case O.COL:case O.TH:case O.TD:case O.TR:case O.HEAD:case O.FRAME:case O.TBODY:case O.TFOOT:case O.THEAD:case O.CAPTION:case O.COLGROUP:break;default:gge(e,t)}}function E1t(e,t){if(e.openElements.hasInScope(O.BODY)&&(e.insertionMode=ge.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function x1t(e,t){e.openElements.hasInScope(O.BODY)&&(e.insertionMode=ge.AFTER_BODY,Lke(e,t))}function S1t(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function T1t(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(O.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(O.FORM):n&&e.openElements.remove(n))}function C1t(e){e.openElements.hasInButtonScope(O.P)||e._insertFakeElement(Be.P,O.P),e._closePElement()}function A1t(e){e.openElements.hasInListItemScope(O.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(O.LI),e.openElements.popUntilTagNamePopped(O.LI))}function D1t(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function I1t(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function k1t(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function R1t(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Be.BR,O.BR),e.openElements.pop(),e.framesetOk=!1}function Ike(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==O.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function rB(e,t){switch(t.tagID){case O.A:case O.B:case O.I:case O.S:case O.U:case O.EM:case O.TT:case O.BIG:case O.CODE:case O.FONT:case O.NOBR:case O.SMALL:case O.STRIKE:case O.STRONG:{Zee(e,t);break}case O.P:{C1t(e);break}case O.DL:case O.UL:case O.OL:case O.DIR:case O.DIV:case O.NAV:case O.PRE:case O.MAIN:case O.MENU:case O.ASIDE:case O.BUTTON:case O.CENTER:case O.FIGURE:case O.FOOTER:case O.HEADER:case O.HGROUP:case O.DIALOG:case O.ADDRESS:case O.ARTICLE:case O.DETAILS:case O.SECTION:case O.SUMMARY:case O.LISTING:case O.FIELDSET:case O.BLOCKQUOTE:case O.FIGCAPTION:{S1t(e,t);break}case O.LI:{A1t(e);break}case O.DD:case O.DT:{D1t(e,t);break}case O.H1:case O.H2:case O.H3:case O.H4:case O.H5:case O.H6:{I1t(e);break}case O.BR:{R1t(e);break}case O.BODY:{E1t(e,t);break}case O.HTML:{x1t(e,t);break}case O.FORM:{T1t(e);break}case O.APPLET:case O.OBJECT:case O.MARQUEE:{k1t(e,t);break}case O.TEMPLATE:{WE(e,t);break}default:Ike(e,t)}}function kke(e,t){e.tmplInsertionModeStack.length>0?Fke(e,t):ete(e,t)}function N1t(e,t){var n;t.tagID===O.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function P1t(e,t){e._err(t,Ye.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function Jz(e,t){if(Ske.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ge.IN_TABLE_TEXT,t.type){case xr.CHARACTER:{Nke(e,t);break}case xr.WHITESPACE_CHARACTER:{Rke(e,t);break}}else pP(e,t)}function O1t(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,ot.HTML),e.insertionMode=ge.IN_CAPTION}function M1t(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,ot.HTML),e.insertionMode=ge.IN_COLUMN_GROUP}function $1t(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Be.COLGROUP,O.COLGROUP),e.insertionMode=ge.IN_COLUMN_GROUP,tte(e,t)}function F1t(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,ot.HTML),e.insertionMode=ge.IN_TABLE_BODY}function L1t(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Be.TBODY,O.TBODY),e.insertionMode=ge.IN_TABLE_BODY,iB(e,t)}function B1t(e,t){e.openElements.hasInTableScope(O.TABLE)&&(e.openElements.popUntilTagNamePopped(O.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function j1t(e,t){Dke(t)?e._appendElement(t,ot.HTML):pP(e,t),t.ackSelfClosing=!0}function U1t(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,ot.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function dC(e,t){switch(t.tagID){case O.TD:case O.TH:case O.TR:{L1t(e,t);break}case O.STYLE:case O.SCRIPT:case O.TEMPLATE:{_p(e,t);break}case O.COL:{$1t(e,t);break}case O.FORM:{U1t(e,t);break}case O.TABLE:{B1t(e,t);break}case O.TBODY:case O.TFOOT:case O.THEAD:{F1t(e,t);break}case O.INPUT:{j1t(e,t);break}case O.CAPTION:{O1t(e,t);break}case O.COLGROUP:{M1t(e,t);break}default:pP(e,t)}}function IR(e,t){switch(t.tagID){case O.TABLE:{e.openElements.hasInTableScope(O.TABLE)&&(e.openElements.popUntilTagNamePopped(O.TABLE),e._resetInsertionMode());break}case O.TEMPLATE:{WE(e,t);break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TBODY:case O.TD:case O.TFOOT:case O.TH:case O.THEAD:case O.TR:break;default:pP(e,t)}}function pP(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,nB(e,t),e.fosterParentingEnabled=n}function Rke(e,t){e.pendingCharacterTokens.push(t)}function Nke(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function bD(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)pP(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Pke=new Set([O.CAPTION,O.COL,O.COLGROUP,O.TBODY,O.TD,O.TFOOT,O.TH,O.THEAD,O.TR]);function z1t(e,t){const n=t.tagID;Pke.has(n)?e.openElements.hasInTableScope(O.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ge.IN_TABLE,dC(e,t)):il(e,t)}function V1t(e,t){const n=t.tagID;switch(n){case O.CAPTION:case O.TABLE:{e.openElements.hasInTableScope(O.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ge.IN_TABLE,n===O.TABLE&&IR(e,t));break}case O.BODY:case O.COL:case O.COLGROUP:case O.HTML:case O.TBODY:case O.TD:case O.TFOOT:case O.TH:case O.THEAD:case O.TR:break;default:rB(e,t)}}function tte(e,t){switch(t.tagID){case O.HTML:{il(e,t);break}case O.COL:{e._appendElement(t,ot.HTML),t.ackSelfClosing=!0;break}case O.TEMPLATE:{_p(e,t);break}default:PL(e,t)}}function H1t(e,t){switch(t.tagID){case O.COLGROUP:{e.openElements.currentTagId===O.COLGROUP&&(e.openElements.pop(),e.insertionMode=ge.IN_TABLE);break}case O.TEMPLATE:{WE(e,t);break}case O.COL:break;default:PL(e,t)}}function PL(e,t){e.openElements.currentTagId===O.COLGROUP&&(e.openElements.pop(),e.insertionMode=ge.IN_TABLE,e._processToken(t))}function iB(e,t){switch(t.tagID){case O.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,ot.HTML),e.insertionMode=ge.IN_ROW;break}case O.TH:case O.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Be.TR,O.TR),e.insertionMode=ge.IN_ROW,sB(e,t);break}case O.CAPTION:case O.COL:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ge.IN_TABLE,dC(e,t));break}default:dC(e,t)}}function gG(e,t){const n=t.tagID;switch(t.tagID){case O.TBODY:case O.TFOOT:case O.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ge.IN_TABLE);break}case O.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ge.IN_TABLE,IR(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TD:case O.TH:case O.TR:break;default:IR(e,t)}}function sB(e,t){switch(t.tagID){case O.TH:case O.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,ot.HTML),e.insertionMode=ge.IN_CELL,e.activeFormattingElements.insertMarker();break}case O.CAPTION:case O.COL:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:case O.TR:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ge.IN_TABLE_BODY,iB(e,t));break}default:dC(e,t)}}function Oke(e,t){switch(t.tagID){case O.TR:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ge.IN_TABLE_BODY);break}case O.TABLE:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ge.IN_TABLE_BODY,gG(e,t));break}case O.TBODY:case O.TFOOT:case O.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(O.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ge.IN_TABLE_BODY,gG(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TD:case O.TH:break;default:IR(e,t)}}function q1t(e,t){const n=t.tagID;Pke.has(n)?(e.openElements.hasInTableScope(O.TD)||e.openElements.hasInTableScope(O.TH))&&(e._closeTableCell(),sB(e,t)):il(e,t)}function W1t(e,t){const n=t.tagID;switch(n){case O.TD:case O.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ge.IN_ROW);break}case O.TABLE:case O.TBODY:case O.TFOOT:case O.THEAD:case O.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),Oke(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:break;default:rB(e,t)}}function Mke(e,t){switch(t.tagID){case O.HTML:{il(e,t);break}case O.OPTION:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e._insertElement(t,ot.HTML);break}case O.OPTGROUP:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e.openElements.currentTagId===O.OPTGROUP&&e.openElements.pop(),e._insertElement(t,ot.HTML);break}case O.INPUT:case O.KEYGEN:case O.TEXTAREA:case O.SELECT:{e.openElements.hasInSelectScope(O.SELECT)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),t.tagID!==O.SELECT&&e._processStartTag(t));break}case O.SCRIPT:case O.TEMPLATE:{_p(e,t);break}}}function $ke(e,t){switch(t.tagID){case O.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===O.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===O.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===O.OPTGROUP&&e.openElements.pop();break}case O.OPTION:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop();break}case O.SELECT:{e.openElements.hasInSelectScope(O.SELECT)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode());break}case O.TEMPLATE:{WE(e,t);break}}}function G1t(e,t){const n=t.tagID;n===O.CAPTION||n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR||n===O.TD||n===O.TH?(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),e._processStartTag(t)):Mke(e,t)}function Y1t(e,t){const n=t.tagID;n===O.CAPTION||n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR||n===O.TD||n===O.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),e.onEndTag(t)):$ke(e,t)}function K1t(e,t){switch(t.tagID){case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:case O.NOFRAMES:case O.SCRIPT:case O.STYLE:case O.TEMPLATE:case O.TITLE:{_p(e,t);break}case O.CAPTION:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:{e.tmplInsertionModeStack[0]=ge.IN_TABLE,e.insertionMode=ge.IN_TABLE,dC(e,t);break}case O.COL:{e.tmplInsertionModeStack[0]=ge.IN_COLUMN_GROUP,e.insertionMode=ge.IN_COLUMN_GROUP,tte(e,t);break}case O.TR:{e.tmplInsertionModeStack[0]=ge.IN_TABLE_BODY,e.insertionMode=ge.IN_TABLE_BODY,iB(e,t);break}case O.TD:case O.TH:{e.tmplInsertionModeStack[0]=ge.IN_ROW,e.insertionMode=ge.IN_ROW,sB(e,t);break}default:e.tmplInsertionModeStack[0]=ge.IN_BODY,e.insertionMode=ge.IN_BODY,il(e,t)}}function X1t(e,t){t.tagID===O.TEMPLATE&&WE(e,t)}function Fke(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(O.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):ete(e,t)}function Q1t(e,t){t.tagID===O.HTML?il(e,t):OL(e,t)}function Lke(e,t){var n;if(t.tagID===O.HTML){if(e.fragmentContext||(e.insertionMode=ge.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===O.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else OL(e,t)}function OL(e,t){e.insertionMode=ge.IN_BODY,nB(e,t)}function J1t(e,t){switch(t.tagID){case O.HTML:{il(e,t);break}case O.FRAMESET:{e._insertElement(t,ot.HTML);break}case O.FRAME:{e._appendElement(t,ot.HTML),t.ackSelfClosing=!0;break}case O.NOFRAMES:{_p(e,t);break}}}function Z1t(e,t){t.tagID===O.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==O.FRAMESET&&(e.insertionMode=ge.AFTER_FRAMESET))}function ebt(e,t){switch(t.tagID){case O.HTML:{il(e,t);break}case O.NOFRAMES:{_p(e,t);break}}}function tbt(e,t){t.tagID===O.HTML&&(e.insertionMode=ge.AFTER_AFTER_FRAMESET)}function nbt(e,t){t.tagID===O.HTML?il(e,t):W$(e,t)}function W$(e,t){e.insertionMode=ge.IN_BODY,nB(e,t)}function rbt(e,t){switch(t.tagID){case O.HTML:{il(e,t);break}case O.NOFRAMES:{_p(e,t);break}}}function ibt(e,t){t.chars=Cs,e._insertCharacters(t)}function sbt(e,t){e._insertCharacters(t),e.framesetOk=!1}function Bke(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==ot.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function obt(e,t){if(_vt(t))Bke(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===ot.MATHML?Eke(t):r===ot.SVG&&(Evt(t),xke(t)),Jee(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function abt(e,t){if(t.tagID===O.P||t.tagID===O.BR){Bke(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===ot.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Be.AREA,Be.BASE,Be.BASEFONT,Be.BGSOUND,Be.BR,Be.COL,Be.EMBED,Be.FRAME,Be.HR,Be.IMG,Be.INPUT,Be.KEYGEN,Be.LINK,Be.META,Be.PARAM,Be.SOURCE,Be.TRACK,Be.WBR;const ubt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),yge={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function jke(e,t){const n=vbt(e),r=oke("type",{handlers:{root:lbt,element:cbt,text:fbt,comment:zke,doctype:dbt,raw:pbt},unknown:mbt}),i={parser:n?new pge(yge):pge.getFragmentParser(void 0,yge),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),z2(i,cg());const s=n?i.parser.document:i.parser.getFragment(),o=_yt(s,{file:i.options.file});return i.stitches&&Yee(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function Uke(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function lbt(e,t){Uke(e.children,t)}function cbt(e,t){gbt(e,t),Uke(e.children,t),ybt(e,t)}function fbt(e,t){const n={type:xr.CHARACTER,chars:e.value,location:mP(e)};z2(t,cg(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function dbt(e,t){const n={type:xr.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:mP(e)};z2(t,cg(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function hbt(e,t){t.stitches=!0;const n=bbt(e);if("children"in e&&"children"in n){const r=jke({type:"root",children:e.children},t.options);n.children=r.children}zke({type:"comment",value:{stitch:n}},t)}function zke(e,t){const n=e.value,r={type:xr.COMMENT,data:n,location:mP(e)};z2(t,cg(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function pbt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,Vke(t,cg(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function mbt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))hbt(n,t);else{let r="";throw ubt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function z2(e,t){Vke(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=xo.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function Vke(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function gbt(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===xo.PLAINTEXT)return;z2(t,cg(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:f_.html;i===f_.html&&n==="svg"&&(i=f_.svg);const s=Tyt({...e,children:[]},{space:i===f_.svg?"svg":"html"}),o={type:xr.START_TAG,tagName:n,tagID:U2(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:mP(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function ybt(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&Pyt.includes(n)||t.parser.tokenizer.state===xo.PLAINTEXT)return;z2(t,J8(e));const r={type:xr.END_TAG,tagName:n,tagID:U2(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:mP(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===xo.RCDATA||t.parser.tokenizer.state===xo.RAWTEXT||t.parser.tokenizer.state===xo.SCRIPT_DATA)&&(t.parser.tokenizer.state=xo.DATA)}function vbt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function mP(e){const t=cg(e)||{line:void 0,column:void 0,offset:void 0},n=J8(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function bbt(e){return"children"in e?fC({...e,children:[]}):fC(e)}function wbt(e){return function(t,n){return jke(t,{...e,file:n})}}function Xu({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return _.jsx(Eb,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return _.jsx(gt,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return _.jsx(Os,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return _.jsx(Os,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return _.jsx(Os,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return _.jsx(Os,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return _.jsx(Os,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return _.jsx(Os,{...s,order:6,...s,pb:12})},a({node:i,...s}){return _.jsx(BE,{...s,ref:void 0})},ul({node:i,...s}){return _.jsx(ep,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return _.jsx(ep,{type:"ordered",withPadding:!0,...o,pb:8})}};return _.jsx(uyt,{components:n,rehypePlugins:[wbt],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function yG({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return _.jsx(Xu,{text:n})}const _bt="https://github.com/revisit-studies/study/tree/main/public/";function Ebt({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=wp();return _.jsx(bs.Main,{children:_.jsxs(Fd,{size:"xs",px:"xs",children:[_.jsx(Eb,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Rl}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),_.jsx(gt,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=vIe(i);return _.jsx(Vo,{onClick:a=>{a.preventDefault(),r(`/${o}`)},my:"sm",style:{width:"100%"},children:_.jsxs(jE,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(gt,{fw:"bold",children:i}),_.jsxs(Zt,{align:"center",direction:"row",children:[_.jsx(kL,{color:"red"}),_.jsx(gt,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),_.jsx(yG,{issues:s.errors,type:"error"})]}):_.jsxs(_.Fragment,{children:[_.jsxs(Zt,{direction:"row",justify:"space-between",children:[_.jsx(gt,{fw:"bold",children:s.studyMetadata.title}),_.jsx(LE,{onClick:a=>{a.stopPropagation()},variant:"transparent",size:20,style:{float:"right"},component:"a",href:`${Rl}${o}`,children:_.jsx(xht,{style:{paddingTop:4}})})]}),_.jsxs(gt,{c:"dimmed",children:[_.jsx(gt,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),_.jsx(gt,{c:"dimmed",children:s.studyMetadata.description}),_.jsx(gt,{c:"dimmed",ta:"right",style:{paddingRight:5},children:_.jsxs(BE,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${_bt}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs(Zt,{align:"center",direction:"row",children:[_.jsx(kL,{color:"orange"}),_.jsx(gt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),_.jsx(yG,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var Hke={exports:{}},qke={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gP=P;function xbt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Sbt=typeof Object.is=="function"?Object.is:xbt,Tbt=gP.useSyncExternalStore,Cbt=gP.useRef,Abt=gP.useEffect,Dbt=gP.useMemo,Ibt=gP.useDebugValue;qke.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Cbt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Dbt(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,Sbt(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=Tbt(e,s[0],s[1]);return Abt(function(){o.hasValue=!0,o.value=a},[a]),Ibt(a),a};Hke.exports=qke;var kbt=Hke.exports,vf="default"in WF?xi:WF,vge=Symbol.for("react-redux-context"),bge=typeof globalThis<"u"?globalThis:{};function Rbt(){if(!vf.createContext)return{};const e=bge[vge]??(bge[vge]=new Map);let t=e.get(vf.createContext);return t||(t=vf.createContext(null),e.set(vf.createContext,t)),t}var R1=Rbt(),Nbt=()=>{throw new Error("uSES not initialized!")};function nte(e=R1){return function(){return vf.useContext(e)}}var Wke=nte(),Gke=Nbt,Pbt=e=>{Gke=e},Obt=(e,t)=>e===t;function Mbt(e=R1){const t=e===R1?Wke:nte(e),n=(r,i={})=>{const{equalityFn:s=Obt,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();vf.useRef(!0);const d=vf.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=Gke(u.addNestedSub,a.getState,l||a.getState,d,s);return vf.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var $bt=Mbt();function Fbt(e){e()}function Lbt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Fbt(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var wge={notify(){},get:()=>[]};function Bbt(e,t){let n,r=wge,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Lbt())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=wge)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var jbt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ubt=typeof navigator<"u"&&navigator.product==="ReactNative",zbt=jbt||Ubt?vf.useLayoutEffect:vf.useEffect;function Vbt({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=vf.useMemo(()=>{const l=Bbt(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=vf.useMemo(()=>e.getState(),[e]);zbt(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||R1;return vf.createElement(u.Provider,{value:o},n)}var Hbt=Vbt;function Yke(e=R1){const t=e===R1?Wke:nte(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var qbt=Yke();function Wbt(e=R1){const t=e===R1?qbt:Yke(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Kke=Wbt();Pbt(kbt.useSyncExternalStoreWithSelector);function Xa(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Gbt=typeof Symbol=="function"&&Symbol.observable||"@@observable",_ge=Gbt,Zz=()=>Math.random().toString(36).substring(7).split("").join("."),Ybt={INIT:`@@redux/INIT${Zz()}`,REPLACE:`@@redux/REPLACE${Zz()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Zz()}`},ML=Ybt;function rte(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Xke(e,t,n){if(typeof e!="function")throw new Error(Xa(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Xa(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Xa(1));return n(Xke)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(Xa(3));return i}function f(g){if(typeof g!="function")throw new Error(Xa(4));if(u)throw new Error(Xa(5));let y=!0;l();const b=a++;return o.set(b,g),function(){if(y){if(u)throw new Error(Xa(6));y=!1,l(),o.delete(b),s=null}}}function d(g){if(!rte(g))throw new Error(Xa(7));if(typeof g.type>"u")throw new Error(Xa(8));if(typeof g.type!="string")throw new Error(Xa(17));if(u)throw new Error(Xa(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(b=>{b()}),g}function h(g){if(typeof g!="function")throw new Error(Xa(10));r=g,d({type:ML.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Xa(11));function b(){const S=y;S.next&&S.next(c())}return b(),{unsubscribe:g(b)}},[_ge](){return this}}}return d({type:ML.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[_ge]:p}}function Kbt(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:ML.INIT})>"u")throw new Error(Xa(12));if(typeof n(void 0,{type:ML.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Xa(13))})}function Xbt(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{Kbt(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(Xa(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function $L(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Qbt(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Xa(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=$L(...a)(i.dispatch),{...i,dispatch:s}}}function Jbt(e){return rte(e)&&"type"in e&&typeof e.type=="string"}var Qke=Symbol.for("immer-nothing"),Ege=Symbol.for("immer-draftable"),Rf=Symbol.for("immer-state");function $h(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var hC=Object.getPrototypeOf;function N1(e){return!!e&&!!e[Rf]}function J0(e){var t;return e?Jke(e)||Array.isArray(e)||!!e[Ege]||!!((t=e.constructor)!=null&&t[Ege])||aB(e)||uB(e):!1}var Zbt=Object.prototype.constructor.toString();function Jke(e){if(!e||typeof e!="object")return!1;const t=hC(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Zbt}function FL(e,t){oB(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function oB(e){const t=e[Rf];return t?t.type_:Array.isArray(e)?1:aB(e)?2:uB(e)?3:0}function vG(e,t){return oB(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Zke(e,t,n){const r=oB(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function ewt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function aB(e){return e instanceof Map}function uB(e){return e instanceof Set}function Rw(e){return e.copy_||e.base_}function bG(e,t){if(aB(e))return new Map(e);if(uB(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Jke(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Rf];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(hC(e),r)}else{const r=hC(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function ite(e,t=!1){return lB(e)||N1(e)||!J0(e)||(oB(e)>1&&(e.set=e.add=e.clear=e.delete=twt),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>ite(r,!0))),e}function twt(){$h(2)}function lB(e){return Object.isFrozen(e)}var nwt={};function G_(e){const t=nwt[e];return t||$h(0,e),t}var kR;function eRe(){return kR}function rwt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function xge(e,t){t&&(G_("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function wG(e){_G(e),e.drafts_.forEach(iwt),e.drafts_=null}function _G(e){e===kR&&(kR=e.parent_)}function Sge(e){return kR=rwt(kR,e)}function iwt(e){const t=e[Rf];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Tge(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Rf].modified_&&(wG(t),$h(4)),J0(e)&&(e=LL(t,e),t.parent_||BL(t,e)),t.patches_&&G_("Patches").generateReplacementPatches_(n[Rf].base_,e,t.patches_,t.inversePatches_)):e=LL(t,n,[]),wG(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Qke?e:void 0}function LL(e,t,n){if(lB(t))return t;const r=t[Rf];if(!r)return FL(t,(i,s)=>Cge(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return BL(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),FL(s,(a,u)=>Cge(e,r,i,a,u,n,o)),BL(e,i,!1),n&&e.patches_&&G_("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Cge(e,t,n,r,i,s,o){if(N1(i)){const a=s&&t&&t.type_!==3&&!vG(t.assigned_,r)?s.concat(r):void 0,u=LL(e,i,a);if(Zke(n,r,u),N1(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(J0(i)&&!lB(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;LL(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&BL(e,i)}}function BL(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ite(t,n)}function swt(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:eRe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=ste;n&&(i=[r],s=RR);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var ste={get(e,t){if(t===Rf)return e;const n=Rw(e);if(!vG(n,t))return owt(e,n,t);const r=n[t];return e.finalized_||!J0(r)?r:r===eV(e.base_,t)?(tV(e),e.copy_[t]=xG(r,e)):r},has(e,t){return t in Rw(e)},ownKeys(e){return Reflect.ownKeys(Rw(e))},set(e,t,n){const r=tRe(Rw(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=eV(Rw(e),t),s=i==null?void 0:i[Rf];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(ewt(n,i)&&(n!==void 0||vG(e.base_,t)))return!0;tV(e),EG(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return eV(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,tV(e),EG(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Rw(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){$h(11)},getPrototypeOf(e){return hC(e.base_)},setPrototypeOf(){$h(12)}},RR={};FL(ste,(e,t)=>{RR[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});RR.deleteProperty=function(e,t){return RR.set.call(this,e,t,void 0)};RR.set=function(e,t,n){return ste.set.call(this,e[0],t,n,e[0])};function eV(e,t){const n=e[Rf];return(n?Rw(n):e)[t]}function owt(e,t,n){var i;const r=tRe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function tRe(e,t){if(!(t in e))return;let n=hC(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=hC(n)}}function EG(e){e.modified_||(e.modified_=!0,e.parent_&&EG(e.parent_))}function tV(e){e.copy_||(e.copy_=bG(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var awt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&$h(6),r!==void 0&&typeof r!="function"&&$h(7);let i;if(J0(t)){const s=Sge(this),o=xG(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?wG(s):_G(s)}return xge(s,r),Tge(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===Qke&&(i=void 0),this.autoFreeze_&&ite(i,!0),r){const s=[],o=[];G_("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else $h(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){J0(e)||$h(8),N1(e)&&(e=nRe(e));const t=Sge(this),n=xG(e,void 0);return n[Rf].isManual_=!0,_G(t),n}finishDraft(e,t){const n=e&&e[Rf];(!n||!n.isManual_)&&$h(9);const{scope_:r}=n;return xge(r,t),Tge(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=G_("Patches").applyPatches_;return N1(e)?r(e,t):this.produce(e,i=>r(i,t))}};function xG(e,t){const n=aB(e)?G_("MapSet").proxyMap_(e,t):uB(e)?G_("MapSet").proxySet_(e,t):swt(e,t);return(t?t.scope_:eRe()).drafts_.push(n),n}function nRe(e){return N1(e)||$h(10,e),rRe(e)}function rRe(e){if(!J0(e)||lB(e))return e;const t=e[Rf];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=bG(e,t.scope_.immer_.useStrictShallowCopy_)}else n=bG(e,!0);return FL(n,(r,i)=>{Zke(n,r,rRe(i))}),t&&(t.finalized_=!1),n}var Nf=new awt,iRe=Nf.produce;Nf.produceWithPatches.bind(Nf);Nf.setAutoFreeze.bind(Nf);Nf.setUseStrictShallowCopy.bind(Nf);Nf.applyPatches.bind(Nf);Nf.createDraft.bind(Nf);Nf.finishDraft.bind(Nf);function uwt(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function lwt(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function cwt(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Age=e=>Array.isArray(e)?e:[e];function fwt(e){const t=Array.isArray(e[0])?e[0]:e;return cwt(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function dwt(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var hwt=class{constructor(e){this.value=e}deref(){return this.value}},pwt=typeof WeakRef<"u"?WeakRef:hwt,mwt=0,Dge=1;function oM(){return{s:mwt,v:void 0,o:null,p:null}}function ote(e,t={}){let n=oM();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=oM(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=oM(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===Dge)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new pwt(c):c}return l.s=Dge,l.v=c,c}return o.clearCache=()=>{n=oM(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function sRe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),uwt(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=ote,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=Age(d),y=Age(p),b=fwt(i),w=f(function(){return s++,l.apply(null,arguments)},...g),S=h(function(){o++;const T=dwt(b,arguments);return a=w.apply(null,T),a},...y);return Object.assign(S,{resultFunc:l,memoizedResultFunc:w,dependencies:b,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var oRe=sRe(ote),gwt=Object.assign((e,t=oRe)=>{lwt(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>gwt});function aRe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var ywt=aRe(),vwt=aRe,bwt=(...e)=>{const t=sRe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(N1(o)?nRe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};bwt(ote);var wwt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?$L:$L.apply(null,arguments)};function pC(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Rc(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Jbt(r)&&r.type===e,n}var uRe=class hI extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,hI.prototype)}static get[Symbol.species](){return hI}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new hI(...t[0].concat(this)):new hI(...t.concat(this))}};function Ige(e){return J0(e)?iRe(e,()=>{}):e}function kge(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(Rc(10));const r=n.insert(t,e);return e.set(t,r),r}function _wt(e){return typeof e=="boolean"}var Ewt=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new uRe;return n&&(_wt(n)?o.push(ywt):o.push(vwt(n.extraArgument))),o},xwt="RTK_autoBatch",lRe=e=>t=>{setTimeout(t,e)},Swt=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:lRe(10),Twt=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?Swt:e.type==="callback"?e.queueNotification:lRe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[xwt]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},Cwt=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new uRe(e);return r&&i.push(Twt(typeof r=="object"?r:void 0)),i},Awt=!0;function Dwt(e){const t=Ewt(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e;let a;if(typeof n=="function")a=n;else if(rte(n))a=Xbt(n);else throw new Error(Rc(1));let u;typeof r=="function"?u=r(t):u=t();let l=$L;i&&(l=wwt({trace:!Awt,...typeof i=="object"&&i}));const c=Qbt(...u),f=Cwt(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return Xke(a,s,h)}function cRe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Rc(28));if(a in t)throw new Error(Rc(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function Iwt(e){return typeof e=="function"}function kwt(e,t){let[n,r,i]=cRe(t),s;if(Iwt(e))s=()=>Ige(e());else{const a=Ige(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(N1(c)){const h=f(c,u);return h===void 0?c:h}else{if(J0(c))return iRe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(Rc(9))}return d}}return c},a)}return o.getInitialState=s,o}var Rwt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Nwt=(e=21)=>{let t="",n=e;for(;n--;)t+=Rwt[Math.random()*64|0];return t},Pwt=Symbol.for("rtk-slice-createasyncthunk");function Owt(e,t){return`${e}/${t}`}function Mwt({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Pwt];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Rc(11));const a=(typeof i.reducers=="function"?i.reducers(Lwt()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(w,S){const E=typeof w=="string"?w:w.type;if(!E)throw new Error(Rc(12));if(E in l.sliceCaseReducersByType)throw new Error(Rc(13));return l.sliceCaseReducersByType[E]=S,c},addMatcher(w,S){return l.sliceMatchers.push({matcher:w,reducer:S}),c},exposeAction(w,S){return l.actionCreators[w]=S,c},exposeCaseReducer(w,S){return l.sliceCaseReducersByName[w]=S,c}};u.forEach(w=>{const S=a[w],E={reducerName:w,type:Owt(s,w),createNotation:typeof i.reducers=="function"};jwt(S)?zwt(E,S,c,t):Bwt(E,S,c)});function f(){const[w={},S=[],E=void 0]=typeof i.extraReducers=="function"?cRe(i.extraReducers):[i.extraReducers],T={...w,...l.sliceCaseReducersByType};return kwt(i.initialState,C=>{for(let A in T)C.addCase(A,T[A]);for(let A of l.sliceMatchers)C.addMatcher(A.matcher,A.reducer);for(let A of S)C.addMatcher(A.matcher,A.reducer);E&&C.addDefaultCase(E)})}const d=w=>w,h=new Map;let p;function m(w,S){return p||(p=f()),p(w,S)}function g(){return p||(p=f()),p.getInitialState()}function y(w,S=!1){function E(C){let A=C[w];return typeof A>"u"&&S&&(A=g()),A}function T(C=d){const A=kge(h,S,{insert:()=>new WeakMap});return kge(A,C,{insert:()=>{const I={};for(const[k,N]of Object.entries(i.selectors??{}))I[k]=$wt(N,C,g,S);return I}})}return{reducerPath:w,getSelectors:T,get selectors(){return T(E)},selectSlice:E}}const b={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(w,{reducerPath:S,...E}={}){const T=S??o;return w.inject({reducerPath:T,reducer:m},E),{...b,...y(T,!0)}}};return b}}function $wt(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Fwt=Mwt();function Lwt(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Bwt({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Uwt(r))throw new Error(Rc(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?pC(e,o):pC(e))}function jwt(e){return e._reducerDefinitionType==="asyncThunk"}function Uwt(e){return e._reducerDefinitionType==="reducerWithPrepare"}function zwt({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Rc(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||aM,pending:a||aM,rejected:u||aM,settled:l||aM})}function aM(){}var Vwt=(e,t)=>{if(typeof e!="function")throw new Error(Rc(32))},ate="listenerMiddleware",Hwt=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=pC(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Rc(21));return Vwt(s),{predicate:i,type:t,effect:s}},qwt=Object.assign(e=>{const{type:t,predicate:n,effect:r}=Hwt(e);return{id:Nwt(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Rc(22))}}},{withTypes:()=>qwt}),Wwt=Object.assign(pC(`${ate}/add`),{withTypes:()=>Wwt});pC(`${ate}/removeAll`);var Gwt=Object.assign(pC(`${ate}/remove`),{withTypes:()=>Gwt});function Rc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function Z0(e){return e.components.flatMap(t=>typeof t=="string"?t:Z0(t))}function fRe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:fRe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function dRe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Z0(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Z0(e).length-1}];r+=1}else{const o=dRe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function ute(e,t){const n=dRe(e,t,0);return typeof n=="number"?null:n}function hRe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=hRe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function Ywt(e,t){const n=hRe(e,t,0);return n.found?n.distance:-1}function pRe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...pRe(i,`${t}-${s}`))}),n}function lte(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>lte(n,`${t}-${r}`))}}async function Kwt(e,t,n,r,i,s){const o=Z0(n),a=Object.fromEntries(o.filter(h=>h!=="end").map((h,p)=>[`${h}_${p}`,{answer:{},startTime:0,endTime:-1,provenanceGraph:void 0,windowEvents:[],timedOut:!1}])),u=Object.assign({},...o.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),l=Object.assign({},...o.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),c={studyId:e,isRecording:!1,answers:Object.keys(i).length>0?i:a,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?l:u,iframeAnswers:{},iframeProvenance:null,metadata:r,modes:s,matrixAnswers:{}},f=Fwt({name:"storeSlice",initialState:c,reducers:{setConfig(h,p){h.config=p.payload},setIsRecording(h,p){h.isRecording=p.payload},toggleStudyBrowser:h=>{h.showStudyBrowser=!h.showStudyBrowser},toggleShowHelpText:h=>{h.showHelpText=!h.showHelpText},setAlertModal:(h,p)=>{h.alertModal=p.payload},setIframeAnswers:(h,p)=>{h.iframeAnswers=p.payload},setIframeProvenance:(h,p)=>{h.iframeProvenance=p.payload},setMatrixAnswersRadio:(h,p)=>{const{responseId:m,questionKey:g,val:y}=p.payload;h.matrixAnswers={...h.matrixAnswers,[m]:{...h.matrixAnswers[m],[g]:y}}},setMatrixAnswersCheckbox:(h,p)=>{var T;const{responseId:m,questionKey:g,value:y,isChecked:b,choiceOptions:w}=p.payload,S=((T=h.matrixAnswers[m])==null?void 0:T[g])??"";let E="";b?S.length>0?E=[...S.split("|"),y].sort((C,A)=>w.map(I=>I.value).indexOf(C)-w.map(I=>I.value).indexOf(A)).join("|"):E=`${y}`:E=S.split("|").filter(C=>C!==y).join("|"),h.matrixAnswers={...h.matrixAnswers,[m]:{...h.matrixAnswers[m],[g]:E}}},updateResponseBlockValidation:(h,{payload:p})=>{h.trialValidation[p.identifier]||(h.trialValidation[p.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),h.trialValidation[p.identifier][p.location]={valid:p.status,values:p.values},p.provenanceGraph&&(h.trialValidation[p.identifier].provenanceGraph=p.provenanceGraph)},saveTrialAnswer(h,{payload:p}){const{identifier:m,answer:g,startTime:y,endTime:b,provenanceGraph:w,windowEvents:S,timedOut:E}=p;h.answers[m]={answer:g,startTime:y,endTime:b,provenanceGraph:w,windowEvents:S,timedOut:E}}}});return{store:Dwt({reducer:f.reducer,preloadedState:c}),actions:f.actions}}const mRe=P.createContext(null);function Ld(){return P.useContext(mRe).actions}const Ep=Kke,Fs=$bt;function Xwt(e){return Fs(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}const Qwt=oRe(e=>e.sequence,e=>Z0(e));function cte(){return Fs(Qwt)}function GE(){const{studyId:e}=X0();return`${e}`}function Dy(){const{index:e}=X0(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function Cb(){const e=Dy(),t=cte();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var jL={exports:{}};jL.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",b="[object Object]",w="[object Proxy]",S="[object RegExp]",E="[object Set]",T="[object String]",C="[object Undefined]",A="[object WeakMap]",I="[object ArrayBuffer]",k="[object DataView]",N="[object Float32Array]",F="[object Float64Array]",M="[object Int8Array]",L="[object Int16Array]",j="[object Int32Array]",B="[object Uint8Array]",z="[object Uint8ClampedArray]",V="[object Uint16Array]",G="[object Uint32Array]",$=/[\\^$.*+?()[\]{}|]/g,W=/^\[object .+?Constructor\]$/,K=/^(?:0|[1-9]\d*)$/,q={};q[N]=q[F]=q[M]=q[L]=q[j]=q[B]=q[z]=q[V]=q[G]=!0,q[a]=q[u]=q[I]=q[c]=q[k]=q[f]=q[d]=q[h]=q[m]=q[g]=q[b]=q[S]=q[E]=q[T]=q[A]=!1;var Y=typeof Hs=="object"&&Hs&&Hs.Object===Object&&Hs,Z=typeof self=="object"&&self&&self.Object===Object&&self,ae=Y||Z||Function("return this")(),be=t&&!t.nodeType&&t,Se=be&&!0&&e&&!e.nodeType&&e,we=Se&&Se.exports===be,Ce=we&&Y.process,Le=function(){try{var fe=Se&&Se.require&&Se.require("util").types;return fe||Ce&&Ce.binding&&Ce.binding("util")}catch{}}(),ke=Le&&Le.isTypedArray;function Ze(fe,Te,We){switch(We.length){case 0:return fe.call(Te);case 1:return fe.call(Te,We[0]);case 2:return fe.call(Te,We[0],We[1]);case 3:return fe.call(Te,We[0],We[1],We[2])}return fe.apply(Te,We)}function Ke(fe,Te){for(var We=-1,Jt=Array(fe);++We<fe;)Jt[We]=Te(We);return Jt}function Ct(fe){return function(Te){return fe(Te)}}function wt(fe,Te){return fe==null?void 0:fe[Te]}function Re(fe,Te){return function(We){return fe(Te(We))}}var He=Array.prototype,lt=Function.prototype,St=Object.prototype,Vt=ae["__core-js_shared__"],ht=lt.toString,Q=St.hasOwnProperty,de=function(){var fe=/[^.]+$/.exec(Vt&&Vt.keys&&Vt.keys.IE_PROTO||"");return fe?"Symbol(src)_1."+fe:""}(),_e=St.toString,oe=ht.call(Object),he=RegExp("^"+ht.call(Q).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ee=we?ae.Buffer:void 0,Fe=ae.Symbol,je=ae.Uint8Array;Ee&&Ee.allocUnsafe;var ct=Re(Object.getPrototypeOf,Object),rt=Object.create,qt=St.propertyIsEnumerable,en=He.splice,Yt=Fe?Fe.toStringTag:void 0,un=function(){try{var fe=yt(Object,"defineProperty");return fe({},"",{}),fe}catch{}}(),Sn=Ee?Ee.isBuffer:void 0,Bn=Math.max,Ci=Date.now,gi=yt(ae,"Map"),jn=yt(Object,"create"),Ki=function(){function fe(){}return function(Te){if(!ah(Te))return{};if(rt)return rt(Te);fe.prototype=Te;var We=new fe;return fe.prototype=void 0,We}}();function ti(fe){var Te=-1,We=fe==null?0:fe.length;for(this.clear();++Te<We;){var Jt=fe[Te];this.set(Jt[0],Jt[1])}}function Es(){this.__data__=jn?jn(null):{},this.size=0}function Jc(fe){var Te=this.has(fe)&&delete this.__data__[fe];return this.size-=Te?1:0,Te}function Va(fe){var Te=this.__data__;if(jn){var We=Te[fe];return We===r?void 0:We}return Q.call(Te,fe)?Te[fe]:void 0}function sl(fe){var Te=this.__data__;return jn?Te[fe]!==void 0:Q.call(Te,fe)}function Kr(fe,Te){var We=this.__data__;return this.size+=this.has(fe)?0:1,We[fe]=jn&&Te===void 0?r:Te,this}ti.prototype.clear=Es,ti.prototype.delete=Jc,ti.prototype.get=Va,ti.prototype.has=sl,ti.prototype.set=Kr;function Xi(fe){var Te=-1,We=fe==null?0:fe.length;for(this.clear();++Te<We;){var Jt=fe[Te];this.set(Jt[0],Jt[1])}}function Ai(){this.__data__=[],this.size=0}function No(fe){var Te=this.__data__,We=sr(Te,fe);if(We<0)return!1;var Jt=Te.length-1;return We==Jt?Te.pop():en.call(Te,We,1),--this.size,!0}function Go(fe){var Te=this.__data__,We=sr(Te,fe);return We<0?void 0:Te[We][1]}function po(fe){return sr(this.__data__,fe)>-1}function ve(fe,Te){var We=this.__data__,Jt=sr(We,fe);return Jt<0?(++this.size,We.push([fe,Te])):We[Jt][1]=Te,this}Xi.prototype.clear=Ai,Xi.prototype.delete=No,Xi.prototype.get=Go,Xi.prototype.has=po,Xi.prototype.set=ve;function ce(fe){var Te=-1,We=fe==null?0:fe.length;for(this.clear();++Te<We;){var Jt=fe[Te];this.set(Jt[0],Jt[1])}}function xe(){this.size=0,this.__data__={hash:new ti,map:new(gi||Xi),string:new ti}}function Ve(fe){var Te=pt(this,fe).delete(fe);return this.size-=Te?1:0,Te}function ze(fe){return pt(this,fe).get(fe)}function Dt(fe){return pt(this,fe).has(fe)}function Wt(fe,Te){var We=pt(this,fe),Jt=We.size;return We.set(fe,Te),this.size+=We.size==Jt?0:1,this}ce.prototype.clear=xe,ce.prototype.delete=Ve,ce.prototype.get=ze,ce.prototype.has=Dt,ce.prototype.set=Wt;function bn(fe){var Te=this.__data__=new Xi(fe);this.size=Te.size}function ir(){this.__data__=new Xi,this.size=0}function gr(fe){var Te=this.__data__,We=Te.delete(fe);return this.size=Te.size,We}function Un(fe){return this.__data__.get(fe)}function Dr(fe){return this.__data__.has(fe)}function ni(fe,Te){var We=this.__data__;if(We instanceof Xi){var Jt=We.__data__;if(!gi||Jt.length<n-1)return Jt.push([fe,Te]),this.size=++We.size,this;We=this.__data__=new ce(Jt)}return We.set(fe,Te),this.size=We.size,this}bn.prototype.clear=ir,bn.prototype.delete=gr,bn.prototype.get=Un,bn.prototype.has=Dr,bn.prototype.set=ni;function dn(fe,Te){var We=sh(fe),Jt=!We&&yu(fe),_r=!We&&!Jt&&oh(fe),si=!We&&!Jt&&!_r&&Ex(fe),Ni=We||Jt||_r||si,wn=Ni?Ke(fe.length,String):[],vi=wn.length;for(var Pi in fe)Ni&&(Pi=="length"||_r&&(Pi=="offset"||Pi=="parent")||si&&(Pi=="buffer"||Pi=="byteLength"||Pi=="byteOffset")||zt(Pi,vi))||wn.push(Pi);return wn}function Ir(fe,Te,We){(We!==void 0&&!ol(fe[Te],We)||We===void 0&&!(Te in fe))&&ln(fe,Te,We)}function Xr(fe,Te,We){var Jt=fe[Te];(!(Q.call(fe,Te)&&ol(Jt,We))||We===void 0&&!(Te in fe))&&ln(fe,Te,We)}function sr(fe,Te){for(var We=fe.length;We--;)if(ol(fe[We][0],Te))return We;return-1}function ln(fe,Te,We){Te=="__proto__"&&un?un(fe,Te,{configurable:!0,enumerable:!0,value:We,writable:!0}):fe[Te]=We}var Br=Je();function Di(fe){return fe==null?fe===void 0?C:y:Yt&&Yt in Object(fe)?vt(fe):Ko(fe)}function xs(fe){return ba(fe)&&Di(fe)==a}function yi(fe){if(!ah(fe)||yr(fe))return!1;var Te=ew(fe)?he:W;return Te.test(Jb(fe))}function Qi(fe){return ba(fe)&&_x(fe.length)&&!!q[Di(fe)]}function Yo(fe){if(!ah(fe))return Nr(fe);var Te=ri(fe),We=[];for(var Jt in fe)Jt=="constructor"&&(Te||!Q.call(fe,Jt))||We.push(Jt);return We}function Ha(fe,Te,We,Jt,_r){fe!==Te&&Br(Te,function(si,Ni){if(_r||(_r=new bn),ah(si))Po(fe,Te,Ni,We,Ha,Jt,_r);else{var wn=Jt?Jt(ih(fe,Ni),si,Ni+"",fe,Te,_r):void 0;wn===void 0&&(wn=si),Ir(fe,Ni,wn)}},Dg)}function Po(fe,Te,We,Jt,_r,si,Ni){var wn=ih(fe,We),vi=ih(Te,We),Pi=Ni.get(vi);if(Pi){Ir(fe,We,Pi);return}var Xo=si?si(wn,vi,We+"",fe,Te,Ni):void 0,uh=Xo===void 0;if(uh){var Xs=sh(vi),Ig=!Xs&&oh(vi),kg=!Xs&&!Ig&&Ex(vi);Xo=vi,Xs||Ig||kg?sh(wn)?Xo=wn:Zb(wn)?Xo=Ie(wn):Ig?(uh=!1,Xo=te(vi)):kg?(uh=!1,Xo=ue(vi)):Xo=[]:zA(vi)||yu(vi)?(Xo=wn,yu(wn)?Xo=Ag(wn):(!ah(wn)||ew(wn))&&(Xo=It(vi))):uh=!1}uh&&(Ni.set(vi,Xo),_r(Xo,vi,Jt,si,Ni),Ni.delete(vi)),Ir(fe,We,Xo)}function Yl(fe,Te){return qy(Zc(fe,Te,jr),fe+"")}var Yf=un?function(fe,Te){return un(fe,"toString",{configurable:!0,enumerable:!1,value:ii(Te),writable:!0})}:jr;function te(fe,Te){return fe.slice()}function ye(fe){var Te=new fe.constructor(fe.byteLength);return new je(Te).set(new je(fe)),Te}function ue(fe,Te){var We=ye(fe.buffer);return new fe.constructor(We,fe.byteOffset,fe.length)}function Ie(fe,Te){var We=-1,Jt=fe.length;for(Te||(Te=Array(Jt));++We<Jt;)Te[We]=fe[We];return Te}function Oe(fe,Te,We,Jt){var _r=!We;We||(We={});for(var si=-1,Ni=Te.length;++si<Ni;){var wn=Te[si],vi=void 0;vi===void 0&&(vi=fe[wn]),_r?ln(We,wn,vi):Xr(We,wn,vi)}return We}function De(fe){return Yl(function(Te,We){var Jt=-1,_r=We.length,si=_r>1?We[_r-1]:void 0,Ni=_r>2?We[2]:void 0;for(si=fe.length>3&&typeof si=="function"?(_r--,si):void 0,Ni&&Qn(We[0],We[1],Ni)&&(si=_r<3?void 0:si,_r=1),Te=Object(Te);++Jt<_r;){var wn=We[Jt];wn&&fe(Te,wn,Jt,si)}return Te})}function Je(fe){return function(Te,We,Jt){for(var _r=-1,si=Object(Te),Ni=Jt(Te),wn=Ni.length;wn--;){var vi=Ni[++_r];if(We(si[vi],vi,si)===!1)break}return Te}}function pt(fe,Te){var We=fe.__data__;return sn(Te)?We[typeof Te=="string"?"string":"hash"]:We.map}function yt(fe,Te){var We=wt(fe,Te);return yi(We)?We:void 0}function vt(fe){var Te=Q.call(fe,Yt),We=fe[Yt];try{fe[Yt]=void 0;var Jt=!0}catch{}var _r=_e.call(fe);return Jt&&(Te?fe[Yt]=We:delete fe[Yt]),_r}function It(fe){return typeof fe.constructor=="function"&&!ri(fe)?Ki(ct(fe)):{}}function zt(fe,Te){var We=typeof fe;return Te=Te??o,!!Te&&(We=="number"||We!="symbol"&&K.test(fe))&&fe>-1&&fe%1==0&&fe<Te}function Qn(fe,Te,We){if(!ah(We))return!1;var Jt=typeof Te;return(Jt=="number"?Wy(We)&&zt(Te,We.length):Jt=="string"&&Te in We)?ol(We[Te],fe):!1}function sn(fe){var Te=typeof fe;return Te=="string"||Te=="number"||Te=="symbol"||Te=="boolean"?fe!=="__proto__":fe===null}function yr(fe){return!!de&&de in fe}function ri(fe){var Te=fe&&fe.constructor,We=typeof Te=="function"&&Te.prototype||St;return fe===We}function Nr(fe){var Te=[];if(fe!=null)for(var We in Object(fe))Te.push(We);return Te}function Ko(fe){return _e.call(fe)}function Zc(fe,Te,We){return Te=Bn(Te===void 0?fe.length-1:Te,0),function(){for(var Jt=arguments,_r=-1,si=Bn(Jt.length-Te,0),Ni=Array(si);++_r<si;)Ni[_r]=Jt[Te+_r];_r=-1;for(var wn=Array(Te+1);++_r<Te;)wn[_r]=Jt[_r];return wn[Te]=We(Ni),Ze(fe,this,wn)}}function ih(fe,Te){if(!(Te==="constructor"&&typeof fe[Te]=="function")&&Te!="__proto__")return fe[Te]}var qy=Mp(Yf);function Mp(fe){var Te=0,We=0;return function(){var Jt=Ci(),_r=s-(Jt-We);if(We=Jt,_r>0){if(++Te>=i)return arguments[0]}else Te=0;return fe.apply(void 0,arguments)}}function Jb(fe){if(fe!=null){try{return ht.call(fe)}catch{}try{return fe+""}catch{}}return""}function ol(fe,Te){return fe===Te||fe!==fe&&Te!==Te}var yu=xs(function(){return arguments}())?xs:function(fe){return ba(fe)&&Q.call(fe,"callee")&&!qt.call(fe,"callee")},sh=Array.isArray;function Wy(fe){return fe!=null&&_x(fe.length)&&!ew(fe)}function Zb(fe){return ba(fe)&&Wy(fe)}var oh=Sn||Sx;function ew(fe){if(!ah(fe))return!1;var Te=Di(fe);return Te==h||Te==p||Te==l||Te==w}function _x(fe){return typeof fe=="number"&&fe>-1&&fe%1==0&&fe<=o}function ah(fe){var Te=typeof fe;return fe!=null&&(Te=="object"||Te=="function")}function ba(fe){return fe!=null&&typeof fe=="object"}function zA(fe){if(!ba(fe)||Di(fe)!=b)return!1;var Te=ct(fe);if(Te===null)return!0;var We=Q.call(Te,"constructor")&&Te.constructor;return typeof We=="function"&&We instanceof We&&ht.call(We)==oe}var Ex=ke?Ct(ke):Qi;function Ag(fe){return Oe(fe,Dg(fe))}function Dg(fe){return Wy(fe)?dn(fe):Yo(fe)}var xx=De(function(fe,Te,We){Ha(fe,Te,We)});function ii(fe){return function(){return fe}}function jr(fe){return fe}function Sx(){return!1}e.exports=xx})(jL,jL.exports);var Jwt=jL.exports;const fte=zf(Jwt);function f1(e){return structuredClone(e)}function dte(){const e=Dy(),n=`${Cb()}_${e}`;return Fs(i=>i.answers[n])}const gRe=P.createContext(null);function Zwt(){const e=P.useContext(gRe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function ey(){return Fs(e=>e.config)}function Rge(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function yRe(){const e=Dy(),t=cte(),r=`${Cb()}_${e}`,i=Fs(T=>T.trialValidation),s=Fs(T=>T.sequence),o=Fs(T=>T.answers),a=Fs(T=>T.modes),u=Ep(),{saveTrialAnswer:l,setIframeAnswers:c}=Ld(),{storageEngine:f}=Wo(),d=GE(),h=P.useMemo(()=>a.dataCollectionEnabled,[a]),p=Xwt(r),m=typeof e!="number"||!p,g=dte(),y=wp(),b=ey(),w=P.useMemo(()=>Date.now(),[]),S=Zwt(),E=P.useCallback((T=!0)=>{if(typeof e!="number")return;const C=f1(i[r]),A=Object.values(C).reduce((B,z)=>Object.hasOwn(z,"values")?{...B,...z.values}:B,{}),{provenanceGraph:I}=C,k=Date.now(),N=S&&"current"in S&&S.current?S.current.splice(0,S.current.length):[];if(h&&g.endTime===-1){const B={answer:T?A:{},startTime:w,endTime:k,provenanceGraph:I,windowEvents:N,timedOut:!T};u(l({identifier:r,...B})),f&&f.saveAnswers({...o,[r]:B}),u(c({}))}let F=e+1;const M=ute(s,e),L=M!==null&&M.some(B=>Object.hasOwn(B.currentBlock,"skip")&&B.currentBlock.skip!==void 0),j={...o,[r]:{answer:A,startTime:w,endTime:k,provenanceGraph:I,windowEvents:N}};L&&[...M.flatMap(z=>z.currentBlock.skip?z.currentBlock.skip.map(V=>({...V,firstIndex:z.firstIndex,lastIndex:z.lastIndex})):[])].some(z=>{let V=!1;const G=Object.fromEntries(Object.entries(j).filter(([W])=>{const K=parseInt(W.slice(W.lastIndexOf("_")+1),10);return K>=z.firstIndex&&K<=e})),$=z.check!=="block"?Object.entries(G).filter(([W])=>W.slice(0,W.lastIndexOf("_"))===z.name):Object.entries(G);if($.length===0)return!1;if($.some(([W,K])=>!K))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(z,null,2)}`);if(z.check==="response"||z.check==="responses"){const[W,K]=$[0];z.check==="response"?V=z.comparison==="equal"?z.value===K.answer[z.responseId]:z.value!==K.answer[z.responseId]:V=!Rge(K.answer,W,b.components[W.slice(0,W.lastIndexOf("_"))],b)}else if(z.check==="block"||z.check==="repeatedComponent"){if($.length<z.value)return!1;const W=$.map(([Y,Z])=>Rge(Z.answer,Y,b.components[Y.slice(0,Y.lastIndexOf("_"))],b)),K=W.filter(Y=>Y).length,q=W.length-K;V=z.condition==="numCorrect"&&K===z.value||z.condition==="numIncorrect"&&q===z.value}if(V){const W=t.indexOf(z.to),K=W===-1?Ywt(s,z.to):-1;return F=W===-1?K:W,!0}return!1}),y(`/${d}/${F}${window.location.search}`)},[e,i,r,S,h,g==null?void 0:g.endTime,s,o,w,y,d,u,l,f,c,b,t]);return{isNextDisabled:m,goToNextStep:E}}function e_t({label:e="Next",disabled:t=!1,onClick:n,configInUse:r}){const{isNextDisabled:i,goToNextStep:s}=yRe(),o=ey(),a=wp(),u=P.useCallback(()=>{n&&n(),s()},[s,n]),l=r==null?void 0:r.nextButtonDisableTime,c=(r==null?void 0:r.nextButtonEnableTime)||0,[f,d]=P.useState(void 0);P.useEffect(()=>{let p=0;const m=setInterval(()=>{p+=100,d(p)},500);return()=>{clearInterval(m)}},[]),P.useEffect(()=>{f&&l&&f>=l&&o.uiConfig.timeoutReject&&a("./__timeout")},[l,f,a,o.uiConfig.timeoutReject]);const h=P.useMemo(()=>{const p=l&&f?f<=l:!0,m=f?f>=c:!0;return p&&m},[l,c,f]);return _.jsxs(_.Fragment,{children:[_.jsx(Mn,{type:"submit",disabled:t||i||!h,onClick:u,children:e}),c>0&&f&&f<c&&_.jsxs(k0,{mt:"md",title:"Please wait",color:"blue",icon:_.jsx(Oee,{}),children:["The next button will be enabled in"," ",Math.ceil((c-f)/1e3)," ","seconds."]}),l&&f&&l-f<1e4&&(l-f>0?_.jsxs(k0,{mt:"md",title:"Next button disables soon",color:"yellow",icon:_.jsx(kL,{}),children:["The next button disables in"," ",Math.ceil((l-f)/1e3)," ","seconds."]}):!o.uiConfig.timeoutReject&&_.jsxs(k0,{mt:"md",title:"Next button disabled",color:"red",icon:_.jsx(kL,{}),children:["The next button has timed out and is now disabled.",_.jsx(qi,{justify:"right",mt:"sm",children:_.jsx(Mn,{onClick:()=>s(!1),variant:"link",color:"red",children:"Proceed"})})]}))]})}function t_t(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const n_t=typeof window<"u"?P.useLayoutEffect:P.useEffect;function Wa(e,t){n_t(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function r_t(e,t){e&&t_t(e),Wa(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),Wa(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),Wa(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),Wa(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),Wa(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),Wa(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),Wa(`mantine-form:${e}:clear-errors`,t.clearErrors),Wa(`mantine-form:${e}:reset`,t.reset),Wa(`mantine-form:${e}:validate`,t.validate),Wa(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),Wa(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),Wa(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),Wa(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),Wa(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),Wa(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),Wa(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),Wa(`mantine-form:${e}:reset-touched`,t.resetTouched)}function i_t(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function SG(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function s_t(e){const[t,n]=P.useState(SG(e)),r=P.useRef(t),i=P.useCallback(u=>{n(l=>{const c=SG(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=P.useCallback(()=>i({}),[]),o=P.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=P.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function vRe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Nge(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Pge(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=vRe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Nge(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Nge(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function o_t(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Oge(e,t,n){typeof n.value=="object"&&(n.value=WS(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function WS(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(WS(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(WS(a),WS(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(WS(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Oge(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Oge(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function bRe(e){return typeof e!="string"?[]:e.split(".")}function _c(e,t){const n=bRe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function cB(e,t,n){const r=bRe(e);if(r.length===0)return n;const i=WS(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function a_t(e,{from:t,to:n},r){const i=_c(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),cB(e,s,r)}function u_t(e,t,n,r){const i=_c(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),cB(e,s,r)}function l_t(e,t,n){const r=_c(e,n);return Array.isArray(r)?cB(e,r.filter((i,s)=>s!==t),n):n}function c_t({$values:e,$errors:t,$status:n}){const r=P.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>o_t(o,a,u)),e.setValues({values:a_t(o,a,e.refValues.current),updateState:!0})},[]),i=P.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Pge(o,a,u,-1)),e.setValues({values:l_t(o,a,e.refValues.current),updateState:!0})},[]),s=P.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>Pge(o,u,l,1)),e.setValues({values:u_t(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var hte=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const G$=zf(hte);function uM(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function f_t({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=P.useState(t),[o,a]=P.useState(e),u=P.useRef(t),l=P.useRef(e),c=P.useCallback(E=>{const T=typeof E=="function"?E(u.current):E;u.current=T,n==="controlled"&&s(T)},[]),f=P.useCallback(E=>{const T=typeof E=="function"?E(l.current):E;l.current=T,n==="controlled"&&a(T)},[]),d=P.useCallback(()=>c({}),[]),h=E=>{const T=E?{...E,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(T),f({})},p=P.useCallback((E,T)=>{c(C=>uM(C,E)===T?C:{...C,[E]:T})},[]),m=P.useCallback((E,T)=>{f(C=>uM(C,E)===T?C:{...C,[E]:T})},[]),g=P.useCallback(E=>uM(u.current,E),[]),y=P.useCallback(E=>f(T=>{if(typeof E!="string")return T;const C=vRe(E,T);return delete C[E],G$(C,T)?T:C}),[]),b=P.useCallback(E=>{if(E){const C=_c(E,l.current);if(typeof C=="boolean")return C;const A=_c(E,r.refValues.current),I=_c(E,r.valuesSnapshot.current);return!G$(A,I)}return Object.keys(l.current).length>0?uM(l.current):!G$(r.refValues.current,r.valuesSnapshot.current)},[]),w=P.useCallback(()=>l.current,[]),S=P.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:b,getDirty:w,getTouched:S}}function d_t({initialValues:e,onValuesChange:t,mode:n}){const r=P.useRef(!1),[i,s]=P.useState(e||{}),o=P.useRef(i),a=P.useRef(i),u=P.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const b=o.current,w=p instanceof Function?p(o.current):p,S=y?{...b,...w}:w;o.current=S,g&&s(S),t==null||t(S,b),m==null||m.filter(Boolean).forEach(E=>E({updatedValues:S,previousValues:b}))},[t]),l=P.useCallback(p=>{var y;const m=_c(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const b=o.current,w=cB(p.path,g,o.current);u({values:w,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(S=>S({path:p.path,updatedValues:w,previousValues:b}))}},[]),c=P.useCallback(p=>{a.current=p},[]),f=P.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=P.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=P.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function h_t({$status:e}){const t=P.useRef({}),n=P.useCallback((i,s)=>{P.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=P.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:_c(i,o.previousValues),value:_c(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Mge(e,t){return e?`${e}-${t.toString()}`:t.toString()}function $ge(e){const t=SG(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function TG(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=_c(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>TG(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||TG(o,t,a,i)),i},r)}function CG(e,t){return $ge(typeof e=="function"?e(t):TG(e,t))}function lM(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=CG(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const p_t="__MANTINE_FORM_INDEX__";function Fge(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${p_t}`)):!1:!1}function wRe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=s_t(r),p=d_t({initialValues:n,onValuesChange:l,mode:t}),m=f_t({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=c_t({$values:p,$errors:h,$status:m}),y=h_t({$status:m}),[b,w]=P.useState(0),[S,E]=P.useState({}),T=P.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&w($=>$+1)},[]),C=P.useCallback($=>{p.initialize($,()=>t==="uncontrolled"&&w(W=>W+1))},[]),A=P.useCallback(($,W,K)=>{const q=Fge($,a);m.clearFieldDirty($),m.setFieldTouched($,!0),!q&&o&&h.clearFieldError($),p.setFieldValue({path:$,value:W,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers($),q?Y=>{const Z=lM($,d,Y.updatedValues);Z.hasError?h.setFieldError($,Z.error):h.clearFieldError($)}:null,(K==null?void 0:K.forceUpdate)!==!1&&t!=="controlled"?()=>E(Y=>({...Y,[$]:(Y[$]||0)+1})):null]})},[l,d]),I=P.useCallback($=>{const W=p.refValues.current;p.setValues({values:$,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&w(K=>K+1),Object.keys(y.subscribers.current).forEach(K=>{const q=_c(K,p.refValues.current),Y=_c(K,W);q!==Y&&y.getFieldSubscribers(K).forEach(Z=>Z({previousValues:W,updatedValues:p.refValues.current}))})},[l,o]),k=P.useCallback(()=>{const $=CG(d,p.refValues.current);return h.setErrors($.errors),$},[d]),N=P.useCallback($=>{const W=lM($,d,p.refValues.current);return W.hasError?h.setFieldError($,W.error):h.clearFieldError($),W},[d]),F=($,{type:W="input",withError:K=!0,withFocus:q=!0,...Y}={})=>{const ae={onChange:i_t(be=>A($,be,{forceUpdate:!1})),"data-path":Mge(e,$)};return K&&(ae.error=h.errorsState[$]),W==="checkbox"?ae[t==="controlled"?"checked":"defaultChecked"]=_c($,p.refValues.current):ae[t==="controlled"?"value":"defaultValue"]=_c($,p.refValues.current),q&&(ae.onFocus=()=>m.setFieldTouched($,!0),ae.onBlur=()=>{if(Fge($,u)){const be=lM($,d,p.refValues.current);be.hasError?h.setFieldError($,be.error):h.clearFieldError($)}}),Object.assign(ae,f==null?void 0:f({inputProps:ae,field:$,options:{type:W,withError:K,withFocus:q,...Y},form:G}))},M=($,W)=>K=>{K==null||K.preventDefault();const q=k();q.hasErrors?W==null||W(q.errors,p.refValues.current,K):$==null||$(c(p.refValues.current),K)},L=$=>c($||p.refValues.current),j=P.useCallback($=>{$.preventDefault(),T()},[]),B=P.useCallback($=>$?!lM($,d,p.refValues.current).hasError:!CG(d,p.refValues.current).hasErrors,[d]),z=$=>`${b}-${$}-${S[$]||0}`,V=P.useCallback($=>document.querySelector(`[data-path="${Mge(e,$)}"]`),[]),G={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:C,setValues:I,setFieldValue:A,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:T,validate:k,validateField:N,getInputProps:F,onSubmit:M,onReset:j,isValid:B,getTransformedValues:L,key:z,getInputNode:V};return r_t(e,G),G}function m_t(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function g_t(e){return m_t(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function _Re(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const y_t=new URLSearchParams(window.location.search),v_t=(e,t)=>{let n={};return e.forEach(r=>{const i=t[r.id];if(i)n={...n,[r.id]:i};else{let s="";r.paramCapture?s=y_t.get(r.paramCapture):r.type==="iframe"?s=[]:(r.type==="matrix-radio"||r.type==="matrix-checkbox")&&(s=Object.fromEntries(r.questionOptions.map(o=>[o,""]))),n={...n,[r.id]:s}}}),{...n}},b_t=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return Object.values(r).every(i=>i!=="")?null:"Empty Input";if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return n.type==="checkbox"?_Re(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function w_t(e,t,n){const[r,i]=P.useState(null),s=wRe({initialValues:v_t(e,n),validate:b_t(e)});return P.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function YE(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=_Re(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function __t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=a.map(c=>typeof c=="string"?{value:c,label:c}:c);return _.jsx(wc.Group,{label:_.jsxs(Zt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ne,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ne,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Xu,{text:s,required:o})})]}),description:u,...n,error:YE(e,n,l),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(qi,{mt:"xs",children:l.map(c=>_.jsx(wc,{disabled:t,value:c.value,label:c.label},c.value))})})}function E_t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return _.jsx(uP,{disabled:t,label:_.jsxs(Zt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ne,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ne,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Xu,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:YE(e,n,c)})}function x_t({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return _.jsx(ws.Wrapper,{label:_.jsxs(Zt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&_.jsx(Ne,{style:{minWidth:"fit-content"},children:`${n}. `}),_.jsx(Ne,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Xu,{text:i,required:s})})]}),description:o,size:"md",children:t.value&&_.jsx(ep,{children:Array.isArray(t.value)?t.value.map(a=>_.jsx(ep.Item,{children:a},a)):_.jsx(ep.Item,{children:t.value})})})}function ERe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,stretch:s}){const{prompt:o,required:a,options:u,leftLabel:l,rightLabel:c,secondaryText:f}=e,d=u.map(h=>typeof h=="string"?{value:h,label:h}:h);return _.jsx(K0.Group,{name:`radioInput${e.id}`,label:_.jsxs(Zt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ne,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ne,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Xu,{text:o,required:a})})]}),description:f,...n,error:YE(e,n,d),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsxs(qi,{mt:"md",gap:"lg",style:{display:"flex",alignItems:"flex-end",justifyContent:s?"space-around":"inherit"},children:[l?_.jsx(gt,{children:l}):null,d.map(h=>_.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[_.jsx(gt,{children:h.label}),_.jsx(K0,{disabled:t,value:h.value,label:h.label,styles:{label:{display:"none"}}})]},h.label)),_.jsx(gt,{children:c})]})},e.id)}function S_t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return _.jsx(ERe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i,stretch:!0})}function T_t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return _.jsx(cee,{disabled:t,placeholder:l,label:_.jsxs(Zt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ne,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ne,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Xu,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:YE(e,n)})}function C_t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=YE(e,n);return _.jsx(ws.Wrapper,{label:_.jsxs(Zt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ne,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ne,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Xu,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(Y8,{disabled:t,marks:a,...n,h:40})})}function A_t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(y0,{disabled:t,placeholder:s,label:_.jsxs(Zt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ne,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ne,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Xu,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:YE(e,n)})}function D_t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(QZ,{disabled:t,placeholder:s,label:_.jsxs(Zt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ne,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ne,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Xu,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:YE(e,n)})}function I_t({_choices:e,_n:t,idx:n,question:r,answer:i,onChange:s,disabled:o}){return _.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(a=>_.jsx(wc,{disabled:o,checked:i.value[r.label].split("|").includes(a.value),onChange:u=>s(u,r.label,a)},`${a.label}-${n}`))})}function k_t({_choices:e,_n:t,idx:n,question:r,response:i,answer:s,onChange:o,disabled:a}){return _.jsx(K0.Group,{name:`radioInput${i.id}-${n}`,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))",flex:1},onChange:u=>o(u,r.label),value:s.value[r.label],children:_.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(u=>_.jsx(K0,{disabled:a,value:u.value},`${u.label}-${n}`))})},`${i.id}-${n}`)}function R_t({response:e,answer:t,index:n,disabled:r,enumerateQuestions:i}){const{setMatrixAnswersRadio:s,setMatrixAnswersCheckbox:o}=Ld(),a=Ep(),{answerOptions:u,questionOptions:l,prompt:c,required:f}=e,h=typeof u=="string"?{likely5:["Highly Unlikely","Unlikely","Neutral","Likely","Highly Likely"],likely7:["Highly Unlikely","Unlikely","Slightly Unlikely","Neutral","Slightly Likely","Likely","Highly Likely"],satisfaction5:["Highly Unsatisfied","Unsatisfied","Neutral","Satisfied","Highly Satisfied"],satisfaction7:["Highly Unsatisfied","Unsatisfied","Slightly Unsatisfied","Neutral","Slightly Satisfied","Satisfied","Highly Satisfied"]}[u].map(w=>({value:w,label:w})):u.map(w=>typeof w=="string"?{value:w,label:w}:w),p=l.map(w=>typeof w=="string"?{value:w,label:w}:w),m=(w,S)=>{const E={type:"radio",questionKey:S,val:w,responseId:e.id};a(s(E))},g=(w,S,E)=>{const T=w.target.checked,C={questionKey:S,responseId:e.id,value:E.value,label:E.label,isChecked:T,choiceOptions:h};a(o(C))},y=h.length,b=p.length;return _.jsxs(_.Fragment,{children:[_.jsxs(Zt,{direction:"row",wrap:"nowrap",gap:0,children:[i&&_.jsx(Ne,{style:{minWidth:"fit-content"},children:`${n}. `}),_.jsx(Ne,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Xu,{text:c,required:f})})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto 1fr",margin:"40px 100px 100px 100px"},children:[_.jsx("div",{style:{borderBottom:"1px solid var(--mantine-color-dark-0)",borderRight:"1px solid var(--mantine-color-dark-0)"}}),_.jsx("div",{style:{height:"100%",display:"grid",gridTemplateColumns:`repeat(${y}, 1fr)`,alignItems:"center",justifyItems:"center",borderBottom:"1px solid var(--mantine-color-dark-0)"},children:h.map((w,S)=>_.jsx(gt,{style:{fontWeight:"bold",textAlign:"center",fontSize:"0.8em"},mb:"sm",ml:"xs",mr:"xs",children:w.label},`choice-${S}-label`))}),_.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${b}, 1fr)`},children:p.map((w,S)=>_.jsx(gt,{style:{height:"60px",display:"flex",alignItems:"center",borderRight:"1px solid var(--mantine-color-dark-0)",backgroundColor:`${(S+1)%2===0?"var(--mantine-color-gray-2)":"white"}`,paddingLeft:"10px"},children:w.label},`question-${S}-label`))}),_.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${b},1fr)`},children:p.map((w,S)=>_.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",backgroundColor:`${(S+1)%2===0?"var(--mantine-color-gray-2)":"white"}`},children:e.type==="matrix-radio"?_.jsx(k_t,{disabled:r,idx:S,question:w,answer:t,_choices:h,_n:y,onChange:m,response:e}):_.jsx(I_t,{disabled:r,idx:S,question:w,answer:t,_choices:h,_n:y,onChange:g})},`question-${S}`))})]})]})}function N_t({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=Nee(),u=ey().uiConfig.enumerateQuestions??!1,l=P.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return _.jsxs(Ne,{mb:"md",children:[e.type==="numerical"&&_.jsx(T_t,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&_.jsx(A_t,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&_.jsx(D_t,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&_.jsx(S_t,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&_.jsx(E_t,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&_.jsx(C_t,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&_.jsx(ERe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&_.jsx(__t,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&_.jsx(x_t,{response:e,answer:i,index:r,enumerateQuestions:u}),(e.type==="matrix-radio"||e.type==="matrix-checkbox")&&_.jsx(R_t,{disabled:l,response:e,answer:i,index:r,enumerateQuestions:u})]})}function UL({config:e,location:t,status:n,style:r}){var z;const{storageEngine:i}=Wo(),s=Ep(),{updateResponseBlockValidation:o,toggleShowHelpText:a}=Ld(),u=Dy(),l=Cb(),c=n==null?void 0:n.answer,f=GE(),d=wp(),h=e,p=P.useMemo(()=>{var V;return((V=h==null?void 0:h.response)==null?void 0:V.filter(G=>G.location?G.location===t:t==="belowStimulus"))||[]},[h==null?void 0:h.response,t]),m=w_t(p,u,c||{}),[g,y]=P.useState(void 0),b=Fs(V=>V.iframeAnswers),w=Fs(V=>V.iframeProvenance),S=Fs(V=>V.matrixAnswers),E=(h==null?void 0:h.provideFeedback)&&(((z=h==null?void 0:h.correctAnswer)==null?void 0:z.length)||0)>0,T=(h==null?void 0:h.allowFailedTraining)===void 0?!0:h.allowFailedTraining,[C,A]=P.useState(0),I=(h==null?void 0:h.trainingAttempts)||2,[k,N]=P.useState(!1),F=t===((h==null?void 0:h.nextButtonLocation)||"belowStimulus");P.useEffect(()=>{const V=p.find(G=>G.type==="iframe");if(b&&V){const G=V.id;m.setValues({...m.values,[G]:b[G]})}},[b]),P.useEffect(()=>{w&&y(w)},[w]),P.useEffect(()=>{const V=p.filter(G=>G.type==="matrix-radio"||G.type==="matrix-checkbox");if(S&&V.length>0){const G={...m.values};V.forEach($=>{const{id:W}=$;G[W]={...m.getInputProps(W).value,...S[W]}}),m.setValues(G)}},[S]),P.useEffect(()=>{s(o({location:t,identifier:`${l}_${u}`,status:m.isValid(),values:f1(m.values),provenanceGraph:g}))},[m.values,l,u,t,s,o,g]);const[M,L]=P.useState(Object.fromEntries(p.map(V=>[V.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),j=(V,G,$,W,K)=>{L(q=>({...q,[V]:{visible:G,title:$,message:W,color:K}}))},B=()=>{const V=C+1;A(V);const G=Object.fromEntries(p.map($=>{var q,Y;const W=(Y=(q=h.correctAnswer)==null?void 0:q.find(Z=>Z.id===$.id))==null?void 0:Y.answer,K=m.values[$.id];return[$.id,Array.isArray(K)?typeof W=="string"?K.length===1&&W===K[0]:K.length===W.length&&K.every(Z=>W.includes(Z)):W===K]}));E&&(p.forEach($=>{var W;if(G[$.id]&&!((W=M[$.id])!=null&&W.message.includes("You've failed to answer this question correctly")))j($.id,!0,"Correct Answer","You have answered the question correctly.","green");else{let K="";V>=I?(K=`You didn't answer this question correctly after ${I} attempts. ${T?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!T&&i&&i.rejectCurrentParticipant(f,"Failed training").then(()=>{setTimeout(()=>{d("./__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{d("./__trainingFailed")},5e3)})):I-V===1?K="Please try again. You have 1 attempt left.":K=`Please try again. You have ${I-V} attempts left.`,j($.id,!0,"Incorrect Answer",K,"red")}}),N(T&&V>=I||Object.values(G).every($=>$)&&V<=I))};return _.jsxs("div",{style:r,children:[p.map((V,G)=>{var W,K;const $=(K=(W=h.correctAnswer)==null?void 0:W.find(q=>q.id===V.id))==null?void 0:K.answer;return _.jsx(xi.Fragment,{children:V.hidden?"":_.jsxs(_.Fragment,{children:[_.jsx(N_t,{storedAnswer:c?c[V.id]:void 0,answer:{...m.getInputProps(V.id,{type:V.type==="checkbox"?"checkbox":"input"})},response:V,index:G+1}),M[V.id].visible&&_.jsxs(k0,{mb:"md",title:M[V.id].title,color:M[V.id].color,children:[M[V.id].message," ",M[V.id].message.includes("Please try again")&&_.jsxs(_.Fragment,{children:["Please"," ",_.jsx(BE,{style:{fontSize:14},onClick:()=>s(a()),children:"click here"})," ","and read the help text carefully."]}),_.jsx("br",{}),_.jsx("br",{}),C>=I&&$&&` The correct answer was: ${$}.`]})]})},`${V.id}-${u}`)}),_.jsxs(qi,{justify:"right",gap:"xs",children:[E&&F&&_.jsx(Mn,{onClick:()=>B(),disabled:!m.isValid()||C>=I,children:"Check Answer"}),F&&_.jsx(e_t,{disabled:E&&!k||!m.isValid(),label:h.nextButtonText||"Next"})]})]})}const wD="@REVISIT_COMMS",P_t={minHeight:"500px",width:"100%",border:0};function O_t({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=Ld(),r=Ep(),i=Kke(),s=P.useRef(null),o=P.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Cb(),u=wp(),l=P.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${wD}/${c}`,iframeId:o,message:f},"*")},[s,o]);return P.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${wD}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${wD}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${wD}/ANSWERS`:r(t(d.message));break;case`${wD}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),_.jsx("iframe",{ref:s,src:e.path.startsWith("http")?e.path:`${Rl}${e.path}?trialid=${a}&id=${o}`,style:P_t})}async function pte(e){const n=await(await fetch(`${Rl}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function Y_({email:e,path:t}){const n=xb();return _.jsxs(Fd,{fluid:!0,my:50,maw:800,mx:"auto",children:[_.jsx(Os,{order:2,children:_.jsx(gt,{span:!0,c:"orange",children:"404"})}),_.jsxs(gt,{children:[_.jsx(gt,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),_.jsx(xf,{h:"lg"}),_.jsxs(ep,{children:[_.jsx(ep.Item,{children:_.jsx(gt,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),_.jsx(ep.Item,{children:_.jsxs(gt,{children:["If you're a participant, please contact the study administrator"," ",e&&_.jsxs(_.Fragment,{children:["at"," ",_.jsxs(BE,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const M_t={maxWidth:"100%"};function $_t({currentConfig:e}){const t={...M_t,...e.style},[n,r]=P.useState(!0),[i,s]=P.useState(!1);return P.useEffect(()=>{async function o(){const a=await pte(e.path);s(!!a),r(!1)}o()},[e]),n||i?_.jsx(Eb,{mx:"auto",src:`${Rl}${e.path}`,style:t}):_.jsx(Y_,{path:e.path})}function R0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function F_t(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function KE(e){let t,n,r;e.length!==2?(t=R0,n=(a,u)=>R0(e(a),u),r=(a,u)=>e(a)-u):(t=e===R0||e===F_t?e:L_t,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function L_t(){return 0}function xRe(e){return e===null?NaN:+e}function*B_t(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const SRe=KE(R0),P1=SRe.right,j_t=SRe.left;KE(xRe).center;function U_t(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function z_t(e,t){const n=U_t(e,t);return n&&Math.sqrt(n)}function zL(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Nl{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Lge extends Map{constructor(t,n=ARe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(AG(this,t))}has(t){return super.has(AG(this,t))}set(t,n){return super.set(TRe(this,t),n)}delete(t){return super.delete(CRe(this,t))}}class VL extends Set{constructor(t,n=ARe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(AG(this,t))}add(t){return super.add(TRe(this,t))}delete(t){return super.delete(CRe(this,t))}}function AG({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function TRe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function CRe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function ARe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function V_t(e,t){return Array.from(t,n=>e[n])}function H_t(e=R0){if(e===R0)return DRe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function DRe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const q_t=Math.sqrt(50),W_t=Math.sqrt(10),G_t=Math.sqrt(2);function HL(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=q_t?10:s>=W_t?5:s>=G_t?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?HL(e,t,n*2):[a,u,l]}function DG(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?HL(t,e,n):HL(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function IG(e,t,n){return t=+t,e=+e,n=+n,HL(e,t,n)[2]}function O1(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?IG(t,e,n):IG(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function N0(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function kG(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function IRe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?DRe:H_t(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));IRe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(_D(e,n,t),i(e[r],s)>0&&_D(e,n,r);o<a;){for(_D(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?_D(e,n,a):(++a,_D(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function _D(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function RG(e,t,n){if(e=Float64Array.from(B_t(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return kG(e);if(t>=1)return N0(e);var r,i=(r-1)*t,s=Math.floor(i),o=N0(IRe(e,s).subarray(0,s+1)),a=kG(e.subarray(s+1));return o+(a-o)*(i-s)}}function kRe(e,t,n=xRe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function Y_t(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function RRe(e,t){return RG(e,.5,t)}function*K_t(e){for(const t of e)yield*t}function NRe(e){return Array.from(K_t(e))}function Ec(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function PRe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function X_t(e,...t){e=new VL(e),t=t.map(Q_t);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Q_t(e){return e instanceof VL?e:new VL(e)}function J_t(...e){const t=new VL;for(const n of e)for(const r of n)t.add(r);return t}function Z_t(e){return e}var nV=1,rV=2,NG=3,pI=4,Bge=1e-6;function eEt(e){return"translate("+e+",0)"}function tEt(e){return"translate(0,"+e+")"}function nEt(e){return t=>+e(t)}function rEt(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function iEt(){return!this.__axis}function ORe(e,t){var n=[],r=null,i=null,s=6,o=6,a=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===nV||e===pI?-1:1,c=e===pI||e===rV?"x":"y",f=e===nV||e===NG?eEt:tEt;function d(h){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),m=i??(t.tickFormat?t.tickFormat.apply(t,n):Z_t),g=Math.max(s,0)+a,y=t.range(),b=+y[0]+u,w=+y[y.length-1]+u,S=(t.bandwidth?rEt:nEt)(t.copy(),u),E=h.selection?h.selection():h,T=E.selectAll(".domain").data([null]),C=E.selectAll(".tick").data(p,t).order(),A=C.exit(),I=C.enter().append("g").attr("class","tick"),k=C.select("line"),N=C.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),C=C.merge(I),k=k.merge(I.append("line").attr("stroke","currentColor").attr(c+"2",l*s)),N=N.merge(I.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",e===nV?"0em":e===NG?"0.71em":"0.32em")),h!==E&&(T=T.transition(h),C=C.transition(h),k=k.transition(h),N=N.transition(h),A=A.transition(h).attr("opacity",Bge).attr("transform",function(F){return isFinite(F=S(F))?f(F+u):this.getAttribute("transform")}),I.attr("opacity",Bge).attr("transform",function(F){var M=this.parentNode.__axis;return f((M&&isFinite(M=M(F))?M:S(F))+u)})),A.remove(),T.attr("d",e===pI||e===rV?o?"M"+l*o+","+b+"H"+u+"V"+w+"H"+l*o:"M"+u+","+b+"V"+w:o?"M"+b+","+l*o+"V"+u+"H"+w+"V"+l*o:"M"+b+","+u+"H"+w),C.attr("opacity",1).attr("transform",function(F){return f(S(F)+u)}),k.attr(c+"2",l*s),N.attr(c,l*g).text(m),E.filter(iEt).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===rV?"start":e===pI?"end":"middle"),E.each(function(){this.__axis=S})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(s=o=+h,d):s},d.tickSizeInner=function(h){return arguments.length?(s=+h,d):s},d.tickSizeOuter=function(h){return arguments.length?(o=+h,d):o},d.tickPadding=function(h){return arguments.length?(a=+h,d):a},d.offset=function(h){return arguments.length?(u=+h,d):u},d}function sEt(e){return ORe(NG,e)}function oEt(e){return ORe(pI,e)}var aEt={value:()=>{}};function fB(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Y$(n)}function Y$(e){this._=e}function uEt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Y$.prototype=fB.prototype={constructor:Y$,on:function(e,t){var n=this._,r=uEt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=lEt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=jge(n[i],e.name,t);else if(t==null)for(i in n)n[i]=jge(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Y$(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function lEt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function jge(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=aEt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var PG="http://www.w3.org/1999/xhtml";const Uge={svg:"http://www.w3.org/2000/svg",xhtml:PG,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function dB(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Uge.hasOwnProperty(t)?{space:Uge[t],local:e}:e}function cEt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===PG&&t.documentElement.namespaceURI===PG?t.createElement(e):t.createElementNS(n,e)}}function fEt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function MRe(e){var t=dB(e);return(t.local?fEt:cEt)(t)}function dEt(){}function mte(e){return e==null?dEt:function(){return this.querySelector(e)}}function hEt(e){typeof e!="function"&&(e=mte(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new $l(r,this._parents)}function $Re(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function pEt(){return[]}function FRe(e){return e==null?pEt:function(){return this.querySelectorAll(e)}}function mEt(e){return function(){return $Re(e.apply(this,arguments))}}function gEt(e){typeof e=="function"?e=mEt(e):e=FRe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new $l(r,i)}function LRe(e){return function(){return this.matches(e)}}function BRe(e){return function(t){return t.matches(e)}}var yEt=Array.prototype.find;function vEt(e){return function(){return yEt.call(this.children,e)}}function bEt(){return this.firstElementChild}function wEt(e){return this.select(e==null?bEt:vEt(typeof e=="function"?e:BRe(e)))}var _Et=Array.prototype.filter;function EEt(){return Array.from(this.children)}function xEt(e){return function(){return _Et.call(this.children,e)}}function SEt(e){return this.selectAll(e==null?EEt:xEt(typeof e=="function"?e:BRe(e)))}function TEt(e){typeof e!="function"&&(e=LRe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new $l(r,this._parents)}function jRe(e){return new Array(e.length)}function CEt(){return new $l(this._enter||this._groups.map(jRe),this._parents)}function qL(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}qL.prototype={constructor:qL,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function AEt(e){return function(){return e}}function DEt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new qL(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function IEt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new qL(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function kEt(e){return e.__data__}function REt(e,t){if(!arguments.length)return Array.from(this,kEt);var n=t?IEt:DEt,r=this._parents,i=this._groups;typeof e!="function"&&(e=AEt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=NEt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var b=0,w=0,S,E;b<p;++b)if(S=m[b]){for(b>=w&&(w=b+1);!(E=g[w])&&++w<p;);S._next=E||null}}return o=new $l(o,r),o._enter=a,o._exit=u,o}function NEt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function PEt(){return new $l(this._exit||this._groups.map(jRe),this._parents)}function OEt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function MEt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new $l(a,this._parents)}function $Et(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function FEt(e){e||(e=LEt);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new $l(i,this._parents).order()}function LEt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function BEt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function jEt(){return Array.from(this)}function UEt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function zEt(){let e=0;for(const t of this)++e;return e}function VEt(){return!this.node()}function HEt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function qEt(e){return function(){this.removeAttribute(e)}}function WEt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function GEt(e,t){return function(){this.setAttribute(e,t)}}function YEt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function KEt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function XEt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function QEt(e,t){var n=dB(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?WEt:qEt:typeof t=="function"?n.local?XEt:KEt:n.local?YEt:GEt)(n,t))}function URe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function JEt(e){return function(){this.style.removeProperty(e)}}function ZEt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ext(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function txt(e,t,n){return arguments.length>1?this.each((t==null?JEt:typeof t=="function"?ext:ZEt)(e,t,n??"")):mC(this.node(),e)}function mC(e,t){return e.style.getPropertyValue(t)||URe(e).getComputedStyle(e,null).getPropertyValue(t)}function nxt(e){return function(){delete this[e]}}function rxt(e,t){return function(){this[e]=t}}function ixt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function sxt(e,t){return arguments.length>1?this.each((t==null?nxt:typeof t=="function"?ixt:rxt)(e,t)):this.node()[e]}function zRe(e){return e.trim().split(/^|\s+/)}function gte(e){return e.classList||new VRe(e)}function VRe(e){this._node=e,this._names=zRe(e.getAttribute("class")||"")}VRe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function HRe(e,t){for(var n=gte(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function qRe(e,t){for(var n=gte(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function oxt(e){return function(){HRe(this,e)}}function axt(e){return function(){qRe(this,e)}}function uxt(e,t){return function(){(t.apply(this,arguments)?HRe:qRe)(this,e)}}function lxt(e,t){var n=zRe(e+"");if(arguments.length<2){for(var r=gte(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?uxt:t?oxt:axt)(n,t))}function cxt(){this.textContent=""}function fxt(e){return function(){this.textContent=e}}function dxt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function hxt(e){return arguments.length?this.each(e==null?cxt:(typeof e=="function"?dxt:fxt)(e)):this.node().textContent}function pxt(){this.innerHTML=""}function mxt(e){return function(){this.innerHTML=e}}function gxt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function yxt(e){return arguments.length?this.each(e==null?pxt:(typeof e=="function"?gxt:mxt)(e)):this.node().innerHTML}function vxt(){this.nextSibling&&this.parentNode.appendChild(this)}function bxt(){return this.each(vxt)}function wxt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _xt(){return this.each(wxt)}function Ext(e){var t=typeof e=="function"?e:MRe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function xxt(){return null}function Sxt(e,t){var n=typeof e=="function"?e:MRe(e),r=t==null?xxt:typeof t=="function"?t:mte(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Txt(){var e=this.parentNode;e&&e.removeChild(this)}function Cxt(){return this.each(Txt)}function Axt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Dxt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ixt(e){return this.select(e?Dxt:Axt)}function kxt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Rxt(e){return function(t){e.call(this,t,this.__data__)}}function Nxt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Pxt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Oxt(e,t,n){return function(){var r=this.__on,i,s=Rxt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Mxt(e,t,n){var r=Nxt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?Oxt:Pxt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function WRe(e,t,n){var r=URe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function $xt(e,t){return function(){return WRe(this,e,t)}}function Fxt(e,t){return function(){return WRe(this,e,t.apply(this,arguments))}}function Lxt(e,t){return this.each((typeof t=="function"?Fxt:$xt)(e,t))}function*Bxt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var yte=[null];function $l(e,t){this._groups=e,this._parents=t}function yP(){return new $l([[document.documentElement]],yte)}function jxt(){return this}$l.prototype=yP.prototype={constructor:$l,select:hEt,selectAll:gEt,selectChild:wEt,selectChildren:SEt,filter:TEt,data:REt,enter:CEt,exit:PEt,join:OEt,merge:MEt,selection:jxt,order:$Et,sort:FEt,call:BEt,nodes:jEt,node:UEt,size:zEt,empty:VEt,each:HEt,attr:QEt,style:txt,property:sxt,classed:lxt,text:hxt,html:yxt,raise:bxt,lower:_xt,append:Ext,insert:Sxt,remove:Cxt,clone:Ixt,datum:kxt,on:Mxt,dispatch:Lxt,[Symbol.iterator]:Bxt};function Or(e){return typeof e=="string"?new $l([[document.querySelector(e)]],[document.documentElement]):new $l([[e]],yte)}function Uxt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function WL(e,t){if(e=Uxt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function GRe(e){return typeof e=="string"?new $l([document.querySelectorAll(e)],[document.documentElement]):new $l([$Re(e)],yte)}const OG={capture:!0,passive:!1};function MG(e){e.preventDefault(),e.stopImmediatePropagation()}function zxt(e){var t=e.document.documentElement,n=Or(e).on("dragstart.drag",MG,OG);"onselectstart"in t?n.on("selectstart.drag",MG,OG):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Vxt(e,t){var n=e.document.documentElement,r=Or(e).on("dragstart.drag",null);t&&(r.on("click.drag",MG,OG),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function V2(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function vP(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ab(){}var K_=.7,gC=1/K_,bT="\\s*([+-]?\\d+)\\s*",NR="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Cm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hxt=/^#([0-9a-f]{3,8})$/,qxt=new RegExp(`^rgb\\(${bT},${bT},${bT}\\)$`),Wxt=new RegExp(`^rgb\\(${Cm},${Cm},${Cm}\\)$`),Gxt=new RegExp(`^rgba\\(${bT},${bT},${bT},${NR}\\)$`),Yxt=new RegExp(`^rgba\\(${Cm},${Cm},${Cm},${NR}\\)$`),Kxt=new RegExp(`^hsl\\(${NR},${Cm},${Cm}\\)$`),Xxt=new RegExp(`^hsla\\(${NR},${Cm},${Cm},${NR}\\)$`),zge={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};V2(Ab,X_,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Vge,formatHex:Vge,formatHex8:Qxt,formatHsl:Jxt,formatRgb:Hge,toString:Hge});function Vge(){return this.rgb().formatHex()}function Qxt(){return this.rgb().formatHex8()}function Jxt(){return YRe(this).formatHsl()}function Hge(){return this.rgb().formatRgb()}function X_(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Hxt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?qge(t):n===3?new Ra(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?cM(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?cM(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=qxt.exec(e))?new Ra(t[1],t[2],t[3],1):(t=Wxt.exec(e))?new Ra(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Gxt.exec(e))?cM(t[1],t[2],t[3],t[4]):(t=Yxt.exec(e))?cM(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Kxt.exec(e))?Yge(t[1],t[2]/100,t[3]/100,1):(t=Xxt.exec(e))?Yge(t[1],t[2]/100,t[3]/100,t[4]):zge.hasOwnProperty(e)?qge(zge[e]):e==="transparent"?new Ra(NaN,NaN,NaN,0):null}function qge(e){return new Ra(e>>16&255,e>>8&255,e&255,1)}function cM(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ra(e,t,n,r)}function vte(e){return e instanceof Ab||(e=X_(e)),e?(e=e.rgb(),new Ra(e.r,e.g,e.b,e.opacity)):new Ra}function M1(e,t,n,r){return arguments.length===1?vte(e):new Ra(e,t,n,r??1)}function Ra(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}V2(Ra,M1,vP(Ab,{brighter(e){return e=e==null?gC:Math.pow(gC,e),new Ra(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?K_:Math.pow(K_,e),new Ra(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ra(I_(this.r),I_(this.g),I_(this.b),GL(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wge,formatHex:Wge,formatHex8:Zxt,formatRgb:Gge,toString:Gge}));function Wge(){return`#${d_(this.r)}${d_(this.g)}${d_(this.b)}`}function Zxt(){return`#${d_(this.r)}${d_(this.g)}${d_(this.b)}${d_((isNaN(this.opacity)?1:this.opacity)*255)}`}function Gge(){const e=GL(this.opacity);return`${e===1?"rgb(":"rgba("}${I_(this.r)}, ${I_(this.g)}, ${I_(this.b)}${e===1?")":`, ${e})`}`}function GL(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function I_(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function d_(e){return e=I_(e),(e<16?"0":"")+e.toString(16)}function Yge(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Fh(e,t,n,r)}function YRe(e){if(e instanceof Fh)return new Fh(e.h,e.s,e.l,e.opacity);if(e instanceof Ab||(e=X_(e)),!e)return new Fh;if(e instanceof Fh)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new Fh(o,a,u,e.opacity)}function YL(e,t,n,r){return arguments.length===1?YRe(e):new Fh(e,t,n,r??1)}function Fh(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}V2(Fh,YL,vP(Ab,{brighter(e){return e=e==null?gC:Math.pow(gC,e),new Fh(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?K_:Math.pow(K_,e),new Fh(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ra(iV(e>=240?e-240:e+120,i,r),iV(e,i,r),iV(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Fh(Kge(this.h),fM(this.s),fM(this.l),GL(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=GL(this.opacity);return`${e===1?"hsl(":"hsla("}${Kge(this.h)}, ${fM(this.s)*100}%, ${fM(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Kge(e){return e=(e||0)%360,e<0?e+360:e}function fM(e){return Math.max(0,Math.min(1,e||0))}function iV(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const KRe=Math.PI/180,XRe=180/Math.PI,KL=18,QRe=.96422,JRe=1,ZRe=.82521,eNe=4/29,wT=6/29,tNe=3*wT*wT,eSt=wT*wT*wT;function nNe(e){if(e instanceof Am)return new Am(e.l,e.a,e.b,e.opacity);if(e instanceof v0)return rNe(e);e instanceof Ra||(e=vte(e));var t=uV(e.r),n=uV(e.g),r=uV(e.b),i=sV((.2225045*t+.7168786*n+.0606169*r)/JRe),s,o;return t===n&&n===r?s=o=i:(s=sV((.4360747*t+.3850649*n+.1430804*r)/QRe),o=sV((.0139322*t+.0971045*n+.7141733*r)/ZRe)),new Am(116*i-16,500*(s-i),200*(i-o),e.opacity)}function XL(e,t,n,r){return arguments.length===1?nNe(e):new Am(e,t,n,r??1)}function Am(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}V2(Am,XL,vP(Ab,{brighter(e){return new Am(this.l+KL*(e??1),this.a,this.b,this.opacity)},darker(e){return new Am(this.l-KL*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=QRe*oV(t),e=JRe*oV(e),n=ZRe*oV(n),new Ra(aV(3.1338561*t-1.6168667*e-.4906146*n),aV(-.9787684*t+1.9161415*e+.033454*n),aV(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function sV(e){return e>eSt?Math.pow(e,1/3):e/tNe+eNe}function oV(e){return e>wT?e*e*e:tNe*(e-eNe)}function aV(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function uV(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function tSt(e){if(e instanceof v0)return new v0(e.h,e.c,e.l,e.opacity);if(e instanceof Am||(e=nNe(e)),e.a===0&&e.b===0)return new v0(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*XRe;return new v0(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function QL(e,t,n,r){return arguments.length===1?tSt(e):new v0(e,t,n,r??1)}function v0(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function rNe(e){if(isNaN(e.h))return new Am(e.l,0,0,e.opacity);var t=e.h*KRe;return new Am(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}V2(v0,QL,vP(Ab,{brighter(e){return new v0(this.h,this.c,this.l+KL*(e??1),this.opacity)},darker(e){return new v0(this.h,this.c,this.l-KL*(e??1),this.opacity)},rgb(){return rNe(this).rgb()}}));var iNe=-.14861,bte=1.78277,wte=-.29227,hB=-.90649,PR=1.97294,Xge=PR*hB,Qge=PR*bte,Jge=bte*wte-hB*iNe;function nSt(e){if(e instanceof k_)return new k_(e.h,e.s,e.l,e.opacity);e instanceof Ra||(e=vte(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Jge*r+Xge*t-Qge*n)/(Jge+Xge-Qge),s=r-i,o=(PR*(n-i)-wte*s)/hB,a=Math.sqrt(o*o+s*s)/(PR*i*(1-i)),u=a?Math.atan2(o,s)*XRe-120:NaN;return new k_(u<0?u+360:u,a,i,e.opacity)}function $G(e,t,n,r){return arguments.length===1?nSt(e):new k_(e,t,n,r??1)}function k_(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}V2(k_,$G,vP(Ab,{brighter(e){return e=e==null?gC:Math.pow(gC,e),new k_(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?K_:Math.pow(K_,e),new k_(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*KRe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Ra(255*(t+n*(iNe*r+bte*i)),255*(t+n*(wte*r+hB*i)),255*(t+n*(PR*r)),this.opacity)}}));function sNe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function oNe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return sNe((n-r/t)*t,o,i,s,a)}}function aNe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return sNe((n-r/t)*t,i,s,o,a)}}const pB=e=>()=>e;function uNe(e,t){return function(n){return e+n*t}}function rSt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function mB(e,t){var n=t-e;return n?uNe(e,n>180||n<-180?n-360*Math.round(n/360):n):pB(isNaN(e)?t:e)}function iSt(e){return(e=+e)==1?Na:function(t,n){return n-t?rSt(t,n,e):pB(isNaN(t)?n:t)}}function Na(e,t){var n=t-e;return n?uNe(e,n):pB(isNaN(e)?t:e)}const OR=function e(t){var n=iSt(t);function r(i,s){var o=n((i=M1(i)).r,(s=M1(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=Na(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function lNe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=M1(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var sSt=lNe(oNe),oSt=lNe(aNe);function _te(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function cNe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function aSt(e,t){return(cNe(t)?_te:fNe)(e,t)}function fNe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Iy(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function dNe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function wd(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function hNe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Iy(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var FG=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lV=new RegExp(FG.source,"g");function uSt(e){return function(){return e}}function lSt(e){return function(t){return e(t)+""}}function Ete(e,t){var n=FG.lastIndex=lV.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=FG.exec(e))&&(i=lV.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:wd(r,i)})),n=lV.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?lSt(u[0].x):uSt(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Iy(e,t){var n=typeof t,r;return t==null||n==="boolean"?pB(t):(n==="number"?wd:n==="string"?(r=X_(t))?(t=r,OR):Ete:t instanceof X_?OR:t instanceof Date?dNe:cNe(t)?_te:Array.isArray(t)?fNe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?hNe:wd)(e,t)}function cSt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function fSt(e,t){var n=mB(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function bP(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Zge=180/Math.PI,LG={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pNe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Zge,skewX:Math.atan(u)*Zge,scaleX:o,scaleY:a}}var dM;function dSt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?LG:pNe(t.a,t.b,t.c,t.d,t.e,t.f)}function hSt(e){return e==null||(dM||(dM=document.createElementNS("http://www.w3.org/2000/svg","g")),dM.setAttribute("transform",e),!(e=dM.transform.baseVal.consolidate()))?LG:(e=e.matrix,pNe(e.a,e.b,e.c,e.d,e.e,e.f))}function mNe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:wd(l,f)},{i:m-2,x:wd(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:wd(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:wd(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:wd(l,f)},{i:m-2,x:wd(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var gNe=mNe(dSt,"px, ","px)","deg)"),yNe=mNe(hSt,", ",")",")"),pSt=1e-12;function e0e(e){return((e=Math.exp(e))+1/e)/2}function mSt(e){return((e=Math.exp(e))-1/e)/2}function gSt(e){return((e=Math.exp(2*e))-1)/(e+1)}const ySt=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<pSt)y=Math.log(d/l)/t,g=function(C){return[a+C*h,u+C*p,l*Math.exp(t*C*y)]};else{var b=Math.sqrt(m),w=(d*d-l*l+r*m)/(2*l*n*b),S=(d*d-l*l-r*m)/(2*d*n*b),E=Math.log(Math.sqrt(w*w+1)-w),T=Math.log(Math.sqrt(S*S+1)-S);y=(T-E)/t,g=function(C){var A=C*y,I=e0e(E),k=l/(n*b)*(I*gSt(t*A+E)-mSt(E));return[a+k*h,u+k*p,l*I/e0e(t*A+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function vNe(e){return function(t,n){var r=e((t=YL(t)).h,(n=YL(n)).h),i=Na(t.s,n.s),s=Na(t.l,n.l),o=Na(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const vSt=vNe(mB);var bSt=vNe(Na);function wSt(e,t){var n=Na((e=XL(e)).l,(t=XL(t)).l),r=Na(e.a,t.a),i=Na(e.b,t.b),s=Na(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function bNe(e){return function(t,n){var r=e((t=QL(t)).h,(n=QL(n)).h),i=Na(t.c,n.c),s=Na(t.l,n.l),o=Na(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const _St=bNe(mB);var ESt=bNe(Na);function wNe(e){return function t(n){n=+n;function r(i,s){var o=e((i=$G(i)).h,(s=$G(s)).h),a=Na(i.s,s.s),u=Na(i.l,s.l),l=Na(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const xSt=wNe(mB);var SSt=wNe(Na);function xte(e,t){t===void 0&&(t=e,e=Iy);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function TSt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const CSt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Iy,interpolateArray:aSt,interpolateBasis:oNe,interpolateBasisClosed:aNe,interpolateCubehelix:xSt,interpolateCubehelixLong:SSt,interpolateDate:dNe,interpolateDiscrete:cSt,interpolateHcl:_St,interpolateHclLong:ESt,interpolateHsl:vSt,interpolateHslLong:bSt,interpolateHue:fSt,interpolateLab:wSt,interpolateNumber:wd,interpolateNumberArray:_te,interpolateObject:hNe,interpolateRgb:OR,interpolateRgbBasis:sSt,interpolateRgbBasisClosed:oSt,interpolateRound:bP,interpolateString:Ete,interpolateTransformCss:gNe,interpolateTransformSvg:yNe,interpolateZoom:ySt,piecewise:xte,quantize:TSt},Symbol.toStringTag,{value:"Module"}));var yC=0,mI=0,ED=0,_Ne=1e3,JL,gI,ZL=0,Q_=0,gB=0,MR=typeof performance=="object"&&performance.now?performance:Date,ENe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function yB(){return Q_||(ENe(ASt),Q_=MR.now()+gB)}function ASt(){Q_=0}function $R(){this._call=this._time=this._next=null}$R.prototype=Ste.prototype={constructor:$R,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?yB():+n)+(t==null?0:+t),!this._next&&gI!==this&&(gI?gI._next=this:JL=this,gI=this),this._call=e,this._time=n,BG()},stop:function(){this._call&&(this._call=null,this._time=1/0,BG())}};function Ste(e,t,n){var r=new $R;return r.restart(e,t,n),r}function DSt(){yB(),++yC;for(var e=JL,t;e;)(t=Q_-e._time)>=0&&e._call.call(void 0,t),e=e._next;--yC}function t0e(){Q_=(ZL=MR.now())+gB,yC=mI=0;try{DSt()}finally{yC=0,kSt(),Q_=0}}function ISt(){var e=MR.now(),t=e-ZL;t>_Ne&&(gB-=t,ZL=e)}function kSt(){for(var e,t=JL,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:JL=n);gI=e,BG(r)}function BG(e){if(!yC){mI&&(mI=clearTimeout(mI));var t=e-Q_;t>24?(e<1/0&&(mI=setTimeout(t0e,e-MR.now()-gB)),ED&&(ED=clearInterval(ED))):(ED||(ZL=MR.now(),ED=setInterval(ISt,_Ne)),yC=1,ENe(t0e))}}function n0e(e,t,n){var r=new $R;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function RSt(e,t,n){var r=new $R,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?yB():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var NSt=fB("start","end","cancel","interrupt"),PSt=[],xNe=0,r0e=1,jG=2,K$=3,i0e=4,UG=5,X$=6;function vB(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;OSt(e,n,{name:t,index:r,group:i,on:NSt,tween:PSt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:xNe})}function Tte(e,t){var n=xp(e,t);if(n.state>xNe)throw new Error("too late; already scheduled");return n}function fg(e,t){var n=xp(e,t);if(n.state>K$)throw new Error("too late; already running");return n}function xp(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function OSt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Ste(s,0,n.time);function s(l){n.state=r0e,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==r0e)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===K$)return n0e(o);h.state===i0e?(h.state=X$,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=X$,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(n0e(function(){n.state===K$&&(n.state=i0e,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=jG,n.on.call("start",e,e.__data__,n.index,n.group),n.state===jG){for(n.state=K$,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=UG,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===UG&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=X$,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function zG(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>jG&&r.state<UG,r.state=X$,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function MSt(e){return this.each(function(){zG(this,e)})}function $St(e,t){var n,r;return function(){var i=fg(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function FSt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=fg(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function LSt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=xp(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?$St:FSt)(n,e,t))}function Cte(e,t,n){var r=e._id;return e.each(function(){var i=fg(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return xp(i,r).value[t]}}function SNe(e,t){var n;return(typeof t=="number"?wd:t instanceof X_?OR:(n=X_(t))?(t=n,OR):Ete)(e,t)}function BSt(e){return function(){this.removeAttribute(e)}}function jSt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function USt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function zSt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function VSt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function HSt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function qSt(e,t){var n=dB(e),r=n==="transform"?yNe:SNe;return this.attrTween(e,typeof t=="function"?(n.local?HSt:VSt)(n,r,Cte(this,"attr."+e,t)):t==null?(n.local?jSt:BSt)(n):(n.local?zSt:USt)(n,r,t))}function WSt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function GSt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function YSt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&GSt(e,s)),n}return i._value=t,i}function KSt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&WSt(e,s)),n}return i._value=t,i}function XSt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=dB(e);return this.tween(n,(r.local?YSt:KSt)(r,t))}function QSt(e,t){return function(){Tte(this,e).delay=+t.apply(this,arguments)}}function JSt(e,t){return t=+t,function(){Tte(this,e).delay=t}}function ZSt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?QSt:JSt)(t,e)):xp(this.node(),t).delay}function eTt(e,t){return function(){fg(this,e).duration=+t.apply(this,arguments)}}function tTt(e,t){return t=+t,function(){fg(this,e).duration=t}}function nTt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?eTt:tTt)(t,e)):xp(this.node(),t).duration}function rTt(e,t){if(typeof t!="function")throw new Error;return function(){fg(this,e).ease=t}}function iTt(e){var t=this._id;return arguments.length?this.each(rTt(t,e)):xp(this.node(),t).ease}function sTt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;fg(this,e).ease=n}}function oTt(e){if(typeof e!="function")throw new Error;return this.each(sTt(this._id,e))}function aTt(e){typeof e!="function"&&(e=LRe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new ty(r,this._parents,this._name,this._id)}function uTt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new ty(o,this._parents,this._name,this._id)}function lTt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function cTt(e,t,n){var r,i,s=lTt(t)?Tte:fg;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function fTt(e,t){var n=this._id;return arguments.length<2?xp(this.node(),n).on.on(e):this.each(cTt(n,e,t))}function dTt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function hTt(){return this.on("end.remove",dTt(this._id))}function pTt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=mte(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,vB(l[d],t,n,d,l,xp(c,n)));return new ty(s,this._parents,t,n)}function mTt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=FRe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=xp(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&vB(h,t,n,m,d,p);s.push(d),o.push(c)}return new ty(s,o,t,n)}var gTt=yP.prototype.constructor;function yTt(){return new gTt(this._groups,this._parents)}function vTt(e,t){var n,r,i;return function(){var s=mC(this,e),o=(this.style.removeProperty(e),mC(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function TNe(e){return function(){this.style.removeProperty(e)}}function bTt(e,t,n){var r,i=n+"",s;return function(){var o=mC(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function wTt(e,t,n){var r,i,s;return function(){var o=mC(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),mC(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function _Tt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=fg(this,e),l=u.on,c=u.value[s]==null?a||(a=TNe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function ETt(e,t,n){var r=(e+="")=="transform"?gNe:SNe;return t==null?this.styleTween(e,vTt(e,r)).on("end.style."+e,TNe(e)):typeof t=="function"?this.styleTween(e,wTt(e,r,Cte(this,"style."+e,t))).each(_Tt(this._id,e)):this.styleTween(e,bTt(e,r,t),n).on("end.style."+e,null)}function xTt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function STt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&xTt(e,o,n)),r}return s._value=t,s}function TTt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,STt(e,t,n??""))}function CTt(e){return function(){this.textContent=e}}function ATt(e){return function(){var t=e(this);this.textContent=t??""}}function DTt(e){return this.tween("text",typeof e=="function"?ATt(Cte(this,"text",e)):CTt(e==null?"":e+""))}function ITt(e){return function(t){this.textContent=e.call(this,t)}}function kTt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&ITt(i)),t}return r._value=e,r}function RTt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,kTt(e))}function NTt(){for(var e=this._name,t=this._id,n=CNe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=xp(u,t);vB(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ty(r,this._parents,e,n)}function PTt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=fg(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var OTt=0;function ty(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function CNe(){return++OTt}var Ug=yP.prototype;ty.prototype={constructor:ty,select:pTt,selectAll:mTt,selectChild:Ug.selectChild,selectChildren:Ug.selectChildren,filter:aTt,merge:uTt,selection:yTt,transition:NTt,call:Ug.call,nodes:Ug.nodes,node:Ug.node,size:Ug.size,empty:Ug.empty,each:Ug.each,on:fTt,attr:qSt,attrTween:XSt,style:ETt,styleTween:TTt,text:DTt,textTween:RTt,remove:hTt,tween:LSt,delay:ZSt,duration:nTt,ease:iTt,easeVarying:oTt,end:PTt,[Symbol.iterator]:Ug[Symbol.iterator]};const MTt=e=>+e;function $Tt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var FTt={time:null,delay:0,duration:250,ease:$Tt};function LTt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function BTt(e){var t,n;e instanceof ty?(t=e._id,e=e._name):(t=CNe(),(n=FTt).time=yB(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&vB(u,e,t,l,o,n||LTt(u,t));return new ty(r,this._parents,e,t)}yP.prototype.interrupt=MSt;yP.prototype.transition=BTt;const cV=e=>()=>e;function jTt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function UTt(e){e.stopImmediatePropagation()}function fV(e){e.preventDefault(),e.stopImmediatePropagation()}var s0e={name:"drag"},dV={name:"space"},Yx={name:"handle"},Kx={name:"center"};const{abs:o0e,max:Su,min:Tu}=Math;function a0e(e){return[+e[0],+e[1]]}function VG(e){return[a0e(e[0]),a0e(e[1])]}var Q$={name:"x",handles:["w","e"].map(FR),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},J$={name:"y",handles:["n","s"].map(FR),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},zTt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(FR),input:function(e){return e==null?null:VG(e)},output:function(e){return e}},zg={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},u0e={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},l0e={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},VTt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},HTt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function FR(e){return{type:e}}function qTt(e){return!e.ctrlKey&&!e.button}function WTt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function GTt(){return navigator.maxTouchPoints||"ontouchstart"in this}function hV(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function YTt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function ANe(){return Ate(Q$)}function DNe(){return Ate(J$)}function INe(){return Ate(zTt)}function Ate(e){var t=WTt,n=qTt,r=GTt,i=!0,s=fB("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([FR("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",zg.overlay).merge(y).each(function(){var w=hV(this).extent;Or(this).attr("x",w[0][0]).attr("y",w[0][1]).attr("width",w[1][0]-w[0][0]).attr("height",w[1][1]-w[0][1])}),g.selectAll(".selection").data([FR("selection")]).enter().append("rect").attr("class","selection").attr("cursor",zg.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var b=g.selectAll(".handle").data(e.handles,function(w){return w.type});b.exit().remove(),b.enter().append("rect").attr("class",function(w){return"handle handle--"+w.type}).attr("cursor",function(w){return zg[w.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,b){g.tween?g.on("start.brush",function(w){c(this,arguments).beforestart().start(w)}).on("interrupt.brush end.brush",function(w){c(this,arguments).end(w)}).tween("brush",function(){var w=this,S=w.__brush,E=c(w,arguments),T=S.selection,C=e.input(typeof y=="function"?y.apply(this,arguments):y,S.extent),A=Iy(T,C);function I(k){S.selection=k===1&&C===null?null:A(k),l.call(w),E.brush()}return T!==null&&C!==null?I:I(1)}):g.each(function(){var w=this,S=arguments,E=w.__brush,T=e.input(typeof y=="function"?y.apply(w,S):y,E.extent),C=c(w,S).beforestart();zG(w),E.selection=T===null?null:T,l.call(w),C.start(b).brush(b).end(b)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=Or(this),y=hV(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(b){return b.type[b.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(b){return b.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(b){return b.type==="n"||b.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(b){return b.type==="e"||b.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,b){var w=g.__brush.emitter;return w&&(!b||!w.clean)?w:new f(g,y,b)}function f(g,y,b){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=b}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,b){var w=Or(this.that).datum();s.call(g,this.that,new jTt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:b,dispatch:s}),w)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,b=g.target.__data__.type,w=(i&&g.metaKey?b="overlay":b)==="selection"?s0e:i&&g.altKey?Kx:Yx,S=e===J$?null:VTt[b],E=e===Q$?null:HTt[b],T=hV(y),C=T.extent,A=T.selection,I=C[0][0],k,N,F=C[0][1],M,L,j=C[1][0],B,z,V=C[1][1],G,$,W=0,K=0,q,Y=S&&E&&i&&g.shiftKey,Z,ae,be=Array.from(g.touches||[g],Re=>{const He=Re.identifier;return Re=WL(Re,y),Re.point0=Re.slice(),Re.identifier=He,Re});zG(y);var Se=c(y,arguments,!0).beforestart();if(b==="overlay"){A&&(q=!0);const Re=[be[0],be[1]||be[0]];T.selection=A=[[k=e===J$?I:Tu(Re[0][0],Re[1][0]),M=e===Q$?F:Tu(Re[0][1],Re[1][1])],[B=e===J$?j:Su(Re[0][0],Re[1][0]),G=e===Q$?V:Su(Re[0][1],Re[1][1])]],be.length>1&&Ze(g)}else k=A[0][0],M=A[0][1],B=A[1][0],G=A[1][1];N=k,L=M,z=B,$=G;var we=Or(y).attr("pointer-events","none"),Ce=we.selectAll(".overlay").attr("cursor",zg[b]);if(g.touches)Se.moved=ke,Se.ended=Ke;else{var Le=Or(g.view).on("mousemove.brush",ke,!0).on("mouseup.brush",Ke,!0);i&&Le.on("keydown.brush",Ct,!0).on("keyup.brush",wt,!0),zxt(g.view)}l.call(y),Se.start(g,w.name);function ke(Re){for(const He of Re.changedTouches||[Re])for(const lt of be)lt.identifier===He.identifier&&(lt.cur=WL(He,y));if(Y&&!Z&&!ae&&be.length===1){const He=be[0];o0e(He.cur[0]-He[0])>o0e(He.cur[1]-He[1])?ae=!0:Z=!0}for(const He of be)He.cur&&(He[0]=He.cur[0],He[1]=He.cur[1]);q=!0,fV(Re),Ze(Re)}function Ze(Re){const He=be[0],lt=He.point0;var St;switch(W=He[0]-lt[0],K=He[1]-lt[1],w){case dV:case s0e:{S&&(W=Su(I-k,Tu(j-B,W)),N=k+W,z=B+W),E&&(K=Su(F-M,Tu(V-G,K)),L=M+K,$=G+K);break}case Yx:{be[1]?(S&&(N=Su(I,Tu(j,be[0][0])),z=Su(I,Tu(j,be[1][0])),S=1),E&&(L=Su(F,Tu(V,be[0][1])),$=Su(F,Tu(V,be[1][1])),E=1)):(S<0?(W=Su(I-k,Tu(j-k,W)),N=k+W,z=B):S>0&&(W=Su(I-B,Tu(j-B,W)),N=k,z=B+W),E<0?(K=Su(F-M,Tu(V-M,K)),L=M+K,$=G):E>0&&(K=Su(F-G,Tu(V-G,K)),L=M,$=G+K));break}case Kx:{S&&(N=Su(I,Tu(j,k-W*S)),z=Su(I,Tu(j,B+W*S))),E&&(L=Su(F,Tu(V,M-K*E)),$=Su(F,Tu(V,G+K*E)));break}}z<N&&(S*=-1,St=k,k=B,B=St,St=N,N=z,z=St,b in u0e&&Ce.attr("cursor",zg[b=u0e[b]])),$<L&&(E*=-1,St=M,M=G,G=St,St=L,L=$,$=St,b in l0e&&Ce.attr("cursor",zg[b=l0e[b]])),T.selection&&(A=T.selection),Z&&(N=A[0][0],z=A[1][0]),ae&&(L=A[0][1],$=A[1][1]),(A[0][0]!==N||A[0][1]!==L||A[1][0]!==z||A[1][1]!==$)&&(T.selection=[[N,L],[z,$]],l.call(y),Se.brush(Re,w.name))}function Ke(Re){if(UTt(Re),Re.touches){if(Re.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else Vxt(Re.view,q),Le.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);we.attr("pointer-events","all"),Ce.attr("cursor",zg.overlay),T.selection&&(A=T.selection),YTt(A)&&(T.selection=null,l.call(y)),Se.end(Re,w.name)}function Ct(Re){switch(Re.keyCode){case 16:{Y=S&&E;break}case 18:{w===Yx&&(S&&(B=z-W*S,k=N+W*S),E&&(G=$-K*E,M=L+K*E),w=Kx,Ze(Re));break}case 32:{(w===Yx||w===Kx)&&(S<0?B=z-W:S>0&&(k=N-W),E<0?G=$-K:E>0&&(M=L-K),w=dV,Ce.attr("cursor",zg.selection),Ze(Re));break}default:return}fV(Re)}function wt(Re){switch(Re.keyCode){case 16:{Y&&(Z=ae=Y=!1,Ze(Re));break}case 18:{w===Kx&&(S<0?B=z:S>0&&(k=N),E<0?G=$:E>0&&(M=L),w=Yx,Ze(Re));break}case 32:{w===dV&&(Re.altKey?(S&&(B=z-W*S,k=N+W*S),E&&(G=$-K*E,M=L+K*E),w=Kx):(S<0?B=z:S>0&&(k=N),E<0?G=$:E>0&&(M=L),w=Yx),Ce.attr("cursor",zg[b]),Ze(Re));break}default:return}fV(Re)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=VG(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:cV(VG(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:cV(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:cV(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const HG=Math.PI,qG=2*HG,Nw=1e-6,KTt=qG-Nw;function kNe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function XTt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return kNe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let Dte=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?kNe:XTt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Nw)if(!(Math.abs(f*u-l*c)>Nw)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),b=Math.sqrt(d),w=s*Math.tan((HG-Math.acos((m+d-g)/(2*y*b)))/2),S=w/b,E=w/y;Math.abs(S-1)>Nw&&this._append`L${t+S*c},${n+S*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Nw||Math.abs(this._y1-c)>Nw)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%qG+qG),d>KTt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Nw&&this._append`A${r},${r},0,${+(d>=HG)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function bB(){return new Dte}bB.prototype=Dte.prototype;const P0=11102230246251565e-32,Cu=134217729,QTt=(3+8*P0)*P0;function pV(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function JTt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function wP(e){return new Float64Array(e)}const ZTt=(3+16*P0)*P0,eCt=(2+12*P0)*P0,tCt=(9+64*P0)*P0*P0,Xx=wP(4),c0e=wP(8),f0e=wP(12),d0e=wP(16),hl=wP(4);function nCt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,b,w,S,E,T,C,A;const I=e-i,k=n-i,N=t-s,F=r-s;S=I*F,d=Cu*I,h=d-(d-I),p=I-h,d=Cu*F,m=d-(d-F),g=F-m,E=p*g-(S-h*m-p*m-h*g),T=N*k,d=Cu*N,h=d-(d-N),p=N-h,d=Cu*k,m=d-(d-k),g=k-m,C=p*g-(T-h*m-p*m-h*g),y=E-C,f=E-y,Xx[0]=E-(y+f)+(f-C),b=S+y,f=b-S,w=S-(b-f)+(y-f),y=w-T,f=w-y,Xx[1]=w-(y+f)+(f-T),A=b+y,f=A-b,Xx[2]=b-(A-f)+(y-f),Xx[3]=A;let M=JTt(4,Xx),L=eCt*o;if(M>=L||-M>=L||(f=e-I,a=e-(I+f)+(f-i),f=n-k,l=n-(k+f)+(f-i),f=t-N,u=t-(N+f)+(f-s),f=r-F,c=r-(F+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(L=tCt*o+QTt*Math.abs(M),M+=I*c+F*a-(N*l+k*u),M>=L||-M>=L))return M;S=a*F,d=Cu*a,h=d-(d-a),p=a-h,d=Cu*F,m=d-(d-F),g=F-m,E=p*g-(S-h*m-p*m-h*g),T=u*k,d=Cu*u,h=d-(d-u),p=u-h,d=Cu*k,m=d-(d-k),g=k-m,C=p*g-(T-h*m-p*m-h*g),y=E-C,f=E-y,hl[0]=E-(y+f)+(f-C),b=S+y,f=b-S,w=S-(b-f)+(y-f),y=w-T,f=w-y,hl[1]=w-(y+f)+(f-T),A=b+y,f=A-b,hl[2]=b-(A-f)+(y-f),hl[3]=A;const j=pV(4,Xx,4,hl,c0e);S=I*c,d=Cu*I,h=d-(d-I),p=I-h,d=Cu*c,m=d-(d-c),g=c-m,E=p*g-(S-h*m-p*m-h*g),T=N*l,d=Cu*N,h=d-(d-N),p=N-h,d=Cu*l,m=d-(d-l),g=l-m,C=p*g-(T-h*m-p*m-h*g),y=E-C,f=E-y,hl[0]=E-(y+f)+(f-C),b=S+y,f=b-S,w=S-(b-f)+(y-f),y=w-T,f=w-y,hl[1]=w-(y+f)+(f-T),A=b+y,f=A-b,hl[2]=b-(A-f)+(y-f),hl[3]=A;const B=pV(j,c0e,4,hl,f0e);S=a*c,d=Cu*a,h=d-(d-a),p=a-h,d=Cu*c,m=d-(d-c),g=c-m,E=p*g-(S-h*m-p*m-h*g),T=u*l,d=Cu*u,h=d-(d-u),p=u-h,d=Cu*l,m=d-(d-l),g=l-m,C=p*g-(T-h*m-p*m-h*g),y=E-C,f=E-y,hl[0]=E-(y+f)+(f-C),b=S+y,f=b-S,w=S-(b-f)+(y-f),y=w-T,f=w-y,hl[1]=w-(y+f)+(f-T),A=b+y,f=A-b,hl[2]=b-(A-f)+(y-f),hl[3]=A;const z=pV(B,f0e,4,hl,d0e);return d0e[z-1]}function hM(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=ZTt*l?u:-nCt(e,t,n,r,i,s,l)}const h0e=Math.pow(2,-52),pM=new Uint32Array(512);class e6{static from(t,n=aCt,r=uCt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new e6(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let I=0;I<o;I++){const k=t[2*I],N=t[2*I+1];k<a&&(a=k),N<u&&(u=N),k>l&&(l=k),N>c&&(c=N),this._ids[I]=I}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let I=0,k=1/0;I<o;I++){const N=mV(f,d,t[2*I],t[2*I+1]);N<k&&(h=I,k=N)}const g=t[2*h],y=t[2*h+1];for(let I=0,k=1/0;I<o;I++){if(I===h)continue;const N=mV(g,y,t[2*I],t[2*I+1]);N<k&&N>0&&(p=I,k=N)}let b=t[2*p],w=t[2*p+1],S=1/0;for(let I=0;I<o;I++){if(I===h||I===p)continue;const k=sCt(g,y,b,w,t[2*I],t[2*I+1]);k<S&&(m=I,S=k)}let E=t[2*m],T=t[2*m+1];if(S===1/0){for(let N=0;N<o;N++)this._dists[N]=t[2*N]-t[0]||t[2*N+1]-t[1];GS(this._ids,this._dists,0,o-1);const I=new Uint32Array(o);let k=0;for(let N=0,F=-1/0;N<o;N++){const M=this._ids[N],L=this._dists[M];L>F&&(I[k++]=M,F=L)}this.hull=I.subarray(0,k),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(hM(g,y,b,w,E,T)<0){const I=p,k=b,N=w;p=m,b=E,w=T,m=I,E=k,T=N}const C=oCt(g,y,b,w,E,T);this._cx=C.x,this._cy=C.y;for(let I=0;I<o;I++)this._dists[I]=mV(t[2*I],t[2*I+1],C.x,C.y);GS(this._ids,this._dists,0,o-1),this._hullStart=h;let A=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(b,w)]=p,s[this._hashKey(E,T)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let I=0,k,N;I<this._ids.length;I++){const F=this._ids[I],M=t[2*F],L=t[2*F+1];if(I>0&&Math.abs(M-k)<=h0e&&Math.abs(L-N)<=h0e||(k=M,N=L,F===h||F===p||F===m))continue;let j=0;for(let $=0,W=this._hashKey(M,L);$<this._hashSize&&(j=s[(W+$)%this._hashSize],!(j!==-1&&j!==r[j]));$++);j=n[j];let B=j,z;for(;z=r[B],hM(M,L,t[2*B],t[2*B+1],t[2*z],t[2*z+1])>=0;)if(B=z,B===j){B=-1;break}if(B===-1)continue;let V=this._addTriangle(B,F,r[B],-1,-1,i[B]);i[F]=this._legalize(V+2),i[B]=V,A++;let G=r[B];for(;z=r[G],hM(M,L,t[2*G],t[2*G+1],t[2*z],t[2*z+1])<0;)V=this._addTriangle(G,F,z,i[F],-1,i[G]),i[F]=this._legalize(V+2),r[G]=G,A--,G=z;if(B===j)for(;z=n[B],hM(M,L,t[2*z],t[2*z+1],t[2*B],t[2*B+1])<0;)V=this._addTriangle(z,F,B,-1,i[B],i[z]),this._legalize(V+2),i[z]=V,r[B]=B,A--,B=z;this._hullStart=n[F]=B,r[B]=n[G]=F,r[F]=G,s[this._hashKey(M,L)]=F,s[this._hashKey(t[2*B],t[2*B+1])]=B}this.hull=new Uint32Array(A);for(let I=0,k=this._hullStart;I<A;I++)this.hull[I]=k,k=r[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(rCt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=pM[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(iCt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let w=this._hullStart;do{if(this._hullTri[w]===f){this._hullTri[w]=t;break}w=this._hullPrev[w]}while(w!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const b=l+(a+1)%3;s<pM.length&&(pM[s++]=b)}else{if(s===0)break;t=pM[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function rCt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function mV(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function iCt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function sCt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function oCt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function GS(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;xD(e,i,s),t[e[n]]>t[e[r]]&&xD(e,n,r),t[e[s]]>t[e[r]]&&xD(e,s,r),t[e[n]]>t[e[s]]&&xD(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;xD(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(GS(e,t,s,r),GS(e,t,n,o-1)):(GS(e,t,n,o-1),GS(e,t,s,r))}}function xD(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function aCt(e){return e[0]}function uCt(e){return e[1]}const p0e=1e-6;class h_{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>p0e||Math.abs(this._y1-s)>p0e)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class WG{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let lCt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,b,w;m<y;m+=3,g+=2){const S=r[m]*2,E=r[m+1]*2,T=r[m+2]*2,C=t[S],A=t[S+1],I=t[E],k=t[E+1],N=t[T],F=t[T+1],M=I-C,L=k-A,j=N-C,B=F-A,z=(M*B-L*j)*2;if(Math.abs(z)<1e-9){if(s===void 0){s=o=0;for(const G of n)s+=t[G*2],o+=t[G*2+1];s/=n.length,o/=n.length}const V=1e9*Math.sign((s-C)*B-(o-A)*j);b=(C+N)/2-V*B,w=(A+F)/2+V*j}else{const V=1/z,G=M*M+L*L,$=j*j+B*B;b=C+(B*G-L*$)*V,w=A+(M*$-j*G)*V}a[g]=b,a[g+1]=w}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new h_:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],b=o[p+1];this._renderSegment(m,g,y,b,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new h_:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new h_:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new WG;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,b;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,b]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,b,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,b),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,b):i=[y,b]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const cCt=2*Math.PI,Qx=Math.pow;function fCt(e){return e[0]}function dCt(e){return e[1]}function hCt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function pCt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Ite{static from(t,n=fCt,r=dCt,i){return new Ite("length"in t?mCt(t,n,r,i):Float64Array.from(gCt(t,n,r,i)))}constructor(t){this._delaunator=new e6(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&hCt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=pCt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new e6(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new lCt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=Qx(n-l[t*2],2)+Qx(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=Qx(n-l[p*2],2)+Qx(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&Qx(n-l[h*2],2)+Qx(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new h_:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new h_:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,cCt)}return r&&r.value()}renderHull(t){const n=t==null?t=new h_:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new WG;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new h_:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new WG;return this.renderTriangle(t,n),n.value()}}function mCt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*gCt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var m0e={},gV={},yV=34,SD=10,vV=13;function RNe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function yCt(e,t){var n=RNe(e);return function(r,i){return t(n(r),i,e)}}function g0e(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function ic(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function vCt(e){return e<0?"-"+ic(-e,6):e>9999?"+"+ic(e,6):ic(e,4)}function bCt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":vCt(e.getUTCFullYear())+"-"+ic(e.getUTCMonth()+1,2)+"-"+ic(e.getUTCDate(),2)+(i?"T"+ic(t,2)+":"+ic(n,2)+":"+ic(r,2)+"."+ic(i,3)+"Z":r?"T"+ic(t,2)+":"+ic(n,2)+":"+ic(r,2)+"Z":n||t?"T"+ic(t,2)+":"+ic(n,2)+"Z":"")}function NNe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?yCt(g,d):RNe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,b=p<=0,w=!1;f.charCodeAt(p-1)===SD&&--p,f.charCodeAt(p-1)===vV&&--p;function S(){if(b)return gV;if(w)return w=!1,m0e;var T,C=m,A;if(f.charCodeAt(C)===yV){for(;m++<p&&f.charCodeAt(m)!==yV||f.charCodeAt(++m)===yV;);return(T=m)>=p?b=!0:(A=f.charCodeAt(m++))===SD?w=!0:A===vV&&(w=!0,f.charCodeAt(m)===SD&&++m),f.slice(C+1,T-1).replace(/""/g,'"')}for(;m<p;){if((A=f.charCodeAt(T=m++))===SD)w=!0;else if(A===vV)w=!0,f.charCodeAt(m)===SD&&++m;else if(A!==n)continue;return f.slice(C,T)}return b=!0,f.slice(C,p)}for(;(y=S())!==gV;){for(var E=[];y!==m0e&&y!==gV;)E.push(y),y=S();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=g0e(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=g0e(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?bCt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var wCt=NNe(","),_Ct=wCt.parse;function ECt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function xCt(e,t){return fetch(e,t).then(ECt)}function SCt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),xCt(t,n).then(function(i){return e(i,r)})}}var PNe=SCt(_Ct);function TCt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function CCt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return ONe(this.cover(t,n),t,n,e)}function ONe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,b;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(b=(p>=d)<<1|h>=f));return i[b]=s,i[y]=o,e}function ACt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)ONe(this,o[n],a[n],e[n]);return this}function DCt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function ICt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function kCt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Sl(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function RCt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Sl(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new Sl(h[3],g,y,u,l),new Sl(h[2],o,y,g,l),new Sl(h[1],g,a,u,y),new Sl(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var b=e-+this._x.call(null,h.data),w=t-+this._y.call(null,h.data),S=b*b+w*w;if(S<n){var E=Math.sqrt(n=S);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function NCt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function PCt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function OCt(){return this._root}function MCt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function $Ct(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Sl(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Sl(i,l,c,a,u)),(i=r[2])&&t.push(new Sl(i,s,c,l,u)),(i=r[1])&&t.push(new Sl(i,l,o,a,c)),(i=r[0])&&t.push(new Sl(i,s,o,l,c))}return this}function FCt(e){var t=[],n=[],r;for(this._root&&t.push(new Sl(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Sl(s,o,a,c,f)),(s=i[1])&&t.push(new Sl(s,c,a,u,f)),(s=i[2])&&t.push(new Sl(s,o,f,c,l)),(s=i[3])&&t.push(new Sl(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function LCt(e){return e[0]}function BCt(e){return arguments.length?(this._x=e,this):this._x}function jCt(e){return e[1]}function UCt(e){return arguments.length?(this._y=e,this):this._y}function kte(e,t,n){var r=new Rte(t??LCt,n??jCt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function Rte(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function y0e(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Hl=kte.prototype=Rte.prototype;Hl.copy=function(){var e=new Rte(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=y0e(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=y0e(r));return e};Hl.add=CCt;Hl.addAll=ACt;Hl.cover=DCt;Hl.data=ICt;Hl.extent=kCt;Hl.find=RCt;Hl.remove=NCt;Hl.removeAll=PCt;Hl.root=OCt;Hl.size=MCt;Hl.visit=$Ct;Hl.visitAfter=FCt;Hl.x=BCt;Hl.y=UCt;function Dl(e){return function(){return e}}function Uv(e){return(e()-.5)*1e-6}function zCt(e){return e.x+e.vx}function VCt(e){return e.y+e.vy}function HCt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Dl(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=kte(t,zCt,VCt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(b);function b(w,S,E,T,C){var A=w.data,I=w.r,k=m+I;if(A){if(A.index>d.index){var N=h-A.x-A.vx,F=p-A.y-A.vy,M=N*N+F*F;M<k*k&&(N===0&&(N=Uv(r),M+=N*N),F===0&&(F=Uv(r),M+=F*F),M=(k-(M=Math.sqrt(M)))/M*i,d.vx+=(N*=M)*(k=(I*=I)/(g+I)),d.vy+=(F*=M)*k,A.vx-=N*(k=1-k),A.vy-=F*k)}return}return S>h+k||T<h-k||E>p+k||C<p-k}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Dl(+l),u(),o):e},o}function qCt(e){return e.index}function v0e(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function WCt(e){var t=qCt,n=f,r,i=Dl(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,b=e.length;y<c;++y)for(var w=0,S,E,T,C,A,I,k;w<b;++w)S=e[w],E=S.source,T=S.target,C=T.x+T.vx-E.x-E.vx||Uv(l),A=T.y+T.vy-E.y-E.vy||Uv(l),I=Math.sqrt(C*C+A*A),I=(I-s[w])/I*g*r[w],C*=I,A*=I,T.vx-=C*(k=u[w]),T.vy-=A*k,E.vx+=C*(k=1-k),E.vy+=A*k}function h(){if(o){var g,y=o.length,b=e.length,w=new Map(o.map((E,T)=>[t(E,T,o),E])),S;for(g=0,a=new Array(y);g<b;++g)S=e[g],S.index=g,typeof S.source!="object"&&(S.source=v0e(w,S.source)),typeof S.target!="object"&&(S.target=v0e(w,S.target)),a[S.source.index]=(a[S.source.index]||0)+1,a[S.target.index]=(a[S.target.index]||0)+1;for(g=0,u=new Array(b);g<b;++g)S=e[g],u[g]=a[S.source.index]/(a[S.source.index]+a[S.target.index]);r=new Array(b),p(),s=new Array(b),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Dl(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Dl(+g),m(),d):i},d}const GCt=1664525,YCt=1013904223,b0e=4294967296;function KCt(){let e=1;return()=>(e=(GCt*e+YCt)%b0e)/b0e}function XCt(e){return e.x}function QCt(e){return e.y}var JCt=10,ZCt=Math.PI*(3-Math.sqrt(5));function e2t(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=Ste(f),l=fB("tick","end"),c=KCt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,b;m===void 0&&(m=1);for(var w=0;w<m;++w)for(n+=(s-n)*i,a.forEach(function(S){S(n)}),g=0;g<y;++g)b=e[g],b.fx==null?b.x+=b.vx*=o:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=o:(b.y=b.fy,b.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var b=JCt*Math.sqrt(.5+m),w=m*ZCt;y.x=b*Math.cos(w),y.y=b*Math.sin(w)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var b=0,w=e.length,S,E,T,C,A;for(y==null?y=1/0:y*=y,b=0;b<w;++b)C=e[b],S=m-C.x,E=g-C.y,T=S*S+E*E,T<y&&(A=C,y=T);return A},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function t2t(){var e,t,n,r,i=Dl(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=kte(e,XCt,QCt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,b,w,S;if(h.length){for(b=w=S=0;S<4;++S)(m=h[S])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,b+=g*m.x,w+=g*m.y);h.x=b/y,h.y=w/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,b=h.y-t.y,w=g-p,S=y*y+b*b;if(w*w/u<S)return S<a&&(y===0&&(y=Uv(n),S+=y*y),b===0&&(b=Uv(n),S+=b*b),S<o&&(S=Math.sqrt(o*S)),t.vx+=y*h.value*r/S,t.vy+=b*h.value*r/S),!0;if(h.length||S>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Uv(n),S+=y*y),b===0&&(b=Uv(n),S+=b*b),S<o&&(S=Math.sqrt(o*S)));do h.data!==t&&(w=s[h.data.index]*r/S,t.vx+=y*w,t.vy+=b*w);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Dl(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function n2t(e){var t=Dl(.1),n,r,i;typeof e!="function"&&(e=Dl(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Dl(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Dl(+a),o(),s):e},s}function r2t(e){var t=Dl(.1),n,r,i;typeof e!="function"&&(e=Dl(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Dl(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Dl(+a),o(),s):e},s}function i2t(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function t6(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function vC(e){return e=t6(Math.abs(e)),e?e[1]:NaN}function s2t(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function o2t(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var a2t=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function J_(e){if(!(t=a2t.exec(e)))throw new Error("invalid format: "+e);var t;return new Nte({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}J_.prototype=Nte.prototype;function Nte(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Nte.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function u2t(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var MNe;function l2t(e,t){var n=t6(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(MNe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+t6(e,Math.max(0,t+s-1))[0]}function w0e(e,t){var n=t6(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const _0e={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:i2t,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>w0e(e*100,t),r:w0e,s:l2t,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function E0e(e){return e}var x0e=Array.prototype.map,S0e=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function $Ne(e){var t=e.grouping===void 0||e.thousands===void 0?E0e:s2t(x0e.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?E0e:o2t(x0e.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=J_(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,b=f.comma,w=f.precision,S=f.trim,E=f.type;E==="n"?(b=!0,E="g"):_0e[E]||(w===void 0&&(w=12),S=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var T=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",C=m==="$"?r:/[%p]/.test(E)?o:"",A=_0e[E],I=/[defgprs%]/.test(E);w=w===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function k(N){var F=T,M=C,L,j,B;if(E==="c")M=A(N)+M,N="";else{N=+N;var z=N<0||1/N<0;if(N=isNaN(N)?u:A(Math.abs(N),w),S&&(N=u2t(N)),z&&+N==0&&p!=="+"&&(z=!1),F=(z?p==="("?p:a:p==="-"||p==="("?"":p)+F,M=(E==="s"?S0e[8+MNe/3]:"")+M+(z&&p==="("?")":""),I){for(L=-1,j=N.length;++L<j;)if(B=N.charCodeAt(L),48>B||B>57){M=(B===46?i+N.slice(L+1):N.slice(L))+M,N=N.slice(0,L);break}}}b&&!g&&(N=t(N,1/0));var V=F.length+N.length+M.length,G=V<y?new Array(y-V+1).join(d):"";switch(b&&g&&(N=t(G+N,G.length?y-M.length:1/0),G=""),h){case"<":N=F+N+M+G;break;case"=":N=F+G+N+M;break;case"^":N=G.slice(0,V=G.length>>1)+F+N+M+G.slice(V);break;default:N=G+F+N+M;break}return s(N)}return k.toString=function(){return f+""},k}function c(f,d){var h=l((f=J_(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(vC(d)/3)))*3,m=Math.pow(10,-p),g=S0e[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var mM,Db,Pte;c2t({thousands:",",grouping:[3],currency:["$",""]});function c2t(e){return mM=$Ne(e),Db=mM.format,Pte=mM.formatPrefix,mM}function FNe(e){return Math.max(0,-vC(Math.abs(e)))}function LNe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vC(t)/3)))*3-vC(Math.abs(e)))}function BNe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,vC(t)-vC(e))+1}var En=1e-6,n6=1e-12,Cr=Math.PI,uo=Cr/2,r6=Cr/4,Fl=Cr*2,wo=180/Cr,Sr=Cr/180,Gr=Math.abs,H2=Math.atan,Bd=Math.atan2,Tn=Math.cos,gM=Math.ceil,jNe=Math.exp,GG=Math.hypot,i6=Math.log,bV=Math.pow,gn=Math.sin,Ad=Math.sign||function(e){return e>0?1:e<0?-1:0},Ll=Math.sqrt,Ote=Math.tan;function UNe(e){return e>1?0:e<-1?Cr:Math.acos(e)}function Fc(e){return e>1?uo:e<-1?-uo:Math.asin(e)}function ru(){}function s6(e,t){e&&C0e.hasOwnProperty(e.type)&&C0e[e.type](e,t)}var T0e={Feature:function(e,t){s6(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)s6(n[r].geometry,t)}},C0e={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){YG(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)YG(n[r],t,0)},Polygon:function(e,t){A0e(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)A0e(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)s6(n[r],t)}};function YG(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function A0e(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)YG(e[n],t,1);t.polygonEnd()}function u0(e,t){e&&T0e.hasOwnProperty(e.type)?T0e[e.type](e,t):s6(e,t)}var o6=new Nl,a6=new Nl,zNe,VNe,KG,XG,QG,Um={point:ru,lineStart:ru,lineEnd:ru,polygonStart:function(){o6=new Nl,Um.lineStart=f2t,Um.lineEnd=d2t},polygonEnd:function(){var e=+o6;a6.add(e<0?Fl+e:e),this.lineStart=this.lineEnd=this.point=ru},sphere:function(){a6.add(Fl)}};function f2t(){Um.point=h2t}function d2t(){HNe(zNe,VNe)}function h2t(e,t){Um.point=HNe,zNe=e,VNe=t,e*=Sr,t*=Sr,KG=e,XG=Tn(t=t/2+r6),QG=gn(t)}function HNe(e,t){e*=Sr,t*=Sr,t=t/2+r6;var n=e-KG,r=n>=0?1:-1,i=r*n,s=Tn(t),o=gn(t),a=QG*o,u=XG*s+a*Tn(i),l=a*r*gn(i);o6.add(Bd(l,u)),KG=e,XG=s,QG=o}function p2t(e){return a6=new Nl,u0(e,Um),a6*2}function u6(e){return[Bd(e[1],e[0]),Fc(e[2])]}function Z_(e){var t=e[0],n=e[1],r=Tn(n);return[r*Tn(t),r*gn(t),gn(n)]}function yM(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function bC(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function wV(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function vM(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function l6(e){var t=Ll(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Us,hc,Zs,ff,Pw,qNe,WNe,_T,vk,wv,ny,n0={point:JG,lineStart:D0e,lineEnd:I0e,polygonStart:function(){n0.point=YNe,n0.lineStart=m2t,n0.lineEnd=g2t,vk=new Nl,Um.polygonStart()},polygonEnd:function(){Um.polygonEnd(),n0.point=JG,n0.lineStart=D0e,n0.lineEnd=I0e,o6<0?(Us=-(Zs=180),hc=-(ff=90)):vk>En?ff=90:vk<-En&&(hc=-90),ny[0]=Us,ny[1]=Zs},sphere:function(){Us=-(Zs=180),hc=-(ff=90)}};function JG(e,t){wv.push(ny=[Us=e,Zs=e]),t<hc&&(hc=t),t>ff&&(ff=t)}function GNe(e,t){var n=Z_([e*Sr,t*Sr]);if(_T){var r=bC(_T,n),i=[r[1],-r[0],0],s=bC(i,r);l6(s),s=u6(s);var o=e-Pw,a=o>0?1:-1,u=s[0]*wo*a,l,c=Gr(o)>180;c^(a*Pw<u&&u<a*e)?(l=s[1]*wo,l>ff&&(ff=l)):(u=(u+360)%360-180,c^(a*Pw<u&&u<a*e)?(l=-s[1]*wo,l<hc&&(hc=l)):(t<hc&&(hc=t),t>ff&&(ff=t))),c?e<Pw?lf(Us,e)>lf(Us,Zs)&&(Zs=e):lf(e,Zs)>lf(Us,Zs)&&(Us=e):Zs>=Us?(e<Us&&(Us=e),e>Zs&&(Zs=e)):e>Pw?lf(Us,e)>lf(Us,Zs)&&(Zs=e):lf(e,Zs)>lf(Us,Zs)&&(Us=e)}else wv.push(ny=[Us=e,Zs=e]);t<hc&&(hc=t),t>ff&&(ff=t),_T=n,Pw=e}function D0e(){n0.point=GNe}function I0e(){ny[0]=Us,ny[1]=Zs,n0.point=JG,_T=null}function YNe(e,t){if(_T){var n=e-Pw;vk.add(Gr(n)>180?n+(n>0?360:-360):n)}else qNe=e,WNe=t;Um.point(e,t),GNe(e,t)}function m2t(){Um.lineStart()}function g2t(){YNe(qNe,WNe),Um.lineEnd(),Gr(vk)>En&&(Us=-(Zs=180)),ny[0]=Us,ny[1]=Zs,_T=null}function lf(e,t){return(t-=e)<0?t+360:t}function y2t(e,t){return e[0]-t[0]}function k0e(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function v2t(e){var t,n,r,i,s,o,a;if(ff=Zs=-(Us=hc=1/0),wv=[],u0(e,n0),n=wv.length){for(wv.sort(y2t),t=1,r=wv[0],s=[r];t<n;++t)i=wv[t],k0e(r,i[0])||k0e(r,i[1])?(lf(r[0],i[1])>lf(r[0],r[1])&&(r[1]=i[1]),lf(i[0],r[1])>lf(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=lf(r[1],i[0]))>o&&(o=a,Us=i[0],Zs=r[1])}return wv=ny=null,Us===1/0||hc===1/0?[[NaN,NaN],[NaN,NaN]]:[[Us,hc],[Zs,ff]]}var yI,c6,f6,d6,h6,p6,m6,g6,ZG,eY,tY,KNe,XNe,_l,El,xl,Hh={sphere:ru,point:Mte,lineStart:R0e,lineEnd:N0e,polygonStart:function(){Hh.lineStart=_2t,Hh.lineEnd=E2t},polygonEnd:function(){Hh.lineStart=R0e,Hh.lineEnd=N0e}};function Mte(e,t){e*=Sr,t*=Sr;var n=Tn(t);_P(n*Tn(e),n*gn(e),gn(t))}function _P(e,t,n){++yI,f6+=(e-f6)/yI,d6+=(t-d6)/yI,h6+=(n-h6)/yI}function R0e(){Hh.point=b2t}function b2t(e,t){e*=Sr,t*=Sr;var n=Tn(t);_l=n*Tn(e),El=n*gn(e),xl=gn(t),Hh.point=w2t,_P(_l,El,xl)}function w2t(e,t){e*=Sr,t*=Sr;var n=Tn(t),r=n*Tn(e),i=n*gn(e),s=gn(t),o=Bd(Ll((o=El*s-xl*i)*o+(o=xl*r-_l*s)*o+(o=_l*i-El*r)*o),_l*r+El*i+xl*s);c6+=o,p6+=o*(_l+(_l=r)),m6+=o*(El+(El=i)),g6+=o*(xl+(xl=s)),_P(_l,El,xl)}function N0e(){Hh.point=Mte}function _2t(){Hh.point=x2t}function E2t(){QNe(KNe,XNe),Hh.point=Mte}function x2t(e,t){KNe=e,XNe=t,e*=Sr,t*=Sr,Hh.point=QNe;var n=Tn(t);_l=n*Tn(e),El=n*gn(e),xl=gn(t),_P(_l,El,xl)}function QNe(e,t){e*=Sr,t*=Sr;var n=Tn(t),r=n*Tn(e),i=n*gn(e),s=gn(t),o=El*s-xl*i,a=xl*r-_l*s,u=_l*i-El*r,l=GG(o,a,u),c=Fc(l),f=l&&-c/l;ZG.add(f*o),eY.add(f*a),tY.add(f*u),c6+=c,p6+=c*(_l+(_l=r)),m6+=c*(El+(El=i)),g6+=c*(xl+(xl=s)),_P(_l,El,xl)}function S2t(e){yI=c6=f6=d6=h6=p6=m6=g6=0,ZG=new Nl,eY=new Nl,tY=new Nl,u0(e,Hh);var t=+ZG,n=+eY,r=+tY,i=GG(t,n,r);return i<n6&&(t=p6,n=m6,r=g6,c6<En&&(t=f6,n=d6,r=h6),i=GG(t,n,r),i<n6)?[NaN,NaN]:[Bd(n,t)*wo,Fc(r/i)*wo]}function nY(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function rY(e,t){return Gr(e)>Cr&&(e-=Math.round(e/Fl)*Fl),[e,t]}rY.invert=rY;function JNe(e,t,n){return(e%=Fl)?t||n?nY(O0e(e),M0e(t,n)):O0e(e):t||n?M0e(t,n):rY}function P0e(e){return function(t,n){return t+=e,Gr(t)>Cr&&(t-=Math.round(t/Fl)*Fl),[t,n]}}function O0e(e){var t=P0e(e);return t.invert=P0e(-e),t}function M0e(e,t){var n=Tn(e),r=gn(e),i=Tn(t),s=gn(t);function o(a,u){var l=Tn(u),c=Tn(a)*l,f=gn(a)*l,d=gn(u),h=d*n+c*r;return[Bd(f*i-h*s,c*n-d*r),Fc(h*i+f*s)]}return o.invert=function(a,u){var l=Tn(u),c=Tn(a)*l,f=gn(a)*l,d=gn(u),h=d*i-f*s;return[Bd(f*i+d*s,c*n+h*r),Fc(h*n-c*r)]},o}function T2t(e){e=JNe(e[0]*Sr,e[1]*Sr,e.length>2?e[2]*Sr:0);function t(n){return n=e(n[0]*Sr,n[1]*Sr),n[0]*=wo,n[1]*=wo,n}return t.invert=function(n){return n=e.invert(n[0]*Sr,n[1]*Sr),n[0]*=wo,n[1]*=wo,n},t}function C2t(e,t,n,r,i,s){if(n){var o=Tn(t),a=gn(t),u=r*n;i==null?(i=t+r*Fl,s=t-u/2):(i=$0e(o,i),s=$0e(o,s),(r>0?i<s:i>s)&&(i+=r*Fl));for(var l,c=i;r>0?c>s:c<s;c-=u)l=u6([o,-a*Tn(c),-a*gn(c)]),e.point(l[0],l[1])}}function $0e(e,t){t=Z_(t),t[0]-=e,l6(t);var n=UNe(-t[1]);return((-t[2]<0?-n:n)+Fl-En)%Fl}function ZNe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:ru,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Z$(e,t){return Gr(e[0]-t[0])<En&&Gr(e[1]-t[1])<En}function bM(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function ePe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],b;if(Z$(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*En}s.push(b=new bM(g,p,null,!0)),o.push(b.o=new bM(g,null,b,!1)),s.push(b=new bM(y,p,null,!1)),o.push(b.o=new bM(y,null,b,!0))}}),!!s.length){for(o.sort(t),F0e(s),F0e(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function F0e(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function _V(e){return Gr(e[0])<=Cr?e[0]:Ad(e[0])*((Gr(e[0])+Cr)%Fl-Cr)}function A2t(e,t){var n=_V(t),r=t[1],i=gn(r),s=[gn(n),-Tn(n),0],o=0,a=0,u=new Nl;i===1?r=uo+En:i===-1&&(r=-uo-En);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=_V(h),m=h[1]/2+r6,g=gn(m),y=Tn(m),b=0;b<d;++b,p=S,g=T,y=C,h=w){var w=f[b],S=_V(w),E=w[1]/2+r6,T=gn(E),C=Tn(E),A=S-p,I=A>=0?1:-1,k=I*A,N=k>Cr,F=g*T;if(u.add(Bd(F*I*gn(k),y*C+F*Tn(k))),o+=N?A+I*Fl:A,N^p>=n^S>=n){var M=bC(Z_(h),Z_(w));l6(M);var L=bC(s,M);l6(L);var j=(N^A>=0?-1:1)*Fc(L[2]);(r>j||r===j&&(M[0]||M[1]))&&(a+=N^A>=0?1:-1)}}return(o<-En||o<En&&u<-n6)^a&1}function tPe(e,t,n,r){return function(i){var s=t(i),o=ZNe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=b,d.lineEnd=w,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=NRe(c);var S=A2t(l,r);c.length?(u||(i.polygonStart(),u=!0),ePe(c,I2t,S,n,i)):S&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(S,E){e(S,E)&&i.point(S,E)}function p(S,E){s.point(S,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(S,E){f.push([S,E]),a.point(S,E)}function b(){a.lineStart(),f=[]}function w(){y(f[0][0],f[0][1]),a.lineEnd();var S=a.clean(),E=o.result(),T,C=E.length,A,I,k;if(f.pop(),l.push(f),f=null,!!C){if(S&1){if(I=E[0],(A=I.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),T=0;T<A;++T)i.point((k=I[T])[0],k[1]);i.lineEnd()}return}C>1&&S&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(D2t))}}return d}}function D2t(e){return e.length>1}function I2t(e,t){return((e=e.x)[0]<0?e[1]-uo-En:uo-e[1])-((t=t.x)[0]<0?t[1]-uo-En:uo-t[1])}const L0e=tPe(function(){return!0},k2t,N2t,[-Cr,-uo]);function k2t(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Cr:-Cr,u=Gr(s-t);Gr(u-Cr)<En?(e.point(t,n=(n+o)/2>0?uo:-uo),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Cr&&(Gr(t-r)<En&&(t-=r*En),Gr(s-a)<En&&(s-=a*En),n=R2t(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function R2t(e,t,n,r){var i,s,o=gn(e-n);return Gr(o)>En?H2((gn(t)*(s=Tn(r))*gn(n)-gn(r)*(i=Tn(t))*gn(e))/(i*s*o)):(t+r)/2}function N2t(e,t,n,r){var i;if(e==null)i=n*uo,r.point(-Cr,i),r.point(0,i),r.point(Cr,i),r.point(Cr,0),r.point(Cr,-i),r.point(0,-i),r.point(-Cr,-i),r.point(-Cr,0),r.point(-Cr,i);else if(Gr(e[0]-t[0])>En){var s=e[0]<t[0]?Cr:-Cr;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function P2t(e){var t=Tn(e),n=2*Sr,r=t>0,i=Gr(t)>En;function s(c,f,d,h){C2t(h,e,n,d,c,f)}function o(c,f){return Tn(c)*Tn(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var b=[g,y],w,S=o(g,y),E=r?S?0:l(g,y):S?l(g+(g<0?Cr:-Cr),y):0;if(!f&&(p=h=S)&&c.lineStart(),S!==h&&(w=u(f,b),(!w||Z$(f,w)||Z$(b,w))&&(b[2]=1)),S!==h)m=0,S?(c.lineStart(),w=u(b,f),c.point(w[0],w[1])):(w=u(f,b),c.point(w[0],w[1],2),c.lineEnd()),f=w;else if(i&&f&&r^S){var T;!(E&d)&&(T=u(b,f,!0))&&(m=0,r?(c.lineStart(),c.point(T[0][0],T[0][1]),c.point(T[1][0],T[1][1]),c.lineEnd()):(c.point(T[1][0],T[1][1]),c.lineEnd(),c.lineStart(),c.point(T[0][0],T[0][1],3)))}S&&(!f||!Z$(f,b))&&c.point(b[0],b[1]),f=b,h=S,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=Z_(c),p=Z_(f),m=[1,0,0],g=bC(h,p),y=yM(g,g),b=g[0],w=y-b*b;if(!w)return!d&&c;var S=t*y/w,E=-t*b/w,T=bC(m,g),C=vM(m,S),A=vM(g,E);wV(C,A);var I=T,k=yM(C,I),N=yM(I,I),F=k*k-N*(yM(C,C)-1);if(!(F<0)){var M=Ll(F),L=vM(I,(-k-M)/N);if(wV(L,C),L=u6(L),!d)return L;var j=c[0],B=f[0],z=c[1],V=f[1],G;B<j&&(G=j,j=B,B=G);var $=B-j,W=Gr($-Cr)<En,K=W||$<En;if(!W&&V<z&&(G=z,z=V,V=G),K?W?z+V>0^L[1]<(Gr(L[0]-j)<En?z:V):z<=L[1]&&L[1]<=V:$>Cr^(j<=L[0]&&L[0]<=B)){var q=vM(I,(-k+M)/N);return wV(q,C),[L,u6(q)]}}}function l(c,f){var d=r?e:Cr-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return tPe(o,a,s,r?[0,-e]:[-Cr,e-Cr])}function O2t(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var vI=1e9,wM=-vI;function nPe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Gr(l[0]-e)<En?c>0?0:3:Gr(l[0]-n)<En?c>0?2:1:Gr(l[1]-t)<En?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=ZNe(),d,h,p,m,g,y,b,w,S,E,T,C={point:A,lineStart:F,lineEnd:M,polygonStart:k,polygonEnd:N};function A(j,B){i(j,B)&&c.point(j,B)}function I(){for(var j=0,B=0,z=h.length;B<z;++B)for(var V=h[B],G=1,$=V.length,W=V[0],K,q,Y=W[0],Z=W[1];G<$;++G)K=Y,q=Z,W=V[G],Y=W[0],Z=W[1],q<=r?Z>r&&(Y-K)*(r-q)>(Z-q)*(e-K)&&++j:Z<=r&&(Y-K)*(r-q)<(Z-q)*(e-K)&&--j;return j}function k(){c=f,d=[],h=[],T=!0}function N(){var j=I(),B=T&&j,z=(d=NRe(d)).length;(B||z)&&(l.polygonStart(),B&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),z&&ePe(d,a,j,s,l),l.polygonEnd()),c=l,d=h=p=null}function F(){C.point=L,h&&h.push(p=[]),E=!0,S=!1,b=w=NaN}function M(){d&&(L(m,g),y&&S&&f.rejoin(),d.push(f.result())),C.point=A,S&&c.lineEnd()}function L(j,B){var z=i(j,B);if(h&&p.push([j,B]),E)m=j,g=B,y=z,E=!1,z&&(c.lineStart(),c.point(j,B));else if(z&&S)c.point(j,B);else{var V=[b=Math.max(wM,Math.min(vI,b)),w=Math.max(wM,Math.min(vI,w))],G=[j=Math.max(wM,Math.min(vI,j)),B=Math.max(wM,Math.min(vI,B))];O2t(V,G,e,t,n,r)?(S||(c.lineStart(),c.point(V[0],V[1])),c.point(G[0],G[1]),z||c.lineEnd(),T=!1):z&&(c.lineStart(),c.point(j,B),T=!1)}b=j,w=B,S=z}return C}}function B0e(e,t,n){var r=Ec(e,t-En,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function j0e(e,t,n){var r=Ec(e,t-En,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function M2t(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return Ec(gM(r/c)*c,n,c).map(p).concat(Ec(gM(a/f)*f,o,f).map(m)).concat(Ec(gM(t/u)*u,e,u).filter(function(w){return Gr(w%c)>En}).map(d)).concat(Ec(gM(s/l)*l,i,l).filter(function(w){return Gr(w%f)>En}).map(h))}return y.lines=function(){return b().map(function(w){return{type:"LineString",coordinates:w}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(w){return arguments.length?y.extentMajor(w).extentMinor(w):y.extentMinor()},y.extentMajor=function(w){return arguments.length?(r=+w[0][0],n=+w[1][0],a=+w[0][1],o=+w[1][1],r>n&&(w=r,r=n,n=w),a>o&&(w=a,a=o,o=w),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(w){return arguments.length?(t=+w[0][0],e=+w[1][0],s=+w[0][1],i=+w[1][1],t>e&&(w=t,t=e,e=w),s>i&&(w=s,s=i,i=w),y.precision(g)):[[t,s],[e,i]]},y.step=function(w){return arguments.length?y.stepMajor(w).stepMinor(w):y.stepMinor()},y.stepMajor=function(w){return arguments.length?(c=+w[0],f=+w[1],y):[c,f]},y.stepMinor=function(w){return arguments.length?(u=+w[0],l=+w[1],y):[u,l]},y.precision=function(w){return arguments.length?(g=+w,d=B0e(s,i,90),h=j0e(t,e,g),p=B0e(a,o,90),m=j0e(r,n,g),y):g},y.extentMajor([[-180,-90+En],[180,90-En]]).extentMinor([[-180,-80-En],[180,80+En]])}const LR=e=>e;var EV=new Nl,iY=new Nl,rPe,iPe,sY,oY,l0={point:ru,lineStart:ru,lineEnd:ru,polygonStart:function(){l0.lineStart=$2t,l0.lineEnd=L2t},polygonEnd:function(){l0.lineStart=l0.lineEnd=l0.point=ru,EV.add(Gr(iY)),iY=new Nl},result:function(){var e=EV/2;return EV=new Nl,e}};function $2t(){l0.point=F2t}function F2t(e,t){l0.point=sPe,rPe=sY=e,iPe=oY=t}function sPe(e,t){iY.add(oY*e-sY*t),sY=e,oY=t}function L2t(){sPe(rPe,iPe)}var wC=1/0,y6=wC,BR=-wC,v6=BR,b6={point:B2t,lineStart:ru,lineEnd:ru,polygonStart:ru,polygonEnd:ru,result:function(){var e=[[wC,y6],[BR,v6]];return BR=v6=-(y6=wC=1/0),e}};function B2t(e,t){e<wC&&(wC=e),e>BR&&(BR=e),t<y6&&(y6=t),t>v6&&(v6=t)}var aY=0,uY=0,bI=0,w6=0,_6=0,YS=0,lY=0,cY=0,wI=0,oPe,aPe,sm,om,Sd={point:eE,lineStart:U0e,lineEnd:z0e,polygonStart:function(){Sd.lineStart=z2t,Sd.lineEnd=V2t},polygonEnd:function(){Sd.point=eE,Sd.lineStart=U0e,Sd.lineEnd=z0e},result:function(){var e=wI?[lY/wI,cY/wI]:YS?[w6/YS,_6/YS]:bI?[aY/bI,uY/bI]:[NaN,NaN];return aY=uY=bI=w6=_6=YS=lY=cY=wI=0,e}};function eE(e,t){aY+=e,uY+=t,++bI}function U0e(){Sd.point=j2t}function j2t(e,t){Sd.point=U2t,eE(sm=e,om=t)}function U2t(e,t){var n=e-sm,r=t-om,i=Ll(n*n+r*r);w6+=i*(sm+e)/2,_6+=i*(om+t)/2,YS+=i,eE(sm=e,om=t)}function z0e(){Sd.point=eE}function z2t(){Sd.point=H2t}function V2t(){uPe(oPe,aPe)}function H2t(e,t){Sd.point=uPe,eE(oPe=sm=e,aPe=om=t)}function uPe(e,t){var n=e-sm,r=t-om,i=Ll(n*n+r*r);w6+=i*(sm+e)/2,_6+=i*(om+t)/2,YS+=i,i=om*e-sm*t,lY+=i*(sm+e),cY+=i*(om+t),wI+=i*3,eE(sm=e,om=t)}function lPe(e){this._context=e}lPe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Fl);break}}},result:ru};var fY=new Nl,xV,cPe,fPe,_I,EI,jR={point:ru,lineStart:function(){jR.point=q2t},lineEnd:function(){xV&&dPe(cPe,fPe),jR.point=ru},polygonStart:function(){xV=!0},polygonEnd:function(){xV=null},result:function(){var e=+fY;return fY=new Nl,e}};function q2t(e,t){jR.point=dPe,cPe=_I=e,fPe=EI=t}function dPe(e,t){_I-=e,EI-=t,fY.add(Ll(_I*_I+EI*EI)),_I=e,EI=t}let V0e,E6,H0e,q0e;class W0e{constructor(t){this._append=t==null?hPe:W2t(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==H0e||this._append!==E6){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,H0e=r,E6=this._append,q0e=this._,this._=i}this._+=q0e;break}}}result(){const t=this._;return this._="",t.length?t:null}}function hPe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function W2t(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return hPe;if(t!==V0e){const n=10**t;V0e=t,E6=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return E6}function pPe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),u0(a,i(s))),s.result()}return o.area=function(a){return u0(a,i(l0)),l0.result()},o.measure=function(a){return u0(a,i(jR)),jR.result()},o.bounds=function(a){return u0(a,i(b6)),b6.result()},o.centroid=function(a){return u0(a,i(Sd)),Sd.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,LR):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new W0e(n)):new lPe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new W0e(n)),o},o.projection(e).digits(n).context(t)}function wB(e){return function(t){var n=new dY;for(var r in e)n[r]=e[r];return n.stream=t,n}}function dY(){}dY.prototype={constructor:dY,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function $te(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),u0(n,e.stream(b6)),t(b6.result()),r!=null&&e.clipExtent(r),e}function _B(e,t,n){return $te(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function Fte(e,t,n){return _B(e,[[0,0],t],n)}function Lte(e,t,n){return $te(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function Bte(e,t,n){return $te(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var G0e=16,G2t=Tn(30*Sr);function Y0e(e,t){return+t?K2t(e,t):Y2t(e)}function Y2t(e){return wB({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function K2t(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,b=c-i,w=y*y+b*b;if(w>4*t&&m--){var S=o+d,E=a+h,T=u+p,C=Ll(S*S+E*E+T*T),A=Fc(T/=C),I=Gr(Gr(T)-1)<En||Gr(s-f)<En?(s+f)/2:Bd(E,S),k=e(I,A),N=k[0],F=k[1],M=N-r,L=F-i,j=b*M-y*L;(j*j/w>t||Gr((y*M+b*L)/w-.5)>.3||o*d+a*h+u*p<G2t)&&(n(r,i,s,o,a,u,N,F,I,S/=C,E/=C,T,m,g),g.point(N,F),n(N,F,I,S,E,T,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:b,lineEnd:S,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=b}};function y(A,I){A=e(A,I),r.point(A[0],A[1])}function b(){f=NaN,g.point=w,r.lineStart()}function w(A,I){var k=Z_([A,I]),N=e(A,I);n(f,d,c,h,p,m,f=N[0],d=N[1],c=A,h=k[0],p=k[1],m=k[2],G0e,r),r.point(f,d)}function S(){g.point=y,r.lineEnd()}function E(){b(),g.point=T,g.lineEnd=C}function T(A,I){w(i=A,I),s=f,o=d,a=h,u=p,l=m,g.point=w}function C(){n(f,d,c,h,p,m,s,o,i,a,u,l,G0e,r),g.lineEnd=S,S()}return g}}var X2t=wB({point:function(e,t){this.stream.point(e*Sr,t*Sr)}});function Q2t(e){return wB({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function J2t(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function K0e(e,t,n,r,i,s){if(!s)return J2t(e,t,n,r,i);var o=Tn(s),a=gn(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function dg(e){return mPe(function(){return e})()}function mPe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=L0e,g=null,y,b,w,S=LR,E=.5,T,C,A,I,k;function N(j){return A(j[0]*Sr,j[1]*Sr)}function F(j){return j=A.invert(j[0],j[1]),j&&[j[0]*wo,j[1]*wo]}N.stream=function(j){return I&&k===j?I:I=X2t(Q2t(c)(m(T(S(k=j)))))},N.preclip=function(j){return arguments.length?(m=j,p=void 0,L()):m},N.postclip=function(j){return arguments.length?(S=j,g=y=b=w=null,L()):S},N.clipAngle=function(j){return arguments.length?(m=+j?P2t(p=j*Sr):(p=null,L0e),L()):p*wo},N.clipExtent=function(j){return arguments.length?(S=j==null?(g=y=b=w=null,LR):nPe(g=+j[0][0],y=+j[0][1],b=+j[1][0],w=+j[1][1]),L()):g==null?null:[[g,y],[b,w]]},N.scale=function(j){return arguments.length?(n=+j,M()):n},N.translate=function(j){return arguments.length?(r=+j[0],i=+j[1],M()):[r,i]},N.center=function(j){return arguments.length?(s=j[0]%360*Sr,o=j[1]%360*Sr,M()):[s*wo,o*wo]},N.rotate=function(j){return arguments.length?(a=j[0]%360*Sr,u=j[1]%360*Sr,l=j.length>2?j[2]%360*Sr:0,M()):[a*wo,u*wo,l*wo]},N.angle=function(j){return arguments.length?(f=j%360*Sr,M()):f*wo},N.reflectX=function(j){return arguments.length?(d=j?-1:1,M()):d<0},N.reflectY=function(j){return arguments.length?(h=j?-1:1,M()):h<0},N.precision=function(j){return arguments.length?(T=Y0e(C,E=j*j),L()):Ll(E)},N.fitExtent=function(j,B){return _B(N,j,B)},N.fitSize=function(j,B){return Fte(N,j,B)},N.fitWidth=function(j,B){return Lte(N,j,B)},N.fitHeight=function(j,B){return Bte(N,j,B)};function M(){var j=K0e(n,0,0,d,h,f).apply(null,t(s,o)),B=K0e(n,r-j[0],i-j[1],d,h,f);return c=JNe(a,u,l),C=nY(t,B),A=nY(c,C),T=Y0e(C,E),L()}function L(){return I=k=null,N}return function(){return t=e.apply(this,arguments),N.invert=t.invert&&F,M()}}function jte(e){var t=0,n=Cr/3,r=mPe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Sr,n=s[1]*Sr):[t*wo,n*wo]},i}function Z2t(e){var t=Tn(e);function n(r,i){return[r*t,gn(i)/t]}return n.invert=function(r,i){return[r/t,Fc(i*t)]},n}function eAt(e,t){var n=gn(e),r=(n+gn(t))/2;if(Gr(r)<En)return Z2t(e);var i=1+n*(2*r-n),s=Ll(i)/r;function o(a,u){var l=Ll(i-2*r*gn(u))/r;return[l*gn(a*=r),s-l*Tn(a)]}return o.invert=function(a,u){var l=s-u,c=Bd(a,Gr(l))*Ad(l);return l*r<0&&(c-=Cr*Ad(a)*Ad(l)),[c/r,Fc((i-(a*a+l*l)*r*r)/(2*r))]},o}function x6(){return jte(eAt).scale(155.424).center([0,33.6442])}function gPe(){return x6().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function tAt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function nAt(){var e,t,n=gPe(),r,i=x6().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=x6().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=tAt([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+En,m+.12*h+En],[p-.214*h-En,m+.234*h-En]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+En,m+.166*h+En],[p-.115*h-En,m+.234*h-En]]).stream(l),f()},c.fitExtent=function(d,h){return _B(c,d,h)},c.fitSize=function(d,h){return Fte(c,d,h)},c.fitWidth=function(d,h){return Lte(c,d,h)},c.fitHeight=function(d,h){return Bte(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function yPe(e){return function(t,n){var r=Tn(t),i=Tn(n),s=e(r*i);return s===1/0?[2,0]:[s*i*gn(t),s*gn(n)]}}function EP(e){return function(t,n){var r=Ll(t*t+n*n),i=e(r),s=gn(i),o=Tn(i);return[Bd(t*s,r*o),Fc(r&&n*s/r)]}}var vPe=yPe(function(e){return Ll(2/(1+e))});vPe.invert=EP(function(e){return 2*Fc(e/2)});function rAt(){return dg(vPe).scale(124.75).clipAngle(180-.001)}var bPe=yPe(function(e){return(e=UNe(e))&&e/gn(e)});bPe.invert=EP(function(e){return e});function iAt(){return dg(bPe).scale(79.4188).clipAngle(180-.001)}function EB(e,t){return[e,i6(Ote((uo+t)/2))]}EB.invert=function(e,t){return[e,2*H2(jNe(t))-uo]};function sAt(){return wPe(EB).scale(961/Fl)}function wPe(e){var t=dg(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Cr*r(),d=t(T2t(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===EB?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function _M(e){return Ote((uo+e)/2)}function oAt(e,t){var n=Tn(e),r=e===t?gn(e):i6(n/Tn(t))/i6(_M(t)/_M(e)),i=n*bV(_M(e),r)/r;if(!r)return EB;function s(o,a){i>0?a<-uo+En&&(a=-uo+En):a>uo-En&&(a=uo-En);var u=i/bV(_M(a),r);return[u*gn(r*o),i-u*Tn(r*o)]}return s.invert=function(o,a){var u=i-a,l=Ad(r)*Ll(o*o+u*u),c=Bd(o,Gr(u))*Ad(u);return u*r<0&&(c-=Cr*Ad(o)*Ad(u)),[c/r,2*H2(bV(i/l,1/r))-uo]},s}function aAt(){return jte(oAt).scale(109.5).parallels([30,30])}function S6(e,t){return[e,t]}S6.invert=S6;function uAt(){return dg(S6).scale(152.63)}function lAt(e,t){var n=Tn(e),r=e===t?gn(e):(n-Tn(t))/(t-e),i=n/r+e;if(Gr(r)<En)return S6;function s(o,a){var u=i-a,l=r*o;return[u*gn(l),i-u*Tn(l)]}return s.invert=function(o,a){var u=i-a,l=Bd(o,Gr(u))*Ad(u);return u*r<0&&(l-=Cr*Ad(o)*Ad(u)),[l/r,i-Ad(r)*Ll(o*o+u*u)]},s}function cAt(){return jte(lAt).scale(131.154).center([0,13.9389])}var bk=1.340264,wk=-.081106,_k=893e-6,Ek=.003796,T6=Ll(3)/2,fAt=12;function _Pe(e,t){var n=Fc(T6*gn(t)),r=n*n,i=r*r*r;return[e*Tn(n)/(T6*(bk+3*wk*r+i*(7*_k+9*Ek*r))),n*(bk+wk*r+i*(_k+Ek*r))]}_Pe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<fAt&&(a=n*(bk+wk*r+i*(_k+Ek*r))-t,u=bk+3*wk*r+i*(7*_k+9*Ek*r),n-=o=a/u,r=n*n,i=r*r*r,!(Gr(o)<n6));++s);return[T6*e*(bk+3*wk*r+i*(7*_k+9*Ek*r))/Tn(n),Fc(gn(n)/T6)]};function dAt(){return dg(_Pe).scale(177.158)}function EPe(e,t){var n=Tn(t),r=Tn(e)*n;return[n*gn(e)/r,gn(t)/r]}EPe.invert=EP(H2);function hAt(){return dg(EPe).scale(144.049).clipAngle(60)}function pAt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=wB({point:function(S,E){var T=w([S,E]);this.stream.point(T[0],T[1])}}),m=LR,g,y;function b(){return d=e*r,h=e*i,g=y=null,w}function w(S){var E=S[0]*d,T=S[1]*h;if(s){var C=T*o-E*a;E=E*o+T*a,T=C}return[E+t,T+n]}return w.invert=function(S){var E=S[0]-t,T=S[1]-n;if(s){var C=T*o+E*a;E=E*o-T*a,T=C}return[E/d,T/h]},w.stream=function(S){return g&&y===S?g:g=p(m(y=S))},w.postclip=function(S){return arguments.length?(m=S,u=l=c=f=null,b()):m},w.clipExtent=function(S){return arguments.length?(m=S==null?(u=l=c=f=null,LR):nPe(u=+S[0][0],l=+S[0][1],c=+S[1][0],f=+S[1][1]),b()):u==null?null:[[u,l],[c,f]]},w.scale=function(S){return arguments.length?(e=+S,b()):e},w.translate=function(S){return arguments.length?(t=+S[0],n=+S[1],b()):[t,n]},w.angle=function(S){return arguments.length?(s=S%360*Sr,a=gn(s),o=Tn(s),b()):s*wo},w.reflectX=function(S){return arguments.length?(r=S?-1:1,b()):r<0},w.reflectY=function(S){return arguments.length?(i=S?-1:1,b()):i<0},w.fitExtent=function(S,E){return _B(w,S,E)},w.fitSize=function(S,E){return Fte(w,S,E)},w.fitWidth=function(S,E){return Lte(w,S,E)},w.fitHeight=function(S,E){return Bte(w,S,E)},w}function xPe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}xPe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Gr(i)>En&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function mAt(){return dg(xPe).scale(175.295)}function SPe(e,t){return[Tn(t)*gn(e),gn(t)]}SPe.invert=EP(Fc);function gAt(){return dg(SPe).scale(249.5).clipAngle(90+En)}function TPe(e,t){var n=Tn(t),r=1+Tn(e)*n;return[n*gn(e)/r,gn(t)/r]}TPe.invert=EP(function(e){return 2*H2(e)});function yAt(){return dg(TPe).scale(250).clipAngle(142)}function CPe(e,t){return[i6(Ote((uo+t)/2)),-e]}CPe.invert=function(e,t){return[-t,2*H2(jNe(e))-uo]};function vAt(){var e=wPe(CPe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function bAt(e,t){return e.parent===t.parent?1:2}function wAt(e){return e.reduce(_At,0)/e.length}function _At(e,t){return e+t.x}function EAt(e){return 1+e.reduce(xAt,0)}function xAt(e,t){return Math.max(e,t.y)}function SAt(e){for(var t;t=e.children;)e=t[0];return e}function TAt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function CAt(){var e=bAt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=wAt(h),d.y=EAt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=SAt(s),l=TAt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function AAt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function DAt(){return this.eachAfter(AAt)}function IAt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function kAt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function RAt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function NAt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function PAt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function OAt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function MAt(e){for(var t=this,n=$At(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function $At(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function FAt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function LAt(){return Array.from(this)}function BAt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function jAt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*UAt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function xB(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=HAt)):t===void 0&&(t=VAt);for(var n=new _C(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new _C(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(APe)}function zAt(){return xB(this).eachBefore(qAt)}function VAt(e){return e.children}function HAt(e){return Array.isArray(e)?e[1]:null}function qAt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function APe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function _C(e){this.data=e,this.depth=this.height=0,this.parent=null}_C.prototype=xB.prototype={constructor:_C,count:DAt,each:IAt,eachAfter:RAt,eachBefore:kAt,find:NAt,sum:PAt,sort:OAt,path:MAt,ancestors:FAt,descendants:LAt,leaves:BAt,links:jAt,copy:zAt,[Symbol.iterator]:UAt};function eF(e){return e==null?null:DPe(e)}function DPe(e){if(typeof e!="function")throw new Error;return e}function Yw(){return 0}function _S(e){return function(){return e}}const WAt=1664525,GAt=1013904223,X0e=4294967296;function YAt(){let e=1;return()=>(e=(WAt*e+GAt)%X0e)/X0e}function KAt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function XAt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function QAt(e,t){for(var n=0,r=(e=XAt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&IPe(o,s)?++n:(o=ZAt(i=JAt(i,s)),n=0);return o}function JAt(e,t){var n,r;if(SV(t,e))return[t];for(n=0;n<e.length;++n)if(EM(t,e[n])&&SV(xI(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(EM(xI(e[n],e[r]),t)&&EM(xI(e[n],t),e[r])&&EM(xI(e[r],t),e[n])&&SV(kPe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function EM(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function IPe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function SV(e,t){for(var n=0;n<t.length;++n)if(!IPe(e,t[n]))return!1;return!0}function ZAt(e){switch(e.length){case 1:return eDt(e[0]);case 2:return xI(e[0],e[1]);case 3:return kPe(e[0],e[1],e[2])}}function eDt(e){return{x:e.x,y:e.y,r:e.r}}function xI(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function kPe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,b=r*r+i*i-s*s,w=b-o*o-a*a+u*u,S=b-l*l-c*c+f*f,E=h*p-d*m,T=(p*S-m*w)/(E*2)-r,C=(m*g-p*y)/E,A=(h*w-d*S)/(E*2)-i,I=(d*y-h*g)/E,k=C*C+I*I-1,N=2*(s+T*C+A*I),F=T*T+A*A-s*s,M=-(Math.abs(k)>1e-6?(N+Math.sqrt(N*N-4*k*F))/(2*k):F/N);return{x:r+T+C*M,y:i+A+I*M,r:M}}function Q0e(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function J0e(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Z0e(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function xM(e){this._=e,this.next=null,this.previous=null}function tDt(e,t){if(!(s=(e=KAt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Q0e(r,n,i=e[2]),n=new xM(n),r=new xM(r),i=new xM(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){Q0e(n._,r._,i=e[u]),i=new xM(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(J0e(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(J0e(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=Z0e(n);(i=i.next)!==r;)(a=Z0e(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=QAt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function nDt(e){return Math.sqrt(e.value)}function RPe(){var e=null,t=1,n=1,r=Yw;function i(s){const o=YAt();return s.x=t/2,s.y=n/2,e?s.eachBefore(eye(e)).eachAfter(TV(r,.5,o)).eachBefore(tye(1)):s.eachBefore(eye(nDt)).eachAfter(TV(Yw,1,o)).eachAfter(TV(r,s.r/Math.min(t,n),o)).eachBefore(tye(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=eF(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:_S(+s),i):r},i}function eye(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function TV(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=tDt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function tye(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function NPe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function xP(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function rDt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(NPe),o}function s(o,a){return function(u){u.children&&xP(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var iDt={depth:-1},nye={},CV={};function sDt(e){return e.id}function oDt(e){return e.parentId}function rye(){var e=sDt,t=oDt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((S,E)=>aDt(n(S,E,i))),b=y.map(iye),w=new Set(y).add("");for(const S of b)w.has(S)||(w.add(S),y.push(S),b.push(iye(S)),s.push(CV));o=(S,E)=>y[E],a=(S,E)=>b[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new _C(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?nye:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===nye)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===CV&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===CV);--y)h.data=null}if(f.parent=iDt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(APe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=eF(i),r):e},r.parentId=function(i){return arguments.length?(t=eF(i),r):t},r.path=function(i){return arguments.length?(n=eF(i),r):n},r}function aDt(e){e=`${e}`;let t=e.length;return hY(e,t-1)&&!hY(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function iye(e){let t=e.length;if(t<2)return"";for(;--t>1&&!hY(e,t););return e.slice(0,t)}function hY(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function uDt(e,t){return e.parent===t.parent?1:2}function AV(e){var t=e.children;return t?t[0]:e.t}function DV(e){var t=e.children;return t?t[t.length-1]:e.t}function lDt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function cDt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function fDt(e,t,n){return e.a.parent===t.parent?e.a:n}function tF(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}tF.prototype=Object.create(_C.prototype);function dDt(e){for(var t=new tF(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new tF(s[o],o)),i.parent=n;return(t.parent=new tF(null,0)).children=[t],t}function hDt(){var e=uDt,t=1,n=1,r=null;function i(l){var c=dDt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(b){b.x<f.x&&(f=b),b.x>d.x&&(d=b),b.depth>h.depth&&(h=b)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(b){b.x=(b.x+m)*g,b.y=b.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){cDt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,b=p.m,w=m.m,S;p=DV(p),d=AV(d),p&&d;)m=AV(m),h=DV(h),h.a=l,S=p.z+b-d.z-g+e(p._,d._),S>0&&(lDt(fDt(p,l,f),l,S),g+=S,y+=S),b+=p.m,g+=d.m,w+=m.m,y+=h.m;p&&!DV(h)&&(h.t=p,h.m+=b-y),d&&!AV(m)&&(m.t=d,m.m+=g-w,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function SB(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var PPe=(1+Math.sqrt(5))/2;function OPe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,b,w,S,E,T;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=b=g,E=Math.max(p/h,h/p)/(m*e),T=g*g*E,S=Math.max(b/T,T/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>b&&(b=l),T=g*g*E,w=Math.max(b/T,T/y),w>S){g-=l;break}S=w}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?xP(u,n,r,i,m?r+=p*g/m:s):SB(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const MPe=function e(t){function n(r,i,s,o,a){OPe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(PPe);function pDt(){var e=MPe,t=!1,n=1,r=1,i=[0],s=Yw,o=Yw,a=Yw,u=Yw,l=Yw;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(NPe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=DPe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:_S(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:_S(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:_S(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:_S(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:_S(+d),c):l},c}function mDt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var b=s[f];b.x0=p,b.y0=m,b.x1=g,b.y1=y;return}for(var w=l[f],S=h/2+w,E=f+1,T=d-1;E<T;){var C=E+T>>>1;l[C]<S?E=C+1:T=C}S-l[E-1]<l[E]-S&&f+1<E&&--E;var A=l[E]-w,I=h-A;if(g-p>y-m){var k=h?(p*I+g*A)/h:g;c(f,E,A,p,m,k,y),c(E,d,I,k,m,g,y)}else{var N=h?(m*I+y*A)/h:y;c(f,E,A,p,m,g,N),c(E,d,I,p,N,g,y)}}}function gDt(e,t,n,r,i){(e.depth&1?SB:xP)(e,t,n,r,i)}const yDt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?xP(l,i,s,o,m?s+=(a-s)*l.value/m:a):SB(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=OPe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(PPe);function Sp(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ib(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const pY=Symbol("implicit");function kb(){var e=new Lge,t=[],n=[],r=pY;function i(s){let o=e.get(s);if(o===void 0){if(r!==pY)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Lge;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return kb(t,n).unknown(r)},Sp.apply(i,arguments),i}function q2(){var e=kb().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Ec(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return q2(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},Sp.apply(f(),arguments)}function vDt(e){return function(){return e}}function mY(e){return+e}var sye=[0,1];function xc(e){return e}function gY(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:vDt(isNaN(t)?NaN:.5)}function bDt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function wDt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=gY(i,r),s=n(o,s)):(r=gY(r,i),s=n(s,o)),function(a){return s(r(a))}}function _Dt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=gY(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=P1(e,a,1,r)-1;return s[u](i[u](a))}}function SP(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function TB(){var e=sye,t=sye,n=Iy,r,i,s,o=xc,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==xc&&(o=bDt(e[0],e[d-1])),a=d>2?_Dt:wDt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),wd)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,mY),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=bP,c()},f.clamp=function(d){return arguments.length?(o=d?!0:xc,c()):o!==xc},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function $Pe(){return TB()(xc,xc)}function FPe(e,t,n,r){var i=O1(e,t,n),s;switch(r=J_(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=LNe(i,o))&&(r.precision=s),Pte(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=BNe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=FNe(i))&&(r.precision=s-(r.type==="%")*2);break}}return Db(r)}function XE(e){var t=e.domain;return e.ticks=function(n){var r=t();return DG(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return FPe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=IG(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Lc(){var e=$Pe();return e.copy=function(){return SP(e,Lc())},Sp.apply(e,arguments),XE(e)}function LPe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,mY),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return LPe(e).unknown(t)},e=arguments.length?Array.from(e,mY):[0,1],XE(n)}function BPe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function oye(e){return Math.log(e)}function aye(e){return Math.exp(e)}function EDt(e){return-Math.log(-e)}function xDt(e){return-Math.exp(-e)}function SDt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function TDt(e){return e===10?SDt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function CDt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function uye(e){return(t,n)=>-e(-t,n)}function Ute(e){const t=e(oye,aye),n=t.domain;let r=10,i,s;function o(){return i=CDt(r),s=TDt(r),n()[0]<0?(i=uye(i),s=uye(s),e(EDt,xDt)):e(oye,aye),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=DG(l,c,g))}else y=DG(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=J_(u)).precision==null&&(u.trim=!0),u=Db(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(BPe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function jPe(){const e=Ute(TB()).domain([1,10]);return e.copy=()=>SP(e,jPe()).base(e.base()),Sp.apply(e,arguments),e}function lye(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function cye(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function zte(e){var t=1,n=e(lye(t),cye(t));return n.constant=function(r){return arguments.length?e(lye(t=+r),cye(t)):t},XE(n)}function UPe(){var e=zte(TB());return e.copy=function(){return SP(e,UPe()).constant(e.constant())},Sp.apply(e,arguments)}function fye(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ADt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function DDt(e){return e<0?-e*e:e*e}function Vte(e){var t=e(xc,xc),n=1;function r(){return n===1?e(xc,xc):n===.5?e(ADt,DDt):e(fye(n),fye(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},XE(t)}function Hte(){var e=Vte(TB());return e.copy=function(){return SP(e,Hte()).exponent(e.exponent())},Sp.apply(e,arguments),e}function IDt(){return Hte.apply(null,arguments).exponent(.5)}function zPe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=kRe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[P1(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(R0),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return zPe().domain(e).range(t).unknown(r)},Sp.apply(s,arguments)}function VPe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[P1(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return VPe().domain([e,t]).range(i).unknown(s)},Sp.apply(XE(o),arguments)}function HPe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[P1(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return HPe().domain(e).range(t).unknown(n)},Sp.apply(i,arguments)}const IV=new Date,kV=new Date;function ya(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>ya(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(IV.setTime(+s),kV.setTime(+o),e(IV),e(kV),Math.floor(n(IV,kV))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const EC=ya(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);EC.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ya(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):EC);EC.range;const b0=1e3,Dd=b0*60,w0=Dd*60,ry=w0*24,qte=ry*7,dye=ry*30,RV=ry*365,_0=ya(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*b0)},(e,t)=>(t-e)/b0,e=>e.getUTCSeconds());_0.range;const CB=ya(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*b0)},(e,t)=>{e.setTime(+e+t*Dd)},(e,t)=>(t-e)/Dd,e=>e.getMinutes());CB.range;const AB=ya(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Dd)},(e,t)=>(t-e)/Dd,e=>e.getUTCMinutes());AB.range;const DB=ya(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*b0-e.getMinutes()*Dd)},(e,t)=>{e.setTime(+e+t*w0)},(e,t)=>(t-e)/w0,e=>e.getHours());DB.range;const IB=ya(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*w0)},(e,t)=>(t-e)/w0,e=>e.getUTCHours());IB.range;const O0=ya(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Dd)/ry,e=>e.getDate()-1);O0.range;const d1=ya(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ry,e=>e.getUTCDate()-1);d1.range;const qPe=ya(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ry,e=>Math.floor(e/ry));qPe.range;function QE(e){return ya(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Dd)/qte)}const W2=QE(0),C6=QE(1),kDt=QE(2),RDt=QE(3),xC=QE(4),NDt=QE(5),PDt=QE(6);W2.range;C6.range;kDt.range;RDt.range;xC.range;NDt.range;PDt.range;function JE(e){return ya(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/qte)}const G2=JE(0),A6=JE(1),ODt=JE(2),MDt=JE(3),SC=JE(4),$Dt=JE(5),FDt=JE(6);G2.range;A6.range;ODt.range;MDt.range;SC.range;$Dt.range;FDt.range;const UR=ya(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());UR.range;const zR=ya(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());zR.range;const zm=ya(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());zm.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ya(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});zm.range;const Vm=ya(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Vm.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ya(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Vm.range;function WPe(e,t,n,r,i,s){const o=[[_0,1,b0],[_0,5,5*b0],[_0,15,15*b0],[_0,30,30*b0],[s,1,Dd],[s,5,5*Dd],[s,15,15*Dd],[s,30,30*Dd],[i,1,w0],[i,3,3*w0],[i,6,6*w0],[i,12,12*w0],[r,1,ry],[r,2,2*ry],[n,1,qte],[t,1,dye],[t,3,3*dye],[e,1,RV]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=KE(([,,g])=>g).right(o,d);if(h===o.length)return e.every(O1(l/RV,c/RV,f));if(h===0)return EC.every(Math.max(O1(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[LDt,BDt]=WPe(Vm,zR,G2,qPe,IB,AB),[jDt,UDt]=WPe(zm,UR,W2,O0,DB,CB);function NV(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function PV(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function TD(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function GPe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=CD(i),c=AD(i),f=CD(s),d=AD(s),h=CD(o),p=AD(o),m=CD(a),g=AD(a),y=CD(u),b=AD(u),w={a:z,A:V,b:G,B:$,c:null,d:vye,e:vye,f:cIt,g:wIt,G:EIt,H:aIt,I:uIt,j:lIt,L:YPe,m:fIt,M:dIt,p:W,q:K,Q:_ye,s:Eye,S:hIt,u:pIt,U:mIt,V:gIt,w:yIt,W:vIt,x:null,X:null,y:bIt,Y:_It,Z:xIt,"%":wye},S={a:q,A:Y,b:Z,B:ae,c:null,d:bye,e:bye,f:AIt,g:FIt,G:BIt,H:SIt,I:TIt,j:CIt,L:XPe,m:DIt,M:IIt,p:be,q:Se,Q:_ye,s:Eye,S:kIt,u:RIt,U:NIt,V:PIt,w:OIt,W:MIt,x:null,X:null,y:$It,Y:LIt,Z:jIt,"%":wye},E={a:k,A:N,b:F,B:M,c:L,d:gye,e:gye,f:rIt,g:mye,G:pye,H:yye,I:yye,j:ZDt,L:nIt,m:JDt,M:eIt,p:I,q:QDt,Q:sIt,s:oIt,S:tIt,u:WDt,U:GDt,V:YDt,w:qDt,W:KDt,x:j,X:B,y:mye,Y:pye,Z:XDt,"%":iIt};w.x=T(n,w),w.X=T(r,w),w.c=T(t,w),S.x=T(n,S),S.X=T(r,S),S.c=T(t,S);function T(we,Ce){return function(Le){var ke=[],Ze=-1,Ke=0,Ct=we.length,wt,Re,He;for(Le instanceof Date||(Le=new Date(+Le));++Ze<Ct;)we.charCodeAt(Ze)===37&&(ke.push(we.slice(Ke,Ze)),(Re=hye[wt=we.charAt(++Ze)])!=null?wt=we.charAt(++Ze):Re=wt==="e"?" ":"0",(He=Ce[wt])&&(wt=He(Le,Re)),ke.push(wt),Ke=Ze+1);return ke.push(we.slice(Ke,Ze)),ke.join("")}}function C(we,Ce){return function(Le){var ke=TD(1900,void 0,1),Ze=A(ke,we,Le+="",0),Ke,Ct;if(Ze!=Le.length)return null;if("Q"in ke)return new Date(ke.Q);if("s"in ke)return new Date(ke.s*1e3+("L"in ke?ke.L:0));if(Ce&&!("Z"in ke)&&(ke.Z=0),"p"in ke&&(ke.H=ke.H%12+ke.p*12),ke.m===void 0&&(ke.m="q"in ke?ke.q:0),"V"in ke){if(ke.V<1||ke.V>53)return null;"w"in ke||(ke.w=1),"Z"in ke?(Ke=PV(TD(ke.y,0,1)),Ct=Ke.getUTCDay(),Ke=Ct>4||Ct===0?A6.ceil(Ke):A6(Ke),Ke=d1.offset(Ke,(ke.V-1)*7),ke.y=Ke.getUTCFullYear(),ke.m=Ke.getUTCMonth(),ke.d=Ke.getUTCDate()+(ke.w+6)%7):(Ke=NV(TD(ke.y,0,1)),Ct=Ke.getDay(),Ke=Ct>4||Ct===0?C6.ceil(Ke):C6(Ke),Ke=O0.offset(Ke,(ke.V-1)*7),ke.y=Ke.getFullYear(),ke.m=Ke.getMonth(),ke.d=Ke.getDate()+(ke.w+6)%7)}else("W"in ke||"U"in ke)&&("w"in ke||(ke.w="u"in ke?ke.u%7:"W"in ke?1:0),Ct="Z"in ke?PV(TD(ke.y,0,1)).getUTCDay():NV(TD(ke.y,0,1)).getDay(),ke.m=0,ke.d="W"in ke?(ke.w+6)%7+ke.W*7-(Ct+5)%7:ke.w+ke.U*7-(Ct+6)%7);return"Z"in ke?(ke.H+=ke.Z/100|0,ke.M+=ke.Z%100,PV(ke)):NV(ke)}}function A(we,Ce,Le,ke){for(var Ze=0,Ke=Ce.length,Ct=Le.length,wt,Re;Ze<Ke;){if(ke>=Ct)return-1;if(wt=Ce.charCodeAt(Ze++),wt===37){if(wt=Ce.charAt(Ze++),Re=E[wt in hye?Ce.charAt(Ze++):wt],!Re||(ke=Re(we,Le,ke))<0)return-1}else if(wt!=Le.charCodeAt(ke++))return-1}return ke}function I(we,Ce,Le){var ke=l.exec(Ce.slice(Le));return ke?(we.p=c.get(ke[0].toLowerCase()),Le+ke[0].length):-1}function k(we,Ce,Le){var ke=h.exec(Ce.slice(Le));return ke?(we.w=p.get(ke[0].toLowerCase()),Le+ke[0].length):-1}function N(we,Ce,Le){var ke=f.exec(Ce.slice(Le));return ke?(we.w=d.get(ke[0].toLowerCase()),Le+ke[0].length):-1}function F(we,Ce,Le){var ke=y.exec(Ce.slice(Le));return ke?(we.m=b.get(ke[0].toLowerCase()),Le+ke[0].length):-1}function M(we,Ce,Le){var ke=m.exec(Ce.slice(Le));return ke?(we.m=g.get(ke[0].toLowerCase()),Le+ke[0].length):-1}function L(we,Ce,Le){return A(we,t,Ce,Le)}function j(we,Ce,Le){return A(we,n,Ce,Le)}function B(we,Ce,Le){return A(we,r,Ce,Le)}function z(we){return o[we.getDay()]}function V(we){return s[we.getDay()]}function G(we){return u[we.getMonth()]}function $(we){return a[we.getMonth()]}function W(we){return i[+(we.getHours()>=12)]}function K(we){return 1+~~(we.getMonth()/3)}function q(we){return o[we.getUTCDay()]}function Y(we){return s[we.getUTCDay()]}function Z(we){return u[we.getUTCMonth()]}function ae(we){return a[we.getUTCMonth()]}function be(we){return i[+(we.getUTCHours()>=12)]}function Se(we){return 1+~~(we.getUTCMonth()/3)}return{format:function(we){var Ce=T(we+="",w);return Ce.toString=function(){return we},Ce},parse:function(we){var Ce=C(we+="",!1);return Ce.toString=function(){return we},Ce},utcFormat:function(we){var Ce=T(we+="",S);return Ce.toString=function(){return we},Ce},utcParse:function(we){var Ce=C(we+="",!0);return Ce.toString=function(){return we},Ce}}}var hye={"-":"",_:" ",0:"0"},Ua=/^\s*\d+/,zDt=/^%/,VDt=/[\\^$*+?|[\]().{}]/g;function hi(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function HDt(e){return e.replace(VDt,"\\$&")}function CD(e){return new RegExp("^(?:"+e.map(HDt).join("|")+")","i")}function AD(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function qDt(e,t,n){var r=Ua.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function WDt(e,t,n){var r=Ua.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function GDt(e,t,n){var r=Ua.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function YDt(e,t,n){var r=Ua.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function KDt(e,t,n){var r=Ua.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function pye(e,t,n){var r=Ua.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function mye(e,t,n){var r=Ua.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function XDt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function QDt(e,t,n){var r=Ua.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function JDt(e,t,n){var r=Ua.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function gye(e,t,n){var r=Ua.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function ZDt(e,t,n){var r=Ua.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function yye(e,t,n){var r=Ua.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function eIt(e,t,n){var r=Ua.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function tIt(e,t,n){var r=Ua.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function nIt(e,t,n){var r=Ua.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function rIt(e,t,n){var r=Ua.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function iIt(e,t,n){var r=zDt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function sIt(e,t,n){var r=Ua.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function oIt(e,t,n){var r=Ua.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function vye(e,t){return hi(e.getDate(),t,2)}function aIt(e,t){return hi(e.getHours(),t,2)}function uIt(e,t){return hi(e.getHours()%12||12,t,2)}function lIt(e,t){return hi(1+O0.count(zm(e),e),t,3)}function YPe(e,t){return hi(e.getMilliseconds(),t,3)}function cIt(e,t){return YPe(e,t)+"000"}function fIt(e,t){return hi(e.getMonth()+1,t,2)}function dIt(e,t){return hi(e.getMinutes(),t,2)}function hIt(e,t){return hi(e.getSeconds(),t,2)}function pIt(e){var t=e.getDay();return t===0?7:t}function mIt(e,t){return hi(W2.count(zm(e)-1,e),t,2)}function KPe(e){var t=e.getDay();return t>=4||t===0?xC(e):xC.ceil(e)}function gIt(e,t){return e=KPe(e),hi(xC.count(zm(e),e)+(zm(e).getDay()===4),t,2)}function yIt(e){return e.getDay()}function vIt(e,t){return hi(C6.count(zm(e)-1,e),t,2)}function bIt(e,t){return hi(e.getFullYear()%100,t,2)}function wIt(e,t){return e=KPe(e),hi(e.getFullYear()%100,t,2)}function _It(e,t){return hi(e.getFullYear()%1e4,t,4)}function EIt(e,t){var n=e.getDay();return e=n>=4||n===0?xC(e):xC.ceil(e),hi(e.getFullYear()%1e4,t,4)}function xIt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+hi(t/60|0,"0",2)+hi(t%60,"0",2)}function bye(e,t){return hi(e.getUTCDate(),t,2)}function SIt(e,t){return hi(e.getUTCHours(),t,2)}function TIt(e,t){return hi(e.getUTCHours()%12||12,t,2)}function CIt(e,t){return hi(1+d1.count(Vm(e),e),t,3)}function XPe(e,t){return hi(e.getUTCMilliseconds(),t,3)}function AIt(e,t){return XPe(e,t)+"000"}function DIt(e,t){return hi(e.getUTCMonth()+1,t,2)}function IIt(e,t){return hi(e.getUTCMinutes(),t,2)}function kIt(e,t){return hi(e.getUTCSeconds(),t,2)}function RIt(e){var t=e.getUTCDay();return t===0?7:t}function NIt(e,t){return hi(G2.count(Vm(e)-1,e),t,2)}function QPe(e){var t=e.getUTCDay();return t>=4||t===0?SC(e):SC.ceil(e)}function PIt(e,t){return e=QPe(e),hi(SC.count(Vm(e),e)+(Vm(e).getUTCDay()===4),t,2)}function OIt(e){return e.getUTCDay()}function MIt(e,t){return hi(A6.count(Vm(e)-1,e),t,2)}function $It(e,t){return hi(e.getUTCFullYear()%100,t,2)}function FIt(e,t){return e=QPe(e),hi(e.getUTCFullYear()%100,t,2)}function LIt(e,t){return hi(e.getUTCFullYear()%1e4,t,4)}function BIt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?SC(e):SC.ceil(e),hi(e.getUTCFullYear()%1e4,t,4)}function jIt(){return"+0000"}function wye(){return"%"}function _ye(e){return+e}function Eye(e){return Math.floor(+e/1e3)}var Jx,Wte,JPe,TP,ZPe;UIt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function UIt(e){return Jx=GPe(e),Wte=Jx.format,JPe=Jx.parse,TP=Jx.utcFormat,ZPe=Jx.utcParse,Jx}function zIt(e){return new Date(e)}function VIt(e){return e instanceof Date?+e:+new Date(+e)}function Gte(e,t,n,r,i,s,o,a,u,l){var c=$Pe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),b=l("%b %d"),w=l("%B"),S=l("%Y");function E(T){return(u(T)<T?h:a(T)<T?p:o(T)<T?m:s(T)<T?g:r(T)<T?i(T)<T?y:b:n(T)<T?w:S)(T)}return c.invert=function(T){return new Date(f(T))},c.domain=function(T){return arguments.length?d(Array.from(T,VIt)):d().map(zIt)},c.ticks=function(T){var C=d();return e(C[0],C[C.length-1],T??10)},c.tickFormat=function(T,C){return C==null?E:l(C)},c.nice=function(T){var C=d();return(!T||typeof T.range!="function")&&(T=t(C[0],C[C.length-1],T??10)),T?d(BPe(C,T)):c},c.copy=function(){return SP(c,Gte(e,t,n,r,i,s,o,a,u,l))},c}function Yte(){return Sp.apply(Gte(jDt,UDt,zm,UR,W2,O0,DB,CB,_0,Wte).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function HIt(){return Sp.apply(Gte(LDt,BDt,Vm,zR,G2,d1,IB,AB,_0,TP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function kB(){var e=0,t=1,n,r,i,s,o=xc,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Iy),l.rangeRound=c(bP),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Rb(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Kte(){var e=XE(kB()(xc));return e.copy=function(){return Rb(e,Kte())},Ib.apply(e,arguments)}function eOe(){var e=Ute(kB()).domain([1,10]);return e.copy=function(){return Rb(e,eOe()).base(e.base())},Ib.apply(e,arguments)}function tOe(){var e=zte(kB());return e.copy=function(){return Rb(e,tOe()).constant(e.constant())},Ib.apply(e,arguments)}function Xte(){var e=Vte(kB());return e.copy=function(){return Rb(e,Xte()).exponent(e.exponent())},Ib.apply(e,arguments)}function qIt(){return Xte.apply(null,arguments).exponent(.5)}function RB(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=xc,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,b,w;return arguments.length?([y,b,w]=g,l=xte(m,[y,b,w]),h):[l(0),l(.5),l(1)]}}return h.range=p(Iy),h.rangeRound=p(bP),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function nOe(){var e=XE(RB()(xc));return e.copy=function(){return Rb(e,nOe())},Ib.apply(e,arguments)}function rOe(){var e=Ute(RB()).domain([.1,1,10]);return e.copy=function(){return Rb(e,rOe()).base(e.base())},Ib.apply(e,arguments)}function iOe(){var e=zte(RB());return e.copy=function(){return Rb(e,iOe()).constant(e.constant())},Ib.apply(e,arguments)}function Qte(){var e=Vte(RB());return e.copy=function(){return Rb(e,Qte()).exponent(e.exponent())},Ib.apply(e,arguments)}function WIt(){return Qte.apply(null,arguments).exponent(.5)}function Tp(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const GIt=Tp("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),YIt=Tp("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),KIt=Tp("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),XIt=Tp("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),QIt=Tp("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),JIt=Tp("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),ZIt=Tp("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),ekt=Tp("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),tkt=Tp("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),nkt=Tp("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),NB=Tp("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function hr(e){return function(){return e}}const xye=Math.abs,Au=Math.atan2,mw=Math.cos,rkt=Math.max,OV=Math.min,jp=Math.sin,p_=Math.sqrt,Ru=1e-12,TC=Math.PI,D6=TC/2,xk=2*TC;function ikt(e){return e>1?0:e<-1?TC:Math.acos(e)}function Sye(e){return e>=1?D6:e<=-1?-D6:Math.asin(e)}function PB(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Dte(t)}function skt(e){return e.innerRadius}function okt(e){return e.outerRadius}function akt(e){return e.startAngle}function ukt(e){return e.endAngle}function lkt(e){return e&&e.padAngle}function ckt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<Ru))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function SM(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/p_(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,b=p-d,w=m-h,S=b*b+w*w,E=i-s,T=d*m-p*h,C=(w<0?-1:1)*p_(rkt(0,E*E*S-T*T)),A=(T*w-b*C)/S,I=(-T*b-w*C)/S,k=(T*w+b*C)/S,N=(-T*b+w*C)/S,F=A-g,M=I-y,L=k-g,j=N-y;return F*F+M*M>L*L+j*j&&(A=k,I=N),{cx:A,cy:I,x01:-c,y01:-f,x11:A*(i/E-1),y11:I*(i/E-1)}}function yY(){var e=skt,t=okt,n=hr(0),r=null,i=akt,s=ukt,o=lkt,a=null,u=PB(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-D6,m=s.apply(this,arguments)-D6,g=xye(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>Ru))a.moveTo(0,0);else if(g>xk-Ru)a.moveTo(h*mw(p),h*jp(p)),a.arc(0,0,h,p,m,!y),d>Ru&&(a.moveTo(d*mw(m),d*jp(m)),a.arc(0,0,d,m,p,y));else{var b=p,w=m,S=p,E=m,T=g,C=g,A=o.apply(this,arguments)/2,I=A>Ru&&(r?+r.apply(this,arguments):p_(d*d+h*h)),k=OV(xye(h-d)/2,+n.apply(this,arguments)),N=k,F=k,M,L;if(I>Ru){var j=Sye(I/d*jp(A)),B=Sye(I/h*jp(A));(T-=j*2)>Ru?(j*=y?1:-1,S+=j,E-=j):(T=0,S=E=(p+m)/2),(C-=B*2)>Ru?(B*=y?1:-1,b+=B,w-=B):(C=0,b=w=(p+m)/2)}var z=h*mw(b),V=h*jp(b),G=d*mw(E),$=d*jp(E);if(k>Ru){var W=h*mw(w),K=h*jp(w),q=d*mw(S),Y=d*jp(S),Z;if(g<TC)if(Z=ckt(z,V,q,Y,W,K,G,$)){var ae=z-Z[0],be=V-Z[1],Se=W-Z[0],we=K-Z[1],Ce=1/jp(ikt((ae*Se+be*we)/(p_(ae*ae+be*be)*p_(Se*Se+we*we)))/2),Le=p_(Z[0]*Z[0]+Z[1]*Z[1]);N=OV(k,(d-Le)/(Ce-1)),F=OV(k,(h-Le)/(Ce+1))}else N=F=0}C>Ru?F>Ru?(M=SM(q,Y,z,V,h,F,y),L=SM(W,K,G,$,h,F,y),a.moveTo(M.cx+M.x01,M.cy+M.y01),F<k?a.arc(M.cx,M.cy,F,Au(M.y01,M.x01),Au(L.y01,L.x01),!y):(a.arc(M.cx,M.cy,F,Au(M.y01,M.x01),Au(M.y11,M.x11),!y),a.arc(0,0,h,Au(M.cy+M.y11,M.cx+M.x11),Au(L.cy+L.y11,L.cx+L.x11),!y),a.arc(L.cx,L.cy,F,Au(L.y11,L.x11),Au(L.y01,L.x01),!y))):(a.moveTo(z,V),a.arc(0,0,h,b,w,!y)):a.moveTo(z,V),!(d>Ru)||!(T>Ru)?a.lineTo(G,$):N>Ru?(M=SM(G,$,W,K,d,-N,y),L=SM(z,V,q,Y,d,-N,y),a.lineTo(M.cx+M.x01,M.cy+M.y01),N<k?a.arc(M.cx,M.cy,N,Au(M.y01,M.x01),Au(L.y01,L.x01),!y):(a.arc(M.cx,M.cy,N,Au(M.y01,M.x01),Au(M.y11,M.x11),!y),a.arc(0,0,d,Au(M.cy+M.y11,M.cx+M.x11),Au(L.cy+L.y11,L.cx+L.x11),y),a.arc(L.cx,L.cy,N,Au(L.y11,L.x11),Au(L.y01,L.x01),!y))):a.arc(0,0,d,E,S,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-TC/2;return[mw(f)*c,jp(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:hr(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:hr(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:hr(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:hr(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:hr(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:hr(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:hr(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function OB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sOe(e){this._context=e}sOe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Jte(e){return new sOe(e)}function oOe(e){return e[0]}function aOe(e){return e[1]}function Zte(e,t){var n=hr(!0),r=null,i=Jte,s=null,o=PB(a);e=typeof e=="function"?e:e===void 0?oOe:hr(e),t=typeof t=="function"?t:t===void 0?aOe:hr(t);function a(u){var l,c=(u=OB(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:hr(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:hr(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:hr(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function uOe(e,t,n){var r=null,i=hr(!0),s=null,o=Jte,a=null,u=PB(l);e=typeof e=="function"?e:e===void 0?oOe:hr(+e),t=typeof t=="function"?t:hr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?aOe:hr(+n);function l(f){var d,h,p,m=(f=OB(f)).length,g,y=!1,b,w=new Array(m),S=new Array(m);for(s==null&&(a=o(b=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(w[p],S[p]);a.lineEnd(),a.areaEnd()}y&&(w[d]=+e(g,d,f),S[d]=+t(g,d,f),a.point(r?+r(g,d,f):w[d],n?+n(g,d,f):S[d]))}if(b)return a=null,b+""||null}function c(){return Zte().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:hr(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:hr(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:hr(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:hr(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:hr(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:hr(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:hr(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function fkt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function dkt(e){return e}function hkt(){var e=dkt,t=fkt,n=null,r=hr(0),i=hr(xk),s=hr(0);function o(a){var u,l=(a=OB(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(xk,Math.max(-xk,i.apply(this,arguments)-m)),y,b=Math.min(Math.abs(g)/l,s.apply(this,arguments)),w=b*(g<0?-1:1),S;for(u=0;u<l;++u)(S=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=S);for(t!=null?h.sort(function(E,T){return t(p[E],p[T])}):n!=null&&h.sort(function(E,T){return n(a[E],a[T])}),u=0,f=d?(g-l*w)/d:0;u<l;++u,m=y)c=h[u],S=p[c],y=m+(S>0?S*f:0)+w,p[c]={data:a[c],index:u,value:S,startAngle:m,endAngle:y,padAngle:b};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:hr(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:hr(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:hr(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:hr(+a),o):s},o}const pkt={draw(e,t){const n=p_(t/TC);e.moveTo(n,0),e.arc(0,0,n,0,xk)}};function mkt(e,t){let n=null,r=PB(i);e=typeof e=="function"?e:hr(e||pkt),t=typeof t=="function"?t:hr(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:hr(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:hr(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function $1(){}function I6(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function MB(e){this._context=e}MB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:I6(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:I6(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gkt(e){return new MB(e)}function lOe(e){this._context=e}lOe.prototype={areaStart:$1,areaEnd:$1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:I6(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ykt(e){return new lOe(e)}function cOe(e){this._context=e}cOe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:I6(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function vkt(e){return new cOe(e)}function fOe(e,t){this._basis=new MB(e),this._beta=t}fOe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const bkt=function e(t){function n(r){return t===1?new MB(r):new fOe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function k6(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function ene(e,t){this._context=e,this._k=(1-t)/6}ene.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:k6(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:k6(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const wkt=function e(t){function n(r){return new ene(r,t)}return n.tension=function(r){return e(+r)},n}(0);function tne(e,t){this._context=e,this._k=(1-t)/6}tne.prototype={areaStart:$1,areaEnd:$1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:k6(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const _kt=function e(t){function n(r){return new tne(r,t)}return n.tension=function(r){return e(+r)},n}(0);function nne(e,t){this._context=e,this._k=(1-t)/6}nne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:k6(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ekt=function e(t){function n(r){return new nne(r,t)}return n.tension=function(r){return e(+r)},n}(0);function rne(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Ru){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Ru){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function dOe(e,t){this._context=e,this._alpha=t}dOe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:rne(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const xkt=function e(t){function n(r){return t?new dOe(r,t):new ene(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function hOe(e,t){this._context=e,this._alpha=t}hOe.prototype={areaStart:$1,areaEnd:$1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:rne(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Skt=function e(t){function n(r){return t?new hOe(r,t):new tne(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function pOe(e,t){this._context=e,this._alpha=t}pOe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:rne(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Tkt=function e(t){function n(r){return t?new pOe(r,t):new nne(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function mOe(e){this._context=e}mOe.prototype={areaStart:$1,areaEnd:$1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Ckt(e){return new mOe(e)}function Tye(e){return e<0?-1:1}function Cye(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Tye(s)+Tye(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Aye(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function MV(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function R6(e){this._context=e}R6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:MV(this,this._t0,Aye(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,MV(this,Aye(this,n=Cye(this,e,t)),n);break;default:MV(this,this._t0,n=Cye(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function gOe(e){this._context=new yOe(e)}(gOe.prototype=Object.create(R6.prototype)).point=function(e,t){R6.prototype.point.call(this,t,e)};function yOe(e){this._context=e}yOe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function Akt(e){return new R6(e)}function Dkt(e){return new gOe(e)}function vOe(e){this._context=e}vOe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Dye(e),i=Dye(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Dye(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Ikt(e){return new vOe(e)}function $B(e,t){this._context=e,this._t=t}$B.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function kkt(e){return new $B(e,.5)}function Rkt(e){return new $B(e,0)}function Nkt(e){return new $B(e,1)}function Iye(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function kye(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Pkt(e,t){return e[t]}function Okt(e){const t=[];return t.key=e,t}function Mkt(){var e=hr([]),t=kye,n=Iye,r=Pkt;function i(s){var o=Array.from(e.apply(this,arguments),Okt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=OB(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:hr(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:hr(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?kye:typeof s=="function"?s:hr(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??Iye,i):n},i}function SI(e,t,n){this.k=e,this.x=t,this.y=n}SI.prototype={constructor:SI,scale:function(e){return e===1?this:new SI(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new SI(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};SI.prototype;function ine({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=P.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=P.useCallback(c=>(s?TP("%B"):Db(".2s"))(c),[s]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:_.jsx(If,{children:_.jsx(qi,{gap:3,children:_.jsx(gt,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>_.jsxs("g",{transform:`translate(${f}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),o?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:_.jsx(If,{children:_.jsx(hs,{withinPortal:!0,label:c,children:_.jsx(gt,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const $kt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:ine},Symbol.toStringTag,{value:"Module"}));function bOe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=P.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(If,{children:_.jsx(qi,{gap:3,children:_.jsx(gt,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${n}, ${l})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),s?_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,_.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:_.jsx("foreignObject",{width:a,height:20,children:_.jsx(qi,{style:{width:"100%",height:"100%"},justify:"right",children:_.jsx(gt,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const Fkt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:bOe},Symbol.toStringTag,{value:"Module"})),rd={top:15,left:100,right:50,bottom:50};function vY({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=Zh(),o=P.useMemo(()=>s-rd.left-rd.right,[s]),a=P.useMemo(()=>i-rd.top-rd.bottom,[i]),u=P.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return kb(NB).domain(d)},[n,t.category]),l=P.useMemo(()=>e?Lc([rd.left,o+rd.left]).domain([0,N0(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=P.useMemo(()=>e?q2([rd.top,a+rd.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=P.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:_.jsxs("g",{children:[_.jsx("rect",{x:rd.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-rd.left},h),_.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?_.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(ine,{xScale:l,yRange:c.range(),vertPosition:a+rd.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?_.jsx(bOe,{yScale:c,horizontalPosition:rd.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):_.jsx(Yd,{})}const Lkt=Object.freeze(Object.defineProperty({__proto__:null,Bar:vY,default:vY},Symbol.toStringTag,{value:"Module"})),ci=Array.isArray;function Bc(e){return e!=null?ci(e)?e:[e]:[]}function Bkt(e=0,t=1/0){return`${Rye(e)} < row_number() && row_number() <= ${Rye(t)}`}function Rye(e){return e<0?`count() + ${e}`:e}class wOe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(Bkt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Bc(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function pr(e){throw Error(e)}function Bl(e){return typeof e=="number"}function _s(e){return typeof e=="function"}function FB(e,t){const n=Array(e);if(_s(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let jkt=class extends wOe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){pr("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){pr("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){pr("Not implemented")}getter(t){pr("Not implemented")}objects(t){pr("Not implemented")}object(t){pr("Not implemented")}[Symbol.iterator](){pr("Not implemented")}print(t={}){Bl(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=FB(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},Ukt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},zkt=function(e){return e&&_s(e.get)?e:new Ukt(e)};function iy(e){return e instanceof Date}function Qu(e){return e===Object(e)}function N6(e){return e instanceof RegExp}function mu(e){return typeof e=="string"}function Vkt(e,t){const n=r=>pr(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?Nye(e.entries(),t):iy(e)?n("Date"):N6(e)?n("RegExp"):mu(e)?n():ci(e)?Hkt(e,t):_s(e[Symbol.iterator])?qkt(e,t):Qu(e)?Nye(Object.entries(e),t):n()}function Nye(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function Hkt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function qkt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:Wkt}=Object.prototype;function cp(e,t){return Wkt.call(e,t)}function Wf(e){return e?new Pye({...e.data()},e.columnNames()):new Pye}class Pye{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return cp(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const ai=void 0,Gkt=Object.getPrototypeOf(Int8Array);function CP(e){return e instanceof Gkt}function m_(e){return ci(e)||CP(e)}function qh(e){return e!=null&&e===e}const DD=e=>m_(e)||mu(e),Ykt={compact:e=>m_(e)?e.filter(t=>qh(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>DD(e)?e.includes(t,n):!1,indexof:(e,t)=>DD(e)?e.indexOf(t):-1,join:(e,t)=>m_(e)?e.join(t):ai,lastindexof:(e,t)=>DD(e)?e.lastIndexOf(t):-1,length:e=>DD(e)?e.length:0,pluck:(e,t)=>m_(e)?e.map(n=>qh(n)?n[t]:ai):ai,reverse:e=>m_(e)?e.slice().reverse():mu(e)?e.split("").reverse().join(""):ai,slice:(e,t,n)=>DD(e)?e.slice(t,n):ai};function Kkt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function nF(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Up=e=>(e<10?"0":"")+e,Xkt=e=>e<0?"-"+nF(-e,6):e>9999?"+"+nF(e,6):nF(e,4);function _Oe(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return Xkt(e)+"-"+Up(t+1)+"-"+Up(n)+(!u||o?"T"+Up(r)+":"+Up(i)+":"+Up(s)+"."+nF(o,3)+l:s?"T"+Up(r)+":"+Up(i)+":"+Up(s)+l:i||r||!a?"T"+Up(r)+":"+Up(i)+l:"")}function EOe(e,t){return isNaN(e)?"Invalid Date":_Oe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function LB(e,t){return isNaN(e)?"Invalid Date":_Oe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const Qkt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function Jkt(e){return e.match(Qkt)&&!isNaN(Date.parse(e))}function Zkt(e,t=Date.parse){return Jkt(e)?t(e):e}const xOe=6e4,SOe=864e5,TOe=6048e5,io=new Date,so=new Date,yo=e=>(io.setTime(typeof e=="string"?Zkt(e):e),io);function eRt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function tRt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function nRt(e){so.setTime(+e),so.setHours(0,0,0,0),io.setTime(+so),io.setMonth(0),io.setDate(1);const t=(so.getTimezoneOffset()-io.getTimezoneOffset())*xOe;return Math.floor(1+(so-io-t)/SOe)}function rRt(e){so.setTime(+e),so.setUTCHours(0,0,0,0);const t=Date.UTC(so.getUTCFullYear(),0,1);return Math.floor(1+(so-t)/SOe)}function iRt(e,t){const n=t||0;so.setTime(+e),so.setDate(so.getDate()-(so.getDay()+7-n)%7),so.setHours(0,0,0,0),io.setTime(+e),io.setMonth(0),io.setDate(1),io.setDate(1-(io.getDay()+7-n)%7),io.setHours(0,0,0,0);const r=(so.getTimezoneOffset()-io.getTimezoneOffset())*xOe;return Math.floor((1+(so-io)-r)/TOe)}function sRt(e,t){const n=t||0;return so.setTime(+e),so.setUTCDate(so.getUTCDate()-(so.getUTCDay()+7-n)%7),so.setUTCHours(0,0,0,0),io.setTime(+e),io.setUTCMonth(0),io.setUTCDate(1),io.setUTCDate(1-(io.getUTCDay()+7-n)%7),io.setUTCHours(0,0,0,0),Math.floor((1+(so-io))/TOe)}const oRt={format_date:(e,t)=>EOe(yo(e),!t),format_utcdate:(e,t)=>LB(yo(e),!t),timestamp:e=>+yo(e),year:e=>yo(e).getFullYear(),quarter:e=>Math.floor(yo(e).getMonth()/3),month:e=>yo(e).getMonth(),date:e=>yo(e).getDate(),dayofweek:e=>yo(e).getDay(),hours:e=>yo(e).getHours(),minutes:e=>yo(e).getMinutes(),seconds:e=>yo(e).getSeconds(),milliseconds:e=>yo(e).getMilliseconds(),utcyear:e=>yo(e).getUTCFullYear(),utcquarter:e=>Math.floor(yo(e).getUTCMonth()/3),utcmonth:e=>yo(e).getUTCMonth(),utcdate:e=>yo(e).getUTCDate(),utcdayofweek:e=>yo(e).getUTCDay(),utchours:e=>yo(e).getUTCHours(),utcminutes:e=>yo(e).getUTCMinutes(),utcseconds:e=>yo(e).getUTCSeconds(),utcmilliseconds:e=>yo(e).getUTCMilliseconds(),datetime:eRt,dayofyear:nRt,week:iRt,utcdatetime:tRt,utcdayofyear:rRt,utcweek:sRt,now:Date.now};function sne(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:iy(e)||iy(t)?+e==+t:N6(e)&&N6(t)?e+""==t+"":Qu(e)&&Qu(t)?aRt(e,t):!1}function aRt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Oye(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Oye(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!sne(e[o],t[o]))return!1}return!0}function Oye(e,t,n=sne){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const uRt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let lRt=Math.random;function Y2(){return lRt()}const cRt={random:Y2,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function one(e){return e instanceof Map}function fRt(e){return e instanceof Set}function rF(e){return one(e)||fRt(e)}function $V(e){return Array.from(e)}const dRt={has:(e,t)=>rF(e)?e.has(t):e!=null?cp(e,t):!1,keys:e=>one(e)?$V(e.keys()):e!=null?Object.keys(e):[],values:e=>rF(e)?$V(e.values()):e!=null?Object.values(e):[],entries:e=>rF(e)?$V(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):ai};function hRt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(cp(t,e))return t[e];return n!==void 0?n:e}function pRt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const mRt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},KS={bin:Kkt,equal:sne,recode:hRt,sequence:pRt,...Ykt,...oRt,...uRt,...cRt,...dRt,...mRt};function VR(e){return typeof e=="bigint"}function Hm(e){return e===void 0?e+"":VR(e)?e+"n":JSON.stringify(e)}function ar(e,t=[],n=[]){return new gRt(e,Bc(t),Bc(n))}let gRt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${Hm(n)}]`),...this.params.map(Hm)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const COe=e=>ar("any",e),AOe=()=>ar("count"),DOe=e=>ar("array_agg",e),IOe=e=>ar("array_agg_distinct",e),kOe=(e,t)=>ar("map_agg",[e,t]),ROe=(e,t)=>ar("object_agg",[e,t]),NOe=(e,t)=>ar("entries_agg",[e,t]);({...KS});function yRt(e,t){e=rF(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function vRt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function bRt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function wRt(e,t,n,r){const i=r==="map"||r===!0?kOe:r==="entries"?NOe:r==="object"?ROe:pr('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=yRt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:DOe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const _Rt="ArrayPattern",ERt="ArrowFunctionExpression",xRt="FunctionExpression",h1="Identifier",K2="Literal",POe="MemberExpression",SRt="ObjectExpression",OOe="ObjectPattern",MOe="Property",AP="Column",TRt="Constant",CRt="Dictionary",ARt="Function",DRt="Parameter",$Oe="Op",is=(e,t)=>{const n=IRt[e.type];return n?n(e,t):pr(`Unsupported expression construct: ${e.type}`)},FV=(e,t)=>"("+is(e.left,t)+" "+e.operator+" "+is(e.right,t)+")",LV=(e,t)=>"("+Kp(e.params,t)+")=>"+is(e.body,t),Mye=(e,t)=>is(e.callee,t)+"("+Kp(e.arguments,t)+")",Kp=(e,t,n=",")=>e.map(r=>is(r,t)).join(n),FOe=e=>e.computed?`[${Hm(e.name)}]`:`.${e.name}`,$ye=(e,t,n)=>{const r=e.table||"";return`data${r}${FOe(e)}.${n}(${t.index}${r})`},IRt={Constant:e=>e.raw,Column:(e,t)=>$ye(e,t,"get"),Dictionary:(e,t)=>$ye(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${FOe(e)}`,Op:(e,t)=>`op(${Hm(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+is(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=is(e.object,t),i=is(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:Mye,NewExpression:(e,t)=>"new "+Mye(e,t),ArrayExpression:(e,t)=>"["+Kp(e.elements,t)+"]",AssignmentExpression:FV,BinaryExpression:FV,LogicalExpression:FV,UnaryExpression:(e,t)=>"("+e.operator+is(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+is(e.test,t)+"?"+is(e.consequent,t)+":"+is(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Kp(e.properties,t)+"})",Property:(e,t)=>{const n=is(e.key,t);return(e.computed?`[${n}]`:n)+":"+is(e.value,t)},ArrowFunctionExpression:LV,FunctionExpression:LV,FunctionDeclaration:LV,ArrayPattern:(e,t)=>"["+Kp(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Kp(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Kp(e.declarations,t,","),VariableDeclarator:(e,t)=>is(e.id,t)+"="+is(e.init,t),SpreadElement:(e,t)=>"..."+is(e.argument,t),BlockStatement:(e,t)=>"{"+Kp(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>is(e.expression,t),IfStatement:(e,t)=>"if ("+is(e.test,t)+")"+is(e.consequent,t)+(e.alternate?" else "+is(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+is(e.discriminant,t)+") {"+Kp(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+is(e.test,t):"default")+": "+Kp(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+is(e.argument,t),Program:(e,t)=>is(e.body[0],t)};function P6(e,t={index:"row"}){return is(e,t)}function kRt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function CC(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:iy(e)?+e:ci(e)||CP(e)?`[${e.map(CC)}]`:N6(e)?e+"":RRt(e)}function RRt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${CC(e[r])}`;return t+="}",t}function O6(e,t){const n=e.length;return n===1?(r,i)=>CC(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=CC(a)}return s}}function NRt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=CC(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=CC(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function r0(){}function PRt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function ea(e){return e.init=e.init||r0,e.add=e.add||r0,e.rem=e.rem||r0,e}function Fye(e,t){return e.product_v=!1,e.product=t}const LOe={count:{create:()=>ea({value:e=>e.count}),param:[]},array_agg:{create:()=>ea({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>ea({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>ea({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>ea({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>ea({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:ai}),param:[1]},valid:{create:()=>ea({value:e=>e.valid}),param:[1]},invalid:{create:()=>ea({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=NRt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>ea({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>ea({value:e=>{let t=ai,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:ai,add:(e,t)=>VR(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>Fye(e,1),value:e=>e.valid?e.product_v?Fye(e,PRt(e.list.values())):e.product:void 0,add:(e,t)=>VR(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:ai,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>ea({value:e=>e.valid?e.mean:ai}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):ai,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>ea({value:e=>e.valid>1?e.dev/e.valid:ai}),param:[1],req:["variance"]},stdev:{create:()=>ea({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):ai}),param:[1],req:["variance"]},stdevp:{create:()=>ea({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):ai}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=ai,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===ai)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=ai,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===ai)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>ea({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>ea({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):ai,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>ea({value:e=>e.valid>1?e.cov/e.valid:ai}),param:[2],req:["covariance"]},corr:{create:()=>ea({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):ai}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>ea({value:i=>kRt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},Lye={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},Bye={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},BOe={row_number:{create(){return{init:r0,value:e=>e.index+1}},param:[]},rank:Lye,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Lye.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:Bye,ntile:{create(e){e=+e,e>0||pr("ntile num must be greater than zero.");const{init:t,value:n}=Bye.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=ai){return e=+e||1,{init:r0,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=ai){return e=+e||1,{init:r0,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:r0,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:r0,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||pr("nth_value nth must be greater than zero."),{init:r0,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):ai}}},param:[1,1]},fill_down:{create(e=ai){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return qh(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=ai){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=ORt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function ORt(e,t,n){for(const r=e.size;n<r;++n)if(qh(e.value(n,t)))return n;return-1}function ane(e){return cp(LOe,e)}function une(e){return cp(BOe,e)}function jOe(e){return cp(KS,e)||e==="row_object"}function UOe(e){return ane(e)&&LOe[e]}function zOe(e){return une(e)&&BOe[e]}function ID(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const lne={escape:(e,t,n)=>ID(e,t,n),expr:(e,t)=>ID(`(row,data,op)=>${e}`,KS,t),expr2:(e,t)=>ID(`(row0,data0,row,data)=>${e}`,KS,t),join:(e,t)=>ID(`(row1,data1,row2,data2)=>${e}`,KS,t),param:(e,t)=>ID(e,KS,t)},MRt={"==":1,"!=":1,"===":1,"!==":1};function VOe(e,t,n=0,r,i){if(e.type=AP,e.name=t,e.table=n,i&&r&&_s(r.keyFor)){const s=MRt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===K2&&$Rt(i,e,s,r.keyFor(s.value))}return e}function $Rt(e,t,n,r){return r<0?(e.type=K2,e.value=!1,e.raw="false"):(t.type=CRt,n.value=r,n.raw=r+""),!0}function BB(e){return ci(e)?e:one(e)?e.entries():e?Object.entries(e):[]}const HOe="row_object";function qOe(e,t){e.type=SRt;const n=e.properties=[];for(const r of BB(t)){const[i,s]=ci(r)?r:[r,r];n.push({type:MOe,key:{type:K2,raw:Hm(s)},value:VOe({computed:!0},i)})}return e}function WOe(e){return P6(qOe({},e))}function GOe(e){return lne.expr(WOe(e))}const FRt=new TextDecoder("utf-8"),bY=e=>FRt.decode(e),LRt=new TextEncoder,cne=e=>LRt.encode(e),BRt=e=>typeof e=="boolean",uc=e=>typeof e=="function",Nb=e=>e!=null&&Object(e)===e,jB=e=>Nb(e)&&uc(e.then),fne=e=>Nb(e)&&uc(e[Symbol.iterator]),UB=e=>Nb(e)&&uc(e[Symbol.asyncIterator]),jRt=e=>Nb(e)&&"done"in e&&"value"in e,YOe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,URt=e=>Nb(e)&&uc(e.abort)&&uc(e.getWriter)&&!YOe(e),zRt=e=>Nb(e)&&uc(e.end)&&uc(e.write)&&BRt(e.writable)&&!YOe(e),VRt=e=>Nb(e)&&uc(e.clear)&&uc(e.bytes)&&uc(e.position)&&uc(e.setPosition)&&uc(e.capacity)&&uc(e.getBufferIdentifier)&&uc(e.createLong),dne=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function HRt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function M6(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function qm(e,t){const n=HRt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?M6(o,s,a):o=s;break}M6(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Sa(e,t){let n=jRt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=cne(n)),n instanceof ArrayBuffer?new e(n):n instanceof dne?new e(n):VRt(n)?Sa(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const kD=e=>Sa(Int32Array,e),$i=e=>Sa(Uint8Array,e),wY=e=>(e.next(),e);function*qRt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof dne?n(t):fne(t)?t:n(t);return yield*wY(function*(i){let s=null;do s=i.next(yield Sa(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const WRt=e=>qRt(Uint8Array,e);function KOe(e,t){return u_(this,arguments,function*(){if(jB(t))return yield qr(yield qr(yield*gz(uk(KOe(e,yield qr(t))))));const r=function(o){return u_(this,arguments,function*(){yield yield qr(yield qr(o))})},i=function(o){return u_(this,arguments,function*(){yield qr(yield*gz(uk(wY(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof dne?r(t):fne(t)?i(t):UB(t)?t:r(t);return yield qr(yield*gz(uk(wY(function(o){return u_(this,arguments,function*(){let a=null;do a=yield qr(o.next(yield yield qr(Sa(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield qr(new e)})}const GRt=e=>KOe(Uint8Array,e);function XOe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function YRt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const jye={fromIterable(e){return TM(KRt(e))},fromAsyncIterable(e){return TM(XRt(e))},fromDOMStream(e){return TM(QRt(e))},fromNodeStream(e){return TM(ZRt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},TM=e=>(e.next(),e);function*KRt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?qm(r,o)[0]:([i,r,a]=qm(r,o),i)}({cmd:s,size:o}=yield null);const l=WRt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function XRt(e){return u_(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?qm(i,a)[0]:([s,i,u]=qm(i,a),s)}({cmd:o,size:a}=yield yield qr(null));const c=GRt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield qr(c.next()):yield qr(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield qr(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield qr(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield qr(c.return(new Uint8Array(0))))}return yield qr(null)})}function QRt(e){return u_(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?qm(i,a)[0]:([s,i,u]=qm(i,a),s)}({cmd:o,size:a}=yield yield qr(null));const c=new JRt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield qr(c.read()):yield qr(c.read(a-u)),!n&&s.byteLength>0&&(i.push($i(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield qr(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield qr(c.cancel(f)))}finally{r===!1?yield qr(c.cancel()):e.locked&&c.releaseLock()}return yield qr(null)})}class JRt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return a0(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return a0(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=$i(n)),n})}}const BV=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function ZRt(e){return u_(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?qm(l,a)[0]:([c,l,u]=qm(l,a),c)}if({cmd:o,size:a}=yield yield qr(null),e.isTTY)return yield yield qr(new Uint8Array(0)),yield qr(null);try{n[0]=BV(e,"end"),n[1]=BV(e,"error");do{if(n[2]=BV(e,"readable"),[r,s]=yield qr(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=$i(e.read(a-u)),c.byteLength<a-u&&(c=$i(e.read()))):c=$i(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield qr(f()));while(a<u)}while(!i)}finally{yield qr(d(n,r==="error"?s:null))}return yield qr(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,b]of h)e.off(y,b);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Tl;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Tl||(Tl={}));var jc;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(jc||(jc={}));var uu;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(uu||(uu={}));var Wm;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Wm||(Wm={}));var kn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(kn||(kn={}));var Gm;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Gm||(Gm={}));var Aa;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Aa||(Aa={}));var me;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(me||(me={}));var Qg;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Qg||(Qg={}));const eNt=void 0;function tE(e){if(e===null)return"null";if(e===eNt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>tE(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const tNt=Symbol.for("isArrowBigNum");function Cp(e,...t){return t.length===0?Object.setPrototypeOf(Sa(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Cp.prototype[tNt]=!0;Cp.prototype.toJSON=function(){return`"${qR(this)}"`};Cp.prototype.valueOf=function(){return QOe(this)};Cp.prototype.toString=function(){return qR(this)};Cp.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return QOe(this);case"string":return qR(this);case"default":return nNt(this)}return qR(this)};function ET(...e){return Cp.apply(this,e)}function xT(...e){return Cp.apply(this,e)}function HR(...e){return Cp.apply(this,e)}Object.setPrototypeOf(ET.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(xT.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(HR.prototype,Object.create(Uint32Array.prototype));Object.assign(ET.prototype,Cp.prototype,{constructor:ET,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(xT.prototype,Cp.prototype,{constructor:xT,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(HR.prototype,Cp.prototype,{constructor:HR,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function QOe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const qR=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return jV(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return jV(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${jV(t)}`},nNt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:qR(e);function jV(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class hne{static new(t,n){switch(n){case!0:return new ET(t);case!1:return new xT(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new ET(t)}return t.byteLength===16?new HR(t):new xT(t)}static signed(t){return new ET(t)}static unsigned(t){return new xT(t)}static decimal(t){return new HR(t)}constructor(t,n){return hne.new(t,n)}}function fp(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var JOe,ZOe,e3e,t3e,n3e,r3e,i3e,s3e,o3e,a3e,u3e,l3e,c3e,f3e,d3e,h3e,p3e,m3e,g3e,y3e;let br=class _Y{static isNull(t){return(t==null?void 0:t.typeId)===me.Null}static isInt(t){return(t==null?void 0:t.typeId)===me.Int}static isFloat(t){return(t==null?void 0:t.typeId)===me.Float}static isBinary(t){return(t==null?void 0:t.typeId)===me.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===me.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===me.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===me.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===me.Date}static isTime(t){return(t==null?void 0:t.typeId)===me.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===me.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===me.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===me.Duration}static isList(t){return(t==null?void 0:t.typeId)===me.List}static isStruct(t){return(t==null?void 0:t.typeId)===me.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===me.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===me.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===me.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===me.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===me.Dictionary}static isDenseUnion(t){return _Y.isUnion(t)&&t.mode===jc.Dense}static isSparseUnion(t){return _Y.isUnion(t)&&t.mode===jc.Sparse}get typeId(){return me.NONE}};JOe=Symbol.toStringTag;br[JOe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(br.prototype);let sy=class extends br{toString(){return"Null"}get typeId(){return me.Null}};ZOe=Symbol.toStringTag;sy[ZOe]=(e=>e[Symbol.toStringTag]="Null")(sy.prototype);class jl extends br{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return me.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}e3e=Symbol.toStringTag;jl[e3e]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(jl.prototype);class pne extends jl{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class mne extends jl{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class F1 extends jl{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class gne extends jl{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class yne extends jl{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class vne extends jl{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class bne extends jl{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class wne extends jl{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(pne.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(mne.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(F1.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(gne.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(yne.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(vne.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(bne.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(wne.prototype,"ArrayType",{value:BigUint64Array});class L1 extends br{constructor(t){super(),this.precision=t}get typeId(){return me.Float}get ArrayType(){switch(this.precision){case uu.HALF:return Uint16Array;case uu.SINGLE:return Float32Array;case uu.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}t3e=Symbol.toStringTag;L1[t3e]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(L1.prototype);class v3e extends L1{constructor(){super(uu.HALF)}}class _ne extends L1{constructor(){super(uu.SINGLE)}}class Ene extends L1{constructor(){super(uu.DOUBLE)}}Object.defineProperty(v3e.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(_ne.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(Ene.prototype,"ArrayType",{value:Float64Array});let WR=class extends br{constructor(){super()}get typeId(){return me.Binary}toString(){return"Binary"}};n3e=Symbol.toStringTag;WR[n3e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(WR.prototype);let AC=class extends br{constructor(){super()}get typeId(){return me.Utf8}toString(){return"Utf8"}};r3e=Symbol.toStringTag;AC[r3e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(AC.prototype);let GR=class extends br{constructor(){super()}get typeId(){return me.Bool}toString(){return"Bool"}};i3e=Symbol.toStringTag;GR[i3e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(GR.prototype);let $6=class extends br{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return me.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};s3e=Symbol.toStringTag;$6[s3e]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))($6.prototype);class DC extends br{constructor(t){super(),this.unit=t}get typeId(){return me.Date}toString(){return`Date${(this.unit+1)*32}<${Wm[this.unit]}>`}}o3e=Symbol.toStringTag;DC[o3e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(DC.prototype);class rNt extends DC{constructor(){super(Wm.DAY)}}class iNt extends DC{constructor(){super(Wm.MILLISECOND)}}class oy extends br{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return me.Time}toString(){return`Time${this.bitWidth}<${kn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}a3e=Symbol.toStringTag;oy[a3e]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(oy.prototype);class sNt extends oy{constructor(){super(kn.SECOND,32)}}class oNt extends oy{constructor(){super(kn.MILLISECOND,32)}}class aNt extends oy{constructor(){super(kn.MICROSECOND,64)}}class uNt extends oy{constructor(){super(kn.NANOSECOND,64)}}class F6 extends br{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return me.Timestamp}toString(){return`Timestamp<${kn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}u3e=Symbol.toStringTag;F6[u3e]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(F6.prototype);class IC extends br{constructor(t){super(),this.unit=t}get typeId(){return me.Interval}toString(){return`Interval<${Gm[this.unit]}>`}}l3e=Symbol.toStringTag;IC[l3e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(IC.prototype);class lNt extends IC{constructor(){super(Gm.DAY_TIME)}}class cNt extends IC{constructor(){super(Gm.YEAR_MONTH)}}let L6=class extends br{constructor(t){super(),this.unit=t}get typeId(){return me.Duration}toString(){return`Duration<${kn[this.unit]}>`}};c3e=Symbol.toStringTag;L6[c3e]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(L6.prototype);let kC=class extends br{constructor(t){super(),this.children=[t]}get typeId(){return me.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};f3e=Symbol.toStringTag;kC[f3e]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(kC.prototype);class Bu extends br{constructor(t){super(),this.children=t}get typeId(){return me.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}d3e=Symbol.toStringTag;Bu[d3e]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Bu.prototype);class YR extends br{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return me.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}h3e=Symbol.toStringTag;YR[h3e]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(YR.prototype);let B6=class extends br{constructor(t){super(),this.byteWidth=t}get typeId(){return me.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};p3e=Symbol.toStringTag;B6[p3e]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(B6.prototype);let RC=class extends br{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return me.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};m3e=Symbol.toStringTag;RC[m3e]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(RC.prototype);class KR extends br{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return me.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}g3e=Symbol.toStringTag;KR[g3e]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(KR.prototype);const fNt=(e=>()=>++e)(-1);class B1 extends br{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?fNt():fp(r)}get typeId(){return me.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}y3e=Symbol.toStringTag;B1[y3e]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(B1.prototype);function Jp(e){const t=e;switch(e.typeId){case me.Decimal:return e.bitWidth/32;case me.Timestamp:return 2;case me.Date:return 1+t.unit;case me.Interval:return 1+t.unit;case me.FixedSizeList:return t.listSize;case me.FixedSizeBinary:return t.byteWidth;default:return 1}}class wr{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return dNt(this,t,n)}getVisitFnByTypeId(t,n=!0){return ES(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function dNt(e,t,n=!0){return typeof t=="number"?ES(e,t,n):typeof t=="string"&&t in me?ES(e,me[t],n):t&&t instanceof br?ES(e,Uye(t),n):t!=null&&t.type&&t.type instanceof br?ES(e,Uye(t.type),n):ES(e,me.NONE,n)}function ES(e,t,n=!0){let r=null;switch(t){case me.Null:r=e.visitNull;break;case me.Bool:r=e.visitBool;break;case me.Int:r=e.visitInt;break;case me.Int8:r=e.visitInt8||e.visitInt;break;case me.Int16:r=e.visitInt16||e.visitInt;break;case me.Int32:r=e.visitInt32||e.visitInt;break;case me.Int64:r=e.visitInt64||e.visitInt;break;case me.Uint8:r=e.visitUint8||e.visitInt;break;case me.Uint16:r=e.visitUint16||e.visitInt;break;case me.Uint32:r=e.visitUint32||e.visitInt;break;case me.Uint64:r=e.visitUint64||e.visitInt;break;case me.Float:r=e.visitFloat;break;case me.Float16:r=e.visitFloat16||e.visitFloat;break;case me.Float32:r=e.visitFloat32||e.visitFloat;break;case me.Float64:r=e.visitFloat64||e.visitFloat;break;case me.Utf8:r=e.visitUtf8;break;case me.Binary:r=e.visitBinary;break;case me.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case me.Date:r=e.visitDate;break;case me.DateDay:r=e.visitDateDay||e.visitDate;break;case me.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case me.Timestamp:r=e.visitTimestamp;break;case me.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case me.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case me.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case me.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case me.Time:r=e.visitTime;break;case me.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case me.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case me.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case me.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case me.Decimal:r=e.visitDecimal;break;case me.List:r=e.visitList;break;case me.Struct:r=e.visitStruct;break;case me.Union:r=e.visitUnion;break;case me.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case me.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case me.Dictionary:r=e.visitDictionary;break;case me.Interval:r=e.visitInterval;break;case me.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case me.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case me.Duration:r=e.visitDuration;break;case me.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case me.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case me.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case me.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case me.FixedSizeList:r=e.visitFixedSizeList;break;case me.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${me[t]}'`)}function Uye(e){switch(e.typeId){case me.Null:return me.Null;case me.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?me.Int8:me.Uint8;case 16:return n?me.Int16:me.Uint16;case 32:return n?me.Int32:me.Uint32;case 64:return n?me.Int64:me.Uint64}return me.Int}case me.Float:switch(e.precision){case uu.HALF:return me.Float16;case uu.SINGLE:return me.Float32;case uu.DOUBLE:return me.Float64}return me.Float;case me.Binary:return me.Binary;case me.Utf8:return me.Utf8;case me.Bool:return me.Bool;case me.Decimal:return me.Decimal;case me.Time:switch(e.unit){case kn.SECOND:return me.TimeSecond;case kn.MILLISECOND:return me.TimeMillisecond;case kn.MICROSECOND:return me.TimeMicrosecond;case kn.NANOSECOND:return me.TimeNanosecond}return me.Time;case me.Timestamp:switch(e.unit){case kn.SECOND:return me.TimestampSecond;case kn.MILLISECOND:return me.TimestampMillisecond;case kn.MICROSECOND:return me.TimestampMicrosecond;case kn.NANOSECOND:return me.TimestampNanosecond}return me.Timestamp;case me.Date:switch(e.unit){case Wm.DAY:return me.DateDay;case Wm.MILLISECOND:return me.DateMillisecond}return me.Date;case me.Interval:switch(e.unit){case Gm.DAY_TIME:return me.IntervalDayTime;case Gm.YEAR_MONTH:return me.IntervalYearMonth}return me.Interval;case me.Duration:switch(e.unit){case kn.SECOND:return me.DurationSecond;case kn.MILLISECOND:return me.DurationMillisecond;case kn.MICROSECOND:return me.DurationMicrosecond;case kn.NANOSECOND:return me.DurationNanosecond}return me.Duration;case me.Map:return me.Map;case me.List:return me.List;case me.Struct:return me.Struct;case me.Union:switch(e.mode){case jc.Dense:return me.DenseUnion;case jc.Sparse:return me.SparseUnion}return me.Union;case me.FixedSizeBinary:return me.FixedSizeBinary;case me.FixedSizeList:return me.FixedSizeList;case me.Dictionary:return me.Dictionary}throw new Error(`Unrecognized type '${me[e.typeId]}'`)}wr.prototype.visitInt8=null;wr.prototype.visitInt16=null;wr.prototype.visitInt32=null;wr.prototype.visitInt64=null;wr.prototype.visitUint8=null;wr.prototype.visitUint16=null;wr.prototype.visitUint32=null;wr.prototype.visitUint64=null;wr.prototype.visitFloat16=null;wr.prototype.visitFloat32=null;wr.prototype.visitFloat64=null;wr.prototype.visitDateDay=null;wr.prototype.visitDateMillisecond=null;wr.prototype.visitTimestampSecond=null;wr.prototype.visitTimestampMillisecond=null;wr.prototype.visitTimestampMicrosecond=null;wr.prototype.visitTimestampNanosecond=null;wr.prototype.visitTimeSecond=null;wr.prototype.visitTimeMillisecond=null;wr.prototype.visitTimeMicrosecond=null;wr.prototype.visitTimeNanosecond=null;wr.prototype.visitDenseUnion=null;wr.prototype.visitSparseUnion=null;wr.prototype.visitIntervalDayTime=null;wr.prototype.visitIntervalYearMonth=null;wr.prototype.visitDuration=null;wr.prototype.visitDurationSecond=null;wr.prototype.visitDurationMillisecond=null;wr.prototype.visitDurationMicrosecond=null;wr.prototype.visitDurationNanosecond=null;const b3e=new Float64Array(1),Zx=new Uint32Array(b3e.buffer);function w3e(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function _3e(e){if(e!==e)return 32256;b3e[0]=e;const t=(Zx[1]&2147483648)>>16&65535;let n=Zx[1]&2146435072,r=0;return n>=1089470464?Zx[0]>0?n=31744:(n=(n&2080374784)>>16,r=(Zx[1]&1048575)>>10):n<=1056964608?(r=1048576+(Zx[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(Zx[1]&1048575)+512>>10),t|n|r&65535}class $n extends wr{}function qn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const hNt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},xne=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},pNt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},mNt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},E3e=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},gNt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},ky=({values:e},t,n)=>{e[t]=n},Sne=({values:e},t,n)=>{e[t]=n},x3e=({values:e},t,n)=>{e[t]=_3e(n)},yNt=(e,t,n)=>{switch(e.type.precision){case uu.HALF:return x3e(e,t,n);case uu.SINGLE:case uu.DOUBLE:return Sne(e,t,n)}},Tne=({values:e},t,n)=>{hNt(e,t,n.valueOf())},Cne=({values:e},t,n)=>{xne(e,t*2,n.valueOf())},S3e=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},vNt=({values:e,valueOffsets:t},n,r)=>E3e(e,t,n,r),bNt=({values:e,valueOffsets:t},n,r)=>{E3e(e,t,n,cne(r))},T3e=(e,t,n)=>{e.type.unit===Wm.DAY?Tne(e,t,n):Cne(e,t,n)},Ane=({values:e},t,n)=>xne(e,t*2,n/1e3),Dne=({values:e},t,n)=>xne(e,t*2,n),Ine=({values:e},t,n)=>pNt(e,t*2,n),kne=({values:e},t,n)=>mNt(e,t*2,n),C3e=(e,t,n)=>{switch(e.type.unit){case kn.SECOND:return Ane(e,t,n);case kn.MILLISECOND:return Dne(e,t,n);case kn.MICROSECOND:return Ine(e,t,n);case kn.NANOSECOND:return kne(e,t,n)}},Rne=({values:e},t,n)=>{e[t]=n},Nne=({values:e},t,n)=>{e[t]=n},Pne=({values:e},t,n)=>{e[t]=n},One=({values:e},t,n)=>{e[t]=n},A3e=(e,t,n)=>{switch(e.type.unit){case kn.SECOND:return Rne(e,t,n);case kn.MILLISECOND:return Nne(e,t,n);case kn.MICROSECOND:return Pne(e,t,n);case kn.NANOSECOND:return One(e,t,n)}},D3e=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},wNt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=jd.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},_Nt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=jd.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},ENt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),xNt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),SNt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),TNt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),CNt=(e,t,n)=>{const r=e.type.children.map(s=>jd.getVisitFn(s.type)),i=n instanceof Map?SNt(t,n):n instanceof fi?xNt(t,n):Array.isArray(n)?ENt(t,n):TNt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},ANt=(e,t,n)=>{e.type.mode===jc.Dense?I3e(e,t,n):k3e(e,t,n)},I3e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];jd.visit(i,e.valueOffsets[t],n)},k3e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];jd.visit(i,t,n)},DNt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},R3e=(e,t,n)=>{e.type.unit===Gm.DAY_TIME?Mne(e,t,n):$ne(e,t,n)},Mne=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},$ne=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},Fne=({values:e},t,n)=>{e[t]=n},Lne=({values:e},t,n)=>{e[t]=n},Bne=({values:e},t,n)=>{e[t]=n},jne=({values:e},t,n)=>{e[t]=n},N3e=(e,t,n)=>{switch(e.type.unit){case kn.SECOND:return Fne(e,t,n);case kn.MILLISECOND:return Lne(e,t,n);case kn.MICROSECOND:return Bne(e,t,n);case kn.NANOSECOND:return jne(e,t,n)}},INt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=jd.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};$n.prototype.visitBool=qn(gNt);$n.prototype.visitInt=qn(ky);$n.prototype.visitInt8=qn(ky);$n.prototype.visitInt16=qn(ky);$n.prototype.visitInt32=qn(ky);$n.prototype.visitInt64=qn(ky);$n.prototype.visitUint8=qn(ky);$n.prototype.visitUint16=qn(ky);$n.prototype.visitUint32=qn(ky);$n.prototype.visitUint64=qn(ky);$n.prototype.visitFloat=qn(yNt);$n.prototype.visitFloat16=qn(x3e);$n.prototype.visitFloat32=qn(Sne);$n.prototype.visitFloat64=qn(Sne);$n.prototype.visitUtf8=qn(bNt);$n.prototype.visitBinary=qn(vNt);$n.prototype.visitFixedSizeBinary=qn(S3e);$n.prototype.visitDate=qn(T3e);$n.prototype.visitDateDay=qn(Tne);$n.prototype.visitDateMillisecond=qn(Cne);$n.prototype.visitTimestamp=qn(C3e);$n.prototype.visitTimestampSecond=qn(Ane);$n.prototype.visitTimestampMillisecond=qn(Dne);$n.prototype.visitTimestampMicrosecond=qn(Ine);$n.prototype.visitTimestampNanosecond=qn(kne);$n.prototype.visitTime=qn(A3e);$n.prototype.visitTimeSecond=qn(Rne);$n.prototype.visitTimeMillisecond=qn(Nne);$n.prototype.visitTimeMicrosecond=qn(Pne);$n.prototype.visitTimeNanosecond=qn(One);$n.prototype.visitDecimal=qn(D3e);$n.prototype.visitList=qn(wNt);$n.prototype.visitStruct=qn(CNt);$n.prototype.visitUnion=qn(ANt);$n.prototype.visitDenseUnion=qn(I3e);$n.prototype.visitSparseUnion=qn(k3e);$n.prototype.visitDictionary=qn(DNt);$n.prototype.visitInterval=qn(R3e);$n.prototype.visitIntervalDayTime=qn(Mne);$n.prototype.visitIntervalYearMonth=qn($ne);$n.prototype.visitDuration=qn(N3e);$n.prototype.visitDurationSecond=qn(Fne);$n.prototype.visitDurationMillisecond=qn(Lne);$n.prototype.visitDurationMicrosecond=qn(Bne);$n.prototype.visitDurationNanosecond=qn(jne);$n.prototype.visitFixedSizeList=qn(INt);$n.prototype.visitMap=qn(_Nt);const jd=new $n,kh=Symbol.for("parent"),ST=Symbol.for("rowIndex");class Une{constructor(t,n){return this[kh]=t,this[ST]=n,new Proxy(this,new RNt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[ST],n=this[kh],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Uc.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${tE(t)}: ${tE(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new kNt(this[kh],this[ST])}}class kNt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Uc.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(Une.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[kh]:{writable:!0,enumerable:!1,configurable:!1,value:null},[ST]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class RNt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[kh].type.children.map(n=>n.name)}has(t,n){return t[kh].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[kh].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[kh].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Uc.visit(t[kh].children[r],t[ST]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[kh].type.children.findIndex(s=>s.name===n);return i!==-1?(jd.visit(t[kh].children[i],t[ST],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class Rn extends wr{}function Fn(e){return(t,n)=>t.getValid(n)?e(t,n):null}const NNt=(e,t)=>864e5*e[t],zne=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),PNt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,ONt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,P3e=e=>new Date(e),MNt=(e,t)=>P3e(NNt(e,t)),$Nt=(e,t)=>P3e(zne(e,t)),FNt=(e,t)=>null,O3e=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},LNt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},M3e=({values:e},t)=>MNt(e,t),$3e=({values:e},t)=>$Nt(e,t*2),Pb=({stride:e,values:t},n)=>t[e*n],BNt=({stride:e,values:t},n)=>w3e(t[e*n]),F3e=({values:e},t)=>e[t],jNt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),UNt=({values:e,valueOffsets:t},n)=>O3e(e,t,n),zNt=({values:e,valueOffsets:t},n)=>{const r=O3e(e,t,n);return r!==null?bY(r):null},VNt=({values:e},t)=>e[t],HNt=({type:e,values:t},n)=>e.precision!==uu.HALF?t[n]:w3e(t[n]),qNt=(e,t)=>e.type.unit===Wm.DAY?M3e(e,t):$3e(e,t),L3e=({values:e},t)=>1e3*zne(e,t*2),B3e=({values:e},t)=>zne(e,t*2),j3e=({values:e},t)=>PNt(e,t*2),U3e=({values:e},t)=>ONt(e,t*2),WNt=(e,t)=>{switch(e.type.unit){case kn.SECOND:return L3e(e,t);case kn.MILLISECOND:return B3e(e,t);case kn.MICROSECOND:return j3e(e,t);case kn.NANOSECOND:return U3e(e,t)}},z3e=({values:e},t)=>e[t],V3e=({values:e},t)=>e[t],H3e=({values:e},t)=>e[t],q3e=({values:e},t)=>e[t],GNt=(e,t)=>{switch(e.type.unit){case kn.SECOND:return z3e(e,t);case kn.MILLISECOND:return V3e(e,t);case kn.MICROSECOND:return H3e(e,t);case kn.NANOSECOND:return q3e(e,t)}},YNt=({values:e,stride:t},n)=>hne.decimal(e.subarray(t*n,t*(n+1))),KNt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new fi([u])},XNt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new zB(o.slice(i,s-i))},QNt=(e,t)=>new Une(e,t),JNt=(e,t)=>e.type.mode===jc.Dense?W3e(e,t):G3e(e,t),W3e=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Uc.visit(r,e.valueOffsets[t])},G3e=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Uc.visit(r,t)},ZNt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},ePt=(e,t)=>e.type.unit===Gm.DAY_TIME?Y3e(e,t):K3e(e,t),Y3e=({values:e},t)=>e.subarray(2*t,2*(t+1)),K3e=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},X3e=({values:e},t)=>e[t],Q3e=({values:e},t)=>e[t],J3e=({values:e},t)=>e[t],Z3e=({values:e},t)=>e[t],tPt=(e,t)=>{switch(e.type.unit){case kn.SECOND:return X3e(e,t);case kn.MILLISECOND:return Q3e(e,t);case kn.MICROSECOND:return J3e(e,t);case kn.NANOSECOND:return Z3e(e,t)}},nPt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new fi([s])};Rn.prototype.visitNull=Fn(FNt);Rn.prototype.visitBool=Fn(LNt);Rn.prototype.visitInt=Fn(VNt);Rn.prototype.visitInt8=Fn(Pb);Rn.prototype.visitInt16=Fn(Pb);Rn.prototype.visitInt32=Fn(Pb);Rn.prototype.visitInt64=Fn(F3e);Rn.prototype.visitUint8=Fn(Pb);Rn.prototype.visitUint16=Fn(Pb);Rn.prototype.visitUint32=Fn(Pb);Rn.prototype.visitUint64=Fn(F3e);Rn.prototype.visitFloat=Fn(HNt);Rn.prototype.visitFloat16=Fn(BNt);Rn.prototype.visitFloat32=Fn(Pb);Rn.prototype.visitFloat64=Fn(Pb);Rn.prototype.visitUtf8=Fn(zNt);Rn.prototype.visitBinary=Fn(UNt);Rn.prototype.visitFixedSizeBinary=Fn(jNt);Rn.prototype.visitDate=Fn(qNt);Rn.prototype.visitDateDay=Fn(M3e);Rn.prototype.visitDateMillisecond=Fn($3e);Rn.prototype.visitTimestamp=Fn(WNt);Rn.prototype.visitTimestampSecond=Fn(L3e);Rn.prototype.visitTimestampMillisecond=Fn(B3e);Rn.prototype.visitTimestampMicrosecond=Fn(j3e);Rn.prototype.visitTimestampNanosecond=Fn(U3e);Rn.prototype.visitTime=Fn(GNt);Rn.prototype.visitTimeSecond=Fn(z3e);Rn.prototype.visitTimeMillisecond=Fn(V3e);Rn.prototype.visitTimeMicrosecond=Fn(H3e);Rn.prototype.visitTimeNanosecond=Fn(q3e);Rn.prototype.visitDecimal=Fn(YNt);Rn.prototype.visitList=Fn(KNt);Rn.prototype.visitStruct=Fn(QNt);Rn.prototype.visitUnion=Fn(JNt);Rn.prototype.visitDenseUnion=Fn(W3e);Rn.prototype.visitSparseUnion=Fn(G3e);Rn.prototype.visitDictionary=Fn(ZNt);Rn.prototype.visitInterval=Fn(ePt);Rn.prototype.visitIntervalDayTime=Fn(Y3e);Rn.prototype.visitIntervalYearMonth=Fn(K3e);Rn.prototype.visitDuration=Fn(tPt);Rn.prototype.visitDurationSecond=Fn(X3e);Rn.prototype.visitDurationMillisecond=Fn(Q3e);Rn.prototype.visitDurationMicrosecond=Fn(J3e);Rn.prototype.visitDurationNanosecond=Fn(Z3e);Rn.prototype.visitFixedSizeList=Fn(nPt);Rn.prototype.visitMap=Fn(XNt);const Uc=new Rn,Lh=Symbol.for("keys"),TT=Symbol.for("vals");class zB{constructor(t){return this[Lh]=new fi([t.children[0]]).memoize(),this[TT]=t.children[1],new Proxy(this,new iPt)}[Symbol.iterator](){return new rPt(this[Lh],this[TT])}get size(){return this[Lh].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Lh],n=this[TT],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Uc.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${tE(t)}: ${tE(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class rPt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Uc.visit(this.vals,t)]})}}class iPt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Lh].toArray().map(String)}has(t,n){return t[Lh].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Lh].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Lh].indexOf(n);if(r!==-1){const i=Uc.visit(Reflect.get(t,TT),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Lh].indexOf(n);return i!==-1?(jd.visit(Reflect.get(t,TT),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(zB.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Lh]:{writable:!0,enumerable:!1,configurable:!1,value:null},[TT]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let zye;function eMe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(zye=s,s=o,o=zye),o>i&&(o=i),r?r(e,s,o):[s,o]}const Vye=e=>e!==e;function X2(e){if(typeof e!=="object"||e===null)return Vye(e)?Vye:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?YRt(e,n):!1:e instanceof Map?oPt(e):Array.isArray(e)?sPt(e):e instanceof fi?aPt(e):uPt(e,!0)}function sPt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=X2(e[n]);return VB(t)}function oPt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=X2(r);return VB(n)}function aPt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=X2(e.get(n));return VB(t)}function uPt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=X2(e[n[i]]);return VB(r,n)}function VB(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return lPt(e,n);case Map:return Hye(e,n,n.keys());case zB:case Une:case Object:case void 0:return Hye(e,n,t||Object.keys(n))}return n instanceof fi?cPt(e,n):!1}}function lPt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function cPt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Hye(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function tMe(e,t,n,r){return(n&1<<r)!==0}function fPt(e,t,n,r){return(n&1<<r)>>r}function j6(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):nMe(new Vne(n,e,t,null,tMe)).subarray(0,r)),i}return n}function nMe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class Vne{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function EY(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new Vne(e,t,n-t,e,fPt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return EY(e,t,i)+EY(e,r,n)+dPt(e,i>>3,r-i>>3)}function dPt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=UV(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=UV(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=UV(s.getUint8(i)),i+=1;return r}function UV(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const hPt=-1;class Mi{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return br.isSparseUnion(t)?this.children.some(n=>n.nullable):br.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(br.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=hPt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-EY(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Mi?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Jp(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(br.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===jc.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(br.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===jc.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(j6(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Mi(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===me.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(j6(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Qg.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[Qg.TYPE])&&(o[Qg.TYPE]=s.subarray(t,t+n)),(s=o[Qg.OFFSET])&&(o[Qg.OFFSET]=s.subarray(t,t+n+1))||(s=o[Qg.DATA])&&(o[Qg.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Mi.prototype.children=Object.freeze([]);class Sk extends wr{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Mi(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=$i(t.nullBitmap),s=Sa(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=$i(t.nullBitmap),s=Sa(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=$i(t.nullBitmap),s=Sa(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=$i(t.data),s=$i(t.nullBitmap),o=kD(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Mi(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=$i(t.data),s=$i(t.nullBitmap),o=kD(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Mi(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=$i(t.nullBitmap),s=Sa(n.ArrayType,t.data),{["length"]:o=s.length/Jp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=$i(t.nullBitmap),s=Sa(n.ArrayType,t.data),{["length"]:o=s.length/Jp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=$i(t.nullBitmap),s=Sa(n.ArrayType,t.data),{["length"]:o=s.length/Jp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=$i(t.nullBitmap),s=Sa(n.ArrayType,t.data),{["length"]:o=s.length/Jp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=$i(t.nullBitmap),s=Sa(n.ArrayType,t.data),{["length"]:o=s.length/Jp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=$i(t.nullBitmap),o=kD(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Mi(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=$i(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Sa(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(br.isSparseUnion(n))return new Mi(n,r,o,a,[void 0,void 0,void 0,s],i);const u=kD(t.valueOffsets);return new Mi(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=$i(t.nullBitmap),s=Sa(n.indices.ArrayType,t.data),{["dictionary"]:o=new fi([new Sk().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Mi(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=$i(t.nullBitmap),s=Sa(n.ArrayType,t.data),{["length"]:o=s.length/Jp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=$i(t.nullBitmap),s=Sa(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new Sk().visit({type:n.valueType})}=t,s=$i(t.nullBitmap),{["length"]:o=i.length/Jp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new Sk().visit({type:n.childType})}=t,s=$i(t.nullBitmap),o=kD(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Mi(n,r,a,u,[o,void 0,s],[i])}}const pPt=new Sk;function Mu(e){return pPt.visit(e)}class qye{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function rMe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function iMe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function sMe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function Hne(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function qne(e,t){return e.getValid(t)}function CT(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return Hne(r,this._offsets,n,t)}}function oMe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=Hne(s,this._offsets,r,n);return t=void 0,o}}function aMe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):Hne(s,this._offsets,i,n);return t=void 0,o}}class Nn extends wr{}function mPt(e,t){return t===null&&e.length>0?0:-1}function gPt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new Vne(n,e.offset+(t||0),e.length,n,tMe)){if(!i)return r;++r}return-1}function Zn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case me.Union:break;case me.Dictionary:break;default:return gPt(e,n)}const r=Uc.getVisitFn(e),i=X2(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function uMe(e,t,n){const r=Uc.getVisitFn(e),i=X2(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Nn.prototype.visitNull=mPt;Nn.prototype.visitBool=Zn;Nn.prototype.visitInt=Zn;Nn.prototype.visitInt8=Zn;Nn.prototype.visitInt16=Zn;Nn.prototype.visitInt32=Zn;Nn.prototype.visitInt64=Zn;Nn.prototype.visitUint8=Zn;Nn.prototype.visitUint16=Zn;Nn.prototype.visitUint32=Zn;Nn.prototype.visitUint64=Zn;Nn.prototype.visitFloat=Zn;Nn.prototype.visitFloat16=Zn;Nn.prototype.visitFloat32=Zn;Nn.prototype.visitFloat64=Zn;Nn.prototype.visitUtf8=Zn;Nn.prototype.visitBinary=Zn;Nn.prototype.visitFixedSizeBinary=Zn;Nn.prototype.visitDate=Zn;Nn.prototype.visitDateDay=Zn;Nn.prototype.visitDateMillisecond=Zn;Nn.prototype.visitTimestamp=Zn;Nn.prototype.visitTimestampSecond=Zn;Nn.prototype.visitTimestampMillisecond=Zn;Nn.prototype.visitTimestampMicrosecond=Zn;Nn.prototype.visitTimestampNanosecond=Zn;Nn.prototype.visitTime=Zn;Nn.prototype.visitTimeSecond=Zn;Nn.prototype.visitTimeMillisecond=Zn;Nn.prototype.visitTimeMicrosecond=Zn;Nn.prototype.visitTimeNanosecond=Zn;Nn.prototype.visitDecimal=Zn;Nn.prototype.visitList=Zn;Nn.prototype.visitStruct=Zn;Nn.prototype.visitUnion=Zn;Nn.prototype.visitDenseUnion=uMe;Nn.prototype.visitSparseUnion=uMe;Nn.prototype.visitDictionary=Zn;Nn.prototype.visitInterval=Zn;Nn.prototype.visitIntervalDayTime=Zn;Nn.prototype.visitIntervalYearMonth=Zn;Nn.prototype.visitDuration=Zn;Nn.prototype.visitDurationSecond=Zn;Nn.prototype.visitDurationMillisecond=Zn;Nn.prototype.visitDurationMicrosecond=Zn;Nn.prototype.visitDurationNanosecond=Zn;Nn.prototype.visitFixedSizeList=Zn;Nn.prototype.visitMap=Zn;const U6=new Nn;class Pn extends wr{}function Ln(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===me.Timestamp||t instanceof jl&&t.bitWidth!==64||t instanceof oy&&t.bitWidth!==64||t instanceof L1&&t.precision!==uu.HALF))return new qye(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new qye(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new yPt(o)})}class yPt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Pn.prototype.visitNull=Ln;Pn.prototype.visitBool=Ln;Pn.prototype.visitInt=Ln;Pn.prototype.visitInt8=Ln;Pn.prototype.visitInt16=Ln;Pn.prototype.visitInt32=Ln;Pn.prototype.visitInt64=Ln;Pn.prototype.visitUint8=Ln;Pn.prototype.visitUint16=Ln;Pn.prototype.visitUint32=Ln;Pn.prototype.visitUint64=Ln;Pn.prototype.visitFloat=Ln;Pn.prototype.visitFloat16=Ln;Pn.prototype.visitFloat32=Ln;Pn.prototype.visitFloat64=Ln;Pn.prototype.visitUtf8=Ln;Pn.prototype.visitBinary=Ln;Pn.prototype.visitFixedSizeBinary=Ln;Pn.prototype.visitDate=Ln;Pn.prototype.visitDateDay=Ln;Pn.prototype.visitDateMillisecond=Ln;Pn.prototype.visitTimestamp=Ln;Pn.prototype.visitTimestampSecond=Ln;Pn.prototype.visitTimestampMillisecond=Ln;Pn.prototype.visitTimestampMicrosecond=Ln;Pn.prototype.visitTimestampNanosecond=Ln;Pn.prototype.visitTime=Ln;Pn.prototype.visitTimeSecond=Ln;Pn.prototype.visitTimeMillisecond=Ln;Pn.prototype.visitTimeMicrosecond=Ln;Pn.prototype.visitTimeNanosecond=Ln;Pn.prototype.visitDecimal=Ln;Pn.prototype.visitList=Ln;Pn.prototype.visitStruct=Ln;Pn.prototype.visitUnion=Ln;Pn.prototype.visitDenseUnion=Ln;Pn.prototype.visitSparseUnion=Ln;Pn.prototype.visitDictionary=Ln;Pn.prototype.visitInterval=Ln;Pn.prototype.visitIntervalDayTime=Ln;Pn.prototype.visitIntervalYearMonth=Ln;Pn.prototype.visitDuration=Ln;Pn.prototype.visitDurationSecond=Ln;Pn.prototype.visitDurationMillisecond=Ln;Pn.prototype.visitDurationMicrosecond=Ln;Pn.prototype.visitDurationNanosecond=Ln;Pn.prototype.visitFixedSizeList=Ln;Pn.prototype.visitMap=Ln;const Wne=new Pn,vPt=(e,t)=>e+t;class Ob extends wr{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===kn.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+Ym.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Ym.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const bPt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),wPt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),_Pt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Ym.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},EPt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Ym.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},xPt=(e,t)=>e.type.mode===jc.Dense?lMe(e,t):cMe(e,t),lMe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Ym.visit(t[s],r[i])},cMe=({children:e},t)=>4+Ym.visitMany(e,e.map(()=>t)).reduce(vPt,0);Ob.prototype.visitUtf8=bPt;Ob.prototype.visitBinary=wPt;Ob.prototype.visitList=_Pt;Ob.prototype.visitFixedSizeList=EPt;Ob.prototype.visitUnion=xPt;Ob.prototype.visitDenseUnion=lMe;Ob.prototype.visitSparseUnion=cMe;const Ym=new Ob;var fMe;const dMe={},hMe={};class fi{constructor(t){var n,r,i;const s=t[0]instanceof fi?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Mi)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=dMe[o.typeId],f=s[0];this.isValid=d=>qne(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,hMe[o.typeId]),this._offsets=iMe(s);break}this.data=s,this.type=o,this.stride=Jp(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return rMe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${me[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return Wne.visit(this)}concat(...t){return new fi(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new fi(eMe(this,t,n,({data:r,_offsets:i},s,o)=>sMe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case me.Int:case me.Float:case me.Decimal:case me.Time:case me.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new fi(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return br.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(br.isDictionary(this.type)){const t=new z6(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new fi(n)}return new z6(this)}unmemoize(){if(br.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new fi(n)}return this}}fMe=Symbol.toStringTag;fi[fMe]=(e=>{e.type=br.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(me).map(n=>me[n]).filter(n=>typeof n=="number"&&n!==me.NONE);for(const n of t){const r=Uc.getVisitFnByTypeId(n),i=jd.getVisitFnByTypeId(n),s=U6.getVisitFnByTypeId(n),o=Ym.getVisitFnByTypeId(n);dMe[n]={get:r,set:i,indexOf:s,byteLength:o},hMe[n]=Object.create(e,{isValid:{value:CT(qne)},get:{value:CT(Uc.getVisitFnByTypeId(n))},set:{value:oMe(jd.getVisitFnByTypeId(n))},indexOf:{value:aMe(U6.getVisitFnByTypeId(n))},getByteLength:{value:CT(Ym.getVisitFnByTypeId(n))}})}return"Vector"})(fi.prototype);class z6 extends fi{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new z6(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new fi(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function SPt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${TPt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function TPt(e){return typeof e!="bigint"?tE(e):`${tE(e)}n`}const zV=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,CPt=(e,t=0)=>e.length>=t?e.subarray(0,t):M6(new e.constructor(t),e,0);class HB{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?zV(r*1,this.BYTES_PER_ELEMENT):zV(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=zV(t*this.stride,this.BYTES_PER_ELEMENT);const n=CPt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=M6(new this.ArrayType(t),this.buffer)}}HB.prototype.offset=0;class DP extends HB{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class pMe extends DP{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class mMe extends DP{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let Kc=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Jp(t),this._nulls=new pMe,n&&n.length>0&&(this._isValid=SPt(n))}toVector(){return new fi([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),Mu({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};Kc.prototype.length=1;Kc.prototype.stride=1;Kc.prototype.children=null;Kc.prototype.finished=!1;Kc.prototype.nullValues=null;Kc.prototype._isValid=()=>!0;class Ry extends Kc{constructor(t){super(t),this._values=new DP(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class qB extends Kc{constructor(t){super(t),this._pendingLength=0,this._offsets=new mMe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof zB?n[Lh].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class xY{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const VV=2,am=4,c0=4,Gi=4,_v=new Int32Array(2),Wye=new Float32Array(_v.buffer),Gye=new Float64Array(_v.buffer),CM=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var SY;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(SY||(SY={}));let V6=class gMe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new gMe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return _v[0]=this.readInt32(t),Wye[0]}readFloat64(t){return _v[CM?0:1]=this.readInt32(t),_v[CM?1:0]=this.readInt32(t+4),Gye[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Wye[0]=n,this.writeInt32(t,_v[0])}writeFloat64(t,n){Gye[0]=n,this.writeInt32(t,_v[CM?0:1]),this.writeInt32(t+4,_v[CM?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+am+c0)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<c0;n++)t+=String.fromCharCode(this.readInt8(this.position_+am+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=am;const i=this.bytes_.subarray(t,t+r);return n===SY.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+am}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=c0)throw new Error("FlatBuffers: file identifier must be length "+c0);for(let n=0;n<c0;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+am+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},yMe=class vMe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=V6.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=vMe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=V6.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(am,0),this.writeInt32(this.offset()-t+am)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*VV;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=VV;l<s;l+=VV)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Gi:0;if(n){const s=n;if(this.prep(this.minalign,am+c0+i),s.length!=c0)throw new TypeError("FlatBuffers: file identifier must be length "+c0);for(let o=c0-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,am+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(am,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class ia{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new ia).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Gi),(n||new ia).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return ia.startKeyValue(t),ia.addKey(t,n),ia.addValue(t,r),ia.endKeyValue(t)}}var NC;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(NC||(NC={}));var PC;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(PC||(PC={}));var H6;(function(e){e[e.DenseArray=0]="DenseArray"})(H6||(H6={}));class df{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new df).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Gi),(n||new df).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return df.startInt(t),df.addBitWidth(t,n),df.addIsSigned(t,r),df.endInt(t)}}class f0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new f0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Gi),(n||new f0).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new df).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):H6.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,H6.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class g_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new g_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Gi),(n||new g_).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return g_.startBinary(t),g_.endBinary(t)}}class y_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new y_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Gi),(n||new y_).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return y_.startBool(t),y_.endBool(t)}}var q6;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(q6||(q6={}));let iF=class xS{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new xS).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Gi),(n||new xS).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):q6.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,q6.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return xS.startDate(t),xS.addUnit(t,n),xS.endDate(t)}},SS=class fv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new fv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Gi),(n||new fv).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return fv.startDecimal(t),fv.addPrecision(t,n),fv.addScale(t,r),fv.addBitWidth(t,i),fv.endDecimal(t)}};var j1;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(j1||(j1={}));class um{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new um).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Gi),(n||new um).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):j1.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,j1.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return um.startDuration(t),um.addUnit(t,n),um.endDuration(t)}}class lm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new lm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Gi),(n||new lm).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return lm.startFixedSizeBinary(t),lm.addByteWidth(t,n),lm.endFixedSizeBinary(t)}}class cm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new cm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Gi),(n||new cm).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return cm.startFixedSizeList(t),cm.addListSize(t,n),cm.endFixedSizeList(t)}}var W6;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(W6||(W6={}));class fm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new fm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Gi),(n||new fm).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):W6.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,W6.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return fm.startFloatingPoint(t),fm.addPrecision(t,n),fm.endFloatingPoint(t)}}var G6;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(G6||(G6={}));class dm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new dm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Gi),(n||new dm).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):G6.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,G6.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return dm.startInterval(t),dm.addUnit(t,n),dm.endInterval(t)}}class v_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new v_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Gi),(n||new v_).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return v_.startList(t),v_.endList(t)}}let sF=class TS{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new TS).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Gi),(n||new TS).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return TS.startMap(t),TS.addKeysSorted(t,n),TS.endMap(t)}};class b_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new b_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Gi),(n||new b_).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return b_.startNull(t),b_.endNull(t)}}class w_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new w_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Gi),(n||new w_).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return w_.startStruct_(t),w_.endStruct_(t)}}let TI=class Ow{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Ow).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Gi),(n||new Ow).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):j1.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,j1.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Ow.startTime(t),Ow.addUnit(t,n),Ow.addBitWidth(t,r),Ow.endTime(t)}},CI=class Mw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Mw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Gi),(n||new Mw).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):j1.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,j1.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Mw.startTimestamp(t),Mw.addUnit(t,n),Mw.addTimezone(t,r),Mw.endTimestamp(t)}};var Y6;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Y6||(Y6={}));let $w=class Fw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Fw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Gi),(n||new Fw).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Y6.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,Y6.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Fw.startUnion(t),Fw.addMode(t,n),Fw.addTypeIds(t,r),Fw.endUnion(t)}};class __{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new __).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Gi),(n||new __).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return __.startUtf8(t),__.endUtf8(t)}}var Ds;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Ds||(Ds={}));let dd=class oF{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new oF).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Gi),(n||new oF).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Ds.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new f0).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new oF).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new ia).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Ds.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Xp=class Kg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Kg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Gi),(n||new Kg).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):PC.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new dd).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new ia).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,PC.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Kg.startSchema(t),Kg.addEndianness(t,n),Kg.addFields(t,r),Kg.addCustomMetadata(t,i),Kg.addFeatures(t,s),Kg.endSchema(t)}};class af{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new af).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Gi),(n||new af).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):NC.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Xp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new xY).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new xY).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ia).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,NC.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Ri{constructor(t=[],n,r,i=Tl.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=CY(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Ri(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Ri(n,this.metadata)}assign(...t){const n=t[0]instanceof Ri?t[0]:Array.isArray(t[0])?new Ri(t[0]):new Ri(t),r=[...this.fields],i=AM(AM(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:AM(AM(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=CY(s,new Map);return new Ri([...r,...s],i,new Map([...this.dictionaries,...o]))}}Ri.prototype.fields=null;Ri.prototype.metadata=null;Ri.prototype.dictionaries=null;let zi=class TY{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new TY(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],TY.new(n,r,i,s)}};zi.prototype.type=null;zi.prototype.name=null;zi.prototype.nullable=null;zi.prototype.metadata=null;function AM(e,t){return new Map([...e||new Map,...t||new Map])}function CY(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(br.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&CY(s.children,t)}return t}var APt=yMe,DPt=V6;class AY{static decode(t){t=new DPt($i(t));const n=af.getRootAsFooter(t),r=Ri.decode(n.schema(),new Map,n.version());return new IPt(r,n)}static encode(t){const n=new APt,r=Ri.encode(n,t.schema);af.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())U1.encode(n,o);const i=n.endVector();af.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())U1.encode(n,o);const s=n.endVector();return af.startFooter(n),af.addSchema(n,r),af.addVersion(n,Tl.V5),af.addRecordBatches(n,i),af.addDictionaries(n,s),af.finishFooterBuffer(n,af.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Tl.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class IPt extends AY{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return U1.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return U1.decode(n)}return null}}class U1{static decode(t){return new U1(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return xY.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=fp(r),this.bodyLength=fp(n)}}const DM=Object.freeze({done:!0,value:void 0});class bMe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class kPt extends bMe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return a0(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(DM);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return jye.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return jye.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return a0(this,void 0,void 0,function*(){return yield this.abort(t),DM})}return(t){return a0(this,void 0,void 0,function*(){return yield this.close(),DM})}read(t){return a0(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return a0(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(DM)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class HV extends kPt{write(t){if((t=$i(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?bY(this.toUint8Array(!0)):this.toUint8Array(!1).then(bY)}toUint8Array(t=!1){return t?qm(this._values)[0]:a0(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=uk(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return qm(o,a)[0]})}}class wMe extends qB{constructor(t){super(t),this._values=new HB(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,$i(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class RPt extends Kc{constructor(t){super(t),this._values=new pMe}setValue(t,n){this._values.set(t,+n)}}class WB extends Ry{}WB.prototype._setValue=T3e;class _Me extends WB{}_Me.prototype._setValue=Tne;class EMe extends WB{}EMe.prototype._setValue=Cne;class xMe extends Ry{}xMe.prototype._setValue=D3e;class NPt extends Kc{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new B1(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=K6({type:this.type.indices,nullValues:n}),this.dictionary=K6({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class SMe extends Ry{}SMe.prototype._setValue=S3e;class PPt extends Kc{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new RC(this.type.listSize,new zi(n,t.type,!0)),r}}class GB extends Ry{setValue(t,n){this._values.set(t,n)}}class OPt extends GB{setValue(t,n){super.setValue(t,_3e(n))}}class MPt extends GB{}class $Pt extends GB{}class YB extends Ry{}YB.prototype._setValue=R3e;class TMe extends YB{}TMe.prototype._setValue=Mne;class CMe extends YB{}CMe.prototype._setValue=$ne;class Q2 extends Ry{}Q2.prototype._setValue=N3e;class AMe extends Q2{}AMe.prototype._setValue=Fne;class DMe extends Q2{}DMe.prototype._setValue=Lne;class IMe extends Q2{}IMe.prototype._setValue=Bne;class kMe extends Q2{}kMe.prototype._setValue=jne;class Ny extends Ry{setValue(t,n){this._values.set(t,n)}}class FPt extends Ny{}class LPt extends Ny{}class BPt extends Ny{}class jPt extends Ny{}class UPt extends Ny{}class zPt extends Ny{}class VPt extends Ny{}class HPt extends Ny{}class qPt extends qB{constructor(t){super(t),this._offsets=new mMe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new kC(new zi(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class WPt extends qB{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new KR(new zi(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class GPt extends Kc{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class YPt extends Kc{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new Bu([...this.type.children,new zi(n,t.type,!0)]),r}}class J2 extends Ry{}J2.prototype._setValue=C3e;class RMe extends J2{}RMe.prototype._setValue=Ane;class NMe extends J2{}NMe.prototype._setValue=Dne;class PMe extends J2{}PMe.prototype._setValue=Ine;class OMe extends J2{}OMe.prototype._setValue=kne;class Z2 extends Ry{}Z2.prototype._setValue=A3e;class MMe extends Z2{}MMe.prototype._setValue=Rne;class $Me extends Z2{}$Me.prototype._setValue=Nne;class FMe extends Z2{}FMe.prototype._setValue=Pne;class LMe extends Z2{}LMe.prototype._setValue=One;class Gne extends Kc{constructor(t){super(t),this._typeIds=new DP(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new zi(n,t.type)];return this.type=new YR(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class KPt extends Gne{}class XPt extends Gne{constructor(t){super(t),this._offsets=new DP(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class BMe extends qB{constructor(t){super(t),this._values=new HB(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,cne(n))}_flushPending(t,n){}}BMe.prototype._flushPending=wMe.prototype._flushPending;class QPt extends wr{visitNull(){return GPt}visitBool(){return RPt}visitInt(){return Ny}visitInt8(){return FPt}visitInt16(){return LPt}visitInt32(){return BPt}visitInt64(){return jPt}visitUint8(){return UPt}visitUint16(){return zPt}visitUint32(){return VPt}visitUint64(){return HPt}visitFloat(){return GB}visitFloat16(){return OPt}visitFloat32(){return MPt}visitFloat64(){return $Pt}visitUtf8(){return BMe}visitBinary(){return wMe}visitFixedSizeBinary(){return SMe}visitDate(){return WB}visitDateDay(){return _Me}visitDateMillisecond(){return EMe}visitTimestamp(){return J2}visitTimestampSecond(){return RMe}visitTimestampMillisecond(){return NMe}visitTimestampMicrosecond(){return PMe}visitTimestampNanosecond(){return OMe}visitTime(){return Z2}visitTimeSecond(){return MMe}visitTimeMillisecond(){return $Me}visitTimeMicrosecond(){return FMe}visitTimeNanosecond(){return LMe}visitDecimal(){return xMe}visitList(){return qPt}visitStruct(){return YPt}visitUnion(){return Gne}visitDenseUnion(){return XPt}visitSparseUnion(){return KPt}visitDictionary(){return NPt}visitInterval(){return YB}visitIntervalDayTime(){return TMe}visitIntervalYearMonth(){return CMe}visitDuration(){return Q2}visitDurationSecond(){return AMe}visitDurationMillisecond(){return DMe}visitDurationMicrosecond(){return IMe}visistDurationNanosecond(){return kMe}visitFixedSizeList(){return PPt}visitMap(){return WPt}}const JPt=new QPt;class On extends wr{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function ql(e,t){return t instanceof e.constructor}function IP(e,t){return e===t||ql(e,t)}function Py(e,t){return e===t||ql(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function KB(e,t){return e===t||ql(e,t)&&e.precision===t.precision}function ZPt(e,t){return e===t||ql(e,t)&&e.byteWidth===t.byteWidth}function Yne(e,t){return e===t||ql(e,t)&&e.unit===t.unit}function kP(e,t){return e===t||ql(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function RP(e,t){return e===t||ql(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function eOt(e,t){return e===t||ql(e,t)&&e.children.length===t.children.length&&z1.compareManyFields(e.children,t.children)}function tOt(e,t){return e===t||ql(e,t)&&e.children.length===t.children.length&&z1.compareManyFields(e.children,t.children)}function Kne(e,t){return e===t||ql(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&z1.compareManyFields(e.children,t.children)}function nOt(e,t){return e===t||ql(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&z1.visit(e.indices,t.indices)&&z1.visit(e.dictionary,t.dictionary)}function Xne(e,t){return e===t||ql(e,t)&&e.unit===t.unit}function NP(e,t){return e===t||ql(e,t)&&e.unit===t.unit}function rOt(e,t){return e===t||ql(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&z1.compareManyFields(e.children,t.children)}function iOt(e,t){return e===t||ql(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&z1.compareManyFields(e.children,t.children)}On.prototype.visitNull=IP;On.prototype.visitBool=IP;On.prototype.visitInt=Py;On.prototype.visitInt8=Py;On.prototype.visitInt16=Py;On.prototype.visitInt32=Py;On.prototype.visitInt64=Py;On.prototype.visitUint8=Py;On.prototype.visitUint16=Py;On.prototype.visitUint32=Py;On.prototype.visitUint64=Py;On.prototype.visitFloat=KB;On.prototype.visitFloat16=KB;On.prototype.visitFloat32=KB;On.prototype.visitFloat64=KB;On.prototype.visitUtf8=IP;On.prototype.visitBinary=IP;On.prototype.visitFixedSizeBinary=ZPt;On.prototype.visitDate=Yne;On.prototype.visitDateDay=Yne;On.prototype.visitDateMillisecond=Yne;On.prototype.visitTimestamp=kP;On.prototype.visitTimestampSecond=kP;On.prototype.visitTimestampMillisecond=kP;On.prototype.visitTimestampMicrosecond=kP;On.prototype.visitTimestampNanosecond=kP;On.prototype.visitTime=RP;On.prototype.visitTimeSecond=RP;On.prototype.visitTimeMillisecond=RP;On.prototype.visitTimeMicrosecond=RP;On.prototype.visitTimeNanosecond=RP;On.prototype.visitDecimal=IP;On.prototype.visitList=eOt;On.prototype.visitStruct=tOt;On.prototype.visitUnion=Kne;On.prototype.visitDenseUnion=Kne;On.prototype.visitSparseUnion=Kne;On.prototype.visitDictionary=nOt;On.prototype.visitInterval=Xne;On.prototype.visitIntervalDayTime=Xne;On.prototype.visitIntervalYearMonth=Xne;On.prototype.visitDuration=NP;On.prototype.visitDurationSecond=NP;On.prototype.visitDurationMillisecond=NP;On.prototype.visitDurationMicrosecond=NP;On.prototype.visitDurationNanosecond=NP;On.prototype.visitFixedSizeList=rOt;On.prototype.visitMap=iOt;const z1=new On;function DY(e,t){return z1.compareSchemas(e,t)}function K6(e){const t=e.type,n=new(JPt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(K6(Object.assign(Object.assign({},l),{type:u})))}}return n}function qV(e,t){return sOt(e,t.map(n=>n.data.concat()))}function sOt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=oOt(n,o,c,t,i),o>0&&(r[s++]=Mu({type:new Bu(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new hf(e,f))]}function oOt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Mu({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var jMe;class pc{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Ri([]),this._offsets=[0],this;let i,s;t[0]instanceof Ri&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof hf)return[u];if(u instanceof pc)return u.batches;if(u instanceof Mi){if(u.type instanceof Bu)return[new hf(new Ri(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new fi([u[h]])),f=new Ri(l.map((h,p)=>new zi(String(h),c[p].type))),[,d]=qV(f,c);return d.length===0?[new hf(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Ri([]),!(i instanceof Ri))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof hf))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!DY(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??iMe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=rMe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?Wne.visit(new fi(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new pc(n,r.map(i=>new hf(n,i)))}slice(t,n){const r=this.schema;[t,n]=eMe({length:this.numRows},t,n);const i=sMe(this.data,this._offsets,t,n);return new pc(r,i.map(s=>new hf(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=Mu({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new fi(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new fi([Mu({type:new sy,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=qV(r,a)}return new pc(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new pc(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new pc(...qV(s,o))}}jMe=Symbol.toStringTag;pc[jMe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=CT(qne),e.get=CT(Uc.getVisitFn(me.Struct)),e.set=oMe(jd.getVisitFn(me.Struct)),e.indexOf=aMe(U6.getVisitFn(me.Struct)),e.getByteLength=CT(Ym.getVisitFn(me.Struct)),"Table"))(pc.prototype);var UMe;let hf=class AI{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Ri))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Mu({nullCount:0,type:new Bu(this.schema.fields),children:this.schema.fields.map(n=>Mu({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Mi))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Yye(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=zi.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new Ri(r),a=Mu({type:new Bu(r),length:s,children:i,nullCount:0});[this.schema,this.data]=Yye(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=zMe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Uc.visit(this.data,t)}set(t,n){return jd.visit(this.data,t,n)}indexOf(t,n){return U6.visit(this.data,t,n)}getByteLength(t){return Ym.visit(this.data,t)}[Symbol.iterator](){return Wne.visit(new fi([this.data]))}toArray(){return[...this]}concat(...t){return new pc(this.schema,[this,...t])}slice(t,n){const[r]=new fi([this.data]).slice(t,n).data;return new AI(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new fi([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new fi([Mu({type:new sy,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Ri(s,new Map(this.schema.metadata)),i=Mu({type:new Bu(s),children:o})}return new AI(r,i)}select(t){const n=this.schema.select(t),r=new Bu(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new AI(n,Mu({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=Mu({type:new Bu(n.fields),length:this.numRows,children:r});return new AI(n,i)}};UMe=Symbol.toStringTag;hf[UMe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(hf.prototype);function Yye(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Mu({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),Mu({type:new Bu(i),length:n,children:s})]}function zMe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])zMe(a.children,l==null?void 0:l.children,n);if(br.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class aOt extends hf{constructor(t){const n=t.fields.map(i=>Mu({type:i.type})),r=Mu({type:new Bu(t.fields),nullCount:0,children:n});super(t,r)}}var X6;(function(e){e[e.BUFFER=0]="BUFFER"})(X6||(X6={}));var Q6;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(Q6||(Q6={}));class Ev{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Ev).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Gi),(n||new Ev).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Q6.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):X6.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,Q6.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,X6.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Ev.startBodyCompression(t),Ev.addCodec(t,n),Ev.addMethod(t,r),Ev.endBodyCompression(t)}}let VMe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},HMe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},Jg=class IY{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new IY).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Gi),(n||new IY).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new HMe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new VMe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Ev).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},CS=class kY{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new kY).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Gi),(n||new kY).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Jg).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var J6;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(J6||(J6={}));let iv=class Vp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Vp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Gi),(n||new Vp).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):NC.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):J6.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ia).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,NC.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,J6.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Vp.startMessage(t),Vp.addVersion(t,n),Vp.addHeaderType(t,r),Vp.addHeader(t,i),Vp.addBodyLength(t,s),Vp.addCustomMetadata(t,o),Vp.endMessage(t)}};class uOt extends wr{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return b_.startNull(n),b_.endNull(n)}visitInt(t,n){return df.startInt(n),df.addBitWidth(n,t.bitWidth),df.addIsSigned(n,t.isSigned),df.endInt(n)}visitFloat(t,n){return fm.startFloatingPoint(n),fm.addPrecision(n,t.precision),fm.endFloatingPoint(n)}visitBinary(t,n){return g_.startBinary(n),g_.endBinary(n)}visitBool(t,n){return y_.startBool(n),y_.endBool(n)}visitUtf8(t,n){return __.startUtf8(n),__.endUtf8(n)}visitDecimal(t,n){return SS.startDecimal(n),SS.addScale(n,t.scale),SS.addPrecision(n,t.precision),SS.addBitWidth(n,t.bitWidth),SS.endDecimal(n)}visitDate(t,n){return iF.startDate(n),iF.addUnit(n,t.unit),iF.endDate(n)}visitTime(t,n){return TI.startTime(n),TI.addUnit(n,t.unit),TI.addBitWidth(n,t.bitWidth),TI.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return CI.startTimestamp(n),CI.addUnit(n,t.unit),r!==void 0&&CI.addTimezone(n,r),CI.endTimestamp(n)}visitInterval(t,n){return dm.startInterval(n),dm.addUnit(n,t.unit),dm.endInterval(n)}visitDuration(t,n){return um.startDuration(n),um.addUnit(n,t.unit),um.endDuration(n)}visitList(t,n){return v_.startList(n),v_.endList(n)}visitStruct(t,n){return w_.startStruct_(n),w_.endStruct_(n)}visitUnion(t,n){$w.startTypeIdsVector(n,t.typeIds.length);const r=$w.createTypeIdsVector(n,t.typeIds);return $w.startUnion(n),$w.addMode(n,t.mode),$w.addTypeIds(n,r),$w.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return f0.startDictionaryEncoding(n),f0.addId(n,BigInt(t.id)),f0.addIsOrdered(n,t.isOrdered),r!==void 0&&f0.addIndexType(n,r),f0.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return lm.startFixedSizeBinary(n),lm.addByteWidth(n,t.byteWidth),lm.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return cm.startFixedSizeList(n),cm.addListSize(n,t.listSize),cm.endFixedSizeList(n)}visitMap(t,n){return sF.startMap(n),sF.addKeysSorted(n,t.keysSorted),sF.endMap(n)}}const WV=new uOt;function lOt(e,t=new Map){return new Ri(fOt(e,t),aF(e.metadata),t)}function qMe(e){return new Pf(e.count,WMe(e.columns),GMe(e.columns))}function cOt(e){return new Km(qMe(e.data),e.id,e.isDelta)}function fOt(e,t){return(e.fields||[]).filter(Boolean).map(n=>zi.fromJSON(n,t))}function Kye(e,t){return(e.children||[]).filter(Boolean).map(n=>zi.fromJSON(n,t))}function WMe(e){return(e||[]).reduce((t,n)=>[...t,new V1(n.count,dOt(n.VALIDITY)),...WMe(n.children)],[])}function GMe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new vm(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new vm(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new vm(t.length,i.OFFSET.length)),i.DATA&&t.push(new vm(t.length,i.DATA.length)),t=GMe(i.children,t)}return t}function dOt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function hOt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Qye(e,Kye(e,t)),i=new zi(e.name,o,e.nullable,aF(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?Xye(r):new F1,a=new B1(t.get(n),r,n,s.isOrdered),i=new zi(e.name,a,e.nullable,aF(e.metadata))):(r=(r=s.indexType)?Xye(r):new F1,t.set(n,o=Qye(e,Kye(e,t))),a=new B1(o,r,n,s.isOrdered),i=new zi(e.name,a,e.nullable,aF(e.metadata))),i||null}function aF(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Xye(e){return new jl(e.isSigned,e.bitWidth)}function Qye(e,t){const n=e.type.name;switch(n){case"NONE":return new sy;case"null":return new sy;case"binary":return new WR;case"utf8":return new AC;case"bool":return new GR;case"list":return new kC((t||[])[0]);case"struct":return new Bu(t||[]);case"struct_":return new Bu(t||[])}switch(n){case"int":{const r=e.type;return new jl(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new L1(uu[r.precision])}case"decimal":{const r=e.type;return new $6(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new DC(Wm[r.unit])}case"time":{const r=e.type;return new oy(kn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new F6(kn[r.unit],r.timezone)}case"interval":{const r=e.type;return new IC(Gm[r.unit])}case"duration":{const r=e.type;return new L6(kn[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new YR(jc[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new B6(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new RC(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new KR((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var pOt=yMe,mOt=V6;class hm{static fromJSON(t,n){const r=new hm(0,Tl.V5,n);return r._createHeader=gOt(t,n),r}static decode(t){t=new mOt($i(t));const n=iv.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new hm(r,i,s);return o._createHeader=yOt(n,s),o}static encode(t){const n=new pOt;let r=-1;return t.isSchema()?r=Ri.encode(n,t.header()):t.isRecordBatch()?r=Pf.encode(n,t.header()):t.isDictionaryBatch()&&(r=Km.encode(n,t.header())),iv.startMessage(n),iv.addVersion(n,Tl.V5),iv.addHeader(n,r),iv.addHeaderType(n,t.headerType),iv.addBodyLength(n,BigInt(t.bodyLength)),iv.finishMessageBuffer(n,iv.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Ri)return new hm(0,Tl.V5,Aa.Schema,t);if(t instanceof Pf)return new hm(n,Tl.V5,Aa.RecordBatch,t);if(t instanceof Km)return new hm(n,Tl.V5,Aa.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Aa.Schema}isRecordBatch(){return this.headerType===Aa.RecordBatch}isDictionaryBatch(){return this.headerType===Aa.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=fp(t)}}class Pf{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=fp(t)}}class Km{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=fp(n)}}class vm{constructor(t,n){this.offset=fp(t),this.length=fp(n)}}class V1{constructor(t,n){this.length=fp(t),this.nullCount=fp(n)}}function gOt(e,t){return()=>{switch(t){case Aa.Schema:return Ri.fromJSON(e);case Aa.RecordBatch:return Pf.fromJSON(e);case Aa.DictionaryBatch:return Km.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Aa[t]}, type: ${t} }`)}}function yOt(e,t){return()=>{switch(t){case Aa.Schema:return Ri.decode(e.header(new Xp),new Map,e.version());case Aa.RecordBatch:return Pf.decode(e.header(new Jg),e.version());case Aa.DictionaryBatch:return Km.decode(e.header(new CS),e.version())}throw new Error(`Unrecognized Message type: { name: ${Aa[t]}, type: ${t} }`)}}zi.encode=DOt;zi.decode=COt;zi.fromJSON=hOt;Ri.encode=AOt;Ri.decode=vOt;Ri.fromJSON=lOt;Pf.encode=IOt;Pf.decode=bOt;Pf.fromJSON=qMe;Km.encode=kOt;Km.decode=wOt;Km.fromJSON=cOt;V1.encode=ROt;V1.decode=EOt;vm.encode=NOt;vm.decode=_Ot;function vOt(e,t=new Map,n=Tl.V5){const r=TOt(e,t);return new Ri(r,uF(e),t,n)}function bOt(e,t=Tl.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Pf(e.length(),xOt(e),SOt(e,t))}function wOt(e,t=Tl.V5){return new Km(Pf.decode(e.data(),t),e.id(),e.isDelta())}function _Ot(e){return new vm(e.offset(),e.length())}function EOt(e){return new V1(e.length(),e.nullCount())}function xOt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=V1.decode(n));return t}function SOt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Tl.V4&&(r.bb_pos+=8*(i+1)),n[++s]=vm.decode(r));return n}function TOt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=zi.decode(r,t));return n}function Jye(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=zi.decode(r,t));return n}function COt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=eve(e,Jye(e,t)),r=new zi(e.name(),i,e.nullable(),uF(e))):t.has(n=fp(a.id()))?(s=(s=a.indexType())?Zye(s):new F1,o=new B1(t.get(n),s,n,a.isOrdered()),r=new zi(e.name(),o,e.nullable(),uF(e))):(s=(s=a.indexType())?Zye(s):new F1,t.set(n,i=eve(e,Jye(e,t))),o=new B1(i,s,n,a.isOrdered()),r=new zi(e.name(),o,e.nullable(),uF(e))),r||null}function uF(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function Zye(e){return new jl(e.isSigned(),e.bitWidth())}function eve(e,t){const n=e.typeType();switch(n){case Ds.NONE:return new sy;case Ds.Null:return new sy;case Ds.Binary:return new WR;case Ds.Utf8:return new AC;case Ds.Bool:return new GR;case Ds.List:return new kC((t||[])[0]);case Ds.Struct_:return new Bu(t||[])}switch(n){case Ds.Int:{const r=e.type(new df);return new jl(r.isSigned(),r.bitWidth())}case Ds.FloatingPoint:{const r=e.type(new fm);return new L1(r.precision())}case Ds.Decimal:{const r=e.type(new SS);return new $6(r.scale(),r.precision(),r.bitWidth())}case Ds.Date:{const r=e.type(new iF);return new DC(r.unit())}case Ds.Time:{const r=e.type(new TI);return new oy(r.unit(),r.bitWidth())}case Ds.Timestamp:{const r=e.type(new CI);return new F6(r.unit(),r.timezone())}case Ds.Interval:{const r=e.type(new dm);return new IC(r.unit())}case Ds.Duration:{const r=e.type(new um);return new L6(r.unit())}case Ds.Union:{const r=e.type(new $w);return new YR(r.mode(),r.typeIdsArray()||[],t||[])}case Ds.FixedSizeBinary:{const r=e.type(new lm);return new B6(r.byteWidth())}case Ds.FixedSizeList:{const r=e.type(new cm);return new RC(r.listSize(),(t||[])[0])}case Ds.Map:{const r=e.type(new sF);return new KR((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Ds[n]}" (${n})`)}function AOt(e,t){const n=t.fields.map(s=>zi.encode(e,s));Xp.startFieldsVector(e,n.length);const r=Xp.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Xp.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return ia.startKeyValue(e),ia.addKey(e,a),ia.addValue(e,u),ia.endKeyValue(e)})):-1;return Xp.startSchema(e),Xp.addFields(e,r),Xp.addEndianness(e,POt?PC.Little:PC.Big),i!==-1&&Xp.addCustomMetadata(e,i),Xp.endSchema(e)}function DOt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;br.isDictionary(s)?(o=s.dictionary.typeId,i=WV.visit(s,e),r=WV.visit(s.dictionary,e)):r=WV.visit(s,e);const a=(s.children||[]).map(c=>zi.encode(e,c)),u=dd.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?dd.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return ia.startKeyValue(e),ia.addKey(e,d),ia.addValue(e,h),ia.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),dd.startField(e),dd.addType(e,r),dd.addTypeType(e,o),dd.addChildren(e,u),dd.addNullable(e,!!t.nullable),n!==-1&&dd.addName(e,n),i!==-1&&dd.addDictionary(e,i),l!==-1&&dd.addCustomMetadata(e,l),dd.endField(e)}function IOt(e,t){const n=t.nodes||[],r=t.buffers||[];Jg.startNodesVector(e,n.length);for(const o of n.slice().reverse())V1.encode(e,o);const i=e.endVector();Jg.startBuffersVector(e,r.length);for(const o of r.slice().reverse())vm.encode(e,o);const s=e.endVector();return Jg.startRecordBatch(e),Jg.addLength(e,BigInt(t.length)),Jg.addNodes(e,i),Jg.addBuffers(e,s),Jg.endRecordBatch(e)}function kOt(e,t){const n=Pf.encode(e,t.data);return CS.startDictionaryBatch(e),CS.addId(e,BigInt(t.id)),CS.addIsDelta(e,t.isDelta),CS.addData(e,n),CS.endDictionaryBatch(e)}function ROt(e,t){return HMe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function NOt(e,t){return VMe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const POt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),RY="ARROW1",Qne=new Uint8Array(RY.length);for(let e=0;e<RY.length;e+=1)Qne[e]=RY.codePointAt(e);Qne.length;class Co extends wr{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof hf?s.data.children:s.data),r=new Co;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof fi)return this.visitMany(t.data),this;const{type:n}=t;if(!br.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(br.isUnion(n))this.nodes.push(new V1(r,0));else{const{nullCount:i}=t;br.isNull(n)||tp.call(this,i<=0?new Uint8Array(0):j6(t.offset,r,t.nullBitmap)),this.nodes.push(new V1(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function tp(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new vm(this._byteLength,t)),this._byteLength+=t,this}function OOt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(tp.call(this,i),n.mode===jc.Sparse)return NY.call(this,e);if(n.mode===jc.Dense){if(e.offset<=0)return tp.call(this,s),NY.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);tp.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function MOt(e){let t;return e.nullCount>=e.length?tp.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?tp.call(this,j6(e.offset,e.length,t)):tp.call(this,nMe(e.values))}function Oy(e){return tp.call(this,e.values.subarray(0,e.length*e.stride))}function YMe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return tp.call(this,XOe(-i,t+1,r)),tp.call(this,n.subarray(i,i+o)),this}function Jne(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return tp.call(this,XOe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function NY(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Co.prototype.visitBool=MOt;Co.prototype.visitInt=Oy;Co.prototype.visitFloat=Oy;Co.prototype.visitUtf8=YMe;Co.prototype.visitBinary=YMe;Co.prototype.visitFixedSizeBinary=Oy;Co.prototype.visitDate=Oy;Co.prototype.visitTimestamp=Oy;Co.prototype.visitTime=Oy;Co.prototype.visitDecimal=Oy;Co.prototype.visitList=Jne;Co.prototype.visitStruct=NY;Co.prototype.visitUnion=OOt;Co.prototype.visitInterval=Oy;Co.prototype.visitDuration=Oy;Co.prototype.visitFixedSizeList=Jne;Co.prototype.visitMap=Jne;class KMe extends bMe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new HV,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Nb(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return jB(t)?t.then(n=>this.writeAll(n)):UB(t)?nre(this,t):tre(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof HV?this._sink=t:(this._sink=new HV,t&&URt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&zRt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!DY(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof pc&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof hf&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!DY(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof hf?t instanceof aOt||this._writeRecordBatch(t):t instanceof pc?this.writeAll(t.batches):fne(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=hm.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Aa.RecordBatch?this._recordBatchBlocks.push(new U1(a,t.bodyLength,this._position)):t.headerType===Aa.DictionaryBatch&&this._dictionaryBlocks.push(new U1(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=$i(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(hm.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Qne)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=Co.assemble(t),o=new Pf(t.numRows,r,i),a=hm.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=Co.assemble(new fi([t])),u=new Pf(t.length,s,o),l=new Km(u,n,r),c=hm.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class Zne extends KMe{static writeAll(t,n){const r=new Zne(n);return jB(t)?t.then(i=>r.writeAll(i)):UB(t)?nre(r,t):tre(r,t)}}class ere extends KMe{static writeAll(t){const n=new ere;return jB(t)?t.then(r=>n.writeAll(r)):UB(t)?nre(n,t):tre(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=AY.encode(new AY(t,Tl.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function tre(e,t){let n=t;t instanceof pc&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function nre(e,t){var n,r,i,s,o,a,u;return a0(this,void 0,void 0,function*(){try{for(n=!0,r=uk(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function $Ot(e,t="stream"){return(t==="stream"?Zne:ere).writeAll(e).toUint8Array(!0)}function rre(e,t=1){return(e*t+63&-64||64)/t}function H1(e,t,n=e.BYTES_PER_ELEMENT){return new e(rre(t,n))}function ire(e){return e instanceof Mi?e:new Mi(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function FOt(e){return new fi([ire(e)])}const sre=new TextEncoder;function LOt(e,t,n){const r=sre.encode(n);return e.set(r,t),r.length}function BOt(e,t,n){return sre.encodeInto(n,e.subarray(t)).written}const jOt=sre.encodeInto?BOt:LOt;function tve(e,t){const n=H1(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function UOt(e,t){const n=H1(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function zOt(e,t){const n=H1(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function VOt(e,t){const n=H1(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function HOt(e){const t=K6({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function qOt(e,t,n){const r=H1(Int32Array,t+1),i=H1(Uint8Array,3*n);let s=0;return{set(o,a){s+=jOt(i,s,o),r[a+1]=s},data:()=>{const o=rre(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function WOt(e,t){const n=[],r=H1(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:GOt(e.dictionary,n,o)})}}function GOt(e,t,n){const r=qOt(e,t.length,n);return t.forEach(r.set),FOt(r.data())}function YOt(e,t){const n=H1(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function KOt(e,t,n=!0){let r;switch(e.typeId){case me.Int:r=e.bitWidth<64?tve:null;break;case me.Float:r=e.precision>0?tve:null;break;case me.Dictionary:r=e.dictionary.typeId===me.Utf8&&e.indices.typeId===me.Int&&e.indices.bitWidth<64?WOt:null;break;case me.Bool:r=UOt;break;case me.Date:r=e.unit?VOt:zOt;break}return r==null?HOt(e):n?YOt(r(e,t),t):r(e,t)}function XOt(e,t){const n=e.length,r=rre(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),ire({type:t,length:n,buffers:[null,i]})}function XMe(e,t,n,r,i=!0){const s=KOt(r,e,i);return t(n,s.set),ire(s.data())}function ore(e){if(e instanceof br||e==null)return e;switch(e){case me.Binary:return new WR;case me.Bool:return new GR;case me.DateDay:return new rNt;case me.DateMillisecond:case me.Date:return new iNt;case me.Dictionary:return new B1(new AC,new F1);case me.Float16:return new v3e;case me.Float32:return new _ne;case me.Float64:case me.Float:return new Ene;case me.Int8:return new pne;case me.Int16:return new mne;case me.Int32:case me.Int:return new F1;case me.Int64:return new gne;case me.IntervalDayTime:return new lNt;case me.Interval:case me.IntervalYearMonth:return new cNt;case me.Null:return new sy;case me.TimeMicrosecond:return new aNt;case me.TimeMillisecond:case me.Time:return new oNt;case me.TimeNanosecond:return new uNt;case me.TimeSecond:return new sNt;case me.Uint8:return new yne;case me.Uint16:return new vne;case me.Uint32:return new bne;case me.Uint64:return new wne;case me.Utf8:return new AC;default:pr(`Unsupported type code: ${Hm(e)}. Use a data type constructor instead?`)}}function QOt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function QMe(e,t){const n=PY();return e(t,n.add),n}function PY(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(iy(t))++e.dates,QOt(t)&&++e.utcdays;else if(m_(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=PY());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=PY())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return ore(JOt(e))}};return e}function JOt(e){const t=e.count-e.nulls;if(t===0)return me.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?me.Float64:n<128?me.Int8:n<32768?me.Int16:me.Int32:n>=2**32?me.Float64:n<256?me.Uint8:n<65536?me.Uint16:me.Uint32}else{if(e.nums===t)return me.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?me.Int64:pr(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?me.Uint64:pr(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return me.Bool;if(e.utcdays===t)return me.DateDay;if(e.dates===t)return me.DateMillisecond;if(e.arrays===t){const n=zi.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new RC(e.minlen,n):new kC(n)}else if(e.structs===t){const n=e.struct_prof;return new Bu(Object.keys(n).map(r=>zi.new(r,n[r].type(),!0)))}else{if(e.strings>0)return me.Dictionary;pr("Type inference failure")}}}}function ZOt(e,t,n,r,i,s=!0){if(i=ore(i),!i){const o=QMe(r,t);s=o.nulls>0,i=o.type()}return XMe(n,r,t,i,s)}function e3t(e,t,n,r,i,s=!0){i=ore(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=t3t(o);if(u&&a&&nve(u.type,i))return u;const l=o.data;if(CP(l)){const c=n3t(l);if(a&&c&&nve(c,i))return XOt(l,c);i=i||c,s=!1}if(!i){const c=QMe(r,o);s=c.nulls>0,i=c.type()}return XMe(n,r,o,i,s)}function t3t(e){return e instanceof fi?e:e.vector instanceof fi?e.vector:null}function n3t(e){const n={Float32Array:_ne,Float64Array:Ene,Int8Array:pne,Int16Array:mne,Int32Array:F1,Uint8Array:yne,Uint16Array:vne,Uint32Array:bne,BigInt64Array:gne,BigUint64Array:wne}[e.constructor.name];return n?new n:null}function nve(e,t){return!e||!t?!0:e.compareTo(t)}function r3t(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function i3t(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&m_(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const s3t=()=>pr("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function o3t(){try{return pc}catch{s3t()}}function JMe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=a3t(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&pr("Column length mismatch"),a[l]=c});const u=o3t();return new u(a)}function a3t(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=_s(n)?n(e):ci(n)?n:null;if(ci(e))return{dataFrom:ZOt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:r3t(e,r,i)};if(u3t(e))return{dataFrom:e3t,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:i3t(e,r,i)};pr("Unsupported input data type")}function u3t(e){return e&&_s(e.reify)}function l3t(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return $Ot(JMe(e,r),n)}function c3t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function f3t(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&iy(u))++i,c3t(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function XB(e,t){return _s(t)?t(e):t||e.columnNames()}function ZMe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=f3t(d3t(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function d3t(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function are(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function h3t(e,t={}){const n=XB(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":iy(l)?LB(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return are(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function e$e(e,t={}){if(_s(t))return t(e)+"";const n=typeof e;if(n==="object"){if(iy(e))return t.utc?LB(e):EOe(e);{const r=JSON.stringify(e,(s,o)=>CP(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function QB(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function p3t(e,t={}){const n=XB(e,t.columns),{align:r,format:i}=ZMe(e,n,t),s=m3t(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(e$e(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const b=y?a(r[g]):"",w=s[m]&&s[m](g,d,f)||"",S=(b?`text-align: ${b};`+(w?" ":""):"")+w;return`<${m}${S?` style="${S}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return are(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function m3t(e){return QB(e.style,t=>_s(t)?t:()=>t)}function g3t(e,t=!0,n=!1){return e===void 0||e?t:n}const y3t=e=>iy(e)?LB(e,!0):e;function v3t(e,t={}){const n=g3t(t.schema),r=t.format||{},i=XB(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||y3t;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function b3t(e,t={}){const n=XB(e,t.columns),{align:r,format:i}=ZMe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return are(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(e$e(u,i[l]))+"|"}}),a+`
`}function t$e(e,t){for(const[n,r]of BB(t))e.set(n,r);return e}function w3t(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function ay(e,t,n=new Map){return t=Bl(t)?e.columnName(t):t,mu(t)?n.set(t,t):ci(t)?t.forEach(r=>ay(e,r,n)):_s(t)?ay(e,t(e),n):Qu(t)?t$e(n,t):pr(`Invalid column selection: ${Hm(t)}`),n}function JB(e,t){return e.toObject=t,e}function n$e(e){return ci(e)?e.map(n$e):e&&e.toObject?e.toObject():e}function OC(){return JB(e=>e.columnNames(),()=>({all:[]}))}function r$e(...e){return e=e.flat(),JB(t=>{const n=ay(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:n$e(e)}))}function _3t(e,t){return JB(n=>{let r=Bl(e)?e:n.columnIndex(e),i=Bl(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function E3t(e){return mu(e)&&(e=RegExp(w3t(e))),JB(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function x3t(e){return CP(e.data)?e.data.constructor:Array}class d0 extends jkt{static from(t,n){return new d0(Vkt(t,n),n)}static new(t,n){if(t instanceof d0)return t;const r={},i=[];for(const[s,o]of BB(t))r[s]=o,i.push(s);return new d0(r,n||i)}constructor(t,n,r,i,s,o){QB(t,zkt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new d0(t||this._data,n||(t?null:this._names),o,i!==void 0?i:vRt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Wf(r).groupby(r.groups());return t.forEach(s=>{s=d0.new(s),s.numRows()!==n&&pr("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):pr(`Unrecognized column: ${t}`)}object(t=0){return rve(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=ay(this,t.columns||OC()),o=GOe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),wRt(this,u,a,n)}return a}*[Symbol.iterator](){const t=rve(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(x3t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=bRt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return JMe(this,t)}toArrowBuffer(t){return l3t(this,t)}toCSV(t){return h3t(this,t)}toHTML(t){return p3t(this,t)}toJSON(t){return v3t(this,t)}toMarkdown(t){return b3t(this,t)}}function rve(e){let t=e._builder;if(!t){const n=GOe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class S3t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Jr(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=T3t[e.type];s&&s(e,t,n)}const IM=(e,t,n)=>{Jr(e.argument,t,n,e)},GV=(e,t,n)=>{Jr(e.left,t,n,e),Jr(e.right,t,n,e)},ive=(e,t,n)=>{Jr(e.test,t,n,e),Jr(e.consequent,t,n,e),e.alternate&&Jr(e.alternate,t,n,e)},YV=(e,t,n)=>{Qp(e.params,t,n,e),Jr(e.body,t,n,e)},sve=(e,t,n)=>{Jr(e.callee,t,n,e),Qp(e.arguments,t,n,e)},Qp=(e,t,n,r)=>{e.forEach(i=>Jr(i,t,n,r))},T3t={TemplateLiteral:(e,t,n)=>{Qp(e.expressions,t,n,e),Qp(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{Jr(e.object,t,n,e),Jr(e.property,t,n,e)},CallExpression:sve,NewExpression:sve,ArrayExpression:(e,t,n)=>{Qp(e.elements,t,n,e)},AssignmentExpression:GV,AwaitExpression:IM,BinaryExpression:GV,LogicalExpression:GV,UnaryExpression:IM,UpdateExpression:IM,ConditionalExpression:ive,ObjectExpression:(e,t,n)=>{Qp(e.properties,t,n,e)},Property:(e,t,n)=>{Jr(e.key,t,n,e),Jr(e.value,t,n,e)},ArrowFunctionExpression:YV,FunctionExpression:YV,FunctionDeclaration:YV,VariableDeclaration:(e,t,n)=>{Qp(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{Jr(e.id,t,n,e),Jr(e.init,t,n,e)},SpreadElement:(e,t,n)=>{Jr(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Qp(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{Jr(e.expression,t,n,e)},IfStatement:ive,ForStatement:(e,t,n)=>{Jr(e.init,t,n,e),Jr(e.test,t,n,e),Jr(e.update,t,n,e),Jr(e.body,t,n,e)},WhileStatement:(e,t,n)=>{Jr(e.test,t,n,e),Jr(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{Jr(e.body,t,n,e),Jr(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{Jr(e.discriminant,t,n,e),Qp(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&Jr(e.test,t,n,e),Qp(e.consequent,t,n,e)},ReturnStatement:IM,Program:(e,t,n)=>{Jr(e.body[0],t,n,e)}};function i$e(e){delete e.start,delete e.end,delete e.optional}function ove(e){i$e(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function C3t(e){return Jr(e,null,{Column:ove,Constant:ove,Default:i$e}),e}function oa(e,t){return t&&t.type===e}function A3t(e){return oa(xRt,e)||oa(ERt,e)}function D3t(e){return _s(e)?e:()=>e}const I3t="Escaped functions are not valid as rollup or pivot values.";function k3t(e,t,n){e.aggronly&&pr(I3t);const r="(row,data)=>fn("+WOe(e.table.columnNames())+",$)";return{escape:lne.escape(r,D3t(t.expr),n)}}var R3t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],s$e=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],N3t="-----------------------------------------------------------------------------------------------------------------------------------------------------",o$e="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",KV={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},XV="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",P3t={5:XV,"5module":XV+" export import",6:XV+" const class extends export import super"},O3t=/^in(stanceof)?$/,M3t=new RegExp("["+o$e+"]"),$3t=new RegExp("["+o$e+N3t+"]");function OY(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function uy(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&M3t.test(String.fromCharCode(e)):t===!1?!1:OY(e,s$e)}function MC(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&$3t.test(String.fromCharCode(e)):t===!1?!1:OY(e,s$e)||OY(e,R3t)}var oi=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function id(e,t){return new oi(e,{beforeExpr:!0,binop:t})}var sd={beforeExpr:!0},tc={startsExpr:!0},ure={};function Vr(e,t){return t===void 0&&(t={}),t.keyword=e,ure[e]=new oi(e,t)}var ne={num:new oi("num",tc),regexp:new oi("regexp",tc),string:new oi("string",tc),name:new oi("name",tc),privateId:new oi("privateId",tc),eof:new oi("eof"),bracketL:new oi("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new oi("]"),braceL:new oi("{",{beforeExpr:!0,startsExpr:!0}),braceR:new oi("}"),parenL:new oi("(",{beforeExpr:!0,startsExpr:!0}),parenR:new oi(")"),comma:new oi(",",sd),semi:new oi(";",sd),colon:new oi(":",sd),dot:new oi("."),question:new oi("?",sd),questionDot:new oi("?."),arrow:new oi("=>",sd),template:new oi("template"),invalidTemplate:new oi("invalidTemplate"),ellipsis:new oi("...",sd),backQuote:new oi("`",tc),dollarBraceL:new oi("${",{beforeExpr:!0,startsExpr:!0}),eq:new oi("=",{beforeExpr:!0,isAssign:!0}),assign:new oi("_=",{beforeExpr:!0,isAssign:!0}),incDec:new oi("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new oi("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:id("||",1),logicalAND:id("&&",2),bitwiseOR:id("|",3),bitwiseXOR:id("^",4),bitwiseAND:id("&",5),equality:id("==/!=/===/!==",6),relational:id("</>/<=/>=",7),bitShift:id("<</>>/>>>",8),plusMin:new oi("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:id("%",10),star:id("*",10),slash:id("/",10),starstar:new oi("**",{beforeExpr:!0}),coalesce:id("??",1),_break:Vr("break"),_case:Vr("case",sd),_catch:Vr("catch"),_continue:Vr("continue"),_debugger:Vr("debugger"),_default:Vr("default",sd),_do:Vr("do",{isLoop:!0,beforeExpr:!0}),_else:Vr("else",sd),_finally:Vr("finally"),_for:Vr("for",{isLoop:!0}),_function:Vr("function",tc),_if:Vr("if"),_return:Vr("return",sd),_switch:Vr("switch"),_throw:Vr("throw",sd),_try:Vr("try"),_var:Vr("var"),_const:Vr("const"),_while:Vr("while",{isLoop:!0}),_with:Vr("with"),_new:Vr("new",{beforeExpr:!0,startsExpr:!0}),_this:Vr("this",tc),_super:Vr("super",tc),_class:Vr("class",tc),_extends:Vr("extends",sd),_export:Vr("export"),_import:Vr("import",tc),_null:Vr("null",tc),_true:Vr("true",tc),_false:Vr("false",tc),_in:Vr("in",{beforeExpr:!0,binop:7}),_instanceof:Vr("instanceof",{beforeExpr:!0,binop:7}),_typeof:Vr("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Vr("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Vr("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Zd=/\r\n?|\n|\u2028|\u2029/,F3t=new RegExp(Zd.source,"g");function eA(e){return e===10||e===13||e===8232||e===8233}function a$e(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(eA(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var u$e=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,_d=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,l$e=Object.prototype,L3t=l$e.hasOwnProperty,B3t=l$e.toString,PP=Object.hasOwn||function(e,t){return L3t.call(e,t)},ave=Array.isArray||function(e){return B3t.call(e)==="[object Array]"},uve=Object.create(null);function zv(e){return uve[e]||(uve[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function q1(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var j3t=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,XR=function(t,n){this.line=t,this.column=n};XR.prototype.offset=function(t){return new XR(this.line,this.column+t)};var ZB=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function c$e(e,t){for(var n=1,r=0;;){var i=a$e(e,r,t);if(i<0)return new XR(n,t-r);++n,r=i}}var MY={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},lve=!1;function U3t(e){var t={};for(var n in MY)t[n]=e&&PP(e,n)?e[n]:MY[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!lve&&typeof console=="object"&&console.warn&&(lve=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),ave(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return ave(t.onComment)&&(t.onComment=z3t(t,t.onComment)),t}function z3t(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new ZB(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var QR=1,tA=2,lre=4,f$e=8,d$e=16,h$e=32,cre=64,p$e=128,OP=256,fre=QR|tA|OP;function dre(e,t){return tA|(e?lre:0)|(t?f$e:0)}var Z6=0,hre=1,My=2,m$e=3,g$e=4,y$e=5,ma=function(t,n,r){this.options=t=U3t(t),this.sourceFile=t.sourceFile,this.keywords=zv(P3t[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=KV[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=zv(i);var s=(i?i+" ":"")+KV.strict;this.reservedWordsStrict=zv(s),this.reservedWordsStrictBind=zv(s+" "+KV.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Zd).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=ne.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(QR),this.regexpState=null,this.privateNameStack=[]},hg={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};ma.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};hg.inFunction.get=function(){return(this.currentVarScope().flags&tA)>0};hg.inGenerator.get=function(){return(this.currentVarScope().flags&f$e)>0&&!this.currentVarScope().inClassFieldInit};hg.inAsync.get=function(){return(this.currentVarScope().flags&lre)>0&&!this.currentVarScope().inClassFieldInit};hg.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&OP)return!1;if(t.flags&tA)return(t.flags&lre)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};hg.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&cre)>0||n||this.options.allowSuperOutsideMethod};hg.allowDirectSuper.get=function(){return(this.currentThisScope().flags&p$e)>0};hg.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};hg.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(tA|OP))>0||n};hg.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&OP)>0};ma.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};ma.parse=function(t,n){return new this(n,t).parse()};ma.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};ma.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(ma.prototype,hg);var Wl=ma.prototype,V3t=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Wl.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){_d.lastIndex=e,e+=_d.exec(this.input)[0].length;var t=V3t.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){_d.lastIndex=e+t[0].length;var n=_d.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Zd.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,_d.lastIndex=e,e+=_d.exec(this.input)[0].length,this.input[e]===";"&&e++}};Wl.eat=function(e){return this.type===e?(this.next(),!0):!1};Wl.isContextual=function(e){return this.type===ne.name&&this.value===e&&!this.containsEsc};Wl.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};Wl.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};Wl.canInsertSemicolon=function(){return this.type===ne.eof||this.type===ne.braceR||Zd.test(this.input.slice(this.lastTokEnd,this.start))};Wl.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Wl.semicolon=function(){!this.eat(ne.semi)&&!this.insertSemicolon()&&this.unexpected()};Wl.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};Wl.expect=function(e){this.eat(e)||this.unexpected()};Wl.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var e9=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Wl.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};Wl.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};Wl.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Wl.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var fn=ma.prototype;fn.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==ne.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var pre={kind:"loop"},H3t={kind:"switch"};fn.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;_d.lastIndex=this.pos;var t=_d.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(uy(r,!0)){for(var i=n+1;MC(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!O3t.test(s))return!0}return!1};fn.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;_d.lastIndex=this.pos;var e=_d.exec(this.input),t=this.pos+e[0].length,n;return!Zd.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(MC(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};fn.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=ne._var,s="let"),r){case ne._break:case ne._continue:return this.parseBreakContinueStatement(i,r.keyword);case ne._debugger:return this.parseDebuggerStatement(i);case ne._do:return this.parseDoStatement(i);case ne._for:return this.parseForStatement(i);case ne._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case ne._class:return e&&this.unexpected(),this.parseClass(i,!0);case ne._if:return this.parseIfStatement(i);case ne._return:return this.parseReturnStatement(i);case ne._switch:return this.parseSwitchStatement(i);case ne._throw:return this.parseThrowStatement(i);case ne._try:return this.parseTryStatement(i);case ne._const:case ne._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case ne._while:return this.parseWhileStatement(i);case ne._with:return this.parseWithStatement(i);case ne.braceL:return this.parseBlock(!0,i);case ne.semi:return this.parseEmptyStatement(i);case ne._export:case ne._import:if(this.options.ecmaVersion>10&&r===ne._import){_d.lastIndex=this.pos;var o=_d.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===ne._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===ne.name&&c.type==="Identifier"&&this.eat(ne.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};fn.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(ne.semi)||this.insertSemicolon()?e.label=null:this.type!==ne.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};fn.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};fn.parseDoStatement=function(e){return this.next(),this.labels.push(pre),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(ne._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(ne.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};fn.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(pre),this.enterScope(0),this.expect(ne.parenL),this.type===ne.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===ne._var||this.type===ne._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===ne._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===ne._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new e9,u=this.parseExpression(t>-1?"await":!0,a);return this.type===ne._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===ne._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};fn.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,Tk|(n?0:$Y),!1,t)};fn.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(ne._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};fn.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(ne.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};fn.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(ne.braceL),this.labels.push(H3t),this.enterScope(0);for(var t,n=!1;this.type!==ne.braceR;)if(this.type===ne._case||this.type===ne._default){var r=this.type===ne._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(ne.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};fn.parseThrowStatement=function(e){return this.next(),Zd.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var q3t=[];fn.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?h$e:0),this.checkLValPattern(e,t?g$e:My),this.expect(ne.parenR),e};fn.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===ne._catch){var t=this.startNode();this.next(),this.eat(ne.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(ne._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};fn.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};fn.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(pre),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};fn.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};fn.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};fn.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===ne._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};fn.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};fn.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(ne.braceL),e&&this.enterScope(0);this.type!==ne.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};fn.parseFor=function(e,t){return e.init=t,this.expect(ne.semi),e.test=this.type===ne.semi?null:this.parseExpression(),this.expect(ne.semi),e.update=this.type===ne.parenR?null:this.parseExpression(),this.expect(ne.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};fn.parseForIn=function(e,t){var n=this.type===ne._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(ne.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};fn.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(ne.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===ne._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===ne._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(ne.comma))break}return e};fn.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?hre:My,!1)};var Tk=1,$Y=2,v$e=4;fn.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===ne.star&&t&$Y&&this.unexpected(),e.generator=this.eat(ne.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&Tk&&(e.id=t&v$e&&this.type!==ne.name?null:this.parseIdent(),e.id&&!(t&$Y)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?hre:My:m$e));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(dre(e.async,e.generator)),t&Tk||(e.id=this.type===ne.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&Tk?"FunctionDeclaration":"FunctionExpression")};fn.parseFunctionParams=function(e){this.expect(ne.parenL),e.params=this.parseBindingList(ne.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};fn.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(ne.braceL);this.type!==ne.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&W3t(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};fn.parseClassElement=function(e){if(this.eat(ne.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(ne.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===ne.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===ne.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(ne.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===ne.parenL||o!=="method"||i||s){var l=!n.static&&e4(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};fn.isClassElementNameStart=function(){return this.type===ne.name||this.type===ne.privateId||this.type===ne.num||this.type===ne.string||this.type===ne.bracketL||this.type.keyword};fn.parseClassElementName=function(e){this.type===ne.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};fn.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&e4(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};fn.parseClassField=function(e){if(e4(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&e4(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(ne.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};fn.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(OP|cre);this.type!==ne.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};fn.parseClassId=function(e,t){this.type===ne.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,My,!1)):(t===!0&&this.unexpected(),e.id=null)};fn.parseClassSuper=function(e){e.superClass=this.eat(ne._extends)?this.parseExprSubscripts(null,!1):null};fn.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};fn.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];PP(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function W3t(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function e4(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}fn.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==ne.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};fn.parseExport=function(e,t){if(this.next(),this.eat(ne.star))return this.parseExportAllDeclaration(e,t);if(this.eat(ne._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==ne.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};fn.parseExportDeclaration=function(e){return this.parseStatement(null)};fn.parseExportDefaultDeclaration=function(){var e;if(this.type===ne._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,Tk|v$e,!1,e)}else if(this.type===ne._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};fn.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),PP(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};fn.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};fn.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};fn.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};fn.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};fn.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(ne.braceL);!this.eat(ne.braceR);){if(n)n=!1;else if(this.expect(ne.comma),this.afterTrailingComma(ne.braceR))break;t.push(this.parseExportSpecifier(e))}return t};fn.parseImport=function(e){return this.next(),this.type===ne.string?(e.specifiers=q3t,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===ne.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};fn.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,My),this.finishNode(e,"ImportSpecifier")};fn.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,My),this.finishNode(e,"ImportDefaultSpecifier")};fn.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,My),this.finishNode(e,"ImportNamespaceSpecifier")};fn.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===ne.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(ne.comma)))return e;if(this.type===ne.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(ne.braceL);!this.eat(ne.braceR);){if(t)t=!1;else if(this.expect(ne.comma),this.afterTrailingComma(ne.braceR))break;e.push(this.parseImportSpecifier())}return e};fn.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===ne.string){var e=this.parseLiteral(this.value);return j3t.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};fn.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};fn.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var eh=ma.prototype;eh.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};eh.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};eh.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};eh.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==ne.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};eh.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case ne.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(ne.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case ne.braceL:return this.parseObj(!0)}return this.parseIdent()};eh.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(ne.comma),t&&this.type===ne.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===ne.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===ne.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};eh.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};eh.parseBindingListItem=function(e){return e};eh.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(ne.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};eh.checkLValSimple=function(e,t,n){t===void 0&&(t=Z6);var r=t!==Z6;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===My&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(PP(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==y$e&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};eh.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=Z6),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};eh.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=Z6),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var wh=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Ms={b_stat:new wh("{",!1),b_expr:new wh("{",!0),b_tmpl:new wh("${",!1),p_stat:new wh("(",!1),p_expr:new wh("(",!0),q_tmpl:new wh("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new wh("function",!1),f_expr:new wh("function",!0),f_expr_gen:new wh("function",!0,!1,null,!0),f_gen:new wh("function",!1,!1,null,!0)},nA=ma.prototype;nA.initialContext=function(){return[Ms.b_stat]};nA.curContext=function(){return this.context[this.context.length-1]};nA.braceIsBlock=function(e){var t=this.curContext();return t===Ms.f_expr||t===Ms.f_stat?!0:e===ne.colon&&(t===Ms.b_stat||t===Ms.b_expr)?!t.isExpr:e===ne._return||e===ne.name&&this.exprAllowed?Zd.test(this.input.slice(this.lastTokEnd,this.start)):e===ne._else||e===ne.semi||e===ne.eof||e===ne.parenR||e===ne.arrow?!0:e===ne.braceL?t===Ms.b_stat:e===ne._var||e===ne._const||e===ne.name?!1:!this.exprAllowed};nA.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};nA.updateContext=function(e){var t,n=this.type;n.keyword&&e===ne.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};nA.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};ne.parenR.updateContext=ne.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Ms.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};ne.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Ms.b_stat:Ms.b_expr),this.exprAllowed=!0};ne.dollarBraceL.updateContext=function(){this.context.push(Ms.b_tmpl),this.exprAllowed=!0};ne.parenL.updateContext=function(e){var t=e===ne._if||e===ne._for||e===ne._with||e===ne._while;this.context.push(t?Ms.p_stat:Ms.p_expr),this.exprAllowed=!0};ne.incDec.updateContext=function(){};ne._function.updateContext=ne._class.updateContext=function(e){e.beforeExpr&&e!==ne._else&&!(e===ne.semi&&this.curContext()!==Ms.p_stat)&&!(e===ne._return&&Zd.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===ne.colon||e===ne.braceL)&&this.curContext()===Ms.b_stat)?this.context.push(Ms.f_expr):this.context.push(Ms.f_stat),this.exprAllowed=!1};ne.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};ne.backQuote.updateContext=function(){this.curContext()===Ms.q_tmpl?this.context.pop():this.context.push(Ms.q_tmpl),this.exprAllowed=!1};ne.star.updateContext=function(e){if(e===ne._function){var t=this.context.length-1;this.context[t]===Ms.f_expr?this.context[t]=Ms.f_expr_gen:this.context[t]=Ms.f_gen}this.exprAllowed=!0};ne.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==ne.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Xn=ma.prototype;Xn.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};Xn.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===ne.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(ne.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};Xn.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new e9,r=!0);var a=this.start,u=this.startLoc;(this.type===ne.parenL||this.type===ne.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===ne.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===ne.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};Xn.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(ne.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(ne.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};Xn.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};Xn.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==ne._in)&&s>r){var o=this.type===ne.logicalOR||this.type===ne.logicalAND,a=this.type===ne.coalesce;a&&(s=ne.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===ne.coalesce||a&&(this.type===ne.logicalOR||this.type===ne.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};Xn.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};Xn.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===ne.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&b$e(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===ne.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==ne._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(ne.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function b$e(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&b$e(e.expression)}Xn.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};Xn.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};Xn.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(ne.arrow)};Xn.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};Xn.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(ne.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(ne.bracketL);if(l||u&&this.type!==ne.parenL&&this.type!==ne.backQuote||this.eat(ne.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(ne.bracketR)):this.type===ne.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(ne.parenL)){var f=new e9,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(ne.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===ne.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};Xn.parseExprAtom=function(e,t,n){this.type===ne.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case ne._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===ne.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==ne.dot&&this.type!==ne.bracketL&&this.type!==ne.parenL&&this.unexpected(),this.finishNode(r,"Super");case ne._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case ne.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(ne._function))return this.overrideContext(Ms.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(ne.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===ne.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(ne.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case ne.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case ne.num:case ne.string:return this.parseLiteral(this.value);case ne._null:case ne._true:case ne._false:return r=this.startNode(),r.value=this.type===ne._null?null:this.type===ne._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case ne.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case ne.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(ne.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case ne.braceL:return this.overrideContext(Ms.b_expr),this.parseObj(!1,e);case ne._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case ne._class:return this.parseClass(this.startNode(),!1);case ne._new:return this.parseNew();case ne.backQuote:return this.parseTemplate();case ne._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Xn.parseExprAtomDefault=function(){this.unexpected()};Xn.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===ne.parenL&&!e)return this.parseDynamicImport(t);if(this.type===ne.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};Xn.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(ne.parenR)){var t=this.start;this.eat(ne.comma)&&this.eat(ne.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Xn.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Xn.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Xn.parseParenExpression=function(){this.expect(ne.parenL);var e=this.parseExpression();return this.expect(ne.parenR),e};Xn.shouldParseArrow=function(e){return!this.canInsertSemicolon()};Xn.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new e9,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==ne.parenR;)if(l?l=!1:this.expect(ne.comma),s&&this.afterTrailingComma(ne.parenR,!0)){c=!0;break}else if(this.type===ne.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===ne.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(ne.parenR),e&&this.shouldParseArrow(u)&&this.eat(ne.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};Xn.parseParenItem=function(e){return e};Xn.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var G3t=[];Xn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===ne.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(ne.parenL)?e.arguments=this.parseExprList(ne.parenR,this.options.ecmaVersion>=8,!1):e.arguments=G3t,this.finishNode(e,"NewExpression")};Xn.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===ne.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===ne.backQuote,this.finishNode(n,"TemplateElement")};Xn.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===ne.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(ne.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(ne.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Xn.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===ne.name||this.type===ne.num||this.type===ne.string||this.type===ne.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===ne.star)&&!Zd.test(this.input.slice(this.lastTokEnd,this.start))};Xn.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(ne.braceR);){if(r)r=!1;else if(this.expect(ne.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(ne.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Xn.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(ne.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===ne.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===ne.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(ne.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(ne.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};Xn.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};Xn.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===ne.colon&&this.unexpected(),this.eat(ne.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===ne.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==ne.comma&&this.type!==ne.braceR&&this.type!==ne.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===ne.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Xn.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(ne.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(ne.bracketR),e.key;e.computed=!1}return e.key=this.type===ne.num||this.type===ne.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Xn.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Xn.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(dre(t,r.generator)|cre|(n?p$e:0)),this.expect(ne.parenL),r.params=this.parseBindingList(ne.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};Xn.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(dre(n,!1)|d$e),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};Xn.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==ne.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,y$e),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};Xn.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};Xn.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,hre,t?null:n)}};Xn.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(ne.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===ne.comma?o=null:this.type===ne.ellipsis?(o=this.parseSpread(r),r&&this.type===ne.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};Xn.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};Xn.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};Xn.parseIdentNode=function(){var e=this.startNode();return this.type===ne.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=ne.name):this.unexpected(),e};Xn.parsePrivateIdent=function(){var e=this.startNode();return this.type===ne.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};Xn.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===ne.semi||this.canInsertSemicolon()||this.type!==ne.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(ne.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Xn.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var t4=ma.prototype;t4.raise=function(e,t){var n=c$e(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};t4.raiseRecoverable=t4.raise;t4.curPosition=function(){if(this.options.locations)return new XR(this.curLine,this.pos-this.lineStart)};var Mb=ma.prototype,Y3t=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Mb.enterScope=function(e){this.scopeStack.push(new Y3t(e))};Mb.exitScope=function(){this.scopeStack.pop()};Mb.treatFunctionsAsVarInScope=function(e){return e.flags&tA||!this.inModule&&e.flags&QR};Mb.declareName=function(e,t,n){var r=!1;if(t===My){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&QR&&delete this.undefinedExports[e]}else if(t===g$e){var s=this.currentScope();s.lexical.push(e)}else if(t===m$e){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&h$e&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&QR&&delete this.undefinedExports[e],u.flags&fre)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Mb.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Mb.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Mb.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&fre)return t}};Mb.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&fre&&!(t.flags&d$e))return t}};var t9=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new ZB(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},MP=ma.prototype;MP.startNode=function(){return new t9(this,this.start,this.startLoc)};MP.startNodeAt=function(e,t){return new t9(this,e,t)};function w$e(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}MP.finishNode=function(e,t){return w$e.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};MP.finishNodeAt=function(e,t,n,r){return w$e.call(this,e,t,n,r)};MP.copyNode=function(e){var t=new t9(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var _$e="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",E$e=_$e+" Extended_Pictographic",x$e=E$e,S$e=x$e+" EBase EComp EMod EPres ExtPict",T$e=S$e,K3t=T$e,X3t={9:_$e,10:E$e,11:x$e,12:S$e,13:T$e,14:K3t},Q3t="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",J3t={9:"",10:"",11:"",12:"",13:"",14:Q3t},cve="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",C$e="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",A$e=C$e+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",D$e=A$e+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",I$e=D$e+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",k$e=I$e+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",Z3t=k$e+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",eMt={9:C$e,10:A$e,11:D$e,12:I$e,13:k$e,14:Z3t},R$e={};function tMt(e){var t=R$e[e]={binary:zv(X3t[e]+" "+cve),binaryOfStrings:zv(J3t[e]),nonBinary:{General_Category:zv(cve),Script:zv(eMt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var QV=0,fve=[9,10,11,12,13,14];QV<fve.length;QV+=1){var nMt=fve[QV];tMt(nMt)}var tn=ma.prototype,pg=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=R$e[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};pg.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};pg.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};pg.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};pg.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};pg.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};pg.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};pg.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};pg.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};pg.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};tn.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};tn.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};tn.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};tn.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};tn.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};tn.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};tn.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};tn.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};tn.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};tn.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};tn.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};tn.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};tn.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};tn.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};tn.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};tn.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};tn.regexp_eatSyntaxCharacter=function(e){var t=e.current();return N$e(t)?(e.lastIntValue=t,e.advance(),!0):!1};function N$e(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}tn.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!N$e(n);)e.advance();return e.pos!==t};tn.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};tn.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};tn.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};tn.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=q1(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=q1(e.lastIntValue);return!0}return!1};tn.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),rMt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function rMt(e){return uy(e,!0)||e===36||e===95}tn.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),iMt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function iMt(e){return MC(e,!0)||e===36||e===95||e===8204||e===8205}tn.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};tn.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};tn.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};tn.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};tn.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};tn.regexp_eatZero=function(e){return e.current()===48&&!n9(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};tn.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};tn.regexp_eatControlLetter=function(e){var t=e.current();return P$e(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function P$e(e){return e>=65&&e<=90||e>=97&&e<=122}tn.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&sMt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function sMt(e){return e>=0&&e<=1114111}tn.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};tn.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var O$e=0,ly=1,Td=2;tn.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(oMt(t))return e.lastIntValue=-1,e.advance(),ly;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===Td&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return O$e};function oMt(e){return e===100||e===68||e===115||e===83||e===119||e===87}tn.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),ly}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return O$e};tn.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){PP(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};tn.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return ly;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return Td;e.raise("Invalid property name")};tn.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";M$e(t=e.current());)e.lastStringValue+=q1(t),e.advance();return e.lastStringValue!==""};function M$e(e){return P$e(e)||e===95}tn.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";aMt(t=e.current());)e.lastStringValue+=q1(t),e.advance();return e.lastStringValue!==""};function aMt(e){return M$e(e)||n9(e)}tn.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};tn.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===Td&&e.raise("Negated character class may contain strings"),!0}return!1};tn.regexp_classContents=function(e){return e.current()===93?ly:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),ly)};tn.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};tn.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||L$e(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};tn.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};tn.regexp_classSetExpression=function(e){var t=ly,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===Td&&(t=Td);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==Td&&(t=ly);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===Td&&(t=Td)}};tn.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};tn.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?ly:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};tn.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===Td&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};tn.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};tn.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===Td&&(t=Td);return t};tn.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?ly:Td};tn.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&uMt(n)||lMt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function uMt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function lMt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}tn.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return cMt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function cMt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}tn.regexp_eatClassControlLetter=function(e){var t=e.current();return n9(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};tn.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};tn.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;n9(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function n9(e){return e>=48&&e<=57}tn.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;$$e(n=e.current());)e.lastIntValue=16*e.lastIntValue+F$e(n),e.advance();return e.pos!==t};function $$e(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function F$e(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}tn.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};tn.regexp_eatOctalDigit=function(e){var t=e.current();return L$e(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function L$e(e){return e>=48&&e<=55}tn.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!$$e(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+F$e(i),e.advance()}return!0};var mre=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new ZB(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Lr=ma.prototype;Lr.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new mre(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Lr.getToken=function(){return this.next(),new mre(this)};typeof Symbol<"u"&&(Lr[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===ne.eof,value:t}}}});Lr.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(ne.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Lr.readToken=function(e){return uy(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Lr.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Lr.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=a$e(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Lr.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!eA(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Lr.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&u$e.test(String.fromCharCode(e)))++this.pos;else break e}}};Lr.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Lr.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(ne.ellipsis)):(++this.pos,this.finishToken(ne.dot))};Lr.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(ne.assign,2):this.finishOp(ne.slash,1)};Lr.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?ne.star:ne.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=ne.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(ne.assign,n+1):this.finishOp(r,n)};Lr.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(ne.assign,3)}return this.finishOp(e===124?ne.logicalOR:ne.logicalAND,2)}return t===61?this.finishOp(ne.assign,2):this.finishOp(e===124?ne.bitwiseOR:ne.bitwiseAND,1)};Lr.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(ne.assign,2):this.finishOp(ne.bitwiseXOR,1)};Lr.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Zd.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(ne.incDec,2):t===61?this.finishOp(ne.assign,2):this.finishOp(ne.plusMin,1)};Lr.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(ne.assign,n+1):this.finishOp(ne.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(ne.relational,n))};Lr.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(ne.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(ne.arrow)):this.finishOp(e===61?ne.eq:ne.prefix,1)};Lr.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(ne.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(ne.assign,3)}return this.finishOp(ne.coalesce,2)}}return this.finishOp(ne.question,1)};Lr.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),uy(t,!0)||t===92))return this.finishToken(ne.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+q1(t)+"'")};Lr.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(ne.parenL);case 41:return++this.pos,this.finishToken(ne.parenR);case 59:return++this.pos,this.finishToken(ne.semi);case 44:return++this.pos,this.finishToken(ne.comma);case 91:return++this.pos,this.finishToken(ne.bracketL);case 93:return++this.pos,this.finishToken(ne.bracketR);case 123:return++this.pos,this.finishToken(ne.braceL);case 125:return++this.pos,this.finishToken(ne.braceR);case 58:return++this.pos,this.finishToken(ne.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(ne.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(ne.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+q1(e)+"'")};Lr.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Lr.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Zd.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new pg(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(ne.regexp,{pattern:i,flags:o,value:u})};Lr.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function fMt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function B$e(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Lr.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=B$e(this.input.slice(t,this.pos)),++this.pos):uy(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(ne.num,n)};Lr.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=B$e(this.input.slice(t,this.pos));return++this.pos,uy(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(ne.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),uy(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=fMt(this.input.slice(t,this.pos),n);return this.finishToken(ne.num,s)};Lr.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Lr.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(eA(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(ne.string,t)};var j$e={};Lr.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===j$e)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Lr.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw j$e;this.raise(e,t)};Lr.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===ne.template||this.type===ne.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(ne.dollarBraceL)):(++this.pos,this.finishToken(ne.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(ne.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(eA(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Lr.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(ne.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Lr.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return q1(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return eA(t)?"":String.fromCharCode(t)}};Lr.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Lr.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(MC(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?uy:MC)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=q1(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Lr.readWord=function(){var e=this.readWord1(),t=ne.name;return this.keywords.test(e)&&(t=ure[e]),this.finishToken(t,e)};var dMt="8.11.3";ma.acorn={Parser:ma,version:dMt,defaultOptions:MY,Position:XR,SourceLocation:ZB,getLineInfo:c$e,Node:t9,TokenType:oi,tokTypes:ne,keywordTypes:ure,TokContext:wh,tokContexts:Ms,isIdentifierChar:MC,isIdentifierStart:uy,Token:mre,isNewLine:eA,lineBreak:Zd,lineBreakG:F3t,nonASCIIwhitespace:u$e};function hMt(e,t){return ma.parse(e,t)}const gre={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},pMt={ecmaVersion:11},dve="$",mMt="d",gMt="d1",yMt="d2",Ja=e=>(t,n)=>n.error(t,e+" not allowed"),vMt=Ja("Aggregate function"),bMt=Ja("Window function"),wMt="Invalid argument",yre="Invalid column reference",_Mt=yre+" (must be input to an aggregate function)",U$e="Invalid function call",EMt="Invalid member expression",xMt="Invalid operator parameter",SMt="Invalid param reference",TMt="Invalid variable reference",CMt="Variable not accessible in operator call",AMt="Unsupported variable declaration",DMt="Unsupported destructuring pattern",z$e="Table expressions do not support closures",V$e="Use aq.escape(fn) to use a function as-is (including closures)",IMt="use table.params({ name: value }) to define dynamic parameters",kMt="use aq.addFunction(name, fn) to add new op functions",RMt=`
Note: ${z$e}. ${V$e}, or ${IMt}.`,H$e=`
Note: ${z$e}. ${V$e}, or ${kMt}.`,NMt=`The ${HOe} method is not valid in multi-table expressions.`;function PMt(e,t){const n=OMt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,A3t(r)?($Mt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=gMt),e.scope.add(e.tuple2=yMt),e.scope.add(e.$param=dve)):(e.scope.add(e.tuple=mMt),e.scope.add(e.$param=dve)),Jr(r,e,vre),e.root}function OMt(e){try{const t=e.field?MMt(e):ci(e)?Hm(e):e;return hMt(`expr=(${t})`,pMt).body[0].expression.right}catch{pr(`Expression parse error: ${e+""}`)}}function MMt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const vre={FunctionDeclaration:Ja("Function definitions"),ForStatement:Ja("For loops"),ForOfStatement:Ja("For-of loops"),ForInStatement:Ja("For-in loops"),WhileStatement:Ja("While loops"),DoWhileStatement:Ja("Do-while loops"),AwaitExpression:Ja("Await expressions"),ArrowFunctionExpression:Ja("Function definitions"),AssignmentExpression:Ja("Assignments"),FunctionExpression:Ja("Function definitions"),NewExpression:Ja('Use of "new"'),UpdateExpression:Ja("Update expressions"),VariableDeclarator(e,t){BY(e.id,t)},Identifier(e,t,n){G$e(e,t,n)&&!t.scope.has(e.name)&&t.error(e,TMt,RMt)},CallExpression(e,t){const n=q$e(e.callee),r=UOe(n)||zOe(n);if(r){if((t.join||t.aggregate===!1)&&ane(n)&&vMt(e,t),(t.join||t.window===!1)&&une(n)&&bMt(e,t),t.$op=1,t.ast)LY(e,n,t),e.arguments.forEach(i=>Jr(i,t,FY));else{const i=t.op(FMt(t,r,n,e.arguments));Object.assign(e,{type:$Oe,name:i.id})}return t.$op=0,!1}else jOe(n)?LY(e,n,t):t.error(e,U$e,H$e)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!oa(h1,r))return;const{name:s}=r;if(W$e(e)&&oa(h1,i)&&cp(gre,i.name)){X$e(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return hve(e,o,t,Y$e,n);if(s===t.$param)return hve(e,o,t,BMt);t.paramsRef.has(s)?JR(e,t.paramsRef.get(s)):t.columnRef.has(s)?K$e(r,s,t,e):cp(t.params,s)&&JR(r,s)}};function hve(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(oa(K2,s))a=s.value;else try{Jr(s,n,vre,e),a=n.param(s)}catch{n.error(e,EMt)}return r(e,a,t,n,i),!1}const FY={...vre,VariableDeclarator:Ja("Variable declaration in operator call"),Identifier(e,t,n){G$e(e,t,n)&&t.error(e,CMt)},CallExpression(e,t){const n=q$e(e.callee);jOe(n)?LY(e,n,t):t.error(e,U$e,H$e)}};function $Mt(e,t){e.generator&&Ja("Generator functions")(e,t),e.async&&Ja("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(RD(t,n[0],"tuple1",i(1)),r>1&&RD(t,n[1],"tuple2",i(2)),r>2&&RD(t,n[2],"$param",s)):(RD(t,n[0],"tuple",i(0)),r>1&&RD(t,n[1],"$param",s))),t.root=e.body}function RD(e,t,n,r){oa(h1,t)?(e.scope.add(t.name),e[n]=t.name):oa(OOe,t)&&t.properties.forEach(i=>{const s=oa(h1,i.key)?i.key.name:oa(K2,i.key)?i.key.value:e.error(i,wMt);oa(h1,i.value)||e.error(i.value,DMt),r(i.value.name,s)})}function FMt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(Jr(u,e,FY),i.push(e.field(u))):l<a?(Jr(u,e,FY),s.push(e.param(u))):e.error(u,xMt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function q$e(e){return oa(h1,e)?e.name:oa(POe,e)?W$e(e)?LMt(e.property.name):e.property.name:null}function W$e(e){return oa(h1,e.object)&&e.object.name==="Math"}function LMt(e){return e==="max"?"greatest":e==="min"?"least":e}function G$e(e,t,n){const{name:r}=e;if(!(oa(POe,n)&&n.property===e)){if(!(oa(MOe,n)&&n.key===e))if(t.paramsRef.has(r))JR(e,t.paramsRef.get(r));else if(t.columnRef.has(r))K$e(e,r,t,n);else if(cp(t.params,r))JR(e,r);else if(cp(gre,r))X$e(e,r);else return!0}}function Y$e(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,yre),r.aggronly&&!r.$op&&r.error(e,_Mt),VOe(e,t,n,o,i)}function K$e(e,t,n,r){const[i,s]=n.columnRef.get(t);Y$e(e,i,s,n,r)}function BMt(e,t,n,r){r.params&&!cp(r.params,t)&&r.error(e,SMt),JR(e,t)}function JR(e,t){e.type=DRt,e.name=t}function X$e(e,t){e.type=TRt,e.name=t,e.raw=gre[t]}function LY(e,t,n){if(t===HOe){const r=n.table;r||n.error(e,NMt),qOe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Bl(s)?r.columnName(s):s;return r.column(o)||n.error(i,yre),o}):r.columnNames())}else e.callee={type:ARt,name:t}}function BY(e,t){oa(h1,e)?t.scope.add(e.name):oa(_Rt,e)?e.elements.forEach(n=>BY(n,t)):oa(OOe,e)?e.properties.forEach(n=>BY(n.value,t)):t.error(e.id,AMt)}const jMt={[AP]:1,[$Oe]:1};function zc(e,t={}){const n=t.generate||P6,r=t.compiler||lne,i=zMt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=UMt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return oa(K2,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?C3t(g):f(n(g),i));u.push(y),jMt[g.type]&&y!==g&&Qu(y)&&(y.field=g.name)},error(m,g,y=""){const b=m.start-6,w=m.end-6,S=String(d.spec).slice(b,w);pr(`${g}: "${S}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of BB(e))d.value(m+"",g.escape?k3t(d,g,i):PMt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function UMt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function zMt(e){return(e.table?JV(e.table):e.join?{...JV(e.join[1]),...JV(e.join[0])}:{})||{}}function JV(e){return e&&_s(e.params)?e.params():{}}const Q$e="Expr",_h="ExprList",J$e="ExprNumber",DI="ExprObject",XS="JoinKeys",n4="JoinValues",hd="Options",bre="OrderKeys",dv="SelectionList",Kw="TableRef",QS="TableRefList",VMt="Descending",HMt="Query",qMt="Selection",WMt="Verb",GMt="Window";function r9(e,t){return e&&e.expr?new pve({...e,...t}):new pve(t,e)}class pve{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),..._s(this.expr)?{func:!0}:{}}}}function YMt(e){return r9(e,{desc:!0})}function nE(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return r9(e,t?{expr:t,...r}:r)}function KMt(e,t,n){return r9(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function XMt(e){const t=n=>n;return t.toString=()=>e,t}function mve(e,t){return t=t&&_s(t.query)?t.query():t,t&&_s(t.evaluate)?t.evaluate(null,e):e(t)}function Z$e(e){return Qu(e)&&(ci(e.all)||ci(e.matches)||ci(e.not)||ci(e.range))}function ZR(e){return e&&_s(e.toObject)?e.toObject():_s(e)?{expr:String(e),func:!0}:ci(e)?e.map(ZR):Qu(e)?QB(e,t=>ZR(t)):e}function wre(e){return ci(e)?e.map(wre):Qu(e)?ci(e.verbs)?Ere.from(e):ci(e.all)?OC():ci(e.range)?_3t(...e.range):ci(e.match)?E3t(RegExp(...e.match)):ci(e.not)?r$e(e.not.map(ZR)):QMt(e):e}function QMt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=nE(n):e.func===!0&&(t=n=XMt(n)),Qu(e.window)){const{frame:r,peers:i}=e.window;t=n=KMt(n,r,i)}e.desc===!0&&(t=YMt(n))}return e===t?QB(e,r=>wre(r)):t}function JMt(e){return ci(e)?e.map(ZMt):e}function ZMt(e){const t=[];return Bc(e).forEach(n=>{Bl(n)?t.push(n):mu(n)?t.push(nE(n,null)):Qu(n)&&n.expr||_s(n)?t.push(n):pr(`Invalid key value: ${n+""}`)}),t}function e$t(e){return ci(e)?e.map(t$t):e}function t$t(e,t){return t<2?Bc(e):e}function n$t(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(Qu(r)&&!_s(r))for(const i in r)t.push(r[i]);else n=Bl(r)?r:mu(r)?nE(n):_s(r)?n:pr(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const r$t={[Q$e]:rFe,[_h]:$C,[J$e]:l$t,[DI]:W1,[XS]:c$t,[n4]:f$t,[bre]:$C,[dv]:a$t};function i$t(e,t,n){return t===Kw?gve(e):t===QS?e.map(gve):eFe(ZR(e),t,n)}function eFe(e,t,n){return t===hd?e&&s$t(e,n):r$t[t](e)}function s$t(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?eFe(i,t[r]):i}return n}function o$t(e,t){return zc({expr:e},{...t,ast:!0}).exprs[0]}function _re(e){return{type:AP,name:e}}function tFe(e){return{type:AP,index:e}}function W1(e,t){if(mu(e))return o$t(e,t);if(e.expr){let n;if(e.field===!0?n=_re(e.expr):e.func===!0&&(n=W1(e.expr,t)),n)return e.desc&&(n={type:VMt,expr:n}),e.window&&(n={type:GMt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...W1(e[n],t),as:n}))}function nFe(e){const t=qMt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:$C(e.not)}:e.range?{type:t,operator:"range",arguments:$C(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:pr("Invalid input")}function a$t(e){return Bc(e).map(u$t).flat()}function u$t(e){return Z$e(e)?nFe(e):Bl(e)?tFe(e):mu(e)?_re(e):Qu(e)?Object.keys(e).map(t=>({type:AP,name:t,as:e[t]})):pr("Invalid input")}function rFe(e){return Z$e(e)?nFe(e):Bl(e)?tFe(e):mu(e)?_re(e):Qu(e)?W1(e):pr("Invalid input")}function $C(e){return Bc(e).map(rFe).flat()}function l$t(e){return Bl(e)?e:W1(e)}function c$t(e){return ci(e)?e.map($C):W1(e,{join:!0})}function f$t(e){return ci(e)?e.map((t,n)=>n<2?$C(t):W1(t,{join:!0})):W1(e,{join:!0})}function gve(e){return e&&_s(e.toAST)?e.toAST():e}class iFe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===XS?JMt(a):o===n4?e$t(a):o===bre?n$t(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=jY[t.verb],r=(n.schema||[]).map(({name:i})=>wre(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===Kw?mve(n,o):s===QS?o.map(a=>mve(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=ZR(this[n])}),t}toAST(){const t={type:WMt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=i$t(this[n],r,i)}),t}}function Ui(e,t){return Object.assign((...n)=>new iFe(e,t,n),{schema:t})}const jY={count:Ui("count",[{name:"options",type:hd}]),derive:Ui("derive",[{name:"values",type:DI},{name:"options",type:hd,props:{before:dv,after:dv}}]),filter:Ui("filter",[{name:"criteria",type:DI}]),groupby:Ui("groupby",[{name:"keys",type:_h}]),orderby:Ui("orderby",[{name:"keys",type:bre}]),relocate:Ui("relocate",[{name:"columns",type:dv},{name:"options",type:hd,props:{before:dv,after:dv}}]),rename:Ui("rename",[{name:"columns",type:dv}]),rollup:Ui("rollup",[{name:"values",type:DI}]),sample:Ui("sample",[{name:"size",type:J$e},{name:"options",type:hd,props:{weight:Q$e}}]),select:Ui("select",[{name:"columns",type:dv}]),ungroup:Ui("ungroup"),unorder:Ui("unorder"),reify:Ui("reify"),dedupe:Ui("dedupe",[{name:"keys",type:_h,default:[]}]),impute:Ui("impute",[{name:"values",type:DI},{name:"options",type:hd,props:{expand:_h}}]),fold:Ui("fold",[{name:"values",type:_h},{name:"options",type:hd}]),pivot:Ui("pivot",[{name:"keys",type:_h},{name:"values",type:_h},{name:"options",type:hd}]),spread:Ui("spread",[{name:"values",type:_h},{name:"options",type:hd}]),unroll:Ui("unroll",[{name:"values",type:_h},{name:"options",type:hd,props:{drop:_h}}]),lookup:Ui("lookup",[{name:"table",type:Kw},{name:"on",type:XS},{name:"values",type:_h}]),join:Ui("join",[{name:"table",type:Kw},{name:"on",type:XS},{name:"values",type:n4},{name:"options",type:hd}]),cross:Ui("cross",[{name:"table",type:Kw},{name:"values",type:n4},{name:"options",type:hd}]),semijoin:Ui("semijoin",[{name:"table",type:Kw},{name:"on",type:XS}]),antijoin:Ui("antijoin",[{name:"table",type:Kw},{name:"on",type:XS}]),concat:Ui("concat",[{name:"tables",type:QS}]),union:Ui("union",[{name:"tables",type:QS}]),intersect:Ui("intersect",[{name:"tables",type:QS}]),except:Ui("except",[{name:"tables",type:QS}])};let Ere=class sFe extends wOe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new sFe(t.map(iFe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return yve(this,"toObject")}toJSON(){return this.toObject()}toAST(){return yve(this,"toAST",{type:HMt})}};function yve(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function d$t(e,t){return new Ere(e._verbs.concat(t),e._params,e._table)}for(const e in jY){const t=jY[e];Ere.prototype["__"+e]=function(n,...r){return d$t(n,t(...r))}}function rA(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function h$t(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function xre(e,t){const n=Wf();return t.forEach((r,i)=>{const s=mu(r)?r:i;if(s){const o=e.column(i)||pr(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function oFe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||pr("relocate requires a before or after option."),i&&s&&pr("relocate accepts only one of the before or after options."),t=ay(e,t);const o=[...ay(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),xre(e,u)}function $P(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function Sre(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function p$t(e,t=0,n=e.length){let r=n?e[t++]:ai;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function m$t(e,t=0,n=e.length){let r=n?e[t++]:ai;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function kM(e){return VR(e)?e:+e}function g$t(e,t){const n=e.length;if(!n)return ai;if((t=+t)<=0||n<2)return kM(e[0]);if(t>=1)return kM(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=kM(e[i]);return VR(s)?s:s+(kM(e[i+1])-s)*(r-i)}class y$t{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:p$t(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:m$t(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(Sre)),g$t(this._sorted,t)}}const r4=(e,t,n)=>rA(t,"{"+$P(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function v$t(e,t){const{ops:n,output:r}=b$t(e,t),i=e[0].fields,s=i.length,o=s===0?Tre:s===1?w$t:s===2?_$t:pr("Unsupported field count: "+s);return new o(i,n,r,t)}function b$t(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=UOe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class Tre extends S3t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new y$t),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class w$t extends Tre{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=r4(n,s,"add"),this._rem=r4(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,qh(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,qh(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class _$t extends Tre{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=r4(n,s,"add"),this._rem=r4(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,qh(i)&&qh(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,qh(i)&&qh(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function ZE(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=iA(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function iA(e,t,n){if(!t.length)return n;const r=aFe(t),i=e.groups(),s=i?i.size:1;return n=n||FB(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=lFe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=uFe(e,o);o.write(a,n,0)}),n}function aFe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(v$t(r[i],t));return n}function uFe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function lFe(e,t,n){const{keys:r,size:i}=n,s=FB(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function cFe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function fFe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const vve=fFe(Sre);function E$t(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?rA(["w","r","k"],"{"+$P(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,b){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=b,a=i.map(w=>w.init());for(let w=0;w<f;++w)r[w].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,b=p.size,w=p.i0,S=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(b,m+Math.abs(y)+1):b,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=vve.left(o,o[p.i0])),p.i1<b&&c(p.i1)&&(p.i1=vve.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const T=i[E],C=a[E];for(let A=w;A<p.i0;++A)T.rem(C,s[A],e);for(let A=S;A<p.i1;++A)T.add(C,s[A],e);T.write(C,u,l)}return h(p,u,l),u}};return p}const x$t=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),S$t=e=>!!e.peers;function T$t(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=zOe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function C$t(e,t,n,r={},i){const s=e.data(),o=A$t(i,s),a=o.length,u=rA(["r","d","op"],"{"+$P(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=D$t(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function A$t(e,t){const n={};return e.forEach(r=>{const i=x$t(r),s=S$t(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});ane(r.name)?a.push(r):u.push(T$t(r))}),Object.values(n).map(r=>E$t(t,r.frame,r.peers,r.winOps,aFe(r.aggOps,r.frame[0]!=null?-1:1)))}function D$t(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function I$t(e){return une(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function Cre(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Wf(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=k$t(r),c=e.isGrouped()?e.groups().size:1,f=iA(e,u,FB(r.length,()=>Array(c)));return l.length?C$t(e,a,n,f,l):R$t(e,a,n,f),e.create(o)}function k$t(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(I$t(s)?n:t).push(s)}return[t,n]}function R$t(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function N$t(e,t,n={}){const r=Cre(e,zc(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:oFe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function P$t(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const RM=2147483648,O$t=4294967295;class dFe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&RM>>>t}set(t){this._bits[t>>5]|=RM>>>t}clear(t){this._bits[t>>5]&=~(RM>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&O$t>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=RM>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function M$t(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new dFe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function $$t(e,t){const n=zc({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=Cre(e,n,{drop:!0}).column("p");r=s=>i[s]}return M$t(e,r)}function hFe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=ZE(e,r,n),l=Wf(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(S=>{if(!a.has(S)){const E=l.add(S,[]);c.has(S)||(f.push(e.column(S)),d.push(E))}}),t.forEach(S=>{a.has(S)||(l.has(S)||l.add(S,[]),h.push(l.data[S]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,b=(S,E)=>{for(let T=0;T<g;++T)d[T].length=m+E,d[T].fill(f[T].get(S),m,m+E)},w=p?(S,E)=>{for(let T=0;T<E;++T)p[S+T]=T}:()=>{};if(y===1){const S=u[0],E=h[0];e.scan((T,C)=>{const A=Bc(S(T,C)),I=Math.min(A.length,s);b(T,I);for(let k=0;k<I;++k)E[m+k]=A[k];w(m,I),m+=I})}else e.scan((S,E)=>{let T=0;const C=u.map(A=>{const I=Bc(A(S,E));return T=Math.min(Math.max(T,I.length),s),I});b(S,T);for(let A=0;A<y;++A){const I=h[A],k=C[A];for(let N=0;N<T;++N)I[m+N]=k[N]}w(m,T),m+=T});return e.create(l.new())}function F$t(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=ZE(e,r,n);return hFe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function dp(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Bl(o)?t.columnName(o):o,mu(o)?i.set(o,nE(o)):_s(o)?ay(t,o).forEach(s):Qu(o)?t$e(i,o):pr(`Invalid ${e} value: ${o+""}`)};return Bc(n).forEach(s),r.preparse&&r.preparse(i),zc(i,{table:t,...r})}function L$t(e,t,n){return F$t(e,dp("fold",e,t),n)}function bve(e,t,n,r){const i=n&&n.length;return B$t(i?j$t(e,n,r):e,t,i)}function B$t(e,{names:t,exprs:n,ops:r},i){const s=ZE(e,r,n),o=i?null:Wf(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=qh(p)?p:d(h)})}),i?e:e.create(o)}function j$t(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=O6(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Wf(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(b=>y.push(g.get(b)))});const d=O6(o.map((p,m)=>g=>g[m])),h=rA("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,b)=>y*b.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),wve(r,n,(y,b)=>{a.has(d(y))||(h(y),g[p++]=b[0])}),c.groupby({...r,keys:g})}else wve(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function wve(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function Are(e,{names:t,exprs:n,ops:r}){const i=Wf(),s=e.groups();return s&&cFe(i,s),U$t(t,n,s,iA(e,r),i),e.create(i.new())}function U$t(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function z$t(e,t,n={}){if(t=zc(t,{table:e}),t.names.forEach(r=>e.column(r)?0:pr(`Invalid impute column ${Hm(r)}`)),n.expand){const r={preparse:V$t,aggronly:!0},i=dp("impute",e,n.expand,r),s=Are(e.ungroup(),i);return bve(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return bve(e,t)}function V$t(e){e.forEach((t,n)=>t.field?e.set(n,IOe(t+"")):0)}function H$t(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function pFe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function q$t(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function W$t(e,t){const n=["i","a","j","b"];return rA(n,"{"+$P(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function G$t(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Wf(),g=Array(p),y=Array(p);for(let S=0;S<r.length;++S)g[S]=m.add(r[S],[]),y[S]=i[S];const b=W$t(g,y);if((ci(n)?K$t:Y$t)(b,n,o,c,a,f,l,h,u,d),s.left)for(let S=0;S<u;++S)l[S]||b(a[S],o,-1,c);if(s.right)for(let S=0;S<d;++S)h[S]||b(-1,o,f[S],c);return e.create(m.new())}function Y$t(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function K$t(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,b,w=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,b=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,b=s,w=(T,C,A,I)=>e(A,I,T,C));const S=q$t(b,m,g),E=p.length;for(let T=0;T<E;++T){const C=p[T],A=S.get(d(C,f));if(A){const I=A.length;for(let k=0;k<I;++k){const N=A[k];w(C,f,b[N],m),y[N]=1}h[T]=1}}}function i4(e,t,n){const r=new Map;Bc(n).forEach((s,o)=>{s=Bl(s)?t.columnName(s):s,mu(s)?r.set(o,nE(s)):_s(s)||Qu(s)&&s.expr?r.set(o,s):pr(`Invalid ${e} key value: ${s+""}`)});const i=zc(r,{table:t,aggregate:!1,window:!1});return O6(i.exprs,!0)}function X$t(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function Dre(e,t,n){if(n)mu(n)?n=[n,n]:ci(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=X$t(e.columnNames(),t.columnNames());r.length||pr("Natural join requires shared column names."),n=[r,r]}return n}function mFe(e,t,n,r){return n.length!==r.length&&pr("Mismatched number of join keys"),[i4("join",e,n),i4("join",t,r)]}const Q$t={aggregate:!1,window:!1},J$t={...Q$t,index:1};function _ve(e,t,n,r,i={}){n=Dre(e,t,n);const s={join:[e,t]};let o;if(ci(n)){const[a,u]=n.map(Bc);o=mFe(e,t,a,u),r||(r=Z$t(e,a,u,i))}else o=zc({on:n},s).exprs[0],r||(r=[OC(),OC()]);return G$t(e,t,o,eFt(e,t,r,s,i&&i.suffix),i)}function Z$t(e,t,n,r){const i=[];t.forEach((o,a)=>mu(o)&&o===n[a]?i.push(o):0);const s=r$e(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${Hm(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,OC()]:[OC(),s]}function eFt(e,t,n,r,i=[]){if(ci(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=dp("join",e,n[0],r)),u--&&(o=dp("join",t,n[1],J$t)),u--&&(a=zc(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&Eve(s.names,l,i[0]||"_1"),i[1]!==""&&Eve(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return zc(n,r)}function Eve(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function tFt(e,t,n,r={}){const i=new dFe(e.totalRows());return(ci(n)?nFt:rFt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function nFt(e,t,n,[r,i]){const s=pFe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function rFt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function xve(e,t,n,r){n=Dre(e,t,n);const i=ci(n)?mFe(e,t,...n.map(Bc)):zc({on:n},{join:[e,t]}).exprs[0];return tFt(e,t,i,r)}function iFt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Wf(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(ai)));const l=pFe(t,r),c=rA(["lr","rr","data"],"{"+$P(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),ZE(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function sFt(e,t,n,r){return n=Dre(e,t,n),iFt(e,t,[i4("lookup",e,n[0]),i4("lookup",t,n[1])],dp("lookup",t,r))}const UY=(e,t)=>e??t;function oFt(e,t,n,r={}){const{keys:i,keyColumn:s}=aFt(e,t,r),o=UY(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>iA(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(uFt(n,a,e.groups(),u))}function aFt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=UY(n.sort,!0),s=UY(n.keySeparator,"_"),o=ZE(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=iA(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function uFt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Wf(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&cFe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function lFt(e,t,n,r){return oFt(e,dp("fold",e,t),dp("fold",e,n,{preparse:cFt,aggronly:!0}),r)}function cFt(e){e.forEach((t,n)=>t.field?e.set(n,COe(t+"")):0)}function fFt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),xre(e,ay(e,t,n))}function Sve(e,t){return Are(e,zc(t,{table:e,aggronly:!0,window:!1}))}function dFt(e,t,n,r){return(t?r?pFt:hFt:r?gFt:mFt)(e.length,e,n,r)}function hFt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*Y2()|0];return t}function pFt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=fFe(Sre).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*Y2())];return t}function mFt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*Y2();s<e&&(t[s|0]=n[i])}return t}function gFt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(Y2())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function yFt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=Y2()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function vFt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):dFt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&yFt(u),e.reify(u)}function bFt(e,t,n={}){return vFt(e,wFt(e,t),_Ft(e,n.weight),n)}const gFe=e=>t=>e.get(t)||0;function wFt(e,t){return Bl(t)?()=>t:gFe(Are(e,zc({size:t},{table:e,window:!1})).column("size"))}function _Ft(e,t){return t==null?null:(t=Bl(t)?e.columnName(t):t,gFe(mu(t)?e.column(t):Cre(e,zc({w:t},{table:e}),{drop:!0}).column("w")))}function EFt(e,t){return xre(e,ay(e,t))}function xFt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=ZE(e,r,n),l=Wf(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=SFt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function SFt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Bc(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(ai));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function TFt(e,t,n){return xFt(e,dp("spread",e,t),n)}function CFt(e,t){return e.concat(t).dedupe()}function AFt(e,t,n){return hFe(e,dp("unroll",e,t),n&&n.drop?{...n,drop:dp("unroll",e,n.drop).names}:n)}function DFt(e,t){return e.create({groups:IFt(e,t)})}function IFt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=ZE(e,r,n);const o=O6(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function kFt(e,t){return DFt(e,dp("groupby",e,t))}function RFt(e,t){return e.create({order:t})}const NFt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function PFt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=zc(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([P6(p,{index:"a",op:o}),P6(p,{index:"b",op:a})])},window:!1}),l=iA(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=NFt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function OFt(e,t){return RFt(e,MFt(e,t))}function MFt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(Qu(o)&&!_s(o))for(const a in o)i(o[a]);else i(Bl(o)?nE(s,e.columnName(o)):mu(o)?nE(s):_s(o)?s:pr(`Invalid orderby field: ${s+""}`))}),PFt(e,r)}function $Ft(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Wf();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>ai};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function FFt(e,t){const n=Wf(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?lFe(e,t,r):[uFe(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,b=0;y<a;++y)m.fill(g(o[y],d),b,b+=u[y+1])})}return e.create(n.new())}function LFt(e){return e.isGrouped()?e.create({groups:null}):e}function BFt(e){return e.isOrdered()?e.create({order:null}):e}const jFt={__antijoin:(e,t,n)=>xve(e,t,n,{anti:!0}),__count:(e,t={})=>Sve(e,{[t.as||"count"]:AOe()}),__cross:(e,t,n,r)=>_ve(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:$Ft,__dedupe:h$t,__derive:N$t,__except:P$t,__filter:$$t,__fold:L$t,__impute:z$t,__intersect:H$t,__join:_ve,__lookup:sFt,__pivot:lFt,__relocate:oFe,__rename:fFt,__rollup:Sve,__sample:bFt,__select:EFt,__semijoin:xve,__spread:TFt,__union:CFt,__unroll:AFt,__groupby:kFt,__orderby:OFt,__ungroup:LFt,__unorder:BFt,__reduce:FFt};Object.assign(d0.prototype,jFt);function yFe(e,t){return d0.from(e,t)}function AT(e){return r9(e,{escape:!0,toString(){pr("Escaped values can not be serialized.")}})}d0.prototype;function Bh(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function G1(e){return!!e&&!!e[ks]}function cy(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===KFt}(e)||Array.isArray(e)||!!e[Rve]||!!(!((t=e.constructor)===null||t===void 0)&&t[Rve])||Ire(e)||kre(e))}function rE(e,t,n){n===void 0&&(n=!1),sA(e)===0?(n?Object.keys:IT)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function sA(e){var t=e[ks];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Ire(e)?2:kre(e)?3:0}function DT(e,t){return sA(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function UFt(e,t){return sA(e)===2?e.get(t):e[t]}function vFe(e,t,n){var r=sA(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function bFe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Ire(e){return GFt&&e instanceof Map}function kre(e){return YFt&&e instanceof Set}function Lw(e){return e.o||e.t}function Rre(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=_Fe(e);delete t[ks];for(var n=IT(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Nre(e,t){return t===void 0&&(t=!1),Pre(e)||G1(e)||!cy(e)||(sA(e)>1&&(e.set=e.add=e.clear=e.delete=zFt),Object.freeze(e),t&&rE(e,function(n,r){return Nre(r,!0)},!0)),e}function zFt(){Bh(2)}function Pre(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Dm(e){var t=qY[e];return t||Bh(18,e),t}function VFt(e,t){qY[e]||(qY[e]=t)}function zY(){return eN}function ZV(e,t){t&&(Dm("Patches"),e.u=[],e.s=[],e.v=t)}function s4(e){VY(e),e.p.forEach(HFt),e.p=null}function VY(e){e===eN&&(eN=e.l)}function Tve(e){return eN={p:[],l:eN,h:e,m:!0,_:0}}function HFt(e){var t=e[ks];t.i===0||t.i===1?t.j():t.g=!0}function eH(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Dm("ES5").S(t,e,r),r?(n[ks].P&&(s4(t),Bh(4)),cy(e)&&(e=o4(t,e),t.l||a4(t,e)),t.u&&Dm("Patches").M(n[ks].t,e,t.u,t.s)):e=o4(t,n,[]),s4(t),t.u&&t.v(t.u,t.s),e!==wFe?e:void 0}function o4(e,t,n){if(Pre(t))return t;var r=t[ks];if(!r)return rE(t,function(a,u){return Cve(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return a4(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Rre(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),rE(s,function(a,u){return Cve(e,r,i,a,u,n,o)}),a4(e,i,!1),n&&e.u&&Dm("Patches").N(r,n,e.u,e.s)}return r.o}function Cve(e,t,n,r,i,s,o){if(G1(i)){var a=o4(e,i,s&&t&&t.i!==3&&!DT(t.R,r)?s.concat(r):void 0);if(vFe(n,r,a),!G1(a))return;e.m=!1}else o&&n.add(i);if(cy(i)&&!Pre(i)){if(!e.h.D&&e._<1)return;o4(e,i),t&&t.A.l||a4(e,i)}}function a4(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&Nre(t,n)}function tH(e,t){var n=e[ks];return(n?Lw(n):e)[t]}function Ave(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Nv(e){e.P||(e.P=!0,e.l&&Nv(e.l))}function nH(e){e.o||(e.o=Rre(e.t))}function HY(e,t,n){var r=Ire(t)?Dm("MapSet").F(t,n):kre(t)?Dm("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:zY(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=tN;o&&(u=[a],l=II);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Dm("ES5").J(t,n);return(n?n.A:zY()).p.push(r),r}function qFt(e){return G1(e)||Bh(22,e),function t(n){if(!cy(n))return n;var r,i=n[ks],s=sA(n);if(i){if(!i.P&&(i.i<4||!Dm("ES5").K(i)))return i.t;i.I=!0,r=Dve(n,s),i.I=!1}else r=Dve(n,s);return rE(r,function(o,a){i&&UFt(i.t,o)===a||vFe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Dve(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Rre(e)}function WFt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[ks];return tN.get(u,s)},set:function(u){var l=this[ks];tN.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][ks];if(!a.P)switch(a.i){case 5:r(a)&&Nv(a);break;case 4:n(a)&&Nv(a)}}}function n(s){for(var o=s.t,a=s.k,u=IT(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==ks){var f=o[c];if(f===void 0&&!DT(o,c))return!0;var d=a[c],h=d&&d[ks];if(h?h.t!==f:!bFe(d,f))return!0}}var p=!!o[ks];return u.length!==IT(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};VFt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=_Fe(f);delete p[ks];for(var m=IT(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:zY(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,ks,{value:l,writable:!0}),u},S:function(s,o,a){a?G1(o)&&o[ks].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[ks];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)rE(d,function(w){w!==ks&&(f[w]!==void 0||DT(f,w)?h[w]||u(d[w]):(h[w]=!0,Nv(c)))}),rE(f,function(w){d[w]!==void 0||DT(d,w)||(h[w]=!1,Nv(c))});else if(p===5){if(r(c)&&(Nv(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),b=0;b<y;b++)d.hasOwnProperty(b)||(h[b]=!0),h[b]===void 0&&u(d[b])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Ive,eN,Ore=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",GFt=typeof Map<"u",YFt=typeof Set<"u",kve=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",wFe=Ore?Symbol.for("immer-nothing"):((Ive={})["immer-nothing"]=!0,Ive),Rve=Ore?Symbol.for("immer-draftable"):"__$immer_draftable",ks=Ore?Symbol.for("immer-state"):"__$immer_state",KFt=""+Object.prototype.constructor,IT=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,_Fe=Object.getOwnPropertyDescriptors||function(e){var t={};return IT(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},qY={},tN={get:function(e,t){if(t===ks)return e;var n=Lw(e);if(!DT(n,t))return function(i,s,o){var a,u=Ave(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!cy(r)?r:r===tH(e.t,t)?(nH(e),e.o[t]=HY(e.A.h,r,e)):r},has:function(e,t){return t in Lw(e)},ownKeys:function(e){return Reflect.ownKeys(Lw(e))},set:function(e,t,n){var r=Ave(Lw(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=tH(Lw(e),t),s=i==null?void 0:i[ks];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(bFe(n,i)&&(n!==void 0||DT(e.t,t)))return!0;nH(e),Nv(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return tH(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,nH(e),Nv(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Lw(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Bh(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Bh(12)}},II={};rE(tN,function(e,t){II[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),II.deleteProperty=function(e,t){return II.set.call(this,e,t,void 0)},II.set=function(e,t,n){return tN.set.call(this,e[0],t,n,e[0])};var XFt=function(){function e(n){var r=this;this.O=kve,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,b=Array(y>1?y-1:0),w=1;w<y;w++)b[w-1]=arguments[w];return u.produce(m,function(S){var E;return(E=s).call.apply(E,[g,S].concat(b))})}}var l;if(typeof s!="function"&&Bh(6),o!==void 0&&typeof o!="function"&&Bh(7),cy(i)){var c=Tve(r),f=HY(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?s4(c):VY(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return ZV(c,o),eH(m,c)},function(m){throw s4(c),m}):(ZV(c,o),eH(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===wFe&&(l=void 0),r.D&&Nre(l,!0),o){var h=[],p=[];Dm("Patches").M(i,l,h,p),o(h,p)}return l}Bh(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){cy(n)||Bh(8),G1(n)&&(n=qFt(n));var r=Tve(this),i=HY(this,n,void 0);return i[ks].C=!0,VY(r),i},t.finishDraft=function(n,r){var i=n&&n[ks],s=i.A;return ZV(s,r),eH(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!kve&&Bh(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Dm("Patches").$;return G1(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Of=new XFt,EFe=Of.produce;Of.produceWithPatches.bind(Of);Of.setAutoFreeze.bind(Of);Of.setUseProxies.bind(Of);Of.applyPatches.bind(Of);Of.createDraft.bind(Of);Of.finishDraft.bind(Of);function nN(e){"@babel/helpers - typeof";return nN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nN(e)}function QFt(e,t){if(nN(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(nN(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JFt(e){var t=QFt(e,"string");return nN(t)=="symbol"?t:t+""}function ZFt(e,t,n){return(t=JFt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pve(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Nve(Object(n),!0).forEach(function(r){ZFt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nve(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pu(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ove=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),rH=function(){return Math.random().toString(36).substring(7).split("").join(".")},u4={INIT:"@@redux/INIT"+rH(),REPLACE:"@@redux/REPLACE"+rH(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+rH()}};function eLt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function xFe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Pu(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Pu(1));return n(xFe)(e,t)}if(typeof e!="function")throw new Error(Pu(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(Pu(3));return s}function f(m){if(typeof m!="function")throw new Error(Pu(4));if(u)throw new Error(Pu(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(Pu(6));g=!1,l();var b=a.indexOf(m);a.splice(b,1),o=null}}}function d(m){if(!eLt(m))throw new Error(Pu(7));if(typeof m.type>"u")throw new Error(Pu(8));if(u)throw new Error(Pu(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var b=g[y];b()}return m}function h(m){if(typeof m!="function")throw new Error(Pu(10));i=m,d({type:u4.REPLACE})}function p(){var m,g=f;return m={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(Pu(11));function w(){b.next&&b.next(c())}w();var S=g(w);return{unsubscribe:S}}},m[Ove]=function(){return this},m}return d({type:u4.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Ove]=p,r}function tLt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:u4.INIT});if(typeof r>"u")throw new Error(Pu(12));if(typeof n(void 0,{type:u4.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Pu(13))})}function nLt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{tLt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(Pu(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function l4(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function rLt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Pu(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=l4.apply(void 0,a)(i.dispatch),Pve(Pve({},i),{},{dispatch:s})}}}function SFe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var WY=SFe();WY.withExtraArgument=SFe;var TFe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),FP=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},iE=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},iLt=Object.defineProperty,sLt=Object.defineProperties,oLt=Object.getOwnPropertyDescriptors,Mve=Object.getOwnPropertySymbols,aLt=Object.prototype.hasOwnProperty,uLt=Object.prototype.propertyIsEnumerable,$ve=function(e,t,n){return t in e?iLt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},p1=function(e,t){for(var n in t||(t={}))aLt.call(t,n)&&$ve(e,n,t[n]);if(Mve)for(var r=0,i=Mve(t);r<i.length;r++){var n=i[r];uLt.call(t,n)&&$ve(e,n,t[n])}return e},iH=function(e,t){return sLt(e,oLt(t))},LP=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},lLt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?l4:l4.apply(null,arguments)};function CFe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var cLt=function(e){return e&&typeof e.match=="function"};function Im(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return p1(p1({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function fLt(e){return CFe(e)&&"type"in e}var dLt=function(e){TFe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,iE([void 0],n[0].concat(this)))):new(t.bind.apply(t,iE([void 0],n.concat(this))))},t}(Array),hLt=function(e){TFe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,iE([void 0],n[0].concat(this)))):new(t.bind.apply(t,iE([void 0],n.concat(this))))},t}(Array);function GY(e){return cy(e)?EFe(e,function(){}):e}function pLt(e){return typeof e=="boolean"}function mLt(){return function(t){return gLt(t)}}function gLt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new dLt;return n&&(pLt(n)?r.push(WY):r.push(WY.withExtraArgument(n.extraArgument))),r}var yLt=!0;function vLt(e){var t=mLt(),n=e,r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(CFe(i))h=nLt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=rLt.apply(void 0,p),g=l4;u&&(g=lLt(p1({trace:!yLt},typeof u=="object"&&u)));var y=new hLt(m),b=y;Array.isArray(d)?b=iE([m],d):typeof d=="function"&&(b=d(y));var w=g.apply(void 0,b);return xFe(h,c,w)}function AFe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function bLt(e){return typeof e=="function"}function wLt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?AFe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(bLt(e))u=function(){return GY(e())};else{var l=GY(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=iE([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(G1(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(cy(p))return EFe(p,function(b){return m(b,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function _Lt(e,t){return e+"/"+t}function ELt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n=typeof e.initialState=="function"?e.initialState:GY(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=_Lt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?Im(d,p):Im(d)});function u(){var c=typeof e.extraReducers=="function"?AFe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=p1(p1({},d),o);return wLt(n,function(b){for(var w in y)b.addCase(w,y[w]);for(var S=0,E=p;S<E.length;S++){var T=E[S];b.addMatcher(T.matcher,T.reducer)}g&&b.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var xLt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",DFe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=xLt[Math.random()*64|0];return t},SLt=["name","message","stack","code"],sH=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Fve=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),TLt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=SLt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Im(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:iH(p1({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=Im(t+"/pending",function(l,c,f){return{payload:void 0,meta:iH(p1({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=Im(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||TLt)(l||"Rejected"),meta:iH(p1({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):DFe(),p=new a,m;function g(b){m=b,p.abort()}var y=function(){return LP(this,null,function(){var b,w,S,E,T,C,A;return FP(this,function(I){switch(I.label){case 0:return I.trys.push([0,4,,5]),E=(b=r==null?void 0:r.condition)==null?void 0:b.call(r,l,{getState:f,extra:d}),ALt(E)?[4,E]:[3,2];case 1:E=I.sent(),I.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(k,N){return p.signal.addEventListener("abort",function(){return N({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([T,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(k,N){return new sH(k,N)},fulfillWithValue:function(k,N){return new Fve(k,N)}})).then(function(k){if(k instanceof sH)throw k;return k instanceof Fve?i(k.payload,h,l,k.meta):i(k,h,l)})])];case 3:return S=I.sent(),[3,5];case 4:return C=I.sent(),S=C instanceof sH?o(null,h,l,C.payload,C.meta):o(C,h,l),[3,5];case 5:return A=r&&!r.dispatchConditionRejection&&o.match(S)&&S.meta.condition,A||c(S),[2,S]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(CLt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function CLt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function ALt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var DLt=function(e,t){return cLt(e)?e.match(t):e(t)};function Lve(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return DLt(r,n)})}}var Mre=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},YY=function(){},IFe=function(e,t){return t===void 0&&(t=YY),e.catch(t),e},kFe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},kT=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},ILt="task",RFe="listener",NFe="completed",$re="cancelled",kLt="task-"+$re,RLt="task-"+NFe,PFe=RFe+"-"+$re,NLt=RFe+"-"+NFe,i9=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=ILt+" "+$re+" (reason: "+t+")"}return e}(),RT=function(e){if(e.aborted)throw new i9(e.reason)};function OFe(e,t){var n=YY;return new Promise(function(r,i){var s=function(){return i(new i9(e.reason))};if(e.aborted){s();return}n=kFe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=YY})}var PLt=function(e,t){return LP(void 0,null,function(){var n,r;return FP(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof i9?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},c4=function(e){return function(t){return IFe(OFe(e,t).then(function(n){return RT(e),n}))}},MFe=function(e){var t=c4(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},OLt=Object.assign,Bve={},BP="listenerMiddleware",MLt=function(e,t){var n=function(r){return kFe(e,function(){return kT(r,e.reason)})};return function(r,i){Mre(r,"taskExecutor");var s=new AbortController;n(s);var o=PLt(function(){return LP(void 0,null,function(){var a;return FP(this,function(u){switch(u.label){case 0:return RT(e),RT(s.signal),[4,r({pause:c4(s.signal),delay:MFe(s.signal),signal:s.signal})];case 1:return a=u.sent(),RT(s.signal),[2,a]}})})},function(){return kT(s,RLt)});return i!=null&&i.autoJoin&&t.push(o),{result:c4(e)(o),cancel:function(){kT(s,kLt)}}}},$Lt=function(e,t){var n=function(r,i){return LP(void 0,null,function(){var s,o,a,u;return FP(this,function(l){switch(l.label){case 0:RT(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,OFe(t,Promise.race(a))];case 2:return u=l.sent(),RT(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return IFe(n(r,i))}},$Fe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Im(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return Mre(s,"options.listener"),{predicate:i,type:t,effect:s}},FLt=function(e){var t=$Fe(e),n=t.type,r=t.predicate,i=t.effect,s=DFe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},KY=function(e){e.pending.forEach(function(t){kT(t,PFe)})},LLt=function(e){return function(){e.forEach(KY),e.clear()}},jve=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},BLt=Im(BP+"/add"),jLt=Im(BP+"/removeAll"),ULt=Im(BP+"/remove"),zLt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,iE([BP+"/error"],e))};function VLt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?zLt:i;Mre(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&KY(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=FLt(h)),o(p)},l=function(h){var p=$Fe(h),m=p.type,g=p.effect,y=p.predicate,b=a(function(w){var S=typeof m=="string"?w.type===m:w.predicate===y;return S&&w.effect===g});return b&&(b.unsubscribe(),h.cancelActive&&KY(b)),!!b},c=function(h,p,m,g){return LP(t,null,function(){var y,b,w,S;return FP(this,function(E){switch(E.label){case 0:y=new AbortController,b=$Lt(u,y.signal),w=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,OLt({},m,{getOriginalState:g,condition:function(T,C){return b(T,C).then(Boolean)},take:b,delay:MFe(y.signal),pause:c4(y.signal),extra:r,signal:y.signal,fork:MLt(y.signal,w),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(T,C,A){T!==y&&(kT(T,PFe),A.delete(T))})}})))];case 2:return E.sent(),[3,6];case 3:return S=E.sent(),S instanceof i9||jve(s,S,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(w)];case 5:return E.sent(),kT(y,NLt),h.pending.delete(y),[7];case 6:return[2]}})})},f=LLt(n),d=function(h){return function(p){return function(m){if(!fLt(m))return p(m);if(BLt.match(m))return u(m.payload);if(jLt.match(m)){f();return}if(ULt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===Bve)throw new Error(BP+": getOriginalState can only be called synchronously");return g},b;try{if(b=p(m),n.size>0)for(var w=h.getState(),S=Array.from(n.values()),E=0,T=S;E<T.length;E++){var C=T[E],A=!1;try{A=C.predicate(m,w,g)}catch(I){A=!1,jve(s,I,{raisedBy:"predicate"})}A&&c(C,m,h,y)}}finally{g=Bve}return b}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Uve;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);WFt();function HLt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let NM;const qLt=new Uint8Array(16);function WLt(){if(!NM&&(NM=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!NM))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return NM(qLt)}const Ga=[];for(let e=0;e<256;++e)Ga.push((e+256).toString(16).slice(1));function GLt(e,t=0){return(Ga[e[t+0]]+Ga[e[t+1]]+Ga[e[t+2]]+Ga[e[t+3]]+"-"+Ga[e[t+4]]+Ga[e[t+5]]+"-"+Ga[e[t+6]]+Ga[e[t+7]]+"-"+Ga[e[t+8]]+Ga[e[t+9]]+"-"+Ga[e[t+10]]+Ga[e[t+11]]+Ga[e[t+12]]+Ga[e[t+13]]+Ga[e[t+14]]+Ga[e[t+15]]).toLowerCase()}const YLt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),zve={randomUUID:YLt};function Vve(e,t,n){if(zve.randomUUID&&!t&&!e)return zve.randomUUID();e=e||{};const r=e.random||(e.rng||WLt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,GLt(r)}class km{static get(){let t=Vve();for(;this.ids.has(t);)t=Vve();return this.ids.set(t,!0),t}}km.ids=new Map;function Rm(e){return"parent"in e}function KLt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:km.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:km.get(),createdOn:Date.now(),val:r}]:[];return{id:km.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function XLt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:km.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:km.get(),createdOn:Date.now(),val:s}]:[];return{id:km.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function oo(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=s6t[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function sE(e){return!!e&&!!e[Mf]}function Y1(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===o6t}(e)||Array.isArray(e)||!!e[Ck]||!!(!((t=e.constructor)===null||t===void 0)&&t[Ck])||s9(e)||o9(e))}function FC(e,t,n){n===void 0&&(n=!1),K1(e)===0?(n?Object.keys:zre)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function K1(e){var t=e[Mf];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:s9(e)?2:o9(e)?3:0}function rN(e,t){return K1(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function lF(e,t){return K1(e)===2?e.get(t):e[t]}function FFe(e,t,n){var r=K1(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function QLt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function s9(e){return r6t&&e instanceof Map}function o9(e){return i6t&&e instanceof Set}function Bw(e){return e.o||e.t}function Fre(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=a6t(e);delete t[Mf];for(var n=zre(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Lre(e,t){return t===void 0&&(t=!1),Bre(e)||sE(e)||!Y1(e)||(K1(e)>1&&(e.set=e.add=e.clear=e.delete=JLt),Object.freeze(e),t&&FC(e,function(n,r){return Lre(r,!0)},!0)),e}function JLt(){oo(2)}function Bre(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Nm(e){var t=ZY[e];return t||oo(18,e),t}function ZLt(e,t){ZY[e]||(ZY[e]=t)}function Hve(){return{}.NODE_ENV==="production"||LC||oo(0),LC}function oH(e,t){t&&(Nm("Patches"),e.u=[],e.s=[],e.v=t)}function f4(e){XY(e),e.p.forEach(e6t),e.p=null}function XY(e){e===LC&&(LC=e.l)}function qve(e){return LC={p:[],l:LC,h:e,m:!0,_:0}}function e6t(e){var t=e[Mf];t.i===0||t.i===1?t.j():t.O=!0}function aH(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Nm("ES5").S(t,e,r),r?(n[Mf].P&&(f4(t),oo(4)),Y1(e)&&(e=d4(t,e),t.l||h4(t,e)),t.u&&Nm("Patches").M(n[Mf].t,e,t.u,t.s)):e=d4(t,n,[]),f4(t),t.u&&t.v(t.u,t.s),e!==Ure?e:void 0}function d4(e,t,n){if(Bre(t))return t;var r=t[Mf];if(!r)return FC(t,function(s,o){return Wve(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return h4(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Fre(r.k):r.o;FC(r.i===3?new Set(i):i,function(s,o){return Wve(e,r,i,s,o,n)}),h4(e,i,!1),n&&e.u&&Nm("Patches").R(r,n,e.u,e.s)}return r.o}function Wve(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&oo(5),sE(i)){var o=d4(e,i,s&&t&&t.i!==3&&!rN(t.D,r)?s.concat(r):void 0);if(FFe(n,r,o),!sE(o))return;e.m=!1}if(Y1(i)&&!Bre(i)){if(!e.h.F&&e._<1)return;d4(e,i),t&&t.A.l||h4(e,i)}}function h4(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&Lre(t,n)}function uH(e,t){var n=e[Mf];return(n?Bw(n):e)[t]}function Gve(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function QY(e){e.P||(e.P=!0,e.l&&QY(e.l))}function lH(e){e.o||(e.o=Fre(e.t))}function JY(e,t,n){var r=s9(t)?Nm("MapSet").N(t,n):o9(t)?Nm("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Hve(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=eK;o&&(u=[a],l=kI);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Nm("ES5").J(t,n);return(n?n.A:Hve()).p.push(r),r}function t6t(e){return sE(e)||oo(22,e),function t(n){if(!Y1(n))return n;var r,i=n[Mf],s=K1(n);if(i){if(!i.P&&(i.i<4||!Nm("ES5").K(i)))return i.t;i.I=!0,r=Yve(n,s),i.I=!1}else r=Yve(n,s);return FC(r,function(o,a){i&&lF(i.t,o)===a||FFe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Yve(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Fre(e)}function n6t(){function e(r){if(!Y1(r))return r;if(Array.isArray(r))return r.map(e);if(s9(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(o9(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return rN(r,Ck)&&(i[Ck]=r[Ck]),i}function t(r){return sE(r)?e(r):r}var n="add";ZLt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=K1(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||oo(24),typeof u=="function"&&f==="prototype"&&oo(24),typeof(u=lF(u,f))!="object"&&oo(15,o.join("/"))}var d=K1(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:oo(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:oo(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;FC(a.D,function(h,p){var m=lF(f,h),g=lF(d,h),y=p?rN(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var b=u.concat(h);l.push(y==="remove"?{op:y,path:b}:{op:y,path:b,value:g}),c.push(y===n?{op:"remove",path:b}:y==="remove"?{op:n,path:b,value:t(m)}:{op:"replace",path:b,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var b=f.length;b<h.length;b++){var w=u.concat([b]);l.push({op:n,path:w,value:t(h[b])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===Ure?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Kve,LC,jre=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",r6t=typeof Map<"u",i6t=typeof Set<"u",Xve=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Ure=jre?Symbol.for("immer-nothing"):((Kve={})["immer-nothing"]=!0,Kve),Ck=jre?Symbol.for("immer-draftable"):"__$immer_draftable",Mf=jre?Symbol.for("immer-state"):"__$immer_state",s6t={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},o6t=""+Object.prototype.constructor,zre=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,a6t=Object.getOwnPropertyDescriptors||function(e){var t={};return zre(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},ZY={},eK={get:function(e,t){if(t===Mf)return e;var n=Bw(e);if(!rN(n,t))return function(i,s,o){var a,u=Gve(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Y1(r)?r:r===uH(e.t,t)?(lH(e),e.o[t]=JY(e.A.h,r,e)):r},has:function(e,t){return t in Bw(e)},ownKeys:function(e){return Reflect.ownKeys(Bw(e))},set:function(e,t,n){var r=Gve(Bw(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=uH(Bw(e),t),s=i==null?void 0:i[Mf];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(QLt(n,i)&&(n!==void 0||rN(e.t,t)))return!0;lH(e),QY(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return uH(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,lH(e),QY(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Bw(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){oo(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){oo(12)}},kI={};FC(eK,function(e,t){kI[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),kI.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&oo(13),kI.set.call(this,e,t,void 0)},kI.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&oo(14),eK.set.call(this,e[0],t,n,e[0])};var u6t=function(){function e(n){var r=this;this.g=Xve,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,b=Array(y>1?y-1:0),w=1;w<y;w++)b[w-1]=arguments[w];return u.produce(m,function(S){var E;return(E=s).call.apply(E,[g,S].concat(b))})}}var l;if(typeof s!="function"&&oo(6),o!==void 0&&typeof o!="function"&&oo(7),Y1(i)){var c=qve(r),f=JY(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?f4(c):XY(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return oH(c,o),aH(m,c)},function(m){throw f4(c),m}):(oH(c,o),aH(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===Ure&&(l=void 0),r.F&&Lre(l,!0),o){var h=[],p=[];Nm("Patches").M(i,l,h,p),o(h,p)}return l}oo(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Y1(n)||oo(8),sE(n)&&(n=t6t(n));var r=qve(this),i=JY(this,n,void 0);return i[Mf].C=!0,XY(r),i},t.finishDraft=function(n,r){var i=n&&n[Mf];({}).NODE_ENV!=="production"&&(i&&i.C||oo(9),i.I&&oo(10));var s=i.A;return oH(s,r),aH(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Xve&&oo(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Nm("Patches").$;return sE(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),$f=new u6t,l6t=$f.produce;$f.produceWithPatches.bind($f);$f.setAutoFreeze.bind($f);$f.setUseProxies.bind($f);$f.applyPatches.bind($f);$f.createDraft.bind($f);$f.finishDraft.bind($f);function c6t(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=KLt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return ELt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:km.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:km.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function f6t(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=c6t(e),s=VLt();s.startListening({matcher:Lve(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Lve(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=vLt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:km.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var d6t=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),h6t=Object.prototype.hasOwnProperty;function tK(e,t){return h6t.call(e,t)}function nK(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)tK(e,i)&&r.push(i);return r}function Sc(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function rK(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function jw(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function LFe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function iK(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(iK(e[t]))return!0}else if(typeof e=="object"){for(var r=nK(e),i=r.length,s=0;s<i;s++)if(iK(e[r[s]]))return!0}}return!1}function Qve(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var BFe=function(e){d6t(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Qve(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Qve(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),to=BFe,p6t=Sc,JS={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=p4(n,this.path);r&&(r=Sc(r));var i=R_(n,{op:"remove",path:this.from}).removed;return R_(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=p4(n,this.from);return R_(n,{op:"add",path:this.path,value:Sc(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:iN(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},m6t={add:function(e,t,n){return rK(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:JS.move,copy:JS.copy,test:JS.test,_get:JS._get};function p4(e,t){if(t=="")return e;var n={op:"_get",path:t};return R_(e,n),n.value}function R_(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):m4(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=p4(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=iN(e,t.value),o.test===!1)throw new to("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new to("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Sc(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=m4;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=LFe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!rK(h))throw new to("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);rK(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new to("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=m6t[t.op].call(t,l,h,e);if(o.test===!1)throw new to("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=JS[t.op].call(t,l,h,e);if(o.test===!1)throw new to("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new to("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function a9(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new to("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Sc(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=R_(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function g6t(e,t,n){var r=R_(e,t);if(r.test===!1)throw new to("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function m4(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new to("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(JS[e.op]){if(typeof e.path!="string")throw new to("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new to('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new to("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new to("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&iK(e.value))throw new to("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new to("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new to("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=jFe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new to("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new to("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function jFe(e,t,n){try{if(!Array.isArray(e))throw new to("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)a9(Sc(t),Sc(e),n||!0);else{n=n||m4;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof to)return i;throw i}}function iN(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!iN(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!iN(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const y6t=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:to,_areEquals:iN,applyOperation:R_,applyPatch:a9,applyReducer:g6t,deepClone:p6t,getValueByPointer:p4,validate:jFe,validator:m4},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Vre=new WeakMap,v6t=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),b6t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function w6t(e){return Vre.get(e)}function _6t(e,t){return e.observers.get(t)}function E6t(e,t){e.observers.delete(t.callback)}function x6t(e,t){t.unobserve()}function S6t(e,t){var n=[],r,i=w6t(e);if(!i)i=new v6t(e),Vre.set(e,i);else{var s=_6t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Sc(e),t){r.callback=t,r.next=null;var o=function(){sK(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){sK(r),clearTimeout(r.next),E6t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new b6t(t,r)),r}function sK(e,t){t===void 0&&(t=!1);var n=Vre.get(e.object);Hre(n.value,e.object,e.patches,"",t),e.patches.length&&a9(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Hre(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=nK(t),o=nK(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(tK(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?Hre(c,f,n,r+"/"+jw(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+jw(l),value:Sc(c)}),n.push({op:"replace",path:r+"/"+jw(l),value:Sc(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+jw(l),value:Sc(c)}),n.push({op:"remove",path:r+"/"+jw(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!tK(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+jw(l),value:Sc(t[l])})}}}function UFe(e,t,n){n===void 0&&(n=!1);var r=[];return Hre(e,t,r,"",n),r}const T6t=Object.freeze(Object.defineProperty({__proto__:null,compare:UFe,generate:sK,observe:S6t,unobserve:x6t},Symbol.toStringTag,{value:"Module"}));Object.assign({},y6t,T6t,{JsonPatchError:BFe,deepClone:Sc,escapePathComponent:jw,unescapePathComponent:LFe});var RI=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(RI||{});function cF(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=zFe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=cF(i,t);return a9(a,Sc(o),!0,!1).newDocument}function C6t(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function u9({registry:e,initialState:t}){let n=!1;const r=HLt(),i=f6t(t);function s(c){return i.backend.nodes[c]}r.listen(RI.TRAVERSAL_START,()=>{n=!0}),r.listen(RI.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return cF(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=cF(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const b=UFe(y,f);if(C6t(f,b)==="checkpoint")g={type:"checkpoint",val:f};else{const w=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:b,checkpointRef:w}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=XLt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=cF(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(RI.TRAVERSAL_START);const f=zFe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);D6t(p,m)?Rm(p)&&d.push(...p.sideEffects.undo):Rm(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(RI.TRAVERSAL_END)},undo(){const{current:c}=i;return Rm(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return VFe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function A6t(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Rm(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Rm(r)&&(r=n[r.parent]),Rm(i)&&(i=n[i.parent]);return r.id}function zFe(e,t,n){const r=A6t(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),Rm(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),Rm(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function D6t(e,t){if(Rm(e)&&e.parent===t.id)return!0;if(Rm(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function VFe(e,t){return{...e,children:e.children.map(n=>VFe(t[n],t)),name:`${e.label}`}}n6t();function I6t(e){return e.length===2?l6t(e):e}class oA{static create(){return new oA}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:I6t(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Im(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var k6t="Expected a function",Jve=NaN,R6t="[object Symbol]",N6t=/^\s+|\s+$/g,P6t=/^[-+]0x[0-9a-f]+$/i,O6t=/^0b[01]+$/i,M6t=/^0o[0-7]+$/i,$6t=parseInt,F6t=typeof Hs=="object"&&Hs&&Hs.Object===Object&&Hs,L6t=typeof self=="object"&&self&&self.Object===Object&&self,B6t=F6t||L6t||Function("return this")(),j6t=Object.prototype,U6t=j6t.toString,z6t=Math.max,V6t=Math.min,cH=function(){return B6t.Date.now()};function H6t(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(k6t);t=Zve(t)||0,oK(n)&&(c=!!n.leading,f="maxWait"in n,s=f?z6t(Zve(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(T){var C=r,A=i;return r=i=void 0,l=T,o=e.apply(A,C),o}function p(T){return l=T,a=setTimeout(y,t),c?h(T):o}function m(T){var C=T-u,A=T-l,I=t-C;return f?V6t(I,s-A):I}function g(T){var C=T-u,A=T-l;return u===void 0||C>=t||C<0||f&&A>=s}function y(){var T=cH();if(g(T))return b(T);a=setTimeout(y,m(T))}function b(T){return a=void 0,d&&r?h(T):(r=i=void 0,o)}function w(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function S(){return a===void 0?o:b(cH())}function E(){var T=cH(),C=g(T);if(r=arguments,i=this,u=T,C){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=w,E.flush=S,E}function oK(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function q6t(e){return!!e&&typeof e=="object"}function W6t(e){return typeof e=="symbol"||q6t(e)&&U6t.call(e)==R6t}function Zve(e){if(typeof e=="number")return e;if(W6t(e))return Jve;if(oK(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=oK(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(N6t,"");var n=O6t.test(e);return n||M6t.test(e)?$6t(e.slice(2),n?2:8):P6t.test(e)?Jve:+e}var G6t=H6t;const Th=zf(G6t);function HFe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=P.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=P.useMemo(()=>Db(".2s"),[]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(If,{children:_.jsx(qi,{gap:3,children:_.jsx(gt,{size:"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${n}, ${a})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const Y6t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:HFe},Symbol.toStringTag,{value:"Module"})),fH=15;function qFe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=P.useState([0,0]),[l,c]=P.useState(!1);return P.useEffect(()=>{const f=Or("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<fH&&Math.abs(t(g[r.y])-p[1])<fH);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(b=>{g.has(b[r.ids])&&g.delete(b[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),_.jsx("circle",{style:{cursor:l?"pointer":"default"},r:fH,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const K6t=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:qFe},Symbol.toStringTag,{value:"Module"})),Ss={top:15,left:100,right:15,bottom:70};function aK({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=Zh(),[c]=Zh(),[f]=Zh(),[d,h]=P.useState(!0),p=P.useMemo(()=>l-Ss.left-Ss.right,[l]),m=P.useMemo(()=>u-Ss.top-Ss.bottom,[u]),g=P.useMemo(()=>{const k=Array.from(new Set(s.map(N=>N[i.category])));return kb(NB).domain(k)},[s,i.category]),{xMin:y,yMin:b,xMax:w,yMax:S}=P.useMemo(()=>{const k=s.map(B=>+B[i.x]).filter(B=>B!==null),[N,F]=zL(k),M=s.map(B=>+B[i.y]).filter(B=>B!==null),[L,j]=zL(M);return{xMin:N,xMax:F,yMin:L,yMax:j}},[s,i.x,i.y]),E=P.useMemo(()=>{const k=w-y;return p<=0?null:i.dataType==="date"?Yte([Ss.left,p+Ss.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Lc([Ss.left,p+Ss.left]).domain([y-k/10,w+k/10]).nice()},[i.dataType,p,w,y]),T=P.useMemo(()=>{const k=S-b;return m<=0?null:Lc([m+Ss.top,Ss.top]).domain([b-k/10,S+k/10]).nice()},[m,S,b]),C=P.useMemo(()=>{if(!E||!T)return()=>null;if(r==="Axis Selection"){const k=ANe().extent([[Ss.left,Ss.top+m-5],[Ss.left+p,Ss.top+m+5]]).on("brush end",F=>{F.sourceEvent!==void 0&&n([[F.selection[0],null],[F.selection[1],null]],E,T,F.mode)}),N=DNe().extent([[Ss.left-5,Ss.top],[Ss.left+5,Ss.top+m]]).on("brush end",F=>{F.sourceEvent!==void 0&&n([[null,F.selection[0]],[null,F.selection[1]]],E,T,F.mode)});return c.current&&f.current&&(Or(f.current).call(N),Or(c.current).call(k),t.hasBrush||(Or(f.current).call(N.move,[T(S),T(b)]),Or(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),T(S)],[E(new Date("2015-12-31")),T(b)]],E,T,"drag"))),()=>{Or(f.current).call(N.move,[T(S),T(b)]),Or(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),T(S)],[E(new Date("2015-12-31")),T(b)]],E,T,"clear")}}if(r==="Rectangular Selection"){const k=INe().extent([[Ss.left,Ss.top],[Ss.left+p,Ss.top+m]]).on("brush",N=>{N.sourceEvent!==void 0&&n([[N.selection[0][0],N.selection[0][1]],[N.selection[1][0],N.selection[1][1]]],E,T,N.mode)}).on("end",N=>{N.selection===null&&N.sourceEvent!==void 0&&(Or(a.current).call(k.move,null),e(null))});return Or(a.current).call(k),()=>{Or(a.current).call(k.move,null),n([[null,null],[null,null]],E,T,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[E(y),T(S)],[E(w),T(b)]],E,T,null),()=>n([[E(y),T(S)],[E(w),T(b)]],E,T,"clear")):r==="Paintbrush Selection"?()=>n([[E(y),T(S)],[E(w),T(b)]],E,T,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,w,y,E,S,b,T]),A=P.useMemo(()=>o.length===0?null:new Set(o),[o]),I=P.useMemo(()=>!E||!T?null:s.map((k,N)=>{if(k[i.x]===null||k[i.y]===null)return null;const F=i.dataType==="date"?E(new Date(k[i.x])):E(k[i.x]);return _.jsx("circle",{opacity:A&&!A.has(k[i.ids])?.3:1,r:3,fill:A&&!A.has(k[i.ids])?"lightgray":g(k[i.category]),cx:F,cy:T(k[i.y])},N)}),[A,g,s,i.category,i.dataType,i.ids,i.x,i.y,E,T]);return P.useEffect(()=>{r==="Axis Selection"&&GRe(".handle").style("fill","darkgrey")},[t,r]),_.jsxs(Al,{children:[_.jsxs(qi,{children:[_.jsx(Mn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),C==null||C()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?_.jsx(q8,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:k=>h(k==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),_.jsxs(qi,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&T?_.jsxs("g",{children:[_.jsx(HFe,{yScale:T,label:i.y,horizontalPosition:Ss.left,xRange:E.range()}),_.jsx(ine,{xScale:E,yRange:T.range(),isDate:i.dataType==="date",vertPosition:m+Ss.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(k=>({value:k.toString(),offset:E(k)}))})]}):null,I,_.jsx("g",{id:"brushXRef",ref:c}),_.jsx("g",{id:"brushYRef",ref:f}),E&&T&&r==="Paintbrush Selection"?_.jsx(qFe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:T}):null]}),r==="Slider Selection"&&E&&T?_.jsxs(Al,{style:{flexGrow:1},gap:50,children:[_.jsxs(Al,{gap:0,children:[_.jsx(gt,{children:i.x}),_.jsx(cC,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:k=>{n([[E(k[0]),t.y1],[E(k[1]),t.y2]],E,T,"drag")},style:{width:"300px"},marks:E.ticks(5).map(k=>({value:k,label:k})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),_.jsxs(Al,{gap:0,children:[_.jsx(gt,{children:i.y}),_.jsx(cC,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],onChange:k=>{n([[t.x1,T(k[1])],[t.x2,T(k[0])]],E,T,"drag")},style:{width:"300px"},marks:T.ticks(5).map(k=>({value:k,label:k})),value:[T.invert(t.y2),T.invert(t.y1)]})]})]}):null]})]})}const X6t=Object.freeze(Object.defineProperty({__proto__:null,Scatter:aK,default:aK},Symbol.toStringTag,{value:"Module"}));function e1e({parameters:e,setAnswer:t}){const[n,r]=P.useState(null),[i,s]=P.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=P.useState(null);P.useEffect(()=>{PNe(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=P.useMemo(()=>o?yFe(o):null,[o]),{actions:l,trrack:c}=P.useMemo(()=>{const g=oA.create(),y=g.register("brush",(T,C)=>(T.all={brush:C},T)),b=g.register("brushMove",(T,C)=>(T.all={brush:C},T)),w=g.register("brushResize",(T,C)=>(T.all={brush:C},T)),S=g.register("brushClear",(T,C)=>(T.all={brush:C},T)),E=u9({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:b,brushResize:w,clearBrush:S},trrack:E}},[]),f=P.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=P.useMemo(()=>Th(f,100,{maxWait:100}),[f]),h=P.useCallback((g,y,b,w,S)=>{if(!y||!b)return;const E=y.invert(g[0][0]||i.x1),T=y.invert(g[1][0]||i.x2),C=b.invert(g[1][1]||i.y2),A=b.invert(g[0][1]||i.y1);let I=null;if(w==="clear")I=u;else if(S){const N=new Set(S);I=u.filter(AT(F=>N.has(F[e.ids])))}else e.brushType==="Axis Selection"?I=u.filter(AT(N=>new Date(N[e.x])>=new Date(E)&&new Date(N[e.x])<=new Date(T)&&N[e.y]>=C&&N[e.y]<=A)):I=u.filter(AT(N=>N[e.x]>=E&&N[e.x]<=T&&N[e.y]>=C&&N[e.y]<=A));const k={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:w!=="clear",ids:w!=="clear"?I==null?void 0:I.array("id"):[]};s(k),w==="drag"||w==="handle"?d(w,k):w==="clear"&&c.apply("Clear Brush",l.clearBrush(k)),r(I),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=P.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=P.useCallback(g=>{r(g)},[]);return o?_.jsxs(Al,{gap:"xs",children:[_.jsx(aK,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),_.jsx(vY,{data:o,parameters:e,barsTable:p})]}):_.jsx(Yd,{})}const Q6t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:e1e,default:e1e},Symbol.toStringTag,{value:"Module"})),J6t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),t1e=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},aA=e=>{const t=P.useRef(null),n=t1e(e),[r,i]=P.useState(0),[s,o]=P.useState(0);P.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=t1e({...n,width:n.width||r,height:n.height||s});return[t,a]},Z6t=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:aA},Symbol.toStringTag,{value:"Module"}));function WFe({data:e,xScale:t,yScale:n,height:r}){return _.jsx("g",{children:e.map((i,s)=>_.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const e4t=Object.freeze(Object.defineProperty({__proto__:null,Bars:WFe},Symbol.toStringTag,{value:"Module"}));function qre({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=P.useMemo(()=>{const o=Lc().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(0,${a})`,children:[_.jsx("line",{x2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const t4t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:qre},Symbol.toStringTag,{value:"Module"}));function GFe({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=P.useMemo(()=>{const o=q2().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsx("g",{transform:`translate(${a}, 10)`,children:_.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const n4t=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:GFe},Symbol.toStringTag,{value:"Module"})),r4t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function i4t({parameters:e}){const[n,r]=aA(r4t),i=q2().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=Lc().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(GFe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(qre,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(WFe,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const s4t=Object.freeze(Object.defineProperty({__proto__:null,default:i4t},Symbol.toStringTag,{value:"Module"}));function YFe({data:e}){return _.jsx("g",{children:e.map(({bubble:t},n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const o4t=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:YFe},Symbol.toStringTag,{value:"Module"}));function Wre({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const a4t=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:Wre},Symbol.toStringTag,{value:"Module"})),u4t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},l4t=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=RPe().size([t-10,n-10]).padding(1.5),o=xB(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},c4t=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function f4t({parameters:e}){const[t,n]=aA(u4t),r=l4t(e,n.width,n.height),i=c4t(r,e.selectedIndices);return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[_.jsx(YFe,{data:r}),_.jsx(Wre,{positions:i})]})})})}const d4t=Object.freeze(Object.defineProperty({__proto__:null,default:f4t},Symbol.toStringTag,{value:"Module"}));function KFe({arcs:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const h4t=Object.freeze(Object.defineProperty({__proto__:null,Slices:KFe},Symbol.toStringTag,{value:"Module"}));function XFe({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("g",{transform:`translate(${t.centroid()})`,children:_.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const p4t=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:XFe},Symbol.toStringTag,{value:"Module"})),m4t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},g4t=hkt().value(e=>e.value),ND=150;function y4t({parameters:e}){const[t,n]=aA(m4t),r=g4t(e.data),i=r.map(o=>yY().innerRadius(0).outerRadius(ND).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>yY().outerRadius(ND+10).innerRadius(ND+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft+ND,n.marginTop+ND].join(",")})`,children:[_.jsx(KFe,{arcs:i}),_.jsx(XFe,{positions:s})]})})})}const v4t=Object.freeze(Object.defineProperty({__proto__:null,default:y4t},Symbol.toStringTag,{value:"Module"}));function QFe({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=P.useMemo(()=>{const o=Lc().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(${a}, 0)`,children:[_.jsx("line",{y2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const b4t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:QFe},Symbol.toStringTag,{value:"Module"}));function JFe({data:e,barWidth:t,yScale:n}){return _.jsx("g",{children:e.map((r,i)=>_.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const w4t=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:JFe},Symbol.toStringTag,{value:"Module"})),_4t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function E4t({parameters:e}){const[n,r]=aA(_4t),i=q2().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=Lc().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(w=>+w.value),g=p.reduce((w,S)=>Number(w)+Number(S))/100,y={};p.forEach((w,S)=>{y[String.fromCharCode(S+65)]=w/g});const b=[y];return Mkt().keys(e.data.map(w=>w.name))(b)},l=(h,p,m)=>h.filter((y,b)=>p.includes(b)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(QFe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:"translate(0, 0)",children:_.jsx(qre,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsxs("g",{transform:"translate(0, 0)",children:[_.jsx(JFe,{data:c,barWidth:f,yScale:s}),_.jsx(Wre,{positions:d})]})]})})})}const x4t=Object.freeze(Object.defineProperty({__proto__:null,default:E4t},Symbol.toStringTag,{value:"Module"})),S4t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function T4t({parameters:e,setAnswer:t}){const[n,r]=aA(S4t),[i,s]=P.useState(100),[o,a]=P.useState(100),[u,l]=P.useState(e.speed),{taskid:c}=e,{actions:f,trrack:d}=P.useMemo(()=>{const p=oA.create(),m=p.register("click",(y,b)=>(y.clickX=b.clickX,y.clickY=b.clickY,y.distance=b.distance,y)),g=u9({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=P.useCallback(p=>{const m=Or("#movingCircle"),g=Or("#clickAccuracySvg"),y=WL(p,g.node()),b=[+m.attr("cx"),+m.attr("cy")],w=`${Math.round(Math.sqrt((y[0]-b[0])**2+(y[1]-b[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+w,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:w}})},[f,t,c,d]);return P.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;Or(n.current).select("circle").transition().duration(y).ease(MTt).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:_.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[_.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),_.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),_.jsxs(Ne,{children:["Adjust speed (px/s):",_.jsx(Y8,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const C4t=Object.freeze(Object.defineProperty({__proto__:null,default:T4t},Symbol.toStringTag,{value:"Module"}));function n1e({rankings:e}){return _.jsx("div",{style:{fontFamily:"sans-serif"},children:_.jsx("div",{children:e.map((t,n)=>_.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function A4t({parameters:e,setAnswer:t}){const n=Cb(),[r,i]=P.useState(""),{goToNextStep:s,isNextDisabled:o}=yRe(),a=P.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=P.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=P.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=P.useCallback(()=>{o||s()},[o,s]);P.useEffect(()=>{const h=Hnt([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),_.jsxs("div",{children:[_.jsxs(Cl,{children:[_.jsxs(Cl.Col,{span:2,children:[_.jsx(n1e,{rankings:a==="r1"?e.data.r1:e.data.r2}),_.jsx(Mn,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?_.jsx(cme,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),_.jsxs(Cl.Col,{span:2,children:[_.jsx(n1e,{rankings:a==="r1"?e.data.r2:e.data.r1}),_.jsx(Mn,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?_.jsx(cme,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&_.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const D4t=Object.freeze(Object.defineProperty({__proto__:null,default:A4t},Symbol.toStringTag,{value:"Module"}));function I4t(){return _.jsx("div",{children:"test react file"})}const k4t=Object.freeze(Object.defineProperty({__proto__:null,default:I4t},Symbol.toStringTag,{value:"Module"}));function R4t({parameters:e,setAnswer:t}){const{taskid:n,cx:r,cy:i}=e,s=P.useRef(null),o=P.useCallback(a=>{const u=Or("#Circle"),l=Or("#click_svg"),c=WL(a,l.node()),f=[+u.attr("cx"),+u.attr("cy")],d=`${Math.round(Math.sqrt((c[0]-f[0])**2+(c[1]-f[1])**2))}px`;t({status:!0,answers:{[n]:d}})},[t,n]);return _.jsx("div",{className:"Chart__wrapper",ref:s,onClick:o,style:{height:"650px"},children:_.jsx("svg",{id:"click_svg",width:400,height:400,children:_.jsx("circle",{id:"Circle",cx:r,cy:i,r:"10",stroke:"black",strokeWidth:"2",fill:"white"})})})}const N4t=Object.freeze(Object.defineProperty({__proto__:null,default:R4t},Symbol.toStringTag,{value:"Module"}));function Gre({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=P.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=P.useCallback(c=>(s?TP("%B"):Db(".2s"))(c),[s]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:_.jsx(If,{children:_.jsx(qi,{gap:3,children:_.jsx(gt,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>_.jsxs("g",{transform:`translate(${f}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),o?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:_.jsx(If,{children:_.jsx(hs,{withinPortal:!0,label:c,children:_.jsx(gt,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const P4t=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:Gre},Symbol.toStringTag,{value:"Module"}));function ZFe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=P.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(If,{children:_.jsx(qi,{gap:3,children:_.jsx(gt,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${n}, ${l})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),s?_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,_.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:_.jsx("foreignObject",{width:a,height:20,children:_.jsx(qi,{style:{width:"100%",height:"100%"},justify:"right",children:_.jsx(gt,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const O4t=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:ZFe},Symbol.toStringTag,{value:"Module"})),od={top:15,left:100,right:50,bottom:50};function uK({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=Zh(),o=P.useMemo(()=>s-od.left-od.right,[s]),a=P.useMemo(()=>i-od.top-od.bottom,[i]),u=P.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return kb(NB).domain(d)},[n,t.category]),l=P.useMemo(()=>e?Lc([od.left,o+od.left]).domain([0,N0(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=P.useMemo(()=>e?q2([od.top,a+od.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=P.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:_.jsxs("g",{children:[_.jsx("rect",{x:od.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-od.left},h),_.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?_.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(Gre,{xScale:l,yRange:c.range(),vertPosition:a+od.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?_.jsx(ZFe,{yScale:c,horizontalPosition:od.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):_.jsx(Yd,{})}const M4t=Object.freeze(Object.defineProperty({__proto__:null,Bar:uK,default:uK},Symbol.toStringTag,{value:"Module"}));function eLe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=P.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=P.useMemo(()=>Db(".2s"),[]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(If,{children:_.jsx(qi,{gap:3,children:_.jsx(gt,{size:"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${n}, ${a})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const $4t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:eLe},Symbol.toStringTag,{value:"Module"})),dH=15;function tLe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=P.useState([0,0]),[l,c]=P.useState(!1);return P.useEffect(()=>{const f=Or("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<dH&&Math.abs(t(g[r.y])-p[1])<dH);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(b=>{g.has(b[r.ids])&&g.delete(b[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),_.jsx("circle",{style:{cursor:l?"pointer":"default"},r:dH,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const F4t=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:tLe},Symbol.toStringTag,{value:"Module"})),Ts={top:15,left:100,right:15,bottom:70};function lK({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=Zh(),[c]=Zh(),[f]=Zh(),[d,h]=P.useState(!0),p=P.useMemo(()=>l-Ts.left-Ts.right,[l]),m=P.useMemo(()=>u-Ts.top-Ts.bottom,[u]),g=P.useMemo(()=>{const k=Array.from(new Set(s.map(N=>N[i.category])));return kb(NB).domain(k)},[s,i.category]),{xMin:y,yMin:b,xMax:w,yMax:S}=P.useMemo(()=>{const k=s.map(B=>+B[i.x]).filter(B=>B!==null),[N,F]=zL(k),M=s.map(B=>+B[i.y]).filter(B=>B!==null),[L,j]=zL(M);return{xMin:N,xMax:F,yMin:L,yMax:j}},[s,i.x,i.y]),E=P.useMemo(()=>{const k=w-y;return p<=0?null:i.dataType==="date"?Yte([Ts.left,p+Ts.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Lc([Ts.left,p+Ts.left]).domain([y-k/10,w+k/10]).nice()},[i.dataType,p,w,y]),T=P.useMemo(()=>{const k=S-b;return m<=0?null:Lc([m+Ts.top,Ts.top]).domain([b-k/10,S+k/10]).nice()},[m,S,b]),C=P.useMemo(()=>{if(!E||!T)return()=>null;if(r==="Axis Selection"){const k=ANe().extent([[Ts.left,Ts.top+m-5],[Ts.left+p,Ts.top+m+5]]).on("brush end",F=>{F.sourceEvent!==void 0&&n([[F.selection[0],null],[F.selection[1],null]],E,T,F.mode)}),N=DNe().extent([[Ts.left-5,Ts.top],[Ts.left+5,Ts.top+m]]).on("brush end",F=>{F.sourceEvent!==void 0&&n([[null,F.selection[0]],[null,F.selection[1]]],E,T,F.mode)});return c.current&&f.current&&(Or(f.current).call(N),Or(c.current).call(k),t.hasBrush||(Or(f.current).call(N.move,[T(S),T(b)]),Or(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),T(S)],[E(new Date("2015-12-31")),T(b)]],E,T,"drag"))),()=>{Or(f.current).call(N.move,[T(S),T(b)]),Or(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),T(S)],[E(new Date("2015-12-31")),T(b)]],E,T,"clear")}}if(r==="Rectangular Selection"){const k=INe().extent([[Ts.left,Ts.top],[Ts.left+p,Ts.top+m]]).on("brush",N=>{N.sourceEvent!==void 0&&n([[N.selection[0][0],N.selection[0][1]],[N.selection[1][0],N.selection[1][1]]],E,T,N.mode)}).on("end",N=>{N.selection===null&&N.sourceEvent!==void 0&&(Or(a.current).call(k.move,null),e(null))});return Or(a.current).call(k),()=>{Or(a.current).call(k.move,null),n([[null,null],[null,null]],E,T,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[E(y),T(S)],[E(w),T(b)]],E,T,null),()=>n([[E(y),T(S)],[E(w),T(b)]],E,T,"clear")):r==="Paintbrush Selection"?()=>n([[E(y),T(S)],[E(w),T(b)]],E,T,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,w,y,E,S,b,T]),A=P.useMemo(()=>o.length===0?null:new Set(o),[o]),I=P.useMemo(()=>!E||!T?null:s.map((k,N)=>{if(k[i.x]===null||k[i.y]===null)return null;const F=i.dataType==="date"?E(new Date(k[i.x])):E(k[i.x]);return _.jsx("circle",{opacity:A&&!A.has(k[i.ids])?.3:1,r:3,fill:A&&!A.has(k[i.ids])?"lightgray":g(k[i.category]),cx:F,cy:T(k[i.y])},N)}),[A,g,s,i.category,i.dataType,i.ids,i.x,i.y,E,T]);return P.useEffect(()=>{r==="Axis Selection"&&GRe(".handle").style("fill","darkgrey")},[t,r]),_.jsxs(Al,{children:[_.jsxs(qi,{children:[_.jsx(Mn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),C==null||C()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?_.jsx(q8,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:k=>h(k==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),_.jsxs(qi,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&T?_.jsxs("g",{children:[_.jsx(eLe,{yScale:T,label:i.y,horizontalPosition:Ts.left,xRange:E.range()}),_.jsx(Gre,{xScale:E,yRange:T.range(),isDate:i.dataType==="date",vertPosition:m+Ts.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(k=>({value:k.toString(),offset:E(k)}))})]}):null,I,_.jsx("g",{id:"brushXRef",ref:c}),_.jsx("g",{id:"brushYRef",ref:f}),E&&T&&r==="Paintbrush Selection"?_.jsx(tLe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:T}):null]}),r==="Slider Selection"&&E&&T?_.jsxs(Al,{style:{flexGrow:1},gap:50,children:[_.jsxs(Al,{gap:0,children:[_.jsx(gt,{children:i.x}),_.jsx(cC,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:k=>{n([[E(k[0]),t.y1],[E(k[1]),t.y2]],E,T,"drag")},style:{width:"300px"},marks:E.ticks(5).map(k=>({value:k,label:k})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),_.jsxs(Al,{gap:0,children:[_.jsx(gt,{children:i.y}),_.jsx(cC,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],onChange:k=>{n([[t.x1,T(k[1])],[t.x2,T(k[0])]],E,T,"drag")},style:{width:"300px"},marks:T.ticks(5).map(k=>({value:k,label:k})),value:[T.invert(t.y2),T.invert(t.y1)]})]})]}):null]})]})}const L4t=Object.freeze(Object.defineProperty({__proto__:null,Scatter:lK,default:lK},Symbol.toStringTag,{value:"Module"}));function r1e({parameters:e,setAnswer:t}){const[n,r]=P.useState(null),[i,s]=P.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=P.useState(null);P.useEffect(()=>{PNe(`../tutorial/react-and-randomization/data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=P.useMemo(()=>o?yFe(o):null,[o]),{actions:l,trrack:c}=P.useMemo(()=>{const g=oA.create(),y=g.register("brush",(T,C)=>(T.all={brush:C},T)),b=g.register("brushMove",(T,C)=>(T.all={brush:C},T)),w=g.register("brushResize",(T,C)=>(T.all={brush:C},T)),S=g.register("brushClear",(T,C)=>(T.all={brush:C},T)),E=u9({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:b,brushResize:w,clearBrush:S},trrack:E}},[]),f=P.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=P.useMemo(()=>Th(f,100,{maxWait:100}),[f]),h=P.useCallback((g,y,b,w,S)=>{if(!y||!b)return;const E=y.invert(g[0][0]||i.x1),T=y.invert(g[1][0]||i.x2),C=b.invert(g[1][1]||i.y2),A=b.invert(g[0][1]||i.y1);let I=null;if(w==="clear")I=u;else if(S){const N=new Set(S);I=u.filter(AT(F=>N.has(F[e.ids])))}else e.brushType==="Axis Selection"?I=u.filter(AT(N=>new Date(N[e.x])>=new Date(E)&&new Date(N[e.x])<=new Date(T)&&N[e.y]>=C&&N[e.y]<=A)):I=u.filter(AT(N=>N[e.x]>=E&&N[e.x]<=T&&N[e.y]>=C&&N[e.y]<=A));const k={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:w!=="clear",ids:w!=="clear"?I==null?void 0:I.array("id"):[]};s(k),w==="drag"||w==="handle"?d(w,k):w==="clear"&&c.apply("Clear Brush",l.clearBrush(k)),r(I),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=P.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=P.useCallback(g=>{r(g)},[]);return o?_.jsxs(Al,{gap:"xs",children:[_.jsx(lK,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),_.jsx(uK,{data:o,parameters:e,barsTable:p})]}):_.jsx(Yd,{})}const B4t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:r1e,default:r1e},Symbol.toStringTag,{value:"Module"})),j4t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),U4t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var nLe={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function z4t(e,t){if(g4(e,t))return e[t];throw typeof e[t]=="function"&&H4t(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function V4t(e,t,n){if(g4(e,t))return e[t]=n,n;throw new Error('No access to property "'+t+'"')}function g4(e,t){return!q4t(e)&&!Array.isArray(e)?!1:v4(W4t,t)?!0:!(t in Object.prototype||t in Function.prototype)}function H4t(e,t){return e==null||typeof e[t]!="function"||v4(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)?!1:v4(G4t,t)?!0:!(t in Object.prototype||t in Function.prototype)}function q4t(e){return typeof e=="object"&&e&&e.constructor===Object}var W4t={length:!0,name:!0},G4t={toString:!0,valueOf:!0,toLocaleString:!0};class Y4t{constructor(t){this.wrappedObject=t,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(t=>this.has(t)).values()}get(t){return z4t(this.wrappedObject,t)}set(t,n){return V4t(this.wrappedObject,t,n),this}has(t){return g4(this.wrappedObject,t)&&t in this.wrappedObject}entries(){return K4t(this.keys(),t=>[t,this.get(t)])}forEach(t){for(var n of this.keys())t(this.get(n),n,this)}delete(t){g4(this.wrappedObject,t)&&delete this.wrappedObject[t]}clear(){for(var t of this.keys())this.delete(t)}get size(){return Object.keys(this.wrappedObject).length}}function K4t(e,t){return{next:()=>{var n=e.next();return n.done?n:{value:t(n.value),done:!1}}}}function ds(e){return typeof e=="number"}function zo(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function X4t(e){return typeof e=="bigint"}function rLe(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function iLe(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function sLe(e){return e&&e.constructor.prototype.isUnit===!0||!1}function i0(e){return typeof e=="string"}var Fo=Array.isArray;function aa(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function y4(e){return Array.isArray(e)||aa(e)}function Q4t(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function J4t(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function Z4t(e){return e&&e.constructor.prototype.isRange===!0||!1}function Yre(e){return e&&e.constructor.prototype.isIndex===!0||!1}function e5t(e){return typeof e=="boolean"}function t5t(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function n5t(e){return e&&e.constructor.prototype.isHelp===!0||!1}function r5t(e){return typeof e=="function"}function i5t(e){return e instanceof Date}function s5t(e){return e instanceof RegExp}function Kre(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!rLe(e)&&!iLe(e))}function o5t(e){return e?e instanceof Map||e instanceof Y4t||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}function a5t(e){return e===null}function u5t(e){return e===void 0}function l5t(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function c5t(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function f5t(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function d5t(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function h5t(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function p5t(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function m5t(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function g5t(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function y5t(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function v5t(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function b5t(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function w5t(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function _5t(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function E5t(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function x5t(e){return e&&e.isRelationalNode===!0&&e.constructor.prototype.isNode===!0||!1}function S5t(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function T5t(e){return e&&e.constructor.prototype.isChain===!0||!1}function m1(e){var t=typeof e;return t==="object"?e===null?"null":zo(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}function _o(e){var t=typeof e;if(t==="number"||t==="bigint"||t==="string"||t==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(n){return _o(n)});if(e instanceof Date)return new Date(e.valueOf());if(zo(e))return e;if(Kre(e))return C5t(e,_o);if(t==="function")return e;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(e,")"))}function C5t(e,t){var n={};for(var r in e)v4(e,r)&&(n[r]=t(e[r]));return n}function BC(e,t){var n,r,i;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(r=0,i=e.length;r<i;r++)if(!BC(e[r],t[r]))return!1;return!0}else{if(typeof e=="function")return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e)if(!(n in t)||!BC(e[n],t[n]))return!1;for(n in t)if(!(n in e))return!1;return!0}else return e===t}}function v4(e,t){return e&&Object.hasOwnProperty.call(e,t)}function A5t(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r],s=e[i];s!==void 0&&(n[i]=s)}return n}var D5t=["Matrix","Array"],I5t=["number","BigNumber","Fraction"],ex=function(t){if(t)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(nLe)};lC(ex,nLe,{MATRIX_OPTIONS:D5t,NUMBER_OPTIONS:I5t});function i1e(){return!0}function ad(){return!1}function eS(){}const s1e="Argument is not a typed-function.";function oLe(){function e(Q){return typeof Q=="object"&&Q!==null&&Q.constructor===Object}const t=[{name:"number",test:function(Q){return typeof Q=="number"}},{name:"string",test:function(Q){return typeof Q=="string"}},{name:"boolean",test:function(Q){return typeof Q=="boolean"}},{name:"Function",test:function(Q){return typeof Q=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(Q){return Q instanceof Date}},{name:"RegExp",test:function(Q){return Q instanceof RegExp}},{name:"Object",test:e},{name:"null",test:function(Q){return Q===null}},{name:"undefined",test:function(Q){return Q===void 0}}],n={name:"any",test:i1e,isAny:!0};let r,i,s=0,o={createCount:0};function a(Q){const de=r.get(Q);if(de)return de;let _e='Unknown type "'+Q+'"';const oe=Q.toLowerCase();let he;for(he of i)if(he.toLowerCase()===oe){_e+='. Did you mean "'+he+'" ?';break}throw new TypeError(_e)}function u(Q){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const _e=de?a(de).index:i.length,oe=[];for(let Ee=0;Ee<Q.length;++Ee){if(!Q[Ee]||typeof Q[Ee].name!="string"||typeof Q[Ee].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Fe=Q[Ee].name;if(r.has(Fe))throw new TypeError('Duplicate type name "'+Fe+'"');oe.push(Fe),r.set(Fe,{name:Fe,test:Q[Ee].test,isAny:Q[Ee].isAny,index:_e+Ee,conversionsTo:[]})}const he=i.slice(_e);i=i.slice(0,_e).concat(oe).concat(he);for(let Ee=_e+oe.length;Ee<i.length;++Ee)r.get(i[Ee]).index=Ee}function l(){r=new Map,i=[],s=0,u([n],!1)}l(),u(t);function c(){let Q;for(Q of i)r.get(Q).conversionsTo=[];s=0}function f(Q){const de=i.filter(_e=>{const oe=r.get(_e);return!oe.isAny&&oe.test(Q)});return de.length?de:["any"]}function d(Q){return Q&&typeof Q=="function"&&"_typedFunctionData"in Q}function h(Q,de,_e){if(!d(Q))throw new TypeError(s1e);const oe=_e&&_e.exact,he=Array.isArray(de)?de.join(","):de,Ee=S(he),Fe=g(Ee);if(!oe||Fe in Q.signatures){const qt=Q._typedFunctionData.signatureMap.get(Fe);if(qt)return qt}const je=Ee.length;let ct;if(oe){ct=[];let qt;for(qt in Q.signatures)ct.push(Q._typedFunctionData.signatureMap.get(qt))}else ct=Q._typedFunctionData.signatures;for(let qt=0;qt<je;++qt){const en=Ee[qt],Yt=[];let un;for(un of ct){const Sn=A(un.params,qt);if(!(!Sn||en.restParam&&!Sn.restParam)){if(!Sn.hasAny){const Bn=w(Sn);if(en.types.some(Ci=>!Bn.has(Ci.name)))continue}Yt.push(un)}}if(ct=Yt,ct.length===0)break}let rt;for(rt of ct)if(rt.params.length<=je)return rt;throw new TypeError("Signature not found (signature: "+(Q.name||"unnamed")+"("+g(Ee,", ")+"))")}function p(Q,de,_e){return h(Q,de,_e).implementation}function m(Q,de){const _e=a(de);if(_e.test(Q))return Q;const oe=_e.conversionsTo;if(oe.length===0)throw new Error("There are no conversions to "+de+" defined.");for(let he=0;he<oe.length;he++)if(a(oe[he].from).test(Q))return oe[he].convert(Q);throw new Error("Cannot convert "+Q+" to "+de)}function g(Q){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return Q.map(_e=>_e.name).join(de)}function y(Q){const de=Q.indexOf("...")===0,oe=(de?Q.length>3?Q.slice(3):"any":Q).split("|").map(je=>a(je.trim()));let he=!1,Ee=de?"...":"";return{types:oe.map(function(je){return he=je.isAny||he,Ee+=je.name+"|",{name:je.name,typeIndex:je.index,test:je.test,isAny:je.isAny,conversion:null,conversionIndex:-1}}),name:Ee.slice(0,-1),hasAny:he,hasConversion:!1,restParam:de}}function b(Q){const de=Q.types.map(Fe=>Fe.name),_e=z(de);let oe=Q.hasAny,he=Q.name;const Ee=_e.map(function(Fe){const je=a(Fe.from);return oe=je.isAny||oe,he+="|"+Fe.from,{name:Fe.from,typeIndex:je.index,test:je.test,isAny:je.isAny,conversion:Fe,conversionIndex:Fe.index}});return{types:Q.types.concat(Ee),name:he,hasAny:oe,hasConversion:Ee.length>0,restParam:Q.restParam}}function w(Q){return Q.typeSet||(Q.typeSet=new Set,Q.types.forEach(de=>Q.typeSet.add(de.name))),Q.typeSet}function S(Q){const de=[];if(typeof Q!="string")throw new TypeError("Signatures must be strings");const _e=Q.trim();if(_e==="")return de;const oe=_e.split(",");for(let he=0;he<oe.length;++he){const Ee=y(oe[he].trim());if(Ee.restParam&&he!==oe.length-1)throw new SyntaxError('Unexpected rest parameter "'+oe[he]+'": only allowed for the last parameter');if(Ee.types.length===0)return null;de.push(Ee)}return de}function E(Q){const de=we(Q);return de?de.restParam:!1}function T(Q){if(!Q||Q.types.length===0)return i1e;if(Q.types.length===1)return a(Q.types[0].name).test;if(Q.types.length===2){const de=a(Q.types[0].name).test,_e=a(Q.types[1].name).test;return function(he){return de(he)||_e(he)}}else{const de=Q.types.map(function(_e){return a(_e.name).test});return function(oe){for(let he=0;he<de.length;he++)if(de[he](oe))return!0;return!1}}}function C(Q){let de,_e,oe;if(E(Q)){de=Se(Q).map(T);const he=de.length,Ee=T(we(Q)),Fe=function(je){for(let ct=he;ct<je.length;ct++)if(!Ee(je[ct]))return!1;return!0};return function(ct){for(let rt=0;rt<de.length;rt++)if(!de[rt](ct[rt]))return!1;return Fe(ct)&&ct.length>=he+1}}else return Q.length===0?function(Ee){return Ee.length===0}:Q.length===1?(_e=T(Q[0]),function(Ee){return _e(Ee[0])&&Ee.length===1}):Q.length===2?(_e=T(Q[0]),oe=T(Q[1]),function(Ee){return _e(Ee[0])&&oe(Ee[1])&&Ee.length===2}):(de=Q.map(T),function(Ee){for(let Fe=0;Fe<de.length;Fe++)if(!de[Fe](Ee[Fe]))return!1;return Ee.length===de.length})}function A(Q,de){return de<Q.length?Q[de]:E(Q)?we(Q):null}function I(Q,de){const _e=A(Q,de);return _e?w(_e):new Set}function k(Q){return Q.conversion===null||Q.conversion===void 0}function N(Q,de){const _e=new Set;return Q.forEach(oe=>{const he=I(oe.params,de);let Ee;for(Ee of he)_e.add(Ee)}),_e.has("any")?["any"]:Array.from(_e)}function F(Q,de,_e){let oe,he;const Ee=Q||"unnamed";let Fe=_e,je;for(je=0;je<de.length;je++){const en=[];if(Fe.forEach(Yt=>{const un=A(Yt.params,je),Sn=T(un);(je<Yt.params.length||E(Yt.params))&&Sn(de[je])&&en.push(Yt)}),en.length===0){if(he=N(Fe,je),he.length>0){const Yt=f(de[je]);return oe=new TypeError("Unexpected type of argument in function "+Ee+" (expected: "+he.join(" or ")+", actual: "+Yt.join(" | ")+", index: "+je+")"),oe.data={category:"wrongType",fn:Ee,index:je,actual:Yt,expected:he},oe}}else Fe=en}const ct=Fe.map(function(en){return E(en.params)?1/0:en.params.length});if(de.length<Math.min.apply(null,ct))return he=N(Fe,je),oe=new TypeError("Too few arguments in function "+Ee+" (expected: "+he.join(" or ")+", index: "+de.length+")"),oe.data={category:"tooFewArgs",fn:Ee,index:de.length,expected:he},oe;const rt=Math.max.apply(null,ct);if(de.length>rt)return oe=new TypeError("Too many arguments in function "+Ee+" (expected: "+rt+", actual: "+de.length+")"),oe.data={category:"tooManyArgs",fn:Ee,index:de.length,expectedLength:rt},oe;const qt=[];for(let en=0;en<de.length;++en)qt.push(f(de[en]).join("|"));return oe=new TypeError('Arguments of type "'+qt.join(", ")+'" do not match any of the defined signatures of function '+Ee+"."),oe.data={category:"mismatch",actual:qt},oe}function M(Q){let de=i.length+1;for(let _e=0;_e<Q.types.length;_e++)k(Q.types[_e])&&(de=Math.min(de,Q.types[_e].typeIndex));return de}function L(Q){let de=s+1;for(let _e=0;_e<Q.types.length;_e++)k(Q.types[_e])||(de=Math.min(de,Q.types[_e].conversionIndex));return de}function j(Q,de){if(Q.hasAny){if(!de.hasAny)return 1}else if(de.hasAny)return-1;if(Q.restParam){if(!de.restParam)return 1}else if(de.restParam)return-1;if(Q.hasConversion){if(!de.hasConversion)return 1}else if(de.hasConversion)return-1;const _e=M(Q)-M(de);if(_e<0)return-1;if(_e>0)return 1;const oe=L(Q)-L(de);return oe<0?-1:oe>0?1:0}function B(Q,de){const _e=Q.params,oe=de.params,he=we(_e),Ee=we(oe),Fe=E(_e),je=E(oe);if(Fe&&he.hasAny){if(!je||!Ee.hasAny)return 1}else if(je&&Ee.hasAny)return-1;let ct=0,rt=0,qt;for(qt of _e)qt.hasAny&&++ct,qt.hasConversion&&++rt;let en=0,Yt=0;for(qt of oe)qt.hasAny&&++en,qt.hasConversion&&++Yt;if(ct!==en)return ct-en;if(Fe&&he.hasConversion){if(!je||!Ee.hasConversion)return 1}else if(je&&Ee.hasConversion)return-1;if(rt!==Yt)return rt-Yt;if(Fe){if(!je)return 1}else if(je)return-1;const un=(_e.length-oe.length)*(Fe?-1:1);if(un!==0)return un;const Sn=[];let Bn=0;for(let gi=0;gi<_e.length;++gi){const jn=j(_e[gi],oe[gi]);Sn.push(jn),Bn+=jn}if(Bn!==0)return Bn;let Ci;for(Ci of Sn)if(Ci!==0)return Ci;return 0}function z(Q){if(Q.length===0)return[];const de=Q.map(a);Q.length>1&&de.sort((he,Ee)=>he.index-Ee.index);let _e=de[0].conversionsTo;if(Q.length===1)return _e;_e=_e.concat([]);const oe=new Set(Q);for(let he=1;he<de.length;++he){let Ee;for(Ee of de[he].conversionsTo)oe.has(Ee.from)||(_e.push(Ee),oe.add(Ee.from))}return _e}function V(Q,de){let _e=de;if(Q.some(he=>he.hasConversion)){const he=E(Q),Ee=Q.map(G);_e=function(){const je=[],ct=he?arguments.length-1:arguments.length;for(let rt=0;rt<ct;rt++)je[rt]=Ee[rt](arguments[rt]);return he&&(je[ct]=arguments[ct].map(Ee[ct])),de.apply(this,je)}}let oe=_e;if(E(Q)){const he=Q.length-1;oe=function(){return _e.apply(this,Ce(arguments,0,he).concat([Ce(arguments,he)]))}}return oe}function G(Q){let de,_e,oe,he;const Ee=[],Fe=[];switch(Q.types.forEach(function(je){je.conversion&&(Ee.push(a(je.conversion.from).test),Fe.push(je.conversion.convert))}),Fe.length){case 0:return function(ct){return ct};case 1:return de=Ee[0],oe=Fe[0],function(ct){return de(ct)?oe(ct):ct};case 2:return de=Ee[0],_e=Ee[1],oe=Fe[0],he=Fe[1],function(ct){return de(ct)?oe(ct):_e(ct)?he(ct):ct};default:return function(ct){for(let rt=0;rt<Fe.length;rt++)if(Ee[rt](ct))return Fe[rt](ct);return ct}}}function $(Q){function de(_e,oe,he){if(oe<_e.length){const Ee=_e[oe];let Fe=[];if(Ee.restParam){const je=Ee.types.filter(k);je.length<Ee.types.length&&Fe.push({types:je,name:"..."+je.map(ct=>ct.name).join("|"),hasAny:je.some(ct=>ct.isAny),hasConversion:!1,restParam:!0}),Fe.push(Ee)}else Fe=Ee.types.map(function(je){return{types:[je],name:je.name,hasAny:je.isAny,hasConversion:je.conversion,restParam:!1}});return ke(Fe,function(je){return de(_e,oe+1,he.concat([je]))})}else return[he]}return de(Q,0,[])}function W(Q,de){const _e=Math.max(Q.length,de.length);for(let je=0;je<_e;je++){const ct=I(Q,je),rt=I(de,je);let qt=!1,en;for(en of rt)if(ct.has(en)){qt=!0;break}if(!qt)return!1}const oe=Q.length,he=de.length,Ee=E(Q),Fe=E(de);return Ee?Fe?oe===he:he>=oe:Fe?oe>=he:oe===he}function K(Q){return Q.map(de=>Re(de)?Ct(de.referToSelf.callback):wt(de)?Ke(de.referTo.references,de.referTo.callback):de)}function q(Q,de,_e){const oe=[];let he;for(he of Q){let Ee=_e[he];if(typeof Ee!="number")throw new TypeError('No definition for referenced signature "'+he+'"');if(Ee=de[Ee],typeof Ee!="function")return!1;oe.push(Ee)}return oe}function Y(Q,de,_e){const oe=K(Q),he=new Array(oe.length).fill(!1);let Ee=!0;for(;Ee;){Ee=!1;let Fe=!0;for(let je=0;je<oe.length;++je){if(he[je])continue;const ct=oe[je];if(Re(ct))oe[je]=ct.referToSelf.callback(_e),oe[je].referToSelf=ct.referToSelf,he[je]=!0,Fe=!1;else if(wt(ct)){const rt=q(ct.referTo.references,oe,de);rt?(oe[je]=ct.referTo.callback.apply(this,rt),oe[je].referTo=ct.referTo,he[je]=!0,Fe=!1):Ee=!0}}if(Fe&&Ee)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return oe}function Z(Q){const de=/\bthis(\(|\.signatures\b)/;Object.keys(Q).forEach(_e=>{const oe=Q[_e];if(de.test(oe.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function ae(Q,de){if(o.createCount++,Object.keys(de).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&Z(de);const _e=[],oe=[],he={},Ee=[];let Fe;for(Fe in de){if(!Object.prototype.hasOwnProperty.call(de,Fe))continue;const ln=S(Fe);if(!ln)continue;_e.forEach(function(yi){if(W(yi,ln))throw new TypeError('Conflicting signatures "'+g(yi)+'" and "'+g(ln)+'".')}),_e.push(ln);const Br=oe.length;oe.push(de[Fe]);const Di=ln.map(b);let xs;for(xs of $(Di)){const yi=g(xs);Ee.push({params:xs,name:yi,fn:Br}),xs.every(Qi=>!Qi.hasConversion)&&(he[yi]=Br)}}Ee.sort(B);const je=Y(oe,he,sr);let ct;for(ct in he)Object.prototype.hasOwnProperty.call(he,ct)&&(he[ct]=je[he[ct]]);const rt=[],qt=new Map;for(ct of Ee)qt.has(ct.name)||(ct.fn=je[ct.fn],rt.push(ct),qt.set(ct.name,ct));const en=rt[0]&&rt[0].params.length<=2&&!E(rt[0].params),Yt=rt[1]&&rt[1].params.length<=2&&!E(rt[1].params),un=rt[2]&&rt[2].params.length<=2&&!E(rt[2].params),Sn=rt[3]&&rt[3].params.length<=2&&!E(rt[3].params),Bn=rt[4]&&rt[4].params.length<=2&&!E(rt[4].params),Ci=rt[5]&&rt[5].params.length<=2&&!E(rt[5].params),gi=en&&Yt&&un&&Sn&&Bn&&Ci;for(let ln=0;ln<rt.length;++ln)rt[ln].test=C(rt[ln].params);const jn=en?T(rt[0].params[0]):ad,Ki=Yt?T(rt[1].params[0]):ad,ti=un?T(rt[2].params[0]):ad,Es=Sn?T(rt[3].params[0]):ad,Jc=Bn?T(rt[4].params[0]):ad,Va=Ci?T(rt[5].params[0]):ad,sl=en?T(rt[0].params[1]):ad,Kr=Yt?T(rt[1].params[1]):ad,Xi=un?T(rt[2].params[1]):ad,Ai=Sn?T(rt[3].params[1]):ad,No=Bn?T(rt[4].params[1]):ad,Go=Ci?T(rt[5].params[1]):ad;for(let ln=0;ln<rt.length;++ln)rt[ln].implementation=V(rt[ln].params,rt[ln].fn);const po=en?rt[0].implementation:eS,ve=Yt?rt[1].implementation:eS,ce=un?rt[2].implementation:eS,xe=Sn?rt[3].implementation:eS,Ve=Bn?rt[4].implementation:eS,ze=Ci?rt[5].implementation:eS,Dt=en?rt[0].params.length:-1,Wt=Yt?rt[1].params.length:-1,bn=un?rt[2].params.length:-1,ir=Sn?rt[3].params.length:-1,gr=Bn?rt[4].params.length:-1,Un=Ci?rt[5].params.length:-1,Dr=gi?6:0,ni=rt.length,dn=rt.map(ln=>ln.test),Ir=rt.map(ln=>ln.implementation),Xr=function(){for(let Br=Dr;Br<ni;Br++)if(dn[Br](arguments))return Ir[Br].apply(this,arguments);return o.onMismatch(Q,arguments,rt)};function sr(ln,Br){return arguments.length===Dt&&jn(ln)&&sl(Br)?po.apply(this,arguments):arguments.length===Wt&&Ki(ln)&&Kr(Br)?ve.apply(this,arguments):arguments.length===bn&&ti(ln)&&Xi(Br)?ce.apply(this,arguments):arguments.length===ir&&Es(ln)&&Ai(Br)?xe.apply(this,arguments):arguments.length===gr&&Jc(ln)&&No(Br)?Ve.apply(this,arguments):arguments.length===Un&&Va(ln)&&Go(Br)?ze.apply(this,arguments):Xr.apply(this,arguments)}try{Object.defineProperty(sr,"name",{value:Q})}catch{}return sr.signatures=he,sr._typedFunctionData={signatures:rt,signatureMap:qt},sr}function be(Q,de,_e){throw F(Q,de,_e)}function Se(Q){return Ce(Q,0,Q.length-1)}function we(Q){return Q[Q.length-1]}function Ce(Q,de,_e){return Array.prototype.slice.call(Q,de,_e)}function Le(Q,de){for(let _e=0;_e<Q.length;_e++)if(de(Q[_e]))return Q[_e]}function ke(Q,de){return Array.prototype.concat.apply([],Q.map(de))}function Ze(){const Q=Se(arguments).map(_e=>g(S(_e))),de=we(arguments);if(typeof de!="function")throw new TypeError("Callback function expected as last argument");return Ke(Q,de)}function Ke(Q,de){return{referTo:{references:Q,callback:de}}}function Ct(Q){if(typeof Q!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:Q}}}function wt(Q){return Q&&typeof Q.referTo=="object"&&Array.isArray(Q.referTo.references)&&typeof Q.referTo.callback=="function"}function Re(Q){return Q&&typeof Q.referToSelf=="object"&&typeof Q.referToSelf.callback=="function"}function He(Q,de){if(!Q)return de;if(de&&de!==Q){const _e=new Error("Function names do not match (expected: "+Q+", actual: "+de+")");throw _e.data={actual:de,expected:Q},_e}return Q}function lt(Q){let de;for(const _e in Q)Object.prototype.hasOwnProperty.call(Q,_e)&&(d(Q[_e])||typeof Q[_e].signature=="string")&&(de=He(de,Q[_e].name));return de}function St(Q,de){let _e;for(_e in de)if(Object.prototype.hasOwnProperty.call(de,_e)){if(_e in Q&&de[_e]!==Q[_e]){const oe=new Error('Signature "'+_e+'" is defined twice');throw oe.data={signature:_e,sourceFunction:de[_e],destFunction:Q[_e]},oe}Q[_e]=de[_e]}}const Vt=o;o=function(Q){const de=typeof Q=="string",_e=de?1:0;let oe=de?Q:"";const he={};for(let Ee=_e;Ee<arguments.length;++Ee){const Fe=arguments[Ee];let je={},ct;if(typeof Fe=="function"?(ct=Fe.name,typeof Fe.signature=="string"?je[Fe.signature]=Fe:d(Fe)&&(je=Fe.signatures)):e(Fe)&&(je=Fe,de||(ct=lt(Fe))),Object.keys(je).length===0){const rt=new TypeError("Argument to 'typed' at index "+Ee+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw rt.data={index:Ee,argument:Fe},rt}de||(oe=He(oe,ct)),St(he,je)}return ae(oe||"",he)},o.create=oLe,o.createCount=Vt.createCount,o.onMismatch=be,o.throwMismatchError=be,o.createError=F,o.clear=l,o.clearConversions=c,o.addTypes=u,o._findType=a,o.referTo=Ze,o.referToSelf=Ct,o.convert=m,o.findSignature=h,o.find=p,o.isTypedFunction=d,o.warnAgainstDeprecatedThis=!0,o.addType=function(Q,de){let _e="any";de!==!1&&r.has("Object")&&(_e="Object"),o.addTypes([Q],_e)};function ht(Q){if(!Q||typeof Q.from!="string"||typeof Q.to!="string"||typeof Q.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(Q.to===Q.from)throw new SyntaxError('Illegal to define conversion from "'+Q.from+'" to itself.')}return o.addConversion=function(Q){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};ht(Q);const _e=a(Q.to),oe=_e.conversionsTo.find(he=>he.from===Q.from);if(oe)if(de&&de.override)o.removeConversion({from:oe.from,to:Q.to,convert:oe.convert});else throw new Error('There is already a conversion from "'+Q.from+'" to "'+_e.name+'"');_e.conversionsTo.push({from:Q.from,convert:Q.convert,index:s++})},o.addConversions=function(Q,de){Q.forEach(_e=>o.addConversion(_e,de))},o.removeConversion=function(Q){ht(Q);const de=a(Q.to),_e=Le(de.conversionsTo,he=>he.from===Q.from);if(!_e)throw new Error("Attempt to remove nonexistent conversion from "+Q.from+" to "+Q.to);if(_e.convert!==Q.convert)throw new Error("Conversion to remove does not match existing conversion");const oe=de.conversionsTo.indexOf(_e);de.conversionsTo.splice(oe,1)},o.resolve=function(Q,de){if(!d(Q))throw new TypeError(s1e);const _e=Q._typedFunctionData.signatures;for(let oe=0;oe<_e.length;++oe)if(_e[oe].test(de))return _e[oe];return null},o}const b4=oLe();function ei(e,t,n,r){function i(s){var o=A5t(s,t.map(N5t));return k5t(e,t,s),n(o)}return i.isFactory=!0,i.fn=e,i.dependencies=t.slice().sort(),r&&(i.meta=r),i}function k5t(e,t,n){var r=t.filter(s=>!R5t(s)).every(s=>n[s]!==void 0);if(!r){var i=t.filter(s=>n[s]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(i.map(s=>'"'.concat(s,'"')).join(", "),"."))}}function R5t(e){return e&&e[0]==="?"}function N5t(e){return e&&e[0]==="?"?e.slice(1):e}function Vs(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}function hH(e,t,n){var r={2:"0b",8:"0o",16:"0x"},i=r[t],s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Vs(n))throw new Error("size must be an integer");if(e>2**(n-1)-1||e<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!Vs(e))throw new Error("Value must be an integer");e<0&&(e=e+2**n),s="i".concat(n)}var o="";return e<0&&(e=-e,o="-"),"".concat(o).concat(i).concat(e.toString(t)).concat(s)}function cK(e,t){if(typeof t=="function")return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var{notation:n,precision:r,wordSize:i}=aLe(t);switch(n){case"fixed":return O5t(e,r);case"exponential":return uLe(e,r);case"engineering":return P5t(e,r);case"bin":return hH(e,2,i);case"oct":return hH(e,8,i);case"hex":return hH(e,16,i);case"auto":return M5t(e,r,t).replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],o=arguments[4];return s!=="."?s+o:o});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function aLe(e){var t="auto",n,r;if(e!==void 0)if(ds(e))n=e;else if(zo(e))n=e.toNumber();else if(Kre(e))e.precision!==void 0&&(n=o1e(e.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),e.wordSize!==void 0&&(r=o1e(e.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),e.notation&&(t=e.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:t,precision:n,wordSize:r}}function l9(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],r=t[2],i=parseFloat(t[4]||"0"),s=r.indexOf(".");i+=s!==-1?s-1:r.length-1;var o=r.replace(".","").replace(/^0*/,function(a){return i-=a.length,""}).replace(/0*$/,"").split("").map(function(a){return parseInt(a)});return o.length===0&&(o.push(0),i++),{sign:n,coefficients:o,exponent:i}}function P5t(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=l9(e),r=c9(n,t),i=r.exponent,s=r.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(ds(t))for(;t>s.length||i-o+1>s.length;)s.push(0);else for(var a=Math.abs(i-o)-(s.length-1),u=0;u<a;u++)s.push(0);for(var l=Math.abs(i-o),c=1;l>0;)c++,l--;var f=s.slice(c).join(""),d=ds(t)&&f.length||f.match(/[1-9]/)?"."+f:"",h=s.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+o.toString();return r.sign+h}function O5t(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=l9(e),r=typeof t=="number"?c9(n,n.exponent+1+t):n,i=r.coefficients,s=r.exponent+1,o=s+(t||0);return i.length<o&&(i=i.concat(NT(o-i.length))),s<0&&(i=NT(-s+1).concat(i),s=1),s<i.length&&i.splice(s,0,s===0?"0.":"."),r.sign+i.join("")}function uLe(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=l9(e),r=t?c9(n,t):n,i=r.coefficients,s=r.exponent;i.length<t&&(i=i.concat(NT(t-i.length)));var o=i.shift();return r.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s}function M5t(e,t,n){if(isNaN(e)||!isFinite(e))return String(e);var r=a1e(n==null?void 0:n.lowerExp,-3),i=a1e(n==null?void 0:n.upperExp,5),s=l9(e),o=t?c9(s,t):s;if(o.exponent<r||o.exponent>=i)return uLe(e,t);var a=o.coefficients,u=o.exponent;a.length<t&&(a=a.concat(NT(t-a.length))),a=a.concat(NT(u-a.length+1+(a.length<t?t-a.length:0))),a=NT(-u).concat(a);var l=u>0?u:0;return l<a.length-1&&a.splice(l+1,0,"."),o.sign+a.join("")}function c9(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},r=n.coefficients;t<=0;)r.unshift(0),n.exponent++,t++;if(r.length>t){var i=r.splice(t,r.length-t);if(i[0]>=5){var s=t-1;for(r[s]++;r[s]===10;)r.pop(),s===0&&(r.unshift(0),n.exponent++,s++),s--,r[s]++}}return n}function NT(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}function $5t(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function w4(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(e)||isNaN(t)?!1:!isFinite(e)||!isFinite(t)?e===t:e===t?!0:Math.abs(e-t)<=Math.max(n*Math.max(Math.abs(e),Math.abs(t)),r)}function F5t(e,t){var n=e>0?!0:e<0?!1:1/e===1/0,r=t>0?!0:t<0?!1:1/t===1/0;return n^r?-e:e}function o1e(e,t){if(ds(e))return e;if(zo(e))return e.toNumber();t()}function a1e(e,t){return ds(e)?e:zo(e)?e.toNumber():t}var lLe=function(){return lLe=b4.create,b4},L5t=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],B5t=ei("typed",L5t,function(t){var{BigNumber:n,Complex:r,DenseMatrix:i,Fraction:s}=t,o=lLe();return o.clear(),o.addTypes([{name:"number",test:ds},{name:"Complex",test:rLe},{name:"BigNumber",test:zo},{name:"bigint",test:X4t},{name:"Fraction",test:iLe},{name:"Unit",test:sLe},{name:"identifier",test:a=>/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(a)},{name:"string",test:i0},{name:"Chain",test:T5t},{name:"Array",test:Fo},{name:"Matrix",test:aa},{name:"DenseMatrix",test:Q4t},{name:"SparseMatrix",test:J4t},{name:"Range",test:Z4t},{name:"Index",test:Yre},{name:"boolean",test:e5t},{name:"ResultSet",test:t5t},{name:"Help",test:n5t},{name:"function",test:r5t},{name:"Date",test:i5t},{name:"RegExp",test:s5t},{name:"null",test:a5t},{name:"undefined",test:u5t},{name:"AccessorNode",test:l5t},{name:"ArrayNode",test:c5t},{name:"AssignmentNode",test:f5t},{name:"BlockNode",test:d5t},{name:"ConditionalNode",test:h5t},{name:"ConstantNode",test:p5t},{name:"FunctionNode",test:g5t},{name:"FunctionAssignmentNode",test:m5t},{name:"IndexNode",test:y5t},{name:"Node",test:v5t},{name:"ObjectNode",test:b5t},{name:"OperatorNode",test:w5t},{name:"ParenthesisNode",test:_5t},{name:"RangeNode",test:E5t},{name:"RelationalNode",test:x5t},{name:"SymbolNode",test:S5t},{name:"Map",test:o5t},{name:"Object",test:Kre}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(u){if(n||PM(u),$5t(u)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+u+"). Use function bignumber(x) to convert to BigNumber.");return new n(u)}},{from:"number",to:"Complex",convert:function(u){return r||OM(u),new r(u,0)}},{from:"BigNumber",to:"Complex",convert:function(u){return r||OM(u),new r(u.toNumber(),0)}},{from:"bigint",to:"number",convert:function(u){if(u>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+u+")");return Number(u)}},{from:"bigint",to:"BigNumber",convert:function(u){return n||PM(u),new n(u.toString())}},{from:"bigint",to:"Fraction",convert:function(u){return s||MM(u),new s(u)}},{from:"Fraction",to:"BigNumber",convert:function(u){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(u){return r||OM(u),new r(u.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(u){s||MM(u);var l=new s(u);if(l.valueOf()!==u)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+u+"). Use function fraction(x) to convert to Fraction.");return l}},{from:"string",to:"number",convert:function(u){var l=Number(u);if(isNaN(l))throw new Error('Cannot convert "'+u+'" to a number');return l}},{from:"string",to:"BigNumber",convert:function(u){n||PM(u);try{return new n(u)}catch{throw new Error('Cannot convert "'+u+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(u){try{return BigInt(u)}catch{throw new Error('Cannot convert "'+u+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(u){s||MM(u);try{return new s(u)}catch{throw new Error('Cannot convert "'+u+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(u){r||OM(u);try{return new r(u)}catch{throw new Error('Cannot convert "'+u+'" to Complex')}}},{from:"boolean",to:"number",convert:function(u){return+u}},{from:"boolean",to:"BigNumber",convert:function(u){return n||PM(u),new n(+u)}},{from:"boolean",to:"bigint",convert:function(u){return BigInt(+u)}},{from:"boolean",to:"Fraction",convert:function(u){return s||MM(u),new s(+u)}},{from:"boolean",to:"string",convert:function(u){return String(u)}},{from:"Array",to:"Matrix",convert:function(u){return i||j5t(),new i(u)}},{from:"Matrix",to:"Array",convert:function(u){return u.valueOf()}}]),o.onMismatch=(a,u,l)=>{var c=o.createError(a,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&y4(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},o.onMismatch=(a,u,l)=>{var c=o.createError(a,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&y4(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},o});function PM(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function OM(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function j5t(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function MM(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var ZS=9e15,$b=1e9,fK="0123456789abcdef",_4="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",E4="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",dK={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-ZS,maxE:ZS,crypto:!1},cLe,E0,Kn=!0,f9="[DecimalError] ",X1=f9+"Invalid argument: ",fLe=f9+"Precision limit exceeded",dLe=f9+"crypto unavailable",hLe="[object Decimal]",Ju=Math.floor,na=Math.pow,U5t=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,z5t=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,V5t=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,pLe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,np=1e7,An=7,H5t=9007199254740991,q5t=_4.length-1,hK=E4.length-1,mt={toStringTag:hLe};mt.absoluteValue=mt.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),yn(e)};mt.ceil=function(){return yn(new this.constructor(this),this.e+1,2)};mt.clampedTo=mt.clamp=function(e,t){var n,r=this,i=r.constructor;if(e=new i(e),t=new i(t),!e.s||!t.s)return new i(NaN);if(e.gt(t))throw Error(X1+t);return n=r.cmp(e),n<0?e:r.cmp(t)>0?t:new i(r)};mt.comparedTo=mt.cmp=function(e){var t,n,r,i,s=this,o=s.d,a=(e=new s.constructor(e)).d,u=s.s,l=e.s;if(!o||!a)return!u||!l?NaN:u!==l?u:o===a?0:!o^u<0?1:-1;if(!o[0]||!a[0])return o[0]?u:a[0]?-l:0;if(u!==l)return u;if(s.e!==e.e)return s.e>e.e^u<0?1:-1;for(r=o.length,i=a.length,t=0,n=r<i?r:i;t<n;++t)if(o[t]!==a[t])return o[t]>a[t]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1};mt.cosine=mt.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+An,r.rounding=1,n=W5t(r,bLe(r,n)),r.precision=e,r.rounding=t,yn(E0==2||E0==3?n.neg():n,e,t,!0)):new r(1):new r(NaN)};mt.cubeRoot=mt.cbrt=function(){var e,t,n,r,i,s,o,a,u,l,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(Kn=!1,s=c.s*na(c.s*c,1/3),!s||Math.abs(s)==1/0?(n=iu(c.d),e=c.e,(s=(e-n.length+1)%3)&&(n+=s==1||s==-2?"0":"00"),s=na(n,1/3),e=Ju((e+1)/3)-(e%3==(e<0?-1:2)),s==1/0?n="5e"+e:(n=s.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),r=new f(n),r.s=c.s):r=new f(s.toString()),o=(e=f.precision)+3;;)if(a=r,u=a.times(a).times(a),l=u.plus(c),r=ts(l.plus(c).times(a),l.plus(u),o+2,1),iu(a.d).slice(0,o)===(n=iu(r.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!i&&n=="4999"){if(!i&&(yn(a,e+1,0),a.times(a).times(a).eq(c))){r=a;break}o+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(yn(r,e+1,1),t=!r.times(r).times(r).eq(c));break}return Kn=!0,yn(r,e,f.rounding,t)};mt.decimalPlaces=mt.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-Ju(this.e/An))*An,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};mt.dividedBy=mt.div=function(e){return ts(this,new this.constructor(e))};mt.dividedToIntegerBy=mt.divToInt=function(e){var t=this,n=t.constructor;return yn(ts(t,new n(e),0,1,1),n.precision,n.rounding)};mt.equals=mt.eq=function(e){return this.cmp(e)===0};mt.floor=function(){return yn(new this.constructor(this),this.e+1,3)};mt.greaterThan=mt.gt=function(e){return this.cmp(e)>0};mt.greaterThanOrEqualTo=mt.gte=function(e){var t=this.cmp(e);return t==1||t===0};mt.hyperbolicCosine=mt.cosh=function(){var e,t,n,r,i,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;n=o.precision,r=o.rounding,o.precision=n+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<32?(e=Math.ceil(i/3),t=(1/h9(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),s=jC(o,1,s.times(t),new o(1),!0);for(var u,l=e,c=new o(8);l--;)u=s.times(s),s=a.minus(u.times(c.minus(u.times(c))));return yn(s,o.precision=n,o.rounding=r,!0)};mt.hyperbolicSine=mt.sinh=function(){var e,t,n,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(t=s.precision,n=s.rounding,s.precision=t+Math.max(i.e,i.sd())+4,s.rounding=1,r=i.d.length,r<3)i=jC(s,2,i,i,!0);else{e=1.4*Math.sqrt(r),e=e>16?16:e|0,i=i.times(1/h9(5,e)),i=jC(s,2,i,i,!0);for(var o,a=new s(5),u=new s(16),l=new s(20);e--;)o=i.times(i),i=i.times(a.plus(o.times(u.times(o).plus(l))))}return s.precision=t,s.rounding=n,yn(i,t,n,!0)};mt.hyperbolicTangent=mt.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,ts(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)};mt.inverseCosine=mt.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,s=n.rounding;return r!==-1?r===0?t.isNeg()?Wh(n,i,s):new n(0):new n(NaN):t.isZero()?Wh(n,i+4,s).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=Wh(n,i+4,s).times(.5),n.precision=i,n.rounding=s,e.minus(t))};mt.inverseHyperbolicCosine=mt.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,Kn=!1,n=n.times(n).minus(1).sqrt().plus(n),Kn=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)};mt.inverseHyperbolicSine=mt.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,Kn=!1,n=n.times(n).plus(1).sqrt().plus(n),Kn=!0,r.precision=e,r.rounding=t,n.ln())};mt.inverseHyperbolicTangent=mt.atanh=function(){var e,t,n,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=s.precision,t=s.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?yn(new s(i),e,t,!0):(s.precision=n=r-i.e,i=ts(i.plus(1),new s(1).minus(i),n+e,1),s.precision=e+4,s.rounding=1,i=i.ln(),s.precision=e,s.rounding=t,i.times(.5))):new s(NaN)};mt.inverseSine=mt.asin=function(){var e,t,n,r,i=this,s=i.constructor;return i.isZero()?new s(i):(t=i.abs().cmp(1),n=s.precision,r=s.rounding,t!==-1?t===0?(e=Wh(s,n+4,r).times(.5),e.s=i.s,e):new s(NaN):(s.precision=n+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,i.times(2)))};mt.inverseTangent=mt.atan=function(){var e,t,n,r,i,s,o,a,u,l=this,c=l.constructor,f=c.precision,d=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&f+4<=hK)return o=Wh(c,f+4,d).times(.25),o.s=l.s,o}else{if(!l.s)return new c(NaN);if(f+4<=hK)return o=Wh(c,f+4,d).times(.5),o.s=l.s,o}for(c.precision=a=f+10,c.rounding=1,n=Math.min(28,a/An+2|0),e=n;e;--e)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(Kn=!1,t=Math.ceil(a/An),r=1,u=l.times(l),o=new c(l),i=l;e!==-1;)if(i=i.times(u),s=o.minus(i.div(r+=2)),i=i.times(u),o=s.plus(i.div(r+=2)),o.d[t]!==void 0)for(e=t;o.d[e]===s.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),Kn=!0,yn(o,c.precision=f,c.rounding=d,!0)};mt.isFinite=function(){return!!this.d};mt.isInteger=mt.isInt=function(){return!!this.d&&Ju(this.e/An)>this.d.length-2};mt.isNaN=function(){return!this.s};mt.isNegative=mt.isNeg=function(){return this.s<0};mt.isPositive=mt.isPos=function(){return this.s>0};mt.isZero=function(){return!!this.d&&this.d[0]===0};mt.lessThan=mt.lt=function(e){return this.cmp(e)<0};mt.lessThanOrEqualTo=mt.lte=function(e){return this.cmp(e)<1};mt.logarithm=mt.log=function(e){var t,n,r,i,s,o,a,u,l=this,c=l.constructor,f=c.precision,d=c.rounding,h=5;if(e==null)e=new c(10),t=!0;else{if(e=new c(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new c(n&&!n[0]?-1/0:l.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)s=!0;else{for(i=n[0];i%10===0;)i/=10;s=i!==1}if(Kn=!1,a=f+h,o=Vv(l,a),r=t?x4(c,a+10):Vv(e,a),u=ts(o,r,a,1),sN(u.d,i=f,d))do if(a+=10,o=Vv(l,a),r=t?x4(c,a+10):Vv(e,a),u=ts(o,r,a,1),!s){+iu(u.d).slice(i+1,i+15)+1==1e14&&(u=yn(u,f+1,0));break}while(sN(u.d,i+=10,d));return Kn=!0,yn(u,f,d)};mt.minus=mt.sub=function(e){var t,n,r,i,s,o,a,u,l,c,f,d,h=this,p=h.constructor;if(e=new p(e),!h.d||!e.d)return!h.s||!e.s?e=new p(NaN):h.d?e.s=-e.s:e=new p(e.d||h.s!==e.s?h:NaN),e;if(h.s!=e.s)return e.s=-e.s,h.plus(e);if(l=h.d,d=e.d,a=p.precision,u=p.rounding,!l[0]||!d[0]){if(d[0])e.s=-e.s;else if(l[0])e=new p(h);else return new p(u===3?-0:0);return Kn?yn(e,a,u):e}if(n=Ju(e.e/An),c=Ju(h.e/An),l=l.slice(),s=c-n,s){for(f=s<0,f?(t=l,s=-s,o=d.length):(t=d,n=c,o=l.length),r=Math.max(Math.ceil(a/An),o)+2,s>r&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for(r=l.length,o=d.length,f=r<o,f&&(o=r),r=0;r<o;r++)if(l[r]!=d[r]){f=l[r]<d[r];break}s=0}for(f&&(t=l,l=d,d=t,e.s=-e.s),o=l.length,r=d.length-o;r>0;--r)l[o++]=0;for(r=d.length;r>s;){if(l[--r]<d[r]){for(i=r;i&&l[--i]===0;)l[i]=np-1;--l[i],l[r]+=np}l[r]-=d[r]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(e.d=l,e.e=d9(l,n),Kn?yn(e,a,u):e):new p(u===3?-0:0)};mt.modulo=mt.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?yn(new r(n),r.precision,r.rounding):(Kn=!1,r.modulo==9?(t=ts(n,e.abs(),0,3,1),t.s*=e.s):t=ts(n,e,0,r.modulo,1),t=t.times(e),Kn=!0,n.minus(t))};mt.naturalExponential=mt.exp=function(){return pK(this)};mt.naturalLogarithm=mt.ln=function(){return Vv(this)};mt.negated=mt.neg=function(){var e=new this.constructor(this);return e.s=-e.s,yn(e)};mt.plus=mt.add=function(e){var t,n,r,i,s,o,a,u,l,c,f=this,d=f.constructor;if(e=new d(e),!f.d||!e.d)return!f.s||!e.s?e=new d(NaN):f.d||(e=new d(e.d||f.s===e.s?f:NaN)),e;if(f.s!=e.s)return e.s=-e.s,f.minus(e);if(l=f.d,c=e.d,a=d.precision,u=d.rounding,!l[0]||!c[0])return c[0]||(e=new d(f)),Kn?yn(e,a,u):e;if(s=Ju(f.e/An),r=Ju(e.e/An),l=l.slice(),i=s-r,i){for(i<0?(n=l,i=-i,o=c.length):(n=c,r=s,o=l.length),s=Math.ceil(a/An),o=s>o?s+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=l.length,i=c.length,o-i<0&&(i=o,n=c,c=l,l=n),t=0;i;)t=(l[--i]=l[i]+c[i]+t)/np|0,l[i]%=np;for(t&&(l.unshift(t),++r),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=d9(l,r),Kn?yn(e,a,u):e};mt.precision=mt.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(X1+e);return n.d?(t=mLe(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};mt.round=function(){var e=this,t=e.constructor;return yn(new t(e),e.e+1,t.rounding)};mt.sine=mt.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+An,r.rounding=1,n=Y5t(r,bLe(r,n)),r.precision=e,r.rounding=t,yn(E0>2?n.neg():n,e,t,!0)):new r(NaN)};mt.squareRoot=mt.sqrt=function(){var e,t,n,r,i,s,o=this,a=o.d,u=o.e,l=o.s,c=o.constructor;if(l!==1||!a||!a[0])return new c(!l||l<0&&(!a||a[0])?NaN:a?o:1/0);for(Kn=!1,l=Math.sqrt(+o),l==0||l==1/0?(t=iu(a),(t.length+u)%2==0&&(t+="0"),l=Math.sqrt(t),u=Ju((u+1)/2)-(u<0||u%2),l==1/0?t="5e"+u:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+u),r=new c(t)):r=new c(l.toString()),n=(u=c.precision)+3;;)if(s=r,r=s.plus(ts(o,s,n+2,1)).times(.5),iu(s.d).slice(0,n)===(t=iu(r.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!i&&t=="4999"){if(!i&&(yn(s,u+1,0),s.times(s).eq(o))){r=s;break}n+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(yn(r,u+1,1),e=!r.times(r).eq(o));break}return Kn=!0,yn(r,u,c.rounding,e)};mt.tangent=mt.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,n=n.sin(),n.s=1,n=ts(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,yn(E0==2||E0==4?n.neg():n,e,t,!0)):new r(NaN)};mt.times=mt.mul=function(e){var t,n,r,i,s,o,a,u,l,c=this,f=c.constructor,d=c.d,h=(e=new f(e)).d;if(e.s*=c.s,!d||!d[0]||!h||!h[0])return new f(!e.s||d&&!d[0]&&!h||h&&!h[0]&&!d?NaN:!d||!h?e.s/0:e.s*0);for(n=Ju(c.e/An)+Ju(e.e/An),u=d.length,l=h.length,u<l&&(s=d,d=h,h=s,o=u,u=l,l=o),s=[],o=u+l,r=o;r--;)s.push(0);for(r=l;--r>=0;){for(t=0,i=u+r;i>r;)a=s[i]+h[r]*d[i-r-1]+t,s[i--]=a%np|0,t=a/np|0;s[i]=(s[i]+t)%np|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=d9(s,n),Kn?yn(e,f.precision,f.rounding):e};mt.toBinary=function(e,t){return Xre(this,2,e,t)};mt.toDecimalPlaces=mt.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Vc(e,0,$b),t===void 0?t=r.rounding:Vc(t,0,8),yn(n,e+n.e+1,t))};mt.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Xm(r,!0):(Vc(e,0,$b),t===void 0?t=i.rounding:Vc(t,0,8),r=yn(new i(r),e+1,t),n=Xm(r,!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};mt.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?n=Xm(i):(Vc(e,0,$b),t===void 0?t=s.rounding:Vc(t,0,8),r=yn(new s(i),e+i.e+1,t),n=Xm(r,!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};mt.toFraction=function(e){var t,n,r,i,s,o,a,u,l,c,f,d,h=this,p=h.d,m=h.constructor;if(!p)return new m(h);if(l=n=new m(1),r=u=new m(0),t=new m(r),s=t.e=mLe(p)-h.e-1,o=s%An,t.d[0]=na(10,o<0?An+o:o),e==null)e=s>0?t:l;else{if(a=new m(e),!a.isInt()||a.lt(l))throw Error(X1+a);e=a.gt(t)?s>0?t:l:a}for(Kn=!1,a=new m(iu(p)),c=m.precision,m.precision=s=p.length*An*2;f=ts(a,t,0,1,1),i=n.plus(f.times(r)),i.cmp(e)!=1;)n=r,r=i,i=l,l=u.plus(f.times(i)),u=i,i=t,t=a.minus(f.times(i)),a=i;return i=ts(e.minus(n),r,0,1,1),u=u.plus(i.times(l)),n=n.plus(i.times(r)),u.s=l.s=h.s,d=ts(l,r,s,1).minus(h).abs().cmp(ts(u,n,s,1).minus(h).abs())<1?[l,r]:[u,n],m.precision=c,Kn=!0,d};mt.toHexadecimal=mt.toHex=function(e,t){return Xre(this,16,e,t)};mt.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),e==null){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),t===void 0?t=r.rounding:Vc(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(Kn=!1,n=ts(n,e,0,t,1).times(e),Kn=!0,yn(n)):(e.s=n.s,n=e),n};mt.toNumber=function(){return+this};mt.toOctal=function(e,t){return Xre(this,8,e,t)};mt.toPower=mt.pow=function(e){var t,n,r,i,s,o,a=this,u=a.constructor,l=+(e=new u(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new u(na(+a,l));if(a=new u(a),a.eq(1))return a;if(r=u.precision,s=u.rounding,e.eq(1))return yn(a,r,s);if(t=Ju(e.e/An),t>=e.d.length-1&&(n=l<0?-l:l)<=H5t)return i=gLe(u,a,n,r),e.s<0?new u(1).div(i):yn(i,r,s);if(o=a.s,o<0){if(t<e.d.length-1)return new u(NaN);if(e.d[t]&1||(o=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=o,a}return n=na(+a,l),t=n==0||!isFinite(n)?Ju(l*(Math.log("0."+iu(a.d))/Math.LN10+a.e+1)):new u(n+"").e,t>u.maxE+1||t<u.minE-1?new u(t>0?o/0:0):(Kn=!1,u.rounding=a.s=1,n=Math.min(12,(t+"").length),i=pK(e.times(Vv(a,r+n)),r),i.d&&(i=yn(i,r+5,1),sN(i.d,r,s)&&(t=r+10,i=yn(pK(e.times(Vv(a,t+n)),t),t+5,1),+iu(i.d).slice(r+1,r+15)+1==1e14&&(i=yn(i,r+1,0)))),i.s=o,Kn=!0,u.rounding=s,yn(i,r,s))};mt.toPrecision=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=Xm(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(Vc(e,1,$b),t===void 0?t=i.rounding:Vc(t,0,8),r=yn(new i(r),e,t),n=Xm(r,e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n};mt.toSignificantDigits=mt.toSD=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Vc(e,1,$b),t===void 0?t=r.rounding:Vc(t,0,8)),yn(new r(n),e,t)};mt.toString=function(){var e=this,t=e.constructor,n=Xm(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};mt.truncated=mt.trunc=function(){return yn(new this.constructor(this),this.e+1,1)};mt.valueOf=mt.toJSON=function(){var e=this,t=e.constructor,n=Xm(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function iu(e){var t,n,r,i=e.length-1,s="",o=e[0];if(i>0){for(s+=o,t=1;t<i;t++)r=e[t]+"",n=An-r.length,n&&(s+=xv(n)),s+=r;o=e[t],r=o+"",n=An-r.length,n&&(s+=xv(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function Vc(e,t,n){if(e!==~~e||e<t||e>n)throw Error(X1+e)}function sN(e,t,n,r){var i,s,o,a;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=An,i=0):(i=Math.ceil((t+1)/An),t%=An),s=na(10,An-t),a=e[i]%s|0,r==null?t<3?(t==0?a=a/100|0:t==1&&(a=a/10|0),o=n<4&&a==99999||n>3&&a==49999||a==5e4||a==0):o=(n<4&&a+1==s||n>3&&a+1==s/2)&&(e[i+1]/s/100|0)==na(10,t-2)-1||(a==s/2||a==0)&&(e[i+1]/s/100|0)==0:t<4?(t==0?a=a/1e3|0:t==1?a=a/100|0:t==2&&(a=a/10|0),o=(r||n<4)&&a==9999||!r&&n>3&&a==4999):o=((r||n<4)&&a+1==s||!r&&n>3&&a+1==s/2)&&(e[i+1]/s/1e3|0)==na(10,t-3)-1,o}function fF(e,t,n){for(var r,i=[0],s,o=0,a=e.length;o<a;){for(s=i.length;s--;)i[s]*=t;for(i[0]+=fK.indexOf(e.charAt(o++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function W5t(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?(n=Math.ceil(r/3),i=(1/h9(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),e.precision+=n,t=jC(e,1,t.times(i),new e(1));for(var s=n;s--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}var ts=function(){function e(r,i,s){var o,a=0,u=r.length;for(r=r.slice();u--;)o=r[u]*i+a,r[u]=o%s|0,a=o/s|0;return a&&r.unshift(a),r}function t(r,i,s,o){var a,u;if(s!=o)u=s>o?1:-1;else for(a=u=0;a<s;a++)if(r[a]!=i[a]){u=r[a]>i[a]?1:-1;break}return u}function n(r,i,s,o){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*o+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o,a,u){var l,c,f,d,h,p,m,g,y,b,w,S,E,T,C,A,I,k,N,F,M=r.constructor,L=r.s==i.s?1:-1,j=r.d,B=i.d;if(!j||!j[0]||!B||!B[0])return new M(!r.s||!i.s||(j?B&&j[0]==B[0]:!B)?NaN:j&&j[0]==0||!B?L*0:L/0);for(u?(h=1,c=r.e-i.e):(u=np,h=An,c=Ju(r.e/h)-Ju(i.e/h)),N=B.length,I=j.length,y=new M(L),b=y.d=[],f=0;B[f]==(j[f]||0);f++);if(B[f]>(j[f]||0)&&c--,s==null?(T=s=M.precision,o=M.rounding):a?T=s+(r.e-i.e)+1:T=s,T<0)b.push(1),p=!0;else{if(T=T/h+2|0,f=0,N==1){for(d=0,B=B[0],T++;(f<I||d)&&T--;f++)C=d*u+(j[f]||0),b[f]=C/B|0,d=C%B|0;p=d||f<I}else{for(d=u/(B[0]+1)|0,d>1&&(B=e(B,d,u),j=e(j,d,u),N=B.length,I=j.length),A=N,w=j.slice(0,N),S=w.length;S<N;)w[S++]=0;F=B.slice(),F.unshift(0),k=B[0],B[1]>=u/2&&++k;do d=0,l=t(B,w,N,S),l<0?(E=w[0],N!=S&&(E=E*u+(w[1]||0)),d=E/k|0,d>1?(d>=u&&(d=u-1),m=e(B,d,u),g=m.length,S=w.length,l=t(m,w,g,S),l==1&&(d--,n(m,N<g?F:B,g,u))):(d==0&&(l=d=1),m=B.slice()),g=m.length,g<S&&m.unshift(0),n(w,m,S,u),l==-1&&(S=w.length,l=t(B,w,N,S),l<1&&(d++,n(w,N<S?F:B,S,u))),S=w.length):l===0&&(d++,w=[0]),b[f++]=d,l&&w[0]?w[S++]=j[A]||0:(w=[j[A]],S=1);while((A++<I||w[0]!==void 0)&&T--);p=w[0]!==void 0}b[0]||b.shift()}if(h==1)y.e=c,cLe=p;else{for(f=1,d=b[0];d>=10;d/=10)f++;y.e=f+c*h-1,yn(y,a?s+y.e+1:s,o,p)}return y}}();function yn(e,t,n,r){var i,s,o,a,u,l,c,f,d,h=e.constructor;e:if(t!=null){if(f=e.d,!f)return e;for(i=1,a=f[0];a>=10;a/=10)i++;if(s=t-i,s<0)s+=An,o=t,c=f[d=0],u=c/na(10,i-o-1)%10|0;else if(d=Math.ceil((s+1)/An),a=f.length,d>=a)if(r){for(;a++<=d;)f.push(0);c=u=0,i=1,s%=An,o=s-An+1}else break e;else{for(c=a=f[d],i=1;a>=10;a/=10)i++;s%=An,o=s-An+i,u=o<0?0:c/na(10,i-o-1)%10|0}if(r=r||t<0||f[d+1]!==void 0||(o<0?c:c%na(10,i-o-1)),l=n<4?(u||r)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||r||n==6&&(s>0?o>0?c/na(10,i-o):0:f[d-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,l?(t-=e.e+1,f[0]=na(10,(An-t%An)%An),e.e=-t||0):f[0]=e.e=0,e;if(s==0?(f.length=d,a=1,d--):(f.length=d+1,a=na(10,An-s),f[d]=o>0?(c/na(10,i-o)%na(10,o)|0)*a:0),l)for(;;)if(d==0){for(s=1,o=f[0];o>=10;o/=10)s++;for(o=f[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(e.e++,f[0]==np&&(f[0]=1));break}else{if(f[d]+=a,f[d]!=np)break;f[d--]=0,a=1}for(s=f.length;f[--s]===0;)f.pop()}return Kn&&(e.e>h.maxE?(e.d=null,e.e=NaN):e.e<h.minE&&(e.e=0,e.d=[0])),e}function Xm(e,t,n){if(!e.isFinite())return vLe(e);var r,i=e.e,s=iu(e.d),o=s.length;return t?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+xv(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):i<0?(s="0."+xv(-i-1)+s,n&&(r=n-o)>0&&(s+=xv(r))):i>=o?(s+=xv(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+xv(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=xv(r))),s}function d9(e,t){var n=e[0];for(t*=An;n>=10;n/=10)t++;return t}function x4(e,t,n){if(t>q5t)throw Kn=!0,n&&(e.precision=n),Error(fLe);return yn(new e(_4),t,1,!0)}function Wh(e,t,n){if(t>hK)throw Error(fLe);return yn(new e(E4),t,n,!0)}function mLe(e){var t=e.length-1,n=t*An+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function xv(e){for(var t="";e--;)t+="0";return t}function gLe(e,t,n,r){var i,s=new e(1),o=Math.ceil(r/An+4);for(Kn=!1;;){if(n%2&&(s=s.times(t),l1e(s.d,o)&&(i=!0)),n=Ju(n/2),n===0){n=s.d.length-1,i&&s.d[n]===0&&++s.d[n];break}t=t.times(t),l1e(t.d,o)}return Kn=!0,s}function u1e(e){return e.d[e.d.length-1]&1}function yLe(e,t,n){for(var r,i=new e(t[0]),s=0;++s<t.length;)if(r=new e(t[s]),r.s)i[n](r)&&(i=r);else{i=r;break}return i}function pK(e,t){var n,r,i,s,o,a,u,l=0,c=0,f=0,d=e.constructor,h=d.rounding,p=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(Kn=!1,u=p):u=t,a=new d(.03125);e.e>-2;)e=e.times(a),f+=5;for(r=Math.log(na(2,f))/Math.LN10*2+5|0,u+=r,n=s=o=new d(1),d.precision=u;;){if(s=yn(s.times(e),u,1),n=n.times(++c),a=o.plus(ts(s,n,u,1)),iu(a.d).slice(0,u)===iu(o.d).slice(0,u)){for(i=f;i--;)o=yn(o.times(o),u,1);if(t==null)if(l<3&&sN(o.d,u-r,h,l))d.precision=u+=10,n=s=a=new d(1),c=0,l++;else return yn(o,d.precision=p,h,Kn=!0);else return d.precision=p,o}o=a}}function Vv(e,t){var n,r,i,s,o,a,u,l,c,f,d,h=1,p=10,m=e,g=m.d,y=m.constructor,b=y.rounding,w=y.precision;if(m.s<0||!g||!g[0]||!m.e&&g[0]==1&&g.length==1)return new y(g&&!g[0]?-1/0:m.s!=1?NaN:g?0:m);if(t==null?(Kn=!1,c=w):c=t,y.precision=c+=p,n=iu(g),r=n.charAt(0),Math.abs(s=m.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(e),n=iu(m.d),r=n.charAt(0),h++;s=m.e,r>1?(m=new y("0."+n),s++):m=new y(r+"."+n.slice(1))}else return l=x4(y,c+2,w).times(s+""),m=Vv(new y(r+"."+n.slice(1)),c-p).plus(l),y.precision=w,t==null?yn(m,w,b,Kn=!0):m;for(f=m,u=o=m=ts(m.minus(1),m.plus(1),c,1),d=yn(m.times(m),c,1),i=3;;){if(o=yn(o.times(d),c,1),l=u.plus(ts(o,new y(i),c,1)),iu(l.d).slice(0,c)===iu(u.d).slice(0,c))if(u=u.times(2),s!==0&&(u=u.plus(x4(y,c+2,w).times(s+""))),u=ts(u,new y(h),c,1),t==null)if(sN(u.d,c-p,b,a))y.precision=c+=p,l=o=m=ts(f.minus(1),f.plus(1),c,1),d=yn(m.times(m),c,1),i=a=1;else return yn(u,y.precision=w,b,Kn=!0);else return y.precision=w,u;u=l,i+=2}}function vLe(e){return String(e.s*e.s/0)}function mK(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;r++);for(i=t.length;t.charCodeAt(i-1)===48;--i);if(t=t.slice(r,i),t){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%An,n<0&&(r+=An),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=An;r<i;)e.d.push(+t.slice(r,r+=An));t=t.slice(r),r=An-t.length}else r-=i;for(;r--;)t+="0";e.d.push(+t),Kn&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function G5t(e,t){var n,r,i,s,o,a,u,l,c;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),pLe.test(t))return mK(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(z5t.test(t))n=16,t=t.toLowerCase();else if(U5t.test(t))n=2;else if(V5t.test(t))n=8;else throw Error(X1+t);for(s=t.search(/p/i),s>0?(u=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),s=t.indexOf("."),o=s>=0,r=e.constructor,o&&(t=t.replace(".",""),a=t.length,s=a-s,i=gLe(r,new r(n),s,s*2)),l=fF(t,n,np),c=l.length-1,s=c;l[s]===0;--s)l.pop();return s<0?new r(e.s*0):(e.e=d9(l,c),e.d=l,Kn=!1,o&&(e=ts(e,i,a*4)),u&&(e=e.times(Math.abs(u)<54?na(2,u):UC.pow(2,u))),Kn=!0,e)}function Y5t(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:jC(e,2,t,t);n=1.4*Math.sqrt(r),n=n>16?16:n|0,t=t.times(1/h9(5,n)),t=jC(e,2,t,t);for(var i,s=new e(5),o=new e(16),a=new e(20);n--;)i=t.times(t),t=t.times(s.plus(i.times(o.times(i).minus(a))));return t}function jC(e,t,n,r,i){var s,o,a,u,l=e.precision,c=Math.ceil(l/An);for(Kn=!1,u=n.times(n),a=new e(r);;){if(o=ts(a.times(u),new e(t++*t++),l,1),a=i?r.plus(o):r.minus(o),r=ts(o.times(u),new e(t++*t++),l,1),o=a.plus(r),o.d[c]!==void 0){for(s=c;o.d[s]===a.d[s]&&s--;);if(s==-1)break}s=a,a=r,r=o,o=s}return Kn=!0,o.d.length=c+1,o}function h9(e,t){for(var n=e;--t;)n*=e;return n}function bLe(e,t){var n,r=t.s<0,i=Wh(e,e.precision,1),s=i.times(.5);if(t=t.abs(),t.lte(s))return E0=r?4:1,t;if(n=t.divToInt(i),n.isZero())E0=r?3:2;else{if(t=t.minus(n.times(i)),t.lte(s))return E0=u1e(n)?r?2:3:r?4:1,t;E0=u1e(n)?r?1:4:r?3:2}return t.minus(i).abs()}function Xre(e,t,n,r){var i,s,o,a,u,l,c,f,d,h=e.constructor,p=n!==void 0;if(p?(Vc(n,1,$b),r===void 0?r=h.rounding:Vc(r,0,8)):(n=h.precision,r=h.rounding),!e.isFinite())c=vLe(e);else{for(c=Xm(e),o=c.indexOf("."),p?(i=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):i=t,o>=0&&(c=c.replace(".",""),d=new h(1),d.e=c.length-o,d.d=fF(Xm(d),10,i),d.e=d.d.length),f=fF(c,10,i),s=u=f.length;f[--u]==0;)f.pop();if(!f[0])c=p?"0p+0":"0";else{if(o<0?s--:(e=new h(e),e.d=f,e.e=s,e=ts(e,d,n,r,0,i),f=e.d,s=e.e,l=cLe),o=f[n],a=i/2,l=l||f[n+1]!==void 0,l=r<4?(o!==void 0||l)&&(r===0||r===(e.s<0?3:2)):o>a||o===a&&(r===4||l||r===6&&f[n-1]&1||r===(e.s<0?8:7)),f.length=n,l)for(;++f[--n]>i-1;)f[n]=0,n||(++s,f.unshift(1));for(u=f.length;!f[u-1];--u);for(o=0,c="";o<u;o++)c+=fK.charAt(f[o]);if(p){if(u>1)if(t==16||t==8){for(o=t==16?4:3,--u;u%o;u++)c+="0";for(f=fF(c,i,t),u=f.length;!f[u-1];--u);for(o=1,c="1.";o<u;o++)c+=fK.charAt(f[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>u)for(s-=u;s--;)c+="0";else s<u&&(c=c.slice(0,s)+"."+c.slice(s))}c=(t==16?"0x":t==2?"0b":t==8?"0o":"")+c}return e.s<0?"-"+c:c}function l1e(e,t){if(e.length>t)return e.length=t,!0}function K5t(e){return new this(e).abs()}function X5t(e){return new this(e).acos()}function Q5t(e){return new this(e).acosh()}function J5t(e,t){return new this(e).plus(t)}function Z5t(e){return new this(e).asin()}function e8t(e){return new this(e).asinh()}function t8t(e){return new this(e).atan()}function n8t(e){return new this(e).atanh()}function r8t(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,s=r+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=Wh(this,s,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?Wh(this,r,i):new this(0),n.s=e.s):!e.d||t.isZero()?(n=Wh(this,s,1).times(.5),n.s=e.s):t.s<0?(this.precision=s,this.rounding=1,n=this.atan(ts(e,t,s,1)),t=Wh(this,s,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(ts(e,t,s,1)),n}function i8t(e){return new this(e).cbrt()}function s8t(e){return yn(e=new this(e),e.e+1,2)}function o8t(e,t,n){return new this(e).clamp(t,n)}function a8t(e){if(!e||typeof e!="object")throw Error(f9+"Object expected");var t,n,r,i=e.defaults===!0,s=["precision",1,$b,"rounding",0,8,"toExpNeg",-ZS,0,"toExpPos",0,ZS,"maxE",0,ZS,"minE",-ZS,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(n=s[t],i&&(this[n]=dK[n]),(r=e[n])!==void 0)if(Ju(r)===r&&r>=s[t+1]&&r<=s[t+2])this[n]=r;else throw Error(X1+n+": "+r);if(n="crypto",i&&(this[n]=dK[n]),(r=e[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(dLe);else this[n]=!1;else throw Error(X1+n+": "+r);return this}function u8t(e){return new this(e).cos()}function l8t(e){return new this(e).cosh()}function wLe(e){var t,n,r;function i(s){var o,a,u,l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,c1e(s)){l.s=s.s,Kn?!s.d||s.e>i.maxE?(l.e=NaN,l.d=null):s.e<i.minE?(l.e=0,l.d=[0]):(l.e=s.e,l.d=s.d.slice()):(l.e=s.e,l.d=s.d?s.d.slice():s.d);return}if(u=typeof s,u==="number"){if(s===0){l.s=1/s<0?-1:1,l.e=0,l.d=[0];return}if(s<0?(s=-s,l.s=-1):l.s=1,s===~~s&&s<1e7){for(o=0,a=s;a>=10;a/=10)o++;Kn?o>i.maxE?(l.e=NaN,l.d=null):o<i.minE?(l.e=0,l.d=[0]):(l.e=o,l.d=[s]):(l.e=o,l.d=[s]);return}else if(s*0!==0){s||(l.s=NaN),l.e=NaN,l.d=null;return}return mK(l,s.toString())}else if(u!=="string")throw Error(X1+s);return(a=s.charCodeAt(0))===45?(s=s.slice(1),l.s=-1):(a===43&&(s=s.slice(1)),l.s=1),pLe.test(s)?mK(l,s):G5t(l,s)}if(i.prototype=mt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=a8t,i.clone=wLe,i.isDecimal=c1e,i.abs=K5t,i.acos=X5t,i.acosh=Q5t,i.add=J5t,i.asin=Z5t,i.asinh=e8t,i.atan=t8t,i.atanh=n8t,i.atan2=r8t,i.cbrt=i8t,i.ceil=s8t,i.clamp=o8t,i.cos=u8t,i.cosh=l8t,i.div=c8t,i.exp=f8t,i.floor=d8t,i.hypot=h8t,i.ln=p8t,i.log=m8t,i.log10=y8t,i.log2=g8t,i.max=v8t,i.min=b8t,i.mod=w8t,i.mul=_8t,i.pow=E8t,i.random=x8t,i.round=S8t,i.sign=T8t,i.sin=C8t,i.sinh=A8t,i.sqrt=D8t,i.sub=I8t,i.sum=k8t,i.tan=R8t,i.tanh=N8t,i.trunc=P8t,e===void 0&&(e={}),e&&e.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function c8t(e,t){return new this(e).div(t)}function f8t(e){return new this(e).exp()}function d8t(e){return yn(e=new this(e),e.e+1,3)}function h8t(){var e,t,n=new this(0);for(Kn=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return Kn=!0,new this(1/0);n=t}return Kn=!0,n.sqrt()}function c1e(e){return e instanceof UC||e&&e.toStringTag===hLe||!1}function p8t(e){return new this(e).ln()}function m8t(e,t){return new this(e).log(t)}function g8t(e){return new this(e).log(2)}function y8t(e){return new this(e).log(10)}function v8t(){return yLe(this,arguments,"lt")}function b8t(){return yLe(this,arguments,"gt")}function w8t(e,t){return new this(e).mod(t)}function _8t(e,t){return new this(e).mul(t)}function E8t(e,t){return new this(e).pow(t)}function x8t(e){var t,n,r,i,s=0,o=new this(1),a=[];if(e===void 0?e=this.precision:Vc(e,1,$b),r=Math.ceil(e/An),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));s<r;)i=t[s],i>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:a[s++]=i%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(r*=4);s<r;)i=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((t[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(t,s):(a.push(i%1e7),s+=4);s=r/4}else throw Error(dLe);else for(;s<r;)a[s++]=Math.random()*1e7|0;for(r=a[--s],e%=An,r&&e&&(i=na(10,An-e),a[s]=(r/i|0)*i);a[s]===0;s--)a.pop();if(s<0)n=0,a=[0];else{for(n=-1;a[0]===0;n-=An)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<An&&(n-=An-r)}return o.e=n,o.d=a,o}function S8t(e){return yn(e=new this(e),e.e+1,this.rounding)}function T8t(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function C8t(e){return new this(e).sin()}function A8t(e){return new this(e).sinh()}function D8t(e){return new this(e).sqrt()}function I8t(e,t){return new this(e).sub(t)}function k8t(){var e=0,t=arguments,n=new this(t[e]);for(Kn=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return Kn=!0,yn(n,this.precision,this.rounding)}function R8t(e){return new this(e).tan()}function N8t(e){return new this(e).tanh()}function P8t(e){return yn(e=new this(e),e.e+1,1)}mt[Symbol.for("nodejs.util.inspect.custom")]=mt.toString;mt[Symbol.toStringTag]="Decimal";var UC=mt.constructor=wLe(dK);_4=new UC(_4);E4=new UC(E4);var O8t="BigNumber",M8t=["?on","config"],$8t=ei(O8t,M8t,e=>{var{on:t,config:n}=e,r=UC.clone({precision:n.precision,modulo:UC.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},t&&t("config",function(i,s){i.precision!==s.precision&&r.config({precision:i.precision})}),r},{isClass:!0});const Du=Math.cosh||function(e){return Math.abs(e)<1e-9?1-e:(Math.exp(e)+Math.exp(-e))*.5},ud=Math.sinh||function(e){return Math.abs(e)<1e-9?e:(Math.exp(e)-Math.exp(-e))*.5},F8t=function(e){const t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;const n=e*e;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},pH=function(e,t){return e=Math.abs(e),t=Math.abs(t),e<t&&([e,t]=[t,e]),e<1e8?Math.sqrt(e*e+t*t):(t/=e,e*Math.sqrt(1+t*t))},tS=function(){throw SyntaxError("Invalid Param")};function mH(e,t){const n=Math.abs(e),r=Math.abs(t);return e===0?Math.log(r):t===0?Math.log(n):n<3e3&&r<3e3?Math.log(e*e+t*t)*.5:(e=e*.5,t=t*.5,.5*Math.log(e*e+t*t)+Math.LN2)}const L8t={re:0,im:0},Uw=function(e,t){const n=L8t;if(e==null)n.re=n.im=0;else if(t!==void 0)n.re=e,n.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)n.re=e.re,n.im=e.im;else if("abs"in e&&"arg"in e){if(!isFinite(e.abs)&&isFinite(e.arg))return et.INFINITY;n.re=e.abs*Math.cos(e.arg),n.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!isFinite(e.r)&&isFinite(e.phi))return et.INFINITY;n.re=e.r*Math.cos(e.phi),n.im=e.r*Math.sin(e.phi)}else e.length===2?(n.re=e[0],n.im=e[1]):tS();break;case"string":n.im=n.re=0;const r=e.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,s=0;r===null&&tS();for(let o=0;o<r.length;o++){const a=r[o];a===" "||a==="	"||a===`
`||(a==="+"?i++:a==="-"?s++:a==="i"||a==="I"?(i+s===0&&tS(),r[o+1]!==" "&&!isNaN(r[o+1])?(n.im+=parseFloat((s%2?"-":"")+r[o+1]),o++):n.im+=parseFloat((s%2?"-":"")+"1"),i=s=0):((i+s===0||isNaN(a))&&tS(),r[o+1]==="i"||r[o+1]==="I"?(n.im+=parseFloat((s%2?"-":"")+a),o++):n.re+=parseFloat((s%2?"-":"")+a),i=s=0))}i+s>0&&tS();break;case"number":n.im=0,n.re=e;break;default:tS()}return isNaN(n.re)||isNaN(n.im),n};function et(e,t){if(!(this instanceof et))return new et(e,t);const n=Uw(e,t);this.re=n.re,this.im=n.im}et.prototype={re:0,im:0,sign:function(){const e=pH(this.re,this.im);return new et(this.re/e,this.im/e)},add:function(e,t){const n=Uw(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?et.NAN:et.INFINITY:new et(this.re+n.re,this.im+n.im)},sub:function(e,t){const n=Uw(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?et.NAN:et.INFINITY:new et(this.re-n.re,this.im-n.im)},mul:function(e,t){const n=Uw(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),s=this.re===0&&this.im===0,o=n.re===0&&n.im===0;return r&&o||i&&s?et.NAN:r||i?et.INFINITY:n.im===0&&this.im===0?new et(this.re*n.re,0):new et(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(e,t){const n=Uw(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),s=this.re===0&&this.im===0,o=n.re===0&&n.im===0;if(s&&o||r&&i)return et.NAN;if(o||r)return et.INFINITY;if(s||i)return et.ZERO;if(n.im===0)return new et(this.re/n.re,this.im/n.re);if(Math.abs(n.re)<Math.abs(n.im)){const a=n.re/n.im,u=n.re*a+n.im;return new et((this.re*a+this.im)/u,(this.im*a-this.re)/u)}else{const a=n.im/n.re,u=n.im*a+n.re;return new et((this.re+this.im*a)/u,(this.im-this.re*a)/u)}},pow:function(e,t){const n=Uw(e,t),r=this.re===0&&this.im===0;if(n.re===0&&n.im===0)return et.ONE;if(n.im===0){if(this.im===0&&this.re>0)return new et(Math.pow(this.re,n.re),0);if(this.re===0)switch((n.re%4+4)%4){case 0:return new et(Math.pow(this.im,n.re),0);case 1:return new et(0,Math.pow(this.im,n.re));case 2:return new et(-Math.pow(this.im,n.re),0);case 3:return new et(0,-Math.pow(this.im,n.re))}}if(r&&n.re>0)return et.ZERO;const s=Math.atan2(this.im,this.re),o=mH(this.re,this.im);let a=Math.exp(n.re*o-n.im*s),u=n.im*o+n.re*s;return new et(a*Math.cos(u),a*Math.sin(u))},sqrt:function(){const e=this.re,t=this.im;if(t===0)return e>=0?new et(Math.sqrt(e),0):new et(0,Math.sqrt(-e));const n=pH(e,t);let r=Math.sqrt(.5*(n+Math.abs(e))),i=Math.abs(t)/(2*r);return e>=0?new et(r,t<0?-i:i):new et(i,t<0?-r:r)},exp:function(){const e=Math.exp(this.re);return this.im===0?new et(e,0):new et(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){const e=this.re,t=this.im;return new et(Math.expm1(e)*Math.cos(t)+F8t(t),Math.exp(e)*Math.sin(t))},log:function(){const e=this.re,t=this.im;return t===0&&e>0?new et(Math.log(e),0):new et(mH(e,t),Math.atan2(t,e))},abs:function(){return pH(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const e=this.re,t=this.im;return new et(Math.sin(e)*Du(t),Math.cos(e)*ud(t))},cos:function(){const e=this.re,t=this.im;return new et(Math.cos(e)*Du(t),-Math.sin(e)*ud(t))},tan:function(){const e=2*this.re,t=2*this.im,n=Math.cos(e)+Du(t);return new et(Math.sin(e)/n,ud(t)/n)},cot:function(){const e=2*this.re,t=2*this.im,n=Math.cos(e)-Du(t);return new et(-Math.sin(e)/n,ud(t)/n)},sec:function(){const e=this.re,t=this.im,n=.5*Du(2*t)+.5*Math.cos(2*e);return new et(Math.cos(e)*Du(t)/n,Math.sin(e)*ud(t)/n)},csc:function(){const e=this.re,t=this.im,n=.5*Du(2*t)-.5*Math.cos(2*e);return new et(Math.sin(e)*Du(t)/n,-Math.cos(e)*ud(t)/n)},asin:function(){const e=this.re,t=this.im,n=new et(t*t-e*e+1,-2*e*t).sqrt(),r=new et(n.re-t,n.im+e).log();return new et(r.im,-r.re)},acos:function(){const e=this.re,t=this.im,n=new et(t*t-e*e+1,-2*e*t).sqrt(),r=new et(n.re-t,n.im+e).log();return new et(Math.PI/2-r.im,r.re)},atan:function(){const e=this.re,t=this.im;if(e===0){if(t===1)return new et(0,1/0);if(t===-1)return new et(0,-1/0)}const n=e*e+(1-t)*(1-t),r=new et((1-t*t-e*e)/n,-2*e/n).log();return new et(-.5*r.im,.5*r.re)},acot:function(){const e=this.re,t=this.im;if(t===0)return new et(Math.atan2(1,e),0);const n=e*e+t*t;return n!==0?new et(e/n,-t/n).atan():new et(e!==0?e/0:0,t!==0?-t/0:0).atan()},asec:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new et(0,1/0);const n=e*e+t*t;return n!==0?new et(e/n,-t/n).acos():new et(e!==0?e/0:0,t!==0?-t/0:0).acos()},acsc:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new et(Math.PI/2,1/0);const n=e*e+t*t;return n!==0?new et(e/n,-t/n).asin():new et(e!==0?e/0:0,t!==0?-t/0:0).asin()},sinh:function(){const e=this.re,t=this.im;return new et(ud(e)*Math.cos(t),Du(e)*Math.sin(t))},cosh:function(){const e=this.re,t=this.im;return new et(Du(e)*Math.cos(t),ud(e)*Math.sin(t))},tanh:function(){const e=2*this.re,t=2*this.im,n=Du(e)+Math.cos(t);return new et(ud(e)/n,Math.sin(t)/n)},coth:function(){const e=2*this.re,t=2*this.im,n=Du(e)-Math.cos(t);return new et(ud(e)/n,-Math.sin(t)/n)},csch:function(){const e=this.re,t=this.im,n=Math.cos(2*t)-Du(2*e);return new et(-2*ud(e)*Math.cos(t)/n,2*Du(e)*Math.sin(t)/n)},sech:function(){const e=this.re,t=this.im,n=Math.cos(2*t)+Du(2*e);return new et(2*Du(e)*Math.cos(t)/n,-2*ud(e)*Math.sin(t)/n)},asinh:function(){let e=this.im;this.im=-this.re,this.re=e;const t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){const e=this.acos();if(e.im<=0){const t=e.re;e.re=-e.im,e.im=t}else{const t=e.im;e.im=-e.re,e.re=t}return e},atanh:function(){const e=this.re,t=this.im,n=e>1&&t===0,r=1-e,i=1+e,s=r*r+t*t,o=s!==0?new et((i*r-t*t)/s,(t*r+i*t)/s):new et(e!==-1?e/0:0,t!==0?t/0:0),a=o.re;return o.re=mH(o.re,o.im)/2,o.im=Math.atan2(o.im,a)/2,n&&(o.im=-o.im),o},acoth:function(){const e=this.re,t=this.im;if(e===0&&t===0)return new et(0,Math.PI/2);const n=e*e+t*t;return n!==0?new et(e/n,-t/n).atanh():new et(e!==0?e/0:0,t!==0?-t/0:0).atanh()},acsch:function(){const e=this.re,t=this.im;if(t===0)return new et(e!==0?Math.log(e+Math.sqrt(e*e+1)):1/0,0);const n=e*e+t*t;return n!==0?new et(e/n,-t/n).asinh():new et(e!==0?e/0:0,t!==0?-t/0:0).asinh()},asech:function(){const e=this.re,t=this.im;if(this.isZero())return et.INFINITY;const n=e*e+t*t;return n!==0?new et(e/n,-t/n).acosh():new et(e!==0?e/0:0,t!==0?-t/0:0).acosh()},inverse:function(){if(this.isZero())return et.INFINITY;if(this.isInfinite())return et.ZERO;const e=this.re,t=this.im,n=e*e+t*t;return new et(e/n,-t/n)},conjugate:function(){return new et(this.re,-this.im)},neg:function(){return new et(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new et(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new et(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new et(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){const n=Uw(e,t);return Math.abs(n.re-this.re)<=et.EPSILON&&Math.abs(n.im-this.im)<=et.EPSILON},clone:function(){return new et(this.re,this.im)},toString:function(){let e=this.re,t=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<et.EPSILON&&(e=0),Math.abs(t)<et.EPSILON&&(t=0),t===0?n+e:(e!==0?(n+=e,n+=" ",t<0?(t=-t,n+="-"):n+="+",n+=" "):t<0&&(t=-t,n+="-"),t!==1&&(n+=t),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};et.ZERO=new et(0,0);et.ONE=new et(1,0);et.I=new et(0,1);et.PI=new et(Math.PI,0);et.E=new et(Math.E,0);et.INFINITY=new et(1/0,1/0);et.NAN=new et(NaN,NaN);et.EPSILON=1e-15;var B8t="Complex",j8t=[],U8t=ei(B8t,j8t,()=>(Object.defineProperty(et,"name",{value:"Complex"}),et.prototype.constructor=et,et.prototype.type="Complex",et.prototype.isComplex=!0,et.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},et.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},et.prototype.format=function(e){var t="",n=this.im,r=this.re,i=cK(this.re,e),s=cK(this.im,e),o=ds(e)?e:e?e.precision:null;if(o!==null){var a=Math.pow(10,-o);Math.abs(r/n)<a&&(r=0),Math.abs(n/r)<a&&(n=0)}return n===0?t=i:r===0?n===1?t="i":n===-1?t="-i":t=s+"i":n<0?n===-1?t=i+" - i":t=i+" - "+s.substring(1)+"i":n===1?t=i+" + i":t=i+" + "+s+"i",t},et.fromPolar=function(e){switch(arguments.length){case 1:{var t=arguments[0];if(typeof t=="object")return et(t);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(ds(n)){if(sLe(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),ds(r))return new et({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},et.prototype.valueOf=et.prototype.toString,et.fromJSON=function(e){return new et(e)},et.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},et),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(e){if(isNaN(e))throw new Error("");return e});const hn=BigInt(0),ur=BigInt(1),oN=BigInt(2),gK=BigInt(5),lc=BigInt(10),z8t=2e3,Ft={s:ur,n:hn,d:ur};function Vg(e,t){try{e=BigInt(e)}catch{throw hv()}return e*t}function gh(e){return typeof e=="bigint"?e:Math.floor(e)}function As(e,t){if(t===hn)throw Qre();const n=Object.create(pd.prototype);n.s=e<hn?-ur:ur,e=e<hn?-e:e;const r=Xw(e,t);return n.n=e/r,n.d=t/r,n}function nS(e){const t={};let n=e,r=oN,i=gK-ur;for(;i<=n;){for(;n%r===hn;)n/=r,t[r]=(t[r]||hn)+ur;i+=ur+oN*r++}return n!==e?n>1&&(t[n]=(t[n]||hn)+ur):t[e]=(t[e]||hn)+ur,t}const _a=function(e,t){let n=hn,r=ur,i=ur;if(e!=null)if(t!==void 0){if(typeof e=="bigint")n=e;else{if(isNaN(e))throw hv();if(e%1!==0)throw f1e();n=BigInt(e)}if(typeof t=="bigint")r=t;else{if(isNaN(t))throw hv();if(t%1!==0)throw f1e();r=BigInt(t)}i=n*r}else if(typeof e=="object"){if("d"in e&&"n"in e)n=BigInt(e.n),r=BigInt(e.d),"s"in e&&(n*=BigInt(e.s));else if(0 in e)n=BigInt(e[0]),1 in e&&(r=BigInt(e[1]));else if(typeof e=="bigint")n=e;else throw hv();i=n*r}else if(typeof e=="number"){if(isNaN(e))throw hv();if(e<0&&(i=-ur,e=-e),e%1===0)n=BigInt(e);else if(e>0){let s=1,o=0,a=1,u=1,l=1,c=1e7;for(e>=1&&(s=10**Math.floor(1+Math.log10(e)),e/=s);a<=c&&l<=c;){let f=(o+u)/(a+l);if(e===f){a+l<=c?(n=o+u,r=a+l):l>a?(n=u,r=l):(n=o,r=a);break}else e>f?(o+=u,a+=l):(u+=o,l+=a),a>c?(n=u,r=l):(n=o,r=a)}n=BigInt(n)*BigInt(s),r=BigInt(r)}}else if(typeof e=="string"){let s=0,o=hn,a=hn,u=hn,l=ur,c=ur,f=e.replace(/_/g,"").match(/\d+|./g);if(f===null)throw hv();if(f[s]==="-"?(i=-ur,s++):f[s]==="+"&&s++,f.length===s+1?a=Vg(f[s++],i):f[s+1]==="."||f[s]==="."?(f[s]!=="."&&(o=Vg(f[s++],i)),s++,(s+1===f.length||f[s+1]==="("&&f[s+3]===")"||f[s+1]==="'"&&f[s+3]==="'")&&(a=Vg(f[s],i),l=lc**BigInt(f[s].length),s++),(f[s]==="("&&f[s+2]===")"||f[s]==="'"&&f[s+2]==="'")&&(u=Vg(f[s+1],i),c=lc**BigInt(f[s+1].length)-ur,s+=3)):f[s+1]==="/"||f[s+1]===":"?(a=Vg(f[s],i),l=Vg(f[s+2],ur),s+=3):f[s+3]==="/"&&f[s+1]===" "&&(o=Vg(f[s],i),a=Vg(f[s+2],i),l=Vg(f[s+4],ur),s+=5),f.length<=s)r=l*c,i=n=u+r*o+c*a;else throw hv()}else if(typeof e=="bigint")n=e,i=e,r=ur;else throw hv();if(r===hn)throw Qre();Ft.s=i<hn?-ur:ur,Ft.n=n<hn?-n:n,Ft.d=r<hn?-r:r};function V8t(e,t,n){let r=ur;for(;t>hn;e=e*e%n,t>>=ur)t&ur&&(r=r*e%n);return r}function H8t(e,t){for(;t%oN===hn;t/=oN);for(;t%gK===hn;t/=gK);if(t===ur)return hn;let n=lc%t,r=1;for(;n!==ur;r++)if(n=n*lc%t,r>z8t)return hn;return BigInt(r)}function q8t(e,t,n){let r=ur,i=V8t(lc,n,t);for(let s=0;s<300;s++){if(r===i)return BigInt(s);r=r*lc%t,i=i*lc%t}return 0}function Xw(e,t){if(!e)return t;if(!t)return e;for(;;){if(e%=t,!e)return t;if(t%=e,!t)return e}}function pd(e,t){if(_a(e,t),this instanceof pd)e=Xw(Ft.d,Ft.n),this.s=Ft.s,this.n=Ft.n/e,this.d=Ft.d/e;else return As(Ft.s*Ft.n,Ft.d)}var Qre=function(){return new Error("Division by Zero")},hv=function(){return new Error("Invalid argument")},f1e=function(){return new Error("Parameters must be integer")};pd.prototype={s:ur,n:hn,d:ur,abs:function(){return As(this.n,this.d)},neg:function(){return As(-this.s*this.n,this.d)},add:function(e,t){return _a(e,t),As(this.s*this.n*Ft.d+Ft.s*this.d*Ft.n,this.d*Ft.d)},sub:function(e,t){return _a(e,t),As(this.s*this.n*Ft.d-Ft.s*this.d*Ft.n,this.d*Ft.d)},mul:function(e,t){return _a(e,t),As(this.s*Ft.s*this.n*Ft.n,this.d*Ft.d)},div:function(e,t){return _a(e,t),As(this.s*Ft.s*this.n*Ft.d,this.d*Ft.n)},clone:function(){return As(this.s*this.n,this.d)},mod:function(e,t){if(e===void 0)return As(this.s*this.n%this.d,ur);if(_a(e,t),hn===Ft.n*this.d)throw Qre();return As(this.s*(Ft.d*this.n)%(Ft.n*this.d),Ft.d*this.d)},gcd:function(e,t){return _a(e,t),As(Xw(Ft.n,this.n)*Xw(Ft.d,this.d),Ft.d*this.d)},lcm:function(e,t){return _a(e,t),Ft.n===hn&&this.n===hn?As(hn,ur):As(Ft.n*this.n,Xw(Ft.n,this.n)*Xw(Ft.d,this.d))},inverse:function(){return As(this.s*this.d,this.n)},pow:function(e,t){if(_a(e,t),Ft.d===ur)return Ft.s<hn?As((this.s*this.d)**Ft.n,this.n**Ft.n):As((this.s*this.n)**Ft.n,this.d**Ft.n);if(this.s<hn)return null;let n=nS(this.n),r=nS(this.d),i=ur,s=ur;for(let o in n)if(o!=="1"){if(o==="0"){i=hn;break}if(n[o]*=Ft.n,n[o]%Ft.d===hn)n[o]/=Ft.d;else return null;i*=BigInt(o)**n[o]}for(let o in r)if(o!=="1"){if(r[o]*=Ft.n,r[o]%Ft.d===hn)r[o]/=Ft.d;else return null;s*=BigInt(o)**r[o]}return Ft.s<hn?As(s,i):As(i,s)},log:function(e,t){if(_a(e,t),this.s<=hn||Ft.s<=hn)return null;const n={},r=nS(Ft.n),i=nS(Ft.d),s=nS(this.n),o=nS(this.d);for(const l in i)r[l]=(r[l]||hn)-i[l];for(const l in o)s[l]=(s[l]||hn)-o[l];for(const l in r)l!=="1"&&(n[l]=!0);for(const l in s)l!=="1"&&(n[l]=!0);let a=null,u=null;for(const l in n){const c=r[l]||hn,f=s[l]||hn;if(c===hn){if(f!==hn)return null;continue}let d=f,h=c;const p=Xw(d,h);if(d/=p,h/=p,a===null&&u===null)a=d,u=h;else if(d*u!==a*h)return null}return a!==null&&u!==null?As(a,u):null},equals:function(e,t){return _a(e,t),this.s*this.n*Ft.d===Ft.s*Ft.n*this.d},lt:function(e,t){return _a(e,t),this.s*this.n*Ft.d<Ft.s*Ft.n*this.d},lte:function(e,t){return _a(e,t),this.s*this.n*Ft.d<=Ft.s*Ft.n*this.d},gt:function(e,t){return _a(e,t),this.s*this.n*Ft.d>Ft.s*Ft.n*this.d},gte:function(e,t){return _a(e,t),this.s*this.n*Ft.d>=Ft.s*Ft.n*this.d},compare:function(e,t){_a(e,t);let n=this.s*this.n*Ft.d-Ft.s*Ft.n*this.d;return(hn<n)-(n<hn)},ceil:function(e){return e=lc**BigInt(e||0),As(gh(this.s*e*this.n/this.d)+(e*this.n%this.d>hn&&this.s>=hn?ur:hn),e)},floor:function(e){return e=lc**BigInt(e||0),As(gh(this.s*e*this.n/this.d)-(e*this.n%this.d>hn&&this.s<hn?ur:hn),e)},round:function(e){return e=lc**BigInt(e||0),As(gh(this.s*e*this.n/this.d)+this.s*((this.s>=hn?ur:hn)+oN*(e*this.n%this.d)>this.d?ur:hn),e)},roundTo:function(e,t){_a(e,t);const n=this.n*Ft.d,r=this.d*Ft.n,i=n%r;let s=gh(n/r);return i+i>=r&&s++,As(this.s*s*Ft.n,Ft.d)},divisible:function(e,t){return _a(e,t),!(!(Ft.n*this.d)||this.n*Ft.d%(Ft.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(e){let t=this.n,n=this.d;e=e||15;let r=H8t(t,n),i=q8t(t,n,r),s=this.s<hn?"-":"";if(s+=gh(t/n),t%=n,t*=lc,t&&(s+="."),r){for(let o=i;o--;)s+=gh(t/n),t%=n,t*=lc;s+="(";for(let o=r;o--;)s+=gh(t/n),t%=n,t*=lc;s+=")"}else for(let o=e;t&&o--;)s+=gh(t/n),t%=n,t*=lc;return s},toFraction:function(e){let t=this.n,n=this.d,r=this.s<hn?"-":"";if(n===ur)r+=t;else{let i=gh(t/n);e&&i>hn&&(r+=i,r+=" ",t%=n),r+=t,r+="/",r+=n}return r},toLatex:function(e){let t=this.n,n=this.d,r=this.s<hn?"-":"";if(n===ur)r+=t;else{let i=gh(t/n);e&&i>hn&&(r+=i,t%=n),r+="\\frac{",r+=t,r+="}{",r+=n,r+="}"}return r},toContinued:function(){let e=this.n,t=this.d,n=[];do{n.push(gh(e/t));let r=e%t;e=t,t=r}while(e!==ur);return n},simplify:function(e){const t=BigInt(1/(e||.001)|0),n=this.abs(),r=n.toContinued();for(let i=1;i<r.length;i++){let s=As(r[i-1],ur);for(let a=i-2;a>=0;a--)s=s.inverse().add(r[a]);let o=s.sub(n);if(o.n*t<o.d)return s.mul(this.s)}return this}};var W8t="Fraction",G8t=[],Y8t=ei(W8t,G8t,()=>(Object.defineProperty(pd,"name",{value:"Fraction"}),pd.prototype.constructor=pd,pd.prototype.type="Fraction",pd.prototype.isFraction=!0,pd.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},pd.fromJSON=function(e){return new pd(e)},pd),{isClass:!0}),K8t="Matrix",X8t=[],Q8t=ei(K8t,X8t,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(t,n){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(t,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(t,n,r){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(t,n){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(t,n){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(t,n){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function gH(e,t,n){var r=e.constructor,i=new r(2),s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Vs(n))throw new Error("size must be an integer");if(e.greaterThan(i.pow(n-1).sub(1))||e.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(i.pow(n))),s="i".concat(n)}switch(t){case 2:return"".concat(e.toBinary()).concat(s);case 8:return"".concat(e.toOctal()).concat(s);case 16:return"".concat(e.toHexadecimal()).concat(s);default:throw new Error("Base ".concat(t," not supported "))}}function J8t(e,t){if(typeof t=="function")return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:i}=aLe(t);switch(n){case"fixed":return eBt(e,r);case"exponential":return d1e(e,r);case"engineering":return Z8t(e,r);case"bin":return gH(e,2,i);case"oct":return gH(e,8,i);case"hex":return gH(e,16,i);case"auto":{var s=h1e(t==null?void 0:t.lowerExp,-3),o=h1e(t==null?void 0:t.upperExp,5);if(e.isZero())return"0";var a,u=e.toSignificantDigits(r),l=u.e;return l>=s&&l<o?a=u.toFixed():a=d1e(e,r),a.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Z8t(e,t){var n=e.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,i=e.mul(Math.pow(10,-r)),s=i.toPrecision(t);if(s.includes("e")){var o=e.constructor;s=new o(s).toFixed()}return s+"e"+(n>=0?"+":"")+r.toString()}function d1e(e,t){return t!==void 0?e.toExponential(t-1):e.toExponential()}function eBt(e,t){return e.toFixed(t)}function h1e(e,t){return ds(e)?e:zo(e)?e.toNumber():t}function Lo(e,t){var n=tBt(e,t);return t&&typeof t=="object"&&"truncate"in t&&n.length>t.truncate?n.substring(0,t.truncate-3)+"...":n}function tBt(e,t){if(typeof e=="number")return cK(e,t);if(zo(e))return J8t(e,t);if(nBt(e))return!t||t.fraction!=="decimal"?"".concat(e.s*e.n,"/").concat(e.d):e.toString();if(Array.isArray(e))return _Le(e,t);if(i0(e))return p1e(e);if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var n=Object.keys(e).map(r=>p1e(r)+": "+Lo(e[r],t));return"{"+n.join(", ")+"}"}return String(e)}function p1e(e){for(var t=String(e),n="",r=0;r<t.length;){var i=t.charAt(r);n+=i in m1e?m1e[i]:i,r++}return'"'+n+'"'}var m1e={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function _Le(e,t){if(Array.isArray(e)){for(var n="[",r=e.length,i=0;i<r;i++)i!==0&&(n+=", "),n+=_Le(e[i],t);return n+="]",n}else return Lo(e,t)}function nBt(e){return e&&typeof e=="object"&&typeof e.s=="bigint"&&typeof e.n=="bigint"&&typeof e.d=="bigint"||!1}function $s(e,t,n){if(!(this instanceof $s))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}$s.prototype=new RangeError;$s.prototype.constructor=RangeError;$s.prototype.name="DimensionError";$s.prototype.isDimensionError=!0;function uA(e,t,n){if(!(this instanceof uA))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}uA.prototype=new RangeError;uA.prototype.constructor=RangeError;uA.prototype.name="IndexError";uA.prototype.isIndexError=!0;function Pl(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function ELe(e,t,n){var r,i=e.length;if(i!==t[n])throw new $s(i,t[n]);if(n<t.length-1){var s=n+1;for(r=0;r<i;r++){var o=e[r];if(!Array.isArray(o))throw new $s(t.length-1,t.length,"<");ELe(e[r],t,s)}}else for(r=0;r<i;r++)if(Array.isArray(e[r]))throw new $s(t.length+1,t.length,">")}function g1e(e,t){var n=t.length===0;if(n){if(Array.isArray(e))throw new $s(e.length,0)}else ELe(e,t,0)}function eo(e,t){if(e!==void 0){if(!ds(e)||!Vs(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof t=="number"&&e>=t)throw new uA(e,t)}}function yK(e,t,n){if(!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Error("Resizing to scalar is not supported");t.forEach(function(i){if(!ds(i)||!Vs(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Lo(t)+")")}),(ds(e)||zo(e))&&(e=[e]);var r=n!==void 0?n:0;return vK(e,t,0,r),e}function vK(e,t,n,r){var i,s,o=e.length,a=t[n],u=Math.min(o,a);if(e.length=a,n<t.length-1){var l=n+1;for(i=0;i<u;i++)s=e[i],Array.isArray(s)||(s=[s],e[i]=s),vK(s,t,l,r);for(i=u;i<a;i++)s=[],e[i]=s,vK(s,t,l,r)}else{for(i=0;i<u;i++)for(;Array.isArray(e[i]);)e[i]=e[i][0];for(i=u;i<a;i++)e[i]=r}}function xLe(e,t){var n=iBt(e),r=n.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new $s(0,r,"!=");t=Jre(t,r);var i=SLe(t);if(r!==i)throw new $s(i,r,"!=");try{return rBt(n,t)}catch(s){throw s instanceof $s?new $s(i,r,"!="):s}}function Jre(e,t){var n=SLe(e),r=e.slice(),i=-1,s=e.indexOf(i),o=e.indexOf(i,s+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var a=s>=0,u=t%n===0;if(a)if(u)r[s]=-t/n;else throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-n);return r}function SLe(e){return e.reduce((t,n)=>t*n,1)}function rBt(e,t){for(var n=e,r,i=t.length-1;i>0;i--){var s=t[i];r=[];for(var o=n.length/s,a=0;a<o;a++)r.push(n.slice(a*s,(a+1)*s));n=r}return n}function TLe(e,t,n,r){var i=r||Pl(e);if(n)for(var s=0;s<n;s++)e=[e],i.unshift(1);for(e=CLe(e,t,0);i.length<t;)i.push(1);return e}function CLe(e,t,n){var r,i;if(Array.isArray(e)){var s=n+1;for(r=0,i=e.length;r<i;r++)e[r]=CLe(e[r],t,s)}else for(var o=n;o<t;o++)e=[e];return e}function iBt(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function n(r){Array.isArray(r)?r.forEach(n):t.push(r)}),t}function Zre(e,t){for(var n,r=0,i=0;i<e.length;i++){var s=e[i],o=Array.isArray(s);if(i===0&&o&&(r=s.length),o&&s.length!==r)return;var a=o?Zre(s,t):t(s);if(n===void 0)n=a;else if(n!==a)return"mixed"}return n}function ALe(e,t,n,r){if(r<n){if(e.length!==t.length)throw new $s(e.length,t.length);for(var i=[],s=0;s<e.length;s++)i[s]=ALe(e[s],t[s],n,r+1);return i}else return e.concat(t)}function sBt(){var e=Array.prototype.slice.call(arguments,0,-1),t=Array.prototype.slice.call(arguments,-1);if(e.length===1)return e[0];if(e.length>1)return e.slice(1).reduce(function(n,r){return ALe(n,r,t,0)},e[0]);throw new Error("Wrong number of arguments in function concat")}function oBt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t.map(d=>d.length),i=Math.max(...r),s=new Array(i).fill(null),o=0;o<t.length;o++)for(var a=t[o],u=r[o],l=0;l<u;l++){var c=i-u+l;a[l]>s[c]&&(s[c]=a[l])}for(var f=0;f<t.length;f++)DLe(t[f],s);return s}function DLe(e,t){for(var n=t.length,r=e.length,i=0;i<r;i++){var s=n-r+i;if(e[i]<t[s]&&e[i]>1||e[i]>t[s])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(e,") not possible to broadcast dimension ").concat(r," with size ").concat(e[i]," to size ").concat(t[s]))}}function y1e(e,t){var n=Pl(e);if(BC(n,t))return e;DLe(n,t);var r=oBt(n,t),i=r.length,s=[...Array(i-n.length).fill(1),...n],o=uBt(e);n.length<i&&(o=xLe(o,s),n=Pl(o));for(var a=0;a<i;a++)n[a]<r[a]&&(o=aBt(o,r[a],a),n=Pl(o));return o}function aBt(e,t,n){return sBt(...Array(t).fill(e),n)}function ILe(e,t){if(!Array.isArray(e))throw new Error("Array expected");var n=Pl(e);if(t.length!==n.length)throw new $s(t.length,n.length);for(var r=0;r<t.length;r++)eo(t[r],n[r]);return t.reduce((i,s)=>i[s],e)}function uBt(e){return lC([],e)}function S4(e,t,n){if(b4.isTypedFunction(e)){var r=(t.isMatrix?t.size():Pl(t)).map(()=>0),i=t.isMatrix?t.get(r):ILe(t,r),s=Object.keys(e.signatures).length===1,o=lBt(e,i,r,t),a=s?Object.values(e.signatures)[0]:e;return o>=1&&o<=3?function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return v1e(a,l.slice(0,o),n,e.name)}:function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return v1e(a,l,n,e.name)}}return e}function lBt(e,t,n,r){for(var i=[t,n,r],s=3;s>0;s--){var o=i.slice(0,s);if(b4.resolve(e,o)!==null)return s}}function v1e(e,t,n,r){try{return e(...t)}catch(i){cBt(i,t,n,r)}}function cBt(e,t,n,r){var i;if(e instanceof TypeError&&((i=e.data)===null||i===void 0?void 0:i.category)==="wrongType"){var s=[];throw s.push("value: ".concat(m1(t[0]))),t.length>=2&&s.push("index: ".concat(m1(t[1]))),t.length>=3&&s.push("array: ".concat(m1(t[2]))),new TypeError("Function ".concat(n," cannot apply callback arguments ")+"".concat(r,"(").concat(s.join(", "),") at index ").concat(JSON.stringify(t[1])))}else throw new TypeError("Function ".concat(n," cannot apply callback arguments ")+"to function ".concat(r,": ").concat(e.message))}var fBt="DenseMatrix",dBt=["Matrix"],hBt=ei(fBt,dBt,e=>{var{Matrix:t}=e;function n(c,f){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!i0(f))throw new Error("Invalid datatype: "+f);if(aa(c))c.type==="DenseMatrix"?(this._data=_o(c._data),this._size=_o(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&Fo(c.data)&&Fo(c.size))this._data=c.data,this._size=c.size,g1e(this._data,this._size),this._datatype=f||c.datatype;else if(Fo(c))this._data=l(c),this._size=Pl(this._data),g1e(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+m1(c)+")");this._data=[],this._size=[0],this._datatype=f}}n.prototype=new t,n.prototype.createDenseMatrix=function(c,f){return new n(c,f)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return Zre(this._data,m1)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(c,f){return new n(c,f)},n.prototype.subset=function(c,f,d){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return s(this,c,f,d);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(c){return ILe(this._data,c)},n.prototype.set=function(c,f,d){if(!Fo(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new $s(c.length,this._size.length,"<");var h,p,m,g=c.map(function(b){return b+1});u(this,g,d);var y=this._data;for(h=0,p=c.length-1;h<p;h++)m=c[h],eo(m,y.length),y=y[m];return m=c[c.length-1],eo(m,y.length),y[m]=f,this};function r(c,f){if(!Yre(f))throw new TypeError("Invalid index");var d=f.isScalar();if(d)return c.get(f.min());var h=f.size();if(h.length!==c._size.length)throw new $s(h.length,c._size.length);for(var p=f.min(),m=f.max(),g=0,y=c._size.length;g<y;g++)eo(p[g],c._size[g]),eo(m[g],c._size[g]);return new n(i(c._data,f,h.length,0),c._datatype)}function i(c,f,d,h){var p=h===d-1,m=f.dimension(h);return p?m.map(function(g){return eo(g,c.length),c[g]}).valueOf():m.map(function(g){eo(g,c.length);var y=c[g];return i(y,f,d,h+1)}).valueOf()}function s(c,f,d,h){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var p=f.size(),m=f.isScalar(),g;if(aa(d)?(g=d.size(),d=d.valueOf()):g=Pl(d),m){if(g.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),d,h)}else{if(!BC(g,p))try{g.length===0?d=y1e([d],p):d=y1e(d,p),g=Pl(d)}catch{}if(p.length<c._size.length)throw new $s(p.length,c._size.length,"<");if(g.length<p.length){for(var y=0,b=0;p[y]===1&&g[y]===1;)y++;for(;p[y]===1;)b++,y++;d=TLe(d,p.length,b,g)}if(!BC(p,g))throw new $s(p,g,">");var w=f.max().map(function(T){return T+1});u(c,w,h);var S=p.length,E=0;o(c._data,f,d,S,E)}return c}function o(c,f,d,h,p){var m=p===h-1,g=f.dimension(p);m?g.forEach(function(y,b){eo(y),c[y]=d[b[0]]}):g.forEach(function(y,b){eo(y),o(c[y],f,d[b[0]],h,p+1)})}n.prototype.resize=function(c,f,d){if(!y4(c))throw new TypeError("Array or Matrix expected");var h=c.valueOf().map(m=>Array.isArray(m)&&m.length===1?m[0]:m),p=d?this.clone():this;return a(p,h,f)};function a(c,f,d){if(f.length===0){for(var h=c._data;Fo(h);)h=h[0];return h}return c._size=f.slice(0),c._data=yK(c._data,c._size,d),c}n.prototype.reshape=function(c,f){var d=f?this.clone():this;d._data=xLe(d._data,c);var h=d._size.reduce((p,m)=>p*m);return d._size=Jre(c,h),d};function u(c,f,d){for(var h=c._size.slice(0),p=!1;h.length<f.length;)h.push(0),p=!0;for(var m=0,g=f.length;m<g;m++)f[m]>h[m]&&(h[m]=f[m],p=!0);p&&a(c,h,d)}n.prototype.clone=function(){var c=new n({data:_o(this._data),size:_o(this._size),datatype:this._datatype});return c},n.prototype.size=function(){return this._size.slice(0)},n.prototype._forEach=function(c){var f=this,d=f.size();if(d.length===1){for(var h=0;h<d[0];h++)c(f._data,h,[h]);return}var p=Array(d.length).fill(0),m=Array(d.length-1),g=m.length-1;m[0]=f._data[0];for(var y=0;y<g;y++)m[y+1]=m[y][0];for(p[g]=-1;;){var b=void 0;for(b=g;b>=0;b--){if(p[b]++,p[b]===d[b]){p[b]=0;continue}m[b]=b===0?f._data[p[b]]:m[b-1][p[b]];for(var w=b;w<g;w++)m[w+1]=m[w][0];for(var S=0;S<d[m.length];S++)p[m.length]=S,c(m[g],S,p.slice(0));break}if(b===-1)break}},n.prototype.map=function(c){var f=this,d=new n(f),h=S4(c,f._data,"map");return d._forEach(function(p,m,g){p[m]=h(p[m],g,f)}),d},n.prototype.forEach=function(c){var f=this,d=S4(c,f._data,"map");f._forEach(function(h,p,m){d(h[p],m,f)})},n.prototype[Symbol.iterator]=function*(){var c=function*(d,h){if(Fo(d))for(var p=0;p<d.length;p++)yield*c(d[p],h.concat(p));else yield{value:d,index:h}};yield*c(this._data,[])},n.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var h of d)c.push(new n([h],this._datatype));return c},n.prototype.columns=function(){var c=this,f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,p=function(y){var b=h.map(w=>[w[y]]);f.push(new n(b,c._datatype))},m=0;m<d[1];m++)p(m);return f},n.prototype.toArray=function(){return _o(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(c){return Lo(this._data,c)},n.prototype.toString=function(){return Lo(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(c){if(c){if(zo(c)&&(c=c.toNumber()),!ds(c)||!Vs(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,d=c<0?-c:0,h=this._size[0],p=this._size[1],m=Math.min(h-d,p-f),g=[],y=0;y<m;y++)g[y]=this._data[y+d][y+f];return new n({data:g,size:[m],datatype:this._datatype})},n.diagonal=function(c,f,d,h){if(!Fo(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(C){if(zo(C)&&(C=C.toNumber()),!ds(C)||!Vs(C)||C<1)throw new Error("Size values must be positive integers");return C}),d){if(zo(d)&&(d=d.toNumber()),!ds(d)||!Vs(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var p=d>0?d:0,m=d<0?-d:0,g=c[0],y=c[1],b=Math.min(g-m,y-p),w;if(Fo(f)){if(f.length!==b)throw new Error("Invalid value array length");w=function(A){return f[A]}}else if(aa(f)){var S=f.size();if(S.length!==1||S[0]!==b)throw new Error("Invalid matrix length");w=function(A){return f.get([A])}}else w=function(){return f};h||(h=zo(w(0))?w(0).mul(0):0);var E=[];if(c.length>0){E=yK(E,c,h);for(var T=0;T<b;T++)E[T+m][T+p]=w(T)}return new n({data:E,size:[g,y]})},n.fromJSON=function(c){return new n(c)},n.prototype.swapRows=function(c,f){if(!ds(c)||!Vs(c)||!ds(f)||!Vs(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return eo(c,this._size[0]),eo(f,this._size[0]),n._swapRows(c,f,this._data),this},n._swapRows=function(c,f,d){var h=d[c];d[c]=d[f],d[f]=h};function l(c){return aa(c)?l(c.valueOf()):Fo(c)?c.map(l):c}return n},{isClass:!0});function Fb(e,t,n){return e&&typeof e.map=="function"?e.map(function(r){return Fb(r,t)}):t(e)}var kLe="number",p9="number, number";function RLe(e){return Math.abs(e)}RLe.signature=kLe;function NLe(e,t){return e+t}NLe.signature=p9;function PLe(e,t){return e-t}PLe.signature=p9;function OLe(e,t){return e*t}OLe.signature=p9;function MLe(e){return-e}MLe.signature=kLe;function $Le(e,t){return e*e<1&&t===1/0||e*e>1&&t===-1/0?0:Math.pow(e,t)}$Le.signature=p9;function bK(e,t){if(t<e)return 1;if(t===e)return t;var n=t+e>>1;return bK(e,n)*bK(n+1,t)}function T4(e){var t;if(Vs(e))return e<=0?isFinite(e)?1/0:NaN:e>171?1/0:bK(1,e-1);if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*T4(1-e));if(e>=171.35)return 1/0;if(e>85){var n=e*e,r=n*e,i=r*e,s=i*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*n)-139/(51840*r)-571/(2488320*i)+163879/(209018880*s)+5246819/(75246796800*s*e))}--e,t=PT[0];for(var o=1;o<PT.length;++o)t+=PT[o]/(e+o);var a=e+FLe+.5;return Math.sqrt(2*Math.PI)*Math.pow(a,e+.5)*Math.exp(-a)*t}T4.signature="number";var FLe=4.7421875,PT=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],LLe=.9189385332046728,pBt=5,mBt=7,b1e=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function C4(e){if(e<0)return NaN;if(e===0)return 1/0;if(!isFinite(e))return e;if(e<.5)return Math.log(Math.PI/Math.sin(Math.PI*e))-C4(1-e);e=e-1;for(var t=e+pBt+.5,n=b1e[0],r=mBt-1;r>=1;r--)n+=b1e[r]/(e+r);return LLe+(e+.5)*Math.log(t)-t+Math.log(n)}C4.signature="number";function gBt(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return e.isNaN()||t.isNaN()?!1:!e.isFinite()||!t.isFinite()?e.eq(t):e.eq(t)?!0:e.minus(t).abs().lte(e.constructor.max(e.constructor.max(e.abs(),t.abs()).mul(n),r))}var w1e="isZero",yBt=["typed","equalScalar"],vBt=ei(w1e,yBt,e=>{var{typed:t,equalScalar:n}=e;return t(w1e,{"number | BigNumber | Complex | Fraction":r=>n(r,0),bigint:r=>r===0n,Unit:t.referToSelf(r=>i=>t.find(r,i.valueType())(i.value)),"Array | Matrix":t.referToSelf(r=>i=>Fb(i,r))})});function bBt(e,t,n,r){return w4(e.re,t.re,n,r)&&w4(e.im,t.im,n,r)}var wBt=ei("compareUnits",["typed"],e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return t.find(n,[r.valueType(),i.valueType()])(r.value,i.value)})}}),A4="equalScalar",_Bt=["typed","config"],EBt=ei(A4,_Bt,e=>{var{typed:t,config:n}=e,r=wBt({typed:t});return t(A4,{"boolean, boolean":function(s,o){return s===o},"number, number":function(s,o){return w4(s,o,n.relTol,n.absTol)},"BigNumber, BigNumber":function(s,o){return s.eq(o)||gBt(s,o,n.relTol,n.absTol)},"bigint, bigint":function(s,o){return s===o},"Fraction, Fraction":function(s,o){return s.equals(o)},"Complex, Complex":function(s,o){return bBt(s,o,n.relTol,n.absTol)}},r)});ei(A4,["typed","config"],e=>{var{typed:t,config:n}=e;return t(A4,{"number, number":function(i,s){return w4(i,s,n.relTol,n.absTol)}})});var xBt="SparseMatrix",SBt=["typed","equalScalar","Matrix"],TBt=ei(xBt,SBt,e=>{var{typed:t,equalScalar:n,Matrix:r}=e;function i(m,g){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(g&&!i0(g))throw new Error("Invalid datatype: "+g);if(aa(m))s(this,m,g);else if(m&&Fo(m.index)&&Fo(m.ptr)&&Fo(m.size))this._values=m.values,this._index=m.index,this._ptr=m.ptr,this._size=m.size,this._datatype=g||m.datatype;else if(Fo(m))o(this,m,g);else{if(m)throw new TypeError("Unsupported type of data ("+m1(m)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=g}}function s(m,g,y){g.type==="SparseMatrix"?(m._values=g._values?_o(g._values):void 0,m._index=_o(g._index),m._ptr=_o(g._ptr),m._size=_o(g._size),m._datatype=y||g._datatype):o(m,g.valueOf(),y||g._datatype)}function o(m,g,y){m._values=[],m._index=[],m._ptr=[],m._datatype=y;var b=g.length,w=0,S=n,E=0;if(i0(y)&&(S=t.find(n,[y,y])||n,E=t.convert(0,y)),b>0){var T=0;do{m._ptr.push(m._index.length);for(var C=0;C<b;C++){var A=g[C];if(Fo(A)){if(T===0&&w<A.length&&(w=A.length),T<A.length){var I=A[T];S(I,E)||(m._values.push(I),m._index.push(C))}}else T===0&&w<1&&(w=1),S(A,E)||(m._values.push(A),m._index.push(C))}T++}while(T<w)}m._ptr.push(m._index.length),m._size=[b,w]}i.prototype=new r,i.prototype.createSparseMatrix=function(m,g){return new i(m,g)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return Zre(this._values,m1)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(m,g){return new i(m,g)},i.prototype.density=function(){var m=this._size[0],g=this._size[1];return m!==0&&g!==0?this._index.length/(m*g):0},i.prototype.subset=function(m,g,y){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return a(this,m);case 2:case 3:return u(this,m,g,y);default:throw new SyntaxError("Wrong number of arguments")}};function a(m,g){if(!Yre(g))throw new TypeError("Invalid index");var y=g.isScalar();if(y)return m.get(g.min());var b=g.size();if(b.length!==m._size.length)throw new $s(b.length,m._size.length);var w,S,E,T,C=g.min(),A=g.max();for(w=0,S=m._size.length;w<S;w++)eo(C[w],m._size[w]),eo(A[w],m._size[w]);var I=m._values,k=m._index,N=m._ptr,F=g.dimension(0),M=g.dimension(1),L=[],j=[];F.forEach(function(G,$){j[G]=$[0],L[G]=!0});var B=I?[]:void 0,z=[],V=[];return M.forEach(function(G){for(V.push(z.length),E=N[G],T=N[G+1];E<T;E++)w=k[E],L[w]===!0&&(z.push(j[w]),B&&B.push(I[E]))}),V.push(z.length),new i({values:B,index:z,ptr:V,size:b,datatype:m._datatype})}function u(m,g,y,b){if(!g||g.isIndex!==!0)throw new TypeError("Invalid index");var w=g.size(),S=g.isScalar(),E;if(aa(y)?(E=y.size(),y=y.toArray()):E=Pl(y),S){if(E.length!==0)throw new TypeError("Scalar expected");m.set(g.min(),y,b)}else{if(w.length!==1&&w.length!==2)throw new $s(w.length,m._size.length,"<");if(E.length<w.length){for(var T=0,C=0;w[T]===1&&E[T]===1;)T++;for(;w[T]===1;)C++,T++;y=TLe(y,w.length,C,E)}if(!BC(w,E))throw new $s(w,E,">");if(w.length===1){var A=g.dimension(0);A.forEach(function(N,F){eo(N),m.set([N,0],y[F[0]],b)})}else{var I=g.dimension(0),k=g.dimension(1);I.forEach(function(N,F){eo(N),k.forEach(function(M,L){eo(M),m.set([N,M],y[F[0]][L[0]],b)})})}}return m}i.prototype.get=function(m){if(!Fo(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new $s(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var g=m[0],y=m[1];eo(g,this._size[0]),eo(y,this._size[1]);var b=l(g,this._ptr[y],this._ptr[y+1],this._index);return b<this._ptr[y+1]&&this._index[b]===g?this._values[b]:0},i.prototype.set=function(m,g,y){if(!Fo(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new $s(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var b=m[0],w=m[1],S=this._size[0],E=this._size[1],T=n,C=0;i0(this._datatype)&&(T=t.find(n,[this._datatype,this._datatype])||n,C=t.convert(0,this._datatype)),(b>S-1||w>E-1)&&(d(this,Math.max(b+1,S),Math.max(w+1,E),y),S=this._size[0],E=this._size[1]),eo(b,S),eo(w,E);var A=l(b,this._ptr[w],this._ptr[w+1],this._index);return A<this._ptr[w+1]&&this._index[A]===b?T(g,C)?c(A,w,this._values,this._index,this._ptr):this._values[A]=g:T(g,C)||f(A,b,w,g,this._values,this._index,this._ptr),this};function l(m,g,y,b){if(y-g===0)return y;for(var w=g;w<y;w++)if(b[w]===m)return w;return g}function c(m,g,y,b,w){y.splice(m,1),b.splice(m,1);for(var S=g+1;S<w.length;S++)w[S]--}function f(m,g,y,b,w,S,E){w.splice(m,0,b),S.splice(m,0,g);for(var T=y+1;T<E.length;T++)E[T]++}i.prototype.resize=function(m,g,y){if(!y4(m))throw new TypeError("Array or Matrix expected");var b=m.valueOf().map(S=>Array.isArray(S)&&S.length===1?S[0]:S);if(b.length!==2)throw new Error("Only two dimensions matrix are supported");b.forEach(function(S){if(!ds(S)||!Vs(S)||S<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Lo(b)+")")});var w=y?this.clone():this;return d(w,b[0],b[1],g)};function d(m,g,y,b){var w=b||0,S=n,E=0;i0(m._datatype)&&(S=t.find(n,[m._datatype,m._datatype])||n,E=t.convert(0,m._datatype),w=t.convert(w,m._datatype));var T=!S(w,E),C=m._size[0],A=m._size[1],I,k,N;if(y>A){for(k=A;k<y;k++)if(m._ptr[k]=m._values.length,T)for(I=0;I<C;I++)m._values.push(w),m._index.push(I);m._ptr[y]=m._values.length}else y<A&&(m._ptr.splice(y+1,A-y),m._values.splice(m._ptr[y],m._values.length),m._index.splice(m._ptr[y],m._index.length));if(A=y,g>C){if(T){var F=0;for(k=0;k<A;k++){m._ptr[k]=m._ptr[k]+F,N=m._ptr[k+1]+F;var M=0;for(I=C;I<g;I++,M++)m._values.splice(N+M,0,w),m._index.splice(N+M,0,I),F++}m._ptr[A]=m._values.length}}else if(g<C){var L=0;for(k=0;k<A;k++){m._ptr[k]=m._ptr[k]-L;var j=m._ptr[k],B=m._ptr[k+1]-L;for(N=j;N<B;N++)I=m._index[N],I>g-1&&(m._values.splice(N,1),m._index.splice(N,1),L++)}m._ptr[k]=m._values.length}return m._size[0]=g,m._size[1]=y,m}i.prototype.reshape=function(m,g){if(!Fo(m))throw new TypeError("Array expected");if(m.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");m.forEach(function(G){if(!ds(G)||!Vs(G)||G<=-2||G===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Lo(m)+")")});var y=this._size[0]*this._size[1];m=Jre(m,y);var b=m[0]*m[1];if(y!==b)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var w=g?this.clone():this;if(this._size[0]===m[0]&&this._size[1]===m[1])return w;for(var S=[],E=0;E<w._ptr.length;E++)for(var T=0;T<w._ptr[E+1]-w._ptr[E];T++)S.push(E);for(var C=w._values.slice(),A=w._index.slice(),I=0;I<w._index.length;I++){var k=A[I],N=S[I],F=k*w._size[1]+N;S[I]=F%m[1],A[I]=Math.floor(F/m[1])}w._values.length=0,w._index.length=0,w._ptr.length=m[1]+1,w._size=m.slice();for(var M=0;M<w._ptr.length;M++)w._ptr[M]=0;for(var L=0;L<C.length;L++){var j=A[L],B=S[L],z=C[L],V=l(j,w._ptr[B],w._ptr[B+1],w._index);f(V,j,B,z,w._values,w._index,w._ptr)}return w},i.prototype.clone=function(){var m=new i({values:this._values?_o(this._values):void 0,index:_o(this._index),ptr:_o(this._ptr),size:_o(this._size),datatype:this._datatype});return m},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(m,g){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var y=this,b=this._size[0],w=this._size[1],S=S4(m,y,"map"),E=function(C,A,I){return S(C,[A,I],y)};return h(this,0,b-1,0,w-1,E,g)};function h(m,g,y,b,w,S,E){var T=[],C=[],A=[],I=n,k=0;i0(m._datatype)&&(I=t.find(n,[m._datatype,m._datatype])||n,k=t.convert(0,m._datatype));for(var N=function(q,Y,Z){var ae=S(q,Y,Z);I(ae,k)||(T.push(ae),C.push(Y))},F=b;F<=w;F++){A.push(T.length);var M=m._ptr[F],L=m._ptr[F+1];if(E)for(var j=M;j<L;j++){var B=m._index[j];B>=g&&B<=y&&N(m._values[j],B-g,F-b)}else{for(var z={},V=M;V<L;V++){var G=m._index[V];z[G]=m._values[V]}for(var $=g;$<=y;$++){var W=$ in z?z[$]:0;N(W,$-g,F-b)}}}return A.push(T.length),new i({values:T,index:C,ptr:A,size:[y-g+1,w-b+1]})}i.prototype.forEach=function(m,g){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var y=this,b=this._size[0],w=this._size[1],S=S4(m,y,"forEach"),E=0;E<w;E++){var T=this._ptr[E],C=this._ptr[E+1];if(g)for(var A=T;A<C;A++){var I=this._index[A];S(this._values[A],[I,E],y)}else{for(var k={},N=T;N<C;N++){var F=this._index[N];k[F]=this._values[N]}for(var M=0;M<b;M++){var L=M in k?k[M]:0;S(L,[M,E],y)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var m=this._size[1],g=0;g<m;g++)for(var y=this._ptr[g],b=this._ptr[g+1],w=y;w<b;w++){var S=this._index[w];yield{value:this._values[w],index:[S,g]}}},i.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(m,g,y,b,w){var S=b[0],E=b[1],T=[],C,A;for(C=0;C<S;C++)for(T[C]=[],A=0;A<E;A++)T[C][A]=0;for(A=0;A<E;A++)for(var I=y[A],k=y[A+1],N=I;N<k;N++)C=g[N],T[C][A]=m?w?_o(m[N]):m[N]:1;return T}return i.prototype.format=function(m){for(var g=this._size[0],y=this._size[1],b=this.density(),w="Sparse Matrix ["+Lo(g,m)+" x "+Lo(y,m)+"] density: "+Lo(b,m)+`
`,S=0;S<y;S++)for(var E=this._ptr[S],T=this._ptr[S+1],C=E;C<T;C++){var A=this._index[C];w+=`
    (`+Lo(A,m)+", "+Lo(S,m)+") ==> "+(this._values?Lo(this._values[C],m):"X")}return w},i.prototype.toString=function(){return Lo(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(m){if(m){if(zo(m)&&(m=m.toNumber()),!ds(m)||!Vs(m))throw new TypeError("The parameter k must be an integer number")}else m=0;var g=m>0?m:0,y=m<0?-m:0,b=this._size[0],w=this._size[1],S=Math.min(b-y,w-g),E=[],T=[],C=[];C[0]=0;for(var A=g;A<w&&E.length<S;A++)for(var I=this._ptr[A],k=this._ptr[A+1],N=I;N<k;N++){var F=this._index[N];if(F===A-g+y){E.push(this._values[N]),T[E.length-1]=F-y;break}}return C.push(E.length),new i({values:E,index:T,ptr:C,size:[S,1]})},i.fromJSON=function(m){return new i(m)},i.diagonal=function(m,g,y,b,w){if(!Fo(m))throw new TypeError("Array expected, size parameter");if(m.length!==2)throw new Error("Only two dimensions matrix are supported");if(m=m.map(function(G){if(zo(G)&&(G=G.toNumber()),!ds(G)||!Vs(G)||G<1)throw new Error("Size values must be positive integers");return G}),y){if(zo(y)&&(y=y.toNumber()),!ds(y)||!Vs(y))throw new TypeError("The parameter k must be an integer number")}else y=0;var S=n,E=0;i0(w)&&(S=t.find(n,[w,w])||n,E=t.convert(0,w));var T=y>0?y:0,C=y<0?-y:0,A=m[0],I=m[1],k=Math.min(A-C,I-T),N;if(Fo(g)){if(g.length!==k)throw new Error("Invalid value array length");N=function($){return g[$]}}else if(aa(g)){var F=g.size();if(F.length!==1||F[0]!==k)throw new Error("Invalid matrix length");N=function($){return g.get([$])}}else N=function(){return g};for(var M=[],L=[],j=[],B=0;B<I;B++){j.push(M.length);var z=B-T;if(z>=0&&z<k){var V=N(z);S(V,E)||(L.push(z+C),M.push(V))}}return j.push(M.length),new i({values:M,index:L,ptr:j,size:[A,I]})},i.prototype.swapRows=function(m,g){if(!ds(m)||!Vs(m)||!ds(g)||!Vs(g))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return eo(m,this._size[0]),eo(g,this._size[0]),i._swapRows(m,g,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(m,g,y,b,w){for(var S=b[m],E=b[m+1],T=S;T<E;T++)w(y[T],g[T])},i._swapRows=function(m,g,y,b,w,S){for(var E=0;E<y;E++){var T=S[E],C=S[E+1],A=l(m,T,C,w),I=l(g,T,C,w);if(A<C&&I<C&&w[A]===m&&w[I]===g){if(b){var k=b[A];b[A]=b[I],b[I]=k}continue}if(A<C&&w[A]===m&&(I>=C||w[I]!==g)){var N=b?b[A]:void 0;w.splice(I,0,g),b&&b.splice(I,0,N),w.splice(I<=A?A+1:A,1),b&&b.splice(I<=A?A+1:A,1);continue}if(I<C&&w[I]===g&&(A>=C||w[A]!==m)){var F=b?b[I]:void 0;w.splice(A,0,m),b&&b.splice(A,0,F),w.splice(A<=I?I+1:I,1),b&&b.splice(A<=I?I+1:I,1)}}},i},{isClass:!0}),CBt="number",ABt=["typed"];function DBt(e){var t=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(t){var n={"0b":2,"0o":8,"0x":16}[t[1]],r=t[2],i=t[3];return{input:e,radix:n,integerPart:r,fractionalPart:i}}else return null}function IBt(e){for(var t=parseInt(e.integerPart,e.radix),n=0,r=0;r<e.fractionalPart.length;r++){var i=parseInt(e.fractionalPart[r],e.radix);n+=i/Math.pow(e.radix,r+1)}var s=t+n;if(isNaN(s))throw new SyntaxError('String "'+e.input+'" is not a valid number');return s}var kBt=ei(CBt,ABt,e=>{var{typed:t}=e,n=t("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var s=DBt(i);if(s)return IBt(s);var o=0,a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);a&&(o=Number(a[2]),i=a[1]);var u=Number(i);if(isNaN(u))throw new SyntaxError('String "'+i+'" is not a valid number');if(a){if(u>2**o-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));u>=2**(o-1)&&(u=u-2**o)}return u},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:t.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),null:function(i){return 0},"Unit, string | Unit":function(i,s){return i.toNumber(s)},"Array | Matrix":t.referToSelf(r=>i=>Fb(i,r))});return n.fromJSON=function(r){return parseFloat(r.value)},n}),RBt="bignumber",NBt=["typed","BigNumber"],PBt=ei(RBt,NBt,e=>{var{typed:t,BigNumber:n}=e;return t("bignumber",{"":function(){return new n(0)},number:function(i){return new n(i+"")},string:function(i){var s=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(s){var o=s[2],a=n(s[1]),u=new n(2).pow(Number(o));if(a.gt(u.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var l=new n(2).pow(Number(o)-1);return a.gte(l)?a.sub(u):a}return new n(i)},BigNumber:function(i){return i},bigint:function(i){return new n(i.toString())},Unit:t.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),Fraction:function(i){return new n(String(i.n)).div(String(i.d)).times(String(i.s))},null:function(i){return new n(0)},"Array | Matrix":t.referToSelf(r=>i=>Fb(i,r))})}),OBt="fraction",MBt=["typed","Fraction"],$Bt=ei(OBt,MBt,e=>{var{typed:t,Fraction:n}=e;return t("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new n(i)},string:function(i){return new n(i)},"number, number":function(i,s){return new n(i,s)},"bigint, bigint":function(i,s){return new n(i,s)},null:function(i){return new n(0)},BigNumber:function(i){return new n(i.toString())},bigint:function(i){return new n(i.toString())},Fraction:function(i){return i},Unit:t.referToSelf(r=>i=>{var s=i.clone();return s.value=r(i.value),s}),Object:function(i){return new n(i)},"Array | Matrix":t.referToSelf(r=>i=>Fb(i,r))})}),_1e="matrix",FBt=["typed","Matrix","DenseMatrix","SparseMatrix"],LBt=ei(_1e,FBt,e=>{var{typed:t,Matrix:n,DenseMatrix:r,SparseMatrix:i}=e;return t(_1e,{"":function(){return s([])},string:function(a){return s([],a)},"string, string":function(a,u){return s([],a,u)},Array:function(a){return s(a)},Matrix:function(a){return s(a,a.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(o,a,u){if(a==="dense"||a==="default"||a===void 0)return new r(o,u);if(a==="sparse")return new i(o,u);throw new TypeError("Unknown matrix type "+JSON.stringify(a)+".")}}),E1e="unaryMinus",BBt=["typed"],jBt=ei(E1e,BBt,e=>{var{typed:t}=e;return t(E1e,{number:MLe,"Complex | BigNumber | Fraction":n=>n.neg(),bigint:n=>-n,Unit:t.referToSelf(n=>r=>{var i=r.clone();return i.value=t.find(n,i.valueType())(r.value),i}),"Array | Matrix":t.referToSelf(n=>r=>Fb(r,n))})}),x1e="abs",UBt=["typed"],zBt=ei(x1e,UBt,e=>{var{typed:t}=e;return t(x1e,{number:RLe,"Complex | BigNumber | Fraction | Unit":n=>n.abs(),bigint:n=>n<0n?-n:n,"Array | Matrix":t.referToSelf(n=>r=>Fb(r,n))})}),S1e="addScalar",VBt=["typed"],HBt=ei(S1e,VBt,e=>{var{typed:t}=e;return t(S1e,{"number, number":NLe,"Complex, Complex":function(r,i){return r.add(i)},"BigNumber, BigNumber":function(r,i){return r.plus(i)},"bigint, bigint":function(r,i){return r+i},"Fraction, Fraction":function(r,i){return r.add(i)},"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var s=r.clone();return s.value=t.find(n,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),T1e="subtractScalar",qBt=["typed"],WBt=ei(T1e,qBt,e=>{var{typed:t}=e;return t(T1e,{"number, number":PLe,"Complex, Complex":function(r,i){return r.sub(i)},"BigNumber, BigNumber":function(r,i){return r.minus(i)},"bigint, bigint":function(r,i){return r-i},"Fraction, Fraction":function(r,i){return r.sub(i)},"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var s=r.clone();return s.value=t.find(n,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),GBt="matAlgo11xS0s",YBt=["typed","equalScalar"],KBt=ei(GBt,YBt,e=>{var{typed:t,equalScalar:n}=e;return function(i,s,o,a){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],p=f[1],m,g=n,y=0,b=o;typeof d=="string"&&(m=d,g=t.find(n,[m,m]),y=t.convert(0,m),s=t.convert(s,m),b=t.find(o,[m,m]));for(var w=[],S=[],E=[],T=0;T<p;T++){E[T]=S.length;for(var C=c[T],A=c[T+1],I=C;I<A;I++){var k=l[I],N=a?b(s,u[I]):b(u[I],s);g(N,y)||(S.push(k),w.push(N))}}return E[p]=S.length,i.createSparseMatrix({values:w,index:S,ptr:E,size:[h,p],datatype:m})}}),XBt="matAlgo14xDs",QBt=["typed"],JBt=ei(XBt,QBt,e=>{var{typed:t}=e;return function(i,s,o,a){var u=i._data,l=i._size,c=i._datatype,f,d=o;typeof c=="string"&&(f=c,s=t.convert(s,f),d=t.find(o,[f,f]));var h=l.length>0?n(d,0,l,l[0],u,s,a):[];return i.createDenseMatrix({data:h,size:_o(l),datatype:f})};function n(r,i,s,o,a,u,l){var c=[];if(i===s.length-1)for(var f=0;f<o;f++)c[f]=l?r(u,a[f]):r(a[f],u);else for(var d=0;d<o;d++)c[d]=n(r,i+1,s,s[i+1],a[d],u,l);return c}}),ZBt="multiplyScalar",e9t=["typed"],t9t=ei(ZBt,e9t,e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":OLe,"Complex, Complex":function(r,i){return r.mul(i)},"BigNumber, BigNumber":function(r,i){return r.times(i)},"bigint, bigint":function(r,i){return r*i},"Fraction, Fraction":function(r,i){return r.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(n,r)=>r.multiply(n),"Unit, number | Fraction | BigNumber | Complex | Unit":(n,r)=>n.multiply(r)})}),C1e="multiply",n9t=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],r9t=ei(C1e,n9t,e=>{var{typed:t,matrix:n,addScalar:r,multiplyScalar:i,equalScalar:s,dot:o}=e,a=KBt({typed:t,equalScalar:s}),u=JBt({typed:t});function l(E,T){switch(E.length){case 1:switch(T.length){case 1:if(E[0]!==T[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(E[0]!==T[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+E[0]+") must match Matrix rows ("+T[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+T.length+" dimensions)")}break;case 2:switch(T.length){case 1:if(E[1]!==T[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+E[1]+") must match Vector length ("+T[0]+")");break;case 2:if(E[1]!==T[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+E[1]+") must match Matrix B rows ("+T[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+T.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+E.length+" dimensions)")}}function c(E,T,C){if(C===0)throw new Error("Cannot multiply two empty vectors");return o(E,T)}function f(E,T){if(T.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(E,T)}function d(E,T){var C=E._data,A=E._size,I=E._datatype||E.getDataType(),k=T._data,N=T._size,F=T._datatype||T.getDataType(),M=A[0],L=N[1],j,B=r,z=i;I&&F&&I===F&&typeof I=="string"&&I!=="mixed"&&(j=I,B=t.find(r,[j,j]),z=t.find(i,[j,j]));for(var V=[],G=0;G<L;G++){for(var $=z(C[0],k[0][G]),W=1;W<M;W++)$=B($,z(C[W],k[W][G]));V[G]=$}return E.createDenseMatrix({data:V,size:[L],datatype:I===E._datatype&&F===T._datatype?j:void 0})}var h=t("_multiplyMatrixVector",{"DenseMatrix, any":m,"SparseMatrix, any":b}),p=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":g,"DenseMatrix, SparseMatrix":y,"SparseMatrix, DenseMatrix":w,"SparseMatrix, SparseMatrix":S});function m(E,T){var C=E._data,A=E._size,I=E._datatype||E.getDataType(),k=T._data,N=T._datatype||T.getDataType(),F=A[0],M=A[1],L,j=r,B=i;I&&N&&I===N&&typeof I=="string"&&I!=="mixed"&&(L=I,j=t.find(r,[L,L]),B=t.find(i,[L,L]));for(var z=[],V=0;V<F;V++){for(var G=C[V],$=B(G[0],k[0]),W=1;W<M;W++)$=j($,B(G[W],k[W]));z[V]=$}return E.createDenseMatrix({data:z,size:[F],datatype:I===E._datatype&&N===T._datatype?L:void 0})}function g(E,T){var C=E._data,A=E._size,I=E._datatype||E.getDataType(),k=T._data,N=T._size,F=T._datatype||T.getDataType(),M=A[0],L=A[1],j=N[1],B,z=r,V=i;I&&F&&I===F&&typeof I=="string"&&I!=="mixed"&&I!=="mixed"&&(B=I,z=t.find(r,[B,B]),V=t.find(i,[B,B]));for(var G=[],$=0;$<M;$++){var W=C[$];G[$]=[];for(var K=0;K<j;K++){for(var q=V(W[0],k[0][K]),Y=1;Y<L;Y++)q=z(q,V(W[Y],k[Y][K]));G[$][K]=q}}return E.createDenseMatrix({data:G,size:[M,j],datatype:I===E._datatype&&F===T._datatype?B:void 0})}function y(E,T){var C=E._data,A=E._size,I=E._datatype||E.getDataType(),k=T._values,N=T._index,F=T._ptr,M=T._size,L=T._datatype||T._data===void 0?T._datatype:T.getDataType();if(!k)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var j=A[0],B=M[1],z,V=r,G=i,$=s,W=0;I&&L&&I===L&&typeof I=="string"&&I!=="mixed"&&(z=I,V=t.find(r,[z,z]),G=t.find(i,[z,z]),$=t.find(s,[z,z]),W=t.convert(0,z));for(var K=[],q=[],Y=[],Z=T.createSparseMatrix({values:K,index:q,ptr:Y,size:[j,B],datatype:I===E._datatype&&L===T._datatype?z:void 0}),ae=0;ae<B;ae++){Y[ae]=q.length;var be=F[ae],Se=F[ae+1];if(Se>be)for(var we=0,Ce=0;Ce<j;Ce++){for(var Le=Ce+1,ke=void 0,Ze=be;Ze<Se;Ze++){var Ke=N[Ze];we!==Le?(ke=G(C[Ce][Ke],k[Ze]),we=Le):ke=V(ke,G(C[Ce][Ke],k[Ze]))}we===Le&&!$(ke,W)&&(q.push(Ce),K.push(ke))}}return Y[B]=q.length,Z}function b(E,T){var C=E._values,A=E._index,I=E._ptr,k=E._datatype||E._data===void 0?E._datatype:E.getDataType();if(!C)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var N=T._data,F=T._datatype||T.getDataType(),M=E._size[0],L=T._size[0],j=[],B=[],z=[],V,G=r,$=i,W=s,K=0;k&&F&&k===F&&typeof k=="string"&&k!=="mixed"&&(V=k,G=t.find(r,[V,V]),$=t.find(i,[V,V]),W=t.find(s,[V,V]),K=t.convert(0,V));var q=[],Y=[];z[0]=0;for(var Z=0;Z<L;Z++){var ae=N[Z];if(!W(ae,K))for(var be=I[Z],Se=I[Z+1],we=be;we<Se;we++){var Ce=A[we];Y[Ce]?q[Ce]=G(q[Ce],$(ae,C[we])):(Y[Ce]=!0,B.push(Ce),q[Ce]=$(ae,C[we]))}}for(var Le=B.length,ke=0;ke<Le;ke++){var Ze=B[ke];j[ke]=q[Ze]}return z[1]=B.length,E.createSparseMatrix({values:j,index:B,ptr:z,size:[M,1],datatype:k===E._datatype&&F===T._datatype?V:void 0})}function w(E,T){var C=E._values,A=E._index,I=E._ptr,k=E._datatype||E._data===void 0?E._datatype:E.getDataType();if(!C)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var N=T._data,F=T._datatype||T.getDataType(),M=E._size[0],L=T._size[0],j=T._size[1],B,z=r,V=i,G=s,$=0;k&&F&&k===F&&typeof k=="string"&&k!=="mixed"&&(B=k,z=t.find(r,[B,B]),V=t.find(i,[B,B]),G=t.find(s,[B,B]),$=t.convert(0,B));for(var W=[],K=[],q=[],Y=E.createSparseMatrix({values:W,index:K,ptr:q,size:[M,j],datatype:k===E._datatype&&F===T._datatype?B:void 0}),Z=[],ae=[],be=0;be<j;be++){q[be]=K.length;for(var Se=be+1,we=0;we<L;we++){var Ce=N[we][be];if(!G(Ce,$))for(var Le=I[we],ke=I[we+1],Ze=Le;Ze<ke;Ze++){var Ke=A[Ze];ae[Ke]!==Se?(ae[Ke]=Se,K.push(Ke),Z[Ke]=V(Ce,C[Ze])):Z[Ke]=z(Z[Ke],V(Ce,C[Ze]))}}for(var Ct=q[be],wt=K.length,Re=Ct;Re<wt;Re++){var He=K[Re];W[Re]=Z[He]}}return q[j]=K.length,Y}function S(E,T){var C=E._values,A=E._index,I=E._ptr,k=E._datatype||E._data===void 0?E._datatype:E.getDataType(),N=T._values,F=T._index,M=T._ptr,L=T._datatype||T._data===void 0?T._datatype:T.getDataType(),j=E._size[0],B=T._size[1],z=C&&N,V,G=r,$=i;k&&L&&k===L&&typeof k=="string"&&k!=="mixed"&&(V=k,G=t.find(r,[V,V]),$=t.find(i,[V,V]));for(var W=z?[]:void 0,K=[],q=[],Y=E.createSparseMatrix({values:W,index:K,ptr:q,size:[j,B],datatype:k===E._datatype&&L===T._datatype?V:void 0}),Z=z?[]:void 0,ae=[],be,Se,we,Ce,Le,ke,Ze,Ke,Ct=0;Ct<B;Ct++){q[Ct]=K.length;var wt=Ct+1;for(Le=M[Ct],ke=M[Ct+1],Ce=Le;Ce<ke;Ce++)if(Ke=F[Ce],z)for(Se=I[Ke],we=I[Ke+1],be=Se;be<we;be++)Ze=A[be],ae[Ze]!==wt?(ae[Ze]=wt,K.push(Ze),Z[Ze]=$(N[Ce],C[be])):Z[Ze]=G(Z[Ze],$(N[Ce],C[be]));else for(Se=I[Ke],we=I[Ke+1],be=Se;be<we;be++)Ze=A[be],ae[Ze]!==wt&&(ae[Ze]=wt,K.push(Ze));if(z)for(var Re=q[Ct],He=K.length,lt=Re;lt<He;lt++){var St=K[lt];W[lt]=Z[St]}}return q[B]=K.length,Y}return t(C1e,i,{"Array, Array":t.referTo("Matrix, Matrix",E=>(T,C)=>{l(Pl(T),Pl(C));var A=E(n(T),n(C));return aa(A)?A.valueOf():A}),"Matrix, Matrix":function(T,C){var A=T.size(),I=C.size();return l(A,I),A.length===1?I.length===1?c(T,C,A[0]):f(T,C):I.length===1?h(T,C):p(T,C)},"Matrix, Array":t.referTo("Matrix,Matrix",E=>(T,C)=>E(T,n(C))),"Array, Matrix":t.referToSelf(E=>(T,C)=>E(n(T,C.storage()),C)),"SparseMatrix, any":function(T,C){return a(T,C,i,!1)},"DenseMatrix, any":function(T,C){return u(T,C,i,!1)},"any, SparseMatrix":function(T,C){return a(C,T,i,!0)},"any, DenseMatrix":function(T,C){return u(C,T,i,!0)},"Array, any":function(T,C){return u(n(T),C,i,!1).valueOf()},"any, Array":function(T,C){return u(n(C),T,i,!0).valueOf()},"any, any":i,"any, any, ...any":t.referToSelf(E=>(T,C,A)=>{for(var I=E(T,C),k=0;k<A.length;k++)I=E(I,A[k]);return I})})}),A1e="conj",i9t=["typed"],s9t=ei(A1e,i9t,e=>{var{typed:t}=e;return t(A1e,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.conjugate(),"Array | Matrix":t.referToSelf(n=>r=>Fb(r,n))})}),D1e="identity",o9t=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],a9t=ei(D1e,o9t,e=>{var{typed:t,config:n,matrix:r,BigNumber:i,DenseMatrix:s,SparseMatrix:o}=e;return t(D1e,{"":function(){return n.matrix==="Matrix"?r([]):[]},string:function(c){return r(c)},"number | BigNumber":function(c){return u(c,c,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return u(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return u(c,f,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,d){return u(c,f,d)},Array:function(c){return a(c)},"Array, string":function(c,f){return a(c,f)},Matrix:function(c){return a(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return a(c.valueOf(),f)}});function a(l,c){switch(l.length){case 0:return c?r(c):[];case 1:return u(l[0],l[0],c);case 2:return u(l[0],l[1],c);default:throw new Error("Vector containing two values expected")}}function u(l,c,f){var d=zo(l)||zo(c)?i:null;if(zo(l)&&(l=l.toNumber()),zo(c)&&(c=c.toNumber()),!Vs(l)||l<1)throw new Error("Parameters in function identity must be positive integers");if(!Vs(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var h=d?new i(1):1,p=d?new d(0):0,m=[l,c];if(f){if(f==="sparse")return o.diagonal(m,h,0,p);if(f==="dense")return s.diagonal(m,h,0,p);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var g=yK([],m,p),y=l<c?l:c,b=0;b<y;b++)g[b][b]=h;return g}});function u9t(){throw new Error('No "bignumber" implementation available')}function l9t(){throw new Error('No "fraction" implementation available')}function c9t(){throw new Error('No "matrix" implementation available')}var I1e="size",f9t=["typed","config","?matrix"],d9t=ei(I1e,f9t,e=>{var{typed:t,config:n,matrix:r}=e;return t(I1e,{Matrix:function(s){return s.create(s.size(),"number")},Array:Pl,string:function(s){return n.matrix==="Array"?[s.length]:r([s.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(s){return n.matrix==="Array"?[]:r?r([],"dense","number"):c9t()}})}),h9t="numeric",p9t=["number","?bignumber","?fraction"],m9t=ei(h9t,p9t,e=>{var{number:t,bignumber:n,fraction:r}=e,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:o=>t(o),BigNumber:n?o=>n(o):u9t,bigint:o=>BigInt(o),Fraction:r?o=>r(o):l9t};return function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",l=arguments.length>2?arguments[2]:void 0;if(l!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=m1(a);if(!(c in i))throw new TypeError("Cannot convert "+a+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(u in s))throw new TypeError("Cannot convert "+a+' to type "'+u+'"; valid output types are '+Object.keys(s).join(", "));return u===c?a:s[u](a)}}),k1e="divideScalar",g9t=["typed","numeric"],y9t=ei(k1e,g9t,e=>{var{typed:t,numeric:n}=e;return t(k1e,{"number, number":function(i,s){return i/s},"Complex, Complex":function(i,s){return i.div(s)},"BigNumber, BigNumber":function(i,s){return i.div(s)},"bigint, bigint":function(i,s){return i/s},"Fraction, Fraction":function(i,s){return i.div(s)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,i)=>r.divide(i),"number | Fraction | Complex | BigNumber, Unit":(r,i)=>i.divideInto(r)})}),R1e="pow",v9t=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],b9t=ei(R1e,v9t,e=>{var{typed:t,config:n,identity:r,multiply:i,matrix:s,inv:o,number:a,fraction:u,Complex:l}=e;return t(R1e,{"number, number":c,"Complex, Complex":function(p,m){return p.pow(m)},"BigNumber, BigNumber":function(p,m){return m.isInteger()||p>=0||n.predictable?p.pow(m):new l(p.toNumber(),0).pow(m.toNumber(),0)},"bigint, bigint":(h,p)=>h**p,"Fraction, Fraction":function(p,m){var g=p.pow(m);if(g!=null)return g;if(n.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(p.valueOf(),m.valueOf())},"Array, number":f,"Array, BigNumber":function(p,m){return f(p,m.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(p,m){return d(p,m.toNumber())},"Unit, number | BigNumber":function(p,m){return p.pow(m)}});function c(h,p){if(n.predictable&&!Vs(p)&&h<0)try{var m=u(p),g=a(m);if((p===g||Math.abs((p-g)/p)<1e-14)&&m.d%2n===1n)return(m.n%2n===0n?1:-1)*Math.pow(-h,p)}catch{}return n.predictable&&(h<-1&&p===1/0||h>-1&&h<0&&p===-1/0)?NaN:Vs(p)||h>=0||n.predictable?$Le(h,p):h*h<1&&p===1/0||h*h>1&&p===-1/0?0:new l(h,0).pow(p,0)}function f(h,p){if(!Vs(p))throw new TypeError("For A^b, b must be an integer (value is "+p+")");var m=Pl(h);if(m.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+m.length+" dimensions)");if(m[0]!==m[1])throw new Error("For A^b, A must be square (size is "+m[0]+"x"+m[1]+")");if(p<0)try{return f(o(h),-p)}catch(b){throw b.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+p+")"):b}for(var g=r(m[0]).valueOf(),y=h;p>=1;)(p&1)===1&&(g=i(y,g)),p>>=1,y=i(y,y);return g}function d(h,p){return s(f(h.valueOf(),p))}}),N1e="dot",w9t=["typed","addScalar","multiplyScalar","conj","size"],_9t=ei(N1e,w9t,e=>{var{typed:t,addScalar:n,multiplyScalar:r,conj:i,size:s}=e;return t(N1e,{"Array | DenseMatrix, Array | DenseMatrix":a,"SparseMatrix, SparseMatrix":u});function o(c,f){var d=l(c),h=l(f),p,m;if(d.length===1)p=d[0];else if(d.length===2&&d[1]===1)p=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(h.length===1)m=h[0];else if(h.length===2&&h[1]===1)m=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(p!==m)throw new RangeError("Vectors must have equal length ("+p+" != "+m+")");if(p===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return p}function a(c,f){var d=o(c,f),h=aa(c)?c._data:c,p=aa(c)?c._datatype||c.getDataType():void 0,m=aa(f)?f._data:f,g=aa(f)?f._datatype||f.getDataType():void 0,y=l(c).length===2,b=l(f).length===2,w=n,S=r;if(p&&g&&p===g&&typeof p=="string"&&p!=="mixed"){var E=p;w=t.find(n,[E,E]),S=t.find(r,[E,E])}if(!y&&!b){for(var T=S(i(h[0]),m[0]),C=1;C<d;C++)T=w(T,S(i(h[C]),m[C]));return T}if(!y&&b){for(var A=S(i(h[0]),m[0][0]),I=1;I<d;I++)A=w(A,S(i(h[I]),m[I][0]));return A}if(y&&!b){for(var k=S(i(h[0][0]),m[0]),N=1;N<d;N++)k=w(k,S(i(h[N][0]),m[N]));return k}if(y&&b){for(var F=S(i(h[0][0]),m[0][0]),M=1;M<d;M++)F=w(F,S(i(h[M][0]),m[M][0]));return F}}function u(c,f){o(c,f);for(var d=c._index,h=c._values,p=f._index,m=f._values,g=0,y=n,b=r,w=0,S=0;w<d.length&&S<p.length;){var E=d[w],T=p[S];if(E<T){w++;continue}if(E>T){S++;continue}E===T&&(g=y(g,b(h[w],m[S])),w++,S++)}return g}function l(c){return aa(c)?c.size():s(c)}}),P1e="det",E9t=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],x9t=ei(P1e,E9t,e=>{var{typed:t,matrix:n,subtractScalar:r,multiply:i,divideScalar:s,isZero:o,unaryMinus:a}=e;return t(P1e,{any:function(c){return _o(c)},"Array | Matrix":function(c){var f;switch(aa(c)?f=c.size():Array.isArray(c)?(c=n(c),f=c.size()):f=[],f.length){case 0:return _o(c);case 1:if(f[0]===1)return _o(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Lo(f)+")");case 2:{var d=f[0],h=f[1];if(d===h)return u(c.clone().valueOf(),d);if(h===0)return 1;throw new RangeError("Matrix must be square (size: "+Lo(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Lo(f)+")")}}});function u(l,c,f){if(c===1)return _o(l[0][0]);if(c===2)return r(i(l[0][0],l[1][1]),i(l[1][0],l[0][1]));for(var d=!1,h=new Array(c).fill(0).map((C,A)=>A),p=0;p<c;p++){var m=h[p];if(o(l[m][p])){var g=void 0;for(g=p+1;g<c;g++)if(!o(l[h[g]][p])){m=h[g],h[g]=h[p],h[p]=m,d=!d;break}if(g===c)return l[m][p]}for(var y=l[m][p],b=p===0?1:l[h[p-1]][p-1],w=p+1;w<c;w++)for(var S=h[w],E=p+1;E<c;E++)l[S][E]=s(r(i(l[S][E],y),i(l[S][p],l[m][E])),b)}var T=l[h[c-1]][c-1];return d?a(T):T}}),O1e="inv",S9t=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],T9t=ei(O1e,S9t,e=>{var{typed:t,matrix:n,divideScalar:r,addScalar:i,multiply:s,unaryMinus:o,det:a,identity:u,abs:l}=e;return t(O1e,{"Array | Matrix":function(d){var h=aa(d)?d.size():Pl(d);switch(h.length){case 1:if(h[0]===1)return aa(d)?n([r(1,d.valueOf()[0])]):[r(1,d[0])];throw new RangeError("Matrix must be square (size: "+Lo(h)+")");case 2:{var p=h[0],m=h[1];if(p===m)return aa(d)?n(c(d.valueOf(),p,m),d.storage()):c(d,p,m);throw new RangeError("Matrix must be square (size: "+Lo(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Lo(h)+")")}},any:function(d){return r(1,d)}});function c(f,d,h){var p,m,g,y,b;if(d===1){if(y=f[0][0],y===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,y)]]}else if(d===2){var w=a(f);if(w===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(f[1][1],w),r(o(f[0][1]),w)],[r(o(f[1][0]),w),r(f[0][0],w)]]}else{var S=f.concat();for(p=0;p<d;p++)S[p]=S[p].concat();for(var E=u(d).valueOf(),T=0;T<h;T++){var C=l(S[T][T]),A=T;for(p=T+1;p<d;)l(S[p][T])>C&&(C=l(S[p][T]),A=p),p++;if(C===0)throw Error("Cannot calculate inverse, determinant is zero");p=A,p!==T&&(b=S[T],S[T]=S[p],S[p]=b,b=E[T],E[T]=E[p],E[p]=b);var I=S[T],k=E[T];for(p=0;p<d;p++){var N=S[p],F=E[p];if(p!==T){if(N[T]!==0){for(g=r(o(N[T]),I[T]),m=T;m<h;m++)N[m]=i(N[m],s(g,I[m]));for(m=0;m<h;m++)F[m]=i(F[m],s(g,k[m]))}}else{for(g=I[T],m=T;m<h;m++)N[m]=r(N[m],g);for(m=0;m<h;m++)F[m]=r(F[m],g)}}}return E}}}),M1e="gamma",C9t=["typed","config","multiplyScalar","pow","BigNumber","Complex"],A9t=ei(M1e,C9t,e=>{var{typed:t,config:n,multiplyScalar:r,pow:i,BigNumber:s,Complex:o}=e;function a(l){if(l.im===0)return T4(l.re);if(l.re<.5){var c=new o(1-l.re,-l.im),f=new o(Math.PI*l.re,Math.PI*l.im);return new o(Math.PI).div(f.sin()).div(a(c))}l=new o(l.re-1,l.im);for(var d=new o(PT[0],0),h=1;h<PT.length;++h){var p=new o(PT[h],0);d=d.add(p.div(l.add(h)))}var m=new o(l.re+FLe+.5,l.im),g=Math.sqrt(2*Math.PI),y=m.pow(l.add(.5)),b=m.neg().exp();return d.mul(g).mul(y).mul(b)}return t(M1e,{number:T4,Complex:a,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new s(1/0):u(c.minus(1));if(!c.isFinite())return new s(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function u(l){if(l<8)return new s([1,1,2,6,24,120,720,5040][l]);var c=n.precision+(Math.log(l.toNumber())|0),f=s.clone({precision:c});if(l%2===1)return l.times(u(new s(l-1)));for(var d=l,h=new f(l),p=l.toNumber();d>2;)d-=2,p+=d,h=h.times(p);return new s(h.toPrecision(s.precision))}}),$1e="lgamma",D9t=["Complex","typed"],I9t=ei($1e,D9t,e=>{var{Complex:t,typed:n}=e,r=7,i=7,s=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return n($1e,{number:C4,Complex:o,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function o(l){var c=6.283185307179586,f=1.1447298858494002,d=.1;if(l.isNaN())return new t(NaN,NaN);if(l.im===0)return new t(C4(l.re),0);if(l.re>=r||Math.abs(l.im)>=i)return a(l);if(l.re<=d){var h=F5t(c,l.im)*Math.floor(.5*l.re+.25),p=l.mul(Math.PI).sin().log(),m=o(new t(1-l.re,-l.im));return new t(f,h).sub(p).sub(m)}else return l.im>=0?u(l):u(l.conjugate()).conjugate()}function a(l){for(var c=l.sub(.5).mul(l.log()).sub(l).add(LLe),f=new t(1,0).div(l),d=f.div(l),h=s[0],p=s[1],m=2*d.re,g=d.re*d.re+d.im*d.im,y=2;y<8;y++){var b=p;p=-g*h+s[y],h=m*h+b}var w=f.mul(d.mul(h).add(p));return c.add(w)}function u(l){var c=0,f=0,d=l;for(l=l.add(1);l.re<=r;){d=d.mul(l);var h=d.im<0?1:0;h!==0&&f===0&&c++,f=h,l=l.add(1)}return a(l).sub(d.log()).sub(new t(0,c*2*Math.PI*1))}});const k9t={},R9t=Object.freeze(Object.defineProperty({__proto__:null,default:k9t},Symbol.toStringTag,{value:"Module"})),N9t=sZe(R9t);var m9=$8t({config:ex}),g9=U8t({}),BLe=Y8t({}),eie=Q8t({}),tie=hBt({Matrix:eie}),Ks=B5t({BigNumber:m9,Complex:g9,DenseMatrix:tie,Fraction:BLe}),P9t=zBt({typed:Ks}),nie=HBt({typed:Ks}),O9t=s9t({typed:Ks}),rie=EBt({config:ex,typed:Ks}),M9t=vBt({equalScalar:rie,typed:Ks}),Ak=I9t({Complex:g9,typed:Ks}),iie=t9t({typed:Ks}),jLe=kBt({typed:Ks}),ULe=TBt({Matrix:eie,equalScalar:rie,typed:Ks}),$9t=WBt({typed:Ks}),F9t=PBt({BigNumber:m9,typed:Ks}),zLe=jBt({typed:Ks}),VLe=$Bt({Fraction:BLe,typed:Ks}),lA=LBt({DenseMatrix:tie,Matrix:eie,SparseMatrix:ULe,typed:Ks}),L9t=m9t({bignumber:F9t,fraction:VLe,number:jLe}),B9t=d9t({matrix:lA,config:ex,typed:Ks}),HLe=y9t({numeric:L9t,typed:Ks}),qLe=a9t({BigNumber:m9,DenseMatrix:tie,SparseMatrix:ULe,config:ex,matrix:lA,typed:Ks}),j9t=_9t({addScalar:nie,conj:O9t,multiplyScalar:iie,size:B9t,typed:Ks}),sie=r9t({addScalar:nie,dot:j9t,equalScalar:rie,matrix:lA,multiplyScalar:iie,typed:Ks}),U9t=x9t({divideScalar:HLe,isZero:M9t,matrix:lA,multiply:sie,subtractScalar:$9t,typed:Ks,unaryMinus:zLe}),z9t=T9t({abs:P9t,addScalar:nie,det:U9t,divideScalar:HLe,identity:qLe,matrix:lA,multiply:sie,typed:Ks,unaryMinus:zLe}),V9t=b9t({Complex:g9,config:ex,fraction:VLe,identity:qLe,inv:z9t,matrix:lA,multiply:sie,number:jLe,typed:Ks}),F1e=A9t({BigNumber:m9,Complex:g9,config:ex,multiplyScalar:iie,pow:V9t,typed:Ks});const H9t=Math.PI;function WLe(e,t){if(t<=0)throw new Error("Degrees of freedom must be positive");const n=Ak((t+1)/2),r=Ak(t/2),i=n-.5*Math.log(t*H9t)-r,s=e*e,a=-(t+1)/2*Math.log1p(s/t);return Math.exp(i+a)}function GLe(e,t){return Ak(e)+Ak(t)-Ak(e+t)}function q9t(e,t,n){if(e<=0)return-1/0;if(e>=1)return GLe(t,n);const r=1e-30;let i=1,s=t+n,o=t+1,a=t-1,u=1,l=1-s*e/o;Math.abs(l)<r&&(l=r),l=1/l;let c=l;for(i=1;i<=100;i+=1){let f=2*i,d=i*(n-i)*e/((a+f)*(t+f));l=1+d*l,Math.abs(l)<r&&(l=r),u=1+d/u,Math.abs(u)<r&&(u=r),l=1/l,c*=l*u,d=-(t+i)*(s+i)*e/((t+f)*(o+f)),l=1+d*l,Math.abs(l)<r&&(l=r),u=1+d/u,Math.abs(u)<r&&(u=r),l=1/l;const h=l*u;if(c*=h,Math.abs(h-1)<3e-7)break}return Math.log(c)+t*Math.log(e)+n*Math.log1p(-e)-Math.log(t)}function L1e(e,t,n){if(e<=0)return 0;if(e>=1)return 1;const r=q9t(e,t,n),i=GLe(t,n);return Math.exp(r-i)}function YLe(e,t){if(e===0)return .5;const n=t/(t+e*e);return Math.abs(e)<1e-10?.5+e*Math.sqrt(t)*F1e((t+1)/2)/(Math.sqrt(Math.PI*t)*F1e(t/2)):e<0?.5*L1e(n,t/2,.5):1-.5*L1e(n,t/2,.5)}const W9t=Object.freeze(Object.defineProperty({__proto__:null,studentTCDF:YLe,studentTPDF:WLe},Symbol.toStringTag,{value:"Module"}));function G9t(){return{xi:Math.random()*4-2,omega:Math.random()*3.9+.1,nu:Math.floor(Math.random()*9)+1,alpha:Math.random()*10-5}}function Y9t(e,t,n,r=1e-8,i=50){function s(u,l){const c=(u+l)/2;return(l-u)/6*(e(u)+4*e(c)+e(l))}function o(u,l,c,f,d,h){const p=(u+l)/2,m=(l-u)/12,g=(u+p)/2,y=(p+l)/2,b=e(g),w=e(y),S=m*(c+4*b+d),E=m*(d+4*w+f),T=s(u,l);return h>=i||Math.abs(S+E-T)<=r?S+E:o(u,p,c,d,b,h+1)+o(p,l,d,f,w,h+1)}const a=(t+n)/2;return o(t,n,e(t),e(n),e(a),0)}function oie(e,t){const{xi:n,omega:r,nu:i,alpha:s}=t,o=(e-n)/r,a=1/r*WLe(o,i),u=YLe(s*o*Math.sqrt((i+1)/(i+o*o)),i+1);return 2*a*u}function K9t(e,t){return Y9t(r=>oie(r,t),-1e3,e)}function KLe(e,t=1001,n=[-5,5]){const[r,i]=n,s=Array.from({length:t},(u,l)=>r+l*(i-r)/(t-1)),o=s.map(u=>oie(u,e)),a=s.map(u=>K9t(u,e));return{xVals:s,pdfVals:o,cdfVals:a}}function X9t(e,t){const n=Math.round((t-e.xVals[0])/(e.xVals[1]-e.xVals[0]));return n<0||n>=e.xVals.length?{pdf:0,cdf:n<0?0:1}:{pdf:e.pdfVals[n],cdf:e.cdfVals[n]}}const Q9t=Object.freeze(Object.defineProperty({__proto__:null,findDistributionValue:X9t,generateDistributionData:KLe,generateRandomParams:G9t,skewTPDF:oie},Symbol.toStringTag,{value:"Module"})),nc={marginBottom:40,marginLeft:50,marginTop:15,marginRight:15,height:450,width:600};function J9t({parameters:e,setAnswer:t}){const n=P.useRef(null),{data:r,showPDF:i,taskid:s}=e,[o,a]=P.useState(null),u=P.useRef({xScale:null,yScale:null}),l=P.useMemo(()=>KLe(r),[r]),{actions:c,trrack:f}=P.useMemo(()=>{const m=oA.create(),g=m.register("click",(b,w)=>(b.clickX=w.clickX,b.clickY=w.clickY,b)),y=u9({registry:m,initialState:{clickX:0,clickY:0}});return{actions:{clickAction:g},trrack:y}},[]),d=P.useCallback(()=>{if(console.log("Drawing chart"),!l||!n.current){console.log("Cannot draw chart - missing:",{distributionData:!!l,svgRef:!!n.current});return}Or(n.current).selectAll("*").remove();const m=nc.width-nc.marginLeft-nc.marginRight,g=nc.height-nc.marginTop-nc.marginBottom,y=Or(n.current).attr("width",m+nc.marginLeft+nc.marginRight).attr("height",g+nc.marginTop+nc.marginBottom).append("g").attr("transform",`translate(${nc.marginLeft},${nc.marginTop})`),b=Lc().domain([l.xVals[0],l.xVals[l.xVals.length-1]]).range([0,m]),w=Lc().domain([0,1]).range([g,0]);u.current={xScale:b,yScale:w},console.log("Scales created:",u.current);const S=i?l.pdfVals:l.cdfVals,E=l.xVals.map((C,A)=>({x:C,y:S[A]})),T=Zte().x(C=>b(C.x)).y(C=>w(C.y));y.append("path").datum(E).attr("fill","none").attr("stroke","steelblue").attr("stroke-width",2).attr("d",T),y.append("g").attr("class","points-group"),y.append("g").attr("transform",`translate(0,${g})`).call(sEt(b)).append("text").attr("x",m/2).attr("y",35).attr("fill","black").attr("text-anchor","middle").style("font-size","15px").text("X Values"),y.append("g").call(oEt(w)).append("text").attr("transform","rotate(-90)").attr("y",-40).attr("x",-g/2).attr("fill","black").attr("text-anchor","middle").style("font-size","15px").text("Probability"),console.log("Chart drawing completed")},[l,i]),h=P.useCallback((m,g)=>{if(console.log("Finding closest point for:",{clickX:m,clickY:g}),!l||!u.current.xScale||!u.current.yScale)return console.log("Missing required data:",{distributionData:!!l,xScale:!!u.current.xScale,yScale:!!u.current.yScale}),null;const{xScale:y,yScale:b}=u.current,w=i?l.pdfVals:l.cdfVals,S=y.invert(m),E=b.invert(g);console.log("Converted to data space:",{dataX:S,dataY:E});const T=KE(N=>N).left(l.xVals,S),C=l.xVals[T-1],A=l.xVals[T];if(!C||!A)return console.log("Could not find bracketing x values"),null;const I=Math.abs(S-C)<Math.abs(S-A)?T-1:T,k={x:l.xVals[I],y:w[I]};return console.log("Found closest point:",k),k},[l,i]);P.useEffect(()=>{if(console.log("Point update effect triggered",o),!n.current||!u.current.xScale||!u.current.yScale){console.log("Missing refs for point update");return}const{xScale:m,yScale:g}=u.current;Or(n.current).select(".points-group").selectAll("circle").remove(),o&&(console.log("Adding new point:",o),Or(n.current).select(".points-group").append("circle").attr("cx",m(o.x)).attr("cy",g(o.y)).attr("r",4).attr("fill","red"))},[o]);const p=P.useCallback(m=>{if(console.log("Click event triggered"),!n.current||!l){console.log("Missing required refs");return}const y=n.current.getBoundingClientRect(),b=m.clientX-y.left-nc.marginLeft,w=m.clientY-y.top-nc.marginTop;console.log("Click coordinates:",{clickX:b,clickY:w});const S=h(b,w);if(console.log("Closest point found:",S),S){const{xScale:E,yScale:T}=u.current;if(!E||!T){console.log("Scales not available");return}const C=T(S.y),A=Math.abs(w-C);console.log("Distance from line:",A),A<=5?(f.apply("Clicked",c.clickAction({clickX:S.x,clickY:S.y})),a(S),t({status:!0,provenanceGraph:f.graph.backend,answers:{"location-x":S.x,"location-y":S.y}})):t({status:!1,answers:{}})}else t({status:!1,answers:{}})},[l,c,f,h,s,t]);return P.useEffect(()=>{console.log("Initial chart draw effect triggered"),d()},[d]),_.jsxs("div",{className:"p-4",children:[_.jsx("div",{className:"mt-4",children:_.jsx("svg",{ref:n,onClick:p,className:"bg-white rounded-lg shadow-lg"})}),_.jsx("button",{onClick:()=>{a(null),t({status:!1,answers:{}})},className:"mt-4 px-4 py-2 rounded",children:"Clear Point"})]})}const Z9t=Object.freeze(Object.defineProperty({__proto__:null,default:J9t},Symbol.toStringTag,{value:"Module"})),ejt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),tjt="/vis-decode/assets/card-DV7KyiWu.png",njt=({parameters:e,setAnswer:t,itemWidthMM:n=85.6,itemHeightMM:r=53.98})=>{const[i,s]=P.useState(300),[o,a]=P.useState(null),[u,l]=P.useState(!1),c=P.useRef(null),{taskid:f}=e,d=r/n,h=y=>Math.round(y*d),p=y=>y/n,m=y=>{const b=parseInt(y.target.value);s(b)},g=()=>{if(!c.current)return;const y=p(i);a(y),t({status:!0,answers:{[f]:y}}),l(!0)};return _.jsxs("div",{className:"virtual-chinrest-calibration",children:[_.jsx("div",{className:"slider-container",style:{width:"400px",margin:"0 auto",display:"flex",alignItems:"center",gap:"10px"},children:_.jsx("input",{type:"range",id:"item-width-slider",min:"100",max:"500",value:i,onChange:m,style:{flex:1}})}),_.jsx("div",{ref:c,style:{width:`${i}px`,height:`${h(i)}px`,margin:"20px auto",overflow:"hidden"},children:_.jsx("img",{src:tjt,alt:"Credit Card",style:{width:"100%",height:"100%",objectFit:"contain"}})}),_.jsx("button",{onClick:g,style:{display:"block",margin:"10px auto",padding:"10px 20px"},children:"Click here when image is the correct size"}),u&&_.jsxs("div",{style:{textAlign:"center",color:"green"},children:["Calibration Complete - Pixels per MM: ",o==null?void 0:o.toFixed(2)]})]})},rjt=Object.freeze(Object.defineProperty({__proto__:null,default:njt},Symbol.toStringTag,{value:"Module"})),ijt=({parameters:e,setAnswer:t})=>{var C;const n=P.useRef(null),r=P.useRef(null),i=P.useRef(null),{taskid1:s,taskid2:o,blindspotAngle:a}=e,u=Fs(A=>A.answers),l=Number((C=u.calibration_3.answer)==null?void 0:C.pixelsPerMM),[c,f]=P.useState([]),[d,h]=P.useState(!1),[p,m]=P.useState(null),[g,y]=P.useState(5),b=A=>A*Math.PI/180,w=A=>{if(!A.length||!l||!r.current)return;const I=A.reduce((L,j)=>L+j,0)/A.length,N=r.current.getBoundingClientRect().left,M=Math.abs(I-N)/l/Math.tan(b(a));m(M),h(!1)},S=()=>{console.log("resetBall() called"),n.current&&(n.current.style.left="740px")},E=()=>{if(!n.current||!r.current||!l)return;console.log("startBlindspotTracking() function activating"),h(!0);const A=()=>{if(!n.current)return;const k=parseInt(n.current.style.left||"740")-2;n.current.style.left=`${k}px`,i.current=requestAnimationFrame(A)};i.current=requestAnimationFrame(A)},T=()=>{console.log("stopTracking() function activated"),i.current&&cancelAnimationFrame(i.current),h(!1)};return P.useEffect(()=>{p!==null&&c.length===5&&t({status:!0,answers:{"dist-calibration-MM":p,"dist-calibration-CM":p/10,"ball-positions":JSON.stringify(c)}})},[p,c,t]),P.useEffect(()=>{const A=I=>{if(I.code==="Space"){if(I.preventDefault(),!d)E();else if(n.current){T();const N=n.current.getBoundingClientRect().left;f(F=>{const M=[...F,N];return M.length>=5&&w(M),M}),y(F=>F-1),S()}}};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[d]),P.useEffect(()=>(m(null),h(!1),f([]),y(5),console.log("setClickCount to 5 when pixelsPerMM changes"),S(),()=>{m(null),h(!1),f([]),y(5),console.log("setClickCount to 5 when pixelsPerMM changes in the return ()")}),[]),P.useEffect(()=>()=>{i.current&&cancelAnimationFrame(i.current)},[]),l?_.jsxs("div",{className:"viewing-distance-calibration",children:[_.jsxs("div",{className:"instructions",style:{marginBottom:"20px"},children:[_.jsxs("ol",{children:[_.jsxs("li",{children:["Put your left hand on the ",_.jsx("b",{children:"space bar"}),"."]}),_.jsx("li",{children:"Cover your right eye with your right hand."}),_.jsx("li",{children:"Using your left eye, focus on the black square. Keep your focus on the black square."}),_.jsxs("li",{children:["The ",_.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"red ball"})," will disappear as it moves from right to left. Press the space bar as soon as the ball disappears."]})]}),_.jsx("p",{style:{textAlign:"center"},children:"Press the space bar when you are ready to begin."})]}),_.jsxs("div",{style:{position:"relative",width:"900px",height:"100px",backgroundColor:"#ffffff"},children:[_.jsx("div",{ref:n,style:{position:"absolute",width:"30px",height:"30px",backgroundColor:"rgb(255, 0, 0)",borderRadius:"30px",left:"740px"}}),_.jsx("div",{ref:r,style:{position:"absolute",width:"30px",height:"30px",backgroundColor:"rgb(0, 0, 0)",left:"870px"}})]}),_.jsxs("p",{style:{textAlign:"center"},children:["Remaining measurements: ",5-c.length]}),p&&_.jsxs("div",{className:"results",children:[_.jsx("h3",{children:"Viewing Distance Results"}),_.jsxs("p",{children:["Estimated Viewing Distance: ",(p/10).toFixed(1)," cm"]}),_.jsxs("p",{children:["Number of measurements: ",c.length]})]})]}):_.jsx("div",{children:"Please complete card calibration first."})},sjt=Object.freeze(Object.defineProperty({__proto__:null,default:ijt},Symbol.toStringTag,{value:"Module"})),B1e=Object.assign({"../public/demo-brush-interactions/assets/Bar.tsx":Lkt,"../public/demo-brush-interactions/assets/BrushPlot.tsx":Q6t,"../public/demo-brush-interactions/assets/Paintbrush.tsx":K6t,"../public/demo-brush-interactions/assets/Scatter.tsx":X6t,"../public/demo-brush-interactions/assets/XAxisBar.tsx":$kt,"../public/demo-brush-interactions/assets/YAxis.tsx":Y6t,"../public/demo-brush-interactions/assets/YAxisBar.tsx":Fkt,"../public/demo-brush-interactions/assets/types.ts":J6t,"../public/demo-cleveland/assets/BarChart.tsx":s4t,"../public/demo-cleveland/assets/BubbleChart.tsx":d4t,"../public/demo-cleveland/assets/PieChart.tsx":v4t,"../public/demo-cleveland/assets/StackedBarChart.tsx":x4t,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":e4t,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":o4t,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":a4t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":b4t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":t4t,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":n4t,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":h4t,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":p4t,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":w4t,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":Z6t,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":C4t,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":D4t,"../public/libraries/test/assets/test.tsx":k4t,"../public/tutorial/advanced-react-component/assets/ClickCircle.tsx":N4t,"../public/tutorial/react-and-randomization/assets/Bar.tsx":M4t,"../public/tutorial/react-and-randomization/assets/BrushPlot.tsx":B4t,"../public/tutorial/react-and-randomization/assets/Paintbrush.tsx":F4t,"../public/tutorial/react-and-randomization/assets/Scatter.tsx":L4t,"../public/tutorial/react-and-randomization/assets/XAxisBar.tsx":P4t,"../public/tutorial/react-and-randomization/assets/YAxis.tsx":$4t,"../public/tutorial/react-and-randomization/assets/YAxisBar.tsx":O4t,"../public/tutorial/react-and-randomization/assets/some.tsx":j4t,"../public/tutorial/react-and-randomization/assets/types.ts":U4t,"../public/vis-decode/assets/Test.tsx":Z9t,"../public/vis-decode/assets/Train.tsx":ejt,"../public/vis-decode/assets/cardCalibration.tsx":rjt,"../public/vis-decode/assets/customT.ts":W9t,"../public/vis-decode/assets/distanceCalibration.tsx":sjt,"../public/vis-decode/assets/distributionCalculations.ts":Q9t});function ojt({currentConfig:e}){const t=Dy(),n=Cb(),r=`../public/${e.path}`,i=r in B1e?B1e[r].default:null,s=Ep(),{updateResponseBlockValidation:o,setIframeAnswers:a}=Ld();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return _.jsx(P.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:i?_.jsx(i,{parameters:e.parameters,setAnswer:u}):_.jsx(Y_,{path:e.path})})}function ajt({currentConfig:e}){const[t,n]=P.useState(""),[r,i]=P.useState(!0);return P.useEffect(()=>{async function s(){const o=await pte(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?_.jsx(Xu,{text:t}):_.jsx(Y_,{path:e.path})}function cA(e){return e.baseComponent!==void 0}function XLe(){const e=Dy(),{setAlertModal:t}=Ld(),n=Ep();P.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var j1e=Object.prototype.hasOwnProperty;function U1e(e,t,n){for(n of e.keys())if(Dk(n,t))return n}function Dk(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Dk(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=U1e(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=U1e(t,i),!i)||!Dk(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(j1e.call(e,n)&&++r&&!j1e.call(t,n)||!(n in t)||!Dk(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function ujt(e){var t=P.useRef(e),n=P.useRef(0);return Dk(e,t.current)||(t.current=e,n.current+=1),P.useMemo(function(){return t.current},[n.current])}function ljt(e,t){return P.useEffect(e,ujt(t))}const cjt=(e,t=null)=>{const[n,r]=P.useState("idle"),[i,s]=P.useState(null),[o,a]=P.useState(null),u=P.useRef(),l=P.useRef(!1);P.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=P.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return ljt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}};function QLe(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(o=>o!==void 0).filter(([o,a,u])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let o=i+1;o<n.length;o+=1)if(n[o][2]==="visible"){r+=n[o][0]-n[i][0],i=o;break}}i+=1}return t?t-r:void 0}const z1e=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","cleanedDuration","meta","configHash"],JLe=["participantId","trialId","trialOrder","responseId"];function aie(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function fjt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==-1).length/(Z0(e.sequence).length-1)*100).toFixed(2);return[{participantId:e.participantId,trialId:"participantTags",trialOrder:null,responseId:"participantTags",answer:JSON.stringify(e.participantTags)},...Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=cA(u)&&u.baseComponent&&n.baseComponents?fte({},n.baseComponents[u.baseComponent],u):u,c=s.endTime===-1?void 0:s.endTime-s.startTime,f=QLe(s);return Object.entries(s.answer).map(([h,p])=>{var y,b;const m={participantId:e.participantId,trialId:o,trialOrder:a,responseId:h},g=l.response.find(w=>w.id===h);if(t.includes("status")&&(m.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(m.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(m.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(m.configHash=e.participantConfigHash),t.includes("percentComplete")&&(m.percentComplete=r),t.includes("description")&&(m.description=l.description),t.includes("instruction")&&(m.instruction=l.instruction),t.includes("responsePrompt")&&(m.responsePrompt=g==null?void 0:g.prompt),t.includes("answer")&&(m.answer=p),t.includes("correctAnswer")){const w=(b=(y=l.correctAnswer)==null?void 0:y.find(S=>S.id===h))==null?void 0:b.answer;m.correctAnswer=typeof w=="object"?JSON.stringify(w):w}return t.includes("responseMin")&&(m.responseMin=(g==null?void 0:g.type)==="numerical"?g.min:void 0),t.includes("responseMax")&&(m.responseMax=(g==null?void 0:g.type)==="numerical"?g.max:void 0),t.includes("startTime")&&(m.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(m.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(m.duration=c),t.includes("cleanedDuration")&&(m.cleanedDuration=f),t.includes("meta")&&(m.meta=JSON.stringify(l.meta,null,2)),m}).flat()}).flat()]}async function djt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...JLe,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await fjt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function hjt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=P.useState([...z1e].filter(h=>h!=="meta")),a=Wo(),{value:u,status:l,error:c}=cjt(djt,[s,r,a.storageEngine,i]),f=P.useCallback(()=>{if(!u)return;const h=[u.header.join(","),...u.rows.map(p=>u.header.map(m=>`"${`${p[m]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);aie(h,n)},[n,u]),d=P.useMemo(()=>{if(!u)return"";const h=u.rows.length>5?5:u.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return _.jsxs(qs,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[_.jsx(aee,{searchable:!0,nothingFoundMessage:"Property not found",data:[...z1e],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:_.jsx(Cht,{}),variant:"filled"}),_.jsx(xf,{h:"md"}),_.jsxs(Ne,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?_.jsxs(_n,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[_.jsx(_n.Thead,{children:_.jsx(_n.Tr,{children:u.header.map(h=>_.jsx(_n.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:_.jsxs(Zt,{direction:"row",justify:"space-between",align:"center",children:[h,!JLe.includes(h)&&_.jsx(LE,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:_.jsx($ee,{size:16})})]})},h))})}),_.jsx(_n.Tbody,{children:u.rows.slice(0,5).map((h,p)=>_.jsx(_n.Tr,{children:u.header.map(m=>_.jsx(_n.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):l==="error"&&c?_.jsx(k0,{variant:"light",children:c.message}):null,_.jsx(kf,{visible:l==="pending"||l==="idle"})]}),_.jsx(xf,{h:"sm"}),_.jsx(Zt,{justify:"center",fz:"sm",c:"dimmed",children:_.jsx(gt,{children:d})}),_.jsx(xf,{h:"md"}),_.jsxs(qi,{justify:"right",children:[_.jsx(Mn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),_.jsx(Mn,{leftSection:_.jsx(gIe,{}),onClick:()=>f(),"data-autofocus":!0,children:"Download"})]})]})}function pjt(){const e=ey(),{storageEngine:t}=Wo(),n=Fs(b=>b.answers),[r,i]=P.useState(!1);P.useEffect(()=>{const b=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(b))},1e3)},[]),XLe();const[s,o]=P.useState(),[a,u]=P.useState(""),l=e.studyMetadata.title.replace(" ","_");P.useEffect(()=>{async function b(){if(t){const w=await t.getCurrentParticipantId(),S=await t.getParticipantData();u(w),o(S)}}b()},[t]);const c=P.useCallback(async()=>{aie(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=P.useState(Math.floor(d/1e3));P.useEffect(()=>{if(r){const b=setInterval(()=>{p(w=>w-1)},1e3);return h<=0?(f&&c(),clearInterval(b),()=>clearInterval(b)):()=>clearInterval(b)}return()=>{}},[f,r,h,c]);const m=GE(),[g,y]=P.useState(!1);return P.useEffect(()=>{(async()=>{if(t){const w=await t.getModes(m);y(w.dataCollectionEnabled)}})()},[t,m]),_.jsx(If,{style:{height:"100%"},children:_.jsx(Zt,{direction:"column",children:r||!g?_.jsx(gt,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?_.jsx(Xu,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):_.jsxs(_.Fragment,{children:[_.jsx(gt,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),_.jsx(xf,{h:"lg"}),_.jsx(If,{children:_.jsx(Yd,{color:"blue"})})]})})})}function mjt(){return _.jsx(gt,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function gjt(){return _.jsx(gt,{children:"Thank you for participating. Unfortunately, you have not answered the questions within the given time limit. Because of this, you are no longer eligible to participate in the study. You may close this window now."})}function yjt(){const e=ey(),t=Dy(),n=Cb()||"Notfound",r=e.components[n],{storageEngine:i}=Wo(),s=P.useRef(null),[o,a]=P.useState(null),{setIsRecording:u}=Ld(),l=dte(),c=Fs(S=>S.sequence);XLe();const f=Ep(),{setAlertModal:d}=Ld();P.useEffect(()=>{(i==null?void 0:i.getEngine())!=="firebase"&&f(d({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[d,i,f]),P.useEffect(()=>{!e||!e.recordStudyAudio||!i||i.getEngine()!=="firebase"||(s.current&&o&&i.saveAudio(s.current,o),s.current&&(s.current.stream.getTracks().forEach(S=>{var E;S.stop(),(E=s.current)==null||E.stream.removeTrack(S)}),s.current.stream.getAudioTracks().forEach(S=>{var E;S.stop(),(E=s.current)==null||E.stream.removeTrack(S)}),s.current.stop(),s.current=null),r&&r.recordAudio!==void 0&&!r.recordAudio||n==="end"?(a(null),f(u(!1))):navigator.mediaDevices.getUserMedia({audio:!0}).then(S=>{const E=new MediaRecorder(S);s.current=E,s.current.start(),f(u(!0)),a(`${n}_${t}`)}))},[n,t]);const[h,p]=P.useState([]),m=P.useRef([]);P.useEffect(()=>{async function S(){var C;const T=((C=ute(c,t))==null?void 0:C.map(A=>A.currentBlock.id).filter(A=>A!==void 0))||[];p(T)}async function E(){const T=m.current;JSON.stringify(T)!==JSON.stringify(h)&&h.length>0&&i&&await i.addParticipantTags(h),m.current=h}S().then(E)},[t,i,c]);const g=P.useMemo(()=>{var S;return n!=="end"&&cA(r)&&e.baseComponents?fte({},(S=e.baseComponents)==null?void 0:S[r.baseComponent],r):r},[r,e]);if(n==="end")return _.jsx(pjt,{});if(n==="__trainingFailed")return _.jsx(mjt,{});if(n==="__timedOut")return _.jsx(gjt,{});if(n==="Notfound")return _.jsx(Y_,{email:e.uiConfig.contactEmail});const y=g.instruction||"",{instructionLocation:b}=g,w=e.uiConfig.sidebar&&(b==="sidebar"||b===void 0);return _.jsxs(_.Fragment,{children:[b==="aboveStimulus"&&_.jsx(Xu,{text:y}),_.jsx(UL,{status:l,config:g,location:"aboveStimulus"},`${t}-above-response-block`),_.jsxs(P.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[g.type==="markdown"&&_.jsx(ajt,{currentConfig:g}),g.type==="website"&&_.jsx(O_t,{currentConfig:g}),g.type==="image"&&_.jsx($_t,{currentConfig:g}),g.type==="react-component"&&_.jsx(ojt,{currentConfig:g})]},`${t}-stimulus`),(b==="belowStimulus"||b===void 0&&!w)&&_.jsx(Xu,{text:y}),_.jsx(UL,{status:l,config:g,location:"belowStimulus"},`${t}-below-response-block`)]})}function wK(e){const[t]=Nee();return _.jsx(Ree,{...e,to:{pathname:e.to,search:t.toString()}})}function ZLe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=ZLe(o,t,n,r),r.includes(o.orderPath))break}return i}function e6e(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=e6e(s,r)}}),n}function vjt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function bjt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=GE(),c=wp(),f=Dy(),[d,{close:h,open:p}]=d8(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?ZLe(n,e,r,a.orderPath):-1,{trialId:y}=X0(),b=y===e,w=s?f===g:f===`reviewer-${e}`,S=u?b:w,E=P.useCallback(()=>c(y?`./../${e}`:`./${e}`),[c,e,y]),C=u?E:()=>c(s?`/${l}/${g}`:`/${l}/reviewer-${e}`),A=e.includes(".co.")?".co.":e.includes(".components.")?".components.":!1,I=e.includes("$")&&A&&e.includes(A)?e.split(A).at(-1):e;return _.jsxs(au,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[_.jsx(au.Target,{children:_.jsx(Ne,{onMouseEnter:p,onMouseLeave:h,children:_.jsx(j8,{active:S,style:{lineHeight:"32px",height:"32px"},label:_.jsxs(Ne,{children:[i&&_.jsx(hht,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),e!==I&&_.jsx(Iht,{size:16,style:{marginRight:4,marginBottom:-2},color:"var(--mantine-color-blue-outline)"}),_.jsx(gt,{size:"sm",span:S,fw:S?"700":void 0,display:"inline",children:I})]}),onClick:C,disabled:t})})}),m&&(m.description||m.meta)&&_.jsx(au.Dropdown,{onMouseLeave:h,children:_.jsxs(Ne,{children:[m.description&&_.jsxs(Ne,{children:[_.jsx(gt,{fw:900,display:"inline-block",mr:2,children:"Description:"}),_.jsx(gt,{fw:400,component:"span",children:m.description})]}),m.meta&&_.jsxs(Ne,{children:[_.jsx(gt,{fw:"900",component:"span",children:"Task Meta: "}),_.jsx(gt,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})]})}function D4({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=f1(e.components);return n&&r&&(o=vjt(f1(e.components),f1(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),_.jsx(_.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return _.jsx(bjt,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?Z0(c).length-e6e(u,c):0,d=Z0(u);return _.jsx(j8,{label:_.jsxs(Ne,{style:{opacity:f>0?1:.5},children:[_.jsx(gt,{size:"sm",display:"inline",children:u.order}),u.order==="random"||u.order==="latinSquare"?_.jsx(fht,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&_.jsxs(u1,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&_.jsx(u1,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:_.jsx(Ne,{style:{borderLeft:"1px solid #e9ecef"},children:_.jsx(D4,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function t6e(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function V1e({text:e}){return _.jsx(hs,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:_.jsx(Oee,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function wjt(){const e=Fs(f=>f.sequence),t=Fs(f=>f.metadata),{toggleStudyBrowser:n}=Ld(),r=ey(),i=Ep(),s=GE(),o=uIe(`/${s}`),{storageEngine:a}=Wo(),u=P.useMemo(()=>{let f=f1(r.sequence);return f=lte(f,"root"),f.components.push("end"),f},[r.sequence]),[l,c]=P.useState("participant");return _.jsxs(bs.Aside,{p:"0",children:[_.jsx(bs.Section,{children:_.jsxs(Zt,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[_.jsx(gt,{size:"md",fw:700,pt:3,children:"Study Browser"}),_.jsx(Mn,{variant:"light",leftSection:_.jsx(Mee,{size:14}),onClick:()=>t6e(a,r,t,o),size:"xs",disabled:l==="allTrials",children:"Next Participant"}),_.jsx(Ey,{onClick:()=>i(n()),mt:1})]})}),_.jsx(bs.Section,{grow:!0,component:W0,p:"xs",pt:0,children:_.jsxs(bo,{value:l,onChange:c,children:[_.jsx(Ne,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:_.jsxs(bo.List,{grow:!0,children:[_.jsxs(bo.Tab,{value:"participant",children:["Participant View",_.jsx(V1e,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),_.jsxs(bo.Tab,{value:"allTrials",children:["All Trials View",_.jsx(V1e,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),_.jsx(bo.Panel,{value:"participant",children:_.jsx(D4,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),_.jsx(bo.Panel,{value:"allTrials",children:_.jsx(D4,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}const _jt=P.createContext(null);function ju(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}let jP=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const H1e={decode:function(e,t){return ju(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function n6e(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(n6e(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function q1e(e,t,n){const r=n6e(e,t||{});return n==null||n.appendChild(r),r}var Ejt=Object.freeze({__proto__:null,createElement:q1e,default:q1e});const xjt={fetchBlob:function(e,t,n){return ju(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){ju(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=f=>ju(this,void 0,void 0,function*(){u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);s(d)}),c=()=>ju(this,void 0,void 0,function*(){let f;try{f=yield o.read()}catch{return}f.done||(l(f.value),yield c())});c()})}(r.clone(),t),r.blob()})}};class Sjt extends jP{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const i=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=i}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return ju(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}let _K=class EK extends jP{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const r=this.wrapper.getBoundingClientRect(),i=n.clientX-r.left,s=n.clientY-r.top;return[i/r.width,s/r.height]};if(this.wrapper.addEventListener("click",n=>{const[r,i]=t(n);this.emit("click",r,i)}),this.wrapper.addEventListener("dblclick",n=>{const[r,i]=t(n);this.emit("dblclick",r,i)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:r,clientWidth:i}=this.scrollContainer,s=n/r,o=(n+i)/r;this.emit("scroll",s,o,n,n+i)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=f=>{if(f.button!==o)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,h=f.clientY,p=!1;const m=Date.now(),g=E=>{if(E.preventDefault(),E.stopPropagation(),u&&Date.now()-m<a)return;const T=E.clientX,C=E.clientY,A=T-d,I=C-h;if(p||Math.abs(A)>s||Math.abs(I)>s){const k=t.getBoundingClientRect(),{left:N,top:F}=k;p||(r==null||r(d-N,h-F),p=!0),n(A,I,T-N,C-F),d=T,h=C}},y=E=>{if(p){const T=E.clientX,C=E.clientY,A=t.getBoundingClientRect(),{left:I,top:k}=A;i==null||i(T-I,C-k)}l()},b=E=>{E.relatedTarget&&E.relatedTarget!==document.documentElement||y(E)},w=E=>{p&&(E.stopPropagation(),E.preventDefault())},S=E=>{p&&E.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",y),document.addEventListener("pointerout",b),document.addEventListener("pointercancel",b),document.addEventListener("touchmove",S,{passive:!1}),document.addEventListener("click",w,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",y),document.removeEventListener("pointerout",b),document.removeEventListener("pointercancel",b),document.removeEventListener("touchmove",S),setTimeout(()=>{document.removeEventListener("click",w,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t,n;this.subscriptions.forEach(r=>r()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.call(this)}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,u)=>{const l=u*o;s.addColorStop(l,a)}),s}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,f=this.getPixelRatio(),d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,p=n.barRadius||0,m=u/(d+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let y=0,b=0,w=0;for(let S=0;S<=a;S++){const E=Math.round(S*m);if(E>y){const A=Math.round(b*c*i),I=A+Math.round(w*c*i)||1;let k=c-A;n.barAlign==="top"?k=0:n.barAlign==="bottom"&&(k=l-I),r[g](y*(d+h),k,d,I,p),y=E,b=0,w=0}const T=Math.abs(s[S]||0),C=Math.abs(o[S]||0);T>b&&(b=T),C>w&&(w=C)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*f);if(m>d){const y=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(d,y),d=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(d,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const u=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(s)}px`,o.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const f=l.cloneNode(),d=f.getContext("2d");d.drawImage(l,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,l.width,l.height),a.appendChild(f)}}renderMultiCanvas(t,n,r,i,s,o){const a=this.getPixelRatio(),{clientWidth:u}=this.scrollContainer,l=r/a;let c=Math.min(EK.MAX_CANVAS_WIDTH,u,l),f={};if(n.barWidth||n.barGap){const g=n.barWidth||.5,y=g+(n.barGap||g/2);c%y!=0&&(c=Math.floor(c/y)*y)}const d=g=>{if(g<0||g>=h||f[g])return;f[g]=!0;const y=g*c,b=Math.min(l-y,c);if(b<=0)return;const w=t.map(S=>{const E=Math.floor(y/l*S.length),T=Math.floor((y+b)/l*S.length);return S.slice(E,T)});this.renderSingleCanvas(w,n,b,i,y,s,o)},h=Math.ceil(l/c);if(!this.isScrollable){for(let g=0;g<h;g++)d(g);return}const p=this.scrollContainer.scrollLeft/l,m=Math.floor(p*h);d(m-1),d(m),d(m+1),h>1&&(this.unsubscribeOnScroll=this.on("scroll",()=>{const{scrollLeft:g}=this.scrollContainer,y=Math.floor(g/l*h);Object.keys(f).length>EK.MAX_NODES&&(s.innerHTML="",o.innerHTML="",f={}),d(y-1),d(y),d(y+1)}))}renderChannel(t,n,r,i){var{overlay:s}=n,o=function(c,f){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&f.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)f.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(d[h[p]]=c[h[p]])}return d}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(o.height,o.splitChannels);a.style.height=`${u}px`,s&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,o,r,u,a,l)}render(t){return ju(this,void 0,void 0,function*(){var n;this.timeouts.forEach(u=>u()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,s=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=s>i;const o=this.options.fillParent&&!this.isScrollable,a=(o?i:s)*r;if(this.wrapper.style.width=o?"100%":`${s}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let u=0;u<t.numberOfChannels;u++){const l=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[u]);this.renderChannel([t.getChannelData(u)],l,a,u)}else{const u=[t.getChannelData(0)];t.numberOfChannels>1&&u.push(t.getChannelData(1)),this.renderChannel(u,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){var t;if((t=this.unsubscribeOnScroll)===null||t===void 0||t.call(this),delete this.unsubscribeOnScroll,!this.audioData)return;const{scrollWidth:n}=this.scrollContainer,{right:r}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&n!==this.scrollContainer.scrollWidth){const{right:i}=this.progressWrapper.getBoundingClientRect();let s=i-r;s*=2,s=s<0?Math.floor(s):Math.ceil(s),s/=2,this.scrollContainer.scrollLeft+=s}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,u=r+s,l=s/2;if(this.isDragging)o+30>u?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>u)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?l:0));const c=o-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,f=c/i,d=(c+s)/i;this.emit("scroll",f,d,c,c+s)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return ju(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(u=>{u?o(u):a(new Error("Could not export image"))},t,n)})))})}};_K.MAX_CANVAS_WIDTH=8e3,_K.MAX_NODES=10;class Tjt extends jP{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class W1e extends jP{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return ju(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return ju(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return ju(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}}const Cjt={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class aN extends Sjt{static create(t){return new aN(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new W1e:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},Cjt,t),this.timer=new Tjt;const r=n?void 0:this.getMediaElement();this.renderer=new _K(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{this.emit("error",t.error)}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,r,i)=>{const s=this.getDuration();this.emit("scroll",t*s,n*s,r,i)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return ju(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const u=l=>this.emit("loading",l);n=yield xjt.fetchBlob(t,u,a)}this.setSrc(t,n);const o=yield new Promise(a=>{const u=i||this.getDuration();u?a(u):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!t&&!n){const a=this.getMediaElement();a instanceof W1e&&(a.duration=o)}if(r)this.decodedData=H1e.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield H1e.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return ju(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return ju(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=a.length/n;for(let c=0;c<n;c++){const f=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let d=0;for(let h=0;h<f.length;h++){const p=f[h];Math.abs(p)>Math.abs(d)&&(d=p)}u.push(Math.round(d*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return ju(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return ju(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}aN.BasePlugin=class extends jP{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},aN.dom=Ejt;function Ajt(e){return aN.create(e)}function Djt(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const G1e=e=>e.reduce((t,n)=>(t[n[0]]=n[1],t),{}),Ijt=(e,t)=>{const n=Object.entries(e),r=Object.entries(t),i=n.filter(([o])=>r.findIndex(([a])=>a===o)===-1),s=r.filter(([o])=>n.findIndex(([a])=>a===o)===-1);return{disabled:G1e(i),enabled:G1e(s)}};function Y1e(e,t){const n={},r=[...t];for(;r.length>=1;){const i=r.shift();!!e[i.key]?n[i.key]=e[i.key]:n[i.key]=Djt(i)}return n}function kjt({container:e,plugins:t=[],onMount:n,...r}){const i=P.useRef(!1),[s,o]=P.useState({}),a=P.useRef([]),[u,l]=P.useState(null);return P.useEffect(()=>{if(!e)return;const c=e;if(i.current)return;i.current=!0;const f=Y1e(s,t);a.current=Object.keys(f);const d=Ajt({container:e,...r,plugins:Object.values(f)});return n==null||n(d),o(f),l(d),()=>{c!==e&&d.destroy()}},[e]),P.useEffect(()=>{if(u){const c=Y1e(s,t),{disabled:f,enabled:d}=Ijt(s,c);Object.keys(f).forEach(h=>{f[h].destroy()}),Object.keys(d).forEach(h=>{a.current.includes(h)||(console.log("register plugin",h,d[h]),u==null||u.registerPlugin(d[h]))}),a.current=Object.keys(d),o(c)}},[t]),[u,s,Object.values(s)]}function Rjt({children:e,plugins:t=[],onMount:n,...r}){const i=kjt({plugins:t,onMount:n,...r});return xi.createElement(_jt.Provider,{value:i},e)}const Njt=({id:e="waveform",children:t})=>xi.createElement("div",{id:e},t);function yH(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}let r6e=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}},Pjt=class extends r6e{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}};class Ojt extends r6e{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const Mjt=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class uie extends Pjt{constructor(t){var n,r,i,s,o,a;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,continuousWaveform:(s=t.continuousWaveform)!==null&&s!==void 0&&s,renderRecordedAudio:(o=t.renderRecordedAudio)===null||o===void 0||o,mediaRecorderTimeslice:(a=t.mediaRecorderTimeslice)!==null&&a!==void 0?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new Ojt,this.subscriptions.push(this.timer.on("tick",()=>{const u=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+u,this.emit("record-progress",this.duration)}))}static create(t){return new uie(t||{})}renderMicStream(t){var n;const r=new AudioContext,i=r.createMediaStreamSource(t),s=r.createAnalyser();i.connect(s),this.options.continuousWaveform&&(s.fftSize=32);const o=s.frequencyBinCount,a=new Float32Array(o);let u=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const l=setInterval(()=>{var c,f,d,h;if(!this.isWaveformPaused){if(s.getFloatTimeDomainData(a),this.options.scrollingWaveform){const p=Math.floor((this.options.scrollingWaveformWindow||0)*r.sampleRate),m=Math.min(p,this.dataWindow?this.dataWindow.length+o:o),g=new Float32Array(p);if(this.dataWindow){const y=Math.max(0,p-this.dataWindow.length);g.set(this.dataWindow.slice(-m+o),y)}g.set(a,p-o),this.dataWindow=g}else if(this.options.continuousWaveform){if(!this.dataWindow){const m=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((f=(c=this.wavesurfer)===null||c===void 0?void 0:c.getWidth())!==null&&f!==void 0?f:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(m)}let p=0;for(let m=0;m<o;m++){const g=Math.abs(a[m]);g>p&&(p=g)}if(u+1>this.dataWindow.length){const m=new Float32Array(2*this.dataWindow.length);m.set(this.dataWindow,0),this.dataWindow=m}this.dataWindow[u]=p,u++}else this.dataWindow=a;if(this.wavesurfer){const p=((h=(d=this.dataWindow)===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:p).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(m=>{console.error("Error rendering real-time recording data:",m)})}}},10);return{onDestroy:()=>{clearInterval(l),i==null||i.disconnect(),r==null||r.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(l),this.stopMic()}}}startMic(t){return yH(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return yH(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||Mjt.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data),this.emit("record-data-available",o.data)};const s=o=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(o,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return yH(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}function $jt({width:e=70,height:t=36}){const n=P.useRef(null),r=P.useRef(null),[i,s]=P.useState(!1);P.useEffect(()=>{if(i&&n.current){const a=n.current.registerPlugin(uie.create({scrollingWaveform:!0,renderRecordedAudio:!1}));r.current=a,a.startRecording(),n.current.setOptions({height:t,waveColor:"#FA5252"})}return()=>{var a,u;i&&n.current&&((a=r.current)==null||a.stopRecording(),(u=r.current)==null||u.destroy(),n.current.destroy())}},[i]);const o=P.useCallback(a=>{n.current=a,s(!0)},[]);return _.jsx(Ne,{id:"waveformDiv",style:{width:`${e}px`,height:`${t}px`},children:_.jsx(Rjt,{onMount:o,plugins:[],container:"#waveformDiv",height:t,children:_.jsx(Njt,{id:"waveform",height:t})})})}function Fjt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=Fs(T=>T.config),r=Fs(T=>T.metadata),i=cte(),s=Ep(),{toggleShowHelpText:o,toggleStudyBrowser:a}=Ld(),{storageEngine:u}=Wo(),l=Dy(),c=i.length-1,f=typeof l=="number"?l/c*100:0,[d,h]=P.useState(!1),p=n==null?void 0:n.uiConfig.logoPath,m=n==null?void 0:n.uiConfig.withProgressBar,g=GE(),y=uIe(`/${g}`),b=P.useRef(null),[w,S]=P.useState(!1),E=Fs(T=>T.isRecording);return P.useEffect(()=>{const T=b.current;T&&S(T.scrollWidth>T.offsetWidth)},[n]),_.jsx(bs.Header,{p:"md",children:_.jsxs(Cl,{mt:-7,align:"center",children:[_.jsx(Cl.Col,{span:4,children:_.jsxs(Zt,{align:"center",children:[_.jsx(Eb,{w:40,src:`${Rl}${p}`,alt:"Study Logo"}),_.jsx(xf,{w:"md"}),_.jsx(Os,{ref:b,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:w?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),_.jsx(Cl.Col,{span:4,children:m&&_.jsx(O2,{radius:"md",size:"lg",value:f})}),_.jsx(Cl.Col,{span:4,children:_.jsxs(qi,{wrap:"nowrap",justify:"right",children:[E?_.jsxs(qi,{ml:"xl",gap:20,wrap:"nowrap",children:[_.jsx(gt,{color:"red",children:"Recording audio"}),_.jsx($jt,{})]}):null,!t&&_.jsx(hs,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:_.jsx(u1,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&_.jsx(Mn,{variant:"outline",onClick:()=>s(o()),children:"Help"}),_.jsxs(dc,{shadow:"md",width:200,withinPortal:!0,opened:d,onChange:h,children:[_.jsx(dc.Target,{children:_.jsx(LE,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:_.jsx(_ht,{})})}),_.jsxs(dc.Dropdown,{children:[e&&_.jsx(dc.Item,{leftSection:_.jsx(Oht,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),_.jsx(dc.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:_.jsx(Aht,{size:14}),children:"Contact"}),e&&_.jsx(dc.Item,{leftSection:_.jsx(Mee,{size:14}),onClick:()=>t6e(u,n,r,y),children:"Next Participant"})]})]})]})})]})})}function i6e(e,t){var n;return cA(e)&&t.baseComponents?fte({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function Ljt(){var u;const e=(u=ey())==null?void 0:u.uiConfig.sidebar,t=ey(),n=Cb(),r=t.components[n],i=P.useMemo(()=>r?i6e(r,t):null,[r,t]),s=dte(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?_.jsxs(bs.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&_.jsx(bs.Section,{bg:"gray.3",p:"md",children:_.jsxs(gt,{c:"gray.9",children:[_.jsx(gt,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),_.jsx(Xu,{text:o})]})}),_.jsx(bs.Section,{p:"md",children:_.jsx(UL,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):_.jsx(bs.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:_.jsx(UL,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function Bjt(){const e=Fs(u=>u.showHelpText),t=Fs(u=>u.config),n=Ep(),{toggleShowHelpText:r}=Ld(),[i,s]=P.useState(""),[o,a]=P.useState(!0);return P.useEffect(()=>{async function u(){if(!t.uiConfig.helpTextPath){a(!1);return}const l=await pte(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),_.jsx(qs,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?_.jsx(Xu,{text:i}):_.jsx(Y_,{path:t.uiConfig.helpTextPath})})}function jjt(){const e=Fs(o=>o.alertModal),{setAlertModal:t}=Ld(),n=Ep(),[r,i]=P.useState(e.show),s=P.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return P.useEffect(()=>i(e.show),[e.show]),_.jsx(qs,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:_.jsxs(k0,{color:"red",radius:"xs",title:"Alert",icon:_.jsx(cht,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[_.jsx(gt,{my:"md",children:e.message}),_.jsx(qi,{w:"100%",justify:"end",children:_.jsx(Mn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function Ujt(){const e=P.useRef([]),t=ey(),n=t.uiConfig.windowEventDebounceTime??100,r=Fs(l=>l.showStudyBrowser),i=Fs(l=>l.modes);P.useEffect(()=>{const l=Th(b=>{e.current.push([Date.now(),"focus",b.target instanceof HTMLElement?b.target.tagName:""])},n,{maxWait:n}),c=Th(b=>{e.current.push([Date.now(),"input",b.data??""])},n,{maxWait:n}),f=Th(b=>{e.current.push([Date.now(),"keypress",b.key])},n,{maxWait:n}),d=Th(b=>{e.current.push([Date.now(),"mousedown",[b.clientX,b.clientY]])},n,{maxWait:n}),h=Th(b=>{e.current.push([Date.now(),"mouseup",[b.clientX,b.clientY]])},n,{maxWait:n}),p=Th(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),m=Th(b=>{e.current.push([Date.now(),"mousemove",[b.clientX,b.clientY]])},n,{maxWait:n}),g=Th(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),y=Th(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",l,!0),window.addEventListener("input",c),window.addEventListener("keypress",f),window.addEventListener("mousedown",d),window.addEventListener("mouseup",h),window.addEventListener("resize",p),window.addEventListener("mousemove",m),window.addEventListener("scroll",g),document.addEventListener("visibilitychange",y),()=>{window.removeEventListener("focus",l,!0),window.removeEventListener("input",c),window.removeEventListener("keypress",f),window.addEventListener("mousedown",d),window.addEventListener("mouseup",h),window.removeEventListener("resize",p),window.removeEventListener("mousemove",m),window.removeEventListener("scroll",g),document.removeEventListener("visibilitychange",y)}},[]);const s=t.uiConfig.sidebarWidth??300,{studyNavigatorEnabled:o,dataCollectionEnabled:a}=P.useMemo(()=>i,[i]),u=P.useMemo(()=>o&&r,[o,r]);return _.jsx(gRe.Provider,{value:e,children:_.jsxs(bs,{padding:"md",header:{height:70},navbar:{width:s,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!u,mobile:!u}},children:[_.jsx(Ljt,{}),_.jsx(wjt,{}),_.jsx(Fjt,{studyNavigatorEnabled:o,dataCollectionEnabled:a}),_.jsx(Bjt,{}),_.jsx(jjt,{}),_.jsx(bs.Main,{children:_.jsx(Kdt,{})})]})})}function zjt(e,t=!1){return typeof e=="number"?K1e(e,t):K1e(e.length,t).map(r=>r.map(i=>e[i]))}function K1e(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function s6e(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=s6e(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function Vjt(e,t){const n=f1(e);return s6e(n,t,"root")}function o6e(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&o6e(s,t,i,o)})}function Hjt(e){const t=[];return o6e(e,t,"",0),t}function X1e(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return zjt(i.sort(()=>.5-Math.random()),!0)}function qjt(e){const n=Hjt(e.sequence).map(s=>({[s]:X1e(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=Vjt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=X1e(e,o))})}),i}var Wjt=N9t;function Gjt(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function Yjt(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function Kjt(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function Xjt(e){return e.__COMMENTS__}function Qjt(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var y9={EOL:Wjt.EOL||`
`,tryParseNumber:Gjt,createComment:Yjt,removeComment:Kjt,getComment:Xjt,forceComment:Qjt},Jjt="3.2.1";function Zjt(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return Q1e}else if(e.length===0)return Q1e;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return t7t(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),e7t.bind(null,n)}function e7t(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function Q1e(){}function t7t(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function a6e(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}a6e.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function u6e(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}u6e.description="parse hexadecimal numbers prefixed with 0x";function l6e(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}l6e.description="support ISO dates";var lie={loadDsf:Zjt,std:{math:a6e,hex:u6e,date:l6e}},n7t=function(e,t){var n=y9,r=lie,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(L){return L==="{"||L==="}"||L==="["||L==="]"||L===","||L===":"}function d(L){var j,B=0,z=1;for(j=s-1;j>0&&i[j]!==`
`;j--,B++);for(;j>0;j--)i[j]===`
`&&z++;throw new Error(L+" at line "+z+","+B+" >>>"+i.substr(s-B,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(L){return i.charAt(s+L)}function m(L){for(var j="",B=o;h();){if(o===B)return h(),L&&B==="'"&&o==="'"&&j.length===0?(h(),g()):j;if(o==="\\")if(h(),o==="u"){for(var z=0,V=0;V<4;V++){h();var G=o.charCodeAt(0),$;o>="0"&&o<="9"?$=G-48:o>="a"&&o<="f"?$=G-97+10:o>="A"&&o<="F"?$=G-65+10:d("Bad \\u char "+o),z=z*16+$}j+=String.fromCharCode(z)}else if(typeof a[o]=="string")j+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):j+=o}d("Bad string")}function g(){for(var L="",j=0,B=0;;){var z=p(-B-5);if(!z||z===`
`)break;B++}function V(){for(var G=B;o&&o<=" "&&o!==`
`&&G-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),V());;){if(!o)d("Bad multiline string");else if(o==="'"){if(j++,h(),j===3)return L.slice(-1)===`
`&&(L=L.slice(0,-1)),L;continue}else for(;j>0;)L+="'",j--;o===`
`?(L+=`
`,h(),V()):(o!=="\r"&&(L+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var L="",j=s,B=-1;;){if(o===":")return L?B>=0&&B!==L.length&&(s=j+B,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),L;o<=" "?o?B<0&&(B=L.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):L+=o,h()}}function b(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function w(){var L=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var j=o==="\r"||o===`
`||o==="";if(j||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var B=L[0];switch(B){case"f":if(L.trim()==="false")return!1;break;case"n":if(L.trim()==="null")return null;break;case"t":if(L.trim()==="true")return!0;break;default:if(B==="-"||B>="0"&&B<="9"){var z=n.tryParseNumber(L);if(z!==void 0)return z}}if(j){L=L.trim();var V=l(L);return V!==void 0?V:L}}L+=o}}function S(L,j){var B;for(L--,B=s-2;B>L&&i[B]<=" "&&i[B]!==`
`;B--);i[B]===`
`&&B--,i[B]==="\r"&&B--;var z=i.substr(L,B-L+1);for(B=0;B<z.length;B++)if(z[B]>" "){var V=z.indexOf(`
`);if(V>=0){var G=[z.substr(0,V),z.substr(V+1)];return j&&G[0].trim().length===0&&G.shift(),G}else return[z]}return[]}function E(L){function j(z,V){var G,$,W,K;switch(typeof z){case"string":z.indexOf(V)>=0&&(K=z);break;case"object":if(Object.prototype.toString.apply(z)==="[object Array]")for(G=0,W=z.length;G<W;G++)K=j(z[G],V)||K;else for($ in z)Object.prototype.hasOwnProperty.call(z,$)&&(K=j(z[$],V)||K)}return K}function B(z){var V=j(L,z);return V?"found '"+z+`' in a string value, your mistake could be with:
  > `+V+`
  (unquoted strings contain everything up to the next line!)`:""}return B("}")||B("]")}function T(){var L=[],j,B,z;try{if(u&&(j=n.createComment(L,{a:[]})),h(),B=s,b(),j&&(z=S(B,!0).join(`
`)),o==="]")return h(),j&&(j.e=[z]),L;for(;o;){if(L.push(A()),B=s,b(),o===","&&(h(),B=s,b()),j){var V=S(B);j.a.push([z||"",V[0]||""]),z=V[1]}if(o==="]")return h(),j&&(j.a[j.a.length-1][1]+=z||""),L;b()}d("End of input while parsing an array (missing ']')")}catch(G){throw G.hint=G.hint||E(L),G}}function C(L){var j="",B={},z,V,G;try{if(u&&(z=n.createComment(B,{c:{},o:[]})),L?V=1:(h(),V=s),b(),z&&(G=S(V,!0).join(`
`)),o==="}"&&!L)return z&&(z.e=[G]),h(),B;for(;o;){if(j=y(),b(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),B[j]=A(),V=s,b(),o===","&&(h(),V=s,b()),z){var $=S(V);z.c[j]=[G||"",$[0]||""],G=$[1],z.o.push(j)}if(o==="}"&&!L)return h(),z&&(z.c[j][1]+=G||""),B;b()}if(L)return B;d("End of input while parsing an object (missing '}')")}catch(W){throw W.hint=W.hint||E(B),W}}function A(){switch(b(),o){case"{":return C();case"[":return T();case"'":case'"':return m(!0);default:return w()}}function I(L,j){var B=s;if(b(),o&&d("Syntax error, found trailing characters"),u){var z=j.join(`
`),V=S(B).join(`
`);if(V||z){var G=n.createComment(L,n.getComment(L));G.r=[z,V]}}return L}function k(){b();var L=u?S(1):null;switch(o){case"{":return I(C(),L);case"[":return I(T(),L);default:return I(A(),L)}}function N(){b();var L=u?S(1):null;switch(o){case"{":return I(C(),L);case"[":return I(T(),L)}try{return I(C(!0),L)}catch(j){c();try{return I(A(),L)}catch{throw j}}}if(typeof e!="string")throw new Error("source is not a string");var F=null,M=!0;return t&&typeof t=="object"&&(u=t.keepWsc,F=t.dsf,M=t.legacyRoot!==!1),l=r.loadDsf(F,"parse"),i=e,c(),M?N():k()},r7t=function(e,t){var n=y9,r=lie,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,b=Object.keys(i);for(y=b.length-1;y>=0;y--){var w=b[y];g[w].push(i[w][0].length,i[w][1].length)}}var S,E="---\u2028--\uFEFF-",T=new RegExp('[\\\\\\"\0-'+E+"]","g"),C=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),A=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),I=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),k={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},N=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,F="",M=0;function L(K,q){return M+=K[0].length+K[1].length-K[2]-K[3],K[0]+q+K[1]}function j(K){return K.replace(T,function(q){var Y=k[q];return typeof Y=="string"?L(g.esc,Y):L(g.uni,("0000"+q.charCodeAt(0).toString(16)).slice(-4))})}function B(K,q,Y,Z){return K?(C.lastIndex=0,I.lastIndex=0,c||Y||C.test(K)||n.tryParseNumber(K,!0)!==void 0||I.test(K)?(T.lastIndex=0,A.lastIndex=0,T.test(K)?!A.test(K)&&!Z&&d?z(K,q):L(g.qstr,j(K)):L(g.qstr,K)):L(g.str,K)):L(g.qstr,"")}function z(K,q){var Y,Z=K.replace(/\r/g,"").split(`
`);if(q+=o,Z.length===1)return L(g.mstr,Z[0]);var ae=s+q+g.mstr[0];for(Y=0;Y<Z.length;Y++)ae+=s,Z[Y]&&(ae+=q+Z[Y]);return ae+s+q+g.mstr[1]}function V(K){return K?l||N.test(K)?(T.lastIndex=0,L(g.qkey,T.test(K)?j(K):K)):L(g.key,K):'""'}function G(K,q,Y,Z){function ae(Yt){return Yt&&Yt[Yt[0]==="\r"?1:0]===`
`}function be(Yt){return Yt&&!ae(Yt)}function Se(Yt,un,Sn){if(!Yt)return"";Yt=n.forceComment(Yt);var Bn,Ci=Yt.length;for(Bn=0;Bn<Ci&&Yt[Bn]<=" ";Bn++);return Sn&&Bn>0&&(Yt=Yt.substr(Bn)),Bn<Ci?un+L(g.rem,Yt):Yt}var we=S(K);if(we!==void 0)return L(g.dsf,we);switch(typeof K){case"string":return B(K,F,q,Z);case"number":return isFinite(K)?L(g.num,String(K)):L(g.lit,"null");case"boolean":return L(g.lit,String(K));case"object":if(!K)return L(g.lit,"null");var Ce;a&&(Ce=n.getComment(K));var Le=Object.prototype.toString.apply(K)==="[object Array]",ke=F;F+=o;var Ze=s+ke,Ke=s+F,Ct=Y||u?"":Ze,wt=[],Re,He=f?[]:null,lt=c,St=d,Vt=h?"":g.com[0],ht=0,Q,de,_e,oe,he,Ee,Fe,je,ct;if(Le){for(Q=0,de=K.length;Q<de;Q++){if(Re=Q<de-1,Ce?(Ee=Ce.a[Q]||[],Fe=be(Ee[1]),wt.push(Se(Ee[0],`
`)+Ke),He&&(Ee[0]||Ee[1]||Fe)&&(He=null)):wt.push(Ke),M=0,oe=K[Q],wt.push(G(oe,Ce?Fe:!1,!0)+(Re?h:"")),He){switch(typeof oe){case"string":M=0,c=!0,d=0,He.push(G(oe,!1,!0)+(Re?g.com[0]:"")),c=lt,d=St;break;case"object":if(oe){He=null;break}default:He.push(wt[wt.length-1]+(Re?Vt:""));break}Re&&(M+=g.com[0].length-g.com[2]),ht+=M}Ce&&Ee[1]&&wt.push(Se(Ee[1],Fe?" ":`
`,Fe))}de===0?Ce&&Ce.e&&wt.push(Se(Ce.e[0],`
`)+Ze):wt.push(Ze),wt.length===0?je=L(g.arr,""):(je=Ct+L(g.arr,wt.join("")),He&&(ct=He.join(" "),ct.length-ht<=f&&(je=L(g.arr,ct))))}else{var rt=Ce?Ce.o.slice():[],qt=[];for(_e in K)Object.prototype.hasOwnProperty.call(K,_e)&&rt.indexOf(_e)<0&&qt.push(_e);m&&qt.sort();var en=rt.concat(qt);for(Q=0,de=en.length;Q<de;Q++)if(Re=Q<de-1,_e=en[Q],Ce?(Ee=Ce.c[_e]||[],Fe=be(Ee[1]),wt.push(Se(Ee[0],`
`)+Ke),He&&(Ee[0]||Ee[1]||Fe)&&(He=null)):wt.push(Ke),M=0,oe=K[_e],he=G(oe,Ce&&Fe),wt.push(V(_e)+g.col[0]+(ae(he)?"":" ")+he+(Re?h:"")),Ce&&Ee[1]&&wt.push(Se(Ee[1],Fe?" ":`
`,Fe)),He){switch(typeof oe){case"string":M=0,c=!0,d=0,he=G(oe,!1),c=lt,d=St,He.push(V(_e)+g.col[0]+" "+he+(Re?g.com[0]:""));break;case"object":if(oe){He=null;break}default:He.push(wt[wt.length-1]+(Re?Vt:""));break}M+=g.col[0].length-g.col[2],Re&&(M+=g.com[0].length-g.com[2]),ht+=M}de===0?Ce&&Ce.e&&wt.push(Se(Ce.e[0],`
`)+Ze):wt.push(Ze),wt.length===0?je=L(g.obj,""):(je=Ct+L(g.obj,wt.join("")),He&&(ct=He.join(" "),ct.length-ht<=f&&(je=L(g.obj,ct))))}return F=ke,je}}S=r.loadDsf(p,"stringify");var $="",W=a?W=(n.getComment(e)||{}).r:null;return W&&W[0]&&($=W[0]+`
`),$+=G(e,null,!0,!0),W&&($+=W[1]||""),$},OT=y9;function Ik(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function xK(e,t){if(!(e===null||typeof e!="object")){var n=OT.getComment(e);n&&OT.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)J1e(o.a,r,n.a[r],xK(e[r]))&&(s=!0);!s&&n.e&&(o.e=Ik(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];J1e(o.s,l,n.c[l],xK(e[l]))&&(s=!0)}!s&&n.e&&(o.e=Ik(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=Ik(n.r[0],n.r[1])),s?o:void 0}}function i7t(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function s7t(e,t){var n=[];if(SK(e,t,n,[]),n.length>0){var r=I4(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+i7t(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),I4(t,r,1)}}function J1e(e,t,n,r){var i=Ik(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function kk(e,t){var n=Ik(t.b,t.a);return n.path=e,n}function Rk(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(kk(s,o)),Rk(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(kk(u,l)),Rk(l.x,t,u))});e.e&&t.push(kk(n,e.e))}}function SK(e,t,n,r){if(e){if(t===null||typeof t!="object"){Rk(e,n,r);return}var i,s=OT.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],SK(u.x,t[i],n,l)):(n.push(kk(l,u)),Rk(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],SK(d.x,t[c],n,f))):d&&(n.push(kk(f,d)),Rk(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function I4(e,t,n){var r=OT.createComment(e,OT.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=OT.forceComment(t)),r.r[n]||""}var o7t={extract:function(e){return xK(e,!0)},merge:s7t,header:function(e,t){return I4(e,t,0)},footer:function(e,t){return I4(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var Z1e=y9,a7t=Jjt,ebe=n7t,tbe=r7t,u7t=o7t,l7t=lie,v9={parse:ebe,stringify:tbe,endOfLine:function(){return Z1e.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(Z1e.EOL=e)},version:a7t,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,ebe(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,tbe(e,t)}},comments:u7t,dsf:l7t.std},TK={exports:{}},c6e={},rp={},zC={},UP={},Ar={},uN={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(b){if(super(),!e.IDENTIFIER.test(b))throw new Error("CodeGen: name must be a valid identifier");this.str=b}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(b){super(),this._items=typeof b=="string"?[b]:b}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const b=this._items[0];return b===""||b==='""'}get str(){var b;return(b=this._str)!==null&&b!==void 0?b:this._str=this._items.reduce((w,S)=>`${w}${S}`,"")}get names(){var b;return(b=this._names)!==null&&b!==void 0?b:this._names=this._items.reduce((w,S)=>(S instanceof n&&(w[S.str]=(w[S.str]||0)+1),w),{})}}e._Code=r,e.nil=new r("");function i(y,...b){const w=[y[0]];let S=0;for(;S<b.length;)a(w,b[S]),w.push(y[++S]);return new r(w)}e._=i;const s=new r("+");function o(y,...b){const w=[h(y[0])];let S=0;for(;S<b.length;)w.push(s),a(w,b[S]),w.push(s,h(y[++S]));return u(w),new r(w)}e.str=o;function a(y,b){b instanceof r?y.push(...b._items):b instanceof n?y.push(b):y.push(f(b))}e.addCodeArg=a;function u(y){let b=1;for(;b<y.length-1;){if(y[b]===s){const w=l(y[b-1],y[b+1]);if(w!==void 0){y.splice(b-1,3,w);continue}y[b++]="+"}b++}}function l(y,b){if(b==='""')return y;if(y==='""')return b;if(typeof y=="string")return b instanceof n||y[y.length-1]!=='"'?void 0:typeof b!="string"?`${y.slice(0,-1)}${b}"`:b[0]==='"'?y.slice(0,-1)+b.slice(1):void 0;if(typeof b=="string"&&b[0]==='"'&&!(y instanceof n))return`"${y}${b.slice(1)}`}function c(y,b){return b.emptyStr()?y:y.emptyStr()?b:o`${y}${b}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(uN);var CK={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=uN;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const b=m.get(p);if(b)return b}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let b=c(y);if(b){const w=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${w} ${y} = ${b};${this.opts._n}`}else if(b=d==null?void 0:d(y))h=(0,t._)`${h}${b}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(CK);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=uN,n=CK;var r=uN;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=CK;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(Y,Z){return this}}class o extends s{constructor(Y,Z,ae){super(),this.varKind=Y,this.name=Z,this.rhs=ae}render({es5:Y,_n:Z}){const ae=Y?n.varKinds.var:this.varKind,be=this.rhs===void 0?"":` = ${this.rhs}`;return`${ae} ${this.name}${be};`+Z}optimizeNames(Y,Z){if(Y[this.name.str])return this.rhs&&(this.rhs=L(this.rhs,Y,Z)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(Y,Z,ae){super(),this.lhs=Y,this.rhs=Z,this.sideEffects=ae}render({_n:Y}){return`${this.lhs} = ${this.rhs};`+Y}optimizeNames(Y,Z){if(!(this.lhs instanceof t.Name&&!Y[this.lhs.str]&&!this.sideEffects))return this.rhs=L(this.rhs,Y,Z),this}get names(){const Y=this.lhs instanceof t.Name?{}:{...this.lhs.names};return M(Y,this.rhs)}}class u extends a{constructor(Y,Z,ae,be){super(Y,ae,be),this.op=Z}render({_n:Y}){return`${this.lhs} ${this.op}= ${this.rhs};`+Y}}class l extends s{constructor(Y){super(),this.label=Y,this.names={}}render({_n:Y}){return`${this.label}:`+Y}}class c extends s{constructor(Y){super(),this.label=Y,this.names={}}render({_n:Y}){return`break${this.label?` ${this.label}`:""};`+Y}}class f extends s{constructor(Y){super(),this.error=Y}render({_n:Y}){return`throw ${this.error};`+Y}get names(){return this.error.names}}class d extends s{constructor(Y){super(),this.code=Y}render({_n:Y}){return`${this.code};`+Y}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(Y,Z){return this.code=L(this.code,Y,Z),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(Y=[]){super(),this.nodes=Y}render(Y){return this.nodes.reduce((Z,ae)=>Z+ae.render(Y),"")}optimizeNodes(){const{nodes:Y}=this;let Z=Y.length;for(;Z--;){const ae=Y[Z].optimizeNodes();Array.isArray(ae)?Y.splice(Z,1,...ae):ae?Y[Z]=ae:Y.splice(Z,1)}return Y.length>0?this:void 0}optimizeNames(Y,Z){const{nodes:ae}=this;let be=ae.length;for(;be--;){const Se=ae[be];Se.optimizeNames(Y,Z)||(j(Y,Se.names),ae.splice(be,1))}return ae.length>0?this:void 0}get names(){return this.nodes.reduce((Y,Z)=>F(Y,Z.names),{})}}class p extends h{render(Y){return"{"+Y._n+super.render(Y)+"}"+Y._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(Y,Z){super(Z),this.condition=Y}render(Y){let Z=`if(${this.condition})`+super.render(Y);return this.else&&(Z+="else "+this.else.render(Y)),Z}optimizeNodes(){super.optimizeNodes();const Y=this.condition;if(Y===!0)return this.nodes;let Z=this.else;if(Z){const ae=Z.optimizeNodes();Z=this.else=Array.isArray(ae)?new g(ae):ae}if(Z)return Y===!1?Z instanceof y?Z:Z.nodes:this.nodes.length?this:new y(B(Y),Z instanceof y?[Z]:Z.nodes);if(!(Y===!1||!this.nodes.length))return this}optimizeNames(Y,Z){var ae;if(this.else=(ae=this.else)===null||ae===void 0?void 0:ae.optimizeNames(Y,Z),!!(super.optimizeNames(Y,Z)||this.else))return this.condition=L(this.condition,Y,Z),this}get names(){const Y=super.names;return M(Y,this.condition),this.else&&F(Y,this.else.names),Y}}y.kind="if";class b extends p{}b.kind="for";class w extends b{constructor(Y){super(),this.iteration=Y}render(Y){return`for(${this.iteration})`+super.render(Y)}optimizeNames(Y,Z){if(super.optimizeNames(Y,Z))return this.iteration=L(this.iteration,Y,Z),this}get names(){return F(super.names,this.iteration.names)}}class S extends b{constructor(Y,Z,ae,be){super(),this.varKind=Y,this.name=Z,this.from=ae,this.to=be}render(Y){const Z=Y.es5?n.varKinds.var:this.varKind,{name:ae,from:be,to:Se}=this;return`for(${Z} ${ae}=${be}; ${ae}<${Se}; ${ae}++)`+super.render(Y)}get names(){const Y=M(super.names,this.from);return M(Y,this.to)}}class E extends b{constructor(Y,Z,ae,be){super(),this.loop=Y,this.varKind=Z,this.name=ae,this.iterable=be}render(Y){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(Y)}optimizeNames(Y,Z){if(super.optimizeNames(Y,Z))return this.iterable=L(this.iterable,Y,Z),this}get names(){return F(super.names,this.iterable.names)}}class T extends p{constructor(Y,Z,ae){super(),this.name=Y,this.args=Z,this.async=ae}render(Y){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(Y)}}T.kind="func";class C extends h{render(Y){return"return "+super.render(Y)}}C.kind="return";class A extends p{render(Y){let Z="try"+super.render(Y);return this.catch&&(Z+=this.catch.render(Y)),this.finally&&(Z+=this.finally.render(Y)),Z}optimizeNodes(){var Y,Z;return super.optimizeNodes(),(Y=this.catch)===null||Y===void 0||Y.optimizeNodes(),(Z=this.finally)===null||Z===void 0||Z.optimizeNodes(),this}optimizeNames(Y,Z){var ae,be;return super.optimizeNames(Y,Z),(ae=this.catch)===null||ae===void 0||ae.optimizeNames(Y,Z),(be=this.finally)===null||be===void 0||be.optimizeNames(Y,Z),this}get names(){const Y=super.names;return this.catch&&F(Y,this.catch.names),this.finally&&F(Y,this.finally.names),Y}}class I extends p{constructor(Y){super(),this.error=Y}render(Y){return`catch(${this.error})`+super.render(Y)}}I.kind="catch";class k extends p{render(Y){return"finally"+super.render(Y)}}k.kind="finally";class N{constructor(Y,Z={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...Z,_n:Z.lines?`
`:""},this._extScope=Y,this._scope=new n.Scope({parent:Y}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(Y){return this._scope.name(Y)}scopeName(Y){return this._extScope.name(Y)}scopeValue(Y,Z){const ae=this._extScope.value(Y,Z);return(this._values[ae.prefix]||(this._values[ae.prefix]=new Set)).add(ae),ae}getScopeValue(Y,Z){return this._extScope.getValue(Y,Z)}scopeRefs(Y){return this._extScope.scopeRefs(Y,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(Y,Z,ae,be){const Se=this._scope.toName(Z);return ae!==void 0&&be&&(this._constants[Se.str]=ae),this._leafNode(new o(Y,Se,ae)),Se}const(Y,Z,ae){return this._def(n.varKinds.const,Y,Z,ae)}let(Y,Z,ae){return this._def(n.varKinds.let,Y,Z,ae)}var(Y,Z,ae){return this._def(n.varKinds.var,Y,Z,ae)}assign(Y,Z,ae){return this._leafNode(new a(Y,Z,ae))}add(Y,Z){return this._leafNode(new u(Y,e.operators.ADD,Z))}code(Y){return typeof Y=="function"?Y():Y!==t.nil&&this._leafNode(new d(Y)),this}object(...Y){const Z=["{"];for(const[ae,be]of Y)Z.length>1&&Z.push(","),Z.push(ae),(ae!==be||this.opts.es5)&&(Z.push(":"),(0,t.addCodeArg)(Z,be));return Z.push("}"),new t._Code(Z)}if(Y,Z,ae){if(this._blockNode(new y(Y)),Z&&ae)this.code(Z).else().code(ae).endIf();else if(Z)this.code(Z).endIf();else if(ae)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(Y){return this._elseNode(new y(Y))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(Y,Z){return this._blockNode(Y),Z&&this.code(Z).endFor(),this}for(Y,Z){return this._for(new w(Y),Z)}forRange(Y,Z,ae,be,Se=this.opts.es5?n.varKinds.var:n.varKinds.let){const we=this._scope.toName(Y);return this._for(new S(Se,we,Z,ae),()=>be(we))}forOf(Y,Z,ae,be=n.varKinds.const){const Se=this._scope.toName(Y);if(this.opts.es5){const we=Z instanceof t.Name?Z:this.var("_arr",Z);return this.forRange("_i",0,(0,t._)`${we}.length`,Ce=>{this.var(Se,(0,t._)`${we}[${Ce}]`),ae(Se)})}return this._for(new E("of",be,Se,Z),()=>ae(Se))}forIn(Y,Z,ae,be=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(Y,(0,t._)`Object.keys(${Z})`,ae);const Se=this._scope.toName(Y);return this._for(new E("in",be,Se,Z),()=>ae(Se))}endFor(){return this._endBlockNode(b)}label(Y){return this._leafNode(new l(Y))}break(Y){return this._leafNode(new c(Y))}return(Y){const Z=new C;if(this._blockNode(Z),this.code(Y),Z.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(Y,Z,ae){if(!Z&&!ae)throw new Error('CodeGen: "try" without "catch" and "finally"');const be=new A;if(this._blockNode(be),this.code(Y),Z){const Se=this.name("e");this._currNode=be.catch=new I(Se),Z(Se)}return ae&&(this._currNode=be.finally=new k,this.code(ae)),this._endBlockNode(I,k)}throw(Y){return this._leafNode(new f(Y))}block(Y,Z){return this._blockStarts.push(this._nodes.length),Y&&this.code(Y).endBlock(Z),this}endBlock(Y){const Z=this._blockStarts.pop();if(Z===void 0)throw new Error("CodeGen: not in self-balancing block");const ae=this._nodes.length-Z;if(ae<0||Y!==void 0&&ae!==Y)throw new Error(`CodeGen: wrong number of nodes: ${ae} vs ${Y} expected`);return this._nodes.length=Z,this}func(Y,Z=t.nil,ae,be){return this._blockNode(new T(Y,Z,ae)),be&&this.code(be).endFunc(),this}endFunc(){return this._endBlockNode(T)}optimize(Y=1){for(;Y-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(Y){return this._currNode.nodes.push(Y),this}_blockNode(Y){this._currNode.nodes.push(Y),this._nodes.push(Y)}_endBlockNode(Y,Z){const ae=this._currNode;if(ae instanceof Y||Z&&ae instanceof Z)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${Z?`${Y.kind}/${Z.kind}`:Y.kind}"`)}_elseNode(Y){const Z=this._currNode;if(!(Z instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=Z.else=Y,this}get _root(){return this._nodes[0]}get _currNode(){const Y=this._nodes;return Y[Y.length-1]}set _currNode(Y){const Z=this._nodes;Z[Z.length-1]=Y}}e.CodeGen=N;function F(q,Y){for(const Z in Y)q[Z]=(q[Z]||0)+(Y[Z]||0);return q}function M(q,Y){return Y instanceof t._CodeOrName?F(q,Y.names):q}function L(q,Y,Z){if(q instanceof t.Name)return ae(q);if(!be(q))return q;return new t._Code(q._items.reduce((Se,we)=>(we instanceof t.Name&&(we=ae(we)),we instanceof t._Code?Se.push(...we._items):Se.push(we),Se),[]));function ae(Se){const we=Z[Se.str];return we===void 0||Y[Se.str]!==1?Se:(delete Y[Se.str],we)}function be(Se){return Se instanceof t._Code&&Se._items.some(we=>we instanceof t.Name&&Y[we.str]===1&&Z[we.str]!==void 0)}}function j(q,Y){for(const Z in Y)q[Z]=(q[Z]||0)-(Y[Z]||0)}function B(q){return typeof q=="boolean"||typeof q=="number"||q===null?!q:(0,t._)`!${K(q)}`}e.not=B;const z=W(e.operators.AND);function V(...q){return q.reduce(z)}e.and=V;const G=W(e.operators.OR);function $(...q){return q.reduce(G)}e.or=$;function W(q){return(Y,Z)=>Y===t.nil?Z:Z===t.nil?Y:(0,t._)`${K(Y)} ${q} ${K(Z)}`}function K(q){return q instanceof t.Name?q:(0,t._)`(${q})`}})(Ar);var Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.checkStrictMode=Gt.getErrorPath=Gt.Type=Gt.useFunc=Gt.setEvaluated=Gt.evaluatedPropsToName=Gt.mergeEvaluated=Gt.eachItem=Gt.unescapeJsonPointer=Gt.escapeJsonPointer=Gt.escapeFragment=Gt.unescapeFragment=Gt.schemaRefOrVal=Gt.schemaHasRulesButRef=Gt.schemaHasRules=Gt.checkUnknownRules=Gt.alwaysValidSchema=Gt.toHash=void 0;const es=Ar,c7t=uN;function f7t(e){const t={};for(const n of e)t[n]=!0;return t}Gt.toHash=f7t;function d7t(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(f6e(e,t),!d6e(t,e.self.RULES.all))}Gt.alwaysValidSchema=d7t;function f6e(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||m6e(e,`unknown keyword: "${s}"`)}Gt.checkUnknownRules=f6e;function d6e(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}Gt.schemaHasRules=d6e;function h7t(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}Gt.schemaHasRulesButRef=h7t;function p7t({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,es._)`${n}`}return(0,es._)`${e}${t}${(0,es.getProperty)(r)}`}Gt.schemaRefOrVal=p7t;function m7t(e){return h6e(decodeURIComponent(e))}Gt.unescapeFragment=m7t;function g7t(e){return encodeURIComponent(cie(e))}Gt.escapeFragment=g7t;function cie(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}Gt.escapeJsonPointer=cie;function h6e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Gt.unescapeJsonPointer=h6e;function y7t(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}Gt.eachItem=y7t;function nbe({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof es.Name?(s instanceof es.Name?e(i,s,o):t(i,s,o),o):s instanceof es.Name?(t(i,o,s),s):n(s,o);return a===es.Name&&!(u instanceof es.Name)?r(i,u):u}}Gt.mergeEvaluated={props:nbe({mergeNames:(e,t,n)=>e.if((0,es._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,es._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,es._)`${n} || {}`).code((0,es._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,es._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,es._)`${n} || {}`),fie(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:p6e}),items:nbe({mergeNames:(e,t,n)=>e.if((0,es._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,es._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,es._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,es._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function p6e(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,es._)`{}`);return t!==void 0&&fie(e,n,t),n}Gt.evaluatedPropsToName=p6e;function fie(e,t,n){Object.keys(n).forEach(r=>e.assign((0,es._)`${t}${(0,es.getProperty)(r)}`,!0))}Gt.setEvaluated=fie;const rbe={};function v7t(e,t){return e.scopeValue("func",{ref:t,code:rbe[t.code]||(rbe[t.code]=new c7t._Code(t.code))})}Gt.useFunc=v7t;var AK;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(AK||(Gt.Type=AK={}));function b7t(e,t,n){if(e instanceof es.Name){const r=t===AK.Num;return n?r?(0,es._)`"[" + ${e} + "]"`:(0,es._)`"['" + ${e} + "']"`:r?(0,es._)`"/" + ${e}`:(0,es._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,es.getProperty)(e).toString():"/"+cie(e)}Gt.getErrorPath=b7t;function m6e(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}Gt.checkStrictMode=m6e;var mg={};Object.defineProperty(mg,"__esModule",{value:!0});const Iu=Ar,w7t={data:new Iu.Name("data"),valCxt:new Iu.Name("valCxt"),instancePath:new Iu.Name("instancePath"),parentData:new Iu.Name("parentData"),parentDataProperty:new Iu.Name("parentDataProperty"),rootData:new Iu.Name("rootData"),dynamicAnchors:new Iu.Name("dynamicAnchors"),vErrors:new Iu.Name("vErrors"),errors:new Iu.Name("errors"),this:new Iu.Name("this"),self:new Iu.Name("self"),scope:new Iu.Name("scope"),json:new Iu.Name("json"),jsonPos:new Iu.Name("jsonPos"),jsonLen:new Iu.Name("jsonLen"),jsonPart:new Iu.Name("jsonPart")};mg.default=w7t;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Ar,n=Gt,r=mg;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,b,w){const{it:S}=g,{gen:E,compositeRule:T,allErrors:C}=S,A=f(g,y,b);w??(T||C)?u(E,A):l(S,(0,t._)`[${A}]`)}e.reportError=i;function s(g,y=e.keywordError,b){const{it:w}=g,{gen:S,compositeRule:E,allErrors:T}=w,C=f(g,y,b);u(S,C),E||T||l(w,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:b,data:w,errsCount:S,it:E}){if(S===void 0)throw new Error("ajv implementation error");const T=g.name("err");g.forRange("i",S,r.default.errors,C=>{g.const(T,(0,t._)`${r.default.vErrors}[${C}]`),g.if((0,t._)`${T}.instancePath === undefined`,()=>g.assign((0,t._)`${T}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${T}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${T}.schema`,b),g.assign((0,t._)`${T}.data`,w))})}e.extendErrors=a;function u(g,y){const b=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${b}]`),(0,t._)`${r.default.vErrors}.push(${b})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:b,validateName:w,schemaEnv:S}=g;S.$async?b.throw((0,t._)`new ${g.ValidationError}(${y})`):(b.assign((0,t._)`${w}.errors`,y),b.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,b){const{createErrors:w}=g.it;return w===!1?(0,t._)`{}`:d(g,y,b)}function d(g,y,b={}){const{gen:w,it:S}=g,E=[h(S,b),p(g,b)];return m(g,y,E),w.object(...E)}function h({errorPath:g},{instancePath:y}){const b=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,b)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:b,parentSchema:w}){let S=w?y:(0,t.str)`${y}/${g}`;return b&&(S=(0,t.str)`${S}${(0,n.getErrorPath)(b,n.Type.Str)}`),[c.schemaPath,S]}function m(g,{params:y,message:b},w){const{keyword:S,data:E,schemaValue:T,it:C}=g,{opts:A,propertyName:I,topSchemaRef:k,schemaPath:N}=C;w.push([c.keyword,S],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),A.messages&&w.push([c.message,typeof b=="function"?b(g):b]),A.verbose&&w.push([c.schema,T],[c.parentSchema,(0,t._)`${k}${N}`],[r.default.data,E]),I&&w.push([c.propertyName,I])}})(UP);Object.defineProperty(zC,"__esModule",{value:!0});zC.boolOrEmptySchema=zC.topBoolOrEmptySchema=void 0;const _7t=UP,E7t=Ar,x7t=mg,S7t={message:"boolean schema is false"};function T7t(e){const{gen:t,schema:n,validateName:r}=e;n===!1?g6e(e,!1):typeof n=="object"&&n.$async===!0?t.return(x7t.default.data):(t.assign((0,E7t._)`${r}.errors`,null),t.return(!0))}zC.topBoolOrEmptySchema=T7t;function C7t(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),g6e(e)):n.var(t,!0)}zC.boolOrEmptySchema=C7t;function g6e(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,_7t.reportError)(i,S7t,void 0,t)}var ra={},oE={};Object.defineProperty(oE,"__esModule",{value:!0});oE.getRules=oE.isJSONType=void 0;const A7t=["string","number","integer","boolean","null","object","array"],D7t=new Set(A7t);function I7t(e){return typeof e=="string"&&D7t.has(e)}oE.isJSONType=I7t;function k7t(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}oE.getRules=k7t;var M0={};Object.defineProperty(M0,"__esModule",{value:!0});M0.shouldUseRule=M0.shouldUseGroup=M0.schemaHasRulesForType=void 0;function R7t({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&y6e(e,r)}M0.schemaHasRulesForType=R7t;function y6e(e,t){return t.rules.some(n=>v6e(e,n))}M0.shouldUseGroup=y6e;function v6e(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}M0.shouldUseRule=v6e;Object.defineProperty(ra,"__esModule",{value:!0});ra.reportTypeError=ra.checkDataTypes=ra.checkDataType=ra.coerceAndCheckDataType=ra.getJSONTypes=ra.getSchemaTypes=ra.DataType=void 0;const N7t=oE,P7t=M0,O7t=UP,dr=Ar,b6e=Gt;var MT;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(MT||(ra.DataType=MT={}));function M7t(e){const t=w6e(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}ra.getSchemaTypes=M7t;function w6e(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(N7t.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}ra.getJSONTypes=w6e;function $7t(e,t){const{gen:n,data:r,opts:i}=e,s=F7t(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,P7t.schemaHasRulesForType)(e,t[0]));if(o){const a=die(t,r,i.strictNumbers,MT.Wrong);n.if(a,()=>{s.length?L7t(e,t,s):hie(e)})}return o}ra.coerceAndCheckDataType=$7t;const _6e=new Set(["string","number","integer","boolean","null"]);function F7t(e,t){return t?e.filter(n=>_6e.has(n)||t==="array"&&n==="array"):[]}function L7t(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,dr._)`typeof ${i}`),a=r.let("coerced",(0,dr._)`undefined`);s.coerceTypes==="array"&&r.if((0,dr._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,dr._)`${i}[0]`).assign(o,(0,dr._)`typeof ${i}`).if(die(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,dr._)`${a} !== undefined`);for(const l of n)(_6e.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),hie(e),r.endIf(),r.if((0,dr._)`${a} !== undefined`,()=>{r.assign(i,a),B7t(e,a)});function u(l){switch(l){case"string":r.elseIf((0,dr._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,dr._)`"" + ${i}`).elseIf((0,dr._)`${i} === null`).assign(a,(0,dr._)`""`);return;case"number":r.elseIf((0,dr._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,dr._)`+${i}`);return;case"integer":r.elseIf((0,dr._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,dr._)`+${i}`);return;case"boolean":r.elseIf((0,dr._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,dr._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,dr._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,dr._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,dr._)`[${i}]`)}}}function B7t({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,dr._)`${t} !== undefined`,()=>e.assign((0,dr._)`${t}[${n}]`,r))}function DK(e,t,n,r=MT.Correct){const i=r===MT.Correct?dr.operators.EQ:dr.operators.NEQ;let s;switch(e){case"null":return(0,dr._)`${t} ${i} null`;case"array":s=(0,dr._)`Array.isArray(${t})`;break;case"object":s=(0,dr._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,dr._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,dr._)`typeof ${t} ${i} ${e}`}return r===MT.Correct?s:(0,dr.not)(s);function o(a=dr.nil){return(0,dr.and)((0,dr._)`typeof ${t} == "number"`,a,n?(0,dr._)`isFinite(${t})`:dr.nil)}}ra.checkDataType=DK;function die(e,t,n,r){if(e.length===1)return DK(e[0],t,n,r);let i;const s=(0,b6e.toHash)(e);if(s.array&&s.object){const o=(0,dr._)`typeof ${t} != "object"`;i=s.null?o:(0,dr._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=dr.nil;s.number&&delete s.integer;for(const o in s)i=(0,dr.and)(i,DK(o,t,n,r));return i}ra.checkDataTypes=die;const j7t={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,dr._)`{type: ${e}}`:(0,dr._)`{type: ${t}}`};function hie(e){const t=U7t(e);(0,O7t.reportError)(t,j7t)}ra.reportTypeError=hie;function U7t(e){const{gen:t,data:n,schema:r}=e,i=(0,b6e.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var b9={};Object.defineProperty(b9,"__esModule",{value:!0});b9.assignDefaults=void 0;const rS=Ar,z7t=Gt;function V7t(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)ibe(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>ibe(e,s,i.default))}b9.assignDefaults=V7t;function ibe(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,rS._)`${s}${(0,rS.getProperty)(t)}`;if(i){(0,z7t.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,rS._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,rS._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,rS._)`${a} = ${(0,rS.stringify)(n)}`)}var bm={},Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});Tr.validateUnion=Tr.validateArray=Tr.usePattern=Tr.callValidateCode=Tr.schemaProperties=Tr.allSchemaProperties=Tr.noPropertyInData=Tr.propertyInData=Tr.isOwnProperty=Tr.hasPropFunc=Tr.reportMissingProp=Tr.checkMissingProp=Tr.checkReportMissingProp=void 0;const ps=Ar,pie=Gt,sv=mg,H7t=Gt;function q7t(e,t){const{gen:n,data:r,it:i}=e;n.if(gie(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,ps._)`${t}`},!0),e.error()})}Tr.checkReportMissingProp=q7t;function W7t({gen:e,data:t,it:{opts:n}},r,i){return(0,ps.or)(...r.map(s=>(0,ps.and)(gie(e,t,s,n.ownProperties),(0,ps._)`${i} = ${s}`)))}Tr.checkMissingProp=W7t;function G7t(e,t){e.setParams({missingProperty:t},!0),e.error()}Tr.reportMissingProp=G7t;function E6e(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ps._)`Object.prototype.hasOwnProperty`})}Tr.hasPropFunc=E6e;function mie(e,t,n){return(0,ps._)`${E6e(e)}.call(${t}, ${n})`}Tr.isOwnProperty=mie;function Y7t(e,t,n,r){const i=(0,ps._)`${t}${(0,ps.getProperty)(n)} !== undefined`;return r?(0,ps._)`${i} && ${mie(e,t,n)}`:i}Tr.propertyInData=Y7t;function gie(e,t,n,r){const i=(0,ps._)`${t}${(0,ps.getProperty)(n)} === undefined`;return r?(0,ps.or)(i,(0,ps.not)(mie(e,t,n))):i}Tr.noPropertyInData=gie;function x6e(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Tr.allSchemaProperties=x6e;function K7t(e,t){return x6e(t).filter(n=>!(0,pie.alwaysValidSchema)(e,t[n]))}Tr.schemaProperties=K7t;function X7t({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,ps._)`${e}, ${t}, ${r}${i}`:t,f=[[sv.default.instancePath,(0,ps.strConcat)(sv.default.instancePath,s)],[sv.default.parentData,o.parentData],[sv.default.parentDataProperty,o.parentDataProperty],[sv.default.rootData,sv.default.rootData]];o.opts.dynamicRef&&f.push([sv.default.dynamicAnchors,sv.default.dynamicAnchors]);const d=(0,ps._)`${c}, ${n.object(...f)}`;return u!==ps.nil?(0,ps._)`${a}.call(${u}, ${d})`:(0,ps._)`${a}(${d})`}Tr.callValidateCode=X7t;const Q7t=(0,ps._)`new RegExp`;function J7t({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,ps._)`${i.code==="new RegExp"?Q7t:(0,H7t.useFunc)(e,i)}(${n}, ${r})`})}Tr.usePattern=J7t;function Z7t(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,ps._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:pie.Type.Num},s),t.if((0,ps.not)(s),a)})}}Tr.validateArray=Z7t;function eUt(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,pie.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,ps._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,ps.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Tr.validateUnion=eUt;Object.defineProperty(bm,"__esModule",{value:!0});bm.validateKeywordUsage=bm.validSchemaType=bm.funcKeywordCode=bm.macroKeywordCode=void 0;const bl=Ar,Qw=mg,tUt=Tr,nUt=UP;function rUt(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=S6e(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:bl.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}bm.macroKeywordCode=rUt;function iUt(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;oUt(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=S6e(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&sbe(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&sbe(e),g(()=>sUt(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,bl._)`await `),b=>r.assign(f,!1).if((0,bl._)`${b} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,bl._)`${b}.errors`),()=>r.throw(b))),y}function p(){const y=(0,bl._)`${c}.errors`;return r.assign(y,null),m(bl.nil),y}function m(y=t.async?(0,bl._)`await `:bl.nil){const b=u.opts.passContext?Qw.default.this:Qw.default.self,w=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,bl._)`${y}${(0,tUt.callValidateCode)(e,c,b,w)}`,t.modifying)}function g(y){var b;r.if((0,bl.not)((b=t.valid)!==null&&b!==void 0?b:f),y)}}bm.funcKeywordCode=iUt;function sbe(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,bl._)`${r.parentData}[${r.parentDataProperty}]`))}function sUt(e,t){const{gen:n}=e;n.if((0,bl._)`Array.isArray(${t})`,()=>{n.assign(Qw.default.vErrors,(0,bl._)`${Qw.default.vErrors} === null ? ${t} : ${Qw.default.vErrors}.concat(${t})`).assign(Qw.default.errors,(0,bl._)`${Qw.default.vErrors}.length`),(0,nUt.extendErrors)(e)},()=>e.error())}function oUt({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function S6e(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,bl.stringify)(n)})}function aUt(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}bm.validSchemaType=aUt;function uUt({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}bm.validateKeywordUsage=uUt;var g1={};Object.defineProperty(g1,"__esModule",{value:!0});g1.extendSubschemaMode=g1.extendSubschemaData=g1.getSubschema=void 0;const pm=Ar,T6e=Gt;function lUt(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,pm._)`${e.schemaPath}${(0,pm.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,pm._)`${e.schemaPath}${(0,pm.getProperty)(t)}${(0,pm.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,T6e.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}g1.getSubschema=lUt;function cUt(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,pm._)`${t.data}${(0,pm.getProperty)(n)}`,!0);u(d),e.errorPath=(0,pm.str)`${l}${(0,T6e.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,pm._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof pm.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}g1.extendSubschemaData=cUt;function fUt(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}g1.extendSubschemaMode=fUt;var tu={},C6e={exports:{}},Hv=C6e.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};dF(t,r,i,e,"",e)};Hv.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Hv.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Hv.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Hv.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function dF(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in Hv.arrayKeywords)for(var d=0;d<f.length;d++)dF(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in Hv.propsKeywords){if(f&&typeof f=="object")for(var h in f)dF(e,t,n,f[h],i+"/"+c+"/"+dUt(h),s,i,c,r,h)}else(c in Hv.keywords||e.allKeys&&!(c in Hv.skipKeywords))&&dF(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function dUt(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var hUt=C6e.exports;Object.defineProperty(tu,"__esModule",{value:!0});tu.getSchemaRefs=tu.resolveUrl=tu.normalizeId=tu._getFullPath=tu.getFullPath=tu.inlineRef=void 0;const pUt=Gt,mUt=hte,gUt=hUt,yUt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function vUt(e,t=!0){return typeof e=="boolean"?!0:t===!0?!IK(e):t?A6e(e)<=t:!1}tu.inlineRef=vUt;const bUt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function IK(e){for(const t in e){if(bUt.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(IK)||typeof n=="object"&&IK(n))return!0}return!1}function A6e(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!yUt.has(n)&&(typeof e[n]=="object"&&(0,pUt.eachItem)(e[n],r=>t+=A6e(r)),t===1/0))return 1/0}return t}function D6e(e,t="",n){n!==!1&&(t=$T(t));const r=e.parse(t);return I6e(e,r)}tu.getFullPath=D6e;function I6e(e,t){return e.serialize(t).split("#")[0]+"#"}tu._getFullPath=I6e;const wUt=/#\/?$/;function $T(e){return e?e.replace(wUt,""):""}tu.normalizeId=$T;function _Ut(e,t,n){return n=$T(n),e.resolve(t,n)}tu.resolveUrl=_Ut;const EUt=/^[a-z_][-a-z0-9._]*$/i;function xUt(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=$T(e[n]||t),s={"":i},o=D6e(r,i,!1),a={},u=new Set;return gUt(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),b.call(this,f.$anchor),b.call(this,f.$dynamicAnchor),s[d]=g;function y(w){const S=this.opts.uriResolver.resolve;if(w=$T(g?S(g,w):w),u.has(w))throw c(w);u.add(w);let E=this.refs[w];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,w):w!==$T(m)&&(w[0]==="#"?(l(f,a[w],w),a[w]=f):this.refs[w]=m),w}function b(w){if(typeof w=="string"){if(!EUt.test(w))throw new Error(`invalid anchor "${w}"`);y.call(this,`#${w}`)}}}),a;function l(f,d,h){if(d!==void 0&&!mUt(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}tu.getSchemaRefs=xUt;Object.defineProperty(rp,"__esModule",{value:!0});rp.getData=rp.KeywordCxt=rp.validateFunctionCode=void 0;const k6e=zC,obe=ra,yie=M0,k4=ra,SUt=b9,Nk=bm,vH=g1,cn=Ar,Wn=mg,TUt=tu,$0=Gt,PD=UP;function CUt(e){if(P6e(e)&&(O6e(e),N6e(e))){IUt(e);return}R6e(e,()=>(0,k6e.topBoolOrEmptySchema)(e))}rp.validateFunctionCode=CUt;function R6e({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,cn._)`${Wn.default.data}, ${Wn.default.valCxt}`,r.$async,()=>{e.code((0,cn._)`"use strict"; ${abe(n,i)}`),DUt(e,i),e.code(s)}):e.func(t,(0,cn._)`${Wn.default.data}, ${AUt(i)}`,r.$async,()=>e.code(abe(n,i)).code(s))}function AUt(e){return(0,cn._)`{${Wn.default.instancePath}="", ${Wn.default.parentData}, ${Wn.default.parentDataProperty}, ${Wn.default.rootData}=${Wn.default.data}${e.dynamicRef?(0,cn._)`, ${Wn.default.dynamicAnchors}={}`:cn.nil}}={}`}function DUt(e,t){e.if(Wn.default.valCxt,()=>{e.var(Wn.default.instancePath,(0,cn._)`${Wn.default.valCxt}.${Wn.default.instancePath}`),e.var(Wn.default.parentData,(0,cn._)`${Wn.default.valCxt}.${Wn.default.parentData}`),e.var(Wn.default.parentDataProperty,(0,cn._)`${Wn.default.valCxt}.${Wn.default.parentDataProperty}`),e.var(Wn.default.rootData,(0,cn._)`${Wn.default.valCxt}.${Wn.default.rootData}`),t.dynamicRef&&e.var(Wn.default.dynamicAnchors,(0,cn._)`${Wn.default.valCxt}.${Wn.default.dynamicAnchors}`)},()=>{e.var(Wn.default.instancePath,(0,cn._)`""`),e.var(Wn.default.parentData,(0,cn._)`undefined`),e.var(Wn.default.parentDataProperty,(0,cn._)`undefined`),e.var(Wn.default.rootData,Wn.default.data),t.dynamicRef&&e.var(Wn.default.dynamicAnchors,(0,cn._)`{}`)})}function IUt(e){const{schema:t,opts:n,gen:r}=e;R6e(e,()=>{n.$comment&&t.$comment&&$6e(e),OUt(e),r.let(Wn.default.vErrors,null),r.let(Wn.default.errors,0),n.unevaluated&&kUt(e),M6e(e),FUt(e)})}function kUt(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,cn._)`${n}.evaluated`),t.if((0,cn._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,cn._)`${e.evaluated}.props`,(0,cn._)`undefined`)),t.if((0,cn._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,cn._)`${e.evaluated}.items`,(0,cn._)`undefined`))}function abe(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,cn._)`/*# sourceURL=${n} */`:cn.nil}function RUt(e,t){if(P6e(e)&&(O6e(e),N6e(e))){NUt(e,t);return}(0,k6e.boolOrEmptySchema)(e,t)}function N6e({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function P6e(e){return typeof e.schema!="boolean"}function NUt(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&$6e(e),MUt(e),$Ut(e);const s=r.const("_errs",Wn.default.errors);M6e(e,s),r.var(t,(0,cn._)`${s} === ${Wn.default.errors}`)}function O6e(e){(0,$0.checkUnknownRules)(e),PUt(e)}function M6e(e,t){if(e.opts.jtd)return ube(e,[],!1,t);const n=(0,obe.getSchemaTypes)(e.schema),r=(0,obe.coerceAndCheckDataType)(e,n);ube(e,n,!r,t)}function PUt(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,$0.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function OUt(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,$0.checkStrictMode)(e,"default is ignored in the schema root")}function MUt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,TUt.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function $Ut(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function $6e({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,cn._)`${Wn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,cn.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,cn._)`${Wn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function FUt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,cn._)`${Wn.default.errors} === 0`,()=>t.return(Wn.default.data),()=>t.throw((0,cn._)`new ${i}(${Wn.default.vErrors})`)):(t.assign((0,cn._)`${r}.errors`,Wn.default.vErrors),s.unevaluated&&LUt(e),t.return((0,cn._)`${Wn.default.errors} === 0`))}function LUt({gen:e,evaluated:t,props:n,items:r}){n instanceof cn.Name&&e.assign((0,cn._)`${t}.props`,n),r instanceof cn.Name&&e.assign((0,cn._)`${t}.items`,r)}function ube(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,$0.schemaHasRulesButRef)(s,c))){i.block(()=>B6e(e,"$ref",c.all.$ref.definition));return}u.jtd||BUt(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,yie.shouldUseGroup)(s,d)&&(d.type?(i.if((0,k4.checkDataType)(d.type,o,u.strictNumbers)),lbe(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,k4.reportTypeError)(e)),i.endIf()):lbe(e,d),a||i.if((0,cn._)`${Wn.default.errors} === ${r||0}`))}}function lbe(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,SUt.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,yie.shouldUseRule)(r,s)&&B6e(e,s.keyword,s.definition,t.type)})}function BUt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(jUt(e,t),e.opts.allowUnionTypes||UUt(e,t),zUt(e,e.dataTypes))}function jUt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{F6e(e.dataTypes,n)||vie(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),HUt(e,t)}}function UUt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&vie(e,"use allowUnionTypes to allow union type keyword")}function zUt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,yie.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>VUt(t,o))&&vie(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function VUt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function F6e(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function HUt(e,t){const n=[];for(const r of e.dataTypes)F6e(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function vie(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,$0.checkStrictMode)(e,t,e.opts.strictTypes)}class L6e{constructor(t,n,r){if((0,Nk.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,$0.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",j6e(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Nk.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",Wn.default.errors))}result(t,n,r){this.failResult((0,cn.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,cn.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,cn._)`${n} !== undefined && (${(0,cn.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?PD.reportExtraError:PD.reportError)(this,this.def.error,n)}$dataError(){(0,PD.reportError)(this,this.def.$dataError||PD.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,PD.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=cn.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=cn.nil,n=cn.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,cn.or)((0,cn._)`${i} === undefined`,n)),t!==cn.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==cn.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,cn.or)(o(),a());function o(){if(r.length){if(!(n instanceof cn.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,cn._)`${(0,k4.checkDataTypes)(u,n,s.opts.strictNumbers,k4.DataType.Wrong)}`}return cn.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,cn._)`!${u}(${n})`}return cn.nil}}subschema(t,n){const r=(0,vH.getSubschema)(this.it,t);(0,vH.extendSubschemaData)(r,this.it,t),(0,vH.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return RUt(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=$0.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=$0.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,cn.Name)),!0}}rp.KeywordCxt=L6e;function B6e(e,t,n,r){const i=new L6e(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,Nk.funcKeywordCode)(i,n):"macro"in n?(0,Nk.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,Nk.funcKeywordCode)(i,n)}const qUt=/^\/(?:[^~]|~0|~1)*$/,WUt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function j6e(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return Wn.default.rootData;if(e[0]==="/"){if(!qUt.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=Wn.default.rootData}else{const l=WUt.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,cn._)`${s}${(0,cn.getProperty)((0,$0.unescapeJsonPointer)(l))}`,o=(0,cn._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}rp.getData=j6e;var zP={};Object.defineProperty(zP,"__esModule",{value:!0});class GUt extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}zP.default=GUt;var fA={};Object.defineProperty(fA,"__esModule",{value:!0});const bH=tu;class YUt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,bH.resolveUrl)(t,n,r),this.missingSchema=(0,bH.normalizeId)((0,bH.getFullPath)(t,this.missingRef))}}fA.default=YUt;var gc={};Object.defineProperty(gc,"__esModule",{value:!0});gc.resolveSchema=gc.getCompilingSchema=gc.resolveRef=gc.compileSchema=gc.SchemaEnv=void 0;const yh=Ar,KUt=zP,gw=mg,jh=tu,cbe=Gt,XUt=rp;class w9{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,jh.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}gc.SchemaEnv=w9;function bie(e){const t=U6e.call(this,e);if(t)return t;const n=(0,jh.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new yh.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:KUt.default,code:(0,yh._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:gw.default.data,parentData:gw.default.parentData,parentDataProperty:gw.default.parentDataProperty,dataNames:[gw.default.data],dataPathArr:[yh.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,yh.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:yh.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,yh._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,XUt.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(gw.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${gw.default.self}`,`${gw.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof yh.Name?void 0:p,items:m instanceof yh.Name?void 0:m,dynamicProps:p instanceof yh.Name,dynamicItems:m instanceof yh.Name},h.source&&(h.source.evaluated=(0,yh.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}gc.compileSchema=bie;function QUt(e,t,n){var r;n=(0,jh.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=ezt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new w9({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=JUt.call(this,s)}gc.resolveRef=QUt;function JUt(e){return(0,jh.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:bie.call(this,e)}function U6e(e){for(const t of this._compilations)if(ZUt(t,e))return t}gc.getCompilingSchema=U6e;function ZUt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function ezt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||_9.call(this,e,t)}function _9(e,t){const n=this.opts.uriResolver.parse(t),r=(0,jh._getFullPath)(this.opts.uriResolver,n);let i=(0,jh.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return wH.call(this,n,e);const s=(0,jh.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=_9.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:wH.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||bie.call(this,o),s===(0,jh.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,jh.resolveUrl)(this.opts.uriResolver,i,l)),new w9({schema:a,schemaId:u,root:e,baseId:i})}return wH.call(this,n,o)}}gc.resolveSchema=_9;const tzt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function wH(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,cbe.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!tzt.has(a)&&l&&(t=(0,jh.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,cbe.schemaHasRulesButRef)(n,this.RULES)){const a=(0,jh.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=_9.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new w9({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const nzt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",rzt="Meta-schema for $data reference (JSON AnySchema extension proposal)",izt="object",szt=["$data"],ozt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},azt=!1,uzt={$id:nzt,description:rzt,type:izt,required:szt,properties:ozt,additionalProperties:azt};var wie={},kK={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(Hs,function(n){function r(){for(var ve=arguments.length,ce=Array(ve),xe=0;xe<ve;xe++)ce[xe]=arguments[xe];if(ce.length>1){ce[0]=ce[0].slice(0,-1);for(var Ve=ce.length-1,ze=1;ze<Ve;++ze)ce[ze]=ce[ze].slice(1,-1);return ce[Ve]=ce[Ve].slice(1),ce.join("")}else return ce[0]}function i(ve){return"(?:"+ve+")"}function s(ve){return ve===void 0?"undefined":ve===null?"null":Object.prototype.toString.call(ve).split(" ").pop().split("]").shift().toLowerCase()}function o(ve){return ve.toUpperCase()}function a(ve){return ve!=null?ve instanceof Array?ve:typeof ve.length!="number"||ve.split||ve.setInterval||ve.call?[ve]:Array.prototype.slice.call(ve):[]}function u(ve,ce){var xe=ve;if(ce)for(var Ve in ce)xe[Ve]=ce[Ve];return xe}function l(ve){var ce="[A-Za-z]",xe="[0-9]",Ve=r(xe,"[A-Fa-f]"),ze=i(i("%[EFef]"+Ve+"%"+Ve+Ve+"%"+Ve+Ve)+"|"+i("%[89A-Fa-f]"+Ve+"%"+Ve+Ve)+"|"+i("%"+Ve+Ve)),Dt="[\\:\\/\\?\\#\\[\\]\\@]",Wt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",bn=r(Dt,Wt),ir=ve?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",gr=ve?"[\\uE000-\\uF8FF]":"[]",Un=r(ce,xe,"[\\-\\.\\_\\~]",ir);i(ce+r(ce,xe,"[\\+\\-\\.]")+"*"),i(i(ze+"|"+r(Un,Wt,"[\\:]"))+"*");var Dr=i(i("25[0-5]")+"|"+i("2[0-4]"+xe)+"|"+i("1"+xe+xe)+"|"+i("0?[1-9]"+xe)+"|0?0?"+xe),ni=i(Dr+"\\."+Dr+"\\."+Dr+"\\."+Dr),dn=i(Ve+"{1,4}"),Ir=i(i(dn+"\\:"+dn)+"|"+ni),Xr=i(i(dn+"\\:")+"{6}"+Ir),sr=i("\\:\\:"+i(dn+"\\:")+"{5}"+Ir),ln=i(i(dn)+"?\\:\\:"+i(dn+"\\:")+"{4}"+Ir),Br=i(i(i(dn+"\\:")+"{0,1}"+dn)+"?\\:\\:"+i(dn+"\\:")+"{3}"+Ir),Di=i(i(i(dn+"\\:")+"{0,2}"+dn)+"?\\:\\:"+i(dn+"\\:")+"{2}"+Ir),xs=i(i(i(dn+"\\:")+"{0,3}"+dn)+"?\\:\\:"+dn+"\\:"+Ir),yi=i(i(i(dn+"\\:")+"{0,4}"+dn)+"?\\:\\:"+Ir),Qi=i(i(i(dn+"\\:")+"{0,5}"+dn)+"?\\:\\:"+dn),Yo=i(i(i(dn+"\\:")+"{0,6}"+dn)+"?\\:\\:"),Ha=i([Xr,sr,ln,Br,Di,xs,yi,Qi,Yo].join("|")),Po=i(i(Un+"|"+ze)+"+");i("[vV]"+Ve+"+\\."+r(Un,Wt,"[\\:]")+"+"),i(i(ze+"|"+r(Un,Wt))+"*");var Yl=i(ze+"|"+r(Un,Wt,"[\\:\\@]"));return i(i(ze+"|"+r(Un,Wt,"[\\@]"))+"+"),i(i(Yl+"|"+r("[\\/\\?]",gr))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ce,xe,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",Un,Wt),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",Un,Wt),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",Un,Wt),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",Un,Wt),"g"),NOT_QUERY:new RegExp(r("[^\\%]",Un,Wt,"[\\:\\@\\/\\?]",gr),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",Un,Wt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",Un,Wt),"g"),UNRESERVED:new RegExp(Un,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",Un,bn),"g"),PCT_ENCODED:new RegExp(ze,"g"),IPV4ADDRESS:new RegExp("^("+ni+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Ha+")"+i(i("\\%25|\\%(?!"+Ve+"{2})")+"("+Po+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function ve(ce,xe){var Ve=[],ze=!0,Dt=!1,Wt=void 0;try{for(var bn=ce[Symbol.iterator](),ir;!(ze=(ir=bn.next()).done)&&(Ve.push(ir.value),!(xe&&Ve.length===xe));ze=!0);}catch(gr){Dt=!0,Wt=gr}finally{try{!ze&&bn.return&&bn.return()}finally{if(Dt)throw Wt}}return Ve}return function(ce,xe){if(Array.isArray(ce))return ce;if(Symbol.iterator in Object(ce))return ve(ce,xe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(ve){if(Array.isArray(ve)){for(var ce=0,xe=Array(ve.length);ce<ve.length;ce++)xe[ce]=ve[ce];return xe}else return Array.from(ve)},p=2147483647,m=36,g=1,y=26,b=38,w=700,S=72,E=128,T="-",C=/^xn--/,A=/[^\0-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=m-g,F=Math.floor,M=String.fromCharCode;function L(ve){throw new RangeError(k[ve])}function j(ve,ce){for(var xe=[],Ve=ve.length;Ve--;)xe[Ve]=ce(ve[Ve]);return xe}function B(ve,ce){var xe=ve.split("@"),Ve="";xe.length>1&&(Ve=xe[0]+"@",ve=xe[1]),ve=ve.replace(I,".");var ze=ve.split("."),Dt=j(ze,ce).join(".");return Ve+Dt}function z(ve){for(var ce=[],xe=0,Ve=ve.length;xe<Ve;){var ze=ve.charCodeAt(xe++);if(ze>=55296&&ze<=56319&&xe<Ve){var Dt=ve.charCodeAt(xe++);(Dt&64512)==56320?ce.push(((ze&1023)<<10)+(Dt&1023)+65536):(ce.push(ze),xe--)}else ce.push(ze)}return ce}var V=function(ce){return String.fromCodePoint.apply(String,h(ce))},G=function(ce){return ce-48<10?ce-22:ce-65<26?ce-65:ce-97<26?ce-97:m},$=function(ce,xe){return ce+22+75*(ce<26)-((xe!=0)<<5)},W=function(ce,xe,Ve){var ze=0;for(ce=Ve?F(ce/w):ce>>1,ce+=F(ce/xe);ce>N*y>>1;ze+=m)ce=F(ce/N);return F(ze+(N+1)*ce/(ce+b))},K=function(ce){var xe=[],Ve=ce.length,ze=0,Dt=E,Wt=S,bn=ce.lastIndexOf(T);bn<0&&(bn=0);for(var ir=0;ir<bn;++ir)ce.charCodeAt(ir)>=128&&L("not-basic"),xe.push(ce.charCodeAt(ir));for(var gr=bn>0?bn+1:0;gr<Ve;){for(var Un=ze,Dr=1,ni=m;;ni+=m){gr>=Ve&&L("invalid-input");var dn=G(ce.charCodeAt(gr++));(dn>=m||dn>F((p-ze)/Dr))&&L("overflow"),ze+=dn*Dr;var Ir=ni<=Wt?g:ni>=Wt+y?y:ni-Wt;if(dn<Ir)break;var Xr=m-Ir;Dr>F(p/Xr)&&L("overflow"),Dr*=Xr}var sr=xe.length+1;Wt=W(ze-Un,sr,Un==0),F(ze/sr)>p-Dt&&L("overflow"),Dt+=F(ze/sr),ze%=sr,xe.splice(ze++,0,Dt)}return String.fromCodePoint.apply(String,xe)},q=function(ce){var xe=[];ce=z(ce);var Ve=ce.length,ze=E,Dt=0,Wt=S,bn=!0,ir=!1,gr=void 0;try{for(var Un=ce[Symbol.iterator](),Dr;!(bn=(Dr=Un.next()).done);bn=!0){var ni=Dr.value;ni<128&&xe.push(M(ni))}}catch(Je){ir=!0,gr=Je}finally{try{!bn&&Un.return&&Un.return()}finally{if(ir)throw gr}}var dn=xe.length,Ir=dn;for(dn&&xe.push(T);Ir<Ve;){var Xr=p,sr=!0,ln=!1,Br=void 0;try{for(var Di=ce[Symbol.iterator](),xs;!(sr=(xs=Di.next()).done);sr=!0){var yi=xs.value;yi>=ze&&yi<Xr&&(Xr=yi)}}catch(Je){ln=!0,Br=Je}finally{try{!sr&&Di.return&&Di.return()}finally{if(ln)throw Br}}var Qi=Ir+1;Xr-ze>F((p-Dt)/Qi)&&L("overflow"),Dt+=(Xr-ze)*Qi,ze=Xr;var Yo=!0,Ha=!1,Po=void 0;try{for(var Yl=ce[Symbol.iterator](),Yf;!(Yo=(Yf=Yl.next()).done);Yo=!0){var te=Yf.value;if(te<ze&&++Dt>p&&L("overflow"),te==ze){for(var ye=Dt,ue=m;;ue+=m){var Ie=ue<=Wt?g:ue>=Wt+y?y:ue-Wt;if(ye<Ie)break;var Oe=ye-Ie,De=m-Ie;xe.push(M($(Ie+Oe%De,0))),ye=F(Oe/De)}xe.push(M($(ye,0))),Wt=W(Dt,Qi,Ir==dn),Dt=0,++Ir}}}catch(Je){Ha=!0,Po=Je}finally{try{!Yo&&Yl.return&&Yl.return()}finally{if(Ha)throw Po}}++Dt,++ze}return xe.join("")},Y=function(ce){return B(ce,function(xe){return C.test(xe)?K(xe.slice(4).toLowerCase()):xe})},Z=function(ce){return B(ce,function(xe){return A.test(xe)?"xn--"+q(xe):xe})},ae={version:"2.1.0",ucs2:{decode:z,encode:V},decode:K,encode:q,toASCII:Z,toUnicode:Y},be={};function Se(ve){var ce=ve.charCodeAt(0),xe=void 0;return ce<16?xe="%0"+ce.toString(16).toUpperCase():ce<128?xe="%"+ce.toString(16).toUpperCase():ce<2048?xe="%"+(ce>>6|192).toString(16).toUpperCase()+"%"+(ce&63|128).toString(16).toUpperCase():xe="%"+(ce>>12|224).toString(16).toUpperCase()+"%"+(ce>>6&63|128).toString(16).toUpperCase()+"%"+(ce&63|128).toString(16).toUpperCase(),xe}function we(ve){for(var ce="",xe=0,Ve=ve.length;xe<Ve;){var ze=parseInt(ve.substr(xe+1,2),16);if(ze<128)ce+=String.fromCharCode(ze),xe+=3;else if(ze>=194&&ze<224){if(Ve-xe>=6){var Dt=parseInt(ve.substr(xe+4,2),16);ce+=String.fromCharCode((ze&31)<<6|Dt&63)}else ce+=ve.substr(xe,6);xe+=6}else if(ze>=224){if(Ve-xe>=9){var Wt=parseInt(ve.substr(xe+4,2),16),bn=parseInt(ve.substr(xe+7,2),16);ce+=String.fromCharCode((ze&15)<<12|(Wt&63)<<6|bn&63)}else ce+=ve.substr(xe,9);xe+=9}else ce+=ve.substr(xe,3),xe+=3}return ce}function Ce(ve,ce){function xe(Ve){var ze=we(Ve);return ze.match(ce.UNRESERVED)?ze:Ve}return ve.scheme&&(ve.scheme=String(ve.scheme).replace(ce.PCT_ENCODED,xe).toLowerCase().replace(ce.NOT_SCHEME,"")),ve.userinfo!==void 0&&(ve.userinfo=String(ve.userinfo).replace(ce.PCT_ENCODED,xe).replace(ce.NOT_USERINFO,Se).replace(ce.PCT_ENCODED,o)),ve.host!==void 0&&(ve.host=String(ve.host).replace(ce.PCT_ENCODED,xe).toLowerCase().replace(ce.NOT_HOST,Se).replace(ce.PCT_ENCODED,o)),ve.path!==void 0&&(ve.path=String(ve.path).replace(ce.PCT_ENCODED,xe).replace(ve.scheme?ce.NOT_PATH:ce.NOT_PATH_NOSCHEME,Se).replace(ce.PCT_ENCODED,o)),ve.query!==void 0&&(ve.query=String(ve.query).replace(ce.PCT_ENCODED,xe).replace(ce.NOT_QUERY,Se).replace(ce.PCT_ENCODED,o)),ve.fragment!==void 0&&(ve.fragment=String(ve.fragment).replace(ce.PCT_ENCODED,xe).replace(ce.NOT_FRAGMENT,Se).replace(ce.PCT_ENCODED,o)),ve}function Le(ve){return ve.replace(/^0*(.*)/,"$1")||"0"}function ke(ve,ce){var xe=ve.match(ce.IPV4ADDRESS)||[],Ve=d(xe,2),ze=Ve[1];return ze?ze.split(".").map(Le).join("."):ve}function Ze(ve,ce){var xe=ve.match(ce.IPV6ADDRESS)||[],Ve=d(xe,3),ze=Ve[1],Dt=Ve[2];if(ze){for(var Wt=ze.toLowerCase().split("::").reverse(),bn=d(Wt,2),ir=bn[0],gr=bn[1],Un=gr?gr.split(":").map(Le):[],Dr=ir.split(":").map(Le),ni=ce.IPV4ADDRESS.test(Dr[Dr.length-1]),dn=ni?7:8,Ir=Dr.length-dn,Xr=Array(dn),sr=0;sr<dn;++sr)Xr[sr]=Un[sr]||Dr[Ir+sr]||"";ni&&(Xr[dn-1]=ke(Xr[dn-1],ce));var ln=Xr.reduce(function(Qi,Yo,Ha){if(!Yo||Yo==="0"){var Po=Qi[Qi.length-1];Po&&Po.index+Po.length===Ha?Po.length++:Qi.push({index:Ha,length:1})}return Qi},[]),Br=ln.sort(function(Qi,Yo){return Yo.length-Qi.length})[0],Di=void 0;if(Br&&Br.length>1){var xs=Xr.slice(0,Br.index),yi=Xr.slice(Br.index+Br.length);Di=xs.join(":")+"::"+yi.join(":")}else Di=Xr.join(":");return Dt&&(Di+="%"+Dt),Di}else return ve}var Ke=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ct="".match(/(){0}/)[1]===void 0;function wt(ve){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xe={},Ve=ce.iri!==!1?f:c;ce.reference==="suffix"&&(ve=(ce.scheme?ce.scheme+":":"")+"//"+ve);var ze=ve.match(Ke);if(ze){Ct?(xe.scheme=ze[1],xe.userinfo=ze[3],xe.host=ze[4],xe.port=parseInt(ze[5],10),xe.path=ze[6]||"",xe.query=ze[7],xe.fragment=ze[8],isNaN(xe.port)&&(xe.port=ze[5])):(xe.scheme=ze[1]||void 0,xe.userinfo=ve.indexOf("@")!==-1?ze[3]:void 0,xe.host=ve.indexOf("//")!==-1?ze[4]:void 0,xe.port=parseInt(ze[5],10),xe.path=ze[6]||"",xe.query=ve.indexOf("?")!==-1?ze[7]:void 0,xe.fragment=ve.indexOf("#")!==-1?ze[8]:void 0,isNaN(xe.port)&&(xe.port=ve.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?ze[4]:void 0)),xe.host&&(xe.host=Ze(ke(xe.host,Ve),Ve)),xe.scheme===void 0&&xe.userinfo===void 0&&xe.host===void 0&&xe.port===void 0&&!xe.path&&xe.query===void 0?xe.reference="same-document":xe.scheme===void 0?xe.reference="relative":xe.fragment===void 0?xe.reference="absolute":xe.reference="uri",ce.reference&&ce.reference!=="suffix"&&ce.reference!==xe.reference&&(xe.error=xe.error||"URI is not a "+ce.reference+" reference.");var Dt=be[(ce.scheme||xe.scheme||"").toLowerCase()];if(!ce.unicodeSupport&&(!Dt||!Dt.unicodeSupport)){if(xe.host&&(ce.domainHost||Dt&&Dt.domainHost))try{xe.host=ae.toASCII(xe.host.replace(Ve.PCT_ENCODED,we).toLowerCase())}catch(Wt){xe.error=xe.error||"Host's domain name can not be converted to ASCII via punycode: "+Wt}Ce(xe,c)}else Ce(xe,Ve);Dt&&Dt.parse&&Dt.parse(xe,ce)}else xe.error=xe.error||"URI can not be parsed.";return xe}function Re(ve,ce){var xe=ce.iri!==!1?f:c,Ve=[];return ve.userinfo!==void 0&&(Ve.push(ve.userinfo),Ve.push("@")),ve.host!==void 0&&Ve.push(Ze(ke(String(ve.host),xe),xe).replace(xe.IPV6ADDRESS,function(ze,Dt,Wt){return"["+Dt+(Wt?"%25"+Wt:"")+"]"})),(typeof ve.port=="number"||typeof ve.port=="string")&&(Ve.push(":"),Ve.push(String(ve.port))),Ve.length?Ve.join(""):void 0}var He=/^\.\.?\//,lt=/^\/\.(\/|$)/,St=/^\/\.\.(\/|$)/,Vt=/^\/?(?:.|\n)*?(?=\/|$)/;function ht(ve){for(var ce=[];ve.length;)if(ve.match(He))ve=ve.replace(He,"");else if(ve.match(lt))ve=ve.replace(lt,"/");else if(ve.match(St))ve=ve.replace(St,"/"),ce.pop();else if(ve==="."||ve==="..")ve="";else{var xe=ve.match(Vt);if(xe){var Ve=xe[0];ve=ve.slice(Ve.length),ce.push(Ve)}else throw new Error("Unexpected dot segment condition")}return ce.join("")}function Q(ve){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xe=ce.iri?f:c,Ve=[],ze=be[(ce.scheme||ve.scheme||"").toLowerCase()];if(ze&&ze.serialize&&ze.serialize(ve,ce),ve.host&&!xe.IPV6ADDRESS.test(ve.host)){if(ce.domainHost||ze&&ze.domainHost)try{ve.host=ce.iri?ae.toUnicode(ve.host):ae.toASCII(ve.host.replace(xe.PCT_ENCODED,we).toLowerCase())}catch(bn){ve.error=ve.error||"Host's domain name can not be converted to "+(ce.iri?"Unicode":"ASCII")+" via punycode: "+bn}}Ce(ve,xe),ce.reference!=="suffix"&&ve.scheme&&(Ve.push(ve.scheme),Ve.push(":"));var Dt=Re(ve,ce);if(Dt!==void 0&&(ce.reference!=="suffix"&&Ve.push("//"),Ve.push(Dt),ve.path&&ve.path.charAt(0)!=="/"&&Ve.push("/")),ve.path!==void 0){var Wt=ve.path;!ce.absolutePath&&(!ze||!ze.absolutePath)&&(Wt=ht(Wt)),Dt===void 0&&(Wt=Wt.replace(/^\/\//,"/%2F")),Ve.push(Wt)}return ve.query!==void 0&&(Ve.push("?"),Ve.push(ve.query)),ve.fragment!==void 0&&(Ve.push("#"),Ve.push(ve.fragment)),Ve.join("")}function de(ve,ce){var xe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ve=arguments[3],ze={};return Ve||(ve=wt(Q(ve,xe),xe),ce=wt(Q(ce,xe),xe)),xe=xe||{},!xe.tolerant&&ce.scheme?(ze.scheme=ce.scheme,ze.userinfo=ce.userinfo,ze.host=ce.host,ze.port=ce.port,ze.path=ht(ce.path||""),ze.query=ce.query):(ce.userinfo!==void 0||ce.host!==void 0||ce.port!==void 0?(ze.userinfo=ce.userinfo,ze.host=ce.host,ze.port=ce.port,ze.path=ht(ce.path||""),ze.query=ce.query):(ce.path?(ce.path.charAt(0)==="/"?ze.path=ht(ce.path):((ve.userinfo!==void 0||ve.host!==void 0||ve.port!==void 0)&&!ve.path?ze.path="/"+ce.path:ve.path?ze.path=ve.path.slice(0,ve.path.lastIndexOf("/")+1)+ce.path:ze.path=ce.path,ze.path=ht(ze.path)),ze.query=ce.query):(ze.path=ve.path,ce.query!==void 0?ze.query=ce.query:ze.query=ve.query),ze.userinfo=ve.userinfo,ze.host=ve.host,ze.port=ve.port),ze.scheme=ve.scheme),ze.fragment=ce.fragment,ze}function _e(ve,ce,xe){var Ve=u({scheme:"null"},xe);return Q(de(wt(ve,Ve),wt(ce,Ve),Ve,!0),Ve)}function oe(ve,ce){return typeof ve=="string"?ve=Q(wt(ve,ce),ce):s(ve)==="object"&&(ve=wt(Q(ve,ce),ce)),ve}function he(ve,ce,xe){return typeof ve=="string"?ve=Q(wt(ve,xe),xe):s(ve)==="object"&&(ve=Q(ve,xe)),typeof ce=="string"?ce=Q(wt(ce,xe),xe):s(ce)==="object"&&(ce=Q(ce,xe)),ve===ce}function Ee(ve,ce){return ve&&ve.toString().replace(!ce||!ce.iri?c.ESCAPE:f.ESCAPE,Se)}function Fe(ve,ce){return ve&&ve.toString().replace(!ce||!ce.iri?c.PCT_ENCODED:f.PCT_ENCODED,we)}var je={scheme:"http",domainHost:!0,parse:function(ce,xe){return ce.host||(ce.error=ce.error||"HTTP URIs must have a host."),ce},serialize:function(ce,xe){var Ve=String(ce.scheme).toLowerCase()==="https";return(ce.port===(Ve?443:80)||ce.port==="")&&(ce.port=void 0),ce.path||(ce.path="/"),ce}},ct={scheme:"https",domainHost:je.domainHost,parse:je.parse,serialize:je.serialize};function rt(ve){return typeof ve.secure=="boolean"?ve.secure:String(ve.scheme).toLowerCase()==="wss"}var qt={scheme:"ws",domainHost:!0,parse:function(ce,xe){var Ve=ce;return Ve.secure=rt(Ve),Ve.resourceName=(Ve.path||"/")+(Ve.query?"?"+Ve.query:""),Ve.path=void 0,Ve.query=void 0,Ve},serialize:function(ce,xe){if((ce.port===(rt(ce)?443:80)||ce.port==="")&&(ce.port=void 0),typeof ce.secure=="boolean"&&(ce.scheme=ce.secure?"wss":"ws",ce.secure=void 0),ce.resourceName){var Ve=ce.resourceName.split("?"),ze=d(Ve,2),Dt=ze[0],Wt=ze[1];ce.path=Dt&&Dt!=="/"?Dt:void 0,ce.query=Wt,ce.resourceName=void 0}return ce.fragment=void 0,ce}},en={scheme:"wss",domainHost:qt.domainHost,parse:qt.parse,serialize:qt.serialize},Yt={},un="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Sn="[0-9A-Fa-f]",Bn=i(i("%[EFef]"+Sn+"%"+Sn+Sn+"%"+Sn+Sn)+"|"+i("%[89A-Fa-f]"+Sn+"%"+Sn+Sn)+"|"+i("%"+Sn+Sn)),Ci="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",gi="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",jn=r(gi,'[\\"\\\\]'),Ki="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",ti=new RegExp(un,"g"),Es=new RegExp(Bn,"g"),Jc=new RegExp(r("[^]",Ci,"[\\.]",'[\\"]',jn),"g"),Va=new RegExp(r("[^]",un,Ki),"g"),sl=Va;function Kr(ve){var ce=we(ve);return ce.match(ti)?ce:ve}var Xi={scheme:"mailto",parse:function(ce,xe){var Ve=ce,ze=Ve.to=Ve.path?Ve.path.split(","):[];if(Ve.path=void 0,Ve.query){for(var Dt=!1,Wt={},bn=Ve.query.split("&"),ir=0,gr=bn.length;ir<gr;++ir){var Un=bn[ir].split("=");switch(Un[0]){case"to":for(var Dr=Un[1].split(","),ni=0,dn=Dr.length;ni<dn;++ni)ze.push(Dr[ni]);break;case"subject":Ve.subject=Fe(Un[1],xe);break;case"body":Ve.body=Fe(Un[1],xe);break;default:Dt=!0,Wt[Fe(Un[0],xe)]=Fe(Un[1],xe);break}}Dt&&(Ve.headers=Wt)}Ve.query=void 0;for(var Ir=0,Xr=ze.length;Ir<Xr;++Ir){var sr=ze[Ir].split("@");if(sr[0]=Fe(sr[0]),xe.unicodeSupport)sr[1]=Fe(sr[1],xe).toLowerCase();else try{sr[1]=ae.toASCII(Fe(sr[1],xe).toLowerCase())}catch(ln){Ve.error=Ve.error||"Email address's domain name can not be converted to ASCII via punycode: "+ln}ze[Ir]=sr.join("@")}return Ve},serialize:function(ce,xe){var Ve=ce,ze=a(ce.to);if(ze){for(var Dt=0,Wt=ze.length;Dt<Wt;++Dt){var bn=String(ze[Dt]),ir=bn.lastIndexOf("@"),gr=bn.slice(0,ir).replace(Es,Kr).replace(Es,o).replace(Jc,Se),Un=bn.slice(ir+1);try{Un=xe.iri?ae.toUnicode(Un):ae.toASCII(Fe(Un,xe).toLowerCase())}catch(Ir){Ve.error=Ve.error||"Email address's domain name can not be converted to "+(xe.iri?"Unicode":"ASCII")+" via punycode: "+Ir}ze[Dt]=gr+"@"+Un}Ve.path=ze.join(",")}var Dr=ce.headers=ce.headers||{};ce.subject&&(Dr.subject=ce.subject),ce.body&&(Dr.body=ce.body);var ni=[];for(var dn in Dr)Dr[dn]!==Yt[dn]&&ni.push(dn.replace(Es,Kr).replace(Es,o).replace(Va,Se)+"="+Dr[dn].replace(Es,Kr).replace(Es,o).replace(sl,Se));return ni.length&&(Ve.query=ni.join("&")),Ve}},Ai=/^([^\:]+)\:(.*)/,No={scheme:"urn",parse:function(ce,xe){var Ve=ce.path&&ce.path.match(Ai),ze=ce;if(Ve){var Dt=xe.scheme||ze.scheme||"urn",Wt=Ve[1].toLowerCase(),bn=Ve[2],ir=Dt+":"+(xe.nid||Wt),gr=be[ir];ze.nid=Wt,ze.nss=bn,ze.path=void 0,gr&&(ze=gr.parse(ze,xe))}else ze.error=ze.error||"URN can not be parsed.";return ze},serialize:function(ce,xe){var Ve=xe.scheme||ce.scheme||"urn",ze=ce.nid,Dt=Ve+":"+(xe.nid||ze),Wt=be[Dt];Wt&&(ce=Wt.serialize(ce,xe));var bn=ce,ir=ce.nss;return bn.path=(ze||xe.nid)+":"+ir,bn}},Go=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,po={scheme:"urn:uuid",parse:function(ce,xe){var Ve=ce;return Ve.uuid=Ve.nss,Ve.nss=void 0,!xe.tolerant&&(!Ve.uuid||!Ve.uuid.match(Go))&&(Ve.error=Ve.error||"UUID is not valid."),Ve},serialize:function(ce,xe){var Ve=ce;return Ve.nss=(ce.uuid||"").toLowerCase(),Ve}};be[je.scheme]=je,be[ct.scheme]=ct,be[qt.scheme]=qt,be[en.scheme]=en,be[Xi.scheme]=Xi,be[No.scheme]=No,be[po.scheme]=po,n.SCHEMES=be,n.pctEncChar=Se,n.pctDecChars=we,n.parse=wt,n.removeDotSegments=ht,n.serialize=Q,n.resolveComponents=de,n.resolve=_e,n.normalize=oe,n.equal=he,n.escapeComponent=Ee,n.unescapeComponent=Fe,Object.defineProperty(n,"__esModule",{value:!0})})})(kK,kK.exports);var lzt=kK.exports;Object.defineProperty(wie,"__esModule",{value:!0});const z6e=lzt;z6e.code='require("ajv/dist/runtime/uri").default';wie.default=z6e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=rp;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Ar;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=zP,i=fA,s=oE,o=gc,a=Ar,u=tu,l=ra,c=Gt,f=uzt,d=wie,h=($,W)=>new RegExp($,W);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},b=200;function w($){var W,K,q,Y,Z,ae,be,Se,we,Ce,Le,ke,Ze,Ke,Ct,wt,Re,He,lt,St,Vt,ht,Q,de,_e;const oe=$.strict,he=(W=$.code)===null||W===void 0?void 0:W.optimize,Ee=he===!0||he===void 0?1:he||0,Fe=(q=(K=$.code)===null||K===void 0?void 0:K.regExp)!==null&&q!==void 0?q:h,je=(Y=$.uriResolver)!==null&&Y!==void 0?Y:d.default;return{strictSchema:(ae=(Z=$.strictSchema)!==null&&Z!==void 0?Z:oe)!==null&&ae!==void 0?ae:!0,strictNumbers:(Se=(be=$.strictNumbers)!==null&&be!==void 0?be:oe)!==null&&Se!==void 0?Se:!0,strictTypes:(Ce=(we=$.strictTypes)!==null&&we!==void 0?we:oe)!==null&&Ce!==void 0?Ce:"log",strictTuples:(ke=(Le=$.strictTuples)!==null&&Le!==void 0?Le:oe)!==null&&ke!==void 0?ke:"log",strictRequired:(Ke=(Ze=$.strictRequired)!==null&&Ze!==void 0?Ze:oe)!==null&&Ke!==void 0?Ke:!1,code:$.code?{...$.code,optimize:Ee,regExp:Fe}:{optimize:Ee,regExp:Fe},loopRequired:(Ct=$.loopRequired)!==null&&Ct!==void 0?Ct:b,loopEnum:(wt=$.loopEnum)!==null&&wt!==void 0?wt:b,meta:(Re=$.meta)!==null&&Re!==void 0?Re:!0,messages:(He=$.messages)!==null&&He!==void 0?He:!0,inlineRefs:(lt=$.inlineRefs)!==null&&lt!==void 0?lt:!0,schemaId:(St=$.schemaId)!==null&&St!==void 0?St:"$id",addUsedSchema:(Vt=$.addUsedSchema)!==null&&Vt!==void 0?Vt:!0,validateSchema:(ht=$.validateSchema)!==null&&ht!==void 0?ht:!0,validateFormats:(Q=$.validateFormats)!==null&&Q!==void 0?Q:!0,unicodeRegExp:(de=$.unicodeRegExp)!==null&&de!==void 0?de:!0,int32range:(_e=$.int32range)!==null&&_e!==void 0?_e:!0,uriResolver:je}}class S{constructor(W={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,W=this.opts={...W,...w(W)};const{es5:K,lines:q}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:K,lines:q}),this.logger=F(W.logger);const Y=W.validateFormats;W.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,W,"NOT SUPPORTED"),E.call(this,y,W,"DEPRECATED","warn"),this._metaOpts=k.call(this),W.formats&&A.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),W.keywords&&I.call(this,W.keywords),typeof W.meta=="object"&&this.addMetaSchema(W.meta),C.call(this),W.validateFormats=Y}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:W,meta:K,schemaId:q}=this.opts;let Y=f;q==="id"&&(Y={...f},Y.id=Y.$id,delete Y.$id),K&&W&&this.addMetaSchema(Y,Y[q],!1)}defaultMeta(){const{meta:W,schemaId:K}=this.opts;return this.opts.defaultMeta=typeof W=="object"?W[K]||W:void 0}validate(W,K){let q;if(typeof W=="string"){if(q=this.getSchema(W),!q)throw new Error(`no schema with key or ref "${W}"`)}else q=this.compile(W);const Y=q(K);return"$async"in q||(this.errors=q.errors),Y}compile(W,K){const q=this._addSchema(W,K);return q.validate||this._compileSchemaEnv(q)}compileAsync(W,K){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:q}=this.opts;return Y.call(this,W,K);async function Y(Ce,Le){await Z.call(this,Ce.$schema);const ke=this._addSchema(Ce,Le);return ke.validate||ae.call(this,ke)}async function Z(Ce){Ce&&!this.getSchema(Ce)&&await Y.call(this,{$ref:Ce},!0)}async function ae(Ce){try{return this._compileSchemaEnv(Ce)}catch(Le){if(!(Le instanceof i.default))throw Le;return be.call(this,Le),await Se.call(this,Le.missingSchema),ae.call(this,Ce)}}function be({missingSchema:Ce,missingRef:Le}){if(this.refs[Ce])throw new Error(`AnySchema ${Ce} is loaded but ${Le} cannot be resolved`)}async function Se(Ce){const Le=await we.call(this,Ce);this.refs[Ce]||await Z.call(this,Le.$schema),this.refs[Ce]||this.addSchema(Le,Ce,K)}async function we(Ce){const Le=this._loading[Ce];if(Le)return Le;try{return await(this._loading[Ce]=q(Ce))}finally{delete this._loading[Ce]}}}addSchema(W,K,q,Y=this.opts.validateSchema){if(Array.isArray(W)){for(const ae of W)this.addSchema(ae,void 0,q,Y);return this}let Z;if(typeof W=="object"){const{schemaId:ae}=this.opts;if(Z=W[ae],Z!==void 0&&typeof Z!="string")throw new Error(`schema ${ae} must be string`)}return K=(0,u.normalizeId)(K||Z),this._checkUnique(K),this.schemas[K]=this._addSchema(W,q,K,Y,!0),this}addMetaSchema(W,K,q=this.opts.validateSchema){return this.addSchema(W,K,!0,q),this}validateSchema(W,K){if(typeof W=="boolean")return!0;let q;if(q=W.$schema,q!==void 0&&typeof q!="string")throw new Error("$schema must be a string");if(q=q||this.opts.defaultMeta||this.defaultMeta(),!q)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const Y=this.validate(q,W);if(!Y&&K){const Z="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(Z);else throw new Error(Z)}return Y}getSchema(W){let K;for(;typeof(K=T.call(this,W))=="string";)W=K;if(K===void 0){const{schemaId:q}=this.opts,Y=new o.SchemaEnv({schema:{},schemaId:q});if(K=o.resolveSchema.call(this,Y,W),!K)return;this.refs[W]=K}return K.validate||this._compileSchemaEnv(K)}removeSchema(W){if(W instanceof RegExp)return this._removeAllSchemas(this.schemas,W),this._removeAllSchemas(this.refs,W),this;switch(typeof W){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const K=T.call(this,W);return typeof K=="object"&&this._cache.delete(K.schema),delete this.schemas[W],delete this.refs[W],this}case"object":{const K=W;this._cache.delete(K);let q=W[this.opts.schemaId];return q&&(q=(0,u.normalizeId)(q),delete this.schemas[q],delete this.refs[q]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(W){for(const K of W)this.addKeyword(K);return this}addKeyword(W,K){let q;if(typeof W=="string")q=W,typeof K=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),K.keyword=q);else if(typeof W=="object"&&K===void 0){if(K=W,q=K.keyword,Array.isArray(q)&&!q.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(L.call(this,q,K),!K)return(0,c.eachItem)(q,Z=>j.call(this,Z)),this;z.call(this,K);const Y={...K,type:(0,l.getJSONTypes)(K.type),schemaType:(0,l.getJSONTypes)(K.schemaType)};return(0,c.eachItem)(q,Y.type.length===0?Z=>j.call(this,Z,Y):Z=>Y.type.forEach(ae=>j.call(this,Z,Y,ae))),this}getKeyword(W){const K=this.RULES.all[W];return typeof K=="object"?K.definition:!!K}removeKeyword(W){const{RULES:K}=this;delete K.keywords[W],delete K.all[W];for(const q of K.rules){const Y=q.rules.findIndex(Z=>Z.keyword===W);Y>=0&&q.rules.splice(Y,1)}return this}addFormat(W,K){return typeof K=="string"&&(K=new RegExp(K)),this.formats[W]=K,this}errorsText(W=this.errors,{separator:K=", ",dataVar:q="data"}={}){return!W||W.length===0?"No errors":W.map(Y=>`${q}${Y.instancePath} ${Y.message}`).reduce((Y,Z)=>Y+K+Z)}$dataMetaSchema(W,K){const q=this.RULES.all;W=JSON.parse(JSON.stringify(W));for(const Y of K){const Z=Y.split("/").slice(1);let ae=W;for(const be of Z)ae=ae[be];for(const be in q){const Se=q[be];if(typeof Se!="object")continue;const{$data:we}=Se.definition,Ce=ae[be];we&&Ce&&(ae[be]=G(Ce))}}return W}_removeAllSchemas(W,K){for(const q in W){const Y=W[q];(!K||K.test(q))&&(typeof Y=="string"?delete W[q]:Y&&!Y.meta&&(this._cache.delete(Y.schema),delete W[q]))}}_addSchema(W,K,q,Y=this.opts.validateSchema,Z=this.opts.addUsedSchema){let ae;const{schemaId:be}=this.opts;if(typeof W=="object")ae=W[be];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof W!="boolean")throw new Error("schema must be object or boolean")}let Se=this._cache.get(W);if(Se!==void 0)return Se;q=(0,u.normalizeId)(ae||q);const we=u.getSchemaRefs.call(this,W,q);return Se=new o.SchemaEnv({schema:W,schemaId:be,meta:K,baseId:q,localRefs:we}),this._cache.set(Se.schema,Se),Z&&!q.startsWith("#")&&(q&&this._checkUnique(q),this.refs[q]=Se),Y&&this.validateSchema(W,!0),Se}_checkUnique(W){if(this.schemas[W]||this.refs[W])throw new Error(`schema with key or id "${W}" already exists`)}_compileSchemaEnv(W){if(W.meta?this._compileMetaSchema(W):o.compileSchema.call(this,W),!W.validate)throw new Error("ajv implementation error");return W.validate}_compileMetaSchema(W){const K=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,W)}finally{this.opts=K}}}S.ValidationError=r.default,S.MissingRefError=i.default,e.default=S;function E($,W,K,q="error"){for(const Y in $){const Z=Y;Z in W&&this.logger[q](`${K}: option ${Y}. ${$[Z]}`)}}function T($){return $=(0,u.normalizeId)($),this.schemas[$]||this.refs[$]}function C(){const $=this.opts.schemas;if($)if(Array.isArray($))this.addSchema($);else for(const W in $)this.addSchema($[W],W)}function A(){for(const $ in this.opts.formats){const W=this.opts.formats[$];W&&this.addFormat($,W)}}function I($){if(Array.isArray($)){this.addVocabulary($);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const W in $){const K=$[W];K.keyword||(K.keyword=W),this.addKeyword(K)}}function k(){const $={...this.opts};for(const W of p)delete $[W];return $}const N={log(){},warn(){},error(){}};function F($){if($===!1)return N;if($===void 0)return console;if($.log&&$.warn&&$.error)return $;throw new Error("logger must implement log, warn and error methods")}const M=/^[a-z_$][a-z0-9_$:-]*$/i;function L($,W){const{RULES:K}=this;if((0,c.eachItem)($,q=>{if(K.keywords[q])throw new Error(`Keyword ${q} is already defined`);if(!M.test(q))throw new Error(`Keyword ${q} has invalid name`)}),!!W&&W.$data&&!("code"in W||"validate"in W))throw new Error('$data keyword must have "code" or "validate" function')}function j($,W,K){var q;const Y=W==null?void 0:W.post;if(K&&Y)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:Z}=this;let ae=Y?Z.post:Z.rules.find(({type:Se})=>Se===K);if(ae||(ae={type:K,rules:[]},Z.rules.push(ae)),Z.keywords[$]=!0,!W)return;const be={keyword:$,definition:{...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)}};W.before?B.call(this,ae,be,W.before):ae.rules.push(be),Z.all[$]=be,(q=W.implements)===null||q===void 0||q.forEach(Se=>this.addKeyword(Se))}function B($,W,K){const q=$.rules.findIndex(Y=>Y.keyword===K);q>=0?$.rules.splice(q,0,W):($.rules.push(W),this.logger.warn(`rule ${K} is not defined`))}function z($){let{metaSchema:W}=$;W!==void 0&&($.$data&&this.opts.$data&&(W=G(W)),$.validateSchema=this.compile(W,!0))}const V={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function G($){return{anyOf:[$,V]}}})(c6e);var _ie={},Eie={},xie={};Object.defineProperty(xie,"__esModule",{value:!0});const czt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};xie.default=czt;var aE={};Object.defineProperty(aE,"__esModule",{value:!0});aE.callRef=aE.getValidate=void 0;const fzt=fA,fbe=Tr,sc=Ar,iS=mg,dbe=gc,$M=Gt,dzt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=dbe.resolveRef.call(u,l,i,n);if(c===void 0)throw new fzt.default(r.opts.uriResolver,i,n);if(c instanceof dbe.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return hF(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return hF(e,(0,sc._)`${p}.validate`,l,l.$async)}function d(p){const m=V6e(e,p);hF(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,sc.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:sc.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function V6e(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,sc._)`${n.scopeValue("wrapper",{ref:t})}.validate`}aE.getValidate=V6e;function hF(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?iS.default.this:sc.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,sc._)`await ${(0,fbe.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,sc._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,fbe.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,sc._)`${p}.errors`;i.assign(iS.default.vErrors,(0,sc._)`${iS.default.vErrors} === null ? ${m} : ${iS.default.vErrors}.concat(${m})`),i.assign(iS.default.errors,(0,sc._)`${iS.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=$M.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,sc._)`${p}.evaluated.props`);s.props=$M.mergeEvaluated.props(i,y,s.props,sc.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=$M.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,sc._)`${p}.evaluated.items`);s.items=$M.mergeEvaluated.items(i,y,s.items,sc.Name)}}}aE.callRef=hF;aE.default=dzt;Object.defineProperty(Eie,"__esModule",{value:!0});const hzt=xie,pzt=aE,mzt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",hzt.default,pzt.default];Eie.default=mzt;var Sie={},Tie={};Object.defineProperty(Tie,"__esModule",{value:!0});const R4=Ar,ov=R4.operators,N4={maximum:{okStr:"<=",ok:ov.LTE,fail:ov.GT},minimum:{okStr:">=",ok:ov.GTE,fail:ov.LT},exclusiveMaximum:{okStr:"<",ok:ov.LT,fail:ov.GTE},exclusiveMinimum:{okStr:">",ok:ov.GT,fail:ov.LTE}},gzt={message:({keyword:e,schemaCode:t})=>(0,R4.str)`must be ${N4[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,R4._)`{comparison: ${N4[e].okStr}, limit: ${t}}`},yzt={keyword:Object.keys(N4),type:"number",schemaType:"number",$data:!0,error:gzt,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,R4._)`${n} ${N4[t].fail} ${r} || isNaN(${n})`)}};Tie.default=yzt;var Cie={};Object.defineProperty(Cie,"__esModule",{value:!0});const Pk=Ar,vzt={message:({schemaCode:e})=>(0,Pk.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Pk._)`{multipleOf: ${e}}`},bzt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:vzt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,Pk._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,Pk._)`${o} !== parseInt(${o})`;e.fail$data((0,Pk._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};Cie.default=bzt;var Aie={},Die={};Object.defineProperty(Die,"__esModule",{value:!0});function H6e(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}Die.default=H6e;H6e.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(Aie,"__esModule",{value:!0});const Jw=Ar,wzt=Gt,_zt=Die,Ezt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,Jw.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,Jw._)`{limit: ${e}}`},xzt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Ezt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?Jw.operators.GT:Jw.operators.LT,o=i.opts.unicode===!1?(0,Jw._)`${n}.length`:(0,Jw._)`${(0,wzt.useFunc)(e.gen,_zt.default)}(${n})`;e.fail$data((0,Jw._)`${o} ${s} ${r}`)}};Aie.default=xzt;var Iie={};Object.defineProperty(Iie,"__esModule",{value:!0});const Szt=Tr,P4=Ar,Tzt={message:({schemaCode:e})=>(0,P4.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,P4._)`{pattern: ${e}}`},Czt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Tzt,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,P4._)`(new RegExp(${i}, ${o}))`:(0,Szt.usePattern)(e,r);e.fail$data((0,P4._)`!${a}.test(${t})`)}};Iie.default=Czt;var kie={};Object.defineProperty(kie,"__esModule",{value:!0});const Ok=Ar,Azt={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,Ok.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,Ok._)`{limit: ${e}}`},Dzt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Azt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?Ok.operators.GT:Ok.operators.LT;e.fail$data((0,Ok._)`Object.keys(${n}).length ${i} ${r}`)}};kie.default=Dzt;var Rie={};Object.defineProperty(Rie,"__esModule",{value:!0});const OD=Tr,Mk=Ar,Izt=Gt,kzt={message:({params:{missingProperty:e}})=>(0,Mk.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Mk._)`{missingProperty: ${e}}`},Rzt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:kzt,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,Izt.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(Mk.nil,f);else for(const h of n)(0,OD.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,OD.checkMissingProp)(e,n,h)),(0,OD.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,OD.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,OD.propertyInData)(t,i,h,a.ownProperties)),t.if((0,Mk.not)(p),()=>{e.error(),t.break()})},Mk.nil)}}};Rie.default=Rzt;var Nie={};Object.defineProperty(Nie,"__esModule",{value:!0});const $k=Ar,Nzt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,$k.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,$k._)`{limit: ${e}}`},Pzt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Nzt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?$k.operators.GT:$k.operators.LT;e.fail$data((0,$k._)`${n}.length ${i} ${r}`)}};Nie.default=Pzt;var Pie={},VP={};Object.defineProperty(VP,"__esModule",{value:!0});const q6e=hte;q6e.code='require("ajv/dist/runtime/equal").default';VP.default=q6e;Object.defineProperty(Pie,"__esModule",{value:!0});const _H=ra,Ka=Ar,Ozt=Gt,Mzt=VP,$zt={message:({params:{i:e,j:t}})=>(0,Ka.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Ka._)`{i: ${e}, j: ${t}}`},Fzt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:$zt,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,_H.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,Ka._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,Ka._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,Ka._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,_H.checkDataTypes)(l,g,a.opts.strictNumbers,_H.DataType.Wrong),b=t.const("indices",(0,Ka._)`{}`);t.for((0,Ka._)`;${p}--;`,()=>{t.let(g,(0,Ka._)`${n}[${p}]`),t.if(y,(0,Ka._)`continue`),l.length>1&&t.if((0,Ka._)`typeof ${g} == "string"`,(0,Ka._)`${g} += "_"`),t.if((0,Ka._)`typeof ${b}[${g}] == "number"`,()=>{t.assign(m,(0,Ka._)`${b}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,Ka._)`${b}[${g}] = ${p}`)})}function h(p,m){const g=(0,Ozt.useFunc)(t,Mzt.default),y=t.name("outer");t.label(y).for((0,Ka._)`;${p}--;`,()=>t.for((0,Ka._)`${m} = ${p}; ${m}--;`,()=>t.if((0,Ka._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};Pie.default=Fzt;var Oie={};Object.defineProperty(Oie,"__esModule",{value:!0});const RK=Ar,Lzt=Gt,Bzt=VP,jzt={message:"must be equal to constant",params:({schemaCode:e})=>(0,RK._)`{allowedValue: ${e}}`},Uzt={keyword:"const",$data:!0,error:jzt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,RK._)`!${(0,Lzt.useFunc)(t,Bzt.default)}(${n}, ${i})`):e.fail((0,RK._)`${s} !== ${n}`)}};Oie.default=Uzt;var Mie={};Object.defineProperty(Mie,"__esModule",{value:!0});const NI=Ar,zzt=Gt,Vzt=VP,Hzt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,NI._)`{allowedValues: ${e}}`},qzt={keyword:"enum",schemaType:"array",$data:!0,error:Hzt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,zzt.useFunc)(t,Vzt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,NI.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,NI._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,NI._)`${l()}(${n}, ${h}[${p}])`:(0,NI._)`${n} === ${m}`}}};Mie.default=qzt;Object.defineProperty(Sie,"__esModule",{value:!0});const Wzt=Tie,Gzt=Cie,Yzt=Aie,Kzt=Iie,Xzt=kie,Qzt=Rie,Jzt=Nie,Zzt=Pie,eVt=Oie,tVt=Mie,nVt=[Wzt.default,Gzt.default,Yzt.default,Kzt.default,Xzt.default,Qzt.default,Jzt.default,Zzt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},eVt.default,tVt.default];Sie.default=nVt;var $ie={},dA={};Object.defineProperty(dA,"__esModule",{value:!0});dA.validateAdditionalItems=void 0;const Zw=Ar,NK=Gt,rVt={message:({params:{len:e}})=>(0,Zw.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Zw._)`{limit: ${e}}`},iVt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:rVt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,NK.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}W6e(e,r)}};function W6e(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,Zw._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Zw._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,NK.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,Zw._)`${a} <= ${t.length}`);n.if((0,Zw.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:NK.Type.Num},l),o.allErrors||n.if((0,Zw.not)(l),()=>n.break())})}}dA.validateAdditionalItems=W6e;dA.default=iVt;var Fie={},hA={};Object.defineProperty(hA,"__esModule",{value:!0});hA.validateTuple=void 0;const hbe=Ar,pF=Gt,sVt=Tr,oVt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return G6e(e,"additionalItems",t);n.items=!0,!(0,pF.alwaysValidSchema)(n,t)&&e.ok((0,sVt.validateArray)(e))}};function G6e(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=pF.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,hbe._)`${s}.length`);n.forEach((f,d)=>{(0,pF.alwaysValidSchema)(a,f)||(r.if((0,hbe._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,pF.checkStrictMode)(a,g,d.strictTuples)}}}hA.validateTuple=G6e;hA.default=oVt;Object.defineProperty(Fie,"__esModule",{value:!0});const aVt=hA,uVt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,aVt.validateTuple)(e,"items")};Fie.default=uVt;var Lie={};Object.defineProperty(Lie,"__esModule",{value:!0});const pbe=Ar,lVt=Gt,cVt=Tr,fVt=dA,dVt={message:({params:{len:e}})=>(0,pbe.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,pbe._)`{limit: ${e}}`},hVt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:dVt,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,lVt.alwaysValidSchema)(r,t)&&(i?(0,fVt.validateAdditionalItems)(e,i):e.ok((0,cVt.validateArray)(e)))}};Lie.default=hVt;var Bie={};Object.defineProperty(Bie,"__esModule",{value:!0});const gd=Ar,FM=Gt,pVt={message:({params:{min:e,max:t}})=>t===void 0?(0,gd.str)`must contain at least ${e} valid item(s)`:(0,gd.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,gd._)`{minContains: ${e}}`:(0,gd._)`{minContains: ${e}, maxContains: ${t}}`},mVt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:pVt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,gd._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,FM.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,FM.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,FM.alwaysValidSchema)(s,n)){let m=(0,gd._)`${c} >= ${o}`;a!==void 0&&(m=(0,gd._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,gd._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:FM.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,gd._)`${m}++`),a===void 0?t.if((0,gd._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,gd._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,gd._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};Bie.default=mVt;var Y6e={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Ar,n=Gt,r=Tr;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(Y6e);var jie={};Object.defineProperty(jie,"__esModule",{value:!0});const K6e=Ar,gVt=Gt,yVt={message:"property name must be valid",params:({params:e})=>(0,K6e._)`{propertyName: ${e.propertyName}}`},vVt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:yVt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,gVt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,K6e.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};jie.default=vVt;var E9={};Object.defineProperty(E9,"__esModule",{value:!0});const LM=Tr,Eh=Ar,bVt=mg,BM=Gt,wVt={message:"must NOT have additional properties",params:({params:e})=>(0,Eh._)`{additionalProperty: ${e.additionalProperty}}`},_Vt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:wVt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,BM.alwaysValidSchema)(o,n))return;const l=(0,LM.allSchemaProperties)(r.properties),c=(0,LM.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Eh._)`${s} === ${bVt.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const b=(0,BM.schemaRefOrVal)(o,r.properties,"properties");y=(0,LM.isOwnProperty)(t,b,g)}else l.length?y=(0,Eh.or)(...l.map(b=>(0,Eh._)`${g} === ${b}`)):y=Eh.nil;return c.length&&(y=(0,Eh.or)(y,...c.map(b=>(0,Eh._)`${(0,LM.usePattern)(e,b)}.test(${g})`))),(0,Eh.not)(y)}function h(g){t.code((0,Eh._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,BM.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,Eh.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,Eh.not)(y),()=>t.break()))}}function m(g,y,b){const w={keyword:"additionalProperties",dataProp:g,dataPropType:BM.Type.Str};b===!1&&Object.assign(w,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(w,y)}}};E9.default=_Vt;var Uie={};Object.defineProperty(Uie,"__esModule",{value:!0});const EVt=rp,mbe=Tr,EH=Gt,gbe=E9,xVt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&gbe.default.code(new EVt.KeywordCxt(s,gbe.default,"additionalProperties"));const o=(0,mbe.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=EH.mergeEvaluated.props(t,(0,EH.toHash)(o),s.props));const a=o.filter(f=>!(0,EH.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,mbe.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};Uie.default=xVt;var zie={};Object.defineProperty(zie,"__esModule",{value:!0});const ybe=Tr,jM=Ar,vbe=Gt,bbe=Gt,SVt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,ybe.allSchemaProperties)(n),u=a.filter(m=>(0,vbe.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof jM.Name)&&(s.props=(0,bbe.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,vbe.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,jM._)`${(0,ybe.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:bbe.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,jM._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,jM.not)(c),()=>t.break())})})}}};zie.default=SVt;var Vie={};Object.defineProperty(Vie,"__esModule",{value:!0});const TVt=Gt,CVt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,TVt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};Vie.default=CVt;var Hie={};Object.defineProperty(Hie,"__esModule",{value:!0});const AVt=Tr,DVt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:AVt.validateUnion,error:{message:"must match a schema in anyOf"}};Hie.default=DVt;var qie={};Object.defineProperty(qie,"__esModule",{value:!0});const mF=Ar,IVt=Gt,kVt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,mF._)`{passingSchemas: ${e.passing}}`},RVt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:kVt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,IVt.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,mF._)`${u} && ${o}`).assign(o,!1).assign(a,(0,mF._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,mF.Name)})})}}};qie.default=RVt;var Wie={};Object.defineProperty(Wie,"__esModule",{value:!0});const NVt=Gt,PVt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,NVt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};Wie.default=PVt;var Gie={};Object.defineProperty(Gie,"__esModule",{value:!0});const O4=Ar,X6e=Gt,OVt={message:({params:e})=>(0,O4.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,O4._)`{failingKeyword: ${e.ifClause}}`},MVt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:OVt,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,X6e.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=wbe(r,"then"),s=wbe(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,O4.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,O4._)`${c}`):e.setParams({ifClause:c})}}}};function wbe(e,t){const n=e.schema[t];return n!==void 0&&!(0,X6e.alwaysValidSchema)(e,n)}Gie.default=MVt;var Yie={};Object.defineProperty(Yie,"__esModule",{value:!0});const $Vt=Gt,FVt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,$Vt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};Yie.default=FVt;Object.defineProperty($ie,"__esModule",{value:!0});const LVt=dA,BVt=Fie,jVt=hA,UVt=Lie,zVt=Bie,VVt=Y6e,HVt=jie,qVt=E9,WVt=Uie,GVt=zie,YVt=Vie,KVt=Hie,XVt=qie,QVt=Wie,JVt=Gie,ZVt=Yie;function eHt(e=!1){const t=[YVt.default,KVt.default,XVt.default,QVt.default,JVt.default,ZVt.default,HVt.default,qVt.default,VVt.default,WVt.default,GVt.default];return e?t.push(BVt.default,UVt.default):t.push(LVt.default,jVt.default),t.push(zVt.default),t}$ie.default=eHt;var Kie={},Xie={};Object.defineProperty(Xie,"__esModule",{value:!0});const vo=Ar,tHt={message:({schemaCode:e})=>(0,vo.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,vo._)`{format: ${e}}`},nHt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:tHt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,vo._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,vo._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,vo._)`${m}.type || "string"`).assign(y,(0,vo._)`${m}.validate`),()=>n.assign(g,(0,vo._)`"string"`).assign(y,m)),e.fail$data((0,vo.or)(b(),w()));function b(){return u.strictSchema===!1?vo.nil:(0,vo._)`${o} && !${y}`}function w(){const S=c.$async?(0,vo._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,vo._)`${y}(${r})`,E=(0,vo._)`(typeof ${y} == "function" ? ${S} : ${y}.test(${r}))`;return(0,vo._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){b();return}if(p===!0)return;const[m,g,y]=w(p);m===t&&e.pass(S());function b(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function w(E){const T=E instanceof RegExp?(0,vo.regexpCode)(E):u.code.formats?(0,vo._)`${u.code.formats}${(0,vo.getProperty)(s)}`:void 0,C=n.scopeValue("formats",{key:s,ref:E,code:T});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,vo._)`${C}.validate`]:["string",E,C]}function S(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,vo._)`await ${y}(${r})`}return typeof g=="function"?(0,vo._)`${y}(${r})`:(0,vo._)`${y}.test(${r})`}}}};Xie.default=nHt;Object.defineProperty(Kie,"__esModule",{value:!0});const rHt=Xie,iHt=[rHt.default];Kie.default=iHt;var VC={};Object.defineProperty(VC,"__esModule",{value:!0});VC.contentVocabulary=VC.metadataVocabulary=void 0;VC.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];VC.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(_ie,"__esModule",{value:!0});const sHt=Eie,oHt=Sie,aHt=$ie,uHt=Kie,_be=VC,lHt=[sHt.default,oHt.default,(0,aHt.default)(),uHt.default,_be.metadataVocabulary,_be.contentVocabulary];_ie.default=lHt;var Qie={},x9={};Object.defineProperty(x9,"__esModule",{value:!0});x9.DiscrError=void 0;var Ebe;(function(e){e.Tag="tag",e.Mapping="mapping"})(Ebe||(x9.DiscrError=Ebe={}));Object.defineProperty(Qie,"__esModule",{value:!0});const AS=Ar,PK=x9,xbe=gc,cHt=fA,fHt=Gt,dHt={message:({params:{discrError:e,tagName:t}})=>e===PK.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,AS._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},hHt={keyword:"discriminator",type:"object",schemaType:"object",error:dHt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,AS._)`${n}${(0,AS.getProperty)(a)}`);t.if((0,AS._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:PK.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,AS._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:PK.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,AS.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let S=0;S<o.length;S++){let E=o[S];if(E!=null&&E.$ref&&!(0,fHt.schemaHasRulesButRef)(E,s.self.RULES)){const C=E.$ref;if(E=xbe.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,C),E instanceof xbe.SchemaEnv&&(E=E.schema),E===void 0)throw new cHt.default(s.opts.uriResolver,s.baseId,C)}const T=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof T!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),b(T,S)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:S}){return Array.isArray(S)&&S.includes(a)}function b(S,E){if(S.const)w(S.const,E);else if(S.enum)for(const T of S.enum)w(T,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function w(S,E){if(typeof S!="string"||S in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[S]=E}}}};Qie.default=hHt;const pHt="http://json-schema.org/draft-07/schema#",mHt="http://json-schema.org/draft-07/schema#",gHt="Core schema meta-schema",yHt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},vHt=["object","boolean"],bHt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},wHt={$schema:pHt,$id:mHt,title:gHt,definitions:yHt,type:vHt,properties:bHt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=c6e,r=_ie,i=Qie,s=wHt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=rp;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Ar;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=zP;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=fA;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(TK,TK.exports);var _Ht=TK.exports;const Jie=zf(_Ht),EHt="#/definitions/StudyConfig",xHt="http://json-schema.org/draft-07/schema#",SHt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},MatrixResponse:{additionalProperties:!1,description:`The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, \`answerOptions\` can be set to one of the following custom strings: 'satisfaction5','satisfaction7', 'likely5', 'likely7'. This will automatically generate the appropriate headers for the matrix.

Example for a 5-scale satisfaction matrix with three questions:

\`\`\`js { "id": "multi-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.", "required": true, "location": "aboveStimulus", "type": "matrix-radio", "answerOptions": "satisfaction5", "questionOptions": [  "The tool we created",  "The technique we developed",  "The authors of the tools" ] } \`\`\`

Here's an example using custom columns (answerOptions):

\`\`\`js { "id": "multi-custom", "prompt": "Which categories do the following items belong to?", "required": true, "location": "aboveStimulus", "type": "matrix-checkbox", "answerOptions": [  "Has Legs",  "Has Wings",  "Can Swim" ], "questionOptions": [  "Dog",  "Snake",  "Eagle",  "Salmon",  "Platypus" ]

} \`\`\``,properties:{answerOptions:{anyOf:[{items:{type:"string"},type:"array"},{const:"likely5",type:"string"},{const:"likely7",type:"string"},{const:"satisfaction5",type:"string"},{const:"satisfaction7",type:"string"}],description:"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},questionOptions:{description:"The question options (rows) are the prompts for each response you'd like to record.",items:{type:"string"},type:"array"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{enum:["matrix-radio","matrix-checkbox"],type:"string"}},required:["answerOptions","id","prompt","questionOptions","required","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/v1.0.6/src/public/demo-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"},{$ref:"#/definitions/MatrixResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.6/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},importedLibraries:{description:"A list of libraries that are used in the study. This is used to import external libraries into the study. Library names are valid namespaces to be used later.",items:{type:"string"},type:"array"},recordStudyAudio:{description:"Whether or not we want to utilize think-aloud features. If true, will record audio on all components unless deactivated on individual components. Defaults to false.",type:"boolean"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},timeoutReject:{description:"Whether to redirect a timed out participant to a rejection page. This only works for components where the `nextButtonDisableTime` field is set.",type:"boolean"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},THt={$ref:EHt,$schema:xHt,definitions:SHt},CHt="#/definitions/GlobalConfig",AHt="http://json-schema.org/draft-07/schema#",DHt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},IHt={$ref:CHt,$schema:AHt,definitions:DHt};var M4={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */M4.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,d=2,h=4,p=1,m=2,g=1,y=2,b=4,w=8,S=16,E=32,T=64,C=128,A=256,I=512,k=30,N="...",F=800,M=16,L=1,j=2,B=3,z=1/0,V=9007199254740991,G=17976931348623157e292,$=NaN,W=4294967295,K=W-1,q=W>>>1,Y=[["ary",C],["bind",g],["bindKey",y],["curry",w],["curryRight",S],["flip",I],["partial",E],["partialRight",T],["rearg",A]],Z="[object Arguments]",ae="[object Array]",be="[object AsyncFunction]",Se="[object Boolean]",we="[object Date]",Ce="[object DOMException]",Le="[object Error]",ke="[object Function]",Ze="[object GeneratorFunction]",Ke="[object Map]",Ct="[object Number]",wt="[object Null]",Re="[object Object]",He="[object Promise]",lt="[object Proxy]",St="[object RegExp]",Vt="[object Set]",ht="[object String]",Q="[object Symbol]",de="[object Undefined]",_e="[object WeakMap]",oe="[object WeakSet]",he="[object ArrayBuffer]",Ee="[object DataView]",Fe="[object Float32Array]",je="[object Float64Array]",ct="[object Int8Array]",rt="[object Int16Array]",qt="[object Int32Array]",en="[object Uint8Array]",Yt="[object Uint8ClampedArray]",un="[object Uint16Array]",Sn="[object Uint32Array]",Bn=/\b__p \+= '';/g,Ci=/\b(__p \+=) '' \+/g,gi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,jn=/&(?:amp|lt|gt|quot|#39);/g,Ki=/[&<>"']/g,ti=RegExp(jn.source),Es=RegExp(Ki.source),Jc=/<%-([\s\S]+?)%>/g,Va=/<%([\s\S]+?)%>/g,sl=/<%=([\s\S]+?)%>/g,Kr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xi=/^\w*$/,Ai=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,No=/[\\^$.*+?()[\]{}|]/g,Go=RegExp(No.source),po=/^\s+/,ve=/\s/,ce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,xe=/\{\n\/\* \[wrapped with (.+)\] \*/,Ve=/,? & /,ze=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Dt=/[()=,{}\[\]\/\s]/,Wt=/\\(\\)?/g,bn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ir=/\w*$/,gr=/^[-+]0x[0-9a-f]+$/i,Un=/^0b[01]+$/i,Dr=/^\[object .+?Constructor\]$/,ni=/^0o[0-7]+$/i,dn=/^(?:0|[1-9]\d*)$/,Ir=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xr=/($^)/,sr=/['\n\r\u2028\u2029\\]/g,ln="\\ud800-\\udfff",Br="\\u0300-\\u036f",Di="\\ufe20-\\ufe2f",xs="\\u20d0-\\u20ff",yi=Br+Di+xs,Qi="\\u2700-\\u27bf",Yo="a-z\\xdf-\\xf6\\xf8-\\xff",Ha="\\xac\\xb1\\xd7\\xf7",Po="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Yl="\\u2000-\\u206f",Yf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",te="A-Z\\xc0-\\xd6\\xd8-\\xde",ye="\\ufe0e\\ufe0f",ue=Ha+Po+Yl+Yf,Ie="[']",Oe="["+ln+"]",De="["+ue+"]",Je="["+yi+"]",pt="\\d+",yt="["+Qi+"]",vt="["+Yo+"]",It="[^"+ln+ue+pt+Qi+Yo+te+"]",zt="\\ud83c[\\udffb-\\udfff]",Qn="(?:"+Je+"|"+zt+")",sn="[^"+ln+"]",yr="(?:\\ud83c[\\udde6-\\uddff]){2}",ri="[\\ud800-\\udbff][\\udc00-\\udfff]",Nr="["+te+"]",Ko="\\u200d",Zc="(?:"+vt+"|"+It+")",ih="(?:"+Nr+"|"+It+")",qy="(?:"+Ie+"(?:d|ll|m|re|s|t|ve))?",Mp="(?:"+Ie+"(?:D|LL|M|RE|S|T|VE))?",Jb=Qn+"?",ol="["+ye+"]?",yu="(?:"+Ko+"(?:"+[sn,yr,ri].join("|")+")"+ol+Jb+")*",sh="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Wy="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Zb=ol+Jb+yu,oh="(?:"+[yt,yr,ri].join("|")+")"+Zb,ew="(?:"+[sn+Je+"?",Je,yr,ri,Oe].join("|")+")",_x=RegExp(Ie,"g"),ah=RegExp(Je,"g"),ba=RegExp(zt+"(?="+zt+")|"+ew+Zb,"g"),zA=RegExp([Nr+"?"+vt+"+"+qy+"(?="+[De,Nr,"$"].join("|")+")",ih+"+"+Mp+"(?="+[De,Nr+Zc,"$"].join("|")+")",Nr+"?"+Zc+"+"+qy,Nr+"+"+Mp,Wy,sh,pt,oh].join("|"),"g"),Ex=RegExp("["+Ko+ln+yi+ye+"]"),Ag=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Dg=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xx=-1,ii={};ii[Fe]=ii[je]=ii[ct]=ii[rt]=ii[qt]=ii[en]=ii[Yt]=ii[un]=ii[Sn]=!0,ii[Z]=ii[ae]=ii[he]=ii[Se]=ii[Ee]=ii[we]=ii[Le]=ii[ke]=ii[Ke]=ii[Ct]=ii[Re]=ii[St]=ii[Vt]=ii[ht]=ii[_e]=!1;var jr={};jr[Z]=jr[ae]=jr[he]=jr[Ee]=jr[Se]=jr[we]=jr[Fe]=jr[je]=jr[ct]=jr[rt]=jr[qt]=jr[Ke]=jr[Ct]=jr[Re]=jr[St]=jr[Vt]=jr[ht]=jr[Q]=jr[en]=jr[Yt]=jr[un]=jr[Sn]=!0,jr[Le]=jr[ke]=jr[_e]=!1;var Sx={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},fe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Te={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},We={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Jt=parseFloat,_r=parseInt,si=typeof Hs=="object"&&Hs&&Hs.Object===Object&&Hs,Ni=typeof self=="object"&&self&&self.Object===Object&&self,wn=si||Ni||Function("return this")(),vi=t&&!t.nodeType&&t,Pi=vi&&!0&&e&&!e.nodeType&&e,Xo=Pi&&Pi.exports===vi,uh=Xo&&si.process,Xs=function(){try{var Pe=Pi&&Pi.require&&Pi.require("util").types;return Pe||uh&&uh.binding&&uh.binding("util")}catch{}}(),Ig=Xs&&Xs.isArrayBuffer,kg=Xs&&Xs.isDate,tw=Xs&&Xs.isMap,VA=Xs&&Xs.isRegExp,nw=Xs&&Xs.isSet,HO=Xs&&Xs.isTypedArray;function vu(Pe,it,Ge){switch(Ge.length){case 0:return Pe.call(it);case 1:return Pe.call(it,Ge[0]);case 2:return Pe.call(it,Ge[0],Ge[1]);case 3:return Pe.call(it,Ge[0],Ge[1],Ge[2])}return Pe.apply(it,Ge)}function rw(Pe,it,Ge,Kt){for(var er=-1,wi=Pe==null?0:Pe.length;++er<wi;){var Jo=Pe[er];it(Kt,Jo,Ge(Jo),Pe)}return Kt}function al(Pe,it){for(var Ge=-1,Kt=Pe==null?0:Pe.length;++Ge<Kt&&it(Pe[Ge],Ge,Pe)!==!1;);return Pe}function qO(Pe,it){for(var Ge=Pe==null?0:Pe.length;Ge--&&it(Pe[Ge],Ge,Pe)!==!1;);return Pe}function Tx(Pe,it){for(var Ge=-1,Kt=Pe==null?0:Pe.length;++Ge<Kt;)if(!it(Pe[Ge],Ge,Pe))return!1;return!0}function Kf(Pe,it){for(var Ge=-1,Kt=Pe==null?0:Pe.length,er=0,wi=[];++Ge<Kt;){var Jo=Pe[Ge];it(Jo,Ge,Pe)&&(wi[er++]=Jo)}return wi}function iw(Pe,it){var Ge=Pe==null?0:Pe.length;return!!Ge&&Rg(Pe,it,0)>-1}function Gy(Pe,it,Ge){for(var Kt=-1,er=Pe==null?0:Pe.length;++Kt<er;)if(Ge(it,Pe[Kt]))return!0;return!1}function Ji(Pe,it){for(var Ge=-1,Kt=Pe==null?0:Pe.length,er=Array(Kt);++Ge<Kt;)er[Ge]=it(Pe[Ge],Ge,Pe);return er}function lh(Pe,it){for(var Ge=-1,Kt=it.length,er=Pe.length;++Ge<Kt;)Pe[er+Ge]=it[Ge];return Pe}function ch(Pe,it,Ge,Kt){var er=-1,wi=Pe==null?0:Pe.length;for(Kt&&wi&&(Ge=Pe[++er]);++er<wi;)Ge=it(Ge,Pe[er],er,Pe);return Ge}function WO(Pe,it,Ge,Kt){var er=Pe==null?0:Pe.length;for(Kt&&er&&(Ge=Pe[--er]);er--;)Ge=it(Ge,Pe[er],er,Pe);return Ge}function Cx(Pe,it){for(var Ge=-1,Kt=Pe==null?0:Pe.length;++Ge<Kt;)if(it(Pe[Ge],Ge,Pe))return!0;return!1}var GO=X("length");function YO(Pe){return Pe.split("")}function Ax(Pe){return Pe.match(ze)||[]}function bu(Pe,it,Ge){var Kt;return Ge(Pe,function(er,wi,Jo){if(it(er,wi,Jo))return Kt=wi,!1}),Kt}function sw(Pe,it,Ge,Kt){for(var er=Pe.length,wi=Ge+(Kt?1:-1);Kt?wi--:++wi<er;)if(it(Pe[wi],wi,Pe))return wi;return-1}function Rg(Pe,it,Ge){return it===it?UWe(Pe,it,Ge):sw(Pe,D,Ge)}function Yy(Pe,it,Ge,Kt){for(var er=Ge-1,wi=Pe.length;++er<wi;)if(Kt(Pe[er],it))return er;return-1}function D(Pe){return Pe!==Pe}function U(Pe,it){var Ge=Pe==null?0:Pe.length;return Ge?Mt(Pe,it)/Ge:$}function X(Pe){return function(it){return it==null?n:it[Pe]}}function re(Pe){return function(it){return Pe==null?n:Pe[it]}}function $e(Pe,it,Ge,Kt,er){return er(Pe,function(wi,Jo,Zi){Ge=Kt?(Kt=!1,wi):it(Ge,wi,Jo,Zi)}),Ge}function Xe(Pe,it){var Ge=Pe.length;for(Pe.sort(it);Ge--;)Pe[Ge]=Pe[Ge].value;return Pe}function Mt(Pe,it){for(var Ge,Kt=-1,er=Pe.length;++Kt<er;){var wi=it(Pe[Kt]);wi!==n&&(Ge=Ge===n?wi:Ge+wi)}return Ge}function bi(Pe,it){for(var Ge=-1,Kt=Array(Pe);++Ge<Pe;)Kt[Ge]=it(Ge);return Kt}function Qo(Pe,it){return Ji(it,function(Ge){return[Ge,Pe[Ge]]})}function Ur(Pe){return Pe&&Pe.slice(0,Yce(Pe)+1).replace(po,"")}function Ii(Pe){return function(it){return Pe(it)}}function Oo(Pe,it){return Ji(it,function(Ge){return Pe[Ge]})}function Xf(Pe,it){return Pe.has(it)}function Kl(Pe,it){for(var Ge=-1,Kt=Pe.length;++Ge<Kt&&Rg(it,Pe[Ge],0)>-1;);return Ge}function ow(Pe,it){for(var Ge=Pe.length;Ge--&&Rg(it,Pe[Ge],0)>-1;);return Ge}function HA(Pe,it){for(var Ge=Pe.length,Kt=0;Ge--;)Pe[Ge]===it&&++Kt;return Kt}var OWe=re(Sx),MWe=re(fe);function $We(Pe){return"\\"+We[Pe]}function FWe(Pe,it){return Pe==null?n:Pe[it]}function Dx(Pe){return Ex.test(Pe)}function LWe(Pe){return Ag.test(Pe)}function BWe(Pe){for(var it,Ge=[];!(it=Pe.next()).done;)Ge.push(it.value);return Ge}function K7(Pe){var it=-1,Ge=Array(Pe.size);return Pe.forEach(function(Kt,er){Ge[++it]=[er,Kt]}),Ge}function Gce(Pe,it){return function(Ge){return Pe(it(Ge))}}function Ky(Pe,it){for(var Ge=-1,Kt=Pe.length,er=0,wi=[];++Ge<Kt;){var Jo=Pe[Ge];(Jo===it||Jo===c)&&(Pe[Ge]=c,wi[er++]=Ge)}return wi}function KO(Pe){var it=-1,Ge=Array(Pe.size);return Pe.forEach(function(Kt){Ge[++it]=Kt}),Ge}function jWe(Pe){var it=-1,Ge=Array(Pe.size);return Pe.forEach(function(Kt){Ge[++it]=[Kt,Kt]}),Ge}function UWe(Pe,it,Ge){for(var Kt=Ge-1,er=Pe.length;++Kt<er;)if(Pe[Kt]===it)return Kt;return-1}function zWe(Pe,it,Ge){for(var Kt=Ge+1;Kt--;)if(Pe[Kt]===it)return Kt;return Kt}function Ix(Pe){return Dx(Pe)?HWe(Pe):GO(Pe)}function fh(Pe){return Dx(Pe)?qWe(Pe):YO(Pe)}function Yce(Pe){for(var it=Pe.length;it--&&ve.test(Pe.charAt(it)););return it}var VWe=re(Te);function HWe(Pe){for(var it=ba.lastIndex=0;ba.test(Pe);)++it;return it}function qWe(Pe){return Pe.match(ba)||[]}function WWe(Pe){return Pe.match(zA)||[]}var GWe=function Pe(it){it=it==null?wn:kx.defaults(wn.Object(),it,kx.pick(wn,Dg));var Ge=it.Array,Kt=it.Date,er=it.Error,wi=it.Function,Jo=it.Math,Zi=it.Object,X7=it.RegExp,YWe=it.String,Qf=it.TypeError,XO=Ge.prototype,KWe=wi.prototype,Rx=Zi.prototype,QO=it["__core-js_shared__"],JO=KWe.toString,Oi=Rx.hasOwnProperty,XWe=0,Kce=function(){var v=/[^.]+$/.exec(QO&&QO.keys&&QO.keys.IE_PROTO||"");return v?"Symbol(src)_1."+v:""}(),ZO=Rx.toString,QWe=JO.call(Zi),JWe=wn._,ZWe=X7("^"+JO.call(Oi).replace(No,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),e3=Xo?it.Buffer:n,Xy=it.Symbol,t3=it.Uint8Array,Xce=e3?e3.allocUnsafe:n,n3=Gce(Zi.getPrototypeOf,Zi),Qce=Zi.create,Jce=Rx.propertyIsEnumerable,r3=XO.splice,Zce=Xy?Xy.isConcatSpreadable:n,qA=Xy?Xy.iterator:n,aw=Xy?Xy.toStringTag:n,i3=function(){try{var v=dw(Zi,"defineProperty");return v({},"",{}),v}catch{}}(),eGe=it.clearTimeout!==wn.clearTimeout&&it.clearTimeout,tGe=Kt&&Kt.now!==wn.Date.now&&Kt.now,nGe=it.setTimeout!==wn.setTimeout&&it.setTimeout,s3=Jo.ceil,o3=Jo.floor,Q7=Zi.getOwnPropertySymbols,rGe=e3?e3.isBuffer:n,efe=it.isFinite,iGe=XO.join,sGe=Gce(Zi.keys,Zi),Zo=Jo.max,wu=Jo.min,oGe=Kt.now,aGe=it.parseInt,tfe=Jo.random,uGe=XO.reverse,J7=dw(it,"DataView"),WA=dw(it,"Map"),Z7=dw(it,"Promise"),Nx=dw(it,"Set"),GA=dw(it,"WeakMap"),YA=dw(Zi,"create"),a3=GA&&new GA,Px={},lGe=hw(J7),cGe=hw(WA),fGe=hw(Z7),dGe=hw(Nx),hGe=hw(GA),u3=Xy?Xy.prototype:n,KA=u3?u3.valueOf:n,nfe=u3?u3.toString:n;function ee(v){if(Qs(v)&&!rr(v)&&!(v instanceof Pr)){if(v instanceof Jf)return v;if(Oi.call(v,"__wrapped__"))return rde(v)}return new Jf(v)}var Ox=function(){function v(){}return function(x){if(!js(x))return{};if(Qce)return Qce(x);v.prototype=x;var R=new v;return v.prototype=n,R}}();function l3(){}function Jf(v,x){this.__wrapped__=v,this.__actions__=[],this.__chain__=!!x,this.__index__=0,this.__values__=n}ee.templateSettings={escape:Jc,evaluate:Va,interpolate:sl,variable:"",imports:{_:ee}},ee.prototype=l3.prototype,ee.prototype.constructor=ee,Jf.prototype=Ox(l3.prototype),Jf.prototype.constructor=Jf;function Pr(v){this.__wrapped__=v,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=W,this.__views__=[]}function pGe(){var v=new Pr(this.__wrapped__);return v.__actions__=Xl(this.__actions__),v.__dir__=this.__dir__,v.__filtered__=this.__filtered__,v.__iteratees__=Xl(this.__iteratees__),v.__takeCount__=this.__takeCount__,v.__views__=Xl(this.__views__),v}function mGe(){if(this.__filtered__){var v=new Pr(this);v.__dir__=-1,v.__filtered__=!0}else v=this.clone(),v.__dir__*=-1;return v}function gGe(){var v=this.__wrapped__.value(),x=this.__dir__,R=rr(v),H=x<0,J=R?v.length:0,ie=DYe(0,J,this.__views__),pe=ie.start,Ae=ie.end,Me=Ae-pe,ut=H?Ae:pe-1,ft=this.__iteratees__,bt=ft.length,Ut=0,an=wu(Me,this.__takeCount__);if(!R||!H&&J==Me&&an==Me)return Cfe(v,this.__actions__);var Dn=[];e:for(;Me--&&Ut<an;){ut+=x;for(var vr=-1,In=v[ut];++vr<bt;){var kr=ft[vr],zr=kr.iteratee,nf=kr.type,cl=zr(In);if(nf==j)In=cl;else if(!cl){if(nf==L)continue e;break e}}Dn[Ut++]=In}return Dn}Pr.prototype=Ox(l3.prototype),Pr.prototype.constructor=Pr;function uw(v){var x=-1,R=v==null?0:v.length;for(this.clear();++x<R;){var H=v[x];this.set(H[0],H[1])}}function yGe(){this.__data__=YA?YA(null):{},this.size=0}function vGe(v){var x=this.has(v)&&delete this.__data__[v];return this.size-=x?1:0,x}function bGe(v){var x=this.__data__;if(YA){var R=x[v];return R===u?n:R}return Oi.call(x,v)?x[v]:n}function wGe(v){var x=this.__data__;return YA?x[v]!==n:Oi.call(x,v)}function _Ge(v,x){var R=this.__data__;return this.size+=this.has(v)?0:1,R[v]=YA&&x===n?u:x,this}uw.prototype.clear=yGe,uw.prototype.delete=vGe,uw.prototype.get=bGe,uw.prototype.has=wGe,uw.prototype.set=_Ge;function Ng(v){var x=-1,R=v==null?0:v.length;for(this.clear();++x<R;){var H=v[x];this.set(H[0],H[1])}}function EGe(){this.__data__=[],this.size=0}function xGe(v){var x=this.__data__,R=c3(x,v);if(R<0)return!1;var H=x.length-1;return R==H?x.pop():r3.call(x,R,1),--this.size,!0}function SGe(v){var x=this.__data__,R=c3(x,v);return R<0?n:x[R][1]}function TGe(v){return c3(this.__data__,v)>-1}function CGe(v,x){var R=this.__data__,H=c3(R,v);return H<0?(++this.size,R.push([v,x])):R[H][1]=x,this}Ng.prototype.clear=EGe,Ng.prototype.delete=xGe,Ng.prototype.get=SGe,Ng.prototype.has=TGe,Ng.prototype.set=CGe;function Pg(v){var x=-1,R=v==null?0:v.length;for(this.clear();++x<R;){var H=v[x];this.set(H[0],H[1])}}function AGe(){this.size=0,this.__data__={hash:new uw,map:new(WA||Ng),string:new uw}}function DGe(v){var x=E3(this,v).delete(v);return this.size-=x?1:0,x}function IGe(v){return E3(this,v).get(v)}function kGe(v){return E3(this,v).has(v)}function RGe(v,x){var R=E3(this,v),H=R.size;return R.set(v,x),this.size+=R.size==H?0:1,this}Pg.prototype.clear=AGe,Pg.prototype.delete=DGe,Pg.prototype.get=IGe,Pg.prototype.has=kGe,Pg.prototype.set=RGe;function lw(v){var x=-1,R=v==null?0:v.length;for(this.__data__=new Pg;++x<R;)this.add(v[x])}function NGe(v){return this.__data__.set(v,u),this}function PGe(v){return this.__data__.has(v)}lw.prototype.add=lw.prototype.push=NGe,lw.prototype.has=PGe;function dh(v){var x=this.__data__=new Ng(v);this.size=x.size}function OGe(){this.__data__=new Ng,this.size=0}function MGe(v){var x=this.__data__,R=x.delete(v);return this.size=x.size,R}function $Ge(v){return this.__data__.get(v)}function FGe(v){return this.__data__.has(v)}function LGe(v,x){var R=this.__data__;if(R instanceof Ng){var H=R.__data__;if(!WA||H.length<i-1)return H.push([v,x]),this.size=++R.size,this;R=this.__data__=new Pg(H)}return R.set(v,x),this.size=R.size,this}dh.prototype.clear=OGe,dh.prototype.delete=MGe,dh.prototype.get=$Ge,dh.prototype.has=FGe,dh.prototype.set=LGe;function rfe(v,x){var R=rr(v),H=!R&&pw(v),J=!R&&!H&&tv(v),ie=!R&&!H&&!J&&Lx(v),pe=R||H||J||ie,Ae=pe?bi(v.length,YWe):[],Me=Ae.length;for(var ut in v)(x||Oi.call(v,ut))&&!(pe&&(ut=="length"||J&&(ut=="offset"||ut=="parent")||ie&&(ut=="buffer"||ut=="byteLength"||ut=="byteOffset")||Fg(ut,Me)))&&Ae.push(ut);return Ae}function ife(v){var x=v.length;return x?v[cU(0,x-1)]:n}function BGe(v,x){return x3(Xl(v),cw(x,0,v.length))}function jGe(v){return x3(Xl(v))}function eU(v,x,R){(R!==n&&!hh(v[x],R)||R===n&&!(x in v))&&Og(v,x,R)}function XA(v,x,R){var H=v[x];(!(Oi.call(v,x)&&hh(H,R))||R===n&&!(x in v))&&Og(v,x,R)}function c3(v,x){for(var R=v.length;R--;)if(hh(v[R][0],x))return R;return-1}function UGe(v,x,R,H){return Qy(v,function(J,ie,pe){x(H,J,R(J),pe)}),H}function sfe(v,x){return v&&Fp(x,wa(x),v)}function zGe(v,x){return v&&Fp(x,Jl(x),v)}function Og(v,x,R){x=="__proto__"&&i3?i3(v,x,{configurable:!0,enumerable:!0,value:R,writable:!0}):v[x]=R}function tU(v,x){for(var R=-1,H=x.length,J=Ge(H),ie=v==null;++R<H;)J[R]=ie?n:MU(v,x[R]);return J}function cw(v,x,R){return v===v&&(R!==n&&(v=v<=R?v:R),x!==n&&(v=v>=x?v:x)),v}function Zf(v,x,R,H,J,ie){var pe,Ae=x&f,Me=x&d,ut=x&h;if(R&&(pe=J?R(v,H,J,ie):R(v)),pe!==n)return pe;if(!js(v))return v;var ft=rr(v);if(ft){if(pe=kYe(v),!Ae)return Xl(v,pe)}else{var bt=_u(v),Ut=bt==ke||bt==Ze;if(tv(v))return Ife(v,Ae);if(bt==Re||bt==Z||Ut&&!J){if(pe=Me||Ut?{}:Yfe(v),!Ae)return Me?bYe(v,zGe(pe,v)):vYe(v,sfe(pe,v))}else{if(!jr[bt])return J?v:{};pe=RYe(v,bt,Ae)}}ie||(ie=new dh);var an=ie.get(v);if(an)return an;ie.set(v,pe),xde(v)?v.forEach(function(In){pe.add(Zf(In,x,R,In,v,ie))}):_de(v)&&v.forEach(function(In,kr){pe.set(kr,Zf(In,x,R,kr,v,ie))});var Dn=ut?Me?_U:wU:Me?Jl:wa,vr=ft?n:Dn(v);return al(vr||v,function(In,kr){vr&&(kr=In,In=v[kr]),XA(pe,kr,Zf(In,x,R,kr,v,ie))}),pe}function VGe(v){var x=wa(v);return function(R){return ofe(R,v,x)}}function ofe(v,x,R){var H=R.length;if(v==null)return!H;for(v=Zi(v);H--;){var J=R[H],ie=x[J],pe=v[J];if(pe===n&&!(J in v)||!ie(pe))return!1}return!0}function afe(v,x,R){if(typeof v!="function")throw new Qf(o);return rD(function(){v.apply(n,R)},x)}function QA(v,x,R,H){var J=-1,ie=iw,pe=!0,Ae=v.length,Me=[],ut=x.length;if(!Ae)return Me;R&&(x=Ji(x,Ii(R))),H?(ie=Gy,pe=!1):x.length>=i&&(ie=Xf,pe=!1,x=new lw(x));e:for(;++J<Ae;){var ft=v[J],bt=R==null?ft:R(ft);if(ft=H||ft!==0?ft:0,pe&&bt===bt){for(var Ut=ut;Ut--;)if(x[Ut]===bt)continue e;Me.push(ft)}else ie(x,bt,H)||Me.push(ft)}return Me}var Qy=Ofe($p),ufe=Ofe(rU,!0);function HGe(v,x){var R=!0;return Qy(v,function(H,J,ie){return R=!!x(H,J,ie),R}),R}function f3(v,x,R){for(var H=-1,J=v.length;++H<J;){var ie=v[H],pe=x(ie);if(pe!=null&&(Ae===n?pe===pe&&!tf(pe):R(pe,Ae)))var Ae=pe,Me=ie}return Me}function qGe(v,x,R,H){var J=v.length;for(R=fr(R),R<0&&(R=-R>J?0:J+R),H=H===n||H>J?J:fr(H),H<0&&(H+=J),H=R>H?0:Tde(H);R<H;)v[R++]=x;return v}function lfe(v,x){var R=[];return Qy(v,function(H,J,ie){x(H,J,ie)&&R.push(H)}),R}function qa(v,x,R,H,J){var ie=-1,pe=v.length;for(R||(R=PYe),J||(J=[]);++ie<pe;){var Ae=v[ie];x>0&&R(Ae)?x>1?qa(Ae,x-1,R,H,J):lh(J,Ae):H||(J[J.length]=Ae)}return J}var nU=Mfe(),cfe=Mfe(!0);function $p(v,x){return v&&nU(v,x,wa)}function rU(v,x){return v&&cfe(v,x,wa)}function d3(v,x){return Kf(x,function(R){return Lg(v[R])})}function fw(v,x){x=Zy(x,v);for(var R=0,H=x.length;v!=null&&R<H;)v=v[Lp(x[R++])];return R&&R==H?v:n}function ffe(v,x,R){var H=x(v);return rr(v)?H:lh(H,R(v))}function ul(v){return v==null?v===n?de:wt:aw&&aw in Zi(v)?AYe(v):jYe(v)}function iU(v,x){return v>x}function WGe(v,x){return v!=null&&Oi.call(v,x)}function GGe(v,x){return v!=null&&x in Zi(v)}function YGe(v,x,R){return v>=wu(x,R)&&v<Zo(x,R)}function sU(v,x,R){for(var H=R?Gy:iw,J=v[0].length,ie=v.length,pe=ie,Ae=Ge(ie),Me=1/0,ut=[];pe--;){var ft=v[pe];pe&&x&&(ft=Ji(ft,Ii(x))),Me=wu(ft.length,Me),Ae[pe]=!R&&(x||J>=120&&ft.length>=120)?new lw(pe&&ft):n}ft=v[0];var bt=-1,Ut=Ae[0];e:for(;++bt<J&&ut.length<Me;){var an=ft[bt],Dn=x?x(an):an;if(an=R||an!==0?an:0,!(Ut?Xf(Ut,Dn):H(ut,Dn,R))){for(pe=ie;--pe;){var vr=Ae[pe];if(!(vr?Xf(vr,Dn):H(v[pe],Dn,R)))continue e}Ut&&Ut.push(Dn),ut.push(an)}}return ut}function KGe(v,x,R,H){return $p(v,function(J,ie,pe){x(H,R(J),ie,pe)}),H}function JA(v,x,R){x=Zy(x,v),v=Jfe(v,x);var H=v==null?v:v[Lp(td(x))];return H==null?n:vu(H,v,R)}function dfe(v){return Qs(v)&&ul(v)==Z}function XGe(v){return Qs(v)&&ul(v)==he}function QGe(v){return Qs(v)&&ul(v)==we}function ZA(v,x,R,H,J){return v===x?!0:v==null||x==null||!Qs(v)&&!Qs(x)?v!==v&&x!==x:JGe(v,x,R,H,ZA,J)}function JGe(v,x,R,H,J,ie){var pe=rr(v),Ae=rr(x),Me=pe?ae:_u(v),ut=Ae?ae:_u(x);Me=Me==Z?Re:Me,ut=ut==Z?Re:ut;var ft=Me==Re,bt=ut==Re,Ut=Me==ut;if(Ut&&tv(v)){if(!tv(x))return!1;pe=!0,ft=!1}if(Ut&&!ft)return ie||(ie=new dh),pe||Lx(v)?qfe(v,x,R,H,J,ie):TYe(v,x,Me,R,H,J,ie);if(!(R&p)){var an=ft&&Oi.call(v,"__wrapped__"),Dn=bt&&Oi.call(x,"__wrapped__");if(an||Dn){var vr=an?v.value():v,In=Dn?x.value():x;return ie||(ie=new dh),J(vr,In,R,H,ie)}}return Ut?(ie||(ie=new dh),CYe(v,x,R,H,J,ie)):!1}function ZGe(v){return Qs(v)&&_u(v)==Ke}function oU(v,x,R,H){var J=R.length,ie=J,pe=!H;if(v==null)return!ie;for(v=Zi(v);J--;){var Ae=R[J];if(pe&&Ae[2]?Ae[1]!==v[Ae[0]]:!(Ae[0]in v))return!1}for(;++J<ie;){Ae=R[J];var Me=Ae[0],ut=v[Me],ft=Ae[1];if(pe&&Ae[2]){if(ut===n&&!(Me in v))return!1}else{var bt=new dh;if(H)var Ut=H(ut,ft,Me,v,x,bt);if(!(Ut===n?ZA(ft,ut,p|m,H,bt):Ut))return!1}}return!0}function hfe(v){if(!js(v)||MYe(v))return!1;var x=Lg(v)?ZWe:Dr;return x.test(hw(v))}function eYe(v){return Qs(v)&&ul(v)==St}function tYe(v){return Qs(v)&&_u(v)==Vt}function nYe(v){return Qs(v)&&I3(v.length)&&!!ii[ul(v)]}function pfe(v){return typeof v=="function"?v:v==null?Zl:typeof v=="object"?rr(v)?yfe(v[0],v[1]):gfe(v):$de(v)}function aU(v){if(!nD(v))return sGe(v);var x=[];for(var R in Zi(v))Oi.call(v,R)&&R!="constructor"&&x.push(R);return x}function rYe(v){if(!js(v))return BYe(v);var x=nD(v),R=[];for(var H in v)H=="constructor"&&(x||!Oi.call(v,H))||R.push(H);return R}function uU(v,x){return v<x}function mfe(v,x){var R=-1,H=Ql(v)?Ge(v.length):[];return Qy(v,function(J,ie,pe){H[++R]=x(J,ie,pe)}),H}function gfe(v){var x=xU(v);return x.length==1&&x[0][2]?Xfe(x[0][0],x[0][1]):function(R){return R===v||oU(R,v,x)}}function yfe(v,x){return TU(v)&&Kfe(x)?Xfe(Lp(v),x):function(R){var H=MU(R,v);return H===n&&H===x?$U(R,v):ZA(x,H,p|m)}}function h3(v,x,R,H,J){v!==x&&nU(x,function(ie,pe){if(J||(J=new dh),js(ie))iYe(v,x,pe,R,h3,H,J);else{var Ae=H?H(AU(v,pe),ie,pe+"",v,x,J):n;Ae===n&&(Ae=ie),eU(v,pe,Ae)}},Jl)}function iYe(v,x,R,H,J,ie,pe){var Ae=AU(v,R),Me=AU(x,R),ut=pe.get(Me);if(ut){eU(v,R,ut);return}var ft=ie?ie(Ae,Me,R+"",v,x,pe):n,bt=ft===n;if(bt){var Ut=rr(Me),an=!Ut&&tv(Me),Dn=!Ut&&!an&&Lx(Me);ft=Me,Ut||an||Dn?rr(Ae)?ft=Ae:mo(Ae)?ft=Xl(Ae):an?(bt=!1,ft=Ife(Me,!0)):Dn?(bt=!1,ft=kfe(Me,!0)):ft=[]:iD(Me)||pw(Me)?(ft=Ae,pw(Ae)?ft=Cde(Ae):(!js(Ae)||Lg(Ae))&&(ft=Yfe(Me))):bt=!1}bt&&(pe.set(Me,ft),J(ft,Me,H,ie,pe),pe.delete(Me)),eU(v,R,ft)}function vfe(v,x){var R=v.length;if(R)return x+=x<0?R:0,Fg(x,R)?v[x]:n}function bfe(v,x,R){x.length?x=Ji(x,function(ie){return rr(ie)?function(pe){return fw(pe,ie.length===1?ie[0]:ie)}:ie}):x=[Zl];var H=-1;x=Ji(x,Ii(Cn()));var J=mfe(v,function(ie,pe,Ae){var Me=Ji(x,function(ut){return ut(ie)});return{criteria:Me,index:++H,value:ie}});return Xe(J,function(ie,pe){return yYe(ie,pe,R)})}function sYe(v,x){return wfe(v,x,function(R,H){return $U(v,H)})}function wfe(v,x,R){for(var H=-1,J=x.length,ie={};++H<J;){var pe=x[H],Ae=fw(v,pe);R(Ae,pe)&&eD(ie,Zy(pe,v),Ae)}return ie}function oYe(v){return function(x){return fw(x,v)}}function lU(v,x,R,H){var J=H?Yy:Rg,ie=-1,pe=x.length,Ae=v;for(v===x&&(x=Xl(x)),R&&(Ae=Ji(v,Ii(R)));++ie<pe;)for(var Me=0,ut=x[ie],ft=R?R(ut):ut;(Me=J(Ae,ft,Me,H))>-1;)Ae!==v&&r3.call(Ae,Me,1),r3.call(v,Me,1);return v}function _fe(v,x){for(var R=v?x.length:0,H=R-1;R--;){var J=x[R];if(R==H||J!==ie){var ie=J;Fg(J)?r3.call(v,J,1):hU(v,J)}}return v}function cU(v,x){return v+o3(tfe()*(x-v+1))}function aYe(v,x,R,H){for(var J=-1,ie=Zo(s3((x-v)/(R||1)),0),pe=Ge(ie);ie--;)pe[H?ie:++J]=v,v+=R;return pe}function fU(v,x){var R="";if(!v||x<1||x>V)return R;do x%2&&(R+=v),x=o3(x/2),x&&(v+=v);while(x);return R}function Er(v,x){return DU(Qfe(v,x,Zl),v+"")}function uYe(v){return ife(Bx(v))}function lYe(v,x){var R=Bx(v);return x3(R,cw(x,0,R.length))}function eD(v,x,R,H){if(!js(v))return v;x=Zy(x,v);for(var J=-1,ie=x.length,pe=ie-1,Ae=v;Ae!=null&&++J<ie;){var Me=Lp(x[J]),ut=R;if(Me==="__proto__"||Me==="constructor"||Me==="prototype")return v;if(J!=pe){var ft=Ae[Me];ut=H?H(ft,Me,Ae):n,ut===n&&(ut=js(ft)?ft:Fg(x[J+1])?[]:{})}XA(Ae,Me,ut),Ae=Ae[Me]}return v}var Efe=a3?function(v,x){return a3.set(v,x),v}:Zl,cYe=i3?function(v,x){return i3(v,"toString",{configurable:!0,enumerable:!1,value:LU(x),writable:!0})}:Zl;function fYe(v){return x3(Bx(v))}function ed(v,x,R){var H=-1,J=v.length;x<0&&(x=-x>J?0:J+x),R=R>J?J:R,R<0&&(R+=J),J=x>R?0:R-x>>>0,x>>>=0;for(var ie=Ge(J);++H<J;)ie[H]=v[H+x];return ie}function dYe(v,x){var R;return Qy(v,function(H,J,ie){return R=x(H,J,ie),!R}),!!R}function p3(v,x,R){var H=0,J=v==null?H:v.length;if(typeof x=="number"&&x===x&&J<=q){for(;H<J;){var ie=H+J>>>1,pe=v[ie];pe!==null&&!tf(pe)&&(R?pe<=x:pe<x)?H=ie+1:J=ie}return J}return dU(v,x,Zl,R)}function dU(v,x,R,H){var J=0,ie=v==null?0:v.length;if(ie===0)return 0;x=R(x);for(var pe=x!==x,Ae=x===null,Me=tf(x),ut=x===n;J<ie;){var ft=o3((J+ie)/2),bt=R(v[ft]),Ut=bt!==n,an=bt===null,Dn=bt===bt,vr=tf(bt);if(pe)var In=H||Dn;else ut?In=Dn&&(H||Ut):Ae?In=Dn&&Ut&&(H||!an):Me?In=Dn&&Ut&&!an&&(H||!vr):an||vr?In=!1:In=H?bt<=x:bt<x;In?J=ft+1:ie=ft}return wu(ie,K)}function xfe(v,x){for(var R=-1,H=v.length,J=0,ie=[];++R<H;){var pe=v[R],Ae=x?x(pe):pe;if(!R||!hh(Ae,Me)){var Me=Ae;ie[J++]=pe===0?0:pe}}return ie}function Sfe(v){return typeof v=="number"?v:tf(v)?$:+v}function ef(v){if(typeof v=="string")return v;if(rr(v))return Ji(v,ef)+"";if(tf(v))return nfe?nfe.call(v):"";var x=v+"";return x=="0"&&1/v==-z?"-0":x}function Jy(v,x,R){var H=-1,J=iw,ie=v.length,pe=!0,Ae=[],Me=Ae;if(R)pe=!1,J=Gy;else if(ie>=i){var ut=x?null:xYe(v);if(ut)return KO(ut);pe=!1,J=Xf,Me=new lw}else Me=x?[]:Ae;e:for(;++H<ie;){var ft=v[H],bt=x?x(ft):ft;if(ft=R||ft!==0?ft:0,pe&&bt===bt){for(var Ut=Me.length;Ut--;)if(Me[Ut]===bt)continue e;x&&Me.push(bt),Ae.push(ft)}else J(Me,bt,R)||(Me!==Ae&&Me.push(bt),Ae.push(ft))}return Ae}function hU(v,x){return x=Zy(x,v),v=Jfe(v,x),v==null||delete v[Lp(td(x))]}function Tfe(v,x,R,H){return eD(v,x,R(fw(v,x)),H)}function m3(v,x,R,H){for(var J=v.length,ie=H?J:-1;(H?ie--:++ie<J)&&x(v[ie],ie,v););return R?ed(v,H?0:ie,H?ie+1:J):ed(v,H?ie+1:0,H?J:ie)}function Cfe(v,x){var R=v;return R instanceof Pr&&(R=R.value()),ch(x,function(H,J){return J.func.apply(J.thisArg,lh([H],J.args))},R)}function pU(v,x,R){var H=v.length;if(H<2)return H?Jy(v[0]):[];for(var J=-1,ie=Ge(H);++J<H;)for(var pe=v[J],Ae=-1;++Ae<H;)Ae!=J&&(ie[J]=QA(ie[J]||pe,v[Ae],x,R));return Jy(qa(ie,1),x,R)}function Afe(v,x,R){for(var H=-1,J=v.length,ie=x.length,pe={};++H<J;){var Ae=H<ie?x[H]:n;R(pe,v[H],Ae)}return pe}function mU(v){return mo(v)?v:[]}function gU(v){return typeof v=="function"?v:Zl}function Zy(v,x){return rr(v)?v:TU(v,x)?[v]:nde(ki(v))}var hYe=Er;function ev(v,x,R){var H=v.length;return R=R===n?H:R,!x&&R>=H?v:ed(v,x,R)}var Dfe=eGe||function(v){return wn.clearTimeout(v)};function Ife(v,x){if(x)return v.slice();var R=v.length,H=Xce?Xce(R):new v.constructor(R);return v.copy(H),H}function yU(v){var x=new v.constructor(v.byteLength);return new t3(x).set(new t3(v)),x}function pYe(v,x){var R=x?yU(v.buffer):v.buffer;return new v.constructor(R,v.byteOffset,v.byteLength)}function mYe(v){var x=new v.constructor(v.source,ir.exec(v));return x.lastIndex=v.lastIndex,x}function gYe(v){return KA?Zi(KA.call(v)):{}}function kfe(v,x){var R=x?yU(v.buffer):v.buffer;return new v.constructor(R,v.byteOffset,v.length)}function Rfe(v,x){if(v!==x){var R=v!==n,H=v===null,J=v===v,ie=tf(v),pe=x!==n,Ae=x===null,Me=x===x,ut=tf(x);if(!Ae&&!ut&&!ie&&v>x||ie&&pe&&Me&&!Ae&&!ut||H&&pe&&Me||!R&&Me||!J)return 1;if(!H&&!ie&&!ut&&v<x||ut&&R&&J&&!H&&!ie||Ae&&R&&J||!pe&&J||!Me)return-1}return 0}function yYe(v,x,R){for(var H=-1,J=v.criteria,ie=x.criteria,pe=J.length,Ae=R.length;++H<pe;){var Me=Rfe(J[H],ie[H]);if(Me){if(H>=Ae)return Me;var ut=R[H];return Me*(ut=="desc"?-1:1)}}return v.index-x.index}function Nfe(v,x,R,H){for(var J=-1,ie=v.length,pe=R.length,Ae=-1,Me=x.length,ut=Zo(ie-pe,0),ft=Ge(Me+ut),bt=!H;++Ae<Me;)ft[Ae]=x[Ae];for(;++J<pe;)(bt||J<ie)&&(ft[R[J]]=v[J]);for(;ut--;)ft[Ae++]=v[J++];return ft}function Pfe(v,x,R,H){for(var J=-1,ie=v.length,pe=-1,Ae=R.length,Me=-1,ut=x.length,ft=Zo(ie-Ae,0),bt=Ge(ft+ut),Ut=!H;++J<ft;)bt[J]=v[J];for(var an=J;++Me<ut;)bt[an+Me]=x[Me];for(;++pe<Ae;)(Ut||J<ie)&&(bt[an+R[pe]]=v[J++]);return bt}function Xl(v,x){var R=-1,H=v.length;for(x||(x=Ge(H));++R<H;)x[R]=v[R];return x}function Fp(v,x,R,H){var J=!R;R||(R={});for(var ie=-1,pe=x.length;++ie<pe;){var Ae=x[ie],Me=H?H(R[Ae],v[Ae],Ae,R,v):n;Me===n&&(Me=v[Ae]),J?Og(R,Ae,Me):XA(R,Ae,Me)}return R}function vYe(v,x){return Fp(v,SU(v),x)}function bYe(v,x){return Fp(v,Wfe(v),x)}function g3(v,x){return function(R,H){var J=rr(R)?rw:UGe,ie=x?x():{};return J(R,v,Cn(H,2),ie)}}function Mx(v){return Er(function(x,R){var H=-1,J=R.length,ie=J>1?R[J-1]:n,pe=J>2?R[2]:n;for(ie=v.length>3&&typeof ie=="function"?(J--,ie):n,pe&&ll(R[0],R[1],pe)&&(ie=J<3?n:ie,J=1),x=Zi(x);++H<J;){var Ae=R[H];Ae&&v(x,Ae,H,ie)}return x})}function Ofe(v,x){return function(R,H){if(R==null)return R;if(!Ql(R))return v(R,H);for(var J=R.length,ie=x?J:-1,pe=Zi(R);(x?ie--:++ie<J)&&H(pe[ie],ie,pe)!==!1;);return R}}function Mfe(v){return function(x,R,H){for(var J=-1,ie=Zi(x),pe=H(x),Ae=pe.length;Ae--;){var Me=pe[v?Ae:++J];if(R(ie[Me],Me,ie)===!1)break}return x}}function wYe(v,x,R){var H=x&g,J=tD(v);function ie(){var pe=this&&this!==wn&&this instanceof ie?J:v;return pe.apply(H?R:this,arguments)}return ie}function $fe(v){return function(x){x=ki(x);var R=Dx(x)?fh(x):n,H=R?R[0]:x.charAt(0),J=R?ev(R,1).join(""):x.slice(1);return H[v]()+J}}function $x(v){return function(x){return ch(Ode(Pde(x).replace(_x,"")),v,"")}}function tD(v){return function(){var x=arguments;switch(x.length){case 0:return new v;case 1:return new v(x[0]);case 2:return new v(x[0],x[1]);case 3:return new v(x[0],x[1],x[2]);case 4:return new v(x[0],x[1],x[2],x[3]);case 5:return new v(x[0],x[1],x[2],x[3],x[4]);case 6:return new v(x[0],x[1],x[2],x[3],x[4],x[5]);case 7:return new v(x[0],x[1],x[2],x[3],x[4],x[5],x[6])}var R=Ox(v.prototype),H=v.apply(R,x);return js(H)?H:R}}function _Ye(v,x,R){var H=tD(v);function J(){for(var ie=arguments.length,pe=Ge(ie),Ae=ie,Me=Fx(J);Ae--;)pe[Ae]=arguments[Ae];var ut=ie<3&&pe[0]!==Me&&pe[ie-1]!==Me?[]:Ky(pe,Me);if(ie-=ut.length,ie<R)return Ufe(v,x,y3,J.placeholder,n,pe,ut,n,n,R-ie);var ft=this&&this!==wn&&this instanceof J?H:v;return vu(ft,this,pe)}return J}function Ffe(v){return function(x,R,H){var J=Zi(x);if(!Ql(x)){var ie=Cn(R,3);x=wa(x),R=function(Ae){return ie(J[Ae],Ae,J)}}var pe=v(x,R,H);return pe>-1?J[ie?x[pe]:pe]:n}}function Lfe(v){return $g(function(x){var R=x.length,H=R,J=Jf.prototype.thru;for(v&&x.reverse();H--;){var ie=x[H];if(typeof ie!="function")throw new Qf(o);if(J&&!pe&&_3(ie)=="wrapper")var pe=new Jf([],!0)}for(H=pe?H:R;++H<R;){ie=x[H];var Ae=_3(ie),Me=Ae=="wrapper"?EU(ie):n;Me&&CU(Me[0])&&Me[1]==(C|w|E|A)&&!Me[4].length&&Me[9]==1?pe=pe[_3(Me[0])].apply(pe,Me[3]):pe=ie.length==1&&CU(ie)?pe[Ae]():pe.thru(ie)}return function(){var ut=arguments,ft=ut[0];if(pe&&ut.length==1&&rr(ft))return pe.plant(ft).value();for(var bt=0,Ut=R?x[bt].apply(this,ut):ft;++bt<R;)Ut=x[bt].call(this,Ut);return Ut}})}function y3(v,x,R,H,J,ie,pe,Ae,Me,ut){var ft=x&C,bt=x&g,Ut=x&y,an=x&(w|S),Dn=x&I,vr=Ut?n:tD(v);function In(){for(var kr=arguments.length,zr=Ge(kr),nf=kr;nf--;)zr[nf]=arguments[nf];if(an)var cl=Fx(In),rf=HA(zr,cl);if(H&&(zr=Nfe(zr,H,J,an)),ie&&(zr=Pfe(zr,ie,pe,an)),kr-=rf,an&&kr<ut){var go=Ky(zr,cl);return Ufe(v,x,y3,In.placeholder,R,zr,go,Ae,Me,ut-kr)}var ph=bt?R:this,jg=Ut?ph[v]:v;return kr=zr.length,Ae?zr=UYe(zr,Ae):Dn&&kr>1&&zr.reverse(),ft&&Me<kr&&(zr.length=Me),this&&this!==wn&&this instanceof In&&(jg=vr||tD(jg)),jg.apply(ph,zr)}return In}function Bfe(v,x){return function(R,H){return KGe(R,v,x(H),{})}}function v3(v,x){return function(R,H){var J;if(R===n&&H===n)return x;if(R!==n&&(J=R),H!==n){if(J===n)return H;typeof R=="string"||typeof H=="string"?(R=ef(R),H=ef(H)):(R=Sfe(R),H=Sfe(H)),J=v(R,H)}return J}}function vU(v){return $g(function(x){return x=Ji(x,Ii(Cn())),Er(function(R){var H=this;return v(x,function(J){return vu(J,H,R)})})})}function b3(v,x){x=x===n?" ":ef(x);var R=x.length;if(R<2)return R?fU(x,v):x;var H=fU(x,s3(v/Ix(x)));return Dx(x)?ev(fh(H),0,v).join(""):H.slice(0,v)}function EYe(v,x,R,H){var J=x&g,ie=tD(v);function pe(){for(var Ae=-1,Me=arguments.length,ut=-1,ft=H.length,bt=Ge(ft+Me),Ut=this&&this!==wn&&this instanceof pe?ie:v;++ut<ft;)bt[ut]=H[ut];for(;Me--;)bt[ut++]=arguments[++Ae];return vu(Ut,J?R:this,bt)}return pe}function jfe(v){return function(x,R,H){return H&&typeof H!="number"&&ll(x,R,H)&&(R=H=n),x=Bg(x),R===n?(R=x,x=0):R=Bg(R),H=H===n?x<R?1:-1:Bg(H),aYe(x,R,H,v)}}function w3(v){return function(x,R){return typeof x=="string"&&typeof R=="string"||(x=nd(x),R=nd(R)),v(x,R)}}function Ufe(v,x,R,H,J,ie,pe,Ae,Me,ut){var ft=x&w,bt=ft?pe:n,Ut=ft?n:pe,an=ft?ie:n,Dn=ft?n:ie;x|=ft?E:T,x&=~(ft?T:E),x&b||(x&=~(g|y));var vr=[v,x,J,an,bt,Dn,Ut,Ae,Me,ut],In=R.apply(n,vr);return CU(v)&&Zfe(In,vr),In.placeholder=H,ede(In,v,x)}function bU(v){var x=Jo[v];return function(R,H){if(R=nd(R),H=H==null?0:wu(fr(H),292),H&&efe(R)){var J=(ki(R)+"e").split("e"),ie=x(J[0]+"e"+(+J[1]+H));return J=(ki(ie)+"e").split("e"),+(J[0]+"e"+(+J[1]-H))}return x(R)}}var xYe=Nx&&1/KO(new Nx([,-0]))[1]==z?function(v){return new Nx(v)}:UU;function zfe(v){return function(x){var R=_u(x);return R==Ke?K7(x):R==Vt?jWe(x):Qo(x,v(x))}}function Mg(v,x,R,H,J,ie,pe,Ae){var Me=x&y;if(!Me&&typeof v!="function")throw new Qf(o);var ut=H?H.length:0;if(ut||(x&=~(E|T),H=J=n),pe=pe===n?pe:Zo(fr(pe),0),Ae=Ae===n?Ae:fr(Ae),ut-=J?J.length:0,x&T){var ft=H,bt=J;H=J=n}var Ut=Me?n:EU(v),an=[v,x,R,H,J,ft,bt,ie,pe,Ae];if(Ut&&LYe(an,Ut),v=an[0],x=an[1],R=an[2],H=an[3],J=an[4],Ae=an[9]=an[9]===n?Me?0:v.length:Zo(an[9]-ut,0),!Ae&&x&(w|S)&&(x&=~(w|S)),!x||x==g)var Dn=wYe(v,x,R);else x==w||x==S?Dn=_Ye(v,x,Ae):(x==E||x==(g|E))&&!J.length?Dn=EYe(v,x,R,H):Dn=y3.apply(n,an);var vr=Ut?Efe:Zfe;return ede(vr(Dn,an),v,x)}function Vfe(v,x,R,H){return v===n||hh(v,Rx[R])&&!Oi.call(H,R)?x:v}function Hfe(v,x,R,H,J,ie){return js(v)&&js(x)&&(ie.set(x,v),h3(v,x,n,Hfe,ie),ie.delete(x)),v}function SYe(v){return iD(v)?n:v}function qfe(v,x,R,H,J,ie){var pe=R&p,Ae=v.length,Me=x.length;if(Ae!=Me&&!(pe&&Me>Ae))return!1;var ut=ie.get(v),ft=ie.get(x);if(ut&&ft)return ut==x&&ft==v;var bt=-1,Ut=!0,an=R&m?new lw:n;for(ie.set(v,x),ie.set(x,v);++bt<Ae;){var Dn=v[bt],vr=x[bt];if(H)var In=pe?H(vr,Dn,bt,x,v,ie):H(Dn,vr,bt,v,x,ie);if(In!==n){if(In)continue;Ut=!1;break}if(an){if(!Cx(x,function(kr,zr){if(!Xf(an,zr)&&(Dn===kr||J(Dn,kr,R,H,ie)))return an.push(zr)})){Ut=!1;break}}else if(!(Dn===vr||J(Dn,vr,R,H,ie))){Ut=!1;break}}return ie.delete(v),ie.delete(x),Ut}function TYe(v,x,R,H,J,ie,pe){switch(R){case Ee:if(v.byteLength!=x.byteLength||v.byteOffset!=x.byteOffset)return!1;v=v.buffer,x=x.buffer;case he:return!(v.byteLength!=x.byteLength||!ie(new t3(v),new t3(x)));case Se:case we:case Ct:return hh(+v,+x);case Le:return v.name==x.name&&v.message==x.message;case St:case ht:return v==x+"";case Ke:var Ae=K7;case Vt:var Me=H&p;if(Ae||(Ae=KO),v.size!=x.size&&!Me)return!1;var ut=pe.get(v);if(ut)return ut==x;H|=m,pe.set(v,x);var ft=qfe(Ae(v),Ae(x),H,J,ie,pe);return pe.delete(v),ft;case Q:if(KA)return KA.call(v)==KA.call(x)}return!1}function CYe(v,x,R,H,J,ie){var pe=R&p,Ae=wU(v),Me=Ae.length,ut=wU(x),ft=ut.length;if(Me!=ft&&!pe)return!1;for(var bt=Me;bt--;){var Ut=Ae[bt];if(!(pe?Ut in x:Oi.call(x,Ut)))return!1}var an=ie.get(v),Dn=ie.get(x);if(an&&Dn)return an==x&&Dn==v;var vr=!0;ie.set(v,x),ie.set(x,v);for(var In=pe;++bt<Me;){Ut=Ae[bt];var kr=v[Ut],zr=x[Ut];if(H)var nf=pe?H(zr,kr,Ut,x,v,ie):H(kr,zr,Ut,v,x,ie);if(!(nf===n?kr===zr||J(kr,zr,R,H,ie):nf)){vr=!1;break}In||(In=Ut=="constructor")}if(vr&&!In){var cl=v.constructor,rf=x.constructor;cl!=rf&&"constructor"in v&&"constructor"in x&&!(typeof cl=="function"&&cl instanceof cl&&typeof rf=="function"&&rf instanceof rf)&&(vr=!1)}return ie.delete(v),ie.delete(x),vr}function $g(v){return DU(Qfe(v,n,ode),v+"")}function wU(v){return ffe(v,wa,SU)}function _U(v){return ffe(v,Jl,Wfe)}var EU=a3?function(v){return a3.get(v)}:UU;function _3(v){for(var x=v.name+"",R=Px[x],H=Oi.call(Px,x)?R.length:0;H--;){var J=R[H],ie=J.func;if(ie==null||ie==v)return J.name}return x}function Fx(v){var x=Oi.call(ee,"placeholder")?ee:v;return x.placeholder}function Cn(){var v=ee.iteratee||BU;return v=v===BU?pfe:v,arguments.length?v(arguments[0],arguments[1]):v}function E3(v,x){var R=v.__data__;return OYe(x)?R[typeof x=="string"?"string":"hash"]:R.map}function xU(v){for(var x=wa(v),R=x.length;R--;){var H=x[R],J=v[H];x[R]=[H,J,Kfe(J)]}return x}function dw(v,x){var R=FWe(v,x);return hfe(R)?R:n}function AYe(v){var x=Oi.call(v,aw),R=v[aw];try{v[aw]=n;var H=!0}catch{}var J=ZO.call(v);return H&&(x?v[aw]=R:delete v[aw]),J}var SU=Q7?function(v){return v==null?[]:(v=Zi(v),Kf(Q7(v),function(x){return Jce.call(v,x)}))}:zU,Wfe=Q7?function(v){for(var x=[];v;)lh(x,SU(v)),v=n3(v);return x}:zU,_u=ul;(J7&&_u(new J7(new ArrayBuffer(1)))!=Ee||WA&&_u(new WA)!=Ke||Z7&&_u(Z7.resolve())!=He||Nx&&_u(new Nx)!=Vt||GA&&_u(new GA)!=_e)&&(_u=function(v){var x=ul(v),R=x==Re?v.constructor:n,H=R?hw(R):"";if(H)switch(H){case lGe:return Ee;case cGe:return Ke;case fGe:return He;case dGe:return Vt;case hGe:return _e}return x});function DYe(v,x,R){for(var H=-1,J=R.length;++H<J;){var ie=R[H],pe=ie.size;switch(ie.type){case"drop":v+=pe;break;case"dropRight":x-=pe;break;case"take":x=wu(x,v+pe);break;case"takeRight":v=Zo(v,x-pe);break}}return{start:v,end:x}}function IYe(v){var x=v.match(xe);return x?x[1].split(Ve):[]}function Gfe(v,x,R){x=Zy(x,v);for(var H=-1,J=x.length,ie=!1;++H<J;){var pe=Lp(x[H]);if(!(ie=v!=null&&R(v,pe)))break;v=v[pe]}return ie||++H!=J?ie:(J=v==null?0:v.length,!!J&&I3(J)&&Fg(pe,J)&&(rr(v)||pw(v)))}function kYe(v){var x=v.length,R=new v.constructor(x);return x&&typeof v[0]=="string"&&Oi.call(v,"index")&&(R.index=v.index,R.input=v.input),R}function Yfe(v){return typeof v.constructor=="function"&&!nD(v)?Ox(n3(v)):{}}function RYe(v,x,R){var H=v.constructor;switch(x){case he:return yU(v);case Se:case we:return new H(+v);case Ee:return pYe(v,R);case Fe:case je:case ct:case rt:case qt:case en:case Yt:case un:case Sn:return kfe(v,R);case Ke:return new H;case Ct:case ht:return new H(v);case St:return mYe(v);case Vt:return new H;case Q:return gYe(v)}}function NYe(v,x){var R=x.length;if(!R)return v;var H=R-1;return x[H]=(R>1?"& ":"")+x[H],x=x.join(R>2?", ":" "),v.replace(ce,`{
/* [wrapped with `+x+`] */
`)}function PYe(v){return rr(v)||pw(v)||!!(Zce&&v&&v[Zce])}function Fg(v,x){var R=typeof v;return x=x??V,!!x&&(R=="number"||R!="symbol"&&dn.test(v))&&v>-1&&v%1==0&&v<x}function ll(v,x,R){if(!js(R))return!1;var H=typeof x;return(H=="number"?Ql(R)&&Fg(x,R.length):H=="string"&&x in R)?hh(R[x],v):!1}function TU(v,x){if(rr(v))return!1;var R=typeof v;return R=="number"||R=="symbol"||R=="boolean"||v==null||tf(v)?!0:Xi.test(v)||!Kr.test(v)||x!=null&&v in Zi(x)}function OYe(v){var x=typeof v;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?v!=="__proto__":v===null}function CU(v){var x=_3(v),R=ee[x];if(typeof R!="function"||!(x in Pr.prototype))return!1;if(v===R)return!0;var H=EU(R);return!!H&&v===H[0]}function MYe(v){return!!Kce&&Kce in v}var $Ye=QO?Lg:VU;function nD(v){var x=v&&v.constructor,R=typeof x=="function"&&x.prototype||Rx;return v===R}function Kfe(v){return v===v&&!js(v)}function Xfe(v,x){return function(R){return R==null?!1:R[v]===x&&(x!==n||v in Zi(R))}}function FYe(v){var x=A3(v,function(H){return R.size===l&&R.clear(),H}),R=x.cache;return x}function LYe(v,x){var R=v[1],H=x[1],J=R|H,ie=J<(g|y|C),pe=H==C&&R==w||H==C&&R==A&&v[7].length<=x[8]||H==(C|A)&&x[7].length<=x[8]&&R==w;if(!(ie||pe))return v;H&g&&(v[2]=x[2],J|=R&g?0:b);var Ae=x[3];if(Ae){var Me=v[3];v[3]=Me?Nfe(Me,Ae,x[4]):Ae,v[4]=Me?Ky(v[3],c):x[4]}return Ae=x[5],Ae&&(Me=v[5],v[5]=Me?Pfe(Me,Ae,x[6]):Ae,v[6]=Me?Ky(v[5],c):x[6]),Ae=x[7],Ae&&(v[7]=Ae),H&C&&(v[8]=v[8]==null?x[8]:wu(v[8],x[8])),v[9]==null&&(v[9]=x[9]),v[0]=x[0],v[1]=J,v}function BYe(v){var x=[];if(v!=null)for(var R in Zi(v))x.push(R);return x}function jYe(v){return ZO.call(v)}function Qfe(v,x,R){return x=Zo(x===n?v.length-1:x,0),function(){for(var H=arguments,J=-1,ie=Zo(H.length-x,0),pe=Ge(ie);++J<ie;)pe[J]=H[x+J];J=-1;for(var Ae=Ge(x+1);++J<x;)Ae[J]=H[J];return Ae[x]=R(pe),vu(v,this,Ae)}}function Jfe(v,x){return x.length<2?v:fw(v,ed(x,0,-1))}function UYe(v,x){for(var R=v.length,H=wu(x.length,R),J=Xl(v);H--;){var ie=x[H];v[H]=Fg(ie,R)?J[ie]:n}return v}function AU(v,x){if(!(x==="constructor"&&typeof v[x]=="function")&&x!="__proto__")return v[x]}var Zfe=tde(Efe),rD=nGe||function(v,x){return wn.setTimeout(v,x)},DU=tde(cYe);function ede(v,x,R){var H=x+"";return DU(v,NYe(H,zYe(IYe(H),R)))}function tde(v){var x=0,R=0;return function(){var H=oGe(),J=M-(H-R);if(R=H,J>0){if(++x>=F)return arguments[0]}else x=0;return v.apply(n,arguments)}}function x3(v,x){var R=-1,H=v.length,J=H-1;for(x=x===n?H:x;++R<x;){var ie=cU(R,J),pe=v[ie];v[ie]=v[R],v[R]=pe}return v.length=x,v}var nde=FYe(function(v){var x=[];return v.charCodeAt(0)===46&&x.push(""),v.replace(Ai,function(R,H,J,ie){x.push(J?ie.replace(Wt,"$1"):H||R)}),x});function Lp(v){if(typeof v=="string"||tf(v))return v;var x=v+"";return x=="0"&&1/v==-z?"-0":x}function hw(v){if(v!=null){try{return JO.call(v)}catch{}try{return v+""}catch{}}return""}function zYe(v,x){return al(Y,function(R){var H="_."+R[0];x&R[1]&&!iw(v,H)&&v.push(H)}),v.sort()}function rde(v){if(v instanceof Pr)return v.clone();var x=new Jf(v.__wrapped__,v.__chain__);return x.__actions__=Xl(v.__actions__),x.__index__=v.__index__,x.__values__=v.__values__,x}function VYe(v,x,R){(R?ll(v,x,R):x===n)?x=1:x=Zo(fr(x),0);var H=v==null?0:v.length;if(!H||x<1)return[];for(var J=0,ie=0,pe=Ge(s3(H/x));J<H;)pe[ie++]=ed(v,J,J+=x);return pe}function HYe(v){for(var x=-1,R=v==null?0:v.length,H=0,J=[];++x<R;){var ie=v[x];ie&&(J[H++]=ie)}return J}function qYe(){var v=arguments.length;if(!v)return[];for(var x=Ge(v-1),R=arguments[0],H=v;H--;)x[H-1]=arguments[H];return lh(rr(R)?Xl(R):[R],qa(x,1))}var WYe=Er(function(v,x){return mo(v)?QA(v,qa(x,1,mo,!0)):[]}),GYe=Er(function(v,x){var R=td(x);return mo(R)&&(R=n),mo(v)?QA(v,qa(x,1,mo,!0),Cn(R,2)):[]}),YYe=Er(function(v,x){var R=td(x);return mo(R)&&(R=n),mo(v)?QA(v,qa(x,1,mo,!0),n,R):[]});function KYe(v,x,R){var H=v==null?0:v.length;return H?(x=R||x===n?1:fr(x),ed(v,x<0?0:x,H)):[]}function XYe(v,x,R){var H=v==null?0:v.length;return H?(x=R||x===n?1:fr(x),x=H-x,ed(v,0,x<0?0:x)):[]}function QYe(v,x){return v&&v.length?m3(v,Cn(x,3),!0,!0):[]}function JYe(v,x){return v&&v.length?m3(v,Cn(x,3),!0):[]}function ZYe(v,x,R,H){var J=v==null?0:v.length;return J?(R&&typeof R!="number"&&ll(v,x,R)&&(R=0,H=J),qGe(v,x,R,H)):[]}function ide(v,x,R){var H=v==null?0:v.length;if(!H)return-1;var J=R==null?0:fr(R);return J<0&&(J=Zo(H+J,0)),sw(v,Cn(x,3),J)}function sde(v,x,R){var H=v==null?0:v.length;if(!H)return-1;var J=H-1;return R!==n&&(J=fr(R),J=R<0?Zo(H+J,0):wu(J,H-1)),sw(v,Cn(x,3),J,!0)}function ode(v){var x=v==null?0:v.length;return x?qa(v,1):[]}function eKe(v){var x=v==null?0:v.length;return x?qa(v,z):[]}function tKe(v,x){var R=v==null?0:v.length;return R?(x=x===n?1:fr(x),qa(v,x)):[]}function nKe(v){for(var x=-1,R=v==null?0:v.length,H={};++x<R;){var J=v[x];H[J[0]]=J[1]}return H}function ade(v){return v&&v.length?v[0]:n}function rKe(v,x,R){var H=v==null?0:v.length;if(!H)return-1;var J=R==null?0:fr(R);return J<0&&(J=Zo(H+J,0)),Rg(v,x,J)}function iKe(v){var x=v==null?0:v.length;return x?ed(v,0,-1):[]}var sKe=Er(function(v){var x=Ji(v,mU);return x.length&&x[0]===v[0]?sU(x):[]}),oKe=Er(function(v){var x=td(v),R=Ji(v,mU);return x===td(R)?x=n:R.pop(),R.length&&R[0]===v[0]?sU(R,Cn(x,2)):[]}),aKe=Er(function(v){var x=td(v),R=Ji(v,mU);return x=typeof x=="function"?x:n,x&&R.pop(),R.length&&R[0]===v[0]?sU(R,n,x):[]});function uKe(v,x){return v==null?"":iGe.call(v,x)}function td(v){var x=v==null?0:v.length;return x?v[x-1]:n}function lKe(v,x,R){var H=v==null?0:v.length;if(!H)return-1;var J=H;return R!==n&&(J=fr(R),J=J<0?Zo(H+J,0):wu(J,H-1)),x===x?zWe(v,x,J):sw(v,D,J,!0)}function cKe(v,x){return v&&v.length?vfe(v,fr(x)):n}var fKe=Er(ude);function ude(v,x){return v&&v.length&&x&&x.length?lU(v,x):v}function dKe(v,x,R){return v&&v.length&&x&&x.length?lU(v,x,Cn(R,2)):v}function hKe(v,x,R){return v&&v.length&&x&&x.length?lU(v,x,n,R):v}var pKe=$g(function(v,x){var R=v==null?0:v.length,H=tU(v,x);return _fe(v,Ji(x,function(J){return Fg(J,R)?+J:J}).sort(Rfe)),H});function mKe(v,x){var R=[];if(!(v&&v.length))return R;var H=-1,J=[],ie=v.length;for(x=Cn(x,3);++H<ie;){var pe=v[H];x(pe,H,v)&&(R.push(pe),J.push(H))}return _fe(v,J),R}function IU(v){return v==null?v:uGe.call(v)}function gKe(v,x,R){var H=v==null?0:v.length;return H?(R&&typeof R!="number"&&ll(v,x,R)?(x=0,R=H):(x=x==null?0:fr(x),R=R===n?H:fr(R)),ed(v,x,R)):[]}function yKe(v,x){return p3(v,x)}function vKe(v,x,R){return dU(v,x,Cn(R,2))}function bKe(v,x){var R=v==null?0:v.length;if(R){var H=p3(v,x);if(H<R&&hh(v[H],x))return H}return-1}function wKe(v,x){return p3(v,x,!0)}function _Ke(v,x,R){return dU(v,x,Cn(R,2),!0)}function EKe(v,x){var R=v==null?0:v.length;if(R){var H=p3(v,x,!0)-1;if(hh(v[H],x))return H}return-1}function xKe(v){return v&&v.length?xfe(v):[]}function SKe(v,x){return v&&v.length?xfe(v,Cn(x,2)):[]}function TKe(v){var x=v==null?0:v.length;return x?ed(v,1,x):[]}function CKe(v,x,R){return v&&v.length?(x=R||x===n?1:fr(x),ed(v,0,x<0?0:x)):[]}function AKe(v,x,R){var H=v==null?0:v.length;return H?(x=R||x===n?1:fr(x),x=H-x,ed(v,x<0?0:x,H)):[]}function DKe(v,x){return v&&v.length?m3(v,Cn(x,3),!1,!0):[]}function IKe(v,x){return v&&v.length?m3(v,Cn(x,3)):[]}var kKe=Er(function(v){return Jy(qa(v,1,mo,!0))}),RKe=Er(function(v){var x=td(v);return mo(x)&&(x=n),Jy(qa(v,1,mo,!0),Cn(x,2))}),NKe=Er(function(v){var x=td(v);return x=typeof x=="function"?x:n,Jy(qa(v,1,mo,!0),n,x)});function PKe(v){return v&&v.length?Jy(v):[]}function OKe(v,x){return v&&v.length?Jy(v,Cn(x,2)):[]}function MKe(v,x){return x=typeof x=="function"?x:n,v&&v.length?Jy(v,n,x):[]}function kU(v){if(!(v&&v.length))return[];var x=0;return v=Kf(v,function(R){if(mo(R))return x=Zo(R.length,x),!0}),bi(x,function(R){return Ji(v,X(R))})}function lde(v,x){if(!(v&&v.length))return[];var R=kU(v);return x==null?R:Ji(R,function(H){return vu(x,n,H)})}var $Ke=Er(function(v,x){return mo(v)?QA(v,x):[]}),FKe=Er(function(v){return pU(Kf(v,mo))}),LKe=Er(function(v){var x=td(v);return mo(x)&&(x=n),pU(Kf(v,mo),Cn(x,2))}),BKe=Er(function(v){var x=td(v);return x=typeof x=="function"?x:n,pU(Kf(v,mo),n,x)}),jKe=Er(kU);function UKe(v,x){return Afe(v||[],x||[],XA)}function zKe(v,x){return Afe(v||[],x||[],eD)}var VKe=Er(function(v){var x=v.length,R=x>1?v[x-1]:n;return R=typeof R=="function"?(v.pop(),R):n,lde(v,R)});function cde(v){var x=ee(v);return x.__chain__=!0,x}function HKe(v,x){return x(v),v}function S3(v,x){return x(v)}var qKe=$g(function(v){var x=v.length,R=x?v[0]:0,H=this.__wrapped__,J=function(ie){return tU(ie,v)};return x>1||this.__actions__.length||!(H instanceof Pr)||!Fg(R)?this.thru(J):(H=H.slice(R,+R+(x?1:0)),H.__actions__.push({func:S3,args:[J],thisArg:n}),new Jf(H,this.__chain__).thru(function(ie){return x&&!ie.length&&ie.push(n),ie}))});function WKe(){return cde(this)}function GKe(){return new Jf(this.value(),this.__chain__)}function YKe(){this.__values__===n&&(this.__values__=Sde(this.value()));var v=this.__index__>=this.__values__.length,x=v?n:this.__values__[this.__index__++];return{done:v,value:x}}function KKe(){return this}function XKe(v){for(var x,R=this;R instanceof l3;){var H=rde(R);H.__index__=0,H.__values__=n,x?J.__wrapped__=H:x=H;var J=H;R=R.__wrapped__}return J.__wrapped__=v,x}function QKe(){var v=this.__wrapped__;if(v instanceof Pr){var x=v;return this.__actions__.length&&(x=new Pr(this)),x=x.reverse(),x.__actions__.push({func:S3,args:[IU],thisArg:n}),new Jf(x,this.__chain__)}return this.thru(IU)}function JKe(){return Cfe(this.__wrapped__,this.__actions__)}var ZKe=g3(function(v,x,R){Oi.call(v,R)?++v[R]:Og(v,R,1)});function eXe(v,x,R){var H=rr(v)?Tx:HGe;return R&&ll(v,x,R)&&(x=n),H(v,Cn(x,3))}function tXe(v,x){var R=rr(v)?Kf:lfe;return R(v,Cn(x,3))}var nXe=Ffe(ide),rXe=Ffe(sde);function iXe(v,x){return qa(T3(v,x),1)}function sXe(v,x){return qa(T3(v,x),z)}function oXe(v,x,R){return R=R===n?1:fr(R),qa(T3(v,x),R)}function fde(v,x){var R=rr(v)?al:Qy;return R(v,Cn(x,3))}function dde(v,x){var R=rr(v)?qO:ufe;return R(v,Cn(x,3))}var aXe=g3(function(v,x,R){Oi.call(v,R)?v[R].push(x):Og(v,R,[x])});function uXe(v,x,R,H){v=Ql(v)?v:Bx(v),R=R&&!H?fr(R):0;var J=v.length;return R<0&&(R=Zo(J+R,0)),k3(v)?R<=J&&v.indexOf(x,R)>-1:!!J&&Rg(v,x,R)>-1}var lXe=Er(function(v,x,R){var H=-1,J=typeof x=="function",ie=Ql(v)?Ge(v.length):[];return Qy(v,function(pe){ie[++H]=J?vu(x,pe,R):JA(pe,x,R)}),ie}),cXe=g3(function(v,x,R){Og(v,R,x)});function T3(v,x){var R=rr(v)?Ji:mfe;return R(v,Cn(x,3))}function fXe(v,x,R,H){return v==null?[]:(rr(x)||(x=x==null?[]:[x]),R=H?n:R,rr(R)||(R=R==null?[]:[R]),bfe(v,x,R))}var dXe=g3(function(v,x,R){v[R?0:1].push(x)},function(){return[[],[]]});function hXe(v,x,R){var H=rr(v)?ch:$e,J=arguments.length<3;return H(v,Cn(x,4),R,J,Qy)}function pXe(v,x,R){var H=rr(v)?WO:$e,J=arguments.length<3;return H(v,Cn(x,4),R,J,ufe)}function mXe(v,x){var R=rr(v)?Kf:lfe;return R(v,D3(Cn(x,3)))}function gXe(v){var x=rr(v)?ife:uYe;return x(v)}function yXe(v,x,R){(R?ll(v,x,R):x===n)?x=1:x=fr(x);var H=rr(v)?BGe:lYe;return H(v,x)}function vXe(v){var x=rr(v)?jGe:fYe;return x(v)}function bXe(v){if(v==null)return 0;if(Ql(v))return k3(v)?Ix(v):v.length;var x=_u(v);return x==Ke||x==Vt?v.size:aU(v).length}function wXe(v,x,R){var H=rr(v)?Cx:dYe;return R&&ll(v,x,R)&&(x=n),H(v,Cn(x,3))}var _Xe=Er(function(v,x){if(v==null)return[];var R=x.length;return R>1&&ll(v,x[0],x[1])?x=[]:R>2&&ll(x[0],x[1],x[2])&&(x=[x[0]]),bfe(v,qa(x,1),[])}),C3=tGe||function(){return wn.Date.now()};function EXe(v,x){if(typeof x!="function")throw new Qf(o);return v=fr(v),function(){if(--v<1)return x.apply(this,arguments)}}function hde(v,x,R){return x=R?n:x,x=v&&x==null?v.length:x,Mg(v,C,n,n,n,n,x)}function pde(v,x){var R;if(typeof x!="function")throw new Qf(o);return v=fr(v),function(){return--v>0&&(R=x.apply(this,arguments)),v<=1&&(x=n),R}}var RU=Er(function(v,x,R){var H=g;if(R.length){var J=Ky(R,Fx(RU));H|=E}return Mg(v,H,x,R,J)}),mde=Er(function(v,x,R){var H=g|y;if(R.length){var J=Ky(R,Fx(mde));H|=E}return Mg(x,H,v,R,J)});function gde(v,x,R){x=R?n:x;var H=Mg(v,w,n,n,n,n,n,x);return H.placeholder=gde.placeholder,H}function yde(v,x,R){x=R?n:x;var H=Mg(v,S,n,n,n,n,n,x);return H.placeholder=yde.placeholder,H}function vde(v,x,R){var H,J,ie,pe,Ae,Me,ut=0,ft=!1,bt=!1,Ut=!0;if(typeof v!="function")throw new Qf(o);x=nd(x)||0,js(R)&&(ft=!!R.leading,bt="maxWait"in R,ie=bt?Zo(nd(R.maxWait)||0,x):ie,Ut="trailing"in R?!!R.trailing:Ut);function an(go){var ph=H,jg=J;return H=J=n,ut=go,pe=v.apply(jg,ph),pe}function Dn(go){return ut=go,Ae=rD(kr,x),ft?an(go):pe}function vr(go){var ph=go-Me,jg=go-ut,Fde=x-ph;return bt?wu(Fde,ie-jg):Fde}function In(go){var ph=go-Me,jg=go-ut;return Me===n||ph>=x||ph<0||bt&&jg>=ie}function kr(){var go=C3();if(In(go))return zr(go);Ae=rD(kr,vr(go))}function zr(go){return Ae=n,Ut&&H?an(go):(H=J=n,pe)}function nf(){Ae!==n&&Dfe(Ae),ut=0,H=Me=J=Ae=n}function cl(){return Ae===n?pe:zr(C3())}function rf(){var go=C3(),ph=In(go);if(H=arguments,J=this,Me=go,ph){if(Ae===n)return Dn(Me);if(bt)return Dfe(Ae),Ae=rD(kr,x),an(Me)}return Ae===n&&(Ae=rD(kr,x)),pe}return rf.cancel=nf,rf.flush=cl,rf}var xXe=Er(function(v,x){return afe(v,1,x)}),SXe=Er(function(v,x,R){return afe(v,nd(x)||0,R)});function TXe(v){return Mg(v,I)}function A3(v,x){if(typeof v!="function"||x!=null&&typeof x!="function")throw new Qf(o);var R=function(){var H=arguments,J=x?x.apply(this,H):H[0],ie=R.cache;if(ie.has(J))return ie.get(J);var pe=v.apply(this,H);return R.cache=ie.set(J,pe)||ie,pe};return R.cache=new(A3.Cache||Pg),R}A3.Cache=Pg;function D3(v){if(typeof v!="function")throw new Qf(o);return function(){var x=arguments;switch(x.length){case 0:return!v.call(this);case 1:return!v.call(this,x[0]);case 2:return!v.call(this,x[0],x[1]);case 3:return!v.call(this,x[0],x[1],x[2])}return!v.apply(this,x)}}function CXe(v){return pde(2,v)}var AXe=hYe(function(v,x){x=x.length==1&&rr(x[0])?Ji(x[0],Ii(Cn())):Ji(qa(x,1),Ii(Cn()));var R=x.length;return Er(function(H){for(var J=-1,ie=wu(H.length,R);++J<ie;)H[J]=x[J].call(this,H[J]);return vu(v,this,H)})}),NU=Er(function(v,x){var R=Ky(x,Fx(NU));return Mg(v,E,n,x,R)}),bde=Er(function(v,x){var R=Ky(x,Fx(bde));return Mg(v,T,n,x,R)}),DXe=$g(function(v,x){return Mg(v,A,n,n,n,x)});function IXe(v,x){if(typeof v!="function")throw new Qf(o);return x=x===n?x:fr(x),Er(v,x)}function kXe(v,x){if(typeof v!="function")throw new Qf(o);return x=x==null?0:Zo(fr(x),0),Er(function(R){var H=R[x],J=ev(R,0,x);return H&&lh(J,H),vu(v,this,J)})}function RXe(v,x,R){var H=!0,J=!0;if(typeof v!="function")throw new Qf(o);return js(R)&&(H="leading"in R?!!R.leading:H,J="trailing"in R?!!R.trailing:J),vde(v,x,{leading:H,maxWait:x,trailing:J})}function NXe(v){return hde(v,1)}function PXe(v,x){return NU(gU(x),v)}function OXe(){if(!arguments.length)return[];var v=arguments[0];return rr(v)?v:[v]}function MXe(v){return Zf(v,h)}function $Xe(v,x){return x=typeof x=="function"?x:n,Zf(v,h,x)}function FXe(v){return Zf(v,f|h)}function LXe(v,x){return x=typeof x=="function"?x:n,Zf(v,f|h,x)}function BXe(v,x){return x==null||ofe(v,x,wa(x))}function hh(v,x){return v===x||v!==v&&x!==x}var jXe=w3(iU),UXe=w3(function(v,x){return v>=x}),pw=dfe(function(){return arguments}())?dfe:function(v){return Qs(v)&&Oi.call(v,"callee")&&!Jce.call(v,"callee")},rr=Ge.isArray,zXe=Ig?Ii(Ig):XGe;function Ql(v){return v!=null&&I3(v.length)&&!Lg(v)}function mo(v){return Qs(v)&&Ql(v)}function VXe(v){return v===!0||v===!1||Qs(v)&&ul(v)==Se}var tv=rGe||VU,HXe=kg?Ii(kg):QGe;function qXe(v){return Qs(v)&&v.nodeType===1&&!iD(v)}function WXe(v){if(v==null)return!0;if(Ql(v)&&(rr(v)||typeof v=="string"||typeof v.splice=="function"||tv(v)||Lx(v)||pw(v)))return!v.length;var x=_u(v);if(x==Ke||x==Vt)return!v.size;if(nD(v))return!aU(v).length;for(var R in v)if(Oi.call(v,R))return!1;return!0}function GXe(v,x){return ZA(v,x)}function YXe(v,x,R){R=typeof R=="function"?R:n;var H=R?R(v,x):n;return H===n?ZA(v,x,n,R):!!H}function PU(v){if(!Qs(v))return!1;var x=ul(v);return x==Le||x==Ce||typeof v.message=="string"&&typeof v.name=="string"&&!iD(v)}function KXe(v){return typeof v=="number"&&efe(v)}function Lg(v){if(!js(v))return!1;var x=ul(v);return x==ke||x==Ze||x==be||x==lt}function wde(v){return typeof v=="number"&&v==fr(v)}function I3(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=V}function js(v){var x=typeof v;return v!=null&&(x=="object"||x=="function")}function Qs(v){return v!=null&&typeof v=="object"}var _de=tw?Ii(tw):ZGe;function XXe(v,x){return v===x||oU(v,x,xU(x))}function QXe(v,x,R){return R=typeof R=="function"?R:n,oU(v,x,xU(x),R)}function JXe(v){return Ede(v)&&v!=+v}function ZXe(v){if($Ye(v))throw new er(s);return hfe(v)}function eQe(v){return v===null}function tQe(v){return v==null}function Ede(v){return typeof v=="number"||Qs(v)&&ul(v)==Ct}function iD(v){if(!Qs(v)||ul(v)!=Re)return!1;var x=n3(v);if(x===null)return!0;var R=Oi.call(x,"constructor")&&x.constructor;return typeof R=="function"&&R instanceof R&&JO.call(R)==QWe}var OU=VA?Ii(VA):eYe;function nQe(v){return wde(v)&&v>=-V&&v<=V}var xde=nw?Ii(nw):tYe;function k3(v){return typeof v=="string"||!rr(v)&&Qs(v)&&ul(v)==ht}function tf(v){return typeof v=="symbol"||Qs(v)&&ul(v)==Q}var Lx=HO?Ii(HO):nYe;function rQe(v){return v===n}function iQe(v){return Qs(v)&&_u(v)==_e}function sQe(v){return Qs(v)&&ul(v)==oe}var oQe=w3(uU),aQe=w3(function(v,x){return v<=x});function Sde(v){if(!v)return[];if(Ql(v))return k3(v)?fh(v):Xl(v);if(qA&&v[qA])return BWe(v[qA]());var x=_u(v),R=x==Ke?K7:x==Vt?KO:Bx;return R(v)}function Bg(v){if(!v)return v===0?v:0;if(v=nd(v),v===z||v===-z){var x=v<0?-1:1;return x*G}return v===v?v:0}function fr(v){var x=Bg(v),R=x%1;return x===x?R?x-R:x:0}function Tde(v){return v?cw(fr(v),0,W):0}function nd(v){if(typeof v=="number")return v;if(tf(v))return $;if(js(v)){var x=typeof v.valueOf=="function"?v.valueOf():v;v=js(x)?x+"":x}if(typeof v!="string")return v===0?v:+v;v=Ur(v);var R=Un.test(v);return R||ni.test(v)?_r(v.slice(2),R?2:8):gr.test(v)?$:+v}function Cde(v){return Fp(v,Jl(v))}function uQe(v){return v?cw(fr(v),-V,V):v===0?v:0}function ki(v){return v==null?"":ef(v)}var lQe=Mx(function(v,x){if(nD(x)||Ql(x)){Fp(x,wa(x),v);return}for(var R in x)Oi.call(x,R)&&XA(v,R,x[R])}),Ade=Mx(function(v,x){Fp(x,Jl(x),v)}),R3=Mx(function(v,x,R,H){Fp(x,Jl(x),v,H)}),cQe=Mx(function(v,x,R,H){Fp(x,wa(x),v,H)}),fQe=$g(tU);function dQe(v,x){var R=Ox(v);return x==null?R:sfe(R,x)}var hQe=Er(function(v,x){v=Zi(v);var R=-1,H=x.length,J=H>2?x[2]:n;for(J&&ll(x[0],x[1],J)&&(H=1);++R<H;)for(var ie=x[R],pe=Jl(ie),Ae=-1,Me=pe.length;++Ae<Me;){var ut=pe[Ae],ft=v[ut];(ft===n||hh(ft,Rx[ut])&&!Oi.call(v,ut))&&(v[ut]=ie[ut])}return v}),pQe=Er(function(v){return v.push(n,Hfe),vu(Dde,n,v)});function mQe(v,x){return bu(v,Cn(x,3),$p)}function gQe(v,x){return bu(v,Cn(x,3),rU)}function yQe(v,x){return v==null?v:nU(v,Cn(x,3),Jl)}function vQe(v,x){return v==null?v:cfe(v,Cn(x,3),Jl)}function bQe(v,x){return v&&$p(v,Cn(x,3))}function wQe(v,x){return v&&rU(v,Cn(x,3))}function _Qe(v){return v==null?[]:d3(v,wa(v))}function EQe(v){return v==null?[]:d3(v,Jl(v))}function MU(v,x,R){var H=v==null?n:fw(v,x);return H===n?R:H}function xQe(v,x){return v!=null&&Gfe(v,x,WGe)}function $U(v,x){return v!=null&&Gfe(v,x,GGe)}var SQe=Bfe(function(v,x,R){x!=null&&typeof x.toString!="function"&&(x=ZO.call(x)),v[x]=R},LU(Zl)),TQe=Bfe(function(v,x,R){x!=null&&typeof x.toString!="function"&&(x=ZO.call(x)),Oi.call(v,x)?v[x].push(R):v[x]=[R]},Cn),CQe=Er(JA);function wa(v){return Ql(v)?rfe(v):aU(v)}function Jl(v){return Ql(v)?rfe(v,!0):rYe(v)}function AQe(v,x){var R={};return x=Cn(x,3),$p(v,function(H,J,ie){Og(R,x(H,J,ie),H)}),R}function DQe(v,x){var R={};return x=Cn(x,3),$p(v,function(H,J,ie){Og(R,J,x(H,J,ie))}),R}var IQe=Mx(function(v,x,R){h3(v,x,R)}),Dde=Mx(function(v,x,R,H){h3(v,x,R,H)}),kQe=$g(function(v,x){var R={};if(v==null)return R;var H=!1;x=Ji(x,function(ie){return ie=Zy(ie,v),H||(H=ie.length>1),ie}),Fp(v,_U(v),R),H&&(R=Zf(R,f|d|h,SYe));for(var J=x.length;J--;)hU(R,x[J]);return R});function RQe(v,x){return Ide(v,D3(Cn(x)))}var NQe=$g(function(v,x){return v==null?{}:sYe(v,x)});function Ide(v,x){if(v==null)return{};var R=Ji(_U(v),function(H){return[H]});return x=Cn(x),wfe(v,R,function(H,J){return x(H,J[0])})}function PQe(v,x,R){x=Zy(x,v);var H=-1,J=x.length;for(J||(J=1,v=n);++H<J;){var ie=v==null?n:v[Lp(x[H])];ie===n&&(H=J,ie=R),v=Lg(ie)?ie.call(v):ie}return v}function OQe(v,x,R){return v==null?v:eD(v,x,R)}function MQe(v,x,R,H){return H=typeof H=="function"?H:n,v==null?v:eD(v,x,R,H)}var kde=zfe(wa),Rde=zfe(Jl);function $Qe(v,x,R){var H=rr(v),J=H||tv(v)||Lx(v);if(x=Cn(x,4),R==null){var ie=v&&v.constructor;J?R=H?new ie:[]:js(v)?R=Lg(ie)?Ox(n3(v)):{}:R={}}return(J?al:$p)(v,function(pe,Ae,Me){return x(R,pe,Ae,Me)}),R}function FQe(v,x){return v==null?!0:hU(v,x)}function LQe(v,x,R){return v==null?v:Tfe(v,x,gU(R))}function BQe(v,x,R,H){return H=typeof H=="function"?H:n,v==null?v:Tfe(v,x,gU(R),H)}function Bx(v){return v==null?[]:Oo(v,wa(v))}function jQe(v){return v==null?[]:Oo(v,Jl(v))}function UQe(v,x,R){return R===n&&(R=x,x=n),R!==n&&(R=nd(R),R=R===R?R:0),x!==n&&(x=nd(x),x=x===x?x:0),cw(nd(v),x,R)}function zQe(v,x,R){return x=Bg(x),R===n?(R=x,x=0):R=Bg(R),v=nd(v),YGe(v,x,R)}function VQe(v,x,R){if(R&&typeof R!="boolean"&&ll(v,x,R)&&(x=R=n),R===n&&(typeof x=="boolean"?(R=x,x=n):typeof v=="boolean"&&(R=v,v=n)),v===n&&x===n?(v=0,x=1):(v=Bg(v),x===n?(x=v,v=0):x=Bg(x)),v>x){var H=v;v=x,x=H}if(R||v%1||x%1){var J=tfe();return wu(v+J*(x-v+Jt("1e-"+((J+"").length-1))),x)}return cU(v,x)}var HQe=$x(function(v,x,R){return x=x.toLowerCase(),v+(R?Nde(x):x)});function Nde(v){return FU(ki(v).toLowerCase())}function Pde(v){return v=ki(v),v&&v.replace(Ir,OWe).replace(ah,"")}function qQe(v,x,R){v=ki(v),x=ef(x);var H=v.length;R=R===n?H:cw(fr(R),0,H);var J=R;return R-=x.length,R>=0&&v.slice(R,J)==x}function WQe(v){return v=ki(v),v&&Es.test(v)?v.replace(Ki,MWe):v}function GQe(v){return v=ki(v),v&&Go.test(v)?v.replace(No,"\\$&"):v}var YQe=$x(function(v,x,R){return v+(R?"-":"")+x.toLowerCase()}),KQe=$x(function(v,x,R){return v+(R?" ":"")+x.toLowerCase()}),XQe=$fe("toLowerCase");function QQe(v,x,R){v=ki(v),x=fr(x);var H=x?Ix(v):0;if(!x||H>=x)return v;var J=(x-H)/2;return b3(o3(J),R)+v+b3(s3(J),R)}function JQe(v,x,R){v=ki(v),x=fr(x);var H=x?Ix(v):0;return x&&H<x?v+b3(x-H,R):v}function ZQe(v,x,R){v=ki(v),x=fr(x);var H=x?Ix(v):0;return x&&H<x?b3(x-H,R)+v:v}function eJe(v,x,R){return R||x==null?x=0:x&&(x=+x),aGe(ki(v).replace(po,""),x||0)}function tJe(v,x,R){return(R?ll(v,x,R):x===n)?x=1:x=fr(x),fU(ki(v),x)}function nJe(){var v=arguments,x=ki(v[0]);return v.length<3?x:x.replace(v[1],v[2])}var rJe=$x(function(v,x,R){return v+(R?"_":"")+x.toLowerCase()});function iJe(v,x,R){return R&&typeof R!="number"&&ll(v,x,R)&&(x=R=n),R=R===n?W:R>>>0,R?(v=ki(v),v&&(typeof x=="string"||x!=null&&!OU(x))&&(x=ef(x),!x&&Dx(v))?ev(fh(v),0,R):v.split(x,R)):[]}var sJe=$x(function(v,x,R){return v+(R?" ":"")+FU(x)});function oJe(v,x,R){return v=ki(v),R=R==null?0:cw(fr(R),0,v.length),x=ef(x),v.slice(R,R+x.length)==x}function aJe(v,x,R){var H=ee.templateSettings;R&&ll(v,x,R)&&(x=n),v=ki(v),x=R3({},x,H,Vfe);var J=R3({},x.imports,H.imports,Vfe),ie=wa(J),pe=Oo(J,ie),Ae,Me,ut=0,ft=x.interpolate||Xr,bt="__p += '",Ut=X7((x.escape||Xr).source+"|"+ft.source+"|"+(ft===sl?bn:Xr).source+"|"+(x.evaluate||Xr).source+"|$","g"),an="//# sourceURL="+(Oi.call(x,"sourceURL")?(x.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++xx+"]")+`
`;v.replace(Ut,function(In,kr,zr,nf,cl,rf){return zr||(zr=nf),bt+=v.slice(ut,rf).replace(sr,$We),kr&&(Ae=!0,bt+=`' +
__e(`+kr+`) +
'`),cl&&(Me=!0,bt+=`';
`+cl+`;
__p += '`),zr&&(bt+=`' +
((__t = (`+zr+`)) == null ? '' : __t) +
'`),ut=rf+In.length,In}),bt+=`';
`;var Dn=Oi.call(x,"variable")&&x.variable;if(!Dn)bt=`with (obj) {
`+bt+`
}
`;else if(Dt.test(Dn))throw new er(a);bt=(Me?bt.replace(Bn,""):bt).replace(Ci,"$1").replace(gi,"$1;"),bt="function("+(Dn||"obj")+`) {
`+(Dn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ae?", __e = _.escape":"")+(Me?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+bt+`return __p
}`;var vr=Mde(function(){return wi(ie,an+"return "+bt).apply(n,pe)});if(vr.source=bt,PU(vr))throw vr;return vr}function uJe(v){return ki(v).toLowerCase()}function lJe(v){return ki(v).toUpperCase()}function cJe(v,x,R){if(v=ki(v),v&&(R||x===n))return Ur(v);if(!v||!(x=ef(x)))return v;var H=fh(v),J=fh(x),ie=Kl(H,J),pe=ow(H,J)+1;return ev(H,ie,pe).join("")}function fJe(v,x,R){if(v=ki(v),v&&(R||x===n))return v.slice(0,Yce(v)+1);if(!v||!(x=ef(x)))return v;var H=fh(v),J=ow(H,fh(x))+1;return ev(H,0,J).join("")}function dJe(v,x,R){if(v=ki(v),v&&(R||x===n))return v.replace(po,"");if(!v||!(x=ef(x)))return v;var H=fh(v),J=Kl(H,fh(x));return ev(H,J).join("")}function hJe(v,x){var R=k,H=N;if(js(x)){var J="separator"in x?x.separator:J;R="length"in x?fr(x.length):R,H="omission"in x?ef(x.omission):H}v=ki(v);var ie=v.length;if(Dx(v)){var pe=fh(v);ie=pe.length}if(R>=ie)return v;var Ae=R-Ix(H);if(Ae<1)return H;var Me=pe?ev(pe,0,Ae).join(""):v.slice(0,Ae);if(J===n)return Me+H;if(pe&&(Ae+=Me.length-Ae),OU(J)){if(v.slice(Ae).search(J)){var ut,ft=Me;for(J.global||(J=X7(J.source,ki(ir.exec(J))+"g")),J.lastIndex=0;ut=J.exec(ft);)var bt=ut.index;Me=Me.slice(0,bt===n?Ae:bt)}}else if(v.indexOf(ef(J),Ae)!=Ae){var Ut=Me.lastIndexOf(J);Ut>-1&&(Me=Me.slice(0,Ut))}return Me+H}function pJe(v){return v=ki(v),v&&ti.test(v)?v.replace(jn,VWe):v}var mJe=$x(function(v,x,R){return v+(R?" ":"")+x.toUpperCase()}),FU=$fe("toUpperCase");function Ode(v,x,R){return v=ki(v),x=R?n:x,x===n?LWe(v)?WWe(v):Ax(v):v.match(x)||[]}var Mde=Er(function(v,x){try{return vu(v,n,x)}catch(R){return PU(R)?R:new er(R)}}),gJe=$g(function(v,x){return al(x,function(R){R=Lp(R),Og(v,R,RU(v[R],v))}),v});function yJe(v){var x=v==null?0:v.length,R=Cn();return v=x?Ji(v,function(H){if(typeof H[1]!="function")throw new Qf(o);return[R(H[0]),H[1]]}):[],Er(function(H){for(var J=-1;++J<x;){var ie=v[J];if(vu(ie[0],this,H))return vu(ie[1],this,H)}})}function vJe(v){return VGe(Zf(v,f))}function LU(v){return function(){return v}}function bJe(v,x){return v==null||v!==v?x:v}var wJe=Lfe(),_Je=Lfe(!0);function Zl(v){return v}function BU(v){return pfe(typeof v=="function"?v:Zf(v,f))}function EJe(v){return gfe(Zf(v,f))}function xJe(v,x){return yfe(v,Zf(x,f))}var SJe=Er(function(v,x){return function(R){return JA(R,v,x)}}),TJe=Er(function(v,x){return function(R){return JA(v,R,x)}});function jU(v,x,R){var H=wa(x),J=d3(x,H);R==null&&!(js(x)&&(J.length||!H.length))&&(R=x,x=v,v=this,J=d3(x,wa(x)));var ie=!(js(R)&&"chain"in R)||!!R.chain,pe=Lg(v);return al(J,function(Ae){var Me=x[Ae];v[Ae]=Me,pe&&(v.prototype[Ae]=function(){var ut=this.__chain__;if(ie||ut){var ft=v(this.__wrapped__),bt=ft.__actions__=Xl(this.__actions__);return bt.push({func:Me,args:arguments,thisArg:v}),ft.__chain__=ut,ft}return Me.apply(v,lh([this.value()],arguments))})}),v}function CJe(){return wn._===this&&(wn._=JWe),this}function UU(){}function AJe(v){return v=fr(v),Er(function(x){return vfe(x,v)})}var DJe=vU(Ji),IJe=vU(Tx),kJe=vU(Cx);function $de(v){return TU(v)?X(Lp(v)):oYe(v)}function RJe(v){return function(x){return v==null?n:fw(v,x)}}var NJe=jfe(),PJe=jfe(!0);function zU(){return[]}function VU(){return!1}function OJe(){return{}}function MJe(){return""}function $Je(){return!0}function FJe(v,x){if(v=fr(v),v<1||v>V)return[];var R=W,H=wu(v,W);x=Cn(x),v-=W;for(var J=bi(H,x);++R<v;)x(R);return J}function LJe(v){return rr(v)?Ji(v,Lp):tf(v)?[v]:Xl(nde(ki(v)))}function BJe(v){var x=++XWe;return ki(v)+x}var jJe=v3(function(v,x){return v+x},0),UJe=bU("ceil"),zJe=v3(function(v,x){return v/x},1),VJe=bU("floor");function HJe(v){return v&&v.length?f3(v,Zl,iU):n}function qJe(v,x){return v&&v.length?f3(v,Cn(x,2),iU):n}function WJe(v){return U(v,Zl)}function GJe(v,x){return U(v,Cn(x,2))}function YJe(v){return v&&v.length?f3(v,Zl,uU):n}function KJe(v,x){return v&&v.length?f3(v,Cn(x,2),uU):n}var XJe=v3(function(v,x){return v*x},1),QJe=bU("round"),JJe=v3(function(v,x){return v-x},0);function ZJe(v){return v&&v.length?Mt(v,Zl):0}function eZe(v,x){return v&&v.length?Mt(v,Cn(x,2)):0}return ee.after=EXe,ee.ary=hde,ee.assign=lQe,ee.assignIn=Ade,ee.assignInWith=R3,ee.assignWith=cQe,ee.at=fQe,ee.before=pde,ee.bind=RU,ee.bindAll=gJe,ee.bindKey=mde,ee.castArray=OXe,ee.chain=cde,ee.chunk=VYe,ee.compact=HYe,ee.concat=qYe,ee.cond=yJe,ee.conforms=vJe,ee.constant=LU,ee.countBy=ZKe,ee.create=dQe,ee.curry=gde,ee.curryRight=yde,ee.debounce=vde,ee.defaults=hQe,ee.defaultsDeep=pQe,ee.defer=xXe,ee.delay=SXe,ee.difference=WYe,ee.differenceBy=GYe,ee.differenceWith=YYe,ee.drop=KYe,ee.dropRight=XYe,ee.dropRightWhile=QYe,ee.dropWhile=JYe,ee.fill=ZYe,ee.filter=tXe,ee.flatMap=iXe,ee.flatMapDeep=sXe,ee.flatMapDepth=oXe,ee.flatten=ode,ee.flattenDeep=eKe,ee.flattenDepth=tKe,ee.flip=TXe,ee.flow=wJe,ee.flowRight=_Je,ee.fromPairs=nKe,ee.functions=_Qe,ee.functionsIn=EQe,ee.groupBy=aXe,ee.initial=iKe,ee.intersection=sKe,ee.intersectionBy=oKe,ee.intersectionWith=aKe,ee.invert=SQe,ee.invertBy=TQe,ee.invokeMap=lXe,ee.iteratee=BU,ee.keyBy=cXe,ee.keys=wa,ee.keysIn=Jl,ee.map=T3,ee.mapKeys=AQe,ee.mapValues=DQe,ee.matches=EJe,ee.matchesProperty=xJe,ee.memoize=A3,ee.merge=IQe,ee.mergeWith=Dde,ee.method=SJe,ee.methodOf=TJe,ee.mixin=jU,ee.negate=D3,ee.nthArg=AJe,ee.omit=kQe,ee.omitBy=RQe,ee.once=CXe,ee.orderBy=fXe,ee.over=DJe,ee.overArgs=AXe,ee.overEvery=IJe,ee.overSome=kJe,ee.partial=NU,ee.partialRight=bde,ee.partition=dXe,ee.pick=NQe,ee.pickBy=Ide,ee.property=$de,ee.propertyOf=RJe,ee.pull=fKe,ee.pullAll=ude,ee.pullAllBy=dKe,ee.pullAllWith=hKe,ee.pullAt=pKe,ee.range=NJe,ee.rangeRight=PJe,ee.rearg=DXe,ee.reject=mXe,ee.remove=mKe,ee.rest=IXe,ee.reverse=IU,ee.sampleSize=yXe,ee.set=OQe,ee.setWith=MQe,ee.shuffle=vXe,ee.slice=gKe,ee.sortBy=_Xe,ee.sortedUniq=xKe,ee.sortedUniqBy=SKe,ee.split=iJe,ee.spread=kXe,ee.tail=TKe,ee.take=CKe,ee.takeRight=AKe,ee.takeRightWhile=DKe,ee.takeWhile=IKe,ee.tap=HKe,ee.throttle=RXe,ee.thru=S3,ee.toArray=Sde,ee.toPairs=kde,ee.toPairsIn=Rde,ee.toPath=LJe,ee.toPlainObject=Cde,ee.transform=$Qe,ee.unary=NXe,ee.union=kKe,ee.unionBy=RKe,ee.unionWith=NKe,ee.uniq=PKe,ee.uniqBy=OKe,ee.uniqWith=MKe,ee.unset=FQe,ee.unzip=kU,ee.unzipWith=lde,ee.update=LQe,ee.updateWith=BQe,ee.values=Bx,ee.valuesIn=jQe,ee.without=$Ke,ee.words=Ode,ee.wrap=PXe,ee.xor=FKe,ee.xorBy=LKe,ee.xorWith=BKe,ee.zip=jKe,ee.zipObject=UKe,ee.zipObjectDeep=zKe,ee.zipWith=VKe,ee.entries=kde,ee.entriesIn=Rde,ee.extend=Ade,ee.extendWith=R3,jU(ee,ee),ee.add=jJe,ee.attempt=Mde,ee.camelCase=HQe,ee.capitalize=Nde,ee.ceil=UJe,ee.clamp=UQe,ee.clone=MXe,ee.cloneDeep=FXe,ee.cloneDeepWith=LXe,ee.cloneWith=$Xe,ee.conformsTo=BXe,ee.deburr=Pde,ee.defaultTo=bJe,ee.divide=zJe,ee.endsWith=qQe,ee.eq=hh,ee.escape=WQe,ee.escapeRegExp=GQe,ee.every=eXe,ee.find=nXe,ee.findIndex=ide,ee.findKey=mQe,ee.findLast=rXe,ee.findLastIndex=sde,ee.findLastKey=gQe,ee.floor=VJe,ee.forEach=fde,ee.forEachRight=dde,ee.forIn=yQe,ee.forInRight=vQe,ee.forOwn=bQe,ee.forOwnRight=wQe,ee.get=MU,ee.gt=jXe,ee.gte=UXe,ee.has=xQe,ee.hasIn=$U,ee.head=ade,ee.identity=Zl,ee.includes=uXe,ee.indexOf=rKe,ee.inRange=zQe,ee.invoke=CQe,ee.isArguments=pw,ee.isArray=rr,ee.isArrayBuffer=zXe,ee.isArrayLike=Ql,ee.isArrayLikeObject=mo,ee.isBoolean=VXe,ee.isBuffer=tv,ee.isDate=HXe,ee.isElement=qXe,ee.isEmpty=WXe,ee.isEqual=GXe,ee.isEqualWith=YXe,ee.isError=PU,ee.isFinite=KXe,ee.isFunction=Lg,ee.isInteger=wde,ee.isLength=I3,ee.isMap=_de,ee.isMatch=XXe,ee.isMatchWith=QXe,ee.isNaN=JXe,ee.isNative=ZXe,ee.isNil=tQe,ee.isNull=eQe,ee.isNumber=Ede,ee.isObject=js,ee.isObjectLike=Qs,ee.isPlainObject=iD,ee.isRegExp=OU,ee.isSafeInteger=nQe,ee.isSet=xde,ee.isString=k3,ee.isSymbol=tf,ee.isTypedArray=Lx,ee.isUndefined=rQe,ee.isWeakMap=iQe,ee.isWeakSet=sQe,ee.join=uKe,ee.kebabCase=YQe,ee.last=td,ee.lastIndexOf=lKe,ee.lowerCase=KQe,ee.lowerFirst=XQe,ee.lt=oQe,ee.lte=aQe,ee.max=HJe,ee.maxBy=qJe,ee.mean=WJe,ee.meanBy=GJe,ee.min=YJe,ee.minBy=KJe,ee.stubArray=zU,ee.stubFalse=VU,ee.stubObject=OJe,ee.stubString=MJe,ee.stubTrue=$Je,ee.multiply=XJe,ee.nth=cKe,ee.noConflict=CJe,ee.noop=UU,ee.now=C3,ee.pad=QQe,ee.padEnd=JQe,ee.padStart=ZQe,ee.parseInt=eJe,ee.random=VQe,ee.reduce=hXe,ee.reduceRight=pXe,ee.repeat=tJe,ee.replace=nJe,ee.result=PQe,ee.round=QJe,ee.runInContext=Pe,ee.sample=gXe,ee.size=bXe,ee.snakeCase=rJe,ee.some=wXe,ee.sortedIndex=yKe,ee.sortedIndexBy=vKe,ee.sortedIndexOf=bKe,ee.sortedLastIndex=wKe,ee.sortedLastIndexBy=_Ke,ee.sortedLastIndexOf=EKe,ee.startCase=sJe,ee.startsWith=oJe,ee.subtract=JJe,ee.sum=ZJe,ee.sumBy=eZe,ee.template=aJe,ee.times=FJe,ee.toFinite=Bg,ee.toInteger=fr,ee.toLength=Tde,ee.toLower=uJe,ee.toNumber=nd,ee.toSafeInteger=uQe,ee.toString=ki,ee.toUpper=lJe,ee.trim=cJe,ee.trimEnd=fJe,ee.trimStart=dJe,ee.truncate=hJe,ee.unescape=pJe,ee.uniqueId=BJe,ee.upperCase=mJe,ee.upperFirst=FU,ee.each=fde,ee.eachRight=dde,ee.first=ade,jU(ee,function(){var v={};return $p(ee,function(x,R){Oi.call(ee.prototype,R)||(v[R]=x)}),v}(),{chain:!1}),ee.VERSION=r,al(["bind","bindKey","curry","curryRight","partial","partialRight"],function(v){ee[v].placeholder=ee}),al(["drop","take"],function(v,x){Pr.prototype[v]=function(R){R=R===n?1:Zo(fr(R),0);var H=this.__filtered__&&!x?new Pr(this):this.clone();return H.__filtered__?H.__takeCount__=wu(R,H.__takeCount__):H.__views__.push({size:wu(R,W),type:v+(H.__dir__<0?"Right":"")}),H},Pr.prototype[v+"Right"]=function(R){return this.reverse()[v](R).reverse()}}),al(["filter","map","takeWhile"],function(v,x){var R=x+1,H=R==L||R==B;Pr.prototype[v]=function(J){var ie=this.clone();return ie.__iteratees__.push({iteratee:Cn(J,3),type:R}),ie.__filtered__=ie.__filtered__||H,ie}}),al(["head","last"],function(v,x){var R="take"+(x?"Right":"");Pr.prototype[v]=function(){return this[R](1).value()[0]}}),al(["initial","tail"],function(v,x){var R="drop"+(x?"":"Right");Pr.prototype[v]=function(){return this.__filtered__?new Pr(this):this[R](1)}}),Pr.prototype.compact=function(){return this.filter(Zl)},Pr.prototype.find=function(v){return this.filter(v).head()},Pr.prototype.findLast=function(v){return this.reverse().find(v)},Pr.prototype.invokeMap=Er(function(v,x){return typeof v=="function"?new Pr(this):this.map(function(R){return JA(R,v,x)})}),Pr.prototype.reject=function(v){return this.filter(D3(Cn(v)))},Pr.prototype.slice=function(v,x){v=fr(v);var R=this;return R.__filtered__&&(v>0||x<0)?new Pr(R):(v<0?R=R.takeRight(-v):v&&(R=R.drop(v)),x!==n&&(x=fr(x),R=x<0?R.dropRight(-x):R.take(x-v)),R)},Pr.prototype.takeRightWhile=function(v){return this.reverse().takeWhile(v).reverse()},Pr.prototype.toArray=function(){return this.take(W)},$p(Pr.prototype,function(v,x){var R=/^(?:filter|find|map|reject)|While$/.test(x),H=/^(?:head|last)$/.test(x),J=ee[H?"take"+(x=="last"?"Right":""):x],ie=H||/^find/.test(x);J&&(ee.prototype[x]=function(){var pe=this.__wrapped__,Ae=H?[1]:arguments,Me=pe instanceof Pr,ut=Ae[0],ft=Me||rr(pe),bt=function(kr){var zr=J.apply(ee,lh([kr],Ae));return H&&Ut?zr[0]:zr};ft&&R&&typeof ut=="function"&&ut.length!=1&&(Me=ft=!1);var Ut=this.__chain__,an=!!this.__actions__.length,Dn=ie&&!Ut,vr=Me&&!an;if(!ie&&ft){pe=vr?pe:new Pr(this);var In=v.apply(pe,Ae);return In.__actions__.push({func:S3,args:[bt],thisArg:n}),new Jf(In,Ut)}return Dn&&vr?v.apply(this,Ae):(In=this.thru(bt),Dn?H?In.value()[0]:In.value():In)})}),al(["pop","push","shift","sort","splice","unshift"],function(v){var x=XO[v],R=/^(?:push|sort|unshift)$/.test(v)?"tap":"thru",H=/^(?:pop|shift)$/.test(v);ee.prototype[v]=function(){var J=arguments;if(H&&!this.__chain__){var ie=this.value();return x.apply(rr(ie)?ie:[],J)}return this[R](function(pe){return x.apply(rr(pe)?pe:[],J)})}}),$p(Pr.prototype,function(v,x){var R=ee[x];if(R){var H=R.name+"";Oi.call(Px,H)||(Px[H]=[]),Px[H].push({name:x,func:R})}}),Px[y3(n,y).name]=[{name:"wrapper",func:n}],Pr.prototype.clone=pGe,Pr.prototype.reverse=mGe,Pr.prototype.value=gGe,ee.prototype.at=qKe,ee.prototype.chain=WKe,ee.prototype.commit=GKe,ee.prototype.next=YKe,ee.prototype.plant=XKe,ee.prototype.reverse=QKe,ee.prototype.toJSON=ee.prototype.valueOf=ee.prototype.value=JKe,ee.prototype.first=ee.prototype.head,qA&&(ee.prototype[qA]=KKe),ee},kx=GWe();Pi?((Pi.exports=kx)._=kx,vi._=kx):wn._=kx}).call(Hs)})(M4,M4.exports);var kHt=M4.exports;const RHt="#/definitions/LibraryConfig",NHt="http://json-schema.org/draft-07/schema#",PHt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LibraryConfig:{additionalProperties:!1,description:'LibraryConfig is used to define the properties of a library configuration. This is a JSON object with three main components: baseComponents, components, and the sequences. Libraries are useful for defining components and sequences of these components that are to be reused across multiple studies. We (the reVISit team) provide several libraries that can be used in your study configurations. Check the public/libraries folder in the reVISit-studies repository for available libraries. We also plan to accept community contributions for libraries. If you have a library that you think would be useful for others, please reach out to us. We would love to include it in our repository.\n\nBelow is the general template that should be followed when constructing a Library configuration file.\n\n```js {  "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.6/src/parser/LibraryConfigSchema.json",  "baseComponents": {    // BaseComponents here are defined exactly as is in the StudyConfig  },  "components": {    // Components here are defined exactly as is in the StudyConfig  },  "sequences": {   // Sequences here are defined as "key": "value" pairs where the key is the name of the sequence and the value is a ComponentBlock, just like in the StudyConfig  } } ```',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequences:{additionalProperties:{$ref:"#/definitions/ComponentBlock"},description:"The order of the components in the study. This might include some randomness.",type:"object"}},required:["$schema","components","sequences"],type:"object"},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},MatrixResponse:{additionalProperties:!1,description:`The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, \`answerOptions\` can be set to one of the following custom strings: 'satisfaction5','satisfaction7', 'likely5', 'likely7'. This will automatically generate the appropriate headers for the matrix.

Example for a 5-scale satisfaction matrix with three questions:

\`\`\`js { "id": "multi-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.", "required": true, "location": "aboveStimulus", "type": "matrix-radio", "answerOptions": "satisfaction5", "questionOptions": [  "The tool we created",  "The technique we developed",  "The authors of the tools" ] } \`\`\`

Here's an example using custom columns (answerOptions):

\`\`\`js { "id": "multi-custom", "prompt": "Which categories do the following items belong to?", "required": true, "location": "aboveStimulus", "type": "matrix-checkbox", "answerOptions": [  "Has Legs",  "Has Wings",  "Can Swim" ], "questionOptions": [  "Dog",  "Snake",  "Eagle",  "Salmon",  "Platypus" ]

} \`\`\``,properties:{answerOptions:{anyOf:[{items:{type:"string"},type:"array"},{const:"likely5",type:"string"},{const:"likely7",type:"string"},{const:"satisfaction5",type:"string"},{const:"satisfaction7",type:"string"}],description:"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},questionOptions:{description:"The question options (rows) are the prompts for each response you'd like to record.",items:{type:"string"},type:"array"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{enum:["matrix-radio","matrix-checkbox"],type:"string"}},required:["answerOptions","id","prompt","questionOptions","required","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/v1.0.6/src/public/demo-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"},{$ref:"#/definitions/MatrixResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},OHt={$ref:RHt,$schema:NHt,definitions:PHt},Q6e=new Jie;Q6e.addSchema(OHt);const MHt=Q6e.getSchema("#/definitions/LibraryConfig");function J6e(e,t){return{...e,components:e.components.map(n=>typeof n=="object"?J6e(n,t):`$${t}.components.${n}`)}}function Z6e(e,t,n=[]){return{...e,components:e.components.map(r=>{if(typeof r=="object")return Z6e(r,t);const i=r.includes(".se.")?".se.":r.includes(".sequences.")?".sequences.":!1;if(typeof r=="string"&&r.startsWith("$")&&i){const[s,o]=r.split(i),a=s.slice(1);let l=t[a].sequences[o];if(!l){const c={message:`Sequence ${o} not found in library ${s}`,instancePath:"",params:{action:"check the sequence name"}};return n.push(c),r}return l=J6e(l,a),l}return r})}}function $Ht(e,t,n){Object.entries(n).forEach(([r,i])=>{Object.entries(i.components).forEach(([s,o])=>{var a;cA(o)&&!((a=i.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object in library \`${r}\``,instancePath:`/importedLibraries/${r}/components/${s}`,params:{action:"add the base component to the baseComponents object"}})})})}function FHt(e,t){let n=!1,r;try{r=v9.parse(e),n=MHt(r)}catch{n=!1}const i=[],s=[];return r?n||i.push({message:"Library config is not valid",instancePath:"",params:{action:"fix the errors in the library config"}}):i.push({message:`Could not find library \`${t}\``,instancePath:"/importedLibraries/",params:{action:"make sure the library is in the correct location"}}),{...r,errors:i,warnings:s}}async function LHt(e){const t=await(await fetch(`${Rl}libraries/${e}/config.json`)).text();return FHt(t,e)}async function BHt(e,t,n){const r=e.map(async s=>{const o=await LHt(s);return o.errors&&t.push(...o.errors),o.warnings&&n.push(...o.warnings),[s,o]}),i=Object.fromEntries(await Promise.all(r));return Object.entries(i).forEach(([s,o])=>{o.components||delete i[s]}),e.forEach(s=>{i[s]&&(i[s].components=Object.fromEntries(Object.entries(i[s].components).map(([o,a])=>{if(cA(a)){const u=kHt.merge({},i[s].baseComponents[a.baseComponent],a);return delete u.baseComponent,[[`$${s}.components.${o}`,u],[`$${s}.co.${o}`,u]]}return[[`$${s}.components.${o}`,a],[`$${s}.co.${o}`,a]]}).reduce((o,[a,u])=>(o.push(a,u),o),[])))}),i}const e4e=new Jie;e4e.addSchema(IHt);const Sbe=e4e.getSchema("#/definitions/GlobalConfig"),t4e=new Jie;t4e.addSchema(THt);const Tbe=t4e.getSchema("#/definitions/StudyConfig");function jHt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function UHt(e){const t=v9.parse(e),n=Sbe(t),r=jHt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Sbe.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function n4e(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):n4e(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function zHt(e,t){const n=[],r=[];$Ht(e,n,t),Object.entries(e.components).forEach(([o,a])=>{var u;cA(a)&&!((u=e.baseComponents)!=null&&u[a.baseComponent])&&n.push({message:`Base component \`${a.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${o}`,params:{action:"add the base component to the baseComponents object"}})});const i=fRe(e.sequence);i.forEach(o=>{var a;e.components[o]||n.push({message:(a=e.baseComponents)!=null&&a[o]?`Component \`${o}\` is a base component and cannot be used in the sequence`:`Component \`${o}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(o=>!i.includes(o)&&!o.includes(".se.")&&!o.includes(".sequences.")&&!o.includes(".co.")&&!o.includes(".components.")).forEach(o=>{r.push({message:`Component \`${o}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const s=[];return n4e(e.sequence,s),s.forEach(o=>{n.push({message:`Skip target \`${o}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:n,warnings:r}}async function VHt(e){let t=!1,n;try{n=v9.parse(e),t=Tbe(n)}catch{t=!1}let r=Tbe.errors||[],i=[];if(t&&n){const s=n.importedLibraries||[],o=await BHt(s,r,i);Object.values(o).forEach(l=>{n.components={...n.components,...l.components},n.baseComponents={...n.baseComponents,...l.components}}),n.sequence=Z6e(n.sequence,o,r);const{errors:a,warnings:u}=zHt(n,o);r=[...r,...a],i=[...i,...u]}else r=[...r,{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}async function HHt(e){const t=await(await fetch(`${Rl}${e}`)).text();return await VHt(t)}async function S9(e,t){const n=t.configsList.find(r=>vIe(r)===e);if(n){const r=t.configs[n];return await HHt(`${r.path}`)}return null}async function qHt(e){const t={},n=e.configsList.filter(i=>!e.configs[i].test).map(async i=>S9(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function WHt({globalConfig:e}){const t=GE(),[n,r]=P.useState(null),i=e.configsList.includes(t);P.useEffect(()=>{S9(t,e).then(h=>{r(h)})},[e,t]);const[s,o]=P.useState([]),[a,u]=P.useState(null),{storageEngine:l}=Wo(),[c]=Nee();P.useEffect(()=>{async function h(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await qjt(n));const m=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,g=Object.fromEntries(c.entries()),y=await fetch("https://api.ipify.org?format=json").catch(C=>""),b=y instanceof Response?await y.json():{ip:""},w={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:b.ip},S=await l.initializeParticipantSession(t,g,n,w,m),E=await l.getModes(t),T=await Kwt(t,n,S.sequence,w,S.answers,E);u(T),o([{element:_.jsx(Ujt,{}),children:[{path:"/",element:_.jsx(wK,{to:"0",replace:!0})},{path:"/:index",element:n.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(Os,{order:2,mb:8,children:"Error loading config"}),_.jsx(yG,{issues:n.errors,type:"error"})]}):_.jsx(yjt,{})}]}])}h()},[l,n,t,c]);const f=cIe(s);let d=null;return i?s.length===0?d=_.jsx(kf,{visible:!0}):d=f&&a?_.jsx(mRe.Provider,{value:a,children:_.jsx(Hbt,{store:a.store,children:f})}):_.jsx(Y_,{}):d=_.jsx(Y_,{}),d}var Cbe={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4e=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},GHt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Zie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r4e(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):GHt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new YHt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class YHt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KHt=function(e){const t=r4e(e);return Zie.encodeByteArray(t,!0)},$4=function(e){return KHt(e).replace(/\./g,"")},i4e=function(e){try{return Zie.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XHt=()=>s4e().__FIREBASE_DEFAULTS__,QHt=()=>{if(typeof process>"u"||typeof Cbe>"u")return;const e=Cbe.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},JHt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&i4e(e[1]);return t&&JSON.parse(t)},T9=()=>{try{return XHt()||QHt()||JHt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},o4e=e=>{var t,n;return(n=(t=T9())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},ZHt=e=>{const t=o4e(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},a4e=()=>{var e;return(e=T9())===null||e===void 0?void 0:e.config},u4e=e=>{var t;return(t=T9())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eqt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[$4(JSON.stringify(n)),$4(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tqt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hu())}function nqt(){var e;const t=(e=T9())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rqt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function iqt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sqt(){const e=hu();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function oqt(){return!nqt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ese(){try{return typeof indexedDB=="object"}catch{return!1}}function aqt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uqt="FirebaseError";class gg extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=uqt,Object.setPrototypeOf(this,gg.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pA.prototype.create)}}class pA{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?lqt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new gg(i,a,r)}}function lqt(e,t){return e.replace(cqt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const cqt=/\{\$([^}]+)}/g;function fqt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function cN(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Abe(s)&&Abe(o)){if(!cN(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Abe(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function dqt(e,t){const n=new hqt(e,t);return n.subscribe.bind(n)}class hqt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");pqt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=xH),i.error===void 0&&(i.error=xH),i.complete===void 0&&(i.complete=xH);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pqt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function xH(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mqt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gqt=1e3,yqt=2,vqt=4*60*60*1e3,bqt=.5;function wqt(e,t=gqt,n=yqt){const r=t*Math.pow(n,e),i=Math.round(bqt*r*(Math.random()-.5)*2);return Math.min(vqt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(e){return e&&e._delegate?e._delegate:e}class Qm{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _qt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new lN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(xqt(t))try{this.getOrInitializeService({instanceIdentifier:zw})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=zw){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=zw){return this.instances.has(t)}getOptions(t=zw){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Eqt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=zw){return this.component?this.component.multipleInstances?t:zw:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Eqt(e){return e===zw?void 0:e}function xqt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sqt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new _qt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hr;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Hr||(Hr={}));const Tqt={debug:Hr.DEBUG,verbose:Hr.VERBOSE,info:Hr.INFO,warn:Hr.WARN,error:Hr.ERROR,silent:Hr.SILENT},Cqt=Hr.INFO,Aqt={[Hr.DEBUG]:"log",[Hr.VERBOSE]:"log",[Hr.INFO]:"info",[Hr.WARN]:"warn",[Hr.ERROR]:"error"},Dqt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=Aqt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class C9{constructor(t){this.name=t,this._logLevel=Cqt,this._logHandler=Dqt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Hr))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Tqt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Hr.DEBUG,...t),this._logHandler(this,Hr.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Hr.VERBOSE,...t),this._logHandler(this,Hr.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Hr.INFO,...t),this._logHandler(this,Hr.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Hr.WARN,...t),this._logHandler(this,Hr.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Hr.ERROR,...t),this._logHandler(this,Hr.ERROR,...t)}}const Iqt=(e,t)=>t.some(n=>e instanceof n);let Dbe,Ibe;function kqt(){return Dbe||(Dbe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Rqt(){return Ibe||(Ibe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const l4e=new WeakMap,OK=new WeakMap,c4e=new WeakMap,SH=new WeakMap,tse=new WeakMap;function Nqt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(y1(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&l4e.set(n,e)}).catch(()=>{}),tse.set(t,e),t}function Pqt(e){if(OK.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});OK.set(e,t)}let MK={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return OK.get(e);if(t==="objectStoreNames")return e.objectStoreNames||c4e.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return y1(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Oqt(e){MK=e(MK)}function Mqt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(TH(this),t,...n);return c4e.set(r,t.sort?t.sort():[t]),y1(r)}:Rqt().includes(e)?function(...t){return e.apply(TH(this),t),y1(l4e.get(this))}:function(...t){return y1(e.apply(TH(this),t))}}function $qt(e){return typeof e=="function"?Mqt(e):(e instanceof IDBTransaction&&Pqt(e),Iqt(e,kqt())?new Proxy(e,MK):e)}function y1(e){if(e instanceof IDBRequest)return Nqt(e);if(SH.has(e))return SH.get(e);const t=$qt(e);return t!==e&&(SH.set(e,t),tse.set(t,e)),t}const TH=e=>tse.get(e);function Fqt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=y1(o);return r&&o.addEventListener("upgradeneeded",u=>{r(y1(o.result),u.oldVersion,u.newVersion,y1(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const Lqt=["get","getKey","getAll","getAllKeys","count"],Bqt=["put","add","delete","clear"],CH=new Map;function kbe(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(CH.get(t))return CH.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Bqt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Lqt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return CH.set(t,s),s}Oqt(e=>({...e,get:(t,n,r)=>kbe(t,n)||e.get(t,n,r),has:(t,n)=>!!kbe(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jqt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Uqt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Uqt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const $K="@firebase/app",Rbe="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new C9("@firebase/app"),zqt="@firebase/app-compat",Vqt="@firebase/analytics-compat",Hqt="@firebase/analytics",qqt="@firebase/app-check-compat",Wqt="@firebase/app-check",Gqt="@firebase/auth",Yqt="@firebase/auth-compat",Kqt="@firebase/database",Xqt="@firebase/database-compat",Qqt="@firebase/functions",Jqt="@firebase/functions-compat",Zqt="@firebase/installations",eWt="@firebase/installations-compat",tWt="@firebase/messaging",nWt="@firebase/messaging-compat",rWt="@firebase/performance",iWt="@firebase/performance-compat",sWt="@firebase/remote-config",oWt="@firebase/remote-config-compat",aWt="@firebase/storage",uWt="@firebase/storage-compat",lWt="@firebase/firestore",cWt="@firebase/vertexai-preview",fWt="@firebase/firestore-compat",dWt="firebase",hWt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FK="[DEFAULT]",pWt={[$K]:"fire-core",[zqt]:"fire-core-compat",[Hqt]:"fire-analytics",[Vqt]:"fire-analytics-compat",[Wqt]:"fire-app-check",[qqt]:"fire-app-check-compat",[Gqt]:"fire-auth",[Yqt]:"fire-auth-compat",[Kqt]:"fire-rtdb",[Xqt]:"fire-rtdb-compat",[Qqt]:"fire-fn",[Jqt]:"fire-fn-compat",[Zqt]:"fire-iid",[eWt]:"fire-iid-compat",[tWt]:"fire-fcm",[nWt]:"fire-fcm-compat",[rWt]:"fire-perf",[iWt]:"fire-perf-compat",[sWt]:"fire-rc",[oWt]:"fire-rc-compat",[aWt]:"fire-gcs",[uWt]:"fire-gcs-compat",[lWt]:"fire-fst",[fWt]:"fire-fst-compat",[cWt]:"fire-vertex","fire-js":"fire-js",[dWt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=new Map,mWt=new Map,LK=new Map;function Nbe(e,t){try{e.container.addComponent(t)}catch(n){uE.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function fy(e){const t=e.name;if(LK.has(t))return uE.debug(`There were multiple attempts to register component ${t}.`),!1;LK.set(t,e);for(const n of F4.values())Nbe(n,e);for(const n of mWt.values())Nbe(n,e);return!0}function mA(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function wm(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gWt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},v1=new pA("app","Firebase",gWt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yWt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qm("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw v1.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=hWt;function f4e(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:FK,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw v1.create("bad-app-name",{appName:String(i)});if(n||(n=a4e()),!n)throw v1.create("no-options");const s=F4.get(i);if(s){if(cN(n,s.options)&&cN(r,s.config))return s;throw v1.create("duplicate-app",{appName:i})}const o=new Sqt(i);for(const u of LK.values())o.addComponent(u);const a=new yWt(n,r,o);return F4.set(i,a),a}function nse(e=FK){const t=F4.get(e);if(!t&&e===FK&&a4e())return f4e();if(!t)throw v1.create("no-app",{appName:e});return t}function ip(e,t,n){var r;let i=(r=pWt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),uE.warn(a.join(" "));return}fy(new Qm(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vWt="firebase-heartbeat-database",bWt=1,fN="firebase-heartbeat-store";let AH=null;function d4e(){return AH||(AH=Fqt(vWt,bWt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(fN)}catch(n){console.warn(n)}}}}).catch(e=>{throw v1.create("idb-open",{originalErrorMessage:e.message})})),AH}async function wWt(e){try{const n=(await d4e()).transaction(fN),r=await n.objectStore(fN).get(h4e(e));return await n.done,r}catch(t){if(t instanceof gg)uE.warn(t.message);else{const n=v1.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});uE.warn(n.message)}}}async function Pbe(e,t){try{const r=(await d4e()).transaction(fN,"readwrite");await r.objectStore(fN).put(t,h4e(e)),await r.done}catch(n){if(n instanceof gg)uE.warn(n.message);else{const r=v1.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});uE.warn(r.message)}}}function h4e(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Wt=1024,EWt=30*24*60*60*1e3;class xWt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TWt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Obe();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=EWt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Obe(),{heartbeatsToSend:r,unsentEntries:i}=SWt(this._heartbeatsCache.heartbeats),s=$4(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Obe(){return new Date().toISOString().substring(0,10)}function SWt(e,t=_Wt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Mbe(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Mbe(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class TWt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ese()?aqt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wWt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Pbe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Pbe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Mbe(e){return $4(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CWt(e){fy(new Qm("platform-logger",t=>new jqt(t),"PRIVATE")),fy(new Qm("heartbeat",t=>new xWt(t),"PRIVATE")),ip($K,Rbe,e),ip($K,Rbe,"esm2017"),ip("fire-js","")}CWt("");function p4e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AWt=p4e,m4e=new pA("auth","Firebase",p4e());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=new C9("@firebase/auth");function DWt(e,...t){L4.logLevel<=Hr.WARN&&L4.warn(`Auth (${tx}): ${e}`,...t)}function gF(e,...t){L4.logLevel<=Hr.ERROR&&L4.error(`Auth (${tx}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(e,...t){throw ise(e,...t)}function sp(e,...t){return ise(e,...t)}function rse(e,t,n){const r=Object.assign(Object.assign({},AWt()),{[t]:n});return new pA("auth","Firebase",r).create(t,{appName:e.name})}function b1(e){return rse(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function IWt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Jm(e,"argument-error"),rse(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ise(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return m4e.create(e,...t)}function Gn(e,t,...n){if(!e)throw ise(t,...n)}function x0(e){const t="INTERNAL ASSERTION FAILED: "+e;throw gF(t),new Error(t)}function dy(e,t){e||x0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BK(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function kWt(){return $be()==="http:"||$be()==="https:"}function $be(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RWt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kWt()||rqt()||"connection"in navigator)?navigator.onLine:!0}function NWt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(t,n){this.shortDelay=t,this.longDelay=n,dy(n>t,"Short delay should be less than long delay!"),this.isMobile=tqt()||iqt()}get(){return RWt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sse(e,t){dy(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4e{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;x0("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;x0("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;x0("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PWt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OWt=new qP(3e4,6e4);function A9(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function gA(e,t,n,r,i={}){return y4e(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=HP(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),g4e.fetch()(b4e(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function y4e(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},PWt),t);try{const i=new MWt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw UM(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw UM(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw UM(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw UM(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw rse(e,c,l);Jm(e,c)}}catch(i){if(i instanceof gg)throw i;Jm(e,"network-request-failed",{message:String(i)})}}async function v4e(e,t,n,r,i={}){const s=await gA(e,t,n,r,i);return"mfaPendingCredential"in s&&Jm(e,"multi-factor-auth-required",{_serverResponse:s}),s}function b4e(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?sse(e.config,i):`${e.config.apiScheme}://${i}`}class MWt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(sp(this.auth,"network-request-failed")),OWt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function UM(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=sp(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $Wt(e,t){return gA(e,"POST","/v1/accounts:delete",t)}async function w4e(e,t){return gA(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function FWt(e,t=!1){const n=ls(e),r=await n.getIdToken(t),i=ose(r);Gn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Fk(DH(i.auth_time)),issuedAtTime:Fk(DH(i.iat)),expirationTime:Fk(DH(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function DH(e){return Number(e)*1e3}function ose(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return gF("JWT malformed, contained fewer than 3 sections"),null;try{const i=i4e(n);return i?JSON.parse(i):(gF("Failed to decode base64 JWT payload"),null)}catch(i){return gF("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Fbe(e){const t=ose(e);return Gn(t,"internal-error"),Gn(typeof t.exp<"u","internal-error"),Gn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof gg&&LWt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function LWt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BWt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jK{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fk(this.lastLoginAt),this.creationTime=Fk(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B4(e){var t;const n=e.auth,r=await e.getIdToken(),i=await dN(e,w4e(n,{idToken:r}));Gn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?_4e(s.providerUserInfo):[],a=UWt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new jK(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function jWt(e){const t=ls(e);await B4(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function UWt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function _4e(e){return e.map(t=>{var{providerId:n}=t,r=ZN(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zWt(e,t){const n=await y4e(e,{},async()=>{const r=HP({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=b4e(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",g4e.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function VWt(e,t){return gA(e,"POST","/v2/accounts:revokeToken",A9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Gn(t.idToken,"internal-error"),Gn(typeof t.idToken<"u","internal-error"),Gn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Fbe(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Gn(t.length!==0,"internal-error");const n=Fbe(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Gn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await zWt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new FT;return r&&(Gn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(Gn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(Gn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new FT,this.toJSON())}_performRefresh(){return x0("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(e,t){Gn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class S0{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=ZN(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BWt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new jK(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await dN(this,this.stsTokenManager.getToken(this.auth,t));return Gn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return FWt(this,t)}reload(){return jWt(this)}_assign(t){this!==t&&(Gn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new S0(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Gn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await B4(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wm(this.auth.app))return Promise.reject(b1(this.auth));const t=await this.getIdToken();return await dN(this,$Wt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,b=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:w,emailVerified:S,isAnonymous:E,providerData:T,stsTokenManager:C}=n;Gn(w&&C,t,"internal-error");const A=FT.fromJSON(this.name,C);Gn(typeof w=="string",t,"internal-error"),av(f,t.name),av(d,t.name),Gn(typeof S=="boolean",t,"internal-error"),Gn(typeof E=="boolean",t,"internal-error"),av(h,t.name),av(p,t.name),av(m,t.name),av(g,t.name),av(y,t.name),av(b,t.name);const I=new S0({uid:w,auth:t,email:d,emailVerified:S,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:A,createdAt:y,lastLoginAt:b});return T&&Array.isArray(T)&&(I.providerData=T.map(k=>Object.assign({},k))),g&&(I._redirectEventId=g),I}static async _fromIdTokenResponse(t,n,r=!1){const i=new FT;i.updateFromServerResponse(n);const s=new S0({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await B4(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];Gn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?_4e(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new FT;a.updateFromIdToken(r);const u=new S0({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new jK(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lbe=new Map;function T0(e){dy(e instanceof Function,"Expected a class definition");let t=Lbe.get(e);return t?(dy(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Lbe.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4e{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}E4e.type="NONE";const Bbe=E4e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(e,t,n){return`firebase:${e}:${t}:${n}`}class LT{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=yF(this.userKey,i.apiKey,s),this.fullPersistenceKey=yF("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?S0._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new LT(T0(Bbe),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||T0(Bbe);const o=yF(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=S0._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new LT(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new LT(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jbe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(T4e(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(x4e(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(A4e(t))return"Blackberry";if(D4e(t))return"Webos";if(ase(t))return"Safari";if((t.includes("chrome/")||S4e(t))&&!t.includes("edge/"))return"Chrome";if(C4e(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function x4e(e=hu()){return/firefox\//i.test(e)}function ase(e=hu()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function S4e(e=hu()){return/crios\//i.test(e)}function T4e(e=hu()){return/iemobile/i.test(e)}function C4e(e=hu()){return/android/i.test(e)}function A4e(e=hu()){return/blackberry/i.test(e)}function D4e(e=hu()){return/webos/i.test(e)}function D9(e=hu()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function HWt(e=hu()){var t;return D9(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function qWt(){return sqt()&&document.documentMode===10}function I4e(e=hu()){return D9(e)||C4e(e)||D4e(e)||A4e(e)||/windows phone/i.test(e)||T4e(e)}function WWt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4e(e,t=[]){let n;switch(e){case"Browser":n=jbe(hu());break;case"Worker":n=`${jbe(hu())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${tx}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GWt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YWt(e,t={}){return gA(e,"GET","/v2/passwordPolicy",A9(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KWt=6;class XWt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:KWt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QWt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ube(this),this.idTokenSubscription=new Ube(this),this.beforeStateQueue=new GWt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=m4e,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=T0(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await LT.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await w4e(this,{idToken:t}),r=await S0._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(wm(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Gn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await B4(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=NWt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(wm(this.app))return Promise.reject(b1(this));const n=t?ls(t):null;return n&&Gn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Gn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return wm(this.app)?Promise.reject(b1(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return wm(this.app)?Promise.reject(b1(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(T0(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await YWt(this),n=new XWt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new pA("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await VWt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&T0(t)||this._popupRedirectResolver;Gn(n,this,"argument-error"),this.redirectPersistenceManager=await LT.create(this,[T0(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Gn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Gn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=k4e(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&DWt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function WP(e){return ls(e)}class Ube{constructor(t){this.auth=t,this.observer=null,this.addObserver=dqt(n=>this.observer=n)}get next(){return Gn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let use={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JWt(e){use=e}function ZWt(e){return use.loadJS(e)}function eGt(){return use.gapiScript}function tGt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nGt(e,t){const n=mA(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(cN(s,t??{}))return i;Jm(i,"already-initialized")}return n.initialize({options:t})}function rGt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(T0);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function iGt(e,t,n){const r=WP(e);Gn(r._canInitEmulator,r,"emulator-config-failed"),Gn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=R4e(t),{host:o,port:a}=sGt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),oGt()}function R4e(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function sGt(e){const t=R4e(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:zbe(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:zbe(o)}}}function zbe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function oGt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4e{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return x0("not implemented")}_getIdTokenResponse(t){return x0("not implemented")}_linkToIdToken(t,n){return x0("not implemented")}_getReauthenticationResolver(t){return x0("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BT(e,t){return v4e(e,"POST","/v1/accounts:signInWithIdp",A9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aGt="http://localhost";class lE extends N4e{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new lE(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Jm("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=ZN(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new lE(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return BT(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,BT(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,BT(t,n)}buildRequest(){const t={requestUri:aGt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=HP(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lse{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP extends lse{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv extends GP{constructor(){super("facebook.com")}static credential(t){return lE._fromParams({providerId:Pv.PROVIDER_ID,signInMethod:Pv.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Pv.credentialFromTaggedObject(t)}static credentialFromError(t){return Pv.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Pv.credential(t.oauthAccessToken)}catch{return null}}}Pv.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pv.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0 extends GP{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return lE._fromParams({providerId:h0.PROVIDER_ID,signInMethod:h0.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return h0.credentialFromTaggedObject(t)}static credentialFromError(t){return h0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return h0.credential(n,r)}catch{return null}}}h0.GOOGLE_SIGN_IN_METHOD="google.com";h0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov extends GP{constructor(){super("github.com")}static credential(t){return lE._fromParams({providerId:Ov.PROVIDER_ID,signInMethod:Ov.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ov.credentialFromTaggedObject(t)}static credentialFromError(t){return Ov.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ov.credential(t.oauthAccessToken)}catch{return null}}}Ov.GITHUB_SIGN_IN_METHOD="github.com";Ov.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv extends GP{constructor(){super("twitter.com")}static credential(t,n){return lE._fromParams({providerId:Mv.PROVIDER_ID,signInMethod:Mv.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Mv.credentialFromTaggedObject(t)}static credentialFromError(t){return Mv.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Mv.credential(n,r)}catch{return null}}}Mv.TWITTER_SIGN_IN_METHOD="twitter.com";Mv.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uGt(e,t){return v4e(e,"POST","/v1/accounts:signUp",A9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await S0._fromIdTokenResponse(t,r,i),o=Vbe(r);return new Q1({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Vbe(r);return new Q1({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Vbe(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lGt(e){var t;if(wm(e.app))return Promise.reject(b1(e));const n=WP(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new Q1({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await uGt(n,{returnSecureToken:!0}),i=await Q1._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4 extends gg{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,j4.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new j4(t,n,r,i)}}function P4e(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?j4._fromErrorAndOperation(e,s,t,r):s})}async function cGt(e,t,n=!1){const r=await dN(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Q1._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fGt(e,t,n=!1){const{auth:r}=e;if(wm(r.app))return Promise.reject(b1(r));const i="reauthenticate";try{const s=await dN(e,P4e(r,i,t,e),n);Gn(s.idToken,r,"internal-error");const o=ose(s.idToken);Gn(o,r,"internal-error");const{sub:a}=o;return Gn(e.uid===a,r,"user-mismatch"),Q1._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Jm(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dGt(e,t,n=!1){if(wm(e.app))return Promise.reject(b1(e));const r="signIn",i=await P4e(e,r,t),s=await Q1._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function hGt(e,t,n,r){return ls(e).onIdTokenChanged(t,n,r)}function pGt(e,t,n){return ls(e).beforeAuthStateChanged(t,n)}function mGt(e,t,n,r){return ls(e).onAuthStateChanged(t,n,r)}function gGt(e){return ls(e).signOut()}const U4="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4e{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(U4,"1"),this.storage.removeItem(U4),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yGt(){const e=hu();return ase(e)||D9(e)}const vGt=1e3,bGt=10;class M4e extends O4e{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=yGt()&&WWt(),this.fallbackToPolling=I4e(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);qWt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,bGt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},vGt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}M4e.type="LOCAL";const wGt=M4e;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4e extends O4e{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}$4e.type="SESSION";const F4e=$4e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Gt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new I9(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await _Gt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}I9.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cse(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EGt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=cse("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(){return window}function xGt(e){Pm().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4e(){return typeof Pm().WorkerGlobalScope<"u"&&typeof Pm().importScripts=="function"}async function SGt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TGt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function CGt(){return L4e()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4e="firebaseLocalStorageDb",AGt=1,z4="firebaseLocalStorage",j4e="fbase_key";class YP{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function k9(e,t){return e.transaction([z4],t?"readwrite":"readonly").objectStore(z4)}function DGt(){const e=indexedDB.deleteDatabase(B4e);return new YP(e).toPromise()}function UK(){const e=indexedDB.open(B4e,AGt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(z4,{keyPath:j4e})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(z4)?t(r):(r.close(),await DGt(),t(await UK()))})})}async function Hbe(e,t,n){const r=k9(e,!0).put({[j4e]:t,value:n});return new YP(r).toPromise()}async function IGt(e,t){const n=k9(e,!1).get(t),r=await new YP(n).toPromise();return r===void 0?null:r.value}function qbe(e,t){const n=k9(e,!0).delete(t);return new YP(n).toPromise()}const kGt=800,RGt=3;class U4e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await UK(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>RGt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return L4e()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=I9._getInstance(CGt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await SGt(),!this.activeServiceWorker)return;this.sender=new EGt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||TGt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await UK();return await Hbe(t,U4,"1"),await qbe(t,U4),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Hbe(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>IGt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>qbe(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=k9(i,!1).getAll();return new YP(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kGt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}U4e.type="LOCAL";const NGt=U4e;new qP(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4e(e,t){return t?T0(t):(Gn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fse extends N4e{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return BT(t,this._buildIdpRequest())}_linkToIdToken(t,n){return BT(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return BT(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function PGt(e){return dGt(e.auth,new fse(e),e.bypassAuthState)}function OGt(e){const{auth:t,user:n}=e;return Gn(n,t,"internal-error"),fGt(n,new fse(e),e.bypassAuthState)}async function MGt(e){const{auth:t,user:n}=e;return Gn(n,t,"internal-error"),cGt(n,new fse(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4e{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return PGt;case"linkViaPopup":case"linkViaRedirect":return MGt;case"reauthViaPopup":case"reauthViaRedirect":return OGt;default:Jm(this.auth,"internal-error")}}resolve(t){dy(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){dy(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Gt=new qP(2e3,1e4);async function FGt(e,t,n){if(wm(e.app))return Promise.reject(sp(e,"operation-not-supported-in-this-environment"));const r=WP(e);IWt(e,t,lse);const i=z4e(r,n);return new E_(r,"signInViaPopup",t,i).executeNotNull()}class E_ extends V4e{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,E_.currentPopupAction&&E_.currentPopupAction.cancel(),E_.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Gn(t,this.auth,"internal-error"),t}async onExecution(){dy(this.filter.length===1,"Popup operations only handle one event");const t=cse();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(sp(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(sp(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E_.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sp(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,$Gt.get())};t()}}E_.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LGt="pendingRedirect",vF=new Map;class BGt extends V4e{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=vF.get(this.auth._key());if(!t){try{const r=await jGt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}vF.set(this.auth._key(),t)}return this.bypassAuthState||vF.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jGt(e,t){const n=VGt(t),r=zGt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function UGt(e,t){vF.set(e._key(),t)}function zGt(e){return T0(e._redirectPersistence)}function VGt(e){return yF(LGt,e.config.apiKey,e.name)}async function HGt(e,t,n=!1){if(wm(e.app))return Promise.reject(b1(e));const r=WP(e),i=z4e(r,t),o=await new BGt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qGt=10*60*1e3;class WGt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!GGt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!H4e(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(sp(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=qGt&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wbe(t))}saveEventToCache(t){this.cachedEventUids.add(Wbe(t)),this.lastProcessedEventTime=Date.now()}}function Wbe(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function H4e({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function GGt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return H4e(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YGt(e,t={}){return gA(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KGt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XGt=/^https?/;async function QGt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await YGt(e);for(const n of t)try{if(JGt(n))return}catch{}Jm(e,"unauthorized-domain")}function JGt(e){const t=BK(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!XGt.test(n))return!1;if(KGt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZGt=new qP(3e4,6e4);function Gbe(){const e=Pm().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function eYt(e){return new Promise((t,n)=>{var r,i,s;function o(){Gbe(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Gbe(),n(sp(e,"network-request-failed"))},timeout:ZGt.get()})}if(!((i=(r=Pm().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Pm().gapi)===null||s===void 0)&&s.load)o();else{const a=tGt("iframefcb");return Pm()[a]=()=>{gapi.load?o():n(sp(e,"network-request-failed"))},ZWt(`${eGt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw bF=null,t})}let bF=null;function tYt(e){return bF=bF||eYt(e),bF}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nYt=new qP(5e3,15e3),rYt="__/auth/iframe",iYt="emulator/auth/iframe",sYt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oYt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aYt(e){const t=e.config;Gn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?sse(t,iYt):`https://${e.config.authDomain}/${rYt}`,r={apiKey:t.apiKey,appName:e.name,v:tx},i=oYt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${HP(r).slice(1)}`}async function uYt(e){const t=await tYt(e),n=Pm().gapi;return Gn(n,e,"internal-error"),t.open({where:document.body,url:aYt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sYt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=sp(e,"network-request-failed"),a=Pm().setTimeout(()=>{s(o)},nYt.get());function u(){Pm().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lYt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cYt=500,fYt=600,dYt="_blank",hYt="http://localhost";class Ybe{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pYt(e,t,n,r=cYt,i=fYt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},lYt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=hu().toLowerCase();n&&(a=S4e(l)?dYt:n),x4e(l)&&(t=t||hYt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(HWt(l)&&a!=="_self")return mYt(t||"",a),new Ybe(null);const f=window.open(t||"",a,c);Gn(f,e,"popup-blocked");try{f.focus()}catch{}return new Ybe(f)}function mYt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gYt="__/auth/handler",yYt="emulator/auth/handler",vYt=encodeURIComponent("fac");async function Kbe(e,t,n,r,i,s){Gn(e.config.authDomain,e,"auth-domain-config-required"),Gn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:tx,eventId:i};if(t instanceof lse){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",fqt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof GP){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${vYt}=${encodeURIComponent(u)}`:"";return`${bYt(e)}?${HP(a).slice(1)}${l}`}function bYt({config:e}){return e.emulator?sse(e,yYt):`https://${e.authDomain}/${gYt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IH="webStorageSupport";class wYt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=F4e,this._completeRedirectFn=HGt,this._overrideRedirectResult=UGt}async _openPopup(t,n,r,i){var s;dy((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Kbe(t,n,r,BK(),i);return pYt(t,o,cse())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await Kbe(t,n,r,BK(),i);return xGt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(dy(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await uYt(t),r=new WGt(t);return n.register("authEvent",i=>(Gn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(IH,{type:IH},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[IH];o!==void 0&&n(!!o),Jm(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=QGt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return I4e()||ase()||D9()}}const q4e=wYt;var Xbe="@firebase/auth",Qbe="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Yt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Gn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EYt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xYt(e){fy(new Qm("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Gn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:k4e(e)},l=new QWt(r,i,s,u);return rGt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),fy(new Qm("auth-internal",t=>{const n=WP(t.getProvider("auth").getImmediate());return(r=>new _Yt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ip(Xbe,Qbe,EYt(e)),ip(Xbe,Qbe,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SYt=5*60,TYt=u4e("authIdTokenMaxAge")||SYt;let Jbe=null;const CYt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>TYt)return;const i=n==null?void 0:n.token;Jbe!==i&&(Jbe=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function V4(e=nse()){const t=mA(e,"auth");if(t.isInitialized())return t.getImmediate();const n=nGt(e,{popupRedirectResolver:q4e,persistence:[NGt,wGt,F4e]}),r=u4e("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=CYt(s.toString());pGt(n,o,()=>o(n.currentUser)),hGt(n,a=>o(a))}}const i=o4e("auth");return i&&iGt(n,`http://${i}`),n}function AYt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}JWt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=sp("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",AYt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xYt("Browser");var DYt="firebase",IYt="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ip(DYt,IYt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4e="firebasestorage.googleapis.com",G4e="storageBucket",kYt=2*60*1e3,RYt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho extends gg{constructor(t,n,r=0){super(kH(t),`Firebase Storage: ${n} (${kH(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ho.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return kH(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var fo;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(fo||(fo={}));function kH(e){return"storage/"+e}function dse(){const e="An unknown error occurred, please check the error payload for server response.";return new ho(fo.UNKNOWN,e)}function NYt(e){return new ho(fo.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function PYt(e){return new ho(fo.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function OYt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ho(fo.UNAUTHENTICATED,e)}function MYt(){return new ho(fo.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function $Yt(e){return new ho(fo.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function FYt(){return new ho(fo.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function LYt(){return new ho(fo.CANCELED,"User canceled the upload/download.")}function BYt(e){return new ho(fo.INVALID_URL,"Invalid URL '"+e+"'.")}function jYt(e){return new ho(fo.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function UYt(){return new ho(fo.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+G4e+"' property when initializing the app?")}function zYt(){return new ho(fo.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function VYt(){return new ho(fo.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function HYt(e){return new ho(fo.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function zK(e){return new ho(fo.INVALID_ARGUMENT,e)}function Y4e(){return new ho(fo.APP_DELETED,"The Firebase app was deleted.")}function qYt(e){return new ho(fo.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Lk(e,t){return new ho(fo.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function MD(e){throw new ho(fo.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Il.makeFromUrl(t,n)}catch{return new Il(t,"")}if(r.path==="")return r;throw jYt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(S){S.path_=decodeURIComponent(S.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===W4e?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),w=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let S=0;S<w.length;S++){const E=w[S],T=E.regex.exec(t);if(T){const C=T[E.indices.bucket];let A=T[E.indices.path];A||(A=""),r=new Il(C,A),E.postModify(r);break}}if(r==null)throw BYt(t);return r}}class WYt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GYt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,f(w)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function YYt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KYt(e){return e!==void 0}function XYt(e){return typeof e=="object"&&!Array.isArray(e)}function hse(e){return typeof e=="string"||e instanceof String}function Zbe(e){return pse()&&e instanceof Blob}function pse(){return typeof Blob<"u"}function VK(e,t,n,r){if(r<t)throw zK(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw zK(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function K4e(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var N_;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(N_||(N_={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QYt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JYt{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new zM(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===N_.NO_ERROR,u=s.getStatus();if(!a||QYt(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===N_.ABORT;r(!1,new zM(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new zM(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());KYt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=dse();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?Y4e():LYt();o(u)}else{const u=FYt();o(u)}};this.canceled_?n(!1,new zM(!1,null,!0)):this.backoffId_=GYt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&YYt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class zM{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function ZYt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function eKt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function tKt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function nKt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function rKt(e,t,n,r,i,s,o=!0){const a=K4e(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return tKt(l,t),ZYt(l,n),eKt(l,s),nKt(l,r),new JYt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iKt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function sKt(...e){const t=iKt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(pse())return new Blob(e);throw new ho(fo.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function oKt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aKt(e){if(typeof atob>"u")throw HYt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class RH{constructor(t,n){this.data=t,this.contentType=n||null}}function uKt(e,t){switch(e){case _m.RAW:return new RH(X4e(t));case _m.BASE64:case _m.BASE64URL:return new RH(Q4e(e,t));case _m.DATA_URL:return new RH(cKt(t),fKt(t))}throw dse()}function X4e(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function lKt(e){let t;try{t=decodeURIComponent(e)}catch{throw Lk(_m.DATA_URL,"Malformed data URL.")}return X4e(t)}function Q4e(e,t){switch(e){case _m.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw Lk(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case _m.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw Lk(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=aKt(t)}catch(i){throw i.message.includes("polyfill")?i:Lk(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class J4e{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw Lk(_m.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=dKt(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function cKt(e){const t=new J4e(e);return t.base64?Q4e(_m.BASE64,t.rest):lKt(t.rest)}function fKt(e){return new J4e(e).contentType}function dKt(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(t,n){let r=0,i="";Zbe(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(Zbe(this.data_)){const r=this.data_,i=oKt(r,t,n);return i===null?null:new $v(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new $v(r,!0)}}static getBlob(...t){if(pse()){const n=t.map(r=>r instanceof $v?r.data_:r);return new $v(sKt.apply(null,n))}else{const n=t.map(o=>hse(o)?uKt(_m.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new $v(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mse(e){let t;try{t=JSON.parse(e)}catch{return null}return XYt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hKt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function pKt(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function Z4e(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mKt(e,t){return t}class pl{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||mKt}}let VM=null;function gKt(e){return!hse(e)||e.length<2?e:Z4e(e)}function e5e(){if(VM)return VM;const e=[];e.push(new pl("bucket")),e.push(new pl("generation")),e.push(new pl("metageneration")),e.push(new pl("name","fullPath",!0));function t(s,o){return gKt(o)}const n=new pl("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new pl("size");return i.xform=r,e.push(i),e.push(new pl("timeCreated")),e.push(new pl("updated")),e.push(new pl("md5Hash",null,!0)),e.push(new pl("cacheControl",null,!0)),e.push(new pl("contentDisposition",null,!0)),e.push(new pl("contentEncoding",null,!0)),e.push(new pl("contentLanguage",null,!0)),e.push(new pl("contentType",null,!0)),e.push(new pl("metadata","customMetadata",!0)),VM=e,VM}function yKt(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Il(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function vKt(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return yKt(r,e),r}function t5e(e,t,n){const r=mse(t);return r===null?null:vKt(e,r,n)}function bKt(e,t,n,r){const i=mse(t);if(i===null||!hse(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=KP(d,n,r),p=K4e({alt:"media",token:l});return h+p})[0]}function wKt(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ewe="prefixes",twe="items";function _Kt(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[ewe])for(const i of n[ewe]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Il(t,s));r.prefixes.push(o)}if(n[twe])for(const i of n[twe]){const s=e._makeStorageReference(new Il(t,i.name));r.items.push(s)}return r}function EKt(e,t,n){const r=mse(n);return r===null?null:_Kt(e,t,r)}class R9{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gse(e){if(!e)throw dse()}function xKt(e,t){function n(r,i){const s=t5e(e,i,t);return gse(s!==null),s}return n}function SKt(e,t){function n(r,i){const s=EKt(e,t,i);return gse(s!==null),s}return n}function TKt(e,t){function n(r,i){const s=t5e(e,i,t);return gse(s!==null),bKt(s,i,e.host,e._protocol)}return n}function yse(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=MYt():i=OYt():n.getStatus()===402?i=PYt(e.bucket):n.getStatus()===403?i=$Yt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function n5e(e){const t=yse(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=NYt(e.path)),s.serverResponse=i.serverResponse,s}return n}function CKt(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=KP(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new R9(a,u,SKt(e,t.bucket),l);return c.urlParams=s,c.errorHandler=yse(t),c}function AKt(e,t,n){const r=t.fullServerUrl(),i=KP(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new R9(i,s,TKt(e,n),o);return a.errorHandler=n5e(t),a}function DKt(e,t){const n=t.fullServerUrl(),r=KP(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new R9(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=n5e(t),a}function IKt(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function kKt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=IKt(null,t)),r}function RKt(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let S=0;S<2;S++)w=w+Math.random().toString().slice(2);return w}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=kKt(t,r,i),c=wKt(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=$v.getBlob(f,r,d);if(h===null)throw zYt();const p={name:l.fullPath},m=KP(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,b=new R9(m,g,xKt(e,n),y);return b.urlParams=p,b.headers=o,b.body=h.uploadData(),b.errorHandler=yse(t),b}class NKt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=N_.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=N_.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=N_.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw MD("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw MD("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw MD("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw MD("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw MD("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class PKt extends NKt{initXhr(){this.xhr_.responseType="text"}}function N9(){return new PKt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(t,n){this._service=t,n instanceof Il?this._location=n:this._location=Il.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new cE(t,n)}get root(){const t=new Il(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Z4e(this._location.path)}get storage(){return this._service}get parent(){const t=hKt(this._location.path);if(t===null)return null;const n=new Il(this._location.bucket,t);return new cE(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw qYt(t)}}function OKt(e,t,n){e._throwIfRoot("uploadBytes");const r=RKt(e.storage,e._location,e5e(),new $v(t,!0),n);return e.storage.makeRequestWithTokens(r,N9).then(i=>({metadata:i,ref:e}))}function MKt(e){const t={prefixes:[],items:[]};return r5e(e,t).then(()=>t)}async function r5e(e,t,n){const i=await $Kt(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await r5e(e,t,i.nextPageToken)}function $Kt(e,t){t!=null&&typeof t.maxResults=="number"&&VK("options.maxResults",1,1e3,t.maxResults);const n=t,r=CKt(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,N9)}function FKt(e){e._throwIfRoot("getDownloadURL");const t=AKt(e.storage,e._location,e5e());return e.storage.makeRequestWithTokens(t,N9).then(n=>{if(n===null)throw VYt();return n})}function LKt(e){e._throwIfRoot("deleteObject");const t=DKt(e.storage,e._location);return e.storage.makeRequestWithTokens(t,N9)}function BKt(e,t){const n=pKt(e._location.path,t),r=new Il(e._location.bucket,n);return new cE(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jKt(e){return/^[A-Za-z]+:\/\//.test(e)}function UKt(e,t){return new cE(e,t)}function i5e(e,t){if(e instanceof vse){const n=e;if(n._bucket==null)throw UYt();const r=new cE(n,n._bucket);return t!=null?i5e(r,t):r}else return t!==void 0?BKt(e,t):e}function zKt(e,t){if(t&&jKt(t)){if(e instanceof vse)return UKt(e,t);throw zK("To use ref(service, url), the first argument must be a Storage instance.")}else return i5e(e,t)}function nwe(e,t){const n=t==null?void 0:t[G4e];return n==null?null:Il.makeFromBucketSpec(n,e)}function VKt(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:eqt(i,e.app.options.projectId))}class vse{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=W4e,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=kYt,this._maxUploadRetryTime=RYt,this._requests=new Set,i!=null?this._bucket=Il.makeFromBucketSpec(i,this._host):this._bucket=nwe(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Il.makeFromBucketSpec(this._url,t):this._bucket=nwe(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){VK("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){VK("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new cE(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new WYt(Y4e());{const o=rKt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const rwe="@firebase/storage",iwe="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5e="storage";function HM(e,t,n){return e=ls(e),OKt(e,t,n)}function $D(e){return e=ls(e),MKt(e)}function NH(e){return e=ls(e),FKt(e)}function swe(e){return e=ls(e),LKt(e)}function ld(e,t){return e=ls(e),zKt(e,t)}function HKt(e=nse(),t){e=ls(e);const r=mA(e,s5e).getImmediate({identifier:t}),i=ZHt("storage");return i&&qKt(r,...i),r}function qKt(e,t,n,r={}){VKt(e,t,n,r)}function WKt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new vse(n,r,i,t,tx)}function GKt(){fy(new Qm(s5e,WKt,"PUBLIC").setMultipleInstances(!0)),ip(rwe,iwe,""),ip(rwe,iwe,"esm2017")}GKt();var owe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var P_,o5e;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(C,A){function I(){}I.prototype=A.prototype,C.D=A.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(k,N,F){for(var M=Array(arguments.length-2),L=2;L<arguments.length;L++)M[L-2]=arguments[L];return A.prototype[N].apply(k,M)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,A,I){I||(I=0);var k=Array(16);if(typeof A=="string")for(var N=0;16>N;++N)k[N]=A.charCodeAt(I++)|A.charCodeAt(I++)<<8|A.charCodeAt(I++)<<16|A.charCodeAt(I++)<<24;else for(N=0;16>N;++N)k[N]=A[I++]|A[I++]<<8|A[I++]<<16|A[I++]<<24;A=C.g[0],I=C.g[1],N=C.g[2];var F=C.g[3],M=A+(F^I&(N^F))+k[0]+3614090360&4294967295;A=I+(M<<7&4294967295|M>>>25),M=F+(N^A&(I^N))+k[1]+3905402710&4294967295,F=A+(M<<12&4294967295|M>>>20),M=N+(I^F&(A^I))+k[2]+606105819&4294967295,N=F+(M<<17&4294967295|M>>>15),M=I+(A^N&(F^A))+k[3]+3250441966&4294967295,I=N+(M<<22&4294967295|M>>>10),M=A+(F^I&(N^F))+k[4]+4118548399&4294967295,A=I+(M<<7&4294967295|M>>>25),M=F+(N^A&(I^N))+k[5]+1200080426&4294967295,F=A+(M<<12&4294967295|M>>>20),M=N+(I^F&(A^I))+k[6]+2821735955&4294967295,N=F+(M<<17&4294967295|M>>>15),M=I+(A^N&(F^A))+k[7]+4249261313&4294967295,I=N+(M<<22&4294967295|M>>>10),M=A+(F^I&(N^F))+k[8]+1770035416&4294967295,A=I+(M<<7&4294967295|M>>>25),M=F+(N^A&(I^N))+k[9]+2336552879&4294967295,F=A+(M<<12&4294967295|M>>>20),M=N+(I^F&(A^I))+k[10]+4294925233&4294967295,N=F+(M<<17&4294967295|M>>>15),M=I+(A^N&(F^A))+k[11]+2304563134&4294967295,I=N+(M<<22&4294967295|M>>>10),M=A+(F^I&(N^F))+k[12]+1804603682&4294967295,A=I+(M<<7&4294967295|M>>>25),M=F+(N^A&(I^N))+k[13]+4254626195&4294967295,F=A+(M<<12&4294967295|M>>>20),M=N+(I^F&(A^I))+k[14]+2792965006&4294967295,N=F+(M<<17&4294967295|M>>>15),M=I+(A^N&(F^A))+k[15]+1236535329&4294967295,I=N+(M<<22&4294967295|M>>>10),M=A+(N^F&(I^N))+k[1]+4129170786&4294967295,A=I+(M<<5&4294967295|M>>>27),M=F+(I^N&(A^I))+k[6]+3225465664&4294967295,F=A+(M<<9&4294967295|M>>>23),M=N+(A^I&(F^A))+k[11]+643717713&4294967295,N=F+(M<<14&4294967295|M>>>18),M=I+(F^A&(N^F))+k[0]+3921069994&4294967295,I=N+(M<<20&4294967295|M>>>12),M=A+(N^F&(I^N))+k[5]+3593408605&4294967295,A=I+(M<<5&4294967295|M>>>27),M=F+(I^N&(A^I))+k[10]+38016083&4294967295,F=A+(M<<9&4294967295|M>>>23),M=N+(A^I&(F^A))+k[15]+3634488961&4294967295,N=F+(M<<14&4294967295|M>>>18),M=I+(F^A&(N^F))+k[4]+3889429448&4294967295,I=N+(M<<20&4294967295|M>>>12),M=A+(N^F&(I^N))+k[9]+568446438&4294967295,A=I+(M<<5&4294967295|M>>>27),M=F+(I^N&(A^I))+k[14]+3275163606&4294967295,F=A+(M<<9&4294967295|M>>>23),M=N+(A^I&(F^A))+k[3]+4107603335&4294967295,N=F+(M<<14&4294967295|M>>>18),M=I+(F^A&(N^F))+k[8]+1163531501&4294967295,I=N+(M<<20&4294967295|M>>>12),M=A+(N^F&(I^N))+k[13]+2850285829&4294967295,A=I+(M<<5&4294967295|M>>>27),M=F+(I^N&(A^I))+k[2]+4243563512&4294967295,F=A+(M<<9&4294967295|M>>>23),M=N+(A^I&(F^A))+k[7]+1735328473&4294967295,N=F+(M<<14&4294967295|M>>>18),M=I+(F^A&(N^F))+k[12]+2368359562&4294967295,I=N+(M<<20&4294967295|M>>>12),M=A+(I^N^F)+k[5]+4294588738&4294967295,A=I+(M<<4&4294967295|M>>>28),M=F+(A^I^N)+k[8]+2272392833&4294967295,F=A+(M<<11&4294967295|M>>>21),M=N+(F^A^I)+k[11]+1839030562&4294967295,N=F+(M<<16&4294967295|M>>>16),M=I+(N^F^A)+k[14]+4259657740&4294967295,I=N+(M<<23&4294967295|M>>>9),M=A+(I^N^F)+k[1]+2763975236&4294967295,A=I+(M<<4&4294967295|M>>>28),M=F+(A^I^N)+k[4]+1272893353&4294967295,F=A+(M<<11&4294967295|M>>>21),M=N+(F^A^I)+k[7]+4139469664&4294967295,N=F+(M<<16&4294967295|M>>>16),M=I+(N^F^A)+k[10]+3200236656&4294967295,I=N+(M<<23&4294967295|M>>>9),M=A+(I^N^F)+k[13]+681279174&4294967295,A=I+(M<<4&4294967295|M>>>28),M=F+(A^I^N)+k[0]+3936430074&4294967295,F=A+(M<<11&4294967295|M>>>21),M=N+(F^A^I)+k[3]+3572445317&4294967295,N=F+(M<<16&4294967295|M>>>16),M=I+(N^F^A)+k[6]+76029189&4294967295,I=N+(M<<23&4294967295|M>>>9),M=A+(I^N^F)+k[9]+3654602809&4294967295,A=I+(M<<4&4294967295|M>>>28),M=F+(A^I^N)+k[12]+3873151461&4294967295,F=A+(M<<11&4294967295|M>>>21),M=N+(F^A^I)+k[15]+530742520&4294967295,N=F+(M<<16&4294967295|M>>>16),M=I+(N^F^A)+k[2]+3299628645&4294967295,I=N+(M<<23&4294967295|M>>>9),M=A+(N^(I|~F))+k[0]+4096336452&4294967295,A=I+(M<<6&4294967295|M>>>26),M=F+(I^(A|~N))+k[7]+1126891415&4294967295,F=A+(M<<10&4294967295|M>>>22),M=N+(A^(F|~I))+k[14]+2878612391&4294967295,N=F+(M<<15&4294967295|M>>>17),M=I+(F^(N|~A))+k[5]+4237533241&4294967295,I=N+(M<<21&4294967295|M>>>11),M=A+(N^(I|~F))+k[12]+1700485571&4294967295,A=I+(M<<6&4294967295|M>>>26),M=F+(I^(A|~N))+k[3]+2399980690&4294967295,F=A+(M<<10&4294967295|M>>>22),M=N+(A^(F|~I))+k[10]+4293915773&4294967295,N=F+(M<<15&4294967295|M>>>17),M=I+(F^(N|~A))+k[1]+2240044497&4294967295,I=N+(M<<21&4294967295|M>>>11),M=A+(N^(I|~F))+k[8]+1873313359&4294967295,A=I+(M<<6&4294967295|M>>>26),M=F+(I^(A|~N))+k[15]+4264355552&4294967295,F=A+(M<<10&4294967295|M>>>22),M=N+(A^(F|~I))+k[6]+2734768916&4294967295,N=F+(M<<15&4294967295|M>>>17),M=I+(F^(N|~A))+k[13]+1309151649&4294967295,I=N+(M<<21&4294967295|M>>>11),M=A+(N^(I|~F))+k[4]+4149444226&4294967295,A=I+(M<<6&4294967295|M>>>26),M=F+(I^(A|~N))+k[11]+3174756917&4294967295,F=A+(M<<10&4294967295|M>>>22),M=N+(A^(F|~I))+k[2]+718787259&4294967295,N=F+(M<<15&4294967295|M>>>17),M=I+(F^(N|~A))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(N+(M<<21&4294967295|M>>>11))&4294967295,C.g[2]=C.g[2]+N&4294967295,C.g[3]=C.g[3]+F&4294967295}r.prototype.u=function(C,A){A===void 0&&(A=C.length);for(var I=A-this.blockSize,k=this.B,N=this.h,F=0;F<A;){if(N==0)for(;F<=I;)i(this,C,F),F+=this.blockSize;if(typeof C=="string"){for(;F<A;)if(k[N++]=C.charCodeAt(F++),N==this.blockSize){i(this,k),N=0;break}}else for(;F<A;)if(k[N++]=C[F++],N==this.blockSize){i(this,k),N=0;break}}this.h=N,this.o+=A},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;var I=8*this.o;for(A=C.length-8;A<C.length;++A)C[A]=I&255,I/=256;for(this.u(C),C=Array(16),A=I=0;4>A;++A)for(var k=0;32>k;k+=8)C[I++]=this.g[A]>>>k&255;return C};function s(C,A){var I=a;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=A(C)}function o(C,A){this.h=A;for(var I=[],k=!0,N=C.length-1;0<=N;N--){var F=C[N]|0;k&&F==A||(I[N]=F,k=!1)}this.g=I}var a={};function u(C){return-128<=C&&128>C?s(C,function(A){return new o([A|0],0>A?-1:0)}):new o([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return g(l(-C));for(var A=[],I=1,k=0;C>=I;k++)A[k]=C/I|0,I*=4294967296;return new o(A,0)}function c(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return g(c(C.substring(1),A));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(A,8)),k=f,N=0;N<C.length;N+=8){var F=Math.min(8,C.length-N),M=parseInt(C.substring(N,N+F),A);8>F?(F=l(Math.pow(A,F)),k=k.j(F).add(l(M))):(k=k.j(I),k=k.add(l(M)))}return k}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var C=0,A=1,I=0;I<this.g.length;I++){var k=this.i(I);C+=(0<=k?k:4294967296+k)*A,A*=4294967296}return C},e.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(p(this))return"0";if(m(this))return"-"+g(this).toString(C);for(var A=l(Math.pow(C,6)),I=this,k="";;){var N=S(I,A).g;I=y(I,N.j(A));var F=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=N,p(I))return F+k;for(;6>F.length;)F="0"+F;k=F+k}},e.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function p(C){if(C.h!=0)return!1;for(var A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function m(C){return C.h==-1}e.l=function(C){return C=y(this,C),m(C)?-1:p(C)?0:1};function g(C){for(var A=C.g.length,I=[],k=0;k<A;k++)I[k]=~C.g[k];return new o(I,~C.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(C){for(var A=Math.max(this.g.length,C.g.length),I=[],k=0,N=0;N<=A;N++){var F=k+(this.i(N)&65535)+(C.i(N)&65535),M=(F>>>16)+(this.i(N)>>>16)+(C.i(N)>>>16);k=M>>>16,F&=65535,M&=65535,I[N]=M<<16|F}return new o(I,I[I.length-1]&-2147483648?-1:0)};function y(C,A){return C.add(g(A))}e.j=function(C){if(p(this)||p(C))return f;if(m(this))return m(C)?g(this).j(g(C)):g(g(this).j(C));if(m(C))return g(this.j(g(C)));if(0>this.l(h)&&0>C.l(h))return l(this.m()*C.m());for(var A=this.g.length+C.g.length,I=[],k=0;k<2*A;k++)I[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<C.g.length;N++){var F=this.i(k)>>>16,M=this.i(k)&65535,L=C.i(N)>>>16,j=C.i(N)&65535;I[2*k+2*N]+=M*j,b(I,2*k+2*N),I[2*k+2*N+1]+=F*j,b(I,2*k+2*N+1),I[2*k+2*N+1]+=M*L,b(I,2*k+2*N+1),I[2*k+2*N+2]+=F*L,b(I,2*k+2*N+2)}for(k=0;k<A;k++)I[k]=I[2*k+1]<<16|I[2*k];for(k=A;k<2*A;k++)I[k]=0;return new o(I,0)};function b(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function w(C,A){this.g=C,this.h=A}function S(C,A){if(p(A))throw Error("division by zero");if(p(C))return new w(f,f);if(m(C))return A=S(g(C),A),new w(g(A.g),g(A.h));if(m(A))return A=S(C,g(A)),new w(g(A.g),A.h);if(30<C.g.length){if(m(C)||m(A))throw Error("slowDivide_ only works with positive integers.");for(var I=d,k=A;0>=k.l(C);)I=E(I),k=E(k);var N=T(I,1),F=T(k,1);for(k=T(k,2),I=T(I,2);!p(k);){var M=F.add(k);0>=M.l(C)&&(N=N.add(I),F=M),k=T(k,1),I=T(I,1)}return A=y(C,N.j(A)),new w(N,A)}for(N=f;0<=C.l(A);){for(I=Math.max(1,Math.floor(C.m()/A.m())),k=Math.ceil(Math.log(I)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),F=l(I),M=F.j(A);m(M)||0<M.l(C);)I-=k,F=l(I),M=F.j(A);p(F)&&(F=d),N=N.add(F),C=y(C,M)}return new w(N,C)}e.A=function(C){return S(this,C).h},e.and=function(C){for(var A=Math.max(this.g.length,C.g.length),I=[],k=0;k<A;k++)I[k]=this.i(k)&C.i(k);return new o(I,this.h&C.h)},e.or=function(C){for(var A=Math.max(this.g.length,C.g.length),I=[],k=0;k<A;k++)I[k]=this.i(k)|C.i(k);return new o(I,this.h|C.h)},e.xor=function(C){for(var A=Math.max(this.g.length,C.g.length),I=[],k=0;k<A;k++)I[k]=this.i(k)^C.i(k);return new o(I,this.h^C.h)};function E(C){for(var A=C.g.length+1,I=[],k=0;k<A;k++)I[k]=C.i(k)<<1|C.i(k-1)>>>31;return new o(I,C.h)}function T(C,A){var I=A>>5;A%=32;for(var k=C.g.length-I,N=[],F=0;F<k;F++)N[F]=0<A?C.i(F+I)>>>A|C.i(F+I+1)<<32-A:C.i(F+I);return new o(N,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,o5e=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,P_=o}).apply(typeof owe<"u"?owe:typeof self<"u"?self:typeof window<"u"?window:{});var qM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var a5e,u5e,PI,l5e,wF,HK,c5e,f5e,d5e;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(D,U,X){return D==Array.prototype||D==Object.prototype||(D[U]=X.value),D};function n(D){D=[typeof globalThis=="object"&&globalThis,D,typeof window=="object"&&window,typeof self=="object"&&self,typeof qM=="object"&&qM];for(var U=0;U<D.length;++U){var X=D[U];if(X&&X.Math==Math)return X}throw Error("Cannot find global object")}var r=n(this);function i(D,U){if(U)e:{var X=r;D=D.split(".");for(var re=0;re<D.length-1;re++){var $e=D[re];if(!($e in X))break e;X=X[$e]}D=D[D.length-1],re=X[D],U=U(re),U!=re&&U!=null&&t(X,D,{configurable:!0,writable:!0,value:U})}}function s(D,U){D instanceof String&&(D+="");var X=0,re=!1,$e={next:function(){if(!re&&X<D.length){var Xe=X++;return{value:U(Xe,D[Xe]),done:!1}}return re=!0,{done:!0,value:void 0}}};return $e[Symbol.iterator]=function(){return $e},$e}i("Array.prototype.values",function(D){return D||function(){return s(this,function(U,X){return X})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(D){var U=typeof D;return U=U!="object"?U:D?Array.isArray(D)?"array":U:"null",U=="array"||U=="object"&&typeof D.length=="number"}function l(D){var U=typeof D;return U=="object"&&D!=null||U=="function"}function c(D,U,X){return D.call.apply(D.bind,arguments)}function f(D,U,X){if(!D)throw Error();if(2<arguments.length){var re=Array.prototype.slice.call(arguments,2);return function(){var $e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($e,re),D.apply(U,$e)}}return function(){return D.apply(U,arguments)}}function d(D,U,X){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(D,U){var X=Array.prototype.slice.call(arguments,1);return function(){var re=X.slice();return re.push.apply(re,arguments),D.apply(this,re)}}function p(D,U){function X(){}X.prototype=U.prototype,D.aa=U.prototype,D.prototype=new X,D.prototype.constructor=D,D.Qb=function(re,$e,Xe){for(var Mt=Array(arguments.length-2),bi=2;bi<arguments.length;bi++)Mt[bi-2]=arguments[bi];return U.prototype[$e].apply(re,Mt)}}function m(D){const U=D.length;if(0<U){const X=Array(U);for(let re=0;re<U;re++)X[re]=D[re];return X}return[]}function g(D,U){for(let X=1;X<arguments.length;X++){const re=arguments[X];if(u(re)){const $e=D.length||0,Xe=re.length||0;D.length=$e+Xe;for(let Mt=0;Mt<Xe;Mt++)D[$e+Mt]=re[Mt]}else D.push(re)}}class y{constructor(U,X){this.i=U,this.j=X,this.h=0,this.g=null}get(){let U;return 0<this.h?(this.h--,U=this.g,this.g=U.next,U.next=null):U=this.i(),U}}function b(D){return/^[\s\xa0]*$/.test(D)}function w(){var D=a.navigator;return D&&(D=D.userAgent)?D:""}function S(D){return S[" "](D),D}S[" "]=function(){};var E=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function T(D,U,X){for(const re in D)U.call(X,D[re],re,D)}function C(D,U){for(const X in D)U.call(void 0,D[X],X,D)}function A(D){const U={};for(const X in D)U[X]=D[X];return U}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(D,U){let X,re;for(let $e=1;$e<arguments.length;$e++){re=arguments[$e];for(X in re)D[X]=re[X];for(let Xe=0;Xe<I.length;Xe++)X=I[Xe],Object.prototype.hasOwnProperty.call(re,X)&&(D[X]=re[X])}}function N(D){var U=1;D=D.split(":");const X=[];for(;0<U&&D.length;)X.push(D.shift()),U--;return D.length&&X.push(D.join(":")),X}function F(D){a.setTimeout(()=>{throw D},0)}function M(){var D=G;let U=null;return D.g&&(U=D.g,D.g=D.g.next,D.g||(D.h=null),U.next=null),U}class L{constructor(){this.h=this.g=null}add(U,X){const re=j.get();re.set(U,X),this.h?this.h.next=re:this.g=re,this.h=re}}var j=new y(()=>new B,D=>D.reset());class B{constructor(){this.next=this.g=this.h=null}set(U,X){this.h=U,this.g=X,this.next=null}reset(){this.next=this.g=this.h=null}}let z,V=!1,G=new L,$=()=>{const D=a.Promise.resolve(void 0);z=()=>{D.then(W)}};var W=()=>{for(var D;D=M();){try{D.h.call(D.g)}catch(X){F(X)}var U=j;U.j(D),100>U.h&&(U.h++,D.next=U.g,U.g=D)}V=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(D,U){this.type=D,this.g=this.target=U,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var D=!1,U=Object.defineProperty({},"passive",{get:function(){D=!0}});try{const X=()=>{};a.addEventListener("test",X,U),a.removeEventListener("test",X,U)}catch{}return D}();function Z(D,U){if(q.call(this,D?D.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,D){var X=this.type=D.type,re=D.changedTouches&&D.changedTouches.length?D.changedTouches[0]:null;if(this.target=D.target||D.srcElement,this.g=U,U=D.relatedTarget){if(E){e:{try{S(U.nodeName);var $e=!0;break e}catch{}$e=!1}$e||(U=null)}}else X=="mouseover"?U=D.fromElement:X=="mouseout"&&(U=D.toElement);this.relatedTarget=U,re?(this.clientX=re.clientX!==void 0?re.clientX:re.pageX,this.clientY=re.clientY!==void 0?re.clientY:re.pageY,this.screenX=re.screenX||0,this.screenY=re.screenY||0):(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0),this.button=D.button,this.key=D.key||"",this.ctrlKey=D.ctrlKey,this.altKey=D.altKey,this.shiftKey=D.shiftKey,this.metaKey=D.metaKey,this.pointerId=D.pointerId||0,this.pointerType=typeof D.pointerType=="string"?D.pointerType:ae[D.pointerType]||"",this.state=D.state,this.i=D,D.defaultPrevented&&Z.aa.h.call(this)}}p(Z,q);var ae={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var D=this.i;D.preventDefault?D.preventDefault():D.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),Se=0;function we(D,U,X,re,$e){this.listener=D,this.proxy=null,this.src=U,this.type=X,this.capture=!!re,this.ha=$e,this.key=++Se,this.da=this.fa=!1}function Ce(D){D.da=!0,D.listener=null,D.proxy=null,D.src=null,D.ha=null}function Le(D){this.src=D,this.g={},this.h=0}Le.prototype.add=function(D,U,X,re,$e){var Xe=D.toString();D=this.g[Xe],D||(D=this.g[Xe]=[],this.h++);var Mt=Ze(D,U,re,$e);return-1<Mt?(U=D[Mt],X||(U.fa=!1)):(U=new we(U,this.src,Xe,!!re,$e),U.fa=X,D.push(U)),U};function ke(D,U){var X=U.type;if(X in D.g){var re=D.g[X],$e=Array.prototype.indexOf.call(re,U,void 0),Xe;(Xe=0<=$e)&&Array.prototype.splice.call(re,$e,1),Xe&&(Ce(U),D.g[X].length==0&&(delete D.g[X],D.h--))}}function Ze(D,U,X,re){for(var $e=0;$e<D.length;++$e){var Xe=D[$e];if(!Xe.da&&Xe.listener==U&&Xe.capture==!!X&&Xe.ha==re)return $e}return-1}var Ke="closure_lm_"+(1e6*Math.random()|0),Ct={};function wt(D,U,X,re,$e){if(Array.isArray(U)){for(var Xe=0;Xe<U.length;Xe++)wt(D,U[Xe],X,re,$e);return null}return X=_e(X),D&&D[be]?D.K(U,X,l(re)?!!re.capture:!!re,$e):Re(D,U,X,!1,re,$e)}function Re(D,U,X,re,$e,Xe){if(!U)throw Error("Invalid event type");var Mt=l($e)?!!$e.capture:!!$e,bi=Q(D);if(bi||(D[Ke]=bi=new Le(D)),X=bi.add(U,X,re,Mt,Xe),X.proxy)return X;if(re=He(),X.proxy=re,re.src=D,re.listener=X,D.addEventListener)Y||($e=Mt),$e===void 0&&($e=!1),D.addEventListener(U.toString(),re,$e);else if(D.attachEvent)D.attachEvent(Vt(U.toString()),re);else if(D.addListener&&D.removeListener)D.addListener(re);else throw Error("addEventListener and attachEvent are unavailable.");return X}function He(){function D(X){return U.call(D.src,D.listener,X)}const U=ht;return D}function lt(D,U,X,re,$e){if(Array.isArray(U))for(var Xe=0;Xe<U.length;Xe++)lt(D,U[Xe],X,re,$e);else re=l(re)?!!re.capture:!!re,X=_e(X),D&&D[be]?(D=D.i,U=String(U).toString(),U in D.g&&(Xe=D.g[U],X=Ze(Xe,X,re,$e),-1<X&&(Ce(Xe[X]),Array.prototype.splice.call(Xe,X,1),Xe.length==0&&(delete D.g[U],D.h--)))):D&&(D=Q(D))&&(U=D.g[U.toString()],D=-1,U&&(D=Ze(U,X,re,$e)),(X=-1<D?U[D]:null)&&St(X))}function St(D){if(typeof D!="number"&&D&&!D.da){var U=D.src;if(U&&U[be])ke(U.i,D);else{var X=D.type,re=D.proxy;U.removeEventListener?U.removeEventListener(X,re,D.capture):U.detachEvent?U.detachEvent(Vt(X),re):U.addListener&&U.removeListener&&U.removeListener(re),(X=Q(U))?(ke(X,D),X.h==0&&(X.src=null,U[Ke]=null)):Ce(D)}}}function Vt(D){return D in Ct?Ct[D]:Ct[D]="on"+D}function ht(D,U){if(D.da)D=!0;else{U=new Z(U,this);var X=D.listener,re=D.ha||D.src;D.fa&&St(D),D=X.call(re,U)}return D}function Q(D){return D=D[Ke],D instanceof Le?D:null}var de="__closure_events_fn_"+(1e9*Math.random()>>>0);function _e(D){return typeof D=="function"?D:(D[de]||(D[de]=function(U){return D.handleEvent(U)}),D[de])}function oe(){K.call(this),this.i=new Le(this),this.M=this,this.F=null}p(oe,K),oe.prototype[be]=!0,oe.prototype.removeEventListener=function(D,U,X,re){lt(this,D,U,X,re)};function he(D,U){var X,re=D.F;if(re)for(X=[];re;re=re.F)X.push(re);if(D=D.M,re=U.type||U,typeof U=="string")U=new q(U,D);else if(U instanceof q)U.target=U.target||D;else{var $e=U;U=new q(re,D),k(U,$e)}if($e=!0,X)for(var Xe=X.length-1;0<=Xe;Xe--){var Mt=U.g=X[Xe];$e=Ee(Mt,re,!0,U)&&$e}if(Mt=U.g=D,$e=Ee(Mt,re,!0,U)&&$e,$e=Ee(Mt,re,!1,U)&&$e,X)for(Xe=0;Xe<X.length;Xe++)Mt=U.g=X[Xe],$e=Ee(Mt,re,!1,U)&&$e}oe.prototype.N=function(){if(oe.aa.N.call(this),this.i){var D=this.i,U;for(U in D.g){for(var X=D.g[U],re=0;re<X.length;re++)Ce(X[re]);delete D.g[U],D.h--}}this.F=null},oe.prototype.K=function(D,U,X,re){return this.i.add(String(D),U,!1,X,re)},oe.prototype.L=function(D,U,X,re){return this.i.add(String(D),U,!0,X,re)};function Ee(D,U,X,re){if(U=D.i.g[String(U)],!U)return!0;U=U.concat();for(var $e=!0,Xe=0;Xe<U.length;++Xe){var Mt=U[Xe];if(Mt&&!Mt.da&&Mt.capture==X){var bi=Mt.listener,Qo=Mt.ha||Mt.src;Mt.fa&&ke(D.i,Mt),$e=bi.call(Qo,re)!==!1&&$e}}return $e&&!re.defaultPrevented}function Fe(D,U,X){if(typeof D=="function")X&&(D=d(D,X));else if(D&&typeof D.handleEvent=="function")D=d(D.handleEvent,D);else throw Error("Invalid listener argument");return 2147483647<Number(U)?-1:a.setTimeout(D,U||0)}function je(D){D.g=Fe(()=>{D.g=null,D.i&&(D.i=!1,je(D))},D.l);const U=D.h;D.h=null,D.m.apply(null,U)}class ct extends K{constructor(U,X){super(),this.m=U,this.l=X,this.h=null,this.i=!1,this.g=null}j(U){this.h=arguments,this.g?this.i=!0:je(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rt(D){K.call(this),this.h=D,this.g={}}p(rt,K);var qt=[];function en(D){T(D.g,function(U,X){this.g.hasOwnProperty(X)&&St(U)},D),D.g={}}rt.prototype.N=function(){rt.aa.N.call(this),en(this)},rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yt=a.JSON.stringify,un=a.JSON.parse,Sn=class{stringify(D){return a.JSON.stringify(D,void 0)}parse(D){return a.JSON.parse(D,void 0)}};function Bn(){}Bn.prototype.h=null;function Ci(D){return D.h||(D.h=D.i())}function gi(){}var jn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ki(){q.call(this,"d")}p(Ki,q);function ti(){q.call(this,"c")}p(ti,q);var Es={},Jc=null;function Va(){return Jc=Jc||new oe}Es.La="serverreachability";function sl(D){q.call(this,Es.La,D)}p(sl,q);function Kr(D){const U=Va();he(U,new sl(U))}Es.STAT_EVENT="statevent";function Xi(D,U){q.call(this,Es.STAT_EVENT,D),this.stat=U}p(Xi,q);function Ai(D){const U=Va();he(U,new Xi(U,D))}Es.Ma="timingevent";function No(D,U){q.call(this,Es.Ma,D),this.size=U}p(No,q);function Go(D,U){if(typeof D!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){D()},U)}function po(){this.g=!0}po.prototype.xa=function(){this.g=!1};function ve(D,U,X,re,$e,Xe){D.info(function(){if(D.g)if(Xe)for(var Mt="",bi=Xe.split("&"),Qo=0;Qo<bi.length;Qo++){var Ur=bi[Qo].split("=");if(1<Ur.length){var Ii=Ur[0];Ur=Ur[1];var Oo=Ii.split("_");Mt=2<=Oo.length&&Oo[1]=="type"?Mt+(Ii+"="+Ur+"&"):Mt+(Ii+"=redacted&")}}else Mt=null;else Mt=Xe;return"XMLHTTP REQ ("+re+") [attempt "+$e+"]: "+U+`
`+X+`
`+Mt})}function ce(D,U,X,re,$e,Xe,Mt){D.info(function(){return"XMLHTTP RESP ("+re+") [ attempt "+$e+"]: "+U+`
`+X+`
`+Xe+" "+Mt})}function xe(D,U,X,re){D.info(function(){return"XMLHTTP TEXT ("+U+"): "+ze(D,X)+(re?" "+re:"")})}function Ve(D,U){D.info(function(){return"TIMEOUT: "+U})}po.prototype.info=function(){};function ze(D,U){if(!D.g)return U;if(!U)return null;try{var X=JSON.parse(U);if(X){for(D=0;D<X.length;D++)if(Array.isArray(X[D])){var re=X[D];if(!(2>re.length)){var $e=re[1];if(Array.isArray($e)&&!(1>$e.length)){var Xe=$e[0];if(Xe!="noop"&&Xe!="stop"&&Xe!="close")for(var Mt=1;Mt<$e.length;Mt++)$e[Mt]=""}}}}return Yt(X)}catch{return U}}var Dt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bn;function ir(){}p(ir,Bn),ir.prototype.g=function(){return new XMLHttpRequest},ir.prototype.i=function(){return{}},bn=new ir;function gr(D,U,X,re){this.j=D,this.i=U,this.l=X,this.R=re||1,this.U=new rt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Un}function Un(){this.i=null,this.g="",this.h=!1}var Dr={},ni={};function dn(D,U,X){D.L=1,D.v=yr(vt(U)),D.m=X,D.P=!0,Ir(D,null)}function Ir(D,U){D.F=Date.now(),ln(D),D.A=vt(D.v);var X=D.A,re=D.R;Array.isArray(re)||(re=[String(re)]),Zb(X.i,"t",re),D.C=0,X=D.j.J,D.h=new Un,D.g=GO(D.j,X?U:null,!D.m),0<D.O&&(D.M=new ct(d(D.Y,D,D.g),D.O)),U=D.U,X=D.g,re=D.ca;var $e="readystatechange";Array.isArray($e)||($e&&(qt[0]=$e.toString()),$e=qt);for(var Xe=0;Xe<$e.length;Xe++){var Mt=wt(X,$e[Xe],re||U.handleEvent,!1,U.h||U);if(!Mt)break;U.g[Mt.key]=Mt}U=D.H?A(D.H):{},D.m?(D.u||(D.u="POST"),U["Content-Type"]="application/x-www-form-urlencoded",D.g.ea(D.A,D.u,D.m,U)):(D.u="GET",D.g.ea(D.A,D.u,null,U)),Kr(),ve(D.i,D.u,D.A,D.l,D.R,D.m)}gr.prototype.ca=function(D){D=D.target;const U=this.M;U&&Pi(D)==3?U.j():this.Y(D)},gr.prototype.Y=function(D){try{if(D==this.g)e:{const Oo=Pi(this.g);var U=this.g.Ba();const Xf=this.g.Z();if(!(3>Oo)&&(Oo!=3||this.g&&(this.h.h||this.g.oa()||Xo(this.g)))){this.J||Oo!=4||U==7||(U==8||0>=Xf?Kr(3):Kr(2)),Di(this);var X=this.g.Z();this.X=X;t:if(Xr(this)){var re=Xo(this.g);D="";var $e=re.length,Xe=Pi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yi(this),xs(this);var Mt="";break t}this.h.i=new a.TextDecoder}for(U=0;U<$e;U++)this.h.h=!0,D+=this.h.i.decode(re[U],{stream:!(Xe&&U==$e-1)});re.length=0,this.h.g+=D,this.C=0,Mt=this.h.g}else Mt=this.g.oa();if(this.o=X==200,ce(this.i,this.u,this.A,this.l,this.R,Oo,X),this.o){if(this.T&&!this.K){t:{if(this.g){var bi,Qo=this.g;if((bi=Qo.g?Qo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(bi)){var Ur=bi;break t}}Ur=null}if(X=Ur)xe(this.i,this.l,X,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qi(this,X);else{this.o=!1,this.s=3,Ai(12),yi(this),xs(this);break e}}if(this.P){X=!0;let Kl;for(;!this.J&&this.C<Mt.length;)if(Kl=sr(this,Mt),Kl==ni){Oo==4&&(this.s=4,Ai(14),X=!1),xe(this.i,this.l,null,"[Incomplete Response]");break}else if(Kl==Dr){this.s=4,Ai(15),xe(this.i,this.l,Mt,"[Invalid Chunk]"),X=!1;break}else xe(this.i,this.l,Kl,null),Qi(this,Kl);if(Xr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oo!=4||Mt.length!=0||this.h.h||(this.s=1,Ai(16),X=!1),this.o=this.o&&X,!X)xe(this.i,this.l,Mt,"[Invalid Chunked Response]"),yi(this),xs(this);else if(0<Mt.length&&!this.W){this.W=!0;var Ii=this.j;Ii.g==this&&Ii.ba&&!Ii.M&&(Ii.j.info("Great, no buffering proxy detected. Bytes received: "+Mt.length),Kf(Ii),Ii.M=!0,Ai(11))}}else xe(this.i,this.l,Mt,null),Qi(this,Mt);Oo==4&&yi(this),this.o&&!this.J&&(Oo==4?Ji(this.j,this):(this.o=!1,ln(this)))}else uh(this.g),X==400&&0<Mt.indexOf("Unknown SID")?(this.s=3,Ai(12)):(this.s=0,Ai(13)),yi(this),xs(this)}}}catch{}finally{}};function Xr(D){return D.g?D.u=="GET"&&D.L!=2&&D.j.Ca:!1}function sr(D,U){var X=D.C,re=U.indexOf(`
`,X);return re==-1?ni:(X=Number(U.substring(X,re)),isNaN(X)?Dr:(re+=1,re+X>U.length?ni:(U=U.slice(re,re+X),D.C=re+X,U)))}gr.prototype.cancel=function(){this.J=!0,yi(this)};function ln(D){D.S=Date.now()+D.I,Br(D,D.I)}function Br(D,U){if(D.B!=null)throw Error("WatchDog timer not null");D.B=Go(d(D.ba,D),U)}function Di(D){D.B&&(a.clearTimeout(D.B),D.B=null)}gr.prototype.ba=function(){this.B=null;const D=Date.now();0<=D-this.S?(Ve(this.i,this.A),this.L!=2&&(Kr(),Ai(17)),yi(this),this.s=2,xs(this)):Br(this,this.S-D)};function xs(D){D.j.G==0||D.J||Ji(D.j,D)}function yi(D){Di(D);var U=D.M;U&&typeof U.ma=="function"&&U.ma(),D.M=null,en(D.U),D.g&&(U=D.g,D.g=null,U.abort(),U.ma())}function Qi(D,U){try{var X=D.j;if(X.G!=0&&(X.g==D||Yf(X.h,D))){if(!D.K&&Yf(X.h,D)&&X.G==3){try{var re=X.Da.g.parse(U)}catch{re=null}if(Array.isArray(re)&&re.length==3){var $e=re;if($e[0]==0){e:if(!X.u){if(X.g)if(X.g.F+3e3<D.F)Gy(X),tw(X);else break e;Tx(X),Ai(18)}}else X.za=$e[1],0<X.za-X.T&&37500>$e[2]&&X.F&&X.v==0&&!X.C&&(X.C=Go(d(X.Za,X),6e3));if(1>=Yl(X.h)&&X.ca){try{X.ca()}catch{}X.ca=void 0}}else ch(X,11)}else if((D.K||X.g==D)&&Gy(X),!b(U))for($e=X.Da.g.parse(U),U=0;U<$e.length;U++){let Ur=$e[U];if(X.T=Ur[0],Ur=Ur[1],X.G==2)if(Ur[0]=="c"){X.K=Ur[1],X.ia=Ur[2];const Ii=Ur[3];Ii!=null&&(X.la=Ii,X.j.info("VER="+X.la));const Oo=Ur[4];Oo!=null&&(X.Aa=Oo,X.j.info("SVER="+X.Aa));const Xf=Ur[5];Xf!=null&&typeof Xf=="number"&&0<Xf&&(re=1.5*Xf,X.L=re,X.j.info("backChannelRequestTimeoutMs_="+re)),re=X;const Kl=D.g;if(Kl){const ow=Kl.g?Kl.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ow){var Xe=re.h;Xe.g||ow.indexOf("spdy")==-1&&ow.indexOf("quic")==-1&&ow.indexOf("h2")==-1||(Xe.j=Xe.l,Xe.g=new Set,Xe.h&&(te(Xe,Xe.h),Xe.h=null))}if(re.D){const HA=Kl.g?Kl.g.getResponseHeader("X-HTTP-Session-Id"):null;HA&&(re.ya=HA,sn(re.I,re.D,HA))}}X.G=3,X.l&&X.l.ua(),X.ba&&(X.R=Date.now()-D.F,X.j.info("Handshake RTT: "+X.R+"ms")),re=X;var Mt=D;if(re.qa=Cx(re,re.J?re.ia:null,re.W),Mt.K){ye(re.h,Mt);var bi=Mt,Qo=re.L;Qo&&(bi.I=Qo),bi.B&&(Di(bi),ln(bi)),re.g=Mt}else qO(re);0<X.i.length&&nw(X)}else Ur[0]!="stop"&&Ur[0]!="close"||ch(X,7);else X.G==3&&(Ur[0]=="stop"||Ur[0]=="close"?Ur[0]=="stop"?ch(X,7):kg(X):Ur[0]!="noop"&&X.l&&X.l.ta(Ur),X.v=0)}}Kr(4)}catch{}}var Yo=class{constructor(D,U){this.g=D,this.map=U}};function Ha(D){this.l=D||10,a.PerformanceNavigationTiming?(D=a.performance.getEntriesByType("navigation"),D=0<D.length&&(D[0].nextHopProtocol=="hq"||D[0].nextHopProtocol=="h2")):D=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=D?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Po(D){return D.h?!0:D.g?D.g.size>=D.j:!1}function Yl(D){return D.h?1:D.g?D.g.size:0}function Yf(D,U){return D.h?D.h==U:D.g?D.g.has(U):!1}function te(D,U){D.g?D.g.add(U):D.h=U}function ye(D,U){D.h&&D.h==U?D.h=null:D.g&&D.g.has(U)&&D.g.delete(U)}Ha.prototype.cancel=function(){if(this.i=ue(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const D of this.g.values())D.cancel();this.g.clear()}};function ue(D){if(D.h!=null)return D.i.concat(D.h.D);if(D.g!=null&&D.g.size!==0){let U=D.i;for(const X of D.g.values())U=U.concat(X.D);return U}return m(D.i)}function Ie(D){if(D.V&&typeof D.V=="function")return D.V();if(typeof Map<"u"&&D instanceof Map||typeof Set<"u"&&D instanceof Set)return Array.from(D.values());if(typeof D=="string")return D.split("");if(u(D)){for(var U=[],X=D.length,re=0;re<X;re++)U.push(D[re]);return U}U=[],X=0;for(re in D)U[X++]=D[re];return U}function Oe(D){if(D.na&&typeof D.na=="function")return D.na();if(!D.V||typeof D.V!="function"){if(typeof Map<"u"&&D instanceof Map)return Array.from(D.keys());if(!(typeof Set<"u"&&D instanceof Set)){if(u(D)||typeof D=="string"){var U=[];D=D.length;for(var X=0;X<D;X++)U.push(X);return U}U=[],X=0;for(const re in D)U[X++]=re;return U}}}function De(D,U){if(D.forEach&&typeof D.forEach=="function")D.forEach(U,void 0);else if(u(D)||typeof D=="string")Array.prototype.forEach.call(D,U,void 0);else for(var X=Oe(D),re=Ie(D),$e=re.length,Xe=0;Xe<$e;Xe++)U.call(void 0,re[Xe],X&&X[Xe],D)}var Je=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pt(D,U){if(D){D=D.split("&");for(var X=0;X<D.length;X++){var re=D[X].indexOf("="),$e=null;if(0<=re){var Xe=D[X].substring(0,re);$e=D[X].substring(re+1)}else Xe=D[X];U(Xe,$e?decodeURIComponent($e.replace(/\+/g," ")):"")}}}function yt(D){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,D instanceof yt){this.h=D.h,It(this,D.j),this.o=D.o,this.g=D.g,zt(this,D.s),this.l=D.l;var U=D.i,X=new ol;X.i=U.i,U.g&&(X.g=new Map(U.g),X.h=U.h),Qn(this,X),this.m=D.m}else D&&(U=String(D).match(Je))?(this.h=!1,It(this,U[1]||"",!0),this.o=ri(U[2]||""),this.g=ri(U[3]||"",!0),zt(this,U[4]),this.l=ri(U[5]||"",!0),Qn(this,U[6]||"",!0),this.m=ri(U[7]||"")):(this.h=!1,this.i=new ol(null,this.h))}yt.prototype.toString=function(){var D=[],U=this.j;U&&D.push(Nr(U,Zc,!0),":");var X=this.g;return(X||U=="file")&&(D.push("//"),(U=this.o)&&D.push(Nr(U,Zc,!0),"@"),D.push(encodeURIComponent(String(X)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),X=this.s,X!=null&&D.push(":",String(X))),(X=this.l)&&(this.g&&X.charAt(0)!="/"&&D.push("/"),D.push(Nr(X,X.charAt(0)=="/"?qy:ih,!0))),(X=this.i.toString())&&D.push("?",X),(X=this.m)&&D.push("#",Nr(X,Jb)),D.join("")};function vt(D){return new yt(D)}function It(D,U,X){D.j=X?ri(U,!0):U,D.j&&(D.j=D.j.replace(/:$/,""))}function zt(D,U){if(U){if(U=Number(U),isNaN(U)||0>U)throw Error("Bad port number "+U);D.s=U}else D.s=null}function Qn(D,U,X){U instanceof ol?(D.i=U,ew(D.i,D.h)):(X||(U=Nr(U,Mp)),D.i=new ol(U,D.h))}function sn(D,U,X){D.i.set(U,X)}function yr(D){return sn(D,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),D}function ri(D,U){return D?U?decodeURI(D.replace(/%25/g,"%2525")):decodeURIComponent(D):""}function Nr(D,U,X){return typeof D=="string"?(D=encodeURI(D).replace(U,Ko),X&&(D=D.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D):null}function Ko(D){return D=D.charCodeAt(0),"%"+(D>>4&15).toString(16)+(D&15).toString(16)}var Zc=/[#\/\?@]/g,ih=/[#\?:]/g,qy=/[#\?]/g,Mp=/[#\?@]/g,Jb=/#/g;function ol(D,U){this.h=this.g=null,this.i=D||null,this.j=!!U}function yu(D){D.g||(D.g=new Map,D.h=0,D.i&&pt(D.i,function(U,X){D.add(decodeURIComponent(U.replace(/\+/g," ")),X)}))}e=ol.prototype,e.add=function(D,U){yu(this),this.i=null,D=oh(this,D);var X=this.g.get(D);return X||this.g.set(D,X=[]),X.push(U),this.h+=1,this};function sh(D,U){yu(D),U=oh(D,U),D.g.has(U)&&(D.i=null,D.h-=D.g.get(U).length,D.g.delete(U))}function Wy(D,U){return yu(D),U=oh(D,U),D.g.has(U)}e.forEach=function(D,U){yu(this),this.g.forEach(function(X,re){X.forEach(function($e){D.call(U,$e,re,this)},this)},this)},e.na=function(){yu(this);const D=Array.from(this.g.values()),U=Array.from(this.g.keys()),X=[];for(let re=0;re<U.length;re++){const $e=D[re];for(let Xe=0;Xe<$e.length;Xe++)X.push(U[re])}return X},e.V=function(D){yu(this);let U=[];if(typeof D=="string")Wy(this,D)&&(U=U.concat(this.g.get(oh(this,D))));else{D=Array.from(this.g.values());for(let X=0;X<D.length;X++)U=U.concat(D[X])}return U},e.set=function(D,U){return yu(this),this.i=null,D=oh(this,D),Wy(this,D)&&(this.h-=this.g.get(D).length),this.g.set(D,[U]),this.h+=1,this},e.get=function(D,U){return D?(D=this.V(D),0<D.length?String(D[0]):U):U};function Zb(D,U,X){sh(D,U),0<X.length&&(D.i=null,D.g.set(oh(D,U),m(X)),D.h+=X.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const D=[],U=Array.from(this.g.keys());for(var X=0;X<U.length;X++){var re=U[X];const Xe=encodeURIComponent(String(re)),Mt=this.V(re);for(re=0;re<Mt.length;re++){var $e=Xe;Mt[re]!==""&&($e+="="+encodeURIComponent(String(Mt[re]))),D.push($e)}}return this.i=D.join("&")};function oh(D,U){return U=String(U),D.j&&(U=U.toLowerCase()),U}function ew(D,U){U&&!D.j&&(yu(D),D.i=null,D.g.forEach(function(X,re){var $e=re.toLowerCase();re!=$e&&(sh(this,re),Zb(this,$e,X))},D)),D.j=U}function _x(D,U){const X=new po;if(a.Image){const re=new Image;re.onload=h(ba,X,"TestLoadImage: loaded",!0,U,re),re.onerror=h(ba,X,"TestLoadImage: error",!1,U,re),re.onabort=h(ba,X,"TestLoadImage: abort",!1,U,re),re.ontimeout=h(ba,X,"TestLoadImage: timeout",!1,U,re),a.setTimeout(function(){re.ontimeout&&re.ontimeout()},1e4),re.src=D}else U(!1)}function ah(D,U){const X=new po,re=new AbortController,$e=setTimeout(()=>{re.abort(),ba(X,"TestPingServer: timeout",!1,U)},1e4);fetch(D,{signal:re.signal}).then(Xe=>{clearTimeout($e),Xe.ok?ba(X,"TestPingServer: ok",!0,U):ba(X,"TestPingServer: server error",!1,U)}).catch(()=>{clearTimeout($e),ba(X,"TestPingServer: error",!1,U)})}function ba(D,U,X,re,$e){try{$e&&($e.onload=null,$e.onerror=null,$e.onabort=null,$e.ontimeout=null),re(X)}catch{}}function zA(){this.g=new Sn}function Ex(D,U,X){const re=X||"";try{De(D,function($e,Xe){let Mt=$e;l($e)&&(Mt=Yt($e)),U.push(re+Xe+"="+encodeURIComponent(Mt))})}catch($e){throw U.push(re+"type="+encodeURIComponent("_badmap")),$e}}function Ag(D){this.l=D.Ub||null,this.j=D.eb||!1}p(Ag,Bn),Ag.prototype.g=function(){return new Dg(this.l,this.j)},Ag.prototype.i=function(D){return function(){return D}}({});function Dg(D,U){oe.call(this),this.D=D,this.o=U,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Dg,oe),e=Dg.prototype,e.open=function(D,U){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=D,this.A=U,this.readyState=1,jr(this)},e.send=function(D){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const U={headers:this.u,method:this.B,credentials:this.m,cache:void 0};D&&(U.body=D),(this.D||a).fetch(new Request(this.A,U)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ii(this)),this.readyState=0},e.Sa=function(D){if(this.g&&(this.l=D,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=D.headers,this.readyState=2,jr(this)),this.g&&(this.readyState=3,jr(this),this.g)))if(this.responseType==="arraybuffer")D.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in D){if(this.j=D.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xx(this)}else D.text().then(this.Ra.bind(this),this.ga.bind(this))};function xx(D){D.j.read().then(D.Pa.bind(D)).catch(D.ga.bind(D))}e.Pa=function(D){if(this.g){if(this.o&&D.value)this.response.push(D.value);else if(!this.o){var U=D.value?D.value:new Uint8Array(0);(U=this.v.decode(U,{stream:!D.done}))&&(this.response=this.responseText+=U)}D.done?ii(this):jr(this),this.readyState==3&&xx(this)}},e.Ra=function(D){this.g&&(this.response=this.responseText=D,ii(this))},e.Qa=function(D){this.g&&(this.response=D,ii(this))},e.ga=function(){this.g&&ii(this)};function ii(D){D.readyState=4,D.l=null,D.j=null,D.v=null,jr(D)}e.setRequestHeader=function(D,U){this.u.append(D,U)},e.getResponseHeader=function(D){return this.h&&this.h.get(D.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const D=[],U=this.h.entries();for(var X=U.next();!X.done;)X=X.value,D.push(X[0]+": "+X[1]),X=U.next();return D.join(`\r
`)};function jr(D){D.onreadystatechange&&D.onreadystatechange.call(D)}Object.defineProperty(Dg.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(D){this.m=D?"include":"same-origin"}});function Sx(D){let U="";return T(D,function(X,re){U+=re,U+=":",U+=X,U+=`\r
`}),U}function fe(D,U,X){e:{for(re in X){var re=!1;break e}re=!0}re||(X=Sx(X),typeof D=="string"?X!=null&&encodeURIComponent(String(X)):sn(D,U,X))}function Te(D){oe.call(this),this.headers=new Map,this.o=D||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(Te,oe);var We=/^https?$/i,Jt=["POST","PUT"];e=Te.prototype,e.Ha=function(D){this.J=D},e.ea=function(D,U,X,re){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+D);U=U?U.toUpperCase():"GET",this.D=D,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bn.g(),this.v=this.o?Ci(this.o):Ci(bn),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(U,String(D),!0),this.B=!1}catch(Xe){_r(this,Xe);return}if(D=X||"",X=new Map(this.headers),re)if(Object.getPrototypeOf(re)===Object.prototype)for(var $e in re)X.set($e,re[$e]);else if(typeof re.keys=="function"&&typeof re.get=="function")for(const Xe of re.keys())X.set(Xe,re.get(Xe));else throw Error("Unknown input type for opt_headers: "+String(re));re=Array.from(X.keys()).find(Xe=>Xe.toLowerCase()=="content-type"),$e=a.FormData&&D instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Jt,U,void 0))||re||$e||X.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Xe,Mt]of X)this.g.setRequestHeader(Xe,Mt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vi(this),this.u=!0,this.g.send(D),this.u=!1}catch(Xe){_r(this,Xe)}};function _r(D,U){D.h=!1,D.g&&(D.j=!0,D.g.abort(),D.j=!1),D.l=U,D.m=5,si(D),wn(D)}function si(D){D.A||(D.A=!0,he(D,"complete"),he(D,"error"))}e.abort=function(D){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=D||7,he(this,"complete"),he(this,"abort"),wn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wn(this,!0)),Te.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ni(this):this.bb())},e.bb=function(){Ni(this)};function Ni(D){if(D.h&&typeof o<"u"&&(!D.v[1]||Pi(D)!=4||D.Z()!=2)){if(D.u&&Pi(D)==4)Fe(D.Ea,0,D);else if(he(D,"readystatechange"),Pi(D)==4){D.h=!1;try{const Mt=D.Z();e:switch(Mt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var U=!0;break e;default:U=!1}var X;if(!(X=U)){var re;if(re=Mt===0){var $e=String(D.D).match(Je)[1]||null;!$e&&a.self&&a.self.location&&($e=a.self.location.protocol.slice(0,-1)),re=!We.test($e?$e.toLowerCase():"")}X=re}if(X)he(D,"complete"),he(D,"success");else{D.m=6;try{var Xe=2<Pi(D)?D.g.statusText:""}catch{Xe=""}D.l=Xe+" ["+D.Z()+"]",si(D)}}finally{wn(D)}}}}function wn(D,U){if(D.g){vi(D);const X=D.g,re=D.v[0]?()=>{}:null;D.g=null,D.v=null,U||he(D,"ready");try{X.onreadystatechange=re}catch{}}}function vi(D){D.I&&(a.clearTimeout(D.I),D.I=null)}e.isActive=function(){return!!this.g};function Pi(D){return D.g?D.g.readyState:0}e.Z=function(){try{return 2<Pi(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(D){if(this.g){var U=this.g.responseText;return D&&U.indexOf(D)==0&&(U=U.substring(D.length)),un(U)}};function Xo(D){try{if(!D.g)return null;if("response"in D.g)return D.g.response;switch(D.H){case"":case"text":return D.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in D.g)return D.g.mozResponseArrayBuffer}return null}catch{return null}}function uh(D){const U={};D=(D.g&&2<=Pi(D)&&D.g.getAllResponseHeaders()||"").split(`\r
`);for(let re=0;re<D.length;re++){if(b(D[re]))continue;var X=N(D[re]);const $e=X[0];if(X=X[1],typeof X!="string")continue;X=X.trim();const Xe=U[$e]||[];U[$e]=Xe,Xe.push(X)}C(U,function(re){return re.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xs(D,U,X){return X&&X.internalChannelParams&&X.internalChannelParams[D]||U}function Ig(D){this.Aa=0,this.i=[],this.j=new po,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xs("failFast",!1,D),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xs("baseRetryDelayMs",5e3,D),this.cb=Xs("retryDelaySeedMs",1e4,D),this.Wa=Xs("forwardChannelMaxRetries",2,D),this.wa=Xs("forwardChannelRequestTimeoutMs",2e4,D),this.pa=D&&D.xmlHttpFactory||void 0,this.Xa=D&&D.Tb||void 0,this.Ca=D&&D.useFetchStreams||!1,this.L=void 0,this.J=D&&D.supportsCrossDomainXhr||!1,this.K="",this.h=new Ha(D&&D.concurrentRequestLimit),this.Da=new zA,this.P=D&&D.fastHandshake||!1,this.O=D&&D.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=D&&D.Rb||!1,D&&D.xa&&this.j.xa(),D&&D.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&D&&D.detectBufferingProxy||!1,this.ja=void 0,D&&D.longPollingTimeout&&0<D.longPollingTimeout&&(this.ja=D.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Ig.prototype,e.la=8,e.G=1,e.connect=function(D,U,X,re){Ai(0),this.W=D,this.H=U||{},X&&re!==void 0&&(this.H.OSID=X,this.H.OAID=re),this.F=this.X,this.I=Cx(this,null,this.W),nw(this)};function kg(D){if(VA(D),D.G==3){var U=D.U++,X=vt(D.I);if(sn(X,"SID",D.K),sn(X,"RID",U),sn(X,"TYPE","terminate"),rw(D,X),U=new gr(D,D.j,U),U.L=2,U.v=yr(vt(X)),X=!1,a.navigator&&a.navigator.sendBeacon)try{X=a.navigator.sendBeacon(U.v.toString(),"")}catch{}!X&&a.Image&&(new Image().src=U.v,X=!0),X||(U.g=GO(U.j,null),U.g.ea(U.v)),U.F=Date.now(),ln(U)}WO(D)}function tw(D){D.g&&(Kf(D),D.g.cancel(),D.g=null)}function VA(D){tw(D),D.u&&(a.clearTimeout(D.u),D.u=null),Gy(D),D.h.cancel(),D.s&&(typeof D.s=="number"&&a.clearTimeout(D.s),D.s=null)}function nw(D){if(!Po(D.h)&&!D.s){D.s=!0;var U=D.Ga;z||$(),V||(z(),V=!0),G.add(U,D),D.B=0}}function HO(D,U){return Yl(D.h)>=D.h.j-(D.s?1:0)?!1:D.s?(D.i=U.D.concat(D.i),!0):D.G==1||D.G==2||D.B>=(D.Va?0:D.Wa)?!1:(D.s=Go(d(D.Ga,D,U),lh(D,D.B)),D.B++,!0)}e.Ga=function(D){if(this.s)if(this.s=null,this.G==1){if(!D){this.U=Math.floor(1e5*Math.random()),D=this.U++;const $e=new gr(this,this.j,D);let Xe=this.o;if(this.S&&(Xe?(Xe=A(Xe),k(Xe,this.S)):Xe=this.S),this.m!==null||this.O||($e.H=Xe,Xe=null),this.P)e:{for(var U=0,X=0;X<this.i.length;X++){t:{var re=this.i[X];if("__data__"in re.map&&(re=re.map.__data__,typeof re=="string")){re=re.length;break t}re=void 0}if(re===void 0)break;if(U+=re,4096<U){U=X;break e}if(U===4096||X===this.i.length-1){U=X+1;break e}}U=1e3}else U=1e3;U=al(this,$e,U),X=vt(this.I),sn(X,"RID",D),sn(X,"CVER",22),this.D&&sn(X,"X-HTTP-Session-Id",this.D),rw(this,X),Xe&&(this.O?U="headers="+encodeURIComponent(String(Sx(Xe)))+"&"+U:this.m&&fe(X,this.m,Xe)),te(this.h,$e),this.Ua&&sn(X,"TYPE","init"),this.P?(sn(X,"$req",U),sn(X,"SID","null"),$e.T=!0,dn($e,X,null)):dn($e,X,U),this.G=2}}else this.G==3&&(D?vu(this,D):this.i.length==0||Po(this.h)||vu(this))};function vu(D,U){var X;U?X=U.l:X=D.U++;const re=vt(D.I);sn(re,"SID",D.K),sn(re,"RID",X),sn(re,"AID",D.T),rw(D,re),D.m&&D.o&&fe(re,D.m,D.o),X=new gr(D,D.j,X,D.B+1),D.m===null&&(X.H=D.o),U&&(D.i=U.D.concat(D.i)),U=al(D,X,1e3),X.I=Math.round(.5*D.wa)+Math.round(.5*D.wa*Math.random()),te(D.h,X),dn(X,re,U)}function rw(D,U){D.H&&T(D.H,function(X,re){sn(U,re,X)}),D.l&&De({},function(X,re){sn(U,re,X)})}function al(D,U,X){X=Math.min(D.i.length,X);var re=D.l?d(D.l.Na,D.l,D):null;e:{var $e=D.i;let Xe=-1;for(;;){const Mt=["count="+X];Xe==-1?0<X?(Xe=$e[0].g,Mt.push("ofs="+Xe)):Xe=0:Mt.push("ofs="+Xe);let bi=!0;for(let Qo=0;Qo<X;Qo++){let Ur=$e[Qo].g;const Ii=$e[Qo].map;if(Ur-=Xe,0>Ur)Xe=Math.max(0,$e[Qo].g-100),bi=!1;else try{Ex(Ii,Mt,"req"+Ur+"_")}catch{re&&re(Ii)}}if(bi){re=Mt.join("&");break e}}}return D=D.i.splice(0,X),U.D=D,re}function qO(D){if(!D.g&&!D.u){D.Y=1;var U=D.Fa;z||$(),V||(z(),V=!0),G.add(U,D),D.v=0}}function Tx(D){return D.g||D.u||3<=D.v?!1:(D.Y++,D.u=Go(d(D.Fa,D),lh(D,D.v)),D.v++,!0)}e.Fa=function(){if(this.u=null,iw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var D=2*this.R;this.j.info("BP detection timer enabled: "+D),this.A=Go(d(this.ab,this),D)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ai(10),tw(this),iw(this))};function Kf(D){D.A!=null&&(a.clearTimeout(D.A),D.A=null)}function iw(D){D.g=new gr(D,D.j,"rpc",D.Y),D.m===null&&(D.g.H=D.o),D.g.O=0;var U=vt(D.qa);sn(U,"RID","rpc"),sn(U,"SID",D.K),sn(U,"AID",D.T),sn(U,"CI",D.F?"0":"1"),!D.F&&D.ja&&sn(U,"TO",D.ja),sn(U,"TYPE","xmlhttp"),rw(D,U),D.m&&D.o&&fe(U,D.m,D.o),D.L&&(D.g.I=D.L);var X=D.g;D=D.ia,X.L=1,X.v=yr(vt(U)),X.m=null,X.P=!0,Ir(X,D)}e.Za=function(){this.C!=null&&(this.C=null,tw(this),Tx(this),Ai(19))};function Gy(D){D.C!=null&&(a.clearTimeout(D.C),D.C=null)}function Ji(D,U){var X=null;if(D.g==U){Gy(D),Kf(D),D.g=null;var re=2}else if(Yf(D.h,U))X=U.D,ye(D.h,U),re=1;else return;if(D.G!=0){if(U.o)if(re==1){X=U.m?U.m.length:0,U=Date.now()-U.F;var $e=D.B;re=Va(),he(re,new No(re,X)),nw(D)}else qO(D);else if($e=U.s,$e==3||$e==0&&0<U.X||!(re==1&&HO(D,U)||re==2&&Tx(D)))switch(X&&0<X.length&&(U=D.h,U.i=U.i.concat(X)),$e){case 1:ch(D,5);break;case 4:ch(D,10);break;case 3:ch(D,6);break;default:ch(D,2)}}}function lh(D,U){let X=D.Ta+Math.floor(Math.random()*D.cb);return D.isActive()||(X*=2),X*U}function ch(D,U){if(D.j.info("Error code "+U),U==2){var X=d(D.fb,D),re=D.Xa;const $e=!re;re=new yt(re||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||It(re,"https"),yr(re),$e?_x(re.toString(),X):ah(re.toString(),X)}else Ai(2);D.G=0,D.l&&D.l.sa(U),WO(D),VA(D)}e.fb=function(D){D?(this.j.info("Successfully pinged google.com"),Ai(2)):(this.j.info("Failed to ping google.com"),Ai(1))};function WO(D){if(D.G=0,D.ka=[],D.l){const U=ue(D.h);(U.length!=0||D.i.length!=0)&&(g(D.ka,U),g(D.ka,D.i),D.h.i.length=0,m(D.i),D.i.length=0),D.l.ra()}}function Cx(D,U,X){var re=X instanceof yt?vt(X):new yt(X);if(re.g!="")U&&(re.g=U+"."+re.g),zt(re,re.s);else{var $e=a.location;re=$e.protocol,U=U?U+"."+$e.hostname:$e.hostname,$e=+$e.port;var Xe=new yt(null);re&&It(Xe,re),U&&(Xe.g=U),$e&&zt(Xe,$e),X&&(Xe.l=X),re=Xe}return X=D.D,U=D.ya,X&&U&&sn(re,X,U),sn(re,"VER",D.la),rw(D,re),re}function GO(D,U,X){if(U&&!D.J)throw Error("Can't create secondary domain capable XhrIo object.");return U=D.Ca&&!D.pa?new Te(new Ag({eb:X})):new Te(D.pa),U.Ha(D.J),U}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function YO(){}e=YO.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Ax(){}Ax.prototype.g=function(D,U){return new bu(D,U)};function bu(D,U){oe.call(this),this.g=new Ig(U),this.l=D,this.h=U&&U.messageUrlParams||null,D=U&&U.messageHeaders||null,U&&U.clientProtocolHeaderRequired&&(D?D["X-Client-Protocol"]="webchannel":D={"X-Client-Protocol":"webchannel"}),this.g.o=D,D=U&&U.initMessageHeaders||null,U&&U.messageContentType&&(D?D["X-WebChannel-Content-Type"]=U.messageContentType:D={"X-WebChannel-Content-Type":U.messageContentType}),U&&U.va&&(D?D["X-WebChannel-Client-Profile"]=U.va:D={"X-WebChannel-Client-Profile":U.va}),this.g.S=D,(D=U&&U.Sb)&&!b(D)&&(this.g.m=D),this.v=U&&U.supportsCrossDomainXhr||!1,this.u=U&&U.sendRawJson||!1,(U=U&&U.httpSessionIdParam)&&!b(U)&&(this.g.D=U,D=this.h,D!==null&&U in D&&(D=this.h,U in D&&delete D[U])),this.j=new Yy(this)}p(bu,oe),bu.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bu.prototype.close=function(){kg(this.g)},bu.prototype.o=function(D){var U=this.g;if(typeof D=="string"){var X={};X.__data__=D,D=X}else this.u&&(X={},X.__data__=Yt(D),D=X);U.i.push(new Yo(U.Ya++,D)),U.G==3&&nw(U)},bu.prototype.N=function(){this.g.l=null,delete this.j,kg(this.g),delete this.g,bu.aa.N.call(this)};function sw(D){Ki.call(this),D.__headers__&&(this.headers=D.__headers__,this.statusCode=D.__status__,delete D.__headers__,delete D.__status__);var U=D.__sm__;if(U){e:{for(const X in U){D=X;break e}D=void 0}(this.i=D)&&(D=this.i,U=U!==null&&D in U?U[D]:void 0),this.data=U}else this.data=D}p(sw,Ki);function Rg(){ti.call(this),this.status=1}p(Rg,ti);function Yy(D){this.g=D}p(Yy,YO),Yy.prototype.ua=function(){he(this.g,"a")},Yy.prototype.ta=function(D){he(this.g,new sw(D))},Yy.prototype.sa=function(D){he(this.g,new Rg)},Yy.prototype.ra=function(){he(this.g,"b")},Ax.prototype.createWebChannel=Ax.prototype.g,bu.prototype.send=bu.prototype.o,bu.prototype.open=bu.prototype.m,bu.prototype.close=bu.prototype.close,d5e=function(){return new Ax},f5e=function(){return Va()},c5e=Es,HK={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Dt.NO_ERROR=0,Dt.TIMEOUT=8,Dt.HTTP_ERROR=6,wF=Dt,Wt.COMPLETE="complete",l5e=Wt,gi.EventType=jn,jn.OPEN="a",jn.CLOSE="b",jn.ERROR="c",jn.MESSAGE="d",oe.prototype.listen=oe.prototype.K,PI=gi,u5e=Ag,Te.prototype.listenOnce=Te.prototype.L,Te.prototype.getLastError=Te.prototype.Ka,Te.prototype.getLastErrorCode=Te.prototype.Ba,Te.prototype.getStatus=Te.prototype.Z,Te.prototype.getResponseJson=Te.prototype.Oa,Te.prototype.getResponseText=Te.prototype.oa,Te.prototype.send=Te.prototype.ea,Te.prototype.setWithCredentials=Te.prototype.Ha,a5e=Te}).apply(typeof qM<"u"?qM:typeof self<"u"?self:typeof window<"u"?window:{});const awe="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}oc.UNAUTHENTICATED=new oc(null),oc.GOOGLE_CREDENTIALS=new oc("google-credentials-uid"),oc.FIRST_PARTY=new oc("first-party-uid"),oc.MOCK_USER=new oc("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yA="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=new C9("@firebase/firestore");function FD(){return fE.logLevel}function nn(e,...t){if(fE.logLevel<=Hr.DEBUG){const n=t.map(bse);fE.debug(`Firestore (${yA}): ${e}`,...n)}}function hy(e,...t){if(fE.logLevel<=Hr.ERROR){const n=t.map(bse);fE.error(`Firestore (${yA}): ${e}`,...n)}}function hN(e,...t){if(fE.logLevel<=Hr.WARN){const n=t.map(bse);fE.warn(`Firestore (${yA}): ${e}`,...n)}}function bse(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(e="Unexpected state"){const t=`FIRESTORE (${yA}) INTERNAL ASSERTION FAILED: `+e;throw hy(t),new Error(t)}function us(e,t){e||Yn()}function nr(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ht extends gg{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YKt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class KKt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(oc.UNAUTHENTICATED))}shutdown(){}}class XKt{constructor(t){this.t=t,this.currentUser=oc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new F0;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new F0,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{nn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(nn("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new F0)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(nn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(us(typeof r.accessToken=="string"),new YKt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return us(t===null||typeof t=="string"),new oc(t)}}class QKt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=oc.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class JKt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new QKt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(oc.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ZKt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eXt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&nn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,nn("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{nn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):nn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(us(typeof n.token=="string"),this.R=n.token,new ZKt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tXt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5e{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=tXt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function _i(e,t){return e<t?-1:e>t?1:0}function HC(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Ht(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ht(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Ht(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ht(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return da.fromMillis(Date.now())}static fromDate(t){return da.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new da(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?_i(this.nanoseconds,t.nanoseconds):_i(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(t){this.timestamp=t}static fromTimestamp(t){return new tr(t)}static min(){return new tr(new da(0,0))}static max(){return new tr(new da(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(t,n,r){n===void 0?n=0:n>t.length&&Yn(),r===void 0?r=t.length-n:r>t.length-n&&Yn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return pN.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof pN?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class ms extends pN{construct(t,n,r){return new ms(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Ht(dt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ms(n)}static emptyPath(){return new ms([])}}const nXt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nu extends pN{construct(t,n,r){return new nu(t,n,r)}static isValidIdentifier(t){return nXt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nu.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new nu(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ht(dt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Ht(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ht(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ht(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new nu(n)}static emptyPath(){return new nu([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(t){this.path=t}static fromPath(t){return new xn(ms.fromString(t))}static fromName(t){return new xn(ms.fromString(t).popFirst(5))}static empty(){return new xn(ms.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ms.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ms.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new xn(new ms(t.slice()))}}function rXt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=tr.fromTimestamp(r===1e9?new da(n+1,0):new da(n,r));return new J1(i,xn.empty(),t)}function iXt(e){return new J1(e.readTime,e.key,-1)}class J1{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new J1(tr.min(),xn.empty(),-1)}static max(){return new J1(tr.max(),xn.empty(),-1)}}function sXt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=xn.comparator(e.documentKey,t.documentKey),n!==0?n:_i(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oXt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aXt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XP(e){if(e.code!==dt.FAILED_PRECONDITION||e.message!==oXt)throw e;nn("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Yn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Et((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Et?n:Et.resolve(n)}catch(n){return Et.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Et.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Et.reject(n)}static resolve(t){return new Et((n,r)=>{n(t)})}static reject(t){return new Et((n,r)=>{r(t)})}static waitFor(t){return new Et((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Et.resolve(!1);for(const r of t)n=n.next(i=>i?Et.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Et((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Et((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function uXt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function QP(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wse{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}wse.oe=-1;function P9(e){return e==null}function H4(e){return e===0&&1/e==-1/0}function lXt(e){return typeof e=="number"&&Number.isInteger(e)&&!H4(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uwe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function nx(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function p5e(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(t,n){this.comparator=t,this.root=n||Za.EMPTY}insert(t,n){return new Ys(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Za.BLACK,null,null))}remove(t){return new Ys(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Za.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new WM(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new WM(this.root,t,this.comparator,!1)}getReverseIterator(){return new WM(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new WM(this.root,t,this.comparator,!0)}}class WM{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Za{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??Za.RED,this.left=i??Za.EMPTY,this.right=s??Za.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new Za(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Za.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Za.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Za.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Za.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Yn();const t=this.left.check();if(t!==this.right.check())throw Yn();return t+(this.isRed()?0:1)}}Za.EMPTY=null,Za.RED=!0,Za.BLACK=!1;Za.EMPTY=new class{constructor(){this.size=0}get key(){throw Yn()}get value(){throw Yn()}get color(){throw Yn()}get left(){throw Yn()}get right(){throw Yn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new Za(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(t){this.comparator=t,this.data=new Ys(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new lwe(this.data.getIterator())}getIteratorFrom(t){return new lwe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof lu)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new lu(this.comparator);return n.data=t,n}}class lwe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(t){this.fields=t,t.sort(nu.comparator)}static empty(){return new bf([])}unionWith(t){let n=new lu(nu.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new bf(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return HC(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5e extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new m5e("Invalid base64 string: "+s):s}}(t);return new Zu(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Zu(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return _i(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Zu.EMPTY_BYTE_STRING=new Zu("");const cXt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Z1(e){if(us(!!e),typeof e=="string"){let t=0;const n=cXt.exec(e);if(us(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Bo(e.seconds),nanos:Bo(e.nanos)}}function Bo(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function dE(e){return typeof e=="string"?Zu.fromBase64String(e):Zu.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _se(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ese(e){const t=e.mapValue.fields.__previous_value__;return _se(t)?Ese(t):t}function mN(e){const t=Z1(e.mapValue.fields.__local_write_time__.timestampValue);return new da(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fXt{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class gN{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new gN("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof gN&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function hE(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?_se(e)?4:dXt(e)?9007199254740991:10:Yn()}function Zm(e,t){if(e===t)return!0;const n=hE(e);if(n!==hE(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return mN(e).isEqual(mN(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Z1(i.timestampValue),a=Z1(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return dE(i.bytesValue).isEqual(dE(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return Bo(i.geoPointValue.latitude)===Bo(s.geoPointValue.latitude)&&Bo(i.geoPointValue.longitude)===Bo(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Bo(i.integerValue)===Bo(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Bo(i.doubleValue),a=Bo(s.doubleValue);return o===a?H4(o)===H4(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return HC(e.arrayValue.values||[],t.arrayValue.values||[],Zm);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(uwe(o)!==uwe(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Zm(o[u],a[u])))return!1;return!0}(e,t);default:return Yn()}}function yN(e,t){return(e.values||[]).find(n=>Zm(n,t))!==void 0}function qC(e,t){if(e===t)return 0;const n=hE(e),r=hE(t);if(n!==r)return _i(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _i(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=Bo(s.integerValue||s.doubleValue),u=Bo(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return cwe(e.timestampValue,t.timestampValue);case 4:return cwe(mN(e),mN(t));case 5:return _i(e.stringValue,t.stringValue);case 6:return function(s,o){const a=dE(s),u=dE(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=_i(a[l],u[l]);if(c!==0)return c}return _i(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=_i(Bo(s.latitude),Bo(o.latitude));return a!==0?a:_i(Bo(s.longitude),Bo(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=qC(a[l],u[l]);if(c)return c}return _i(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===GM.mapValue&&o===GM.mapValue)return 0;if(s===GM.mapValue)return 1;if(o===GM.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=_i(u[f],c[f]);if(d!==0)return d;const h=qC(a[u[f]],l[c[f]]);if(h!==0)return h}return _i(u.length,c.length)}(e.mapValue,t.mapValue);default:throw Yn()}}function cwe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return _i(e,t);const n=Z1(e),r=Z1(t),i=_i(n.seconds,r.seconds);return i!==0?i:_i(n.nanos,r.nanos)}function WC(e){return qK(e)}function qK(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Z1(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return dE(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return xn.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=qK(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${qK(n.fields[o])}`;return i+"}"}(e.mapValue):Yn()}function fwe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function WK(e){return!!e&&"integerValue"in e}function xse(e){return!!e&&"arrayValue"in e}function dwe(e){return!!e&&"nullValue"in e}function hwe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function _F(e){return!!e&&"mapValue"in e}function Bk(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return nx(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Bk(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Bk(e.arrayValue.values[n]);return t}return Object.assign({},e)}function dXt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(t){this.value=t}static empty(){return new yc({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!_F(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Bk(n)}setAll(t){let n=nu.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Bk(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());_F(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Zm(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];_F(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){nx(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new yc(Bk(this.value))}}function g5e(e){const t=[];return nx(e.fields,(n,r)=>{const i=new nu([n]);if(_F(r)){const s=g5e(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new bf(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Lu(t,0,tr.min(),tr.min(),tr.min(),yc.empty(),0)}static newFoundDocument(t,n,r,i){return new Lu(t,1,n,tr.min(),r,i,0)}static newNoDocument(t,n){return new Lu(t,2,n,tr.min(),tr.min(),yc.empty(),0)}static newUnknownDocument(t,n){return new Lu(t,3,n,tr.min(),tr.min(),yc.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(tr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=yc.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=yc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Lu&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Lu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q4=class{constructor(t,n){this.position=t,this.inclusive=n}};function pwe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=xn.comparator(xn.fromName(o.referenceValue),n.key):r=qC(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function mwe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Zm(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(t,n="asc"){this.field=t,this.dir=n}}function hXt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y5e=class{};class Uo extends y5e{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new mXt(t,n,r):n==="array-contains"?new vXt(t,r):n==="in"?new bXt(t,r):n==="not-in"?new wXt(t,r):n==="array-contains-any"?new _Xt(t,r):new Uo(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new gXt(t,r):new yXt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(qC(n,this.value)):n!==null&&hE(this.value)===hE(n)&&this.matchesComparison(qC(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Yn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hp extends y5e{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new hp(t,n)}matches(t){return v5e(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function v5e(e){return e.op==="and"}function b5e(e){return pXt(e)&&v5e(e)}function pXt(e){for(const t of e.filters)if(t instanceof hp)return!1;return!0}function GK(e){if(e instanceof Uo)return e.field.canonicalString()+e.op.toString()+WC(e.value);if(b5e(e))return e.filters.map(t=>GK(t)).join(",");{const t=e.filters.map(n=>GK(n)).join(",");return`${e.op}(${t})`}}function w5e(e,t){return e instanceof Uo?function(r,i){return i instanceof Uo&&r.op===i.op&&r.field.isEqual(i.field)&&Zm(r.value,i.value)}(e,t):e instanceof hp?function(r,i){return i instanceof hp&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&w5e(o,i.filters[a]),!0):!1}(e,t):void Yn()}function _5e(e){return e instanceof Uo?function(n){return`${n.field.canonicalString()} ${n.op} ${WC(n.value)}`}(e):e instanceof hp?function(n){return n.op.toString()+" {"+n.getFilters().map(_5e).join(" ,")+"}"}(e):"Filter"}class mXt extends Uo{constructor(t,n,r){super(t,n,r),this.key=xn.fromName(r.referenceValue)}matches(t){const n=xn.comparator(t.key,this.key);return this.matchesComparison(n)}}class gXt extends Uo{constructor(t,n){super(t,"in",n),this.keys=E5e("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class yXt extends Uo{constructor(t,n){super(t,"not-in",n),this.keys=E5e("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function E5e(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>xn.fromName(r.referenceValue))}class vXt extends Uo{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return xse(n)&&yN(n.arrayValue,this.value)}}class bXt extends Uo{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&yN(this.value.arrayValue,n)}}class wXt extends Uo{constructor(t,n){super(t,"not-in",n)}matches(t){if(yN(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!yN(this.value.arrayValue,n)}}class _Xt extends Uo{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!xse(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>yN(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EXt{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function gwe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new EXt(e,t,n,r,i,s,o)}function Sse(e){const t=nr(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>GK(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),P9(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>WC(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>WC(r)).join(",")),t.ue=n}return t.ue}function Tse(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!hXt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!w5e(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!mwe(e.startAt,t.startAt)&&mwe(e.endAt,t.endAt)}function YK(e){return xn.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function xXt(e,t,n,r,i,s,o,a){return new vA(e,t,n,r,i,s,o,a)}function Cse(e){return new vA(e)}function ywe(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function x5e(e){return e.collectionGroup!==null}function jk(e){const t=nr(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new lu(nu.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new vN(s,r))}),n.has(nu.keyField().canonicalString())||t.ce.push(new vN(nu.keyField(),r))}return t.ce}function Om(e){const t=nr(e);return t.le||(t.le=SXt(t,jk(e))),t.le}function SXt(e,t){if(e.limitType==="F")return gwe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new vN(i.field,s)});const n=e.endAt?new q4(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new q4(e.startAt.position,e.startAt.inclusive):null;return gwe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function KK(e,t){const n=e.filters.concat([t]);return new vA(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function XK(e,t,n){return new vA(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function O9(e,t){return Tse(Om(e),Om(t))&&e.limitType===t.limitType}function S5e(e){return`${Sse(Om(e))}|lt:${e.limitType}`}function DS(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>_5e(i)).join(", ")}]`),P9(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>WC(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>WC(i)).join(",")),`Target(${r})`}(Om(e))}; limitType=${e.limitType})`}function M9(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):xn.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of jk(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=pwe(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,jk(r),i)||r.endAt&&!function(o,a,u){const l=pwe(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,jk(r),i))}(e,t)}function TXt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function T5e(e){return(t,n)=>{let r=!1;for(const i of jk(e)){const s=CXt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function CXt(e,t,n){const r=e.field.isKeyField()?xn.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?qC(u,l):Yn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Yn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){nx(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return p5e(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AXt=new Ys(xn.comparator);function py(){return AXt}const C5e=new Ys(xn.comparator);function OI(...e){let t=C5e;for(const n of e)t=t.insert(n.key,n);return t}function A5e(e){let t=C5e;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function x_(){return Uk()}function D5e(){return Uk()}function Uk(){return new bA(e=>e.toString(),(e,t)=>e.isEqual(t))}const DXt=new Ys(xn.comparator),IXt=new lu(xn.comparator);function Mr(...e){let t=IXt;for(const n of e)t=t.add(n);return t}const kXt=new lu(_i);function RXt(){return kXt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5e(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:H4(t)?"-0":t}}function k5e(e){return{integerValue:""+e}}function NXt(e,t){return lXt(t)?k5e(t):I5e(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(){this._=void 0}}function PXt(e,t,n){return e instanceof bN?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&_se(s)&&(s=Ese(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof wN?N5e(e,t):e instanceof _N?P5e(e,t):function(i,s){const o=R5e(i,s),a=vwe(o)+vwe(i.Pe);return WK(o)&&WK(i.Pe)?k5e(a):I5e(i.serializer,a)}(e,t)}function OXt(e,t,n){return e instanceof wN?N5e(e,t):e instanceof _N?P5e(e,t):n}function R5e(e,t){return e instanceof W4?function(r){return WK(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class bN extends $9{}class wN extends $9{constructor(t){super(),this.elements=t}}function N5e(e,t){const n=O5e(t);for(const r of e.elements)n.some(i=>Zm(i,r))||n.push(r);return{arrayValue:{values:n}}}class _N extends $9{constructor(t){super(),this.elements=t}}function P5e(e,t){let n=O5e(t);for(const r of e.elements)n=n.filter(i=>!Zm(i,r));return{arrayValue:{values:n}}}class W4 extends $9{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function vwe(e){return Bo(e.integerValue||e.doubleValue)}function O5e(e){return xse(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MXt{constructor(t,n){this.field=t,this.transform=n}}function $Xt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof wN&&i instanceof wN||r instanceof _N&&i instanceof _N?HC(r.elements,i.elements,Zm):r instanceof W4&&i instanceof W4?Zm(r.Pe,i.Pe):r instanceof bN&&i instanceof bN}(e.transform,t.transform)}class FXt{constructor(t,n){this.version=t,this.transformResults=n}}class Nc{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Nc}static exists(t){return new Nc(void 0,t)}static updateTime(t){return new Nc(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function EF(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class F9{}function M5e(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new L9(e.key,Nc.none()):new JP(e.key,e.data,Nc.none());{const n=e.data,r=yc.empty();let i=new lu(nu.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Lb(e.key,r,new bf(i.toArray()),Nc.none())}}function LXt(e,t,n){e instanceof JP?function(i,s,o){const a=i.value.clone(),u=wwe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Lb?function(i,s,o){if(!EF(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=wwe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll($5e(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function zk(e,t,n,r){return e instanceof JP?function(s,o,a,u){if(!EF(s.precondition,o))return a;const l=s.value.clone(),c=_we(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Lb?function(s,o,a,u){if(!EF(s.precondition,o))return a;const l=_we(s.fieldTransforms,u,o),c=o.data;return c.setAll($5e(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return EF(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function BXt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=R5e(r.transform,i||null);s!=null&&(n===null&&(n=yc.empty()),n.set(r.field,s))}return n||null}function bwe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&HC(r,i,(s,o)=>$Xt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class JP extends F9{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Lb extends F9{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function $5e(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function wwe(e,t,n){const r=new Map;us(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,OXt(o,a,n[i]))}return r}function _we(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,PXt(s,o,t))}return r}class L9 extends F9{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jXt extends F9{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UXt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&LXt(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=zk(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=zk(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=D5e();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=M5e(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(tr.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Mr())}isEqual(t){return this.batchId===t.batchId&&HC(this.mutations,t.mutations,(n,r)=>bwe(n,r))&&HC(this.baseMutations,t.baseMutations,(n,r)=>bwe(n,r))}}class Ase{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){us(t.mutations.length===r.length);let i=function(){return DXt}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Ase(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zXt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VXt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mo,Qr;function HXt(e){switch(e){default:return Yn();case dt.CANCELLED:case dt.UNKNOWN:case dt.DEADLINE_EXCEEDED:case dt.RESOURCE_EXHAUSTED:case dt.INTERNAL:case dt.UNAVAILABLE:case dt.UNAUTHENTICATED:return!1;case dt.INVALID_ARGUMENT:case dt.NOT_FOUND:case dt.ALREADY_EXISTS:case dt.PERMISSION_DENIED:case dt.FAILED_PRECONDITION:case dt.ABORTED:case dt.OUT_OF_RANGE:case dt.UNIMPLEMENTED:case dt.DATA_LOSS:return!0}}function F5e(e){if(e===void 0)return hy("GRPC error has no .code"),dt.UNKNOWN;switch(e){case Mo.OK:return dt.OK;case Mo.CANCELLED:return dt.CANCELLED;case Mo.UNKNOWN:return dt.UNKNOWN;case Mo.DEADLINE_EXCEEDED:return dt.DEADLINE_EXCEEDED;case Mo.RESOURCE_EXHAUSTED:return dt.RESOURCE_EXHAUSTED;case Mo.INTERNAL:return dt.INTERNAL;case Mo.UNAVAILABLE:return dt.UNAVAILABLE;case Mo.UNAUTHENTICATED:return dt.UNAUTHENTICATED;case Mo.INVALID_ARGUMENT:return dt.INVALID_ARGUMENT;case Mo.NOT_FOUND:return dt.NOT_FOUND;case Mo.ALREADY_EXISTS:return dt.ALREADY_EXISTS;case Mo.PERMISSION_DENIED:return dt.PERMISSION_DENIED;case Mo.FAILED_PRECONDITION:return dt.FAILED_PRECONDITION;case Mo.ABORTED:return dt.ABORTED;case Mo.OUT_OF_RANGE:return dt.OUT_OF_RANGE;case Mo.UNIMPLEMENTED:return dt.UNIMPLEMENTED;case Mo.DATA_LOSS:return dt.DATA_LOSS;default:return Yn()}}(Qr=Mo||(Mo={}))[Qr.OK=0]="OK",Qr[Qr.CANCELLED=1]="CANCELLED",Qr[Qr.UNKNOWN=2]="UNKNOWN",Qr[Qr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qr[Qr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qr[Qr.NOT_FOUND=5]="NOT_FOUND",Qr[Qr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qr[Qr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qr[Qr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qr[Qr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qr[Qr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qr[Qr.ABORTED=10]="ABORTED",Qr[Qr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qr[Qr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qr[Qr.INTERNAL=13]="INTERNAL",Qr[Qr.UNAVAILABLE=14]="UNAVAILABLE",Qr[Qr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qXt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WXt=new P_([4294967295,4294967295],0);function Ewe(e){const t=qXt().encode(e),n=new o5e;return n.update(t),new Uint8Array(n.digest())}function xwe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new P_([n,r],0),new P_([i,s],0)]}class Dse{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new MI(`Invalid padding: ${n}`);if(r<0)throw new MI(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new MI(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new MI(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=P_.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(P_.fromNumber(r)));return i.compare(WXt)===1&&(i=new P_([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=Ewe(t),[r,i]=xwe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new Dse(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=Ewe(t),[r,i]=xwe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class MI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,ZP.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new B9(tr.min(),i,new Ys(_i),py(),Mr())}}class ZP{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new ZP(r,n,Mr(),Mr(),Mr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class L5e{constructor(t,n){this.targetId=t,this.me=n}}class B5e{constructor(t,n,r=Zu.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Swe{constructor(){this.fe=0,this.ge=Cwe(),this.pe=Zu.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Mr(),n=Mr(),r=Mr();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Yn()}}),new ZP(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=Cwe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,us(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class GXt{constructor(t){this.Le=t,this.Be=new Map,this.ke=py(),this.qe=Twe(),this.Qe=new Ys(_i)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:Yn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(YK(s))if(r===0){const o=new xn(s.path);this.Ue(n,o,Lu.newNoDocument(o,tr.min()))}else us(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=dE(r).toUint8Array()}catch(u){if(u instanceof m5e)return hN("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Dse(o,i,s)}catch(u){return hN(u instanceof MI?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&YK(a.target)){const u=new xn(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Lu.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Mr();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new B9(t,n,this.Qe,this.ke,r);return this.ke=py(),this.qe=Twe(),this.Qe=new Ys(_i),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new Swe,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new lu(_i),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||nn("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Swe),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Twe(){return new Ys(xn.comparator)}function Cwe(){return new Ys(xn.comparator)}const YXt={asc:"ASCENDING",desc:"DESCENDING"},KXt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XXt={and:"AND",or:"OR"};class QXt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function QK(e,t){return e.useProto3Json||P9(t)?t:{value:t}}function G4(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function j5e(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function JXt(e,t){return G4(e,t.toTimestamp())}function Mm(e){return us(!!e),tr.fromTimestamp(function(n){const r=Z1(n);return new da(r.seconds,r.nanos)}(e))}function Ise(e,t){return JK(e,t).canonicalString()}function JK(e,t){const n=function(i){return new ms(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function U5e(e){const t=ms.fromString(e);return us(W5e(t)),t}function ZK(e,t){return Ise(e.databaseId,t.path)}function PH(e,t){const n=U5e(t);if(n.get(1)!==e.databaseId.projectId)throw new Ht(dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ht(dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new xn(V5e(n))}function z5e(e,t){return Ise(e.databaseId,t)}function ZXt(e){const t=U5e(e);return t.length===4?ms.emptyPath():V5e(t)}function eX(e){return new ms(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function V5e(e){return us(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Awe(e,t,n){return{name:ZK(e,t),fields:n.value.mapValue.fields}}function eQt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Yn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(us(c===void 0||typeof c=="string"),Zu.fromBase64String(c||"")):(us(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Zu.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?dt.UNKNOWN:F5e(l.code);return new Ht(c,l.message||"")}(o);n=new B5e(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=PH(e,r.document.name),s=Mm(r.document.updateTime),o=r.document.createTime?Mm(r.document.createTime):tr.min(),a=new yc({mapValue:{fields:r.document.fields}}),u=Lu.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new xF(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=PH(e,r.document),s=r.readTime?Mm(r.readTime):tr.min(),o=Lu.newNoDocument(i,s),a=r.removedTargetIds||[];n=new xF([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=PH(e,r.document),s=r.removedTargetIds||[];n=new xF([],s,i,null)}else{if(!("filter"in t))return Yn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new VXt(i,s),a=r.targetId;n=new L5e(a,o)}}return n}function tQt(e,t){let n;if(t instanceof JP)n={update:Awe(e,t.key,t.value)};else if(t instanceof L9)n={delete:ZK(e,t.key)};else if(t instanceof Lb)n={update:Awe(e,t.key,t.data),updateMask:cQt(t.fieldMask)};else{if(!(t instanceof jXt))return Yn();n={verify:ZK(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof bN)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof wN)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof _N)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof W4)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Yn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:JXt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Yn()}(e,t.precondition)),n}function nQt(e,t){return e&&e.length>0?(us(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?Mm(i.updateTime):Mm(s);return o.isEqual(tr.min())&&(o=Mm(s)),new FXt(o,i.transformResults||[])}(n,t))):[]}function rQt(e,t){return{documents:[z5e(e,t.path)]}}function iQt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=z5e(e,i);const s=function(l){if(l.length!==0)return q5e(hp.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:IS(d.field),direction:aQt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=QK(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function sQt(e){let t=ZXt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){us(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=H5e(f);return d instanceof hp&&b5e(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new vN(kS(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,P9(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new q4(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new q4(h,d)}(n.endAt)),xXt(t,i,o,s,a,"F",u,l)}function oQt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Yn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function H5e(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=kS(n.unaryFilter.field);return Uo.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=kS(n.unaryFilter.field);return Uo.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=kS(n.unaryFilter.field);return Uo.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=kS(n.unaryFilter.field);return Uo.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Yn()}}(e):e.fieldFilter!==void 0?function(n){return Uo.create(kS(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Yn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return hp.create(n.compositeFilter.filters.map(r=>H5e(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Yn()}}(n.compositeFilter.op))}(e):Yn()}function aQt(e){return YXt[e]}function uQt(e){return KXt[e]}function lQt(e){return XXt[e]}function IS(e){return{fieldPath:e.canonicalString()}}function kS(e){return nu.fromServerFormat(e.fieldPath)}function q5e(e){return e instanceof Uo?function(n){if(n.op==="=="){if(hwe(n.value))return{unaryFilter:{field:IS(n.field),op:"IS_NAN"}};if(dwe(n.value))return{unaryFilter:{field:IS(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hwe(n.value))return{unaryFilter:{field:IS(n.field),op:"IS_NOT_NAN"}};if(dwe(n.value))return{unaryFilter:{field:IS(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:IS(n.field),op:uQt(n.op),value:n.value}}}(e):e instanceof hp?function(n){const r=n.getFilters().map(i=>q5e(i));return r.length===1?r[0]:{compositeFilter:{op:lQt(n.op),filters:r}}}(e):Yn()}function cQt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function W5e(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(t,n,r,i,s=tr.min(),o=tr.min(),a=Zu.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new qv(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new qv(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new qv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new qv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fQt{constructor(t){this.ct=t}}function dQt(e){const t=sQt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?XK(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hQt{constructor(){this._n=new pQt}addToCollectionParentIndex(t,n){return this._n.add(n),Et.resolve()}getCollectionParents(t,n){return Et.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Et.resolve()}deleteFieldIndex(t,n){return Et.resolve()}deleteAllFieldIndexes(t){return Et.resolve()}createTargetIndexes(t,n){return Et.resolve()}getDocumentsMatchingTarget(t,n){return Et.resolve(null)}getIndexType(t,n){return Et.resolve(0)}getFieldIndexes(t,n){return Et.resolve([])}getNextCollectionGroupToUpdate(t){return Et.resolve(null)}getMinOffset(t,n){return Et.resolve(J1.min())}getMinOffsetFromCollectionGroup(t,n){return Et.resolve(J1.min())}updateCollectionGroup(t,n,r){return Et.resolve()}updateIndexEntries(t,n){return Et.resolve()}}class pQt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new lu(ms.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new lu(ms.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new GC(0)}static Ln(){return new GC(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mQt{constructor(){this.changes=new bA(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Lu.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Et.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gQt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yQt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&zk(r.mutation,i,bf.empty(),da.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Mr()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Mr()){const i=x_();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=OI();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=x_();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Mr()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=py();const o=Uk(),a=function(){return Uk()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Lb)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),zk(c.mutation,l,c.mutation.getFieldMask(),da.now())):o.set(l.key,bf.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new gQt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=Uk();let i=new Ys((o,a)=>o-a),s=Mr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||bf.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Mr()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=D5e();c.forEach(d=>{if(!s.has(d)){const h=M5e(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Et.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return xn.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):x5e(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Et.resolve(x_());let a=-1,u=s;return o.next(l=>Et.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Et.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Mr())).next(c=>({batchId:a,changes:A5e(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new xn(n)).next(r=>{let i=OI();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=OI();return this.indexManager.getCollectionParents(t,s).next(a=>Et.forEach(a,u=>{const l=function(f,d){return new vA(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,Lu.newInvalidDocument(c)))});let a=OI();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&zk(c.mutation,l,bf.empty(),da.now()),M9(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vQt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Et.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Mm(i.createTime)}}(n)),Et.resolve()}getNamedQuery(t,n){return Et.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:dQt(i.bundledQuery),readTime:Mm(i.readTime)}}(n)),Et.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bQt{constructor(){this.overlays=new Ys(xn.comparator),this.hr=new Map}getOverlay(t,n){return Et.resolve(this.overlays.get(n))}getOverlays(t,n){const r=x_();return Et.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Et.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Et.resolve()}getOverlaysForCollection(t,n,r){const i=x_(),s=n.length+1,o=new xn(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Et.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Ys((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=x_(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=x_(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Et.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new zXt(n,r));let s=this.hr.get(n);s===void 0&&(s=Mr(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kse{constructor(){this.Pr=new lu(Ta.Ir),this.Tr=new lu(Ta.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Ta(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Ta(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new xn(new ms([])),r=new Ta(n,t),i=new Ta(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new xn(new ms([])),r=new Ta(n,t),i=new Ta(n,t+1);let s=Mr();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Ta(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ta{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return xn.comparator(t.key,n.key)||_i(t.pr,n.pr)}static Er(t,n){return _i(t.pr,n.pr)||xn.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wQt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new lu(Ta.Ir)}checkEmpty(t){return Et.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new UXt(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Ta(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Et.resolve(o)}lookupMutationBatch(t,n){return Et.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Et.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Et.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Et.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ta(n,0),i=new Ta(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Et.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new lu(_i);return n.forEach(i=>{const s=new Ta(i,0),o=new Ta(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Et.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;xn.isDocumentKey(s)||(s=s.child(""));const o=new Ta(new xn(s),0);let a=new lu(_i);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Et.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){us(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Et.forEach(n.mutations,i=>{const s=new Ta(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Ta(n,0),i=this.wr.firstAfterOrEqual(r);return Et.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Et.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Qt{constructor(t){this.vr=t,this.docs=function(){return new Ys(xn.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Et.resolve(r?r.document.mutableCopy():Lu.newInvalidDocument(n))}getEntries(t,n){let r=py();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Lu.newInvalidDocument(i))}),Et.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=py();const o=n.path,a=new xn(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||sXt(iXt(c),r)<=0||(i.has(c.key)||M9(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Et.resolve(s)}getAllFromCollectionGroup(t,n,r,i){Yn()}Fr(t,n){return Et.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new EQt(this)}getSize(t){return Et.resolve(this.size)}}class EQt extends mQt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Et.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xQt{constructor(t){this.persistence=t,this.Mr=new bA(n=>Sse(n),Tse),this.lastRemoteSnapshotVersion=tr.min(),this.highestTargetId=0,this.Or=0,this.Nr=new kse,this.targetCount=0,this.Lr=GC.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Et.resolve()}getLastRemoteSnapshotVersion(t){return Et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Et.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Et.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Et.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new GC(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Et.resolve()}updateTargetData(t,n){return this.qn(n),Et.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Et.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Et.waitFor(s).next(()=>i)}getTargetCount(t){return Et.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Et.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Et.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Et.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Et.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Et.resolve(r)}containsKey(t,n){return Et.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SQt{constructor(t,n){this.Br={},this.overlays={},this.kr=new wse(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new xQt(this),this.indexManager=new hQt,this.remoteDocumentCache=function(i){return new _Qt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new fQt(n),this.$r=new vQt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new bQt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new wQt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){nn("MemoryPersistence","Starting transaction:",t);const i=new TQt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Et.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class TQt extends aXt{constructor(t){super(),this.currentSequenceNumber=t}}class Rse{constructor(t){this.persistence=t,this.zr=new kse,this.jr=null}static Hr(t){return new Rse(t)}get Jr(){if(this.jr)return this.jr;throw Yn()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Et.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Et.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Et.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Et.forEach(this.Jr,r=>{const i=xn.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,tr.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Et.or([()=>Et.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nse{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=Mr(),i=Mr();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Nse(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CQt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AQt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return oqt()?8:uXt(hu())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new CQt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(FD()<=Hr.DEBUG&&nn("QueryEngine","SDK will not create cache indexes for query:",DS(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Et.resolve()):(FD()<=Hr.DEBUG&&nn("QueryEngine","Query:",DS(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(FD()<=Hr.DEBUG&&nn("QueryEngine","The SDK decides to create cache indexes for query:",DS(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Om(n))):Et.resolve())}ji(t,n){if(ywe(n))return Et.resolve(null);let r=Om(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=XK(n,null,"F"),r=Om(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=Mr(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,XK(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return ywe(n)||i.isEqual(tr.min())?Et.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Et.resolve(null):(FD()<=Hr.DEBUG&&nn("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),DS(n)),this.es(t,o,n,rXt(i,-1)).next(a=>a))})}Zi(t,n){let r=new lu(T5e(t));return n.forEach((i,s)=>{M9(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return FD()<=Hr.DEBUG&&nn("QueryEngine","Using full collection scan to execute query:",DS(n)),this.zi.getDocumentsMatchingQuery(t,n,J1.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DQt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Ys(_i),this.rs=new bA(s=>Sse(s),Tse),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new yQt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function IQt(e,t,n,r){return new DQt(e,t,n,r)}async function G5e(e,t){const n=nr(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Mr();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function kQt(e,t){const n=nr(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Et.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);us(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Mr();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function Y5e(e){const t=nr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function RQt(e,t){const n=nr(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Zu.EMPTY_BYTE_STRING,tr.min()).withLastLimboFreeSnapshotVersion(tr.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=py(),l=Mr();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(NQt(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(tr.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Et.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function NQt(e,t,n){let r=Mr(),i=Mr();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=py();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(tr.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):nn("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function PQt(e,t){const n=nr(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function OQt(e,t){const n=nr(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Et.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new qv(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function tX(e,t,n){const r=nr(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!QP(o))throw o;nn("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Dwe(e,t,n){const r=nr(e);let i=tr.min(),s=Mr();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=nr(u),d=f.rs.get(c);return d!==void 0?Et.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,Om(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:tr.min(),n?s:Mr())).next(a=>(MQt(r,TXt(t),a),{documents:a,hs:s})))}function MQt(e,t,n){let r=e.ss.get(t)||tr.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class Iwe{constructor(){this.activeTargetIds=RXt()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class $Qt{constructor(){this.no=new Iwe,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Iwe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FQt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kwe{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){nn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){nn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YM=null;function OH(){return YM===null?YM=function(){return 268435456+Math.round(2147483648*Math.random())}():YM++,"0x"+YM.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LQt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BQt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku="WebChannelConnection";class jQt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=OH(),u=this.vo(n,r.toUriEncodedString());nn("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(nn("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw hN("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yA}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=LQt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=OH();return new Promise((o,a)=>{const u=new a5e;u.setWithCredentials(!0),u.listenOnce(l5e.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case wF.NO_ERROR:const c=u.getResponseJson();nn(ku,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case wF.TIMEOUT:nn(ku,`RPC '${t}' ${s} timed out`),a(new Ht(dt.DEADLINE_EXCEEDED,"Request time out"));break;case wF.HTTP_ERROR:const f=u.getStatus();if(nn(ku,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(dt).indexOf(y)>=0?y:dt.UNKNOWN}(h.status);a(new Ht(p,h.message))}else a(new Ht(dt.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Ht(dt.UNAVAILABLE,"Connection failed."));break;default:Yn()}}finally{nn(ku,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);nn(ku,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=OH(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=d5e(),a=f5e(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new u5e({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");nn(ku,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new BQt({lo:g=>{h?nn(ku,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(nn(ku,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),nn(ku,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,b)=>{g.listen(y,w=>{try{b(w)}catch(S){setTimeout(()=>{throw S},0)}})};return m(f,PI.EventType.OPEN,()=>{h||(nn(ku,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,PI.EventType.CLOSE,()=>{h||(h=!0,nn(ku,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,PI.EventType.ERROR,g=>{h||(h=!0,hN(ku,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new Ht(dt.UNAVAILABLE,"The operation could not be completed")))}),m(f,PI.EventType.MESSAGE,g=>{var y;if(!h){const b=g.data[0];us(!!b);const w=b,S=w.error||((y=w[0])===null||y===void 0?void 0:y.error);if(S){nn(ku,`RPC '${t}' stream ${i} received error:`,S);const E=S.status;let T=function(I){const k=Mo[I];if(k!==void 0)return F5e(k)}(E),C=S.message;T===void 0&&(T=dt.INTERNAL,C="Unknown error status: "+E+" with message "+S.message),h=!0,p.po(new Ht(T,C)),f.close()}else nn(ku,`RPC '${t}' stream ${i} received:`,b),p.yo(b)}}),m(a,c5e.STAT_EVENT,g=>{g.stat===HK.PROXY?nn(ku,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===HK.NOPROXY&&nn(ku,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function MH(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j9(e){return new QXt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5e{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&nn("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5e{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new K5e(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===dt.RESOURCE_EXHAUSTED?(hy(n.toString()),hy("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===dt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new Ht(dt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return nn("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(nn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class UQt extends X5e{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=eQt(this.serializer,t),r=function(s){if(!("targetChange"in s))return tr.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?tr.min():o.readTime?Mm(o.readTime):tr.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=eX(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=YK(u)?{documents:rQt(s,u)}:{query:iQt(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=j5e(s,o.resumeToken);const l=QK(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(tr.min())>0){a.readTime=G4(s,o.snapshotVersion.toTimestamp());const l=QK(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=oQt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=eX(this.serializer),n.removeTarget=t,this.i_(n)}}class zQt extends X5e{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(us(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=nQt(t.writeResults,t.commitTime),r=Mm(t.commitTime);return this.listener.A_(r,n)}return us(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=eX(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>tQt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VQt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Ht(dt.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,JK(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ht(dt.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,JK(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ht(dt.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class HQt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(hy(n),this.y_=!1):nn("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qQt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{rx(this)&&(nn("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=nr(u);l.M_.add(4),await tO(l),l.N_.set("Unknown"),l.M_.delete(4),await eO(l)}(this))})}),this.N_=new HQt(r,i)}}async function eO(e){if(rx(e))for(const t of e.x_)await t(!0)}async function tO(e){for(const t of e.x_)await t(!1)}function Q5e(e,t){const n=nr(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),$se(n)?Mse(n):wA(n).Xo()&&Ose(n,t))}function Pse(e,t){const n=nr(e),r=wA(n);n.F_.delete(t),r.Xo()&&J5e(n,t),n.F_.size===0&&(r.Xo()?r.n_():rx(n)&&n.N_.set("Unknown"))}function Ose(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(tr.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}wA(e).P_(t)}function J5e(e,t){e.L_.xe(t),wA(e).I_(t)}function Mse(e){e.L_=new GXt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),wA(e).start(),e.N_.w_()}function $se(e){return rx(e)&&!wA(e).Zo()&&e.F_.size>0}function rx(e){return nr(e).M_.size===0}function Z5e(e){e.L_=void 0}async function WQt(e){e.N_.set("Online")}async function GQt(e){e.F_.forEach((t,n)=>{Ose(e,t)})}async function YQt(e,t){Z5e(e),$se(e)?(e.N_.D_(t),Mse(e)):e.N_.set("Unknown")}async function KQt(e,t,n){if(e.N_.set("Online"),t instanceof B5e&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){nn("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Y4(e,r)}else if(t instanceof xF?e.L_.Ke(t):t instanceof L5e?e.L_.He(t):e.L_.We(t),!n.isEqual(tr.min()))try{const r=await Y5e(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(Zu.EMPTY_BYTE_STRING,c.snapshotVersion)),J5e(s,u);const f=new qv(c.target,u,l,c.sequenceNumber);Ose(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){nn("RemoteStore","Failed to raise snapshot:",r),await Y4(e,r)}}async function Y4(e,t,n){if(!QP(t))throw t;e.M_.add(1),await tO(e),e.N_.set("Offline"),n||(n=()=>Y5e(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{nn("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await eO(e)})}function e8e(e,t){return t().catch(n=>Y4(e,n,t))}async function U9(e){const t=nr(e),n=eb(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;XQt(t);)try{const i=await PQt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,QQt(t,i)}catch(i){await Y4(t,i)}t8e(t)&&n8e(t)}function XQt(e){return rx(e)&&e.v_.length<10}function QQt(e,t){e.v_.push(t);const n=eb(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function t8e(e){return rx(e)&&!eb(e).Zo()&&e.v_.length>0}function n8e(e){eb(e).start()}async function JQt(e){eb(e).V_()}async function ZQt(e){const t=eb(e);for(const n of e.v_)t.d_(n.mutations)}async function eJt(e,t,n){const r=e.v_.shift(),i=Ase.from(r,t,n);await e8e(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await U9(e)}async function tJt(e,t){t&&eb(e).E_&&await async function(r,i){if(function(o){return HXt(o)&&o!==dt.ABORTED}(i.code)){const s=r.v_.shift();eb(r).t_(),await e8e(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await U9(r)}}(e,t),t8e(e)&&n8e(e)}async function Rwe(e,t){const n=nr(e);n.asyncQueue.verifyOperationInProgress(),nn("RemoteStore","RemoteStore received new credentials");const r=rx(n);n.M_.add(3),await tO(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await eO(n)}async function nJt(e,t){const n=nr(e);t?(n.M_.delete(2),await eO(n)):t||(n.M_.add(2),await tO(n),n.N_.set("Unknown"))}function wA(e){return e.B_||(e.B_=function(n,r,i){const s=nr(n);return s.f_(),new UQt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:WQt.bind(null,e),To:GQt.bind(null,e),Ao:YQt.bind(null,e),h_:KQt.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),$se(e)?Mse(e):e.N_.set("Unknown")):(await e.B_.stop(),Z5e(e))})),e.B_}function eb(e){return e.k_||(e.k_=function(n,r,i){const s=nr(n);return s.f_(),new zQt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:JQt.bind(null,e),Ao:tJt.bind(null,e),R_:ZQt.bind(null,e),A_:eJt.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await U9(e)):(await e.k_.stop(),e.v_.length>0&&(nn("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fse{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new F0,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new Fse(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ht(dt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lse(e,t){if(hy("AsyncQueue",`${t}: ${e}`),QP(e))return new Ht(dt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(t){this.comparator=t?(n,r)=>t(n,r)||xn.comparator(n.key,r.key):(n,r)=>xn.comparator(n.key,r.key),this.keyedMap=OI(),this.sortedSet=new Ys(this.comparator)}static emptySet(t){return new jT(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof jT)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new jT;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nwe{constructor(){this.q_=new Ys(xn.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):Yn():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class YC{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new YC(t,n,jT.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&O9(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rJt{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class iJt{constructor(){this.queries=new bA(t=>S5e(t),O9),this.onlineState="Unknown",this.z_=new Set}}async function r8e(e,t){const n=nr(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new rJt,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Lse(o,`Initialization of query '${DS(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&Bse(n)}async function i8e(e,t){const n=nr(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function sJt(e,t){const n=nr(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&Bse(n)}function oJt(e,t,n){const r=nr(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function Bse(e){e.z_.forEach(t=>{t.next()})}var nX,Pwe;(Pwe=nX||(nX={})).J_="default",Pwe.Cache="cache";class s8e{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new YC(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=YC.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==nX.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8e{constructor(t){this.key=t}}class a8e{constructor(t){this.key=t}}class aJt{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Mr(),this.mutatedKeys=Mr(),this.Ia=T5e(t),this.Ta=new jT(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new Nwe,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=M9(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yn()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new YC(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Nwe,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=Mr(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new a8e(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new o8e(r))}),n}pa(t){this.la=t.hs,this.Pa=Mr();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return YC.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class uJt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class lJt{constructor(t){this.key=t,this.wa=!1}}class cJt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new bA(a=>S5e(a),O9),this.Da=new Map,this.Ca=new Set,this.va=new Ys(xn.comparator),this.Fa=new Map,this.Ma=new kse,this.xa={},this.Oa=new Map,this.Na=GC.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function fJt(e,t,n=!0){const r=h8e(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await u8e(r,t,n,!0),i}async function dJt(e,t){const n=h8e(e);await u8e(n,t,!0,!1)}async function u8e(e,t,n,r){const i=await OQt(e.localStore,Om(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await hJt(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&Q5e(e.remoteStore,i),a}async function hJt(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,b){let w=g.view.da(y);w.Xi&&(w=await Dwe(m.localStore,g.query,!1).then(({documents:C})=>g.view.da(C,w)));const S=b&&b.targetChanges.get(g.targetId),E=b&&b.targetMismatches.get(g.targetId)!=null,T=g.view.applyChanges(w,m.isPrimaryClient,S,E);return Mwe(m,g.targetId,T.fa),T.snapshot}(e,f,d,h);const s=await Dwe(e.localStore,t,!0),o=new aJt(t,s.hs),a=o.da(s.documents),u=ZP.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);Mwe(e,n,l.fa);const c=new uJt(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function pJt(e,t,n){const r=nr(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!O9(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await tX(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Pse(r.remoteStore,i.targetId),rX(r,i.targetId)}).catch(XP)):(rX(r,i.targetId),await tX(r.localStore,i.targetId,!0))}async function mJt(e,t){const n=nr(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Pse(n.remoteStore,r.targetId))}async function gJt(e,t,n){const r=xJt(e);try{const i=await function(o,a){const u=nr(o),l=da.now(),c=a.reduce((h,p)=>h.add(p.key),Mr());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=py(),m=Mr();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,b)=>{b.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const b of a){const w=BXt(b,f.get(b.key).overlayedDocument);w!=null&&y.push(new Lb(b.key,w,g5e(w.value.mapValue),Nc.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:A5e(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Ys(_i)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await nO(r,i.changes),await U9(r.remoteStore)}catch(i){const s=Lse(i,"Failed to persist write");n.reject(s)}}async function l8e(e,t){const n=nr(e);try{const r=await RQt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(us(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?us(o.wa):i.removedDocuments.size>0&&(us(o.wa),o.wa=!1))}),await nO(n,r,t)}catch(r){await XP(r)}}function Owe(e,t,n){const r=nr(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=nr(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&Bse(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function yJt(e,t,n){const r=nr(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Ys(xn.comparator);o=o.insert(s,Lu.newNoDocument(s,tr.min()));const a=Mr().add(s),u=new B9(tr.min(),new Map,new Ys(_i),o,a);await l8e(r,u),r.va=r.va.remove(s),r.Fa.delete(t),jse(r)}else await tX(r.localStore,t,!1).then(()=>rX(r,t,n)).catch(XP)}async function vJt(e,t){const n=nr(e),r=t.batch.batchId;try{const i=await kQt(n.localStore,t);f8e(n,r,null),c8e(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await nO(n,i)}catch(i){await XP(i)}}async function bJt(e,t,n){const r=nr(e);try{const i=await function(o,a){const u=nr(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(us(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);f8e(r,t,n),c8e(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await nO(r,i)}catch(i){await XP(i)}}function c8e(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function f8e(e,t,n){const r=nr(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function rX(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||d8e(e,r)})}function d8e(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(Pse(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),jse(e))}function Mwe(e,t,n){for(const r of n)r instanceof o8e?(e.Ma.addReference(r.key,t),wJt(e,r)):r instanceof a8e?(nn("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||d8e(e,r.key)):Yn()}function wJt(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(nn("SyncEngine","New document in limbo: "+n),e.Ca.add(r),jse(e))}function jse(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new xn(ms.fromString(t)),r=e.Na.next();e.Fa.set(r,new lJt(n)),e.va=e.va.insert(n,r),Q5e(e.remoteStore,new qv(Om(Cse(n.path)),r,"TargetPurposeLimboResolution",wse.oe))}}async function nO(e,t,n){const r=nr(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=Nse.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=nr(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Et.forEach(l,d=>Et.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Et.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!QP(f))throw f;nn("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function _Jt(e,t){const n=nr(e);if(!n.currentUser.isEqual(t)){nn("SyncEngine","User change. New user:",t.toKey());const r=await G5e(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new Ht(dt.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await nO(n,r.us)}}function EJt(e,t){const n=nr(e),r=n.Fa.get(t);if(r&&r.wa)return Mr().add(r.key);{let i=Mr();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function h8e(e){const t=nr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=l8e.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=EJt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=yJt.bind(null,t),t.Sa.h_=sJt.bind(null,t.eventManager),t.Sa.ka=oJt.bind(null,t.eventManager),t}function xJt(e){const t=nr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=vJt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bJt.bind(null,t),t}class $we{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=j9(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return IQt(this.persistence,new AQt,t.initialUser,this.serializer)}createPersistence(t){return new SQt(Rse.Hr,this.serializer)}createSharedClientState(t){return new $Qt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class SJt{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Owe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_Jt.bind(null,this.syncEngine),await nJt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new iJt}()}createDatastore(t){const n=j9(t.databaseInfo.databaseId),r=function(s){return new jQt(s)}(t.databaseInfo);return function(s,o,a,u){return new VQt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new qQt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Owe(this.syncEngine,n,0),function(){return kwe.D()?new kwe:new FQt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new cJt(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=nr(r);nn("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await tO(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8e{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):hy("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TJt{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=oc.UNAUTHENTICATED,this.clientId=h5e.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{nn("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(nn("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ht(dt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new F0;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Lse(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function $H(e,t){e.asyncQueue.verifyOperationInProgress(),nn("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await G5e(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Fwe(e,t){e.asyncQueue.verifyOperationInProgress();const n=await m8e(e);nn("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Rwe(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>Rwe(t.remoteStore,i)),e._onlineComponents=t}function CJt(e){return e.name==="FirebaseError"?e.code===dt.FAILED_PRECONDITION||e.code===dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function m8e(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){nn("FirestoreClient","Using user provided OfflineComponentProvider");try{await $H(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!CJt(n))throw n;hN("Error using user provided cache. Falling back to memory cache: "+n),await $H(e,new $we)}}else nn("FirestoreClient","Using default OfflineComponentProvider"),await $H(e,new $we);return e._offlineComponents}async function Use(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(nn("FirestoreClient","Using user provided OnlineComponentProvider"),await Fwe(e,e._uninitializedComponentsProvider._online)):(nn("FirestoreClient","Using default OnlineComponentProvider"),await Fwe(e,new SJt))),e._onlineComponents}function AJt(e){return m8e(e).then(t=>t.persistence)}function DJt(e){return Use(e).then(t=>t.remoteStore)}function IJt(e){return Use(e).then(t=>t.syncEngine)}async function g8e(e){const t=await Use(e),n=t.eventManager;return n.onListen=fJt.bind(null,t.syncEngine),n.onUnlisten=pJt.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=dJt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=mJt.bind(null,t.syncEngine),n}function kJt(e){return e.asyncQueue.enqueue(async()=>{const t=await AJt(e),n=await DJt(e);return t.setNetworkEnabled(!0),function(i){const s=nr(i);return s.M_.delete(0),eO(s)}(n)})}function RJt(e,t,n={}){const r=new F0;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new p8e({next:d=>{o.enqueueAndForget(()=>i8e(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new Ht(dt.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new Ht(dt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new s8e(Cse(a.path),c,{includeMetadataChanges:!0,ra:!0});return r8e(s,f)}(await g8e(e),e.asyncQueue,t,n,r)),r.promise}function NJt(e,t,n={}){const r=new F0;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new p8e({next:d=>{o.enqueueAndForget(()=>i8e(s,f)),d.fromCache&&u.source==="server"?l.reject(new Ht(dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new s8e(a,c,{includeMetadataChanges:!0,ra:!0});return r8e(s,f)}(await g8e(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y8e(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lwe=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8e(e,t,n){if(!n)throw new Ht(dt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function PJt(e,t,n,r){if(t===!0&&r===!0)throw new Ht(dt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Bwe(e){if(!xn.isDocumentKey(e))throw new Ht(dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function jwe(e){if(xn.isDocumentKey(e))throw new Ht(dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function z9(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Yn()}function pp(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ht(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=z9(e);throw new Ht(dt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uwe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Ht(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Ht(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}PJt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=y8e((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ht(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ht(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ht(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class zse{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uwe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ht(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Ht(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uwe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new KKt;switch(r.type){case"firstParty":return new JKt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ht(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Lwe.get(n);r&&(nn("ComponentProvider","Removing Datastore"),Lwe.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new ix(this.firestore,t,this._query)}}class Ol{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new w1(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ol(this.firestore,t,this._key)}}class w1 extends ix{constructor(t,n,r){super(t,n,Cse(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ol(this.firestore,null,new xn(t))}withConverter(t){return new w1(this.firestore,t,this._path)}}function vh(e,t,...n){if(e=ls(e),v8e("collection","path",t),e instanceof zse){const r=ms.fromString(t,...n);return jwe(r),new w1(e,null,r)}{if(!(e instanceof Ol||e instanceof w1))throw new Ht(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ms.fromString(t,...n));return jwe(r),new w1(e.firestore,null,r)}}function Js(e,t,...n){if(e=ls(e),arguments.length===1&&(t=h5e.newId()),v8e("doc","path",t),e instanceof zse){const r=ms.fromString(t,...n);return Bwe(r),new Ol(e,null,new xn(r))}{if(!(e instanceof Ol||e instanceof w1))throw new Ht(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ms.fromString(t,...n));return Bwe(r),new Ol(e.firestore,e instanceof w1?e.converter:null,new xn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OJt{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new K5e(this,"async_queue_retry"),this.hu=()=>{const n=MH();n&&nn("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=MH();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=MH();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new F0;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!QP(t))throw t;nn("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw hy("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=Fse.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Yn()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class Bb extends zse{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new OJt}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||b8e(this),this._firestoreClient.terminate()}}function MJt(e,t,n){n||(n="(default)");const r=mA(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(cN(s,t))return i;throw new Ht(dt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Ht(dt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Ht(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function rO(e){return e._firestoreClient||b8e(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function b8e(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new fXt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,y8e(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new TJt(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function $Jt(e){return kJt(rO(e=pp(e,Bb)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(t){this._byteString=t}static fromBase64String(t){try{return new KC(Zu.fromBase64String(t))}catch(n){throw new Ht(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new KC(Zu.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Ht(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nu(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vse=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Ht(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ht(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return _i(this._lat,t._lat)||_i(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FJt=/^__.*__$/;class LJt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Lb(t,this.data,this.fieldMask,n,this.fieldTransforms):new JP(t,this.data,n,this.fieldTransforms)}}class w8e{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Lb(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function _8e(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yn()}}class Hse{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new Hse(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return K4(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(_8e(this.fu)&&FJt.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class BJt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||j9(t)}Fu(t,n,r,i=!1){return new Hse({fu:t,methodName:n,vu:r,path:nu.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function H9(e){const t=e._freezeSettings(),n=j9(e._databaseId);return new BJt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function E8e(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);Wse("Data must be an object, but it was:",o,r);const a=T8e(r,o);let u,l;if(s.merge)u=new bf(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=iX(t,f,n);if(!o.contains(d))throw new Ht(dt.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);A8e(c,d)||c.push(d)}u=new bf(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new LJt(new yc(a),u,l)}class q9 extends V9{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof q9}}class qse extends V9{_toFieldTransform(t){return new MXt(t.path,new bN)}isEqual(t){return t instanceof qse}}function x8e(e,t,n,r){const i=e.Fu(1,t,n);Wse("Data must be an object, but it was:",i,r);const s=[],o=yc.empty();nx(r,(u,l)=>{const c=Gse(t,u,n);l=ls(l);const f=i.Su(c);if(l instanceof q9)s.push(c);else{const d=sO(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new bf(s);return new w8e(o,a,i.fieldTransforms)}function S8e(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[iX(t,r,n)],u=[i];if(s.length%2!=0)throw new Ht(dt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(iX(t,s[d])),u.push(s[d+1]);const l=[],c=yc.empty();for(let d=a.length-1;d>=0;--d)if(!A8e(l,a[d])){const h=a[d];let p=u[d];p=ls(p);const m=o.Su(h);if(p instanceof q9)l.push(h);else{const g=sO(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new bf(l);return new w8e(c,f,o.fieldTransforms)}function jJt(e,t,n,r=!1){return sO(n,e.Fu(r?4:3,t))}function sO(e,t){if(C8e(e=ls(e)))return Wse("Unsupported field value:",t,e),T8e(e,t);if(e instanceof V9)return function(r,i){if(!_8e(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=sO(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=ls(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return NXt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=da.fromDate(r);return{timestampValue:G4(i.serializer,s)}}if(r instanceof da){const s=new da(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:G4(i.serializer,s)}}if(r instanceof Vse)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof KC)return{bytesValue:j5e(i.serializer,r._byteString)};if(r instanceof Ol){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ise(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${z9(r)}`)}(e,t)}function T8e(e,t){const n={};return p5e(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):nx(e,(r,i)=>{const s=sO(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function C8e(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof da||e instanceof Vse||e instanceof KC||e instanceof Ol||e instanceof V9)}function Wse(e,t,n){if(!C8e(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=z9(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function iX(e,t,n){if((t=ls(t))instanceof iO)return t._internalPath;if(typeof t=="string")return Gse(e,t);throw K4("Field path arguments must be of type string or ",e,!1,void 0,n)}const UJt=new RegExp("[~\\*/\\[\\]]");function Gse(e,t,n){if(t.search(UJt)>=0)throw K4(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new iO(...t.split("."))._internalPath}catch{throw K4(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function K4(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Ht(dt.INVALID_ARGUMENT,a+e+u)}function A8e(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8e{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ol(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new zJt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(W9("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class zJt extends D8e{data(){return super.data()}}function W9(e,t){return typeof t=="string"?Gse(e,t):t instanceof iO?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VJt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Ht(dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yse{}class I8e extends Yse{}function zwe(e,t,...n){let r=[];t instanceof Yse&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Kse).length,a=s.filter(u=>u instanceof G9).length;if(o>1||o>0&&a>0)throw new Ht(dt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class G9 extends I8e{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new G9(t,n,r)}_apply(t){const n=this._parse(t);return k8e(t._query,n),new ix(t.firestore,t.converter,KK(t._query,n))}_parse(t){const n=H9(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Ht(dt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Hwe(f,c);const h=[];for(const p of f)h.push(Vwe(u,s,p));d={arrayValue:{values:h}}}else d=Vwe(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Hwe(f,c),d=jJt(a,o,f,c==="in"||c==="not-in");return Uo.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function HJt(e,t,n){const r=t,i=W9("where",e);return G9._create(i,r,n)}class Kse extends Yse{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Kse(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:hp.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)k8e(o,u),o=KK(o,u)}(t._query,n),new ix(t.firestore,t.converter,KK(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xse extends I8e{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Xse(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new Ht(dt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ht(dt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vN(s,o)}(t._query,this._field,this._direction);return new ix(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new vA(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function qJt(e,t="asc"){const n=t,r=W9("orderBy",e);return Xse._create(r,n)}function Vwe(e,t,n){if(typeof(n=ls(n))=="string"){if(n==="")throw new Ht(dt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!x5e(t)&&n.indexOf("/")!==-1)throw new Ht(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ms.fromString(n));if(!xn.isDocumentKey(r))throw new Ht(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fwe(e,new xn(r))}if(n instanceof Ol)return fwe(e,n._key);throw new Ht(dt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${z9(n)}.`)}function Hwe(e,t){if(!Array.isArray(e)||e.length===0)throw new Ht(dt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function k8e(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Ht(dt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ht(dt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class WJt{convertValue(t,n="none"){switch(hE(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Bo(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(dE(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Yn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return nx(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new Vse(Bo(t.latitude),Bo(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Ese(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(mN(t));default:return null}}convertTimestamp(t){const n=Z1(t);return new da(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=ms.fromString(t);us(W5e(r));const i=new gN(r.get(1),r.get(3)),s=new xn(r.popFirst(5));return i.isEqual(n)||hy(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R8e(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class N8e extends D8e{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new SF(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(W9("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class SF extends N8e{data(t={}){return super.data(t)}}class GJt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new $I(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new SF(this._firestore,this._userDataWriter,r.key,r,new $I(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ht(dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new SF(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $I(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new SF(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $I(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:YJt(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function YJt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Yn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KM(e){e=pp(e,Ol);const t=pp(e.firestore,Bb);return RJt(rO(t),e._key).then(n=>QJt(t,e,n))}class P8e extends WJt{constructor(t){super(),this.firestore=t}convertBytes(t){return new KC(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ol(this.firestore,null,n)}}function LD(e){e=pp(e,ix);const t=pp(e.firestore,Bb),n=rO(t),r=new P8e(t);return VJt(e._query),NJt(n,e._query).then(i=>new GJt(t,r,e,i))}function ml(e,t,n){e=pp(e,Ol);const r=pp(e.firestore,Bb),i=R8e(e.converter,t,n);return Y9(r,[E8e(H9(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Nc.none())])}function KJt(e,t,n,...r){e=pp(e,Ol);const i=pp(e.firestore,Bb),s=H9(i);let o;return o=typeof(t=ls(t))=="string"||t instanceof iO?S8e(s,"updateDoc",e._key,t,n,r):x8e(s,"updateDoc",e._key,t),Y9(i,[o.toMutation(e._key,Nc.exists(!0))])}function XJt(e){return Y9(pp(e.firestore,Bb),[new L9(e._key,Nc.none())])}function Y9(e,t){return function(r,i){const s=new F0;return r.asyncQueue.enqueueAndForget(async()=>gJt(await IJt(r),i,s)),s.promise}(rO(e),t)}function QJt(e,t,n){const r=n.docs.get(t._key),i=new P8e(e);return new N8e(e,i,t._key,r,new $I(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JJt{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=H9(t)}set(t,n,r){this._verifyNotCommitted();const i=FH(t,this._firestore),s=R8e(i.converter,n,r),o=E8e(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Nc.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=FH(t,this._firestore);let o;return o=typeof(n=ls(n))=="string"||n instanceof iO?S8e(this._dataReader,"WriteBatch.update",s._key,n,r,i):x8e(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Nc.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=FH(t,this._firestore);return this._mutations=this._mutations.concat(new L9(n._key,Nc.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ht(dt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function FH(e,t){if((e=ls(e)).firestore!==t)throw new Ht(dt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function ZJt(){return new qse("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qwe(e){return rO(e=pp(e,Bb)),new JJt(e,t=>Y9(e,t))}(function(t,n=!0){(function(i){yA=i})(tx),fy(new Qm("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Bb(new XKt(r.getProvider("auth-internal")),new eXt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Ht(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gN(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ip(awe,"4.6.3",t),ip(awe,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sX=new Map,O8e={activated:!1,tokenObservers:[]},eZt={initialized:!1,enabled:!1};function ha(e){return sX.get(e)||Object.assign({},O8e)}function tZt(e,t){return sX.set(e,t),sX.get(e)}function K9(){return eZt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8e="https://content-firebaseappcheck.googleapis.com/v1",nZt="exchangeRecaptchaV3Token",rZt="exchangeDebugToken",Wwe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},iZt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sZt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new lN,this.pending.promise.catch(n=>{}),await oZt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new lN,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function oZt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aZt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Tc=new pA("appCheck","AppCheck",aZt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gwe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function Qse(e){if(!ha(e).activated)throw Tc.create("use-before-activation",{appName:e.name})}function $8e(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=XM(n)+"d:"),r&&(o+=XM(r)+"h:"),o+=XM(i)+"m:"+XM(s)+"s",o}function XM(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jse({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Tc.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Tc.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Tc.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Tc.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function uZt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${M8e}/projects/${n}/apps/${r}:${nZt}?key=${i}`,body:{recaptcha_v3_token:t}}}function F8e(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${M8e}/projects/${n}/apps/${r}:${rZt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lZt="firebase-app-check-database",cZt=1,EN="firebase-app-check-store",L8e="debug-token";let QM=null;function B8e(){return QM||(QM=new Promise((e,t)=>{try{const n=indexedDB.open(lZt,cZt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Tc.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(EN,{keyPath:"compositeKey"})}}}catch(n){t(Tc.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),QM)}function fZt(e){return U8e(z8e(e))}function dZt(e,t){return j8e(z8e(e),t)}function hZt(e){return j8e(L8e,e)}function pZt(){return U8e(L8e)}async function j8e(e,t){const r=(await B8e()).transaction(EN,"readwrite"),s=r.objectStore(EN).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Tc.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function U8e(e){const n=(await B8e()).transaction(EN,"readonly"),i=n.objectStore(EN).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Tc.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function z8e(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=new C9("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mZt(e){if(ese()){let t;try{t=await fZt(e)}catch(n){xN.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function LH(e,t){return ese()?dZt(e,t).catch(n=>{xN.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function gZt(){let e;try{e=await pZt()}catch{}if(e)return e;{const t=mqt();return hZt(t).catch(n=>xN.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zse(){return K9().enabled}async function eoe(){const e=K9();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function yZt(){const e=s4e(),t=K9();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new lN;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(gZt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vZt={error:"UNKNOWN_ERROR"};function bZt(e){return Zie.encodeString(JSON.stringify(e),!1)}async function oX(e,t=!1){const n=e.app;Qse(n);const r=ha(n);let i=r.token,s;if(i&&!eT(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(eT(u)?i=u:await LH(n,void 0))}if(!t&&i&&eT(i))return{token:i.token};let o=!1;if(Zse()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Jse(F8e(n,await eoe()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await LH(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await ha(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?xN.warn(u.message):xN.error(u),s=u}let a;return i?s?eT(i)?a={token:i.token,internalError:s}:a=Kwe(s):(a={token:i.token},r.token=i,await LH(n,i)):a=Kwe(s),o&&q8e(n,a),a}async function wZt(e){const t=e.app;Qse(t);const{provider:n}=ha(t);if(Zse()){const r=await eoe(),{token:i}=await Jse(F8e(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function V8e(e,t,n,r){const{app:i}=e,s=ha(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&eT(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),Ywe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Ywe(e))}function H8e(e,t){const n=ha(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Ywe(e){const{app:t}=e,n=ha(t);let r=n.tokenRefresher;r||(r=_Zt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function _Zt(e){const{app:t}=e;return new sZt(async()=>{const n=ha(t);let r;if(n.token?r=await oX(e,!0):r=await oX(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=ha(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Wwe.RETRIAL_MIN_WAIT,Wwe.RETRIAL_MAX_WAIT)}function q8e(e,t){const n=ha(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function eT(e){return e.expireTimeMillis-Date.now()>0}function Kwe(e){return{token:bZt(vZt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EZt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=ha(this.app);for(const n of t)H8e(this.app,n.next);return Promise.resolve()}}function xZt(e,t){return new EZt(e,t)}function SZt(e){return{getToken:t=>oX(e,t),getLimitedUseToken:()=>wZt(e),addTokenListener:t=>V8e(e,"INTERNAL",t),removeTokenListener:t=>H8e(e.app,t)}}const TZt="@firebase/app-check",CZt="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AZt="https://www.google.com/recaptcha/api.js";function DZt(e,t){const n=new lN,r=ha(e);r.reCAPTCHAState={initialized:n};const i=IZt(e),s=Gwe(!1);return s?Xwe(e,t,s,i,n):NZt(()=>{const o=Gwe(!1);if(!o)throw new Error("no recaptcha");Xwe(e,t,o,i,n)}),n.promise}function Xwe(e,t,n,r,i){n.ready(()=>{RZt(e,t,n,r),i.resolve(n)})}function IZt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function kZt(e){Qse(e);const n=await ha(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=ha(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function RZt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{ha(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{ha(e).reCAPTCHAState.succeeded=!1}}),s=ha(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function NZt(e){const t=document.createElement("script");t.src=AZt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class toe{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;OZt(this._throttleData);const i=await kZt(this._app).catch(o=>{throw Tc.create("recaptcha-error")});if(!(!((t=ha(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Tc.create("recaptcha-error");let s;try{s=await Jse(uZt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=PZt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Tc.create("throttled",{time:$8e(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=mA(t,"heartbeat"),DZt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof toe?this._siteKey===t._siteKey:!1}}function PZt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+iZt,httpStatus:e};{const n=t?t.backoffCount:0,r=wqt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function OZt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Tc.create("throttled",{time:$8e(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MZt(e=nse(),t){e=ls(e);const n=mA(e,"app-check");if(K9().initialized||yZt(),Zse()&&eoe().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Tc.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return $Zt(e,t.provider,t.isTokenAutoRefreshEnabled),ha(e).isTokenAutoRefreshEnabled&&V8e(r,"INTERNAL",()=>{}),r}function $Zt(e,t,n){const r=tZt(e,Object.assign({},O8e));r.activated=!0,r.provider=t,r.cachedTokenPromise=mZt(e).then(i=>(i&&eT(i)&&(r.token=i,q8e(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const FZt="app-check",Qwe="app-check-internal";function LZt(){fy(new Qm(FZt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return xZt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Qwe).initialize()})),fy(new Qm(Qwe,e=>{const t=e.getProvider("app-check").getImmediate();return SZt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),ip(TZt,CZt)}LZt();function JM(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var W8e={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof JM=="function"&&JM;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof JM=="function"&&JM,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,b=h.length;b;){for(y=h,h=[],g=-1;++g<b;)y[g]();b=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof Hs<"u"?Hs:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,T){if(typeof E!="function"&&this.state===l||typeof T!="function"&&this.state===u)return this;var C=new this.constructor(o);if(this.state!==c){var A=this.state===l?E:T;h(C,A,this.outcome)}else this.queue.push(new d(C,E,T));return C};function d(E,T,C){this.promise=E,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,T,C){s(function(){var A;try{A=T(C)}catch(I){return a.reject(E,I)}A===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,A)})}a.resolve=function(E,T){var C=g(p,T);if(C.status==="error")return a.reject(E,C.value);var A=C.value;if(A)m(E,A);else{E.state=l,E.outcome=T;for(var I=-1,k=E.queue.length;++I<k;)E.queue[I].callFulfilled(T)}return E},a.reject=function(E,T){E.state=u,E.outcome=T;for(var C=-1,A=E.queue.length;++C<A;)E.queue[C].callRejected(T);return E};function p(E){var T=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof T=="function")return function(){T.apply(E,arguments)}}function m(E,T){var C=!1;function A(F){C||(C=!0,a.reject(E,F))}function I(F){C||(C=!0,a.resolve(E,F))}function k(){T(I,A)}var N=g(k);N.status==="error"&&A(N.value)}function g(E,T){var C={};try{C.value=E(T),C.status="success"}catch(A){C.status="error",C.value=A}return C}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=b;function b(E){var T=new this(o);return a.reject(T,E)}f.all=w;function w(E){var T=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=E.length,A=!1;if(!C)return this.resolve([]);for(var I=new Array(C),k=0,N=-1,F=new this(o);++N<C;)M(E[N],N);return F;function M(L,j){T.resolve(L).then(B,function(z){A||(A=!0,a.reject(F,z))});function B(z){I[j]=z,++k===C&&!A&&(A=!0,a.resolve(F,I))}}}f.race=S;function S(E){var T=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=E.length,A=!1;if(!C)return this.resolve([]);for(var I=-1,k=new this(o);++I<C;)N(E[I]);return k;function N(F){T.resolve(F).then(function(M){A||(A=!0,a.resolve(k,M))},function(M){A||(A=!0,a.reject(k,M))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Hs<"u"?Hs:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te};function o(te,ye){if(!(te instanceof ye))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var te=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),ye=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!te||ye)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(te,ye){te=te||[],ye=ye||{};try{return new Blob(te,ye)}catch(De){if(De.name!=="TypeError")throw De;for(var ue=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,Ie=new ue,Oe=0;Oe<te.length;Oe+=1)Ie.append(te[Oe]);return Ie.getBlob(ye.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(te,ye){ye&&te.then(function(ue){ye(null,ue)},function(ue){ye(ue)})}function h(te,ye,ue){typeof ye=="function"&&te.then(ye),typeof ue=="function"&&te.catch(ue)}function p(te){return typeof te!="string"&&(console.warn(te+" used as a key, but it is not a string."),te=String(te)),te}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,b={},w=Object.prototype.toString,S="readonly",E="readwrite";function T(te){for(var ye=te.length,ue=new ArrayBuffer(ye),Ie=new Uint8Array(ue),Oe=0;Oe<ye;Oe++)Ie[Oe]=te.charCodeAt(Oe);return ue}function C(te){return new f(function(ye){var ue=te.transaction(g,E),Ie=c([""]);ue.objectStore(g).put(Ie,"key"),ue.onabort=function(Oe){Oe.preventDefault(),Oe.stopPropagation(),ye(!1)},ue.oncomplete=function(){var Oe=navigator.userAgent.match(/Chrome\/(\d+)/),De=navigator.userAgent.match(/Edge\//);ye(De||!Oe||parseInt(Oe[1],10)>=43)}}).catch(function(){return!1})}function A(te){return typeof y=="boolean"?f.resolve(y):C(te).then(function(ye){return y=ye,y})}function I(te){var ye=b[te.name],ue={};ue.promise=new f(function(Ie,Oe){ue.resolve=Ie,ue.reject=Oe}),ye.deferredOperations.push(ue),ye.dbReady?ye.dbReady=ye.dbReady.then(function(){return ue.promise}):ye.dbReady=ue.promise}function k(te){var ye=b[te.name],ue=ye.deferredOperations.pop();if(ue)return ue.resolve(),ue.promise}function N(te,ye){var ue=b[te.name],Ie=ue.deferredOperations.pop();if(Ie)return Ie.reject(ye),Ie.promise}function F(te,ye){return new f(function(ue,Ie){if(b[te.name]=b[te.name]||K(),te.db)if(ye)I(te),te.db.close();else return ue(te.db);var Oe=[te.name];ye&&Oe.push(te.version);var De=u.open.apply(u,Oe);ye&&(De.onupgradeneeded=function(Je){var pt=De.result;try{pt.createObjectStore(te.storeName),Je.oldVersion<=1&&pt.createObjectStore(g)}catch(yt){if(yt.name==="ConstraintError")console.warn('The database "'+te.name+'" has been upgraded from version '+Je.oldVersion+" to version "+Je.newVersion+', but the storage "'+te.storeName+'" already exists.');else throw yt}}),De.onerror=function(Je){Je.preventDefault(),Ie(De.error)},De.onsuccess=function(){var Je=De.result;Je.onversionchange=function(pt){pt.target.close()},ue(Je),k(te)}})}function M(te){return F(te,!1)}function L(te){return F(te,!0)}function j(te,ye){if(!te.db)return!0;var ue=!te.db.objectStoreNames.contains(te.storeName),Ie=te.version<te.db.version,Oe=te.version>te.db.version;if(Ie&&(te.version!==ye&&console.warn('The database "'+te.name+`" can't be downgraded from version `+te.db.version+" to version "+te.version+"."),te.version=te.db.version),Oe||ue){if(ue){var De=te.db.version+1;De>te.version&&(te.version=De)}return!0}return!1}function B(te){return new f(function(ye,ue){var Ie=new FileReader;Ie.onerror=ue,Ie.onloadend=function(Oe){var De=btoa(Oe.target.result||"");ye({__local_forage_encoded_blob:!0,data:De,type:te.type})},Ie.readAsBinaryString(te)})}function z(te){var ye=T(atob(te.data));return c([ye],{type:te.type})}function V(te){return te&&te.__local_forage_encoded_blob}function G(te){var ye=this,ue=ye._initReady().then(function(){var Ie=b[ye._dbInfo.name];if(Ie&&Ie.dbReady)return Ie.dbReady});return h(ue,te,te),ue}function $(te){I(te);for(var ye=b[te.name],ue=ye.forages,Ie=0;Ie<ue.length;Ie++){var Oe=ue[Ie];Oe._dbInfo.db&&(Oe._dbInfo.db.close(),Oe._dbInfo.db=null)}return te.db=null,M(te).then(function(De){return te.db=De,j(te)?L(te):De}).then(function(De){te.db=ye.db=De;for(var Je=0;Je<ue.length;Je++)ue[Je]._dbInfo.db=De}).catch(function(De){throw N(te,De),De})}function W(te,ye,ue,Ie){Ie===void 0&&(Ie=1);try{var Oe=te.db.transaction(te.storeName,ye);ue(null,Oe)}catch(De){if(Ie>0&&(!te.db||De.name==="InvalidStateError"||De.name==="NotFoundError"))return f.resolve().then(function(){if(!te.db||De.name==="NotFoundError"&&!te.db.objectStoreNames.contains(te.storeName)&&te.version<=te.db.version)return te.db&&(te.version=te.db.version+1),L(te)}).then(function(){return $(te).then(function(){W(te,ye,ue,Ie-1)})}).catch(ue);ue(De)}}function K(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function q(te){var ye=this,ue={db:null};if(te)for(var Ie in te)ue[Ie]=te[Ie];var Oe=b[ue.name];Oe||(Oe=K(),b[ue.name]=Oe),Oe.forages.push(ye),ye._initReady||(ye._initReady=ye.ready,ye.ready=G);var De=[];function Je(){return f.resolve()}for(var pt=0;pt<Oe.forages.length;pt++){var yt=Oe.forages[pt];yt!==ye&&De.push(yt._initReady().catch(Je))}var vt=Oe.forages.slice(0);return f.all(De).then(function(){return ue.db=Oe.db,M(ue)}).then(function(It){return ue.db=It,j(ue,ye._defaultConfig.version)?L(ue):It}).then(function(It){ue.db=Oe.db=It,ye._dbInfo=ue;for(var zt=0;zt<vt.length;zt++){var Qn=vt[zt];Qn!==ye&&(Qn._dbInfo.db=ue.db,Qn._dbInfo.version=ue.version)}})}function Y(te,ye){var ue=this;te=p(te);var Ie=new f(function(Oe,De){ue.ready().then(function(){W(ue._dbInfo,S,function(Je,pt){if(Je)return De(Je);try{var yt=pt.objectStore(ue._dbInfo.storeName),vt=yt.get(te);vt.onsuccess=function(){var It=vt.result;It===void 0&&(It=null),V(It)&&(It=z(It)),Oe(It)},vt.onerror=function(){De(vt.error)}}catch(It){De(It)}})}).catch(De)});return d(Ie,ye),Ie}function Z(te,ye){var ue=this,Ie=new f(function(Oe,De){ue.ready().then(function(){W(ue._dbInfo,S,function(Je,pt){if(Je)return De(Je);try{var yt=pt.objectStore(ue._dbInfo.storeName),vt=yt.openCursor(),It=1;vt.onsuccess=function(){var zt=vt.result;if(zt){var Qn=zt.value;V(Qn)&&(Qn=z(Qn));var sn=te(Qn,zt.key,It++);sn!==void 0?Oe(sn):zt.continue()}else Oe()},vt.onerror=function(){De(vt.error)}}catch(zt){De(zt)}})}).catch(De)});return d(Ie,ye),Ie}function ae(te,ye,ue){var Ie=this;te=p(te);var Oe=new f(function(De,Je){var pt;Ie.ready().then(function(){return pt=Ie._dbInfo,w.call(ye)==="[object Blob]"?A(pt.db).then(function(yt){return yt?ye:B(ye)}):ye}).then(function(yt){W(Ie._dbInfo,E,function(vt,It){if(vt)return Je(vt);try{var zt=It.objectStore(Ie._dbInfo.storeName);yt===null&&(yt=void 0);var Qn=zt.put(yt,te);It.oncomplete=function(){yt===void 0&&(yt=null),De(yt)},It.onabort=It.onerror=function(){var sn=Qn.error?Qn.error:Qn.transaction.error;Je(sn)}}catch(sn){Je(sn)}})}).catch(Je)});return d(Oe,ue),Oe}function be(te,ye){var ue=this;te=p(te);var Ie=new f(function(Oe,De){ue.ready().then(function(){W(ue._dbInfo,E,function(Je,pt){if(Je)return De(Je);try{var yt=pt.objectStore(ue._dbInfo.storeName),vt=yt.delete(te);pt.oncomplete=function(){Oe()},pt.onerror=function(){De(vt.error)},pt.onabort=function(){var It=vt.error?vt.error:vt.transaction.error;De(It)}}catch(It){De(It)}})}).catch(De)});return d(Ie,ye),Ie}function Se(te){var ye=this,ue=new f(function(Ie,Oe){ye.ready().then(function(){W(ye._dbInfo,E,function(De,Je){if(De)return Oe(De);try{var pt=Je.objectStore(ye._dbInfo.storeName),yt=pt.clear();Je.oncomplete=function(){Ie()},Je.onabort=Je.onerror=function(){var vt=yt.error?yt.error:yt.transaction.error;Oe(vt)}}catch(vt){Oe(vt)}})}).catch(Oe)});return d(ue,te),ue}function we(te){var ye=this,ue=new f(function(Ie,Oe){ye.ready().then(function(){W(ye._dbInfo,S,function(De,Je){if(De)return Oe(De);try{var pt=Je.objectStore(ye._dbInfo.storeName),yt=pt.count();yt.onsuccess=function(){Ie(yt.result)},yt.onerror=function(){Oe(yt.error)}}catch(vt){Oe(vt)}})}).catch(Oe)});return d(ue,te),ue}function Ce(te,ye){var ue=this,Ie=new f(function(Oe,De){if(te<0){Oe(null);return}ue.ready().then(function(){W(ue._dbInfo,S,function(Je,pt){if(Je)return De(Je);try{var yt=pt.objectStore(ue._dbInfo.storeName),vt=!1,It=yt.openKeyCursor();It.onsuccess=function(){var zt=It.result;if(!zt){Oe(null);return}te===0||vt?Oe(zt.key):(vt=!0,zt.advance(te))},It.onerror=function(){De(It.error)}}catch(zt){De(zt)}})}).catch(De)});return d(Ie,ye),Ie}function Le(te){var ye=this,ue=new f(function(Ie,Oe){ye.ready().then(function(){W(ye._dbInfo,S,function(De,Je){if(De)return Oe(De);try{var pt=Je.objectStore(ye._dbInfo.storeName),yt=pt.openKeyCursor(),vt=[];yt.onsuccess=function(){var It=yt.result;if(!It){Ie(vt);return}vt.push(It.key),It.continue()},yt.onerror=function(){Oe(yt.error)}}catch(It){Oe(It)}})}).catch(Oe)});return d(ue,te),ue}function ke(te,ye){ye=m.apply(this,arguments);var ue=this.config();te=typeof te!="function"&&te||{},te.name||(te.name=te.name||ue.name,te.storeName=te.storeName||ue.storeName);var Ie=this,Oe;if(!te.name)Oe=f.reject("Invalid arguments");else{var De=te.name===ue.name&&Ie._dbInfo.db,Je=De?f.resolve(Ie._dbInfo.db):M(te).then(function(pt){var yt=b[te.name],vt=yt.forages;yt.db=pt;for(var It=0;It<vt.length;It++)vt[It]._dbInfo.db=pt;return pt});te.storeName?Oe=Je.then(function(pt){if(pt.objectStoreNames.contains(te.storeName)){var yt=pt.version+1;I(te);var vt=b[te.name],It=vt.forages;pt.close();for(var zt=0;zt<It.length;zt++){var Qn=It[zt];Qn._dbInfo.db=null,Qn._dbInfo.version=yt}var sn=new f(function(yr,ri){var Nr=u.open(te.name,yt);Nr.onerror=function(Ko){var Zc=Nr.result;Zc.close(),ri(Ko)},Nr.onupgradeneeded=function(){var Ko=Nr.result;Ko.deleteObjectStore(te.storeName)},Nr.onsuccess=function(){var Ko=Nr.result;Ko.close(),yr(Ko)}});return sn.then(function(yr){vt.db=yr;for(var ri=0;ri<It.length;ri++){var Nr=It[ri];Nr._dbInfo.db=yr,k(Nr._dbInfo)}}).catch(function(yr){throw(N(te,yr)||f.resolve()).catch(function(){}),yr})}}):Oe=Je.then(function(pt){I(te);var yt=b[te.name],vt=yt.forages;pt.close();for(var It=0;It<vt.length;It++){var zt=vt[It];zt._dbInfo.db=null}var Qn=new f(function(sn,yr){var ri=u.deleteDatabase(te.name);ri.onerror=function(){var Nr=ri.result;Nr&&Nr.close(),yr(ri.error)},ri.onblocked=function(){console.warn('dropInstance blocked for database "'+te.name+'" until all open connections are closed')},ri.onsuccess=function(){var Nr=ri.result;Nr&&Nr.close(),sn(Nr)}});return Qn.then(function(sn){yt.db=sn;for(var yr=0;yr<vt.length;yr++){var ri=vt[yr];k(ri._dbInfo)}}).catch(function(sn){throw(N(te,sn)||f.resolve()).catch(function(){}),sn})})}return d(Oe,ye),Oe}var Ze={_driver:"asyncStorage",_initStorage:q,_support:l(),iterate:Z,getItem:Y,setItem:ae,removeItem:be,clear:Se,length:we,key:Ce,keys:Le,dropInstance:ke};function Ke(){return typeof openDatabase=="function"}var Ct="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wt="~~local_forage_type~",Re=/^~~local_forage_type~([^~]+)~/,He="__lfsc__:",lt=He.length,St="arbf",Vt="blob",ht="si08",Q="ui08",de="uic8",_e="si16",oe="si32",he="ur16",Ee="ui32",Fe="fl32",je="fl64",ct=lt+St.length,rt=Object.prototype.toString;function qt(te){var ye=te.length*.75,ue=te.length,Ie,Oe=0,De,Je,pt,yt;te[te.length-1]==="="&&(ye--,te[te.length-2]==="="&&ye--);var vt=new ArrayBuffer(ye),It=new Uint8Array(vt);for(Ie=0;Ie<ue;Ie+=4)De=Ct.indexOf(te[Ie]),Je=Ct.indexOf(te[Ie+1]),pt=Ct.indexOf(te[Ie+2]),yt=Ct.indexOf(te[Ie+3]),It[Oe++]=De<<2|Je>>4,It[Oe++]=(Je&15)<<4|pt>>2,It[Oe++]=(pt&3)<<6|yt&63;return vt}function en(te){var ye=new Uint8Array(te),ue="",Ie;for(Ie=0;Ie<ye.length;Ie+=3)ue+=Ct[ye[Ie]>>2],ue+=Ct[(ye[Ie]&3)<<4|ye[Ie+1]>>4],ue+=Ct[(ye[Ie+1]&15)<<2|ye[Ie+2]>>6],ue+=Ct[ye[Ie+2]&63];return ye.length%3===2?ue=ue.substring(0,ue.length-1)+"=":ye.length%3===1&&(ue=ue.substring(0,ue.length-2)+"=="),ue}function Yt(te,ye){var ue="";if(te&&(ue=rt.call(te)),te&&(ue==="[object ArrayBuffer]"||te.buffer&&rt.call(te.buffer)==="[object ArrayBuffer]")){var Ie,Oe=He;te instanceof ArrayBuffer?(Ie=te,Oe+=St):(Ie=te.buffer,ue==="[object Int8Array]"?Oe+=ht:ue==="[object Uint8Array]"?Oe+=Q:ue==="[object Uint8ClampedArray]"?Oe+=de:ue==="[object Int16Array]"?Oe+=_e:ue==="[object Uint16Array]"?Oe+=he:ue==="[object Int32Array]"?Oe+=oe:ue==="[object Uint32Array]"?Oe+=Ee:ue==="[object Float32Array]"?Oe+=Fe:ue==="[object Float64Array]"?Oe+=je:ye(new Error("Failed to get type for BinaryArray"))),ye(Oe+en(Ie))}else if(ue==="[object Blob]"){var De=new FileReader;De.onload=function(){var Je=wt+te.type+"~"+en(this.result);ye(He+Vt+Je)},De.readAsArrayBuffer(te)}else try{ye(JSON.stringify(te))}catch(Je){console.error("Couldn't convert value into a JSON string: ",te),ye(null,Je)}}function un(te){if(te.substring(0,lt)!==He)return JSON.parse(te);var ye=te.substring(ct),ue=te.substring(lt,ct),Ie;if(ue===Vt&&Re.test(ye)){var Oe=ye.match(Re);Ie=Oe[1],ye=ye.substring(Oe[0].length)}var De=qt(ye);switch(ue){case St:return De;case Vt:return c([De],{type:Ie});case ht:return new Int8Array(De);case Q:return new Uint8Array(De);case de:return new Uint8ClampedArray(De);case _e:return new Int16Array(De);case he:return new Uint16Array(De);case oe:return new Int32Array(De);case Ee:return new Uint32Array(De);case Fe:return new Float32Array(De);case je:return new Float64Array(De);default:throw new Error("Unkown type: "+ue)}}var Sn={serialize:Yt,deserialize:un,stringToBuffer:qt,bufferToString:en};function Bn(te,ye,ue,Ie){te.executeSql("CREATE TABLE IF NOT EXISTS "+ye.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ue,Ie)}function Ci(te){var ye=this,ue={db:null};if(te)for(var Ie in te)ue[Ie]=typeof te[Ie]!="string"?te[Ie].toString():te[Ie];var Oe=new f(function(De,Je){try{ue.db=openDatabase(ue.name,String(ue.version),ue.description,ue.size)}catch(pt){return Je(pt)}ue.db.transaction(function(pt){Bn(pt,ue,function(){ye._dbInfo=ue,De()},function(yt,vt){Je(vt)})},Je)});return ue.serializer=Sn,Oe}function gi(te,ye,ue,Ie,Oe,De){te.executeSql(ue,Ie,Oe,function(Je,pt){pt.code===pt.SYNTAX_ERR?Je.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[ye.storeName],function(yt,vt){vt.rows.length?De(yt,pt):Bn(yt,ye,function(){yt.executeSql(ue,Ie,Oe,De)},De)},De):De(Je,pt)},De)}function jn(te,ye){var ue=this;te=p(te);var Ie=new f(function(Oe,De){ue.ready().then(function(){var Je=ue._dbInfo;Je.db.transaction(function(pt){gi(pt,Je,"SELECT * FROM "+Je.storeName+" WHERE key = ? LIMIT 1",[te],function(yt,vt){var It=vt.rows.length?vt.rows.item(0).value:null;It&&(It=Je.serializer.deserialize(It)),Oe(It)},function(yt,vt){De(vt)})})}).catch(De)});return d(Ie,ye),Ie}function Ki(te,ye){var ue=this,Ie=new f(function(Oe,De){ue.ready().then(function(){var Je=ue._dbInfo;Je.db.transaction(function(pt){gi(pt,Je,"SELECT * FROM "+Je.storeName,[],function(yt,vt){for(var It=vt.rows,zt=It.length,Qn=0;Qn<zt;Qn++){var sn=It.item(Qn),yr=sn.value;if(yr&&(yr=Je.serializer.deserialize(yr)),yr=te(yr,sn.key,Qn+1),yr!==void 0){Oe(yr);return}}Oe()},function(yt,vt){De(vt)})})}).catch(De)});return d(Ie,ye),Ie}function ti(te,ye,ue,Ie){var Oe=this;te=p(te);var De=new f(function(Je,pt){Oe.ready().then(function(){ye===void 0&&(ye=null);var yt=ye,vt=Oe._dbInfo;vt.serializer.serialize(ye,function(It,zt){zt?pt(zt):vt.db.transaction(function(Qn){gi(Qn,vt,"INSERT OR REPLACE INTO "+vt.storeName+" (key, value) VALUES (?, ?)",[te,It],function(){Je(yt)},function(sn,yr){pt(yr)})},function(Qn){if(Qn.code===Qn.QUOTA_ERR){if(Ie>0){Je(ti.apply(Oe,[te,yt,ue,Ie-1]));return}pt(Qn)}})})}).catch(pt)});return d(De,ue),De}function Es(te,ye,ue){return ti.apply(this,[te,ye,ue,1])}function Jc(te,ye){var ue=this;te=p(te);var Ie=new f(function(Oe,De){ue.ready().then(function(){var Je=ue._dbInfo;Je.db.transaction(function(pt){gi(pt,Je,"DELETE FROM "+Je.storeName+" WHERE key = ?",[te],function(){Oe()},function(yt,vt){De(vt)})})}).catch(De)});return d(Ie,ye),Ie}function Va(te){var ye=this,ue=new f(function(Ie,Oe){ye.ready().then(function(){var De=ye._dbInfo;De.db.transaction(function(Je){gi(Je,De,"DELETE FROM "+De.storeName,[],function(){Ie()},function(pt,yt){Oe(yt)})})}).catch(Oe)});return d(ue,te),ue}function sl(te){var ye=this,ue=new f(function(Ie,Oe){ye.ready().then(function(){var De=ye._dbInfo;De.db.transaction(function(Je){gi(Je,De,"SELECT COUNT(key) as c FROM "+De.storeName,[],function(pt,yt){var vt=yt.rows.item(0).c;Ie(vt)},function(pt,yt){Oe(yt)})})}).catch(Oe)});return d(ue,te),ue}function Kr(te,ye){var ue=this,Ie=new f(function(Oe,De){ue.ready().then(function(){var Je=ue._dbInfo;Je.db.transaction(function(pt){gi(pt,Je,"SELECT key FROM "+Je.storeName+" WHERE id = ? LIMIT 1",[te+1],function(yt,vt){var It=vt.rows.length?vt.rows.item(0).key:null;Oe(It)},function(yt,vt){De(vt)})})}).catch(De)});return d(Ie,ye),Ie}function Xi(te){var ye=this,ue=new f(function(Ie,Oe){ye.ready().then(function(){var De=ye._dbInfo;De.db.transaction(function(Je){gi(Je,De,"SELECT key FROM "+De.storeName,[],function(pt,yt){for(var vt=[],It=0;It<yt.rows.length;It++)vt.push(yt.rows.item(It).key);Ie(vt)},function(pt,yt){Oe(yt)})})}).catch(Oe)});return d(ue,te),ue}function Ai(te){return new f(function(ye,ue){te.transaction(function(Ie){Ie.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Oe,De){for(var Je=[],pt=0;pt<De.rows.length;pt++)Je.push(De.rows.item(pt).name);ye({db:te,storeNames:Je})},function(Oe,De){ue(De)})},function(Ie){ue(Ie)})})}function No(te,ye){ye=m.apply(this,arguments);var ue=this.config();te=typeof te!="function"&&te||{},te.name||(te.name=te.name||ue.name,te.storeName=te.storeName||ue.storeName);var Ie=this,Oe;return te.name?Oe=new f(function(De){var Je;te.name===ue.name?Je=Ie._dbInfo.db:Je=openDatabase(te.name,"","",0),te.storeName?De({db:Je,storeNames:[te.storeName]}):De(Ai(Je))}).then(function(De){return new f(function(Je,pt){De.db.transaction(function(yt){function vt(sn){return new f(function(yr,ri){yt.executeSql("DROP TABLE IF EXISTS "+sn,[],function(){yr()},function(Nr,Ko){ri(Ko)})})}for(var It=[],zt=0,Qn=De.storeNames.length;zt<Qn;zt++)It.push(vt(De.storeNames[zt]));f.all(It).then(function(){Je()}).catch(function(sn){pt(sn)})},function(yt){pt(yt)})})}):Oe=f.reject("Invalid arguments"),d(Oe,ye),Oe}var Go={_driver:"webSQLStorage",_initStorage:Ci,_support:Ke(),iterate:Ki,getItem:jn,setItem:Es,removeItem:Jc,clear:Va,length:sl,key:Kr,keys:Xi,dropInstance:No};function po(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ve(te,ye){var ue=te.name+"/";return te.storeName!==ye.storeName&&(ue+=te.storeName+"/"),ue}function ce(){var te="_localforage_support_test";try{return localStorage.setItem(te,!0),localStorage.removeItem(te),!1}catch{return!0}}function xe(){return!ce()||localStorage.length>0}function Ve(te){var ye=this,ue={};if(te)for(var Ie in te)ue[Ie]=te[Ie];return ue.keyPrefix=ve(te,ye._defaultConfig),xe()?(ye._dbInfo=ue,ue.serializer=Sn,f.resolve()):f.reject()}function ze(te){var ye=this,ue=ye.ready().then(function(){for(var Ie=ye._dbInfo.keyPrefix,Oe=localStorage.length-1;Oe>=0;Oe--){var De=localStorage.key(Oe);De.indexOf(Ie)===0&&localStorage.removeItem(De)}});return d(ue,te),ue}function Dt(te,ye){var ue=this;te=p(te);var Ie=ue.ready().then(function(){var Oe=ue._dbInfo,De=localStorage.getItem(Oe.keyPrefix+te);return De&&(De=Oe.serializer.deserialize(De)),De});return d(Ie,ye),Ie}function Wt(te,ye){var ue=this,Ie=ue.ready().then(function(){for(var Oe=ue._dbInfo,De=Oe.keyPrefix,Je=De.length,pt=localStorage.length,yt=1,vt=0;vt<pt;vt++){var It=localStorage.key(vt);if(It.indexOf(De)===0){var zt=localStorage.getItem(It);if(zt&&(zt=Oe.serializer.deserialize(zt)),zt=te(zt,It.substring(Je),yt++),zt!==void 0)return zt}}});return d(Ie,ye),Ie}function bn(te,ye){var ue=this,Ie=ue.ready().then(function(){var Oe=ue._dbInfo,De;try{De=localStorage.key(te)}catch{De=null}return De&&(De=De.substring(Oe.keyPrefix.length)),De});return d(Ie,ye),Ie}function ir(te){var ye=this,ue=ye.ready().then(function(){for(var Ie=ye._dbInfo,Oe=localStorage.length,De=[],Je=0;Je<Oe;Je++){var pt=localStorage.key(Je);pt.indexOf(Ie.keyPrefix)===0&&De.push(pt.substring(Ie.keyPrefix.length))}return De});return d(ue,te),ue}function gr(te){var ye=this,ue=ye.keys().then(function(Ie){return Ie.length});return d(ue,te),ue}function Un(te,ye){var ue=this;te=p(te);var Ie=ue.ready().then(function(){var Oe=ue._dbInfo;localStorage.removeItem(Oe.keyPrefix+te)});return d(Ie,ye),Ie}function Dr(te,ye,ue){var Ie=this;te=p(te);var Oe=Ie.ready().then(function(){ye===void 0&&(ye=null);var De=ye;return new f(function(Je,pt){var yt=Ie._dbInfo;yt.serializer.serialize(ye,function(vt,It){if(It)pt(It);else try{localStorage.setItem(yt.keyPrefix+te,vt),Je(De)}catch(zt){(zt.name==="QuotaExceededError"||zt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&pt(zt),pt(zt)}})})});return d(Oe,ue),Oe}function ni(te,ye){if(ye=m.apply(this,arguments),te=typeof te!="function"&&te||{},!te.name){var ue=this.config();te.name=te.name||ue.name,te.storeName=te.storeName||ue.storeName}var Ie=this,Oe;return te.name?Oe=new f(function(De){te.storeName?De(ve(te,Ie._defaultConfig)):De(te.name+"/")}).then(function(De){for(var Je=localStorage.length-1;Je>=0;Je--){var pt=localStorage.key(Je);pt.indexOf(De)===0&&localStorage.removeItem(pt)}}):Oe=f.reject("Invalid arguments"),d(Oe,ye),Oe}var dn={_driver:"localStorageWrapper",_initStorage:Ve,_support:po(),iterate:Wt,getItem:Dt,setItem:Dr,removeItem:Un,clear:ze,length:gr,key:bn,keys:ir,dropInstance:ni},Ir=function(ye,ue){return ye===ue||typeof ye=="number"&&typeof ue=="number"&&isNaN(ye)&&isNaN(ue)},Xr=function(ye,ue){for(var Ie=ye.length,Oe=0;Oe<Ie;){if(Ir(ye[Oe],ue))return!0;Oe++}return!1},sr=Array.isArray||function(te){return Object.prototype.toString.call(te)==="[object Array]"},ln={},Br={},Di={INDEXEDDB:Ze,WEBSQL:Go,LOCALSTORAGE:dn},xs=[Di.INDEXEDDB._driver,Di.WEBSQL._driver,Di.LOCALSTORAGE._driver],yi=["dropInstance"],Qi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(yi),Yo={description:"",driver:xs.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ha(te,ye){te[ye]=function(){var ue=arguments;return te.ready().then(function(){return te[ye].apply(te,ue)})}}function Po(){for(var te=1;te<arguments.length;te++){var ye=arguments[te];if(ye)for(var ue in ye)ye.hasOwnProperty(ue)&&(sr(ye[ue])?arguments[0][ue]=ye[ue].slice():arguments[0][ue]=ye[ue])}return arguments[0]}var Yl=function(){function te(ye){o(this,te);for(var ue in Di)if(Di.hasOwnProperty(ue)){var Ie=Di[ue],Oe=Ie._driver;this[ue]=Oe,ln[Oe]||this.defineDriver(Ie)}this._defaultConfig=Po({},Yo),this._config=Po({},this._defaultConfig,ye),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return te.prototype.config=function(ue){if((typeof ue>"u"?"undefined":s(ue))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var Ie in ue){if(Ie==="storeName"&&(ue[Ie]=ue[Ie].replace(/\W/g,"_")),Ie==="version"&&typeof ue[Ie]!="number")return new Error("Database version must be a number.");this._config[Ie]=ue[Ie]}return"driver"in ue&&ue.driver?this.setDriver(this._config.driver):!0}else return typeof ue=="string"?this._config[ue]:this._config},te.prototype.defineDriver=function(ue,Ie,Oe){var De=new f(function(Je,pt){try{var yt=ue._driver,vt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ue._driver){pt(vt);return}for(var It=Qi.concat("_initStorage"),zt=0,Qn=It.length;zt<Qn;zt++){var sn=It[zt],yr=!Xr(yi,sn);if((yr||ue[sn])&&typeof ue[sn]!="function"){pt(vt);return}}var ri=function(){for(var Zc=function(ol){return function(){var yu=new Error("Method "+ol+" is not implemented by the current driver"),sh=f.reject(yu);return d(sh,arguments[arguments.length-1]),sh}},ih=0,qy=yi.length;ih<qy;ih++){var Mp=yi[ih];ue[Mp]||(ue[Mp]=Zc(Mp))}};ri();var Nr=function(Zc){ln[yt]&&console.info("Redefining LocalForage driver: "+yt),ln[yt]=ue,Br[yt]=Zc,Je()};"_support"in ue?ue._support&&typeof ue._support=="function"?ue._support().then(Nr,pt):Nr(!!ue._support):Nr(!0)}catch(Ko){pt(Ko)}});return h(De,Ie,Oe),De},te.prototype.driver=function(){return this._driver||null},te.prototype.getDriver=function(ue,Ie,Oe){var De=ln[ue]?f.resolve(ln[ue]):f.reject(new Error("Driver not found."));return h(De,Ie,Oe),De},te.prototype.getSerializer=function(ue){var Ie=f.resolve(Sn);return h(Ie,ue),Ie},te.prototype.ready=function(ue){var Ie=this,Oe=Ie._driverSet.then(function(){return Ie._ready===null&&(Ie._ready=Ie._initDriver()),Ie._ready});return h(Oe,ue,ue),Oe},te.prototype.setDriver=function(ue,Ie,Oe){var De=this;sr(ue)||(ue=[ue]);var Je=this._getSupportedDrivers(ue);function pt(){De._config.driver=De.driver()}function yt(zt){return De._extend(zt),pt(),De._ready=De._initStorage(De._config),De._ready}function vt(zt){return function(){var Qn=0;function sn(){for(;Qn<zt.length;){var yr=zt[Qn];return Qn++,De._dbInfo=null,De._ready=null,De.getDriver(yr).then(yt).catch(sn)}pt();var ri=new Error("No available storage method found.");return De._driverSet=f.reject(ri),De._driverSet}return sn()}}var It=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=It.then(function(){var zt=Je[0];return De._dbInfo=null,De._ready=null,De.getDriver(zt).then(function(Qn){De._driver=Qn._driver,pt(),De._wrapLibraryMethodsWithReady(),De._initDriver=vt(Je)})}).catch(function(){pt();var zt=new Error("No available storage method found.");return De._driverSet=f.reject(zt),De._driverSet}),h(this._driverSet,Ie,Oe),this._driverSet},te.prototype.supports=function(ue){return!!Br[ue]},te.prototype._extend=function(ue){Po(this,ue)},te.prototype._getSupportedDrivers=function(ue){for(var Ie=[],Oe=0,De=ue.length;Oe<De;Oe++){var Je=ue[Oe];this.supports(Je)&&Ie.push(Je)}return Ie},te.prototype._wrapLibraryMethodsWithReady=function(){for(var ue=0,Ie=Qi.length;ue<Ie;ue++)Ha(this,Qi[ue])},te.prototype.createInstance=function(ue){return new te(ue)},te}(),Yf=new Yl;r.exports=Yf},{3:3}]},{},[4])(4)})})(W8e);var BZt=W8e.exports;const RS=zf(BZt);var Ya=[];for(var BH=0;BH<256;++BH)Ya.push((BH+256).toString(16).slice(1));function jZt(e,t=0){return(Ya[e[t+0]]+Ya[e[t+1]]+Ya[e[t+2]]+Ya[e[t+3]]+"-"+Ya[e[t+4]]+Ya[e[t+5]]+"-"+Ya[e[t+6]]+Ya[e[t+7]]+"-"+Ya[e[t+8]]+Ya[e[t+9]]+"-"+Ya[e[t+10]]+Ya[e[t+11]]+Ya[e[t+12]]+Ya[e[t+13]]+Ya[e[t+14]]+Ya[e[t+15]]).toLowerCase()}var ZM,UZt=new Uint8Array(16);function zZt(){if(!ZM&&(ZM=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ZM))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ZM(UZt)}var VZt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Jwe={randomUUID:VZt};function X4(e,t,n){if(Jwe.randomUUID&&!t&&!e)return Jwe.randomUUID();e=e||{};var r=e.random||(e.rng||zZt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,jZt(r)}class G8e{constructor(t){fl(this,"engine");fl(this,"connected",!1);fl(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function Q4(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function BD(e){return e.participantId!==void 0}class Ed extends G8e{constructor(){super("firebase");fl(this,"RECAPTCHAV3TOKEN","6LdQ8qUqAAAAAPE14fuWshHdzOerFOSMhzEdA1Wp");fl(this,"firestore");fl(this,"collectionPrefix","prod-");fl(this,"studyCollection");fl(this,"storage");fl(this,"studyId","");fl(this,"localForage",RS.createInstance({name:"currentParticipantId"}));fl(this,"participantData",null);fl(this,"userManagementData",{});const n=v9.parse(`
{
  apiKey: "AIzaSyBB3ZVfd5sNerH0LLPbe8Pn-NXtLOO4-8M",
  authDomain: "vis-decode-operator-1eb8d.firebaseapp.com",
  projectId: "vis-decode-operator-1eb8d",
  storageBucket: "vis-decode-operator-1eb8d.firebasestorage.app",
  messagingSenderId: "967262141033",
  appId: "1:967262141033:web:b1ed6ad992b441194440f8"
}
`),r=f4e(n);this.firestore=MJt(r,{}),this.storage=HKt();try{MZt(r,{provider:new toe(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await $Jt(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=V4();if(!i.currentUser&&(await lGt(i),!i.currentUser))throw new Error("Login failed with firebase");this.studyCollection=vh(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const s=await this.getCurrentConfigHash(),o=await Q4(JSON.stringify(r));if(await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.setcurrentConfigHash(o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(BD(a))return this.participantData=a,a;const l=await Q4(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Js(this.studyCollection,"configHash"),r=await KM(n);return r.exists()?r.data().configHash:null}async setcurrentConfigHash(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=Js(this.studyCollection,"configHash");await ml(r,{configHash:n})}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=ld(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=X4(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAudio(n,r){const i=s=>{this._pushToFirebaseStorage(`/audio/${this.currentParticipantId}`,r,s.data)};n.addEventListener("dataavailable",i),n.requestData(),setTimeout(()=>{n.removeEventListener("dataavailable",i)},0)}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=Js(this.studyCollection,"sequenceAssignment");await ml(i,{});const s=vh(i,"sequenceAssignment"),o=Js(s,this.currentParticipantId),a=zwe(s,HJt("participantId","==","")),u=await LD(a);if(u.docs.length>0){const m=u.docs[0],g=m.data().timestamp;r.dataCollectionEnabled&&(await XJt(m.ref),await ml(o,{participantId:this.currentParticipantId,timestamp:g}))}else r.dataCollectionEnabled&&await ml(o,{participantId:this.currentParticipantId,timestamp:ZJt()});const l=zwe(s,qJt("timestamp","asc")),d=(await LD(l)).docs.map(m=>m.data()).findIndex(m=>m.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=ld(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await $D(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");BD(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const n=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return BD(n)?n:null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=X4();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){if(Object.keys(this.userManagementData).length===0){const r=vh(this.firestore,"user-management"),i=await LD(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));this.userManagementData=s}return n in this.userManagementData?this.userManagementData[n]:null}async validateUser(n,r=!1){if(r&&(this.userManagementData={}),n!=null&&n.user){const i=await this.getUserManagementData("authentication");if(i!=null&&i.isEnabled){const s=await this.getUserManagementData("adminUsers");if(s&&s.adminUsersList){const o=Object.fromEntries(s.adminUsersList.map(u=>[u.email,u.uid]));if(n.user.email&&(o[n.user.email]===n.user.uid||o[n.user.email]===null)){if(n.user.email&&o[n.user.email]===null){const u=s.adminUsersList.find(l=>l.email===n.user.email);u&&(u.uid=n.user.uid),await ml(Js(this.firestore,"user-management","adminUsers"),{adminUsersList:s.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await ml(Js(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await ml(Js(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await ml(Js(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await ml(Js(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=ld(this.storage,`${this.collectionPrefix}${n}/participants`),i=await $D(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");BD(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r,i){const s=vh(this.firestore,`${this.collectionPrefix}${n}`),o=ld(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),a=await this._getFromFirebaseStorageByRef(o,"participantData");try{if(!a||!BD(a)||a.rejected)return;a.rejected={reason:i,timestamp:new Date().getTime()},await this._pushToFirebaseStorageByRef(o,"participantData",a);const u=Js(s,"sequenceAssignment"),l=vh(u,"sequenceAssignment"),c=Js(l,r);await KJt(c,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async rejectCurrentParticipant(n,r){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){const s=Js(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await ml(s,{[r]:i},{merge:!0})}async getModes(n){const r=Js(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await KM(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await ml(r,s),s}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=Js(this.firestore,"metadata","collections"),i=await KM(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=Js(this.firestore,"metadata","collections");await ml(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=Js(this.firestore,"metadata","collections");return await ml(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=Js(this.firestore,"metadata","collections"),i=await KM(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await ml(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=ld(this.storage,n),s=(await $D(r)).items.map(o=>swe(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=ld(this.storage,n),o=(await $D(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=ld(this.storage,n),s=ld(this.storage,r),o=await NH(i),u=await(await fetch(o)).blob();await HM(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=vh(this.firestore,n),s=Js(i,"sequenceAssignment"),o=vh(s,"sequenceAssignment"),a=vh(this.firestore,r),u=Js(a,"sequenceAssignment");await ml(u,{});const l=vh(u,"sequenceAssignment"),c=await LD(o),f=qwe(this.firestore);c.docs.forEach(d=>{const h=Js(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=vh(this.firestore,n),i=Js(r,"sequenceAssignment"),s=vh(i,"sequenceAssignment"),o=await LD(s),a=qwe(this.firestore);o.forEach(u=>{const l=Js(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=ld(this.storage,n);return(await $D(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=ld(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await NH(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await NH(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){const s=ld(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);if(i instanceof Blob)await HM(s,i);else if(Object.keys(i).length>0){const o=new Blob([JSON.stringify(i)],{type:"application/json"});await HM(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await HM(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=ld(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await swe(i)}}const Y8e=P.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),sx=()=>P.useContext(Y8e);function HZt({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=P.useState(t),[o,a]=P.useState(!1),{storageEngine:u}=Wo(),l=async()=>{const h=V4();try{await gGt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h,!0):!1;P.useEffect(()=>{s(t);let h;if(u instanceof Ed)try{h=V4()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(b=>({user:b.user,isAdmin:b.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const b={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},w=await f(b);b.isAdmin=!!w,s(b)}else l()},g=(async()=>{if(u instanceof Ed){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const b=mGt(h,async w=>await p(w));return()=>b()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=P.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return _.jsx(Y8e.Provider,{value:d,children:i.determiningStatus?_.jsx(kf,{visible:!0}):e})}function Vk({studyIds:e}){const t=wp(),{studyId:n}=X0(),r=xb(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=Wo(),{user:o,logout:a}=sx(),[u,l]=P.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:_.jsx(Sht,{}),href:"",needAdmin:!1},{name:"Analysis",leftIcon:_.jsx(mht,{}),href:"analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:_.jsx(mIe,{}),href:"settings",needAdmin:!0}];return _.jsx(bs.Header,{p:"md",children:_.jsxs(Cl,{mt:-7,align:"center",children:[_.jsx(Cl.Col,{span:6,children:_.jsxs(Zt,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[_.jsx(Eb,{w:40,src:`${Rl}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsx(xf,{w:"md"}),_.jsx(Os,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),_.jsx(Cl.Col,{span:6,children:_.jsxs(Zt,{justify:"flex-end",direction:"row",children:[c&&_.jsx(uP,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),_.jsx(qZ,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),_.jsx(ug,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:_.jsxs(Zt,{direction:"column",mt:20,children:[_.jsx(gt,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?_.jsx(Mn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${Rl}${d.href}`,children:d.name},`menu-item-${d.name}`):null:_.jsx(Mn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${Rl}${d.href}`,children:d.name},`menu-item-${d.name}`)),_.jsxs(Ne,{ml:10,children:[_.jsx(uC,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?_.jsx(gt,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),l(!1)},children:"Logout"}):_.jsx(gt,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function noe({allParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=d8(!1),[a,u]=P.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;aie(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return _.jsxs(_.Fragment,{children:[_.jsxs(qi,{style:{gap:n},children:[_.jsx(hs,{label:"Download all participants data as JSON",children:_.jsx(Mn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:_.jsx(wht,{})})}),_.jsx(hs,{label:"Download all participants data as a tidy CSV",children:_.jsx(Mn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:_.jsx(gIe,{})})})]}),i&&a.length>0&&_.jsx(hjt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}function qZt({cellData:e}){return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?_.jsx(_n.Td,{children:_.jsx(Al,{miw:100,children:e.timedOut?_.jsx(gt,{children:"Timed out"}):Object.entries(e.answer).map(([t,n])=>_.jsxs(Ne,{children:[_.jsxs(gt,{fw:700,span:!0,children:[" ",`${t}: `]}),typeof n=="object"?_.jsx(gt,{size:"xs",component:"pre",span:!0,children:`${JSON.stringify(n,null,2)}`}):_.jsx(gt,{span:!0,children:n})]},`cell-${t}`))})}):_.jsx(_n.Td,{children:"N/A"})}function Zwe({cellData:e}){const t=(e.endTime-e.startTime)/1e3,n=QLe(e);return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?_.jsxs(_n.Td,{children:[t.toFixed(1)," ","s",n&&_.jsxs(_.Fragment,{children:[_.jsx("br",{})," ","(",(n/1e3).toFixed(1)," ","s)"]})]}):_.jsx(_n.Td,{children:"N/A"})}function WZt(e){const{metaData:t}=e;return _.jsx(_n.Td,{children:_.jsx(bee,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:_.jsxs(Al,{gap:"xs",children:[_.jsxs(Ne,{children:["IP:"," ",t.ip]}),_.jsxs(Ne,{children:["Language:"," ",t.language]}),_.jsxs(Ne,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),_.jsxs(Ne,{children:["User Agent:"," ",t.userAgent]})]})})})}function GZt({completed:e,inProgress:t,rejected:n,studyConfig:r,refresh:i}){const{storageEngine:s}=Wo(),{studyId:o}=X0(),{user:a}=sx(),u=async(C,A)=>{if(s&&o)if(a.isAdmin){const I=A===""?"Rejected by admin":A;await s.rejectParticipant(o,C,I),await i()}else console.warn("You are not authorized to perform this action.")},[l,c]=P.useState([]),[f,d]=P.useState(!1),[h,p]=P.useState(!1),[m,g]=P.useState(""),y=async()=>{d(!0),p(!1);const C=l.map(async A=>await u(A,m));await Promise.all(C),c([]),await i(),d(!1)},b=P.useMemo(()=>[...e,...t,...n],[e,t,n]);function w(C){C==="all"?l.length===b.length?c([]):c(b.map(A=>A.participantId)):l.includes(C)?c(l.filter(A=>A!==C)):c([...l,C])}const S=pRe(r.sequence),E=[_.jsx(_n.Th,{children:_.jsx(Zt,{justify:"center",children:_.jsx(wc,{mb:-4,checked:l.length===b.length,onChange:()=>w("all")})})},"action"),_.jsx(_n.Th,{children:"ID"},"ID"),_.jsx(_n.Th,{children:"Status"},"status"),_.jsx(_n.Th,{children:"Tags"},"tags"),_.jsx(_n.Th,{children:"Meta"},"meta"),...S.flatMap(C=>[_.jsx(_n.Th,{children:C.componentName},`header-${C.componentName}-${C.timesSeenInBlock}`),_.jsxs(_n.Th,{children:[_.jsx("span",{style:{whiteSpace:"nowrap"},children:C.componentName})," ","Duration (clean)"]},`header-${C.componentName}-${C.timesSeenInBlock}-duration`)]),_.jsx(_n.Th,{children:"Total Duration (clean)"},"total-duration")],T=b.map(C=>_.jsxs(_n.Tr,{children:[_.jsx(_n.Td,{children:_.jsx(Zt,{justify:"center",children:_.jsx(wc,{mb:-4,checked:l.includes(C.participantId),onChange:()=>w(C.participantId)})})}),_.jsx(_n.Td,{style:{whiteSpace:"nowrap"},children:C.participantId}),_.jsx(_n.Td,{children:_.jsxs(Zt,{direction:"column",miw:100,children:[_.jsxs(Zt,{direction:"row",align:"center",children:[C.rejected?_.jsx(hs,{label:"Rejected",children:_.jsx($ee,{size:16,color:"red",style:{marginBottom:-3}})}):C.completed?_.jsx(hs,{label:"Completed",children:_.jsx(hIe,{size:16,color:"teal",style:{marginBottom:-3}})}):_.jsx(hs,{label:"In Progress",children:_.jsx(pIe,{size:16,color:"orange",style:{marginBottom:-3}})}),!C.completed&&_.jsxs(gt,{size:"sm",mb:-1,ml:4,children:[(Object.entries(C.answers).filter(([A,I])=>I.endTime!==-1&&I.endTime!==void 0).length/(Z0(C.sequence).length-1)*100).toFixed(2),"%"]})]}),C.rejected&&_.jsx(gt,{mt:5,fz:10,children:C.rejected.reason})]})}),_.jsx(_n.Td,{children:_.jsx(Zt,{direction:"column",miw:100,children:(C.participantTags||[]).map(A=>_.jsxs(gt,{fz:10,children:["-"," ",A]},`tag-${A}`))})}),C.metadata?_.jsx(WZt,{metaData:C.metadata}):_.jsx(_n.Td,{children:"N/A"}),S.map(A=>{const I=ute(C.sequence,A.orderPath),k=I&&Object.entries(C.answers).sort((N,F)=>{const M=parseInt(N[0].slice(N[0].lastIndexOf("_")+1),10),L=parseInt(F[0].slice(F[0].lastIndexOf("_")+1),10);return M-L}).filter(([N])=>{const F=N.slice(0,N.lastIndexOf("_")),M=parseInt(N.slice(N.lastIndexOf("_")+1),10);return F===A.componentName&&M<=I[0].lastIndex&&M>=I[0].firstIndex});return k!==null&&k.length>=A.timesSeenInBlock+1&&k[A.timesSeenInBlock][1].endTime!==-1?_.jsxs(xi.Fragment,{children:[_.jsx(qZt,{cellData:k[A.timesSeenInBlock][1]}),_.jsx(Zwe,{cellData:k[A.timesSeenInBlock][1]})]},`cellgroup-${C.participantId}-${A.componentName}-${A.timesSeenInBlock}`):_.jsxs(xi.Fragment,{children:[_.jsx(_n.Td,{children:"N/A"}),_.jsx(_n.Td,{children:"N/A"})]},`cellgroup-${C.participantId}-${A.componentName}-${A.timesSeenInBlock}`)}),_.jsx(Zwe,{cellData:{startTime:Math.min(...Object.values(C.answers).filter(A=>A.endTime!==-1&&A.endTime!==void 0).map(A=>A.startTime)),endTime:Math.max(...Object.values(C.answers).filter(A=>A.endTime!==-1&&A.endTime!==void 0).map(A=>A.endTime)),answer:{},windowEvents:Object.values(C.answers).flatMap(A=>A.windowEvents),timedOut:!1}},`cell-${C.participantId}-total-duration`)]},C.participantId));return b.length>0?_.jsxs(_.Fragment,{children:[_.jsx(kf,{visible:f,overlayProps:{blur:2}}),_.jsxs(Zt,{justify:"space-between",mb:8,p:8,children:[_.jsx(qi,{children:_.jsx(uP,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:b.map(C=>({value:C.participantId,label:C.participantId})),searchable:!0,value:null,leftSection:_.jsx(Mht,{size:14}),onChange:C=>C&&w(C)})}),_.jsxs(qi,{children:[_.jsx(noe,{allParticipants:b,studyId:o||""}),_.jsxs(Mn,{disabled:l.length===0||!a.isAdmin,onClick:()=>p(!0),color:"red",children:["Reject Participants (",l.length,")"]})]})]}),_.jsx(Zt,{direction:"column",style:{width:"100%",overflow:"auto"},children:_.jsxs(_n,{striped:!0,withTableBorder:!0,children:[_.jsx(_n.Thead,{children:_.jsx(_n.Tr,{children:E})}),_.jsx(_n.Tbody,{children:T})]})}),_.jsxs(qs,{opened:h,onClose:()=>p(!1),title:_.jsxs(gt,{children:["Reject Participants (",l.length,")"]}),children:[_.jsx(y0,{label:"Please enter the reason for rejection.",onChange:C=>g(C.target.value)}),_.jsxs(Zt,{mt:"sm",justify:"right",children:[_.jsx(Mn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{p(!1),g("")},children:"Cancel"}),_.jsx(Mn,{color:"red",onClick:()=>y(),children:"Reject Participants"})]})]})]}):_.jsxs(_.Fragment,{children:[_.jsx(xf,{h:"xl"}),_.jsx(Zt,{justify:"center",align:"center",children:_.jsx(gt,{children:"No data available"})})]})}const YZt="_root_1spq0_1",KZt="_description_1spq0_9",XZt="_title_1spq0_10",QZt="_closeButton_1spq0_14",JZt={root:YZt,description:KZt,title:XZt,closeButton:QZt},J4=e=>{const{title:t,message:n,color:r}=e;VE.show({title:t,message:n,position:"top-center",classNames:JZt,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})};function ZZt({studyId:e,refresh:t}){const[n,r]=P.useState(!1),[i,s]=P.useState(!1),[o,a]=P.useState(!1),[u,l]=P.useState(!1),[c,f]=P.useState(""),[d,h]=P.useState([]),[p,m]=P.useState(""),[g,y]=P.useState(""),[b,w]=P.useState(!1),[S,E]=P.useState(!1),{storageEngine:T}=Wo(),C=T,A=P.useCallback(async()=>{E(!0);const $=await C.getSnapshots(e);h($),E(!1)},[C,e]);P.useEffect(()=>{A()},[A]);const I=async($,...W)=>{w(!0);const K=await $(...W);K.status==="SUCCESS"?(A(),w(!1),await t(),K.notifications&&K.notifications.forEach(q=>{J4(q)})):(w(!1),J4({title:K.error.title,message:K.error.message,color:"red"}))},k=async()=>{await I(C.createSnapshot.bind(C),e,!1)},N=async()=>{m(""),r(!1),await I(C.createSnapshot.bind(C),e,!0)},F=async()=>{a(!1),await I(C.renameSnapshot.bind(C),c,g)},M=async $=>{await I(C.restoreSnapshot.bind(C),e,$)},L=async()=>{m(""),s(!1),await I(C.removeSnapshotOrLive.bind(C),c,!0)},j=async()=>{m(""),l(!1),await I(C.removeSnapshotOrLive.bind(C),e,!0)},B=()=>ume({title:"Create a Snapshot",children:_.jsx(gt,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>k()}),z=$=>ume({title:"Restore Snapshot",children:_.jsx(gt,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>M($)}),V=$=>{const W=/-snapshot-(.+)$/,K=$.match(W);return K&&K[1]?K[1].replace("T"," "):null},G=async $=>{const W=$.slice($.indexOf("-")+1);return await C.getAllParticipantsDataByStudy(W)};return _.jsxs(_.Fragment,{children:[_.jsx(kf,{visible:b}),_.jsxs(Zt,{justify:"space-between",align:"center",children:[_.jsxs(Ne,{style:{width:"70%"},children:[_.jsx(Os,{order:5,children:"Create a Snapshot"}),_.jsxs(gt,{children:["This will create a snapshot of the live"," ",_.jsx(gt,{span:!0,fw:700,children:e})," ","database. It will"," ",_.jsx(gt,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(hs,{label:"Create a snapshot",children:_.jsx(Mn,{onClick:B,children:"Snapshot"})})]}),_.jsx(xf,{h:"lg"}),_.jsxs(Zt,{justify:"space-between",align:"center",children:[_.jsxs(Ne,{style:{width:"70%"},children:[_.jsx(Os,{order:5,children:"Archive Data"}),_.jsxs(gt,{children:["This will create a snapshot of the live"," ",_.jsx(gt,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(hs,{label:"Snapshot and Delete Data",children:_.jsx(Mn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),_.jsx(xf,{h:"lg"}),_.jsxs(Zt,{justify:"space-between",align:"center",children:[_.jsxs(Ne,{style:{width:"70%"},children:[_.jsx(Os,{order:5,children:"Delete Data"}),_.jsxs(gt,{children:["This will delete the live"," ",_.jsx(gt,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),_.jsx(hs,{label:"Delete Data",children:_.jsx(Mn,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),_.jsx(xf,{h:"xl"}),_.jsxs(Zt,{direction:"column",children:[_.jsx(Zt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:_.jsx(Os,{order:5,children:"Snapshots"})}),_.jsxs(Ne,{style:{position:"relative"},children:[_.jsx(kf,{visible:S}),d.length>0?_.jsxs(_n,{children:[_.jsx(_n.Thead,{children:_.jsxs(_n.Tr,{children:[_.jsx(_n.Th,{children:"Snapshot Name"}),_.jsx(_n.Th,{children:"Date Created"}),_.jsx(_n.Th,{children:"Actions"})]})}),_.jsx(_n.Tbody,{children:d.map($=>_.jsxs(_n.Tr,{children:[_.jsx(_n.Td,{children:$.alternateName}),_.jsx(_n.Td,{children:V($.originalName)}),_.jsx(_n.Td,{children:_.jsxs(Zt,{children:[_.jsx(hs,{label:"Rename",children:_.jsx(Mn,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f($.originalName)},children:_.jsx(kht,{})})}),_.jsx(hs,{label:"Restore Snapshot",children:_.jsx(Mn,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{z($.originalName)},children:_.jsx(Pht,{})})}),_.jsx(hs,{label:"Delete Snapshot",children:_.jsx(Mn,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f($.originalName)},children:_.jsx(yIe,{})})}),_.jsx(noe,{allParticipants:()=>G($.originalName),studyId:e,gap:"10px",fileName:$.alternateName})]})})]},$.originalName))})]}):_.jsx(gt,{children:"No snapshots."})]})]}),_.jsxs(qs,{opened:n,onClose:()=>{r(!1),m("")},title:_.jsx(gt,{children:"Archive Data"}),children:[_.jsx(gt,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),_.jsx(y0,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:$=>m($.target.value)}),_.jsxs(Zt,{mt:"sm",justify:"right",children:[_.jsx(Mn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),_.jsx(Mn,{color:"red",onClick:N,disabled:p!==e,children:"Archive"})]})]}),_.jsxs(qs,{opened:i,onClose:()=>{s(!1),m("")},title:_.jsx(gt,{children:"Delete Snapshot"}),children:[_.jsxs(gt,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",_.jsx(gt,{span:!0,fw:700,children:"irreversible"}),"."]}),_.jsx(y0,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:$=>m($.target.value)}),_.jsxs(Zt,{mt:"sm",justify:"right",children:[_.jsx(Mn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),_.jsx(Mn,{color:"red",onClick:L,disabled:p!==e,children:"Delete"})]})]}),_.jsxs(qs,{opened:o,onClose:()=>{a(!1),y("")},title:_.jsx(gt,{children:"Rename Snapshot"}),children:[_.jsx(y0,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:$=>y($.target.value)}),_.jsxs(Zt,{mt:"sm",justify:"right",children:[_.jsx(Mn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),y("")},children:"Cancel"}),_.jsx(Mn,{color:"green",onClick:F,disabled:!g||g.length===0,children:"Rename"})]})]}),_.jsxs(qs,{opened:u,onClose:()=>{l(!1),m("")},title:_.jsx(gt,{children:"Delete Live Data"}),children:[_.jsxs(gt,{mb:"sm",children:["This will permanently delete the live"," ",_.jsx(gt,{span:!0,fw:700,children:e})," ","data. This action is"," ",_.jsx(gt,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),_.jsx(y0,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:$=>m($.target.value)}),_.jsxs(Zt,{mt:"sm",justify:"right",children:[_.jsx(Mn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),_.jsx(Mn,{color:"red",onClick:j,disabled:p!==e,children:"Delete"})]})]})]})}function een({studyId:e}){const{storageEngine:t}=Wo(),[n,r]=P.useState(!1),[i,s]=P.useState(!1),[o,a]=P.useState(!1),[u,l]=P.useState(!1);P.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&_.jsxs(Al,{children:[_.jsx(gT,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),_.jsx(gT,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),_.jsx(gT,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function ten({studyId:e,refresh:t}){const{storageEngine:n}=Wo();return _.jsx(Fd,{children:_.jsxs(ac,{multiple:!0,variant:"contained",children:[_.jsxs(ac.Item,{value:"ReVISit Modes",children:[_.jsx(ac.Control,{children:_.jsx(Os,{order:5,children:"ReVISit Modes"})}),_.jsx(ac.Panel,{children:_.jsx(een,{studyId:e})})]},"modes"),_.jsxs(ac.Item,{value:"Data Management",children:[_.jsx(ac.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:_.jsx(Os,{order:5,children:"Data Management"})}),_.jsx(ac.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&_.jsx(ZZt,{studyId:e,refresh:t})})]},"dataManagement")]})})}const sS=14;function K8e({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return _.jsxs(Zt,{ml:4,gap:4,children:[_.jsx(hs,{label:"Completed",children:_.jsx(u1,{variant:"light",color:"green",leftSection:_.jsx(hIe,{width:sS,height:sS,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),_.jsx(hs,{label:"In Progress",children:_.jsx(u1,{variant:"light",color:"orange",leftSection:_.jsx(pIe,{width:sS,height:sS,style:{paddingTop:1}}),pb:1,children:t})}),_.jsx(hs,{label:"Rejected",children:_.jsx(u1,{variant:"light",color:"red",leftSection:_.jsx($ee,{width:sS,height:sS,style:{paddingTop:1}}),pb:1,children:n})})]})}const e_e={};function aX(e,t){e===void 0&&(e=e_e),t===void 0&&(t=e_e);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var nen=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ren=Object.prototype.hasOwnProperty;function uX(e,t){return ren.call(e,t)}function lX(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)uX(e,i)&&r.push(i);return r}function wf(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function cX(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Vw(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function X8e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function fX(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(fX(e[t]))return!0}else if(typeof e=="object"){for(var r=lX(e),i=r.length,s=0;s<i;s++)if(fX(e[r[s]]))return!0}}return!1}function t_e(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var Q8e=function(e){nen(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,t_e(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=t_e(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),no=Q8e,ien=wf,tT={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Z4(n,this.path);r&&(r=wf(r));var i=O_(n,{op:"remove",path:this.from}).removed;return O_(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Z4(n,this.from);return O_(n,{op:"add",path:this.path,value:wf(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:SN(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},sen={add:function(e,t,n){return cX(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:tT.move,copy:tT.copy,test:tT.test,_get:tT._get};function Z4(e,t){if(t=="")return e;var n={op:"_get",path:t};return O_(e,n),n.value}function O_(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):e5(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=Z4(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=SN(e,t.value),o.test===!1)throw new no("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new no("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=wf(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=e5;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=X8e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!cX(h))throw new no("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);cX(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new no("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=sen[t.op].call(t,l,h,e);if(o.test===!1)throw new no("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=tT[t.op].call(t,l,h,e);if(o.test===!1)throw new no("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new no("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function X9(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new no("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=wf(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=O_(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function oen(e,t,n){var r=O_(e,t);if(r.test===!1)throw new no("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function e5(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new no("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(tT[e.op]){if(typeof e.path!="string")throw new no("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new no('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new no("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new no("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&fX(e.value))throw new no("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new no("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new no("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=J8e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new no("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new no("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function J8e(e,t,n){try{if(!Array.isArray(e))throw new no("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)X9(wf(t),wf(e),n||!0);else{n=n||e5;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof no)return i;throw i}}function SN(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!SN(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!SN(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const aen=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:no,_areEquals:SN,applyOperation:O_,applyPatch:X9,applyReducer:oen,deepClone:ien,getValueByPointer:Z4,validate:J8e,validator:e5},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var roe=new WeakMap,uen=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),len=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function cen(e){return roe.get(e)}function fen(e,t){return e.observers.get(t)}function den(e,t){e.observers.delete(t.callback)}function hen(e,t){t.unobserve()}function pen(e,t){var n=[],r,i=cen(e);if(!i)i=new uen(e),roe.set(e,i);else{var s=fen(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=wf(e),t){r.callback=t,r.next=null;var o=function(){dX(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){dX(r),clearTimeout(r.next),den(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new len(t,r)),r}function dX(e,t){t===void 0&&(t=!1);var n=roe.get(e.object);ioe(n.value,e.object,e.patches,"",t),e.patches.length&&X9(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function ioe(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=lX(t),o=lX(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(uX(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?ioe(c,f,n,r+"/"+Vw(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Vw(l),value:wf(c)}),n.push({op:"replace",path:r+"/"+Vw(l),value:wf(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Vw(l),value:wf(c)}),n.push({op:"remove",path:r+"/"+Vw(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!uX(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Vw(l),value:wf(t[l])})}}}function men(e,t,n){n===void 0&&(n=!1);var r=[];return ioe(e,t,r,"",n),r}const gen=Object.freeze(Object.defineProperty({__proto__:null,compare:men,generate:dX,observe:pen,unobserve:hen},Symbol.toStringTag,{value:"Module"}));Object.assign({},aen,gen,{JsonPatchError:Q8e,deepClone:wf,escapePathComponent:Vw,unescapePathComponent:X8e});var yen=/("(?:[^\\"]|\\.)*")|[:,]/g,ven=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,b,w,S,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),S=JSON.stringify(a,s),S===void 0)return S;if(g=i-u.length-l,S.length<=g&&(b=S.replace(yen,function(T,C){return C||T+" "}),b.length<=g))return b;if(s!=null&&(a=JSON.parse(S),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(w="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(w="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[w,r+d.join(`,
`+y),c].join(`
`+u)}return S}(t,"",0)};const jH=zf(ven);function Xc(e,t,n){return e.fields=t||[],e.fname=n,e}function lo(e){return e==null?null:e.fname}function qu(e){return e==null?null:e.fields}function Z8e(e){return e.length===1?ben(e[0]):wen(e)}const ben=e=>function(t){return t[e]},wen=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function st(e){throw Error(e)}function yg(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||st("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&st("Access path missing closing bracket: "+e),r&&st("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Ud(e,t,n){const r=yg(e);return e=r.length===1?r[0]:e,Xc((n&&n.get||Z8e)(r),[e],t||e)}const oO=Ud("id"),el=Xc(e=>e,[],"identity"),Fv=Xc(()=>0,[],"zero"),_A=Xc(()=>1,[],"one"),zd=Xc(()=>!0,[],"true"),pv=Xc(()=>!1,[],"false");function _en(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const eBe=0,soe=1,ooe=2,tBe=3,nBe=4;function aoe(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_en,r=e||eBe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=soe&&n(t||"error","ERROR",arguments),this},warn(){return r>=ooe&&n(t||"warn","WARN",arguments),this},info(){return r>=tBe&&n(t||"log","INFO",arguments),this},debug(){return r>=nBe&&n(t||"log","DEBUG",arguments),this}}}var at=Array.isArray;function jt(e){return e===Object(e)}const n_e=e=>e!=="__proto__";function EA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=Een(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;xA(r,s,i[s],o)}return r},{})}function xA(e,t,n,r){if(!n_e(t))return;let i,s;if(jt(n)&&!at(n)){s=jt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?xA(s,i,n[i]):n_e(i)&&(s[i]=n[i])}else e[t]=n}function Een(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Yr(e){return e[e.length-1]}function zu(e){return e==null||e===""?null:+e}const rBe=e=>t=>e*Math.exp(t),iBe=e=>t=>Math.log(e*t),sBe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),oBe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,t5=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function Q9(e,t,n,r){const i=n(e[0]),s=n(Yr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function aBe(e,t){return Q9(e,t,zu,el)}function uBe(e,t){var n=Math.sign(e[0]);return Q9(e,t,iBe(n),rBe(n))}function lBe(e,t,n){return Q9(e,t,t5(n),t5(1/n))}function cBe(e,t,n){return Q9(e,t,sBe(n),oBe(n))}function J9(e,t,n,r,i){const s=r(e[0]),o=r(Yr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function uoe(e,t,n){return J9(e,t,n,zu,el)}function loe(e,t,n){const r=Math.sign(e[0]);return J9(e,t,n,iBe(r),rBe(r))}function n5(e,t,n,r){return J9(e,t,n,t5(r),t5(1/r))}function coe(e,t,n,r){return J9(e,t,n,sBe(r),oBe(r))}function fBe(e){return 1+~~(new Date(e).getMonth()/3)}function dBe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Lt(e){return e!=null?at(e)?e:[e]:[]}function hBe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function cr(e){return typeof e=="function"}const xen="descending";function foe(e,t,n){n=n||{},t=Lt(t)||[];const r=[],i=[],s={},o=n.comparator||Sen;return Lt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===xen?-1:1),i.push(a=cr(a)?a:Ud(a,null,n)),(qu(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:Xc(o(i,r),Object.keys(s))}const Z9=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),Sen=(e,t)=>e.length===1?Ten(e[0],t[0]):Cen(e,t,e.length),Ten=(e,t)=>function(n,r){return Z9(e(n),e(r))*t},Cen=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=Z9(s(r),s(i));return o*t[a]});function tl(e){return cr(e)?e:()=>e}function doe(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function lr(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function eg(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function pBe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const Aen=Object.prototype.hasOwnProperty;function vn(e,t){return Aen.call(e,t)}const e$={};function SA(e){let t={},n;function r(s){return vn(t,s)&&t[s]!==e$}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===e$&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=e$),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==e$&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function mBe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Yr(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function Ot(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),lr(r,n)}function nT(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function jb(e){return typeof e=="boolean"}function _1(e){return Object.prototype.toString.call(e)==="[object Date]"}function gBe(e){return e&&cr(e[Symbol.iterator])}function li(e){return typeof e=="number"}function yBe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Bt(e){return typeof e=="string"}function hoe(e,t,n){e&&(e=t?Lt(e).map(a=>a.replace(/\\(.)/g,"$1")):Lt(e));const r=e&&e.length,i=n&&n.get||Z8e,s=a=>i(t?[a]:yg(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Xc(o,e,"key")}function vBe(e,t){const n=e[0],r=Yr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const Den=1e4;function bBe(e){e=+e||Den;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>vn(t,o)||vn(n,o),get:o=>vn(t,o)?t[o]:vn(n,o)?s(o,n[o]):void 0,set:(o,a)=>vn(t,o)?t[o]=a:s(o,a)}}function wBe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function FI(e,t){let n="";for(;--t>=0;)n+=e;return n}function _Be(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?FI(i,o)+s:r==="center"?FI(i,~~(o/2))+s+FI(i,Math.ceil(o/2)):s+FI(i,o)}function aO(e){return e&&Yr(e)-e[0]||0}function Nt(e){return at(e)?"["+e.map(Nt)+"]":jt(e)||Bt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function poe(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const Ien=e=>li(e)||_1(e)?e:Date.parse(e);function moe(e,t){return t=t||Ien,e==null||e===""?null:t(e)}function goe(e){return e==null||e===""?null:e+""}function mp(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function EBe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Sv(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function ken(e){return e}function Ren(e){if(e==null)return ken;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function Nen(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Pen(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return r_e(e,n)})}:r_e(e,t)}function r_e(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=xBe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function xBe(e,t){var n=Ren(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&Nen(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function Oen(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function Men(e){return xBe(e,$en.apply(this,arguments))}function $en(e,t,n){var r,i,s;if(arguments.length>1)r=Fen(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:Oen(e,r)}}function Fen(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const cu="year",Hc="quarter",Wu="month",ca="week",qc="date",Uu="day",tg="dayofyear",Ff="hours",Lf="minutes",Vd="seconds",gp="milliseconds",yoe=[cu,Hc,Wu,ca,qc,Uu,tg,Ff,Lf,Vd,gp],UH=yoe.reduce((e,t,n)=>(e[t]=1+n,e),{});function voe(e){const t=Lt(e).slice(),n={};return t.length||st("Missing time unit."),t.forEach(i=>{vn(UH,i)?n[i]=1:st(`Invalid time unit: ${i}.`)}),(n[ca]||n[Uu]?1:0)+(n[Hc]||n[Wu]||n[qc]?1:0)+(n[tg]?1:0)>1&&st(`Incompatible time units: ${e}`),t.sort((i,s)=>UH[i]-UH[s]),t}const Len={[cu]:"%Y ",[Hc]:"Q%q ",[Wu]:"%b ",[qc]:"%d ",[ca]:"W%U ",[Uu]:"%a ",[tg]:"%j ",[Ff]:"%H:00",[Lf]:"00:%M",[Vd]:":%S",[gp]:".%L",[`${cu}-${Wu}`]:"%Y-%m ",[`${cu}-${Wu}-${qc}`]:"%Y-%m-%d ",[`${Ff}-${Lf}`]:"%H:%M"};function SBe(e,t){const n=lr({},Len,t),r=voe(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const e_=new Date;function boe(e){return e_.setFullYear(e),e_.setMonth(0),e_.setDate(1),e_.setHours(0,0,0,0),e_}function TBe(e){return ABe(new Date(e))}function CBe(e){return hX(new Date(e))}function ABe(e){return O0.count(boe(e.getFullYear())-1,e)}function hX(e){return W2.count(boe(e.getFullYear())-1,e)}function pX(e){return boe(e).getDay()}function Ben(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function DBe(e){return kBe(new Date(e))}function IBe(e){return mX(new Date(e))}function kBe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return d1.count(t-1,e)}function mX(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return G2.count(t-1,e)}function gX(e){return e_.setTime(Date.UTC(e,0,1)),e_.getUTCDay()}function jen(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function RBe(e,t,n,r,i){const s=t||1,o=Yr(e),a=(y,b,w)=>(w=w||y,Uen(n[w],r[w],y===o&&s,b)),u=new Date,l=mp(e),c=l[cu]?a(cu):tl(2012),f=l[Wu]?a(Wu):l[Hc]?a(Hc):Fv,d=l[ca]&&l[Uu]?a(Uu,1,ca+Uu):l[ca]?a(ca,1):l[Uu]?a(Uu,1):l[qc]?a(qc,1):l[tg]?a(tg,1):_A,h=l[Ff]?a(Ff):Fv,p=l[Lf]?a(Lf):Fv,m=l[Vd]?a(Vd):Fv,g=l[gp]?a(gp):Fv;return function(y){u.setTime(+y);const b=c(u);return i(b,f(u),d(u,b),h(u),p(u),m(u),g(u))}}function Uen(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function XC(e,t,n){return t+e*7-(n+6)%7}const zen={[cu]:e=>e.getFullYear(),[Hc]:e=>Math.floor(e.getMonth()/3),[Wu]:e=>e.getMonth(),[qc]:e=>e.getDate(),[Ff]:e=>e.getHours(),[Lf]:e=>e.getMinutes(),[Vd]:e=>e.getSeconds(),[gp]:e=>e.getMilliseconds(),[tg]:e=>ABe(e),[ca]:e=>hX(e),[ca+Uu]:(e,t)=>XC(hX(e),e.getDay(),pX(t)),[Uu]:(e,t)=>XC(1,e.getDay(),pX(t))},Ven={[Hc]:e=>3*e,[ca]:(e,t)=>XC(e,0,pX(t))};function NBe(e,t){return RBe(e,t||1,zen,Ven,Ben)}const Hen={[cu]:e=>e.getUTCFullYear(),[Hc]:e=>Math.floor(e.getUTCMonth()/3),[Wu]:e=>e.getUTCMonth(),[qc]:e=>e.getUTCDate(),[Ff]:e=>e.getUTCHours(),[Lf]:e=>e.getUTCMinutes(),[Vd]:e=>e.getUTCSeconds(),[gp]:e=>e.getUTCMilliseconds(),[tg]:e=>kBe(e),[ca]:e=>mX(e),[Uu]:(e,t)=>XC(1,e.getUTCDay(),gX(t)),[ca+Uu]:(e,t)=>XC(mX(e),e.getUTCDay(),gX(t))},qen={[Hc]:e=>3*e,[ca]:(e,t)=>XC(e,0,gX(t))};function PBe(e,t){return RBe(e,t||1,Hen,qen,jen)}const Wen={[cu]:zm,[Hc]:UR.every(3),[Wu]:UR,[ca]:W2,[qc]:O0,[Uu]:O0,[tg]:O0,[Ff]:DB,[Lf]:CB,[Vd]:_0,[gp]:EC},Gen={[cu]:Vm,[Hc]:zR.every(3),[Wu]:zR,[ca]:G2,[qc]:d1,[Uu]:d1,[tg]:d1,[Ff]:IB,[Lf]:AB,[Vd]:_0,[gp]:EC};function TA(e){return Wen[e]}function CA(e){return Gen[e]}function OBe(e,t,n){return e?e.offset(t,n):void 0}function MBe(e,t,n){return OBe(TA(e),t,n)}function $Be(e,t,n){return OBe(CA(e),t,n)}function FBe(e,t,n,r){return e?e.range(t,n,r):void 0}function LBe(e,t,n,r){return FBe(TA(e),t,n,r)}function BBe(e,t,n,r){return FBe(CA(e),t,n,r)}const LI=1e3,BI=LI*60,jI=BI*60,ej=jI*24,Yen=ej*7,i_e=ej*30,yX=ej*365,jBe=[cu,Wu,qc,Ff,Lf,Vd,gp],UI=jBe.slice(0,-1),zI=UI.slice(0,-1),VI=zI.slice(0,-1),Ken=VI.slice(0,-1),Xen=[cu,ca],s_e=[cu,Wu],UBe=[cu],jD=[[UI,1,LI],[UI,5,5*LI],[UI,15,15*LI],[UI,30,30*LI],[zI,1,BI],[zI,5,5*BI],[zI,15,15*BI],[zI,30,30*BI],[VI,1,jI],[VI,3,3*jI],[VI,6,6*jI],[VI,12,12*jI],[Ken,1,ej],[Xen,1,Yen],[s_e,1,i_e],[s_e,3,3*i_e],[UBe,1,yX]];function zBe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(aO(t))/n;let i=KE(a=>a[2]).right(jD,r),s,o;return i===jD.length?(s=UBe,o=O1(t[0]/yX,t[1]/yX,n)):i?(i=jD[r/jD[i-1][2]<jD[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=jBe,o=Math.max(O1(t[0],t[1],n),1)),{units:s,step:o}}function HI(e){const t={};return n=>t[n]||(t[n]=e(n))}function Qen(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=Jen(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function Jen(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function VBe(e){const t=HI(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=J_(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Qen(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=J_(o??",f");const a=O1(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=LNe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=BNe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=FNe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let vX;HBe();function HBe(){return vX=VBe({format:Db,formatPrefix:Pte})}function qBe(e){return VBe($Ne(e))}function r5(e){return arguments.length?vX=qBe(e):vX}function o_e(e,t,n){n=n||{},jt(n)||st(`Invalid time multi-format specifier: ${n}`);const r=t(Vd),i=t(Lf),s=t(Ff),o=t(qc),a=t(ca),u=t(Wu),l=t(Hc),c=t(cu),f=e(n[gp]||".%L"),d=e(n[Vd]||":%S"),h=e(n[Lf]||"%I:%M"),p=e(n[Ff]||"%I %p"),m=e(n[qc]||n[Uu]||"%a %d"),g=e(n[ca]||"%b %d"),y=e(n[Wu]||"%B"),b=e(n[Hc]||"%B"),w=e(n[cu]||"%Y");return S=>(r(S)<S?f:i(S)<S?d:s(S)<S?h:o(S)<S?p:u(S)<S?a(S)<S?m:g:c(S)<S?l(S)<S?y:b:w)(S)}function WBe(e){const t=HI(e.format),n=HI(e.utcFormat);return{timeFormat:r=>Bt(r)?t(r):o_e(t,TA,r),utcFormat:r=>Bt(r)?n(r):o_e(n,CA,r),timeParse:HI(e.parse),utcParse:HI(e.utcParse)}}let bX;GBe();function GBe(){return bX=WBe({format:Wte,parse:JPe,utcFormat:TP,utcParse:ZPe})}function YBe(e){return WBe(GPe(e))}function TN(e){return arguments.length?bX=YBe(e):bX}const wX=(e,t)=>lr({},e,t);function KBe(e,t){const n=e?qBe(e):r5(),r=t?YBe(t):TN();return wX(n,r)}function woe(e,t){const n=arguments.length;return n&&n!==2&&st("defaultLocale expects either zero or two arguments."),n?wX(r5(e),TN(t)):wX(r5(),TN())}function Zen(){return HBe(),GBe(),woe()}const etn=/^(data:|([A-Za-z]+:)?\/\/)/,ttn=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,ntn=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,a_e="file://";function rtn(e,t){return n=>({options:n||{},sanitize:stn,load:itn,fileAccess:!!t,file:otn(t),http:utn(e)})}async function itn(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function stn(e,t){t=lr({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=ttn.test(e.replace(ntn,""));(e==null||typeof e!="string"||!a)&&st("Sanitize failure, invalid URI: "+Nt(e));const u=etn.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(a_e))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(a_e.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function otn(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):atn}async function atn(){st("No file system access.")}function utn(e){return e?async function(t,n){const r=lr({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?cr(s[i])?s[i]():s.text():st(s.status+""+s.statusText)}:ltn}async function ltn(){st("No HTTP fetch method available.")}const ctn=e=>e!=null&&e===e,ftn=e=>e==="true"||e==="false"||e===!0||e===!1,dtn=e=>!Number.isNaN(Date.parse(e)),XBe=e=>!Number.isNaN(+e)&&!(e instanceof Date),htn=e=>XBe(e)&&Number.isInteger(+e),_X={boolean:poe,integer:zu,number:zu,date:moe,string:goe,unknown:el},t$=[ftn,htn,XBe,dtn],ptn=["boolean","integer","number","date"];function QBe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=t$.length,i=t$.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&ctn(u)&&!t$[a](u)&&(i[a]=0,++o,o===t$.length))return"string";return ptn[i.reduce((s,o)=>s===0?o:s,0)-1]}function JBe(e,t){return t.reduce((n,r)=>(n[r]=QBe(e,r),n),{})}function u_e(e){const t=function(n,r){const i={delimiter:e};return _oe(n,r?lr(r,i):i)};return t.responseType="text",t}function _oe(e,t){return t.header&&(e=t.header.map(Nt).join(t.delimiter)+`
`+e),NNe(t.delimiter).parse(e+"")}_oe.responseType="text";function mtn(e){return typeof Buffer=="function"&&cr(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function Eoe(e,t){const n=t&&t.property?Ud(t.property):el;return jt(e)&&!mtn(e)?gtn(n(e),t):n(JSON.parse(e))}Eoe.responseType="json";function gtn(e,t){return!at(e)&&gBe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const ytn={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function ZBe(e,t){let n,r,i,s;return e=Eoe(e,t),t&&t.feature?(n=Pen,i=t.feature):t&&t.mesh?(n=Men,i=t.mesh,s=ytn[t.filter]):st("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):st("Invalid TopoJSON object: "+i),r&&r.features||[r]}ZBe.responseType="json";const TF={dsv:_oe,csv:u_e(","),tsv:u_e("	"),json:Eoe,topojson:ZBe};function xoe(e,t){return arguments.length>1?(TF[e]=t,this):vn(TF,e)?TF[e]:null}function e9e(e){const t=xoe(e);return t&&t.responseType||"text"}function t9e(e,t,n,r){t=t||{};const i=xoe(t.type||"json");return i||st("Unknown data format type: "+t.type),e=i(e,t),t.parse&&vtn(e,t.parse,n,r),vn(e,"columns")&&delete e.columns,e}function vtn(e,t,n,r){if(!e.length)return;const i=TN();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=JBe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!_X[p])throw Error("Illegal format pattern: "+h+":"+p);return _X[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const tj=rtn(typeof fetch<"u"&&fetch,null);function nj(e){const t=e||el,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function CF(e,t){try{await t(e)}catch(n){e.error(n)}}const n9e=Symbol("vega_id");let btn=1;function rj(e){return!!(e&&mn(e))}function mn(e){return e[n9e]}function r9e(e,t){return e[n9e]=t,e}function Ti(e){const t=e===Object(e)?e:{data:e};return mn(t)?t:r9e(t,btn++)}function Soe(e){return ij(e,Ti({}))}function ij(e,t){for(const n in e)t[n]=e[n];return t}function i9e(e,t){return r9e(t,mn(e))}function ox(e,t){return e?t?(n,r)=>e(n,r)||mn(t(n))-mn(t(r)):(n,r)=>e(n,r)||mn(n)-mn(r):null}function s9e(e){return e&&e.constructor===ax}function ax(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:ax,insert(a){const u=Lt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=cr(a)?r:t,l=Lt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:tl(l)};return cr(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return cr(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[mn(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[mn(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(b=>{p(b)&&(l[mn(b)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=mn(m),l[g]?l[g]=1:a.add.push(Ti(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[mn(m)]<0&&a.rem.push(m);function y(b,w,S){S?b[w]=S(b):a.encode=w,o||(c[mn(b)]=b)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[mn(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(b=>{p(b)&&l[mn(b)]>0&&y(b,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(b=>l[mn(b)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const AF="_:mod:_";function sj(){Object.defineProperty(this,AF,{writable:!0,value:{}})}sj.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[AF];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=at(n)?1+n.length:-1),i},modified(e,t){const n=this[AF];if(arguments.length){if(at(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[AF]={},this}};let wtn=0;const _tn="pulse",Etn=new sj,xtn=1,Stn=2;function ns(e,t,n,r){this.id=++wtn,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function l_e(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}ns.prototype={targets(){return this._targets||(this._targets=nj(oO))},set(e){return this.value!==e?(this.value=e,1):0},skip:l_e(xtn),modified:l_e(Stn),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new sj,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof ns?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===_tn)Lt(a).forEach(f=>{f instanceof ns?f!==this&&(f.targets().add(this),s.push(f)):st("Pulse parameters must be operator instances.")}),this.source=a;else if(at(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||Etn,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function Ttn(e,t,n,r){let i=1,s;return e instanceof ns?s=e:e&&e.prototype instanceof ns?s=new e:cr(e)?s=new ns(null,e):(i=0,s=new ns(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function Ctn(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let Atn=0;function oj(e,t,n){this.id=++Atn,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function mv(e,t,n){return new oj(e,t,n)}oj.prototype={_filter:zd,_apply:el,targets(){return this._targets||(this._targets=nj(oO))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=mv(e);return this.targets().add(t),t},apply(e){const t=mv(null,e);return this.targets().add(t),t},merge(){const e=mv();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=mv();return this.targets().add(mv(null,null,doe(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(mv(null,null,()=>n=!0)),t.targets().add(mv(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=zd,this._targets=null}};function Dtn(e,t,n,r){const i=this,s=mv(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Lt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function Itn(e,t){const n=this.locale();return t9e(e,t,n.timeParse,n.utcParse)}function ktn(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function Rtn(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:e9e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function Ntn(e,t,n){const r=this,i=r._pending||Ptn(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(zd).insert(s.data||[])),i.done(),s}function Ptn(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const Otn={skip:!0};function Mtn(e,t,n,r,i){return(e instanceof ns?Ftn:$tn)(this,e,t,n,r,i),this}function $tn(e,t,n,r,i,s){const o=lr({},s,Otn);let a,u;cr(n)||(n=tl(n)),r===void 0?a=l=>e.touch(n(l)):cr(r)?(u=new ns(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;s9e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function Ftn(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new ns(null,Ltn(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function Ltn(e,t){return t=cr(t)?t:tl(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function Btn(e){e.rank=++this._rank}function jtn(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&st("Cycle detected in dataflow graph.")}const i5={},Zp=1,Tv=2,Zg=4,Utn=Zp|Tv,c_e=Zp|Zg,oS=Zp|Tv|Zg,f_e=8,UD=16,d_e=32,h_e=64;function E1(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function zH(e,t){const n=[];return Sv(e,t,r=>n.push(r)),n}function p_e(e,t){const n={};return e.visit(t,r=>{n[mn(r)]=1}),r=>n[mn(r)]?null:r}function n$(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}E1.prototype={StopPropagation:i5,ADD:Zp,REM:Tv,MOD:Zg,ADD_REM:Utn,ADD_MOD:c_e,ALL:oS,REFLOW:f_e,SOURCE:UD,NO_SOURCE:d_e,NO_FIELDS:h_e,fork(e){return new E1(this.dataflow).init(this,e)},clone(){const e=this.fork(oS);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(oS|UD)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new E1(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&h_e)&&(n.fields=e.fields),t&Zp?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Tv?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Zg?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&d_e?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||oS;return t&Zp&&this.add.length||t&Tv&&this.rem.length||t&Zg&&this.mod.length},reflow(e){if(e)return this.fork(oS).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Zg,p_e(this,Zp))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return at(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?at(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Zp&&(n.addF=n$(n.addF,t)),e&Tv&&(n.remF=n$(n.remF,t)),e&Zg&&(n.modF=n$(n.modF,t)),e&UD&&(n.srcF=n$(n.srcF,t)),n},materialize(e){e=e||oS;const t=this;return e&Zp&&t.addF&&(t.add=zH(t.add,t.addF),t.addF=null),e&Tv&&t.remF&&(t.rem=zH(t.rem,t.remF),t.remF=null),e&Zg&&t.modF&&(t.mod=zH(t.mod,t.modF),t.modF=null),e&UD&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&UD)return Sv(n.source,n.srcF,r),n;e&Zp&&Sv(n.add,n.addF,r),e&Tv&&Sv(n.rem,n.remF,r),e&Zg&&Sv(n.mod,n.modF,r);const i=n.source;if(e&f_e&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Sv(i,p_e(n,c_e),r):Sv(i,n.srcF,r))}return n}};function Toe(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}Ot(Toe,E1,{fork(e){const t=new E1(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?at(e)?e.some(r=>n[r]):n[e]:0},filter(){st("MultiPulse does not support filtering.")},materialize(){st("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function ztn(e,t,n){const r=this,i=[];if(r._pulse)return o9e(r);if(r._pending&&await r._pending,t&&await CF(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new E1(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=nj(oO);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=i5),u!==i5&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await CF(r,c[f].callback)}return n&&await CF(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function Vtn(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function Htn(e,t,n){return this._pulse?o9e(this):(this.evaluate(e,t,n),this)}function qtn(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function o9e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Wtn(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Gtn(e,t){const n=e.source,r=this._clock;return n&&at(n)?new Toe(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Ytn(this._pulse,n&&n.pulse)}function Ytn(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==i5&&(e.source=t.source),e)}const Coe={skip:!1,force:!1};function Ktn(e,t){const n=t||Coe;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Xtn(e,t,n){const r=n||Coe;return(e.set(t)||r.force)&&this.touch(e,r),this}function Qtn(e,t,n){this.touch(e,n||Coe);const r=new E1(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function Jtn(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),a9e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,Ztn(t,0,e)):r=n,r}}}function a9e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function Ztn(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,a9e(e,r,t,n)}function UT(){this.logger(aoe()),this.logLevel(soe),this._clock=0,this._rank=0,this._locale=woe();try{this._loader=tj()}catch{}this._touched=nj(oO),this._input={},this._pulse=null,this._heap=Jtn((e,t)=>e.qrank-t.qrank),this._postrun=[]}function zD(e){return function(){return this._log[e].apply(this,arguments)}}UT.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:zD("error"),warn:zD("warn"),info:zD("info"),debug:zD("debug"),logLevel:zD("level"),cleanThreshold:1e4,add:Ttn,connect:Ctn,rank:Btn,rerank:jtn,pulse:Qtn,touch:Ktn,update:Xtn,changeset:ax,ingest:ktn,parse:Itn,preload:Ntn,request:Rtn,events:Dtn,on:Mtn,evaluate:ztn,run:Htn,runAsync:Vtn,runAfter:qtn,_enqueue:Wtn,_getPulse:Gtn};function Qe(e,t){ns.call(this,e,null,t)}Ot(Qe,ns,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const QC={};function u9e(e){const t=l9e(e);return t&&t.Definition||null}function l9e(e){return e=e&&e.toLowerCase(),vn(QC,e)?QC[e]:null}function*c9e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function Aoe(e,t,n){const r=Float64Array.from(c9e(e,n));return r.sort(R0),t.map(i=>kRe(r,i))}function Doe(e,t){return Aoe(e,[.25,.5,.75],t)}function Ioe(e,t){const n=e.length,r=z_t(e,t),i=Doe(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function f9e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Hd=Math.random;function enn(e){Hd=e}function d9e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(c9e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(Hd()*s)];c[l]=a/s}return c.sort(R0),[RG(c,n/2),RG(c,1-n/2)]}function h9e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?tnn(s,t+t/4):s}function tnn(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function nnn(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function rnn(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Hd())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const p9e=Math.sqrt(2*Math.PI),inn=Math.SQRT2;let VD=NaN;function aj(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(VD===VD)n=VD,VD=NaN;else{do n=Hd()*2-1,r=Hd()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,VD=r*s}return e+n*t}function koe(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*p9e)}function uj(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function lj(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*inn*snn(2*e-1)}function snn(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function Roe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>aj(n,r),pdf:s=>koe(s,n,r),cdf:s=>uj(s,n,r),icdf:s=>lj(s,n,r)};return i.mean(e).stdev(t)}function Noe(e,t){const n=Roe();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=Ioe(e)),i):t},sample(){return e[~~(Hd()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Poe(e,t){return e=e||0,t=t??1,Math.exp(e+aj()*t)}function Ooe(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*p9e*e)}function Moe(e,t,n){return uj(Math.log(e),t,n)}function $oe(e,t,n){return Math.exp(lj(e,t,n))}function m9e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>Poe(n,r),pdf:s=>Ooe(s,n,r),cdf:s=>Moe(s,n,r),icdf:s=>$oe(s,n,r)};return i.mean(e).stdev(t)}function g9e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Hd();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function Foe(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Hd()}function Loe(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Boe(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function joe(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function y9e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>Foe(n,r),pdf:s=>Loe(s,n,r),cdf:s=>Boe(s,n,r),icdf:s=>joe(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Uoe(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function uO(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function cj(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function lO(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function AA(e,t,n,r,i){let s=0,o=0;return lO(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function zoe(e,t,n){let r=0,i=0,s=0,o=0,a=0;lO(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=uO(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:AA(e,t,n,i,l)}}function v9e(e,t,n){let r=0,i=0,s=0,o=0,a=0;lO(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=uO(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:AA(e,t,n,i,l)}}function b9e(e,t,n){const[r,i,s,o]=cj(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;lO(e,t,n,(b,w)=>{d=r[f++],h=Math.log(w),p=d*w,a+=(w*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=uO(u/o,a/o,l/o,c/o),y=b=>Math.exp(m+g*(b-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:AA(e,t,n,o,y)}}function w9e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;lO(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=uO(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:AA(e,t,n,a,c)}}function Voe(e,t,n){const[r,i,s,o]=cj(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,b=u*y-l*l,w=(d*u-f*l)/b,S=(f*y-d*l)/b,E=-w*u,T=C=>(C=C-s,w*C*C+S*C+E+o);return{coef:[E-S*s+w*s*s+o,S-2*w*s,w],predict:T,rSquared:AA(e,t,n,o,T)}}function _9e(e,t,n,r){if(r===0)return Uoe(e,t,n);if(r===1)return zoe(e,t,n);if(r===2)return Voe(e,t,n);const[i,s,o,a]=cj(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=ann(c),b=w=>{w-=o;let S=a+y[0]+y[1]*w+y[2]*w*w;for(d=3;d<f;++d)S+=y[d]*Math.pow(w,d);return S};return{coef:onn(f,y,-o,a),predict:b,rSquared:AA(e,t,n,a,b)}}function onn(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function ann(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const m_e=2,g_e=1e-12;function E9e(e,t,n,r){const[i,s,o,a]=cj(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=m_e;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],b=p[0],w=p[1],S=y-i[b]>i[w]-y?b:w;let E=0,T=0,C=0,A=0,I=0;const k=1/Math.abs(i[S]-y||1);for(let M=b;M<=w;++M){const L=i[M],j=s[M],B=unn(Math.abs(y-L)*k)*d[M],z=L*B;E+=B,T+=z,C+=j*B,A+=j*z,I+=L*z}const[N,F]=uO(T/E,C/E,A/E,I/E);c[g]=N+F*y,f[g]=Math.abs(s[g]-c[g]),lnn(i,g+1,p)}if(h===m_e)break;const m=RRe(f);if(Math.abs(m)<g_e)break;for(let g=0,y,b;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?g_e:(b=1-y*y)*b}return cnn(i,c,o,a)}function unn(e){return(e=1-e*e*e)*e*e}function lnn(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function cnn(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const fnn=.5*Math.PI/180;function fj(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=dnn(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&hnn(f,m,d,h,p)>fnn?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function dnn(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function hnn(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function pnn(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function EX(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:pnn(e)}function x9e(e,t,n){return n||e+(t?"_"+t:"")}const VH=()=>{},mnn={init:VH,add:VH,rem:VH,idx:0},CN={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},cO=Object.keys(CN).filter(e=>e!=="__count__");function gnn(e,t){return(n,r)=>lr({name:e,aggregate_param:r,out:n||e},mnn,t)}[...cO,"__count__"].forEach(e=>{CN[e]=gnn(e,CN[e])});function S9e(e,t,n){return CN[e](n,t)}function T9e(e,t){return e.idx-t.idx}function ynn(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=CN[i]())})};return e.forEach(n),Object.values(t).sort(T9e)}function vnn(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function bnn(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function wnn(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function _nn(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function C9e(e,t){const n=t||el,r=ynn(e),i=e.slice().sort(T9e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=vnn,s.prototype.add=bnn,s.prototype.rem=wnn,s.prototype.set=_nn,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function Hoe(e){this._key=e?Ud(e):mn,this.reset()}const gu=Hoe.prototype;gu.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};gu.add=function(e){this._add.push(e)};gu.rem=function(e){this._rem.push(e)};gu.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};gu.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",vn(n,s)||(n[s]=1,++i);return i};gu.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=pBe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};gu.argmin=function(e){return this.extent(e)[0]||{}};gu.argmax=function(e){return this.extent(e)[1]||{}};gu.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};gu.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};gu.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=Doe(this.values(),e),this._get=e),this._q};gu.q1=function(e){return this.quartile(e)[0]};gu.q2=function(e){return this.quartile(e)[1]};gu.q3=function(e){return this.quartile(e)[2]};gu.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=d9e(this.values(),1e3,.05,e),this._get=e),this._ci};gu.ci0=function(e){return this.ci(e)[0]};gu.ci1=function(e){return this.ci(e)[1]};function tb(e){Qe.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}tb.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:cO},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Ot(tb,Qe,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(b){const w=Lt(qu(b)),S=w.length;let E=0,T;for(;E<S;++E)r[T=w[E]]||(r[T]=1,t.push(T))}this._dims=Lt(e.groupby),this._dnames=this._dims.map(b=>{const w=lo(b);return i(b),n.push(w),w}),this.cellkey=e.key?e.key:EX(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&st("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&st("Null aggregate field specified."),m=lo(f),g=x9e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(S9e(d,h,g))}return this._measures=this._measures.map(b=>C9e(b,b.field)),Object.create(null)},cellkey:EX(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new Hoe),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?i9e(t.tuple,s):Ti(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const Enn=1e-14;function qoe(e){Qe.call(this,null,e)}qoe.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Ot(qoe,Qe,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(qu(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=f9e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=zu(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(Enn+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=Xc(u,qu(t),e.name||"bin_"+lo(t))}});function A9e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?wBe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function Woe(e){Qe.call(this,[],e)}Woe.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Ot(Woe,Qe,{transform(e,t){const n=t.fork(t.ALL),r=A9e(mn,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(ox(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function D9e(e){ns.call(this,null,xnn,e)}Ot(D9e,ns);function xnn(e){return this.value&&!e.modified()?this.value:foe(e.fields,e.orders)}function Goe(e){Qe.call(this,null,e)}Goe.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Snn(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Ot(Goe,Qe,{transform(e,t){const n=f=>d=>{for(var h=Snn(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Ti({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function Yoe(e){Qe.call(this,null,e)}Yoe.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Ot(Yoe,Qe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=Tnn(a,i,s,e.filter||zd)):n.mod=a,n.source=this.value,n.modifies(r)}});function Tnn(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(Ti(s)),s={},s[t]=l);return i}const y_e={kde:Noe,mixture:g9e,normal:Roe,lognormal:m9e,uniform:y9e},Cnn="distributions",v_e="function",Ann="field";function I9e(e,t){const n=e[v_e];vn(y_e,n)||st("Unknown distribution function: "+n);const r=y_e[n]();for(const i in e)i===Ann?r.data((e.from||t()).map(e[i])):i===Cnn?r[i](e[i].map(s=>I9e(s,t))):typeof r[i]===v_e&&r[i](e[i]);return r}function Koe(e){Qe.call(this,null,e)}const k9e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Dnn={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:k9e},{name:"weights",type:"number",array:!0}]};Koe.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:k9e.concat(Dnn)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ot(Koe,Qe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=I9e(e.distribution,Inn(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&st("Invalid density method: "+o),!e.extent&&!r.data&&st("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||eg(r.data()),l=fj(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Ti(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function Inn(e){return()=>e.materialize(e.SOURCE).source}function R9e(e,t){return e?e.map((n,r)=>t[r]||lo(n)):null}function Xoe(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const N9e="bin";function Qoe(e){Qe.call(this,null,e)}Qoe.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:N9e}]};const knn=(e,t)=>aO(eg(e,t))/30;Ot(Qoe,Qe,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=Xoe(t.source,e.groupby,el),i=e.smooth||!1,s=e.field,o=e.step||knn(n,s),a=ox((p,m)=>s(p)-s(m)),u=e.as||N9e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of h9e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function P9e(e){ns.call(this,null,Rnn,e),this.modified(!0)}Ot(P9e,ns);function Rnn(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Xc(n=>t(n,e),qu(t),lo(t))}function Joe(e){Qe.call(this,[void 0,void 0],e)}Joe.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Ot(Joe,Qe,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=zu(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=lo(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function Zoe(e,t){ns.call(this,e),this.parent=t,this.count=0}Ot(Zoe,ns,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function dj(e){Qe.call(this,{},e),this._keys=SA();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}Ot(dj,Qe,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=vn(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new Zoe(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=mn(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(mn(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=mn(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(mn(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=mn(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function O9e(e){ns.call(this,null,Nnn,e)}Ot(O9e,ns);function Nnn(e){return this.value&&!e.modified()?this.value:at(e.name)?Lt(e.name).map(t=>Ud(t)):Ud(e.name,e.as)}function eae(e){Qe.call(this,SA(),e)}eae.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Ot(eae,Qe,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=mn(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(mn(f),1)});function c(f){const d=mn(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function tae(e){Qe.call(this,[],e)}tae.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Ot(tae,Qe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=R9e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=Soe(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function nae(e){Qe.call(this,[],e)}nae.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Ot(nae,Qe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(lo),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=Soe(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function rae(e){Qe.call(this,null,e)}rae.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Ot(rae,Qe,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function M9e(e){Qe.call(this,[],e)}Ot(M9e,Qe,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=Ti(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const r$={value:"value",median:RRe,mean:Y_t,min:kG,max:N0},Pnn=[];function iae(e){Qe.call(this,[],e)}iae.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function Onn(e){var t=e.method||r$.value,n;if(r$[t]==null)st("Unrecognized imputation method: "+t);else return t===r$.value?(n=e.value!==void 0?e.value:0,()=>n):r$[t]}function Mnn(e){const t=e.field;return n=>n?t(n):NaN}Ot(iae,Qe,{transform(e,t){var n=t.fork(t.ALL),r=Onn(e),i=Mnn(e),s=lo(e.field),o=lo(e.key),a=(e.groupby||[]).map(lo),u=$nn(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,b,w,S,E;for(g=0,w=u.length;g<w;++g)for(d=u[g],p=d.values,h=NaN,b=0;b<f;++b)if(d[b]==null){for(m=u.domain[b],E={_impute:!0},y=0,S=p.length;y<S;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(Ti(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function $nn(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,b)=>a[y]=b+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):Pnn)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function sae(e){tb.call(this,e)}sae.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:cO},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Ot(sae,tb,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{lr(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function oae(e){Qe.call(this,null,e)}oae.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ot(oae,Qe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Xoe(r,e.groupby,e.field),s=(e.groupby||[]).map(lo),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&st("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=eg(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=Noe(h,o)[a],m=e.counts?h.length:1,g=c||eg(h);fj(p,g,f,d).forEach(y=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[u[0]]=y[0],b[u[1]]=y[1]*m,l.push(Ti(b))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function $9e(e){ns.call(this,null,Fnn,e)}Ot($9e,ns);function Fnn(e){return this.value&&!e.modified()?this.value:hoe(e.fields,e.flat)}function F9e(e){Qe.call(this,[],e),this._pending=null}Ot(F9e,Qe,{transform(e,t){const n=t.dataflow;return this._pending?HH(this,t,this._pending):Lnn(e)?t.StopPropagation:e.values?HH(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Lt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>HH(this,t,Lt(r.data)))}});function Lnn(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function HH(e,t,n){n.forEach(Ti);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function aae(e){Qe.call(this,{},e)}aae.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Ot(aae,Qe,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&st('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&st('The "as" parameter has too few output field names.'),c=c||i.map(lo),f=function(p){for(var m=0,g=0,y,b;m<a;++m)if(b=r.get(n[m](p)),b==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](b)}):(c||st("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function L9e(e){ns.call(this,null,Bnn,e)}Ot(L9e,ns);function Bnn(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function B9e(e){ns.call(this,null,jnn,e)}Ot(B9e,ns);function jnn(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function j9e(e){Qe.call(this,null,e)}Ot(j9e,Qe,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function uae(e){tb.call(this,e)}uae.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:cO,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Ot(uae,tb,{_transform:tb.prototype.transform,transform(e,t){return this._transform(Unn(e,t),t)}});function Unn(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=qu(n).concat(qu(r)),o=Vnn(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>znn(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function znn(e,t,n,r){return Xc(i=>t(i)===e?n(i):NaN,r,e+"")}function Vnn(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(Z9),t?i.slice(0,t):i}function U9e(e){dj.call(this,e)}Ot(U9e,dj,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(mn(s),n,t,s);return(e.modified("field")||r&&t.modified(qu(r)))&&st("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Ti(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function lae(e){Qe.call(this,null,e)}lae.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Ot(lae,Qe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=R9e(e.fields,e.as||[]),s=r?(a,u)=>Hnn(a,u,r,i):ij;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=mn(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,Ti({}));o[mn(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[mn(a)]))}),n}});function Hnn(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function z9e(e){Qe.call(this,null,e)}Ot(z9e,Qe,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function cae(e){Qe.call(this,null,e)}cae.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const qnn=1e-14;Ot(cae,Qe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=Xoe(i,e.groupby,e.field),o=(e.groupby||[]).map(lo),a=[],u=e.step||.01,l=e.probs||Ec(u/2,1-qnn,u),c=l.length;return s.forEach(f=>{const d=Aoe(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Ti(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function V9e(e){Qe.call(this,null,e)}Ot(V9e,Qe,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=mn(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=Soe(i);r[mn(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[mn(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function fae(e){Qe.call(this,[],e),this.count=0}fae.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Ot(fae,Qe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[mn(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*Hd()),d<o.length&&d>=u&&(f=o[d],s[mn(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=mn(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[mn(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[mn(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[mn(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[mn(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[mn(c)])),this.count=a,this.value=n.source=o,n}});function dae(e){Qe.call(this,null,e)}dae.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Ot(dae,Qe,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Ec(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Ti(s)}),n.add=t.add.concat(this.value),n}});function H9e(e){Qe.call(this,null,e),this.modified(!0)}Ot(H9e,Qe,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function hae(e){Qe.call(this,null,e)}const q9e=["unit0","unit1"];hae.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:yoe,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:q9e}]};Ot(hae,Qe,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?CA:TA)(s.unit).offset,a=e.as||q9e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(qu(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:zBe({extent:e.extent||eg(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=voe(r),o=this.value||{},a=(n?PBe:NBe)(s,i);return a.unit=Yr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function W9e(e){Qe.call(this,SA(),e)}Ot(W9e,Qe,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function G9e(e){Qe.call(this,null,e)}Ot(G9e,Qe,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(ox(e.sort)):t.source).map(e.field))}});function Wnn(e,t,n,r){const i=AN[e](t,n);return{init:i.init||Fv,update:function(s,o){o[r]=i.next(s)}}}const AN={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=AN.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||st("ntile num must be greater than zero.");const n=AN.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||st("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Gnn(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Gnn(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const Ynn=Object.keys(AN);function Y9e(e){const t=Lt(e.ops),n=Lt(e.fields),r=Lt(e.params),i=Lt(e.aggregate_params),s=Lt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){Lt(qu(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],b=i[m]||null,w=lo(g),S=x9e(p,w,s[m]);if(h(g),o.push(S),vn(AN,p))a.push(Wnn(p,g,y,S));else{if(g==null&&p!=="count"&&st("Null aggregate field specified."),p==="count"){c.push(S);return}d=!1;let E=l[w];E||(E=l[w]=[],E.field=g,f.push(E)),E.push(S9e(p,b,S))}}),(c.length||f.length)&&(this.cell=Knn(f,c,d)),this.inputs=Object.keys(u)}const K9e=Y9e.prototype;K9e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};K9e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function Knn(e,t,n){e=e.map(u=>C9e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new Hoe;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function pae(e){Qe.call(this,{},e),this._mlen=0,this._mods=[]}pae.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Ynn.concat(cO)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Ot(pae,Qe,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=ox(e.sort),i=EX(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new Y9e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)Xnn(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=A9e(mn),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Xnn(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?KE(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||tl(-1)};t.init();for(let f=0;f<u;++f)Qnn(c,o,f,u),s&&Jnn(c,l),t.update(c,a[f])}function Qnn(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Jnn(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const Znn=Object.freeze(Object.defineProperty({__proto__:null,aggregate:tb,bin:qoe,collect:Woe,compare:D9e,countpattern:Goe,cross:Yoe,density:Koe,dotbin:Qoe,expression:P9e,extent:Joe,facet:dj,field:O9e,filter:eae,flatten:tae,fold:nae,formula:rae,generate:M9e,impute:iae,joinaggregate:sae,kde:oae,key:$9e,load:F9e,lookup:aae,multiextent:L9e,multivalues:B9e,params:j9e,pivot:uae,prefacet:U9e,project:lae,proxy:z9e,quantile:cae,relay:V9e,sample:fae,sequence:dae,sieve:H9e,subflow:Zoe,timeunit:hae,tupleindex:W9e,values:G9e,window:pae},Symbol.toStringTag,{value:"Module"}));function x1(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const ern=()=>typeof Image<"u"?Image:null;function mae(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const trn="identity",JC="linear",my="log",fO="pow",dO="sqrt",hj="symlog",pE="time",mE="utc",$m="sequential",DA="diverging",ZC="quantile",pj="quantize",mj="threshold",gae="ordinal",xX="point",X9e="band",yae="bin-ordinal",va="continuous",hO="discrete",pO="discretizing",th="interpolating",vae="temporal";function nrn(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function rrn(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function bae(){const e=kb().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=mae(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Ec(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,b,w;if(!(m!==m||g!==g)&&(g<m&&(w=m,m=g,g=w),!(g<h[0]||m>r[1-d])))return y=Math.max(0,P1(h,m)-1),b=m===g?y:P1(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(w=y,y=p-b,b=p-w),y>b?void 0:t().slice(y,b+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return bae().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function Q9e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return Q9e(t())},e}function irn(){return Q9e(bae().paddingInner(1))}var srn=Array.prototype.map;function orn(e){return srn.call(e,zu)}const arn=Array.prototype.slice;function J9e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(P1(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=orn(r),n):e.slice()},n.range=function(r){return arguments.length?(t=arn.call(r),n):t.slice()},n.tickFormat=function(r,i){return FPe(e[0],Yr(e),r??10,i)},n.copy=function(){return J9e().domain(n.domain()).range(n.range())},n}const s5=new Map,Z9e=Symbol("vega_scale");function eje(e){return e[Z9e]=!0,e}function urn(e){return e&&e[Z9e]===!0}function lrn(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?nrn(s):s.invertExtent?rrn(s):void 0),s.type=e,eje(s)};return r.metadata=mp(Lt(n)),r}function pi(e,t,n){return arguments.length>1?(s5.set(e,lrn(e,t,n)),this):tje(e)?s5.get(e):void 0}pi(trn,LPe);pi(JC,Lc,va);pi(my,jPe,[va,my]);pi(fO,Hte,va);pi(dO,IDt,va);pi(hj,UPe,va);pi(pE,Yte,[va,vae]);pi(mE,HIt,[va,vae]);pi($m,Kte,[va,th]);pi(`${$m}-${JC}`,Kte,[va,th]);pi(`${$m}-${my}`,eOe,[va,th,my]);pi(`${$m}-${fO}`,Xte,[va,th]);pi(`${$m}-${dO}`,qIt,[va,th]);pi(`${$m}-${hj}`,tOe,[va,th]);pi(`${DA}-${JC}`,nOe,[va,th]);pi(`${DA}-${my}`,rOe,[va,th,my]);pi(`${DA}-${fO}`,Qte,[va,th]);pi(`${DA}-${dO}`,WIt,[va,th]);pi(`${DA}-${hj}`,iOe,[va,th]);pi(ZC,zPe,[pO,ZC]);pi(pj,VPe,pO);pi(mj,HPe,pO);pi(yae,J9e,[hO,pO]);pi(gae,kb,hO);pi(X9e,bae,hO);pi(xX,irn,hO);function tje(e){return s5.has(e)}function ux(e,t){const n=s5.get(e);return n&&n.metadata[t]}function wae(e){return ux(e,va)}function e2(e){return ux(e,hO)}function SX(e){return ux(e,pO)}function nje(e){return ux(e,my)}function crn(e){return ux(e,vae)}function rje(e){return ux(e,th)}function ije(e){return ux(e,ZC)}const frn=["clamp","base","constant","exponent"];function sje(e,t){const n=t[0],r=Yr(t)-n;return function(i){return e(n+i*r)}}function gj(e,t,n){return xte(_ae(t||"rgb",n),e)}function oje(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function aje(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?tl(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=pi(s)().domain([t,n]).range([0,1]),frn.forEach(a=>e[a]?o[a](e[a]()):0),o)}function _ae(e,t){const n=CSt[drn(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function drn(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const hrn={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},prn={accent:YIt,category10:GIt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:KIt,observable10:XIt,paired:QIt,pastel1:JIt,pastel2:ZIt,set1:ekt,set2:tkt,set3:nkt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function uje(e){if(at(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function lje(e,t){for(const n in e)Eae(n,t(e[n]))}const b_e={};lje(prn,uje);lje(hrn,e=>gj(uje(e)));function Eae(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(b_e[e]=t,this):b_e[e]}const DF="symbol",mrn="discrete",grn="gradient",yrn=e=>at(e)?e.map(t=>String(t)):String(e),vrn=(e,t)=>e[1]-t[1],brn=(e,t)=>t[1]-e[1];function xae(e,t,n){let r;return li(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(aO(e.domain())/n||1)+1))),jt(t)&&(r=t.step,t=t.interval),Bt(t)&&(t=e.type===pE?TA(t):e.type==mE?CA(t):st("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function cje(e,t,n){let r=e.range(),i=r[0],s=Yr(r),o=vrn;if(i>s&&(r=s,s=i,i=r,o=brn),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Yr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function Sae(e,t){return e.bins?cje(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function fje(e,t,n,r,i,s){const o=t.type;let a=yrn;if(o===pE||i===pE)a=e.timeFormat(r);else if(o===mE||i===mE)a=e.utcFormat(r);else if(nje(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=dje(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function dje(e,t,n){const r=Sae(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const TX={[ZC]:"quantiles",[pj]:"thresholds",[mj]:"domain"},hje={[ZC]:"quantiles",[pj]:"domain"};function pje(e,t){return e.bins?Ern(e.bins):e.type===my?dje(e,t,!0):TX[e.type]?_rn(e[TX[e.type]]()):Sae(e,t)}function wrn(e,t,n){const r=t[hje[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function _rn(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Ern(e){const t=e.slice(0,-1);return t.max=Yr(e),t}const xrn=e=>TX[e.type]||e.bins;function mje(e,t,n,r,i,s,o){const a=hje[t.type]&&s!==pE&&s!==mE?wrn(e,t,i):fje(e,t,n,i,s,o);return r===DF&&xrn(t)?Srn(a):r===mrn?Trn(a):Crn(a)}const Srn=e=>(t,n,r)=>{const i=w_e(r[n+1],w_e(r.max,1/0)),s=__e(t,e),o=__e(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},w_e=(e,t)=>e??t,Trn=e=>(t,n)=>n?e(t):null,Crn=e=>t=>e(t),__e=(e,t)=>Number.isFinite(e)?t(e):null;function Arn(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Yr(t),s=i-r;if(e.type===mj){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function Drn(e,t,n,r){const i=r||t.type;return Bt(n)&&crn(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===pE?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===mE?e.utcFormat("%A, %d %B %Y, %X UTC"):mje(e,t,5,null,n,r,!0)}function gje(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Drn(e,t,n.format,n.formatType);if(SX(t.type)){const s=pje(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(e2(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Yr(s))}`}}let yje=0;function Irn(){yje=0}const o5="p_";function Tae(e){return e&&e.gradient}function vje(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?o5:"";return i||(i=e.id="gradient_"+yje++,r==="radial"?(e.x1=zp(e.x1,.5),e.y1=zp(e.y1,.5),e.r1=zp(e.r1,0),e.x2=zp(e.x2,.5),e.y2=zp(e.y2,.5),e.r2=zp(e.r2,.5),s=o5):(e.x1=zp(e.x1,0),e.y1=zp(e.y1,0),e.x2=zp(e.x2,1),e.y2=zp(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function zp(e,t){return e??t}function bje(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const E_e={basis:{curve:gkt},"basis-closed":{curve:ykt},"basis-open":{curve:vkt},bundle:{curve:bkt,tension:"beta",value:.85},cardinal:{curve:wkt,tension:"tension",value:0},"cardinal-open":{curve:Ekt,tension:"tension",value:0},"cardinal-closed":{curve:_kt,tension:"tension",value:0},"catmull-rom":{curve:xkt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Skt,tension:"alpha",value:.5},"catmull-rom-open":{curve:Tkt,tension:"alpha",value:.5},linear:{curve:Jte},"linear-closed":{curve:Ckt},monotone:{horizontal:Dkt,vertical:Akt},natural:{curve:Ikt},step:{curve:kkt},"step-after":{curve:Nkt},"step-before":{curve:Rkt}};function Cae(e,t,n){var r=vn(E_e,e)&&E_e[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const krn={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Rrn=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Nrn=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Prn=/^((\s+,?\s*)|(,\s*))/,Orn=/^[01]/;function t2(e){const t=[];return(e.match(Rrn)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=krn[s],a=Mrn(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function Mrn(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?Orn:Nrn,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(Prn);u!==null&&(i+=u[0].length)}return r}const nb=Math.PI/180,$rn=1e-14,t_=Math.PI/2,mm=Math.PI*2,aS=Math.sqrt(3)/2;var qH={},WH={},wje=[].join;function Frn(e,t,n,r,i,s,o,a,u){const l=wje.call(arguments);if(qH[l])return qH[l];const c=o*nb,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,b=-f/r,w=d/r,S=g*a+y*u,E=b*a+w*u,T=g*e+y*t,C=b*e+w*t;let I=1/((T-S)*(T-S)+(C-E)*(C-E))-.25;I<0&&(I=0);let k=Math.sqrt(I);s==i&&(k=-k);const N=.5*(S+T)-k*(C-E),F=.5*(E+C)+k*(T-S),M=Math.atan2(E-F,S-N);let j=Math.atan2(C-F,T-N)-M;j<0&&s===1?j+=mm:j>0&&s===0&&(j-=mm);const B=Math.ceil(Math.abs(j/(t_+.001))),z=[];for(let V=0;V<B;++V){const G=M+V*j/B,$=M+(V+1)*j/B;z[V]=[N,F,G,$,n,r,f,d]}return qH[l]=z}function Lrn(e){const t=wje.call(e);if(WH[t])return WH[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),b=.5*(s-i),w=Math.sin(b*.5),S=8/3*w*w/Math.sin(b),E=n+p-S*m,T=r+m+S*p,C=n+g,A=r+y,I=C+S*y,k=A-S*g;return WH[t]=[c*E+f*T,d*E+h*T,c*I+f*k,d*I+h*k,c*C+f*A,d*C+h*A]}const cd=["l",0,0,0,0,0,0,0];function Brn(e,t,n){const r=cd[0]=e[0];if(r==="a"||r==="A")cd[1]=t*e[1],cd[2]=n*e[2],cd[3]=e[3],cd[4]=e[4],cd[5]=e[5],cd[6]=t*e[6],cd[7]=n*e[7];else if(r==="h"||r==="H")cd[1]=t*e[1];else if(r==="v"||r==="V")cd[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)cd[i]=(i%2==1?t:n)*e[i];return cd}function DN(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var b=0,w=t.length;b<w;++b){switch(o=t[b],(i!==1||s!==1)&&(o=Brn(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":x_e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":x_e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function x_e(e,t,n,r){const i=Frn(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=Lrn(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const S_e=.5773502691896257,T_e={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,mm)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=aS*n,i=r-n*S_e,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=aS*n,i=r-n*S_e;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=aS*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=aS*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=aS*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=aS*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function _je(e){return vn(T_e,e)?T_e[e]:jrn(e)}var GH={};function jrn(e){if(!vn(GH,e)){const t=t2(e);GH[e]={draw:function(n,r){DN(n,t,0,0,Math.sqrt(r)/2)}}}return GH[e]}const uv=.448084975506;function Urn(e){return e.x}function zrn(e){return e.y}function Vrn(e){return e.width}function Hrn(e){return e.height}function Hg(e){return typeof e=="function"?e:()=>+e}function i$(e,t,n){return Math.max(t,Math.min(e,n))}function Eje(){var e=Urn,t=zrn,n=Vrn,r=Hrn,i=Hg(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),b=Math.min(g,y)/2,w=i$(+i.call(this,c),0,b),S=i$(+s.call(this,c),0,b),E=i$(+o.call(this,c),0,b),T=i$(+a.call(this,c),0,b);if(u||(u=h=bB()),w<=0&&S<=0&&E<=0&&T<=0)u.rect(p,m,g,y);else{var C=p+g,A=m+y;u.moveTo(p+w,m),u.lineTo(C-S,m),u.bezierCurveTo(C-uv*S,m,C,m+uv*S,C,m+S),u.lineTo(C,A-T),u.bezierCurveTo(C,A-uv*T,C-uv*T,A,C-T,A),u.lineTo(p+E,A),u.bezierCurveTo(p+uv*E,A,p,A-uv*E,p,A-E),u.lineTo(p,m+w),u.bezierCurveTo(p,m+uv*w,p+uv*w,m,p+w,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Hg(c),l):e},l.y=function(c){return arguments.length?(t=Hg(c),l):t},l.width=function(c){return arguments.length?(n=Hg(c),l):n},l.height=function(c){return arguments.length?(r=Hg(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Hg(c),s=f!=null?Hg(f):i,a=d!=null?Hg(d):i,o=h!=null?Hg(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function xje(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),b=(m/=y)*u,w=(g/=y)*u,S=Math.atan2(g,m);i.moveTo(o-b,a-w),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,S-Math.PI,S),i.lineTo(o+b,a+w),i.arc(o,a,u,S,S+Math.PI)}else i.arc(f,d,p,0,mm);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=bB()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function mO(e,t){return e??t}const gO=e=>e.x||0,yO=e=>e.y||0,qrn=e=>e.width||0,Wrn=e=>e.height||0,Grn=e=>(e.x||0)+(e.width||0),Yrn=e=>(e.y||0)+(e.height||0),Krn=e=>e.startAngle||0,Xrn=e=>e.endAngle||0,Qrn=e=>e.padAngle||0,Jrn=e=>e.innerRadius||0,Zrn=e=>e.outerRadius||0,ein=e=>e.cornerRadius||0,tin=e=>mO(e.cornerRadiusTopLeft,e.cornerRadius)||0,nin=e=>mO(e.cornerRadiusTopRight,e.cornerRadius)||0,rin=e=>mO(e.cornerRadiusBottomRight,e.cornerRadius)||0,iin=e=>mO(e.cornerRadiusBottomLeft,e.cornerRadius)||0,sin=e=>mO(e.size,64),oin=e=>e.size||1,yj=e=>e.defined!==!1,ain=e=>_je(e.shape||"circle"),uin=yY().startAngle(Krn).endAngle(Xrn).padAngle(Qrn).innerRadius(Jrn).outerRadius(Zrn).cornerRadius(ein),lin=uOe().x(gO).y1(yO).y0(Yrn).defined(yj),cin=uOe().y(yO).x1(gO).x0(Grn).defined(yj),fin=Zte().x(gO).y(yO).defined(yj),din=Eje().x(gO).y(yO).width(qrn).height(Wrn).cornerRadius(tin,nin,rin,iin),hin=mkt().type(ain).size(sin),pin=xje().x(gO).y(yO).defined(yj).size(oin);function Aae(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function min(e,t){return uin.context(e)(t)}function gin(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?cin:lin).curve(Cae(r,n.orient,n.tension)).context(e)(t)}function yin(e,t){const n=t[0],r=n.interpolate||"linear";return fin.curve(Cae(r,n.orient,n.tension)).context(e)(t)}function IA(e,t,n,r){return din.context(e)(t,n,r)}function vin(e,t){return(t.mark.shape||t.shape).context(e)(t)}function bin(e,t){return hin.context(e)(t)}function win(e,t){return pin.context(e)(t)}var Sje=1;function Tje(){Sje=1}function Dae(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+Sje++),o=i.clipping[s]||(i.clipping[s]={id:s});return cr(r)?o.path=r(null):Aae(n)?o.path=IA(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function qo(e){this.clear(),e&&this.union(e)}qo.prototype={clone(){return new qo(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function vj(e){this.mark=e,this.bounds=this.bounds||new qo}function bj(e){vj.call(this,e),this.items=this.items||[]}Ot(bj,vj);class Cje{constructor(t){this._pending=0,this._loader=t||tj()}pending(){return this._pending}sanitizeURL(t){const n=this;return C_e(n),n._loader.sanitize(t,{context:"href"}).then(r=>(HD(n),r)).catch(()=>(HD(n),null))}loadImage(t){const n=this,r=ern();return C_e(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=vn(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>HD(n),o.onerror=()=>HD(n),o.src=s,o}).catch(i=>(HD(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function C_e(e){e._pending+=1}function HD(e){e._pending-=1}function $y(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?_in(t,r):0))}return e}function _in(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Ein=mm-1e-8;let wj,IF,kF,S_,CX,RF,AX,DX;const Wv=(e,t)=>wj.add(e,t),NF=(e,t)=>Wv(IF=e,kF=t),A_e=e=>Wv(e,wj.y1),D_e=e=>Wv(wj.x1,e),n_=(e,t)=>CX*e+AX*t,r_=(e,t)=>RF*e+DX*t,YH=(e,t)=>Wv(n_(e,t),r_(e,t)),KH=(e,t)=>NF(n_(e,t),r_(e,t));function vO(e,t){return wj=e,t?(S_=t*nb,CX=DX=Math.cos(S_),RF=Math.sin(S_),AX=-RF):(CX=DX=1,S_=RF=AX=0),xin}const xin={beginPath(){},closePath(){},moveTo:KH,lineTo:KH,rect(e,t,n,r){S_?(YH(e+n,t),YH(e+n,t+r),YH(e,t+r),KH(e,t)):(Wv(e+n,t+r),NF(e,t))},quadraticCurveTo(e,t,n,r){const i=n_(e,t),s=r_(e,t),o=n_(n,r),a=r_(n,r);I_e(IF,i,o,A_e),I_e(kF,s,a,D_e),NF(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=n_(e,t),a=r_(e,t),u=n_(n,r),l=r_(n,r),c=n_(i,s),f=r_(i,s);k_e(IF,o,u,c,A_e),k_e(kF,a,l,f,D_e),NF(c,f)},arc(e,t,n,r,i,s){if(r+=S_,i+=S_,IF=n*Math.cos(i)+e,kF=n*Math.sin(i)+t,Math.abs(i-r)>Ein)Wv(e-n,t-n),Wv(e+n,t+n);else{const o=l=>Wv(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%mm,r<0&&(r+=mm),i=i%mm,i<0&&(i+=mm),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=mm,a=r-r%t_,u=0;u<4&&a>i;++u,a-=t_)o(a);else for(a=r-r%t_+t_,u=0;u<4&&a<i;++u,a=a+t_)o(a)}}};function I_e(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function k_e(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>$rn?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(R_e(u,e,t,n,r)),0<l&&l<1&&i(R_e(l,e,t,n,r))}function R_e(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var S1=(S1=x1(1,1))?S1.getContext("2d"):null;const IX=new qo;function Iae(e){return function(t,n){if(!S1)return!0;e(S1,t),IX.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=IX;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(S1.isPointInPath(u,a))return!0;return!1}}function kae(e,t){return t.contains(e.x||0,e.y||0)}function Aje(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(IX.set(n,r,n+i,r+s))}function Dje(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return rT(t,n,r,i,s)}function rT(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function n2(e,t){e.globalCompositeOperation=t.blend||"source-over"}function xh(e,t){return e??t}function N_e(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function Sin(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+xh(t.x1,.5)*r,n.y1+xh(t.y1,.5)*i,Math.max(r,i)*xh(t.r1,0),n.x1+xh(t.x2,.5)*r,n.y1+xh(t.y2,.5)*i,Math.max(r,i)*xh(t.r2,.5));else{const o=xh(t.x1,0),a=xh(t.y1,0),u=xh(t.x2,1),l=xh(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=x1(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=N_e(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return N_e(s,t.stops)}function Ije(e,t,n){return Tae(n)?Sin(e,n,t.bounds):n}function a5(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=Ije(e,t,t.fill),!0):!1}var Tin=[];function r2(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=Ije(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Tin),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Cin(e,t){return e.zindex-t.zindex||e.index-t.index}function Rae(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(Cin)}function yp(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=Rae(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function u5(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=Rae(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function Nae(e){return function(t,n,r){yp(n,i=>{(!r||r.intersects(i.bounds))&&kje(e,t,i,i)})}}function Ain(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&kje(e,t,n.items[0],n.items)}}function kje(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(n2(t,n),n.fill&&a5(t,n,i)&&t.fill(),n.stroke&&r2(t,n,i)&&t.stroke()))}function _j(e){return e=e||zd,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,u5(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function bO(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Pae(e){return _j(bO(e))}function M_(e,t){return"translate("+e+","+t+")"}function Oae(e){return"rotate("+e+")"}function Din(e,t){return"scale("+e+","+t+")"}function Rje(e){return M_(e.x||0,e.y||0)}function Iin(e){return M_(e.x||0,e.y||0)+(e.angle?" "+Oae(e.angle):"")}function kin(e){return M_(e.x||0,e.y||0)+(e.angle?" "+Oae(e.angle):"")+(e.scaleX||e.scaleY?" "+Din(e.scaleX||1,e.scaleY||1):"")}function Mae(e,t,n){function r(o,a){o("transform",Iin(a)),o("d",t(null,a))}function i(o,a){return t(vO(o,a.angle),a),$y(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=nb),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:Nae(s),pick:Pae(s),isect:n||Iae(s)}}var Rin=Mae("arc",min);function Nin(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function Pin(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function Oin(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function $ae(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(vO(u),c),$y(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=bO(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:Ain(s),pick:a,isect:kae,tip:n}}var Min=$ae("area",gin,Nin);function $in(e,t){var n=t.clip;e.save(),cr(n)?(e.beginPath(),n(e),e.clip()):Nje(e,t.group)}function Nje(e,t){e.beginPath(),Aae(t)?IA(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function Pje(e){const t=xh(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Fin(e,t){e("transform",Rje(t))}function Oje(e,t){const n=Pje(t);e("d",IA(null,t,n,n))}function Lin(e,t){e("class","background"),e("aria-hidden",!0),Oje(e,t)}function Bin(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?Oje(e,t):e("d","")}function jin(e,t,n){const r=t.clip?Dae(n,t,t):null;e("clip-path",r)}function Uin(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),$y(e,t),e.translate(t.x||0,t.y||0)}function IN(e,t,n,r){const i=Pje(t);e.beginPath(),IA(e,t,(n||0)+i,(r||0)+i)}const zin=bO(IN),Vin=bO(IN,!1),Hin=bO(IN,!0);function qin(e,t,n,r){yp(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(IN(e,i,s,o),n2(e,i),i.fill&&a5(e,i,u)&&e.fill(),i.stroke&&!a&&r2(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&Nje(e,i),n&&n.translate(-s,-o),yp(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(IN(e,i,s,o),n2(e,i),r2(e,i,u)&&e.stroke())})}function Win(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return u5(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&Aae(u)&&!Hin(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&Vin(e,u,o,a)?(e.restore(),u):(l=u5(u,b=>Gin(b,c,f)?this.pick(b,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&zin(e,u,o,a)&&(l=u),e.restore(),l||null)})}function Gin(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Yin={type:"group",tag:"g",nested:!1,attr:Fin,bound:Uin,draw:qin,pick:Win,isect:Aje,content:jin,background:Lin,foreground:Bin},kN={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Fae(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Lae(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Bae(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function Ej(e,t){return e==="center"?t/2:e==="right"?t:0}function xj(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Kin(e,t,n){const r=Fae(t,n),i=Lae(t,r),s=Bae(t,r),o=(t.x||0)-Ej(t.align,i),a=(t.y||0)-xj(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,kN["xmlns:xlink"],"xlink:href"),e("transform",M_(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Xin(e,t){const n=t.image,r=Lae(t,n),i=Bae(t,n),s=(t.x||0)-Ej(t.align,r),o=(t.y||0)-xj(t.baseline,i);return e.set(s,o,s+r,o+i)}function Qin(e,t,n){yp(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Fae(r,this);let s=Lae(r,i),o=Bae(r,i);if(s===0||o===0)return;let a=(r.x||0)-Ej(r.align,s),u=(r.y||0)-xj(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(n2(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var Jin={type:"image",tag:"image",nested:!1,attr:Kin,bound:Xin,draw:Qin,pick:_j(),isect:zd,get:Fae,xOffset:Ej,yOffset:xj},Zin=$ae("line",yin,Pin);function esn(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",kin(t)),e("d",t.path)}function PF(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*nb,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=t2(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),DN(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):DN(e,u,r,i,s,o)}function tsn(e,t){return PF(vO(e,t.angle),t)?e.set(0,0,0,0):$y(e,t,!0)}var nsn={type:"path",tag:"path",nested:!1,attr:esn,bound:tsn,draw:Nae(PF),pick:Pae(PF),isect:Iae(PF)};function rsn(e,t){e("d",IA(null,t))}function isn(e,t){var n,r;return $y(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function P_e(e,t){e.beginPath(),IA(e,t)}var ssn={type:"rect",tag:"path",nested:!1,attr:rsn,bound:isn,draw:Nae(P_e),pick:Pae(P_e),isect:Aje};function osn(e,t){e("transform",Rje(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function asn(e,t){var n,r;return $y(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function Mje(e,t,n){var r,i,s,o;return t.stroke&&r2(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function usn(e,t,n){yp(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&Mje(e,r,i)&&(n2(e,r),e.stroke())}})}function lsn(e,t,n,r){return e.isPointInStroke?Mje(e,t,1)&&e.isPointInStroke(n,r):!1}var csn={type:"rule",tag:"line",nested:!1,attr:osn,bound:asn,draw:usn,pick:_j(lsn),isect:Dje},fsn=Mae("shape",vin),dsn=Mae("symbol",bin,kae);const O_e=bBe();var Sf={height:vg,measureWidth:jae,estimateWidth:l5,width:l5,canvas:$je};$je(!0);function $je(e){Sf.width=e&&S1?jae:l5}function l5(e,t){return Fje(ib(e,t),vg(e))}function Fje(e,t){return~~(.8*e.length*t)}function jae(e,t){return vg(e)<=0||!(t=ib(e,t))?0:Lje(t,Sj(e))}function Lje(e,t){const n=`(${t}) ${e}`;let r=O_e.get(n);return r===void 0&&(S1.font=t,r=S1.measureText(e).width,O_e.set(n,r)),r}function vg(e){return e.fontSize!=null?+e.fontSize||0:11}function rb(e){return e.lineHeight!=null?e.lineHeight:vg(e)+2}function hsn(e){return at(e)?e.length>1?e:e[0]:e}function wO(e){return hsn(e.lineBreak&&e.text&&!at(e.text)?e.text.split(e.lineBreak):e.text)}function Uae(e){const t=wO(e);return(at(t)?t.length-1:0)*rb(e)}function ib(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?msn(e,n):n}function psn(e){if(Sf.width===jae){const t=Sj(e);return n=>Lje(n,t)}else if(Sf.width===l5){const t=vg(e);return n=>Fje(n,t)}else return t=>Sf.width(e,t)}function msn(e,t){var n=+e.limit,r=psn(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function _O(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Sj(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+vg(e)+"px "+_O(e,t)}function zae(e){var t=e.baseline,n=vg(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*rb(e):t==="line-bottom"?.29*n-.5*rb(e):0)}const gsn={left:"start",center:"middle",right:"end"},Hk=new qo;function Tj(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-t_,t+=r*Math.cos(i),n+=r*Math.sin(i)),Hk.x1=t,Hk.y1=n,Hk}function ysn(e,t){var n=t.dx||0,r=(t.dy||0)+zae(t),i=Tj(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",gsn[t.align]||"start"),a?(u=M_(s,o)+" "+Oae(a),(n||r)&&(u+=" "+M_(n,r))):u=M_(s+n,o+r),e("transform",u)}function Vae(e,t,n){var r=Sf.height(t),i=t.align,s=Tj(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+zae(t)-Math.round(.8*r),c=wO(t),f;if(at(c)?(r+=rb(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Sf.width(t,h)),0)):f=Sf.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*nb,o,a);else if(n===2)return e.rotatedPoints(t.angle*nb,o,a);return e}function vsn(e,t,n){yp(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=Sj(r),e.textAlign=r.align||"left",s=Tj(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*nb),o=a=0),o+=r.dx||0,a+=(r.dy||0)+zae(r),c=wO(r),n2(e,r),at(c))for(l=rb(r),u=0;u<c.length;++u)f=ib(r,c[u]),r.fill&&a5(e,r,i)&&e.fillText(f,o,a),r.stroke&&r2(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=ib(r,c),r.fill&&a5(e,r,i)&&e.fillText(f,o,a),r.stroke&&r2(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function bsn(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=Tj(t),a=o.x1,u=o.y1,l=Vae(Hk,t,1),c=-t.angle*nb,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function wsn(e,t){const n=Vae(Hk,e,2);return rT(t,n[0],n[1],n[2],n[3])||rT(t,n[0],n[1],n[4],n[5])||rT(t,n[4],n[5],n[6],n[7])||rT(t,n[2],n[3],n[6],n[7])}var _sn={type:"text",tag:"text",nested:!1,attr:ysn,bound:Vae,draw:vsn,pick:_j(bsn),isect:wsn},Esn=$ae("trail",win,Oin),Bf={arc:Rin,area:Min,group:Yin,image:Jin,line:Zin,path:nsn,rect:ssn,rule:csn,shape:fsn,symbol:dsn,text:_sn,trail:Esn};function kX(e,t,n){var r=Bf[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new qo),e,n)}var M_e={mark:null};function Bje(e,t,n){var r=Bf[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(M_e.mark=e,l=M_e),c=kX(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new qo,o)for(a=0,u=s.length;a<u;++a)t.union(kX(s[a],i,n));return e.bounds=t}const xsn=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function jje(e,t){return JSON.stringify(e,xsn,t)}function Uje(e){const t=typeof e=="string"?JSON.parse(e):e;return zje(t)}function zje(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&zje(n[i]);return t&&Bje(e),e}class Vje{constructor(t){arguments.length?this.root=Uje(t):(this.root=$_e({marktype:"group",name:"root",role:"frame"}),this.root.items=[new bj(this.root)])}toJSON(t){return jje(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=$_e(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function $_e(e,t){const n={bounds:new qo,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Gv(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Hae(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function ua(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Gv(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function xd(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function Hje(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Cj(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Ssn(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Bf[i.marktype]).tip){for(o=Cj(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let qae=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||tj(),this._tooltip=n||Tsn}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=Gv(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=Ssn(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function Tsn(e,t,n,r){e.element().setAttribute("title",r||"")}class EO{constructor(t){this._el=null,this._bgcolor=null,this._loader=new Cje(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const Csn="keydown",Asn="keypress",Dsn="keyup",qje="dragenter",OF="dragleave",Wje="dragover",RX="pointerdown",Isn="pointerup",c5="pointermove",MF="pointerout",Gje="pointerover",NX="mousedown",ksn="mouseup",Yje="mousemove",f5="mouseout",Kje="mouseover",d5="click",Rsn="dblclick",Nsn="wheel",Xje="mousewheel",h5="touchstart",p5="touchmove",m5="touchend",Psn=[Csn,Asn,Dsn,qje,OF,Wje,RX,Isn,c5,MF,Gje,NX,ksn,Yje,f5,Kje,d5,Rsn,Nsn,Xje,h5,p5,m5],PX=c5,qk=f5,OX=d5;class xO extends qae{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Psn,this.pointermove=L_e([c5,Yje],[Gje,Kje],[MF,f5]),this.dragover=L_e([Wje],[qje],[OF]),this.pointerout=B_e([MF,f5]),this.dragleave=B_e([OF])}initialize(t,n,r){return this._canvas=t&&Hae(t,"canvas"),[d5,NX,RX,c5,MF,OF].forEach(i=>F_e(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(Xje,t)}pointerdown(t){this._down=this._active,this.fire(RX,t)}mousedown(t){this._down=this._active,this.fire(NX,t)}click(t){this._down===this._active&&(this.fire(d5,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(h5,t,!0)}touchmove(t){this.fire(p5,t,!0)}touchend(t){this.fire(m5,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===OX&&i&&i.href?this.handleHref(n,i,i.href):(t===PX||t===qk)&&this.handleTooltip(n,i,t!==qk),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(F_e(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=Cj(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Bf[t.marktype].pick.call(this,o,t,n,r,i,s)}}const Osn=e=>e===h5||e===p5||e===m5?[h5,p5,m5]:[e];function F_e(e,t){Osn(t).forEach(n=>Msn(e,n))}function Msn(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function qI(e,t,n){t.forEach(r=>e.fire(r,n))}function L_e(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?qI(this,e,r):((!i||!i.exit)&&qI(this,n,r),this._active=s,qI(this,t,r),qI(this,e,r))}}function B_e(e){return function(t){qI(this,e,t),this._active=null}}function $sn(){return typeof window<"u"&&window.devicePixelRatio||1}function Fsn(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?$sn():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class g5 extends EO{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new qo,this._tempb=new qo}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:x1(1,1,this._options.type),t&&this._canvas&&(xd(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)Fsn(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||st("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=Lsn(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):Bsn(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Bf[n.marktype];n.clip&&$in(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const Lsn=(e,t,n)=>new qo().set(0,0,t,n).translate(-e[0],-e[1]);function Bsn(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class Qje extends qae{constructor(t,n){super(t,n);const r=this;r._hrefHandler=XH(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=XH(r,(i,s)=>{r.handleTooltip(i,s,i.type!==qk)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(OX,this._hrefHandler),i.removeEventListener(PX,this._tooltipHandler),i.removeEventListener(qk,this._tooltipHandler)),this._svg=i=t&&Hae(t,"svg"),i&&(i.addEventListener(OX,this._hrefHandler),i.addEventListener(PX,this._tooltipHandler),i.addEventListener(qk,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:XH(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const XH=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},Jje="aria-hidden",Wae="aria-label",Gae="role",Yae="aria-roledescription",Zje="graphics-object",Kae="graphics-symbol",e7e=(e,t,n)=>({[Gae]:e,[Yae]:t,[Wae]:n||void 0}),jsn=mp(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),j_e={axis:{desc:"axis",caption:Vsn},legend:{desc:"legend",caption:Hsn},"title-text":{desc:"title",caption:e=>`Title text '${z_e(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${z_e(e)}'`}},U_e={ariaRole:Gae,ariaRoleDescription:Yae,description:Wae};function t7e(e,t){const n=t.aria===!1;if(e(Jje,n||void 0),n||t.description==null)for(const r in U_e)e(U_e[r],void 0);else{const r=t.mark.marktype;e(Wae,t.description),e(Gae,t.ariaRole||(r==="group"?Zje:Kae)),e(Yae,t.ariaRoleDescription||`${r} mark`)}}function n7e(e){return e.aria===!1?{[Jje]:!0}:jsn[e.role]?null:j_e[e.role]?zsn(e,j_e[e.role]):Usn(e)}function Usn(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return e7e(n?Zje:Kae,`${t} mark container`,e.description)}function zsn(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return e7e(t.role||Kae,t.desc,n.description||r(n))}catch{return null}}function z_e(e){return Lt(e.text).join(" ")}function Vsn(e){const t=e.datum,n=e.orient,r=t.title?r7e(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${e2(a)?"discrete":a} scale with ${gje(o,s,e)}`}function Hsn(e){const t=e.datum,n=t.title?r7e(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return Wsn(r)+(n?` titled '${n}'`:"")+` for ${qsn(s)} with ${gje(u,a,e)}`}function r7e(e){try{return Lt(Yr(e.items).items[0].text).join(" ")}catch{return null}}function qsn(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Yr(e)}function Wsn(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const i7e=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Gsn=e=>i7e(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Xae(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${Gsn(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=i7e(u),a),toString:()=>e};return a}const s7e=e=>o7e(Xae(),e)+"";function o7e(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):o7e(e,r)}return e.close()}const y5={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},v5={blend:"mix-blend-mode"},a7e={fill:"none","stroke-miterlimit":10},qD=0,V_e="http://www.w3.org/2000/xmlns/",sa=kN.xmlns;class Qae extends EO{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=ua(t,0,"svg",sa),this._svg.setAttributeNS(V_e,"xmlns",sa),this._svg.setAttributeNS(V_e,"xmlns:xlink",kN["xmlns:xlink"]),this._svg.setAttribute("version",kN.version),this._svg.setAttribute("class","marks"),xd(t,1),this._root=ua(this._svg,qD,"g",sa),Yv(this._root,a7e),xd(this._svg,qD+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Yv(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=ua(t,qD,"rect",sa),Yv(r,{width:this._width,height:this._height,fill:n}));const i=s7e(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),xd(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Bf[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,H_e(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,H_e(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Bf[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=q_e(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return xd(c,0),n._svg;c.setAttribute("class",Hje(n));const f=n7e(n);for(const m in f)yl(c,m,f[m]);l||yl(c,"pointer-events",u),yl(c,"clip-path",n.clip?Dae(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=q_e(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&Xsn(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):yp(n,p),xd(c,h),c}_update(t,n,r){C0=n,Ou=n.__values__,t7e(Wk,r),t.attr(Wk,r,this);const i=Jsn[t.type];i&&i.call(this,t,n,r),C0&&this.style(C0,r)}style(t,n){if(n!=null){for(const r in y5){let i=r==="font"?_O(n):n[r];if(i===Ou[r])continue;const s=y5[r];i==null?t.removeAttribute(s):(Tae(i)&&(i=vje(i,this._defs.gradient,u7e())),t.setAttribute(s,i+"")),Ou[r]=i}for(const r in v5)$F(t,v5[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=ua(t,qD+1,"defs",sa)),i=Ysn(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=ua(t,qD+1,"defs",sa)),i=Ksn(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):xd(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function H_e(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Ysn(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=ua(e,n++,"pattern",sa);Yv(o,{id:o5+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=ua(o,0,"rect",sa),Yv(o,{width:1,height:1,fill:`url(${u7e()}#${t.id})`}),e=ua(e,n++,"radialGradient",sa),Yv(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=ua(e,n++,"linearGradient",sa),Yv(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=ua(e,r,"stop",sa),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return xd(e,r),n}function Ksn(e,t,n){let r;return e=ua(e,n,"clipPath",sa),e.setAttribute("id",t.id),t.path?(r=ua(e,0,"path",sa),r.setAttribute("d",t.path)):(r=ua(e,0,"rect",sa),Yv(r,{x:0,y:0,width:t.width,height:t.height})),xd(e,1),n+1}function Xsn(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;yp(n,o=>{i=e.mark(t,o,i,r),++s}),xd(t,1+s)}function q_e(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Gv(o,r,sa),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Gv(o,"path",sa);s.appendChild(a),a.__data__=e;const u=Gv(o,"g",sa);s.appendChild(u),u.__data__=e;const l=Gv(o,"path",sa);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||Qsn(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function Qsn(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let C0=null,Ou=null;const Jsn={group(e,t,n){const r=C0=t.childNodes[2];Ou=r.__values__,e.foreground(Wk,n,this),Ou=t.__values__,C0=t.childNodes[1],e.content(Wk,n,this);const i=C0=t.childNodes[0];e.background(Wk,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Ou.events&&(yl(r,"pointer-events",s),yl(i,"pointer-events",s),Ou.events=s),n.strokeForeground&&n.stroke){const o=n.fill;yl(r,"display",null),this.style(i,n),yl(i,"stroke",null),o&&(n.fill=null),Ou=r.__values__,this.style(r,n),o&&(n.fill=o),C0=null}else yl(r,"display","none")},image(e,t,n){n.smooth===!1?($F(t,"image-rendering","optimizeSpeed"),$F(t,"image-rendering","pixelated")):$F(t,"image-rendering",null)},text(e,t,n){const r=wO(n);let i,s,o,a;at(r)?(s=r.map(u=>ib(n,u)),i=s.join(`
`),i!==Ou.text&&(xd(t,0),o=t.ownerDocument,a=rb(n),s.forEach((u,l)=>{const c=Gv(o,"tspan",sa);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Ou.text=i)):(s=ib(n,r),s!==Ou.text&&(t.textContent=s,Ou.text=s)),yl(t,"font-family",_O(n)),yl(t,"font-size",vg(n)+"px"),yl(t,"font-style",n.fontStyle),yl(t,"font-variant",n.fontVariant),yl(t,"font-weight",n.fontWeight)}};function Wk(e,t,n){t!==Ou[e]&&(n?Zsn(C0,e,t,n):yl(C0,e,t),Ou[e]=t)}function $F(e,t,n){n!==Ou[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Ou[t]=n)}function Yv(e,t){for(const n in t)yl(e,n,t[n])}function yl(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Zsn(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function u7e(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class l7e extends EO{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=Xae();n.open("svg",lr({},kN,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",a7e,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Bf[n.marktype],i=r.tag,s=[t7e,r.attr];t.open("g",{class:Hje(n),"clip-path":n.clip?Dae(this,n,n.group):null},n7e(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=wO(a);if(at(l)){const c={x:0,dy:rb(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(ib(a,l[f])).close()}else t.text(ib(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),yp(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):yp(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&eon(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:o5+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function eon(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=_O(t),e["font-size"]=vg(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in y5){let a=t[o];const u=y5[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(Tae(a)&&(a=vje(a,i.gradient,"")),e[u]=a)}for(const o in v5){const a=t[o];a!=null&&(s=s||[],s.push(`${v5[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Rh={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function ton(e){Rh.svgMarkTypes=e.svgMarkTypes??["text"],Rh.svgOnTop=e.svgOnTop??!0,Rh.debug=e.debug??!1}class MX extends EO{constructor(t){super(t),this._svgRenderer=new Qae(t),this._canvasRenderer=new g5(t)}initialize(t,n,r,i,s){this._root_el=ua(t,0,"div");const o=ua(this._root_el,0,"div"),a=ua(this._root_el,1,"div");return this._root_el.style.position="relative",Rh.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Rh.svgOnTop?a:o,this._canvasEl=Rh.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return Rh.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!Rh.svgMarkTypes.includes(s));this._svgRenderer.render(t,Rh.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Rh.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class c7e extends xO{constructor(t,n){super(t,n)}initialize(t,n,r){const i=ua(ua(t,0,"div"),Rh.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const f7e="canvas",d7e="hybrid",h7e="png",p7e="svg",m7e="none",Kv={Canvas:f7e,PNG:h7e,SVG:p7e,Hybrid:d7e,None:m7e},gE={};gE[f7e]=gE[h7e]={renderer:g5,headless:g5,handler:xO};gE[p7e]={renderer:Qae,headless:l7e,handler:Qje};gE[d7e]={renderer:MX,headless:MX,handler:c7e};gE[m7e]={};function Aj(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(gE[e]=t,this):gE[e]}function g7e(e,t,n){const r=[],i=new qo().union(t),s=e.marktype;return s?y7e(e,i,n,r):s==="group"?v7e(e,i,n,r):st("Intersect scene must be mark node or group item.")}function y7e(e,t,n,r){if(non(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)v7e(i[a],t,n,r);else for(const u=Bf[s].isect;a<o;++a){const l=i[a];b7e(l,t,u)&&r.push(l)}}return r}function non(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function v7e(e,t,n,r){n&&n(e.mark)&&b7e(e,t,Bf.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)y7e(i[u],t,n,r);t.translate(o,a)}return r}function b7e(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const QH=new qo;function w7e(e){const t=e.clip;if(cr(t))t(vO(QH.clear()));else if(t)QH.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(QH)}const ron=1e-9;function Jae(e,t,n){return e===t?!0:n==="path"?_7e(e,t):e instanceof Date&&t instanceof Date?+e==+t:li(e)&&li(t)?Math.abs(e-t)<=ron:!e||!t||!jt(e)&&!jt(t)?e==t:ion(e,t)}function _7e(e,t){return Jae(t2(e),t2(t))}function ion(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!Jae(e[i],t[i],i))return!1;return typeof e==typeof t}function son(){Tje(),Irn()}const i2="top",Uh="left",Gh="right",sb="bottom",oon="top-left",aon="top-right",uon="bottom-left",lon="bottom-right",Zae="start",$X="middle",wl="end",con="x",fon="y",Dj="group",eue="axis",tue="title",don="frame",hon="scope",nue="legend",E7e="row-header",x7e="row-footer",S7e="row-title",T7e="column-header",C7e="column-footer",A7e="column-title",pon="padding",mon="symbol",D7e="fit",I7e="fit-x",k7e="fit-y",gon="pad",rue="none",s$="all",FX="each",iue="flush",Xv="column",Qv="row";function R7e(e){Qe.call(this,null,e)}Ot(R7e,Qe,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Bf[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=o$(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===Dj||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(o$(l,o))),r.role){case eue:case nue:case tue:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(o$(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(o$(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return w7e(r),t.modifies("bounds")}});function o$(e,t,n){return t(e.bounds.clear(),e,n)}const W_e=":vega_identifier:";function sue(e){Qe.call(this,0,e)}sue.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Ot(sue,Qe,{transform(e,t){const n=yon(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function yon(e){return e._signals[W_e]||(e._signals[W_e]=e.add(0))}function N7e(e){Qe.call(this,null,e)}Ot(N7e,Qe,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,von(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===Dj?bj:vj;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function von(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function P7e(e){Qe.call(this,null,e)}const G_e={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!O7e(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},O7e=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Y_e=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(O7e(i,s=e[n].bounds,t))return!0},bon=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},won=(e,t,n)=>{var r=e.range(),i=new qo;return t===i2||t===sb?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},K_e=e=>(e.forEach(t=>t.opacity=1),e),X_e=(e,t)=>e.reflow(t.modified()).modifies("opacity");Ot(P7e,Qe,{transform(e,t){const n=G_e[e.method]||G_e.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(K_e(i),t=X_e(t,e)),t;if(i=i.filter(bon),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=K_e(i),t=X_e(t,e),s.length>=3&&Y_e(s,r)){do s=n(s,r);while(s.length>=3&&Y_e(s,r));s.length<3&&!Yr(i).opacity&&(s.length>1&&(Yr(s).opacity=0),Yr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=won(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function M7e(e){Qe.call(this,null,e)}Ot(M7e,Qe,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Nu=new qo;function iT(e,t,n){return e[t]===n?0:(e[t]=n,1)}function _on(e){var t=e.items[0].orient;return t===Uh||t===Gh}function Eon(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function xon(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=Eon(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Uae(p),b=0,w=0,S,E;switch(Nu.clear().union(g),g.clear(),(S=u[0])>-1&&g.union(i.items[S].bounds),(S=u[1])>-1&&g.union(i.items[S].bounds),a){case i2:b=f||0,w=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&a$(e,p,E,m,y,0,-1,g);break;case Uh:b=-c,w=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&a$(e,p,E,m,y,1,-1,g);break;case Gh:b=n+c,w=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&a$(e,p,E,m,y,1,1,g);break;case sb:b=f||0,w=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&a$(e,p,E,m,0,0,1,g);break;default:b=i.x,w=i.y}return $y(g.translate(b,w),i),iT(i,"x",b+o)|iT(i,"y",w+o)&&(i.bounds=Nu,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function a$(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const Q_e=(e,t)=>Math.floor(Math.min(e,t)),J_e=(e,t)=>Math.ceil(Math.max(e,t));function Son(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===Dj)switch(i.role){case eue:case nue:case tue:break;case E7e:o.rowheaders.push(...s);break;case x7e:o.rowfooters.push(...s);break;case T7e:o.colheaders.push(...s);break;case C7e:o.colfooters.push(...s);break;case S7e:o.rowtitle=s[0];break;case A7e:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function Ton(e){return new qo().set(0,0,e.width||0,e.height||0)}function Con(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Is(e,t,n){const r=jt(e)?e[t]:e;return r??(n!==void 0?n:0)}function Z_e(e){return e<0?Math.ceil(-e):0}function $7e(e,t,n){var r=!n.nodirty,i=n.bounds===iue?Ton:Con,s=Nu.set(0,0,0,0),o=Is(n.align,Xv),a=Is(n.align,Qv),u=Is(n.padding,Xv),l=Is(n.padding,Qv),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),b=0,w=Array(d),S=Array(d),E=Array(d),T,C,A,I,k,N,F,M,L,j,B;for(C=0;C<c;++C)p[C]=0;for(C=0;C<f;++C)y[C]=0;for(C=0;C<d;++C)N=t[C],k=E[C]=i(N),N.x=N.x||0,w[C]=0,N.y=N.y||0,S[C]=0,A=C%c,I=~~(C/c),m=Math.max(m,F=Math.ceil(k.x2)),b=Math.max(b,M=Math.ceil(k.y2)),p[A]=Math.max(p[A],F),y[I]=Math.max(y[I],M),h[C]=u+Z_e(k.x1),g[C]=l+Z_e(k.y1),r&&e.dirty(t[C]);for(C=0;C<d;++C)C%c===0&&(h[C]=0),C<c&&(g[C]=0);if(o===FX)for(A=1;A<c;++A){for(B=0,C=A;C<d;C+=c)B<h[C]&&(B=h[C]);for(C=A;C<d;C+=c)h[C]=B+p[A-1]}else if(o===s$){for(B=0,C=0;C<d;++C)C%c&&B<h[C]&&(B=h[C]);for(C=0;C<d;++C)C%c&&(h[C]=B+m)}else for(o=!1,A=1;A<c;++A)for(C=A;C<d;C+=c)h[C]+=p[A-1];if(a===FX)for(I=1;I<f;++I){for(B=0,C=I*c,T=C+c;C<T;++C)B<g[C]&&(B=g[C]);for(C=I*c;C<T;++C)g[C]=B+y[I-1]}else if(a===s$){for(B=0,C=c;C<d;++C)B<g[C]&&(B=g[C]);for(C=c;C<d;++C)g[C]=B+b}else for(a=!1,I=1;I<f;++I)for(C=I*c,T=C+c;C<T;++C)g[C]+=y[I-1];for(L=0,C=0;C<d;++C)L=h[C]+(C%c?L:0),w[C]+=L-t[C].x;for(A=0;A<c;++A)for(j=0,C=A;C<d;C+=c)j+=g[C],S[C]+=j-t[C].y;if(o&&Is(n.center,Xv)&&f>1)for(C=0;C<d;++C)k=o===s$?m:p[C%c],L=k-E[C].x2-t[C].x-w[C],L>0&&(w[C]+=L/2);if(a&&Is(n.center,Qv)&&c!==1)for(C=0;C<d;++C)k=a===s$?b:y[~~(C/c)],j=k-E[C].y2-t[C].y-S[C],j>0&&(S[C]+=j/2);for(C=0;C<d;++C)s.union(E[C].translate(w[C],S[C]));switch(L=Is(n.anchor,con),j=Is(n.anchor,fon),Is(n.anchor,Xv)){case wl:L-=s.width();break;case $X:L-=s.width()/2}switch(Is(n.anchor,Qv)){case wl:j-=s.height();break;case $X:j-=s.height()/2}for(L=Math.round(L),j=Math.round(j),s.clear(),C=0;C<d;++C)t[C].mark.bounds.clear();for(C=0;C<d;++C)N=t[C],N.x+=w[C]+=L,N.y+=S[C]+=j,s.union(N.mark.bounds.union(N.bounds.translate(w[C],S[C]))),r&&e.dirty(N);return s}function Aon(e,t,n){var r=Son(t),i=r.marks,s=n.bounds===iue?Don:Ion,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=$7e(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=Is(n.headerBand,Qv,null),c=u$(e,r.rowheaders,i,a,u,-Is(o,"rowHeader"),Q_e,0,s,"x1",0,a,1,m)),r.colheaders&&(m=Is(n.headerBand,Xv,null),f=u$(e,r.colheaders,i,a,a,-Is(o,"columnHeader"),Q_e,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=Is(n.footerBand,Qv,null),d=u$(e,r.rowfooters,i,a,u,Is(o,"rowFooter"),J_e,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=Is(n.footerBand,Xv,null),h=u$(e,r.colfooters,i,a,a,Is(o,"columnFooter"),J_e,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=Is(n.titleAnchor,Qv),g=Is(o,"rowTitle"),g=p===wl?d+g:c-g,m=Is(n.titleBand,Qv,.5),eEe(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=Is(n.titleAnchor,Xv),g=Is(o,"columnTitle"),g=p===wl?h+g:f-g,m=Is(n.titleBand,Xv,.5),eEe(e,r.coltitle,g,1,y,m))}function Don(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Ion(e,t){return e.bounds[t]}function u$(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,b,w,S,E,T,C,A,I;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,b=0,S=t.length;b<S;++b)e.dirty(t[b]),t[b].mark.bounds.clear();for(y=c,b=0,S=t.length;b<S;++b,y+=f){for(T=t[b],E=T.mark.bounds,w=y;w>=0&&(C=n[w])==null;w-=d);a?(A=h==null?C.x:Math.round(C.bounds.x1+h*C.bounds.width()),I=m):(A=m,I=h==null?C.y:Math.round(C.bounds.y1+h*C.bounds.height())),E.union(T.bounds.translate(A-(T.x||0),I-(T.y||0))),T.x=A,T.y=I,e.dirty(T),g=o(g,E[l])}return g}function eEe(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function kon(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function Ron(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function Non(e,t,n,r,i,s,o){const a=kon(n,t),u=Ron(e,a("offset",0)),l=a("anchor",Zae),c=l===wl?1:l===$X?.5:0,f={align:FX,bounds:a("bounds",iue),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Uh:f.anchor={x:Math.floor(r.x1)-u,column:wl,y:c*(o||r.height()+2*r.y1),row:l};break;case Gh:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case i2:f.anchor={y:Math.floor(i.y1)-u,row:wl,x:c*(s||i.width()+2*i.x1),column:l};break;case sb:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case oon:f.anchor={x:u,y:u};break;case aon:f.anchor={x:s-u,y:u,column:wl};break;case uon:f.anchor={x:u,y:o-u,row:wl};break;case lon:f.anchor={x:s-u,y:o-u,column:wl,row:wl};break}return f}function Pon(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),Mon(e,n,n.items[0].items[0]),s=Oon(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===mon&&$on(n.items[0].items[0].items[0].items),i!==rue&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,$y(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function Oon(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Mon(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&WD(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case Uh:i+=Math.ceil(o.bounds.width())+u;break;case Gh:case sb:break;default:s+=o.bounds.height()+u}switch((i||s)&&WD(e,n,i,s),o.orient){case Uh:c+=uS(t,n,o,a,1,1);break;case Gh:l+=uS(t,n,o,wl,0,0)+u,c+=uS(t,n,o,a,1,1);break;case sb:l+=uS(t,n,o,a,0,0),c+=uS(t,n,o,wl,-1,0,1)+u;break;default:l+=uS(t,n,o,a,0,0)}(l||c)&&WD(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(WD(e,n,-l,0),WD(e,o,-l,0))}}function uS(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:Uae(n);return Math.round(r===Zae?f:r===wl?d-h:.5*(c-h))}function WD(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function $on(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Fon(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===Uh||a===Gh?r:n,p=0,m=0,g=0,y=0,b=0,w;if(o!==Dj?a===Uh?(p=i.y2,h=i.y1):a===Gh?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Uh&&(p=r,h=0),w=u===Zae?p:u===wl?h:(p+h)/2,d&&d.text){switch(a){case i2:case sb:b=f.bounds.height()+c;break;case Uh:y=f.bounds.width()+c;break;case Gh:y=-f.bounds.width()-c;break}Nu.clear().union(d.bounds),Nu.translate(y-(d.x||0),b-(d.y||0)),iT(d,"x",y)|iT(d,"y",b)&&(e.dirty(d),d.bounds.clear().union(Nu),d.mark.bounds.clear().union(Nu),e.dirty(d)),Nu.clear().union(d.bounds)}else Nu.clear();switch(Nu.union(f.bounds),a){case i2:m=w,g=i.y1-Nu.height()-l;break;case Uh:m=i.x1-Nu.width()-l,g=w;break;case Gh:m=i.x2+Nu.width()+l,g=w;break;case sb:m=w,g=i.y2+l;break;default:m=s.x,g=s.y}return iT(s,"x",m)|iT(s,"y",g)&&(Nu.translate(m,g),e.dirty(s),s.bounds.clear().union(Nu),t.bounds.clear().union(Nu),e.dirty(s)),s.bounds}function F7e(e){Qe.call(this,null,e)}Ot(F7e,Qe,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&Aon(n,r,e.layout),Bon(n,r,e)}),Lon(e.mark.group)?t.reflow():t}});function Lon(e){return e&&e.mark.role!=="legend-entry"}function Bon(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new qo().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case eue:h=_on(f)?a:u,h.union(xon(e,f,i,s));break;case tue:c=f;break;case nue:l.push(Pon(e,f));break;case don:case hon:case E7e:case x7e:case S7e:case T7e:case C7e:case A7e:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Gh,d!==rue&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const b=g[y];$7e(e,b,Non(b,y,n.legends,a,u,i,s))}l.forEach(y=>{const b=y.bounds;if(b.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=b,e.dirty(y)),n.autosize&&(n.autosize.type===D7e||n.autosize.type===I7e||n.autosize.type===k7e))switch(y.orient){case Uh:case Gh:o.add(b.x1,0).add(b.x2,0);break;case i2:case sb:o.add(0,b.y1).add(0,b.y2)}else o.union(b)})}o.union(a).union(u),c&&o.union(Fon(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),jon(e,t,o,n)}function jon(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===pon){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===rue?(l=0,f=0,u=o,c=a):s===D7e?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===I7e?(u=Math.max(0,o-l-d),a=c+f+h):s===k7e?(o=u+l+d,c=Math.max(0,a-f-h)):s===gon&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const Uon=Object.freeze(Object.defineProperty({__proto__:null,bound:R7e,identifier:sue,mark:N7e,overlap:P7e,render:M7e,viewlayout:F7e},Symbol.toStringTag,{value:"Module"}));function L7e(e){Qe.call(this,null,e)}Ot(L7e,Qe,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=xae(s,o,e.minstep),u=e.format||fje(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?cje(s,e.values,a):Sae(s,a);return i&&(r.rem=i),i=l.map((c,f)=>Ti({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Ti({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function B7e(e){Qe.call(this,null,e)}function zon(){return Ti({})}function Von(e){const t=SA().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Ot(B7e,Qe,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||zon,s=e.key||mn,o=this.value;return at(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&st("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=Von(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function j7e(e){Qe.call(this,null,e)}Ot(j7e,Qe,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(at(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||pv,u=i.enter||pv,l=i.exit||pv,c=(s&&!o?i[s]:a)||pv;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==pv&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==pv&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==pv){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function U7e(e){Qe.call(this,[],e)}Ot(U7e,Qe,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||DF,o=e.scale,a=+e.limit,u=xae(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===DF,c=e.format||mje(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||pje(o,u),d,h,p,m,g;return i&&(r.rem=i),s===DF?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,cr(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,b)=>Math.max(y,p(b,e)),0)):p=tl(m=p||8),i=i.map((y,b)=>Ti({index:b,label:c(y,b,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(Ti({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===grn?(d=o.domain(),h=aje(o,d[0],Yr(d)),f.length<3&&!e.values&&d[0]!==Yr(d)&&(f=[d[0],Yr(d)]),i=f.map((y,b)=>Ti({index:b,label:c(y,b,f),value:y,perc:h(y)}))):(p=f.length-1,h=Arn(o),i=f.map((y,b)=>Ti({index:b,label:c(y,b,f),value:y,perc:b?h(y):0,perc2:b===p?1:h(f[b+1])}))),r.source=i,r.add=i,this.value=i,r}});const Hon=e=>e.source.x,qon=e=>e.source.y,Won=e=>e.target.x,Gon=e=>e.target.y;function oue(e){Qe.call(this,{},e)}oue.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Ot(oue,Qe,{transform(e,t){var n=e.sourceX||Hon,r=e.sourceY||qon,i=e.targetX||Won,s=e.targetY||Gon,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=tEe.get(u+"-"+a)||tEe.get(u);return l||st("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const z7e=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,Yon=(e,t,n,r)=>z7e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),V7e=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},Kon=(e,t,n,r)=>V7e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),H7e=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},Xon=(e,t,n,r)=>H7e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Qon=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,Jon=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,Zon=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},ean=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},tan=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},nan=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},tEe=SA({line:z7e,"line-radial":Yon,arc:V7e,"arc-radial":Kon,curve:H7e,"curve-radial":Xon,"orthogonal-horizontal":Qon,"orthogonal-vertical":Jon,"orthogonal-radial":Zon,"diagonal-horizontal":ean,"diagonal-vertical":tan,"diagonal-radial":nan});function aue(e){Qe.call(this,null,e)}aue.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Ot(aue,Qe,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||_A,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/PRe(l),h=Ec(c),p,m,g;for(e.sort&&h.sort((y,b)=>l[y]-l[b]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const ran=5;function ian(e){const t=e.type;return!e.bins&&(t===JC||t===fO||t===dO)}function q7e(e){return wae(e)&&e!==$m}const san=mp(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function W7e(e){Qe.call(this,null,e),this.modified(!0)}Ot(W7e,Qe,{transform(e,t){var n=t.dataflow,r=this.value,i=oan(e);(!r||i!==r.type)&&(this.value=r=pi(i)());for(i in e)if(!san[i]){if(i==="padding"&&q7e(r.type))continue;cr(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return dan(r,e,fan(r,e,uan(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function oan(e){var t=e.type,n="",r;return t===$m?$m+"-"+JC:(aan(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?$m+"-":r===3?DA+"-":""),(n+t||JC).toLowerCase())}function aan(e){const t=e.type;return wae(t)&&t!==pE&&t!==mE&&(e.scheme||e.range&&e.range.length&&e.range.every(Bt))}function uan(e,t,n){const r=lan(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&ian(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return q7e(s)&&t.padding&&i[0]!==Yr(i)&&(i=can(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(G7e(s,i,n)),s===gae&&e.unknown(t.domainImplicit?pY:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&xae(e,t.nice)||null),i.length}function lan(e,t,n){return t?(e.domain(G7e(e.type,t,n)),t.length):-1}function can(e,t,n,r,i,s){var o=Math.abs(Yr(n)-n[0]),a=o/(o-2*r),u=e===my?loe(t,null,a):e===dO?n5(t,null,a,.5):e===fO?n5(t,null,a,i||1):e===hj?coe(t,null,a,s||1):uoe(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function G7e(e,t,n){if(nje(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Nt(t))}return t}function fan(e,t,n){let r=t.bins;if(r&&!at(r)){const i=e.domain(),s=i[0],o=Yr(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||st("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Ec(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===yae&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function dan(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=han(r,t,n);else if(t.scheme&&(s=pan(r,t,n),cr(s))){if(e.interpolator)return e.interpolator(s);st(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&rje(r))return e.interpolator(gj(LX(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(_ae(t.interpolate,t.interpolateGamma)):cr(e.round)?e.round(i):cr(e.rangeRound)&&e.interpolate(i?bP:Iy),s&&e.range(LX(s,t.reverse))}function han(e,t,n){e!==X9e&&e!==xX&&st("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===xX?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*mae(n,i,r)]}function pan(e,t,n){var r=t.schemeExtent,i,s;return at(t.scheme)?s=gj(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=Eae(i),s||st(`Unrecognized scheme name: ${t.scheme}`)),n=e===mj?n+1:e===yae?n-1:e===ZC||e===pj?+t.schemeCount||ran:n,rje(e)?nEe(s,r,t.reverse):cr(s)?oje(nEe(s,r),n):e===gae?s:s.slice(0,n)}function nEe(e,t,n){return cr(e)&&(t||n)?sje(e,LX(t||[0,1],n)):e}function LX(e,t){return t?e.slice().reverse():e}function Y7e(e){Qe.call(this,null,e)}Ot(Y7e,Qe,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(ox(e.sort)),this.modified(n),t}});const rEe="zero",K7e="center",X7e="normalize",Q7e=["y0","y1"];function uue(e){Qe.call(this,null,e)}uue.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:rEe,values:[rEe,K7e,X7e]},{name:"as",type:"string",array:!0,length:2,default:Q7e}]};Ot(uue,Qe,{transform(e,t){var n=e.as||Q7e,r=n[0],i=n[1],s=ox(e.sort),o=e.field||_A,a=e.offset===K7e?man:e.offset===X7e?gan:yan,u,l,c,f;for(u=van(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function man(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function gan(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function yan(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function van(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const ban=Object.freeze(Object.defineProperty({__proto__:null,axisticks:L7e,datajoin:B7e,encode:j7e,legendentries:U7e,linkpath:oue,pie:aue,scale:W7e,sortitems:Y7e,stack:uue},Symbol.toStringTag,{value:"Module"}));var wan=Math.abs,BX=Math.cos,b5=Math.sin,_an=1e-6,J7e=Math.PI,jX=J7e/2,iEe=Ean(2);function sEe(e){return e>1?jX:e<-1?-jX:Math.asin(e)}function Ean(e){return e>0?Math.sqrt(e):0}function xan(e,t){var n=e*b5(t),r=30,i;do t-=i=(t+b5(t)-n)/(1+BX(t));while(wan(i)>_an&&--r>0);return t/2}function San(e,t,n){function r(i,s){return[e*i*BX(s=xan(n,s)),t*b5(s)]}return r.invert=function(i,s){return s=sEe(s/t),[i/(e*BX(s)),sEe((2*s+b5(2*s))/n)]},r}var Tan=San(iEe/jX,iEe,J7e);function Can(){return dg(Tan).scale(169.529)}const Aan=pPe(),UX=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Dan(e,t){return function n(){const r=t();return r.type=e,r.path=pPe().projection(r),r.copy=r.copy||function(){const i=n();return UX.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},eje(r)}}function lue(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(w5[e]=Dan(e,t),this):w5[e]||null}function Z7e(e){return e&&e.path||Aan}const w5={albers:gPe,albersusa:nAt,azimuthalequalarea:rAt,azimuthalequidistant:iAt,conicconformal:aAt,conicequalarea:x6,conicequidistant:cAt,equalEarth:dAt,equirectangular:uAt,gnomonic:hAt,identity:pAt,mercator:sAt,mollweide:Can,naturalEarth1:mAt,orthographic:gAt,stereographic:yAt,transversemercator:vAt};for(const e in w5)lue(e,w5[e]);function Ian(){}const qg=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function eUe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),kan(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(Ran((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,b;for(h=p=-1,g=u[0]>=l,qg[g<<1].forEach(w);++h<e-1;)m=g,g=u[h+1]>=l,qg[m|g<<1].forEach(w);for(qg[g<<0].forEach(w);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,qg[g<<1|y<<2].forEach(w);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,b=y,y=u[p*e+h+1]>=l,qg[m|g<<1|y<<2|b<<3].forEach(w);qg[g|y<<3].forEach(w)}for(h=-1,y=u[p*e]>=l,qg[y<<2].forEach(w);++h<e-1;)b=y,y=u[p*e+h+1]>=l,qg[y<<2|b<<3].forEach(w);qg[y<<3].forEach(w);function w(S){var E=[S[0][0]+h,S[0][1]+p],T=[S[1][0]+h,S[1][1]+p],C=o(E),A=o(T),I,k;(I=d[C])?(k=f[A])?(delete d[I.end],delete f[k.start],I===k?(I.ring.push(T),c(I.ring)):f[I.start]=d[k.end]={start:I.start,end:k.end,ring:I.ring.concat(k.ring)}):(delete d[I.end],I.ring.push(T),d[I.end=A]=I):(I=f[A])?(k=d[C])?(delete f[I.start],delete d[k.end],I===k?(I.ring.push(T),c(I.ring)):f[k.start]=d[I.end]={start:k.start,end:I.end,ring:k.ring.concat(I.ring)}):(delete f[I.start],I.ring.unshift(E),f[I.start=C]=I):f[C]=d[A]={start:C,end:A,ring:[E,T]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||st("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:Ian,r):n===a},r}function kan(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function Ran(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Nan(e,t[n]))return i;return 0}function Nan(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(Pan(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function Pan(e,t,n){var r;return Oan(e,t,n)&&Man(e[r=+(e[0]===t[0])],n[r],t[r])}function Oan(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Man(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function tUe(e,t,n){return function(r){var i=eg(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?O1(s,o,e):a/(e+1);return Ec(s+u,o,u)}}function cue(e){Qe.call(this,null,e)}cue.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Ot(cue,Qe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||el,s=eUe().smooth(e.smooth!==!1),o=e.thresholds||$an(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,at(o)?o:o(c.values));Fan(f,c,l,e),f.forEach(d=>{u.push(ij(l,Ti(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function $an(e,t,n){const r=tUe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>N0(t(i).values)))}function Fan(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(cr(i)&&(i=i(n,r)),cr(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(li(i)?i:i[0])||1,a=(li(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(nUe(t,o,a,u,l))}function nUe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function oEe(e,t,n){const r=e>=0?e:Ioe(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function JH(e){return cr(e)?e:tl(+e)}function rUe(){var e=u=>u[0],t=u=>u[1],n=_A,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=oEe(r[0],u,e)>>o,f=oEe(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let b=g;u.forEach(S=>{const E=d+(+e(S)>>o),T=h+(+t(S)>>o);E>=0&&E<p&&T>=0&&T<m&&(g[E+T*p]+=+n(S))}),c>0&&f>0?(lS(p,m,g,y,c),cS(p,m,y,g,f),lS(p,m,g,y,c),cS(p,m,y,g,f),lS(p,m,g,y,c),cS(p,m,y,g,f)):c>0?(lS(p,m,g,y,c),lS(p,m,y,g,c),lS(p,m,g,y,c),b=y):f>0&&(cS(p,m,g,y,f),cS(p,m,y,g,f),cS(p,m,g,y,f),b=y);const w=l?Math.pow(2,-2*o):1/PRe(b);for(let S=0,E=p*m;S<E;++S)b[S]*=w;return{values:b,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=JH(u),a):e},a.y=function(u){return arguments.length?(t=JH(u),a):t},a.weight=function(u){return arguments.length?(n=JH(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||st("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||st("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=Lt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&st("invalid bandwidth"),r=u,a):r},a}function lS(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function cS(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function fue(e){Qe.call(this,null,e)}fue.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Lan=["x","y","weight","size","cellSize","bandwidth"];function iUe(e,t){return Lan.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Ot(fue,Qe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=Ban(r,e.groupby),s=(e.groupby||[]).map(lo),o=iUe(rUe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>Ti(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Ban(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function due(e){Qe.call(this,null,e)}due.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Ot(due,Qe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=eUe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||tUe(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=iUe(rUe(),e)(i,!0),u=nUe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=at(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Ti),n}});const zX="Feature",hue="FeatureCollection",jan="MultiPoint";function pue(e){Qe.call(this,null,e)}pue.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Ot(pue,Qe,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&el,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(qu(a))||s&&t.modified(qu(s))||o&&t.modified(qu(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:zX,geometry:{type:jan,coordinates:r}})),this.value={type:hue,features:n}}});function mue(e){Qe.call(this,null,e)}mue.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Ot(mue,Qe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||el,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=Z7e(e.projection),n.materialize().reflow()):o=i===el||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=Uan(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function Uan(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function gue(e){Qe.call(this,null,e)}gue.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Ot(gue,Qe,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function yue(e){Qe.call(this,null,e)}yue.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Ot(yue,Qe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=zan(Z7e(e.projection),e.field||Ud("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function zan(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function vue(e){Qe.call(this,[],e),this.generator=M2t()}vue.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Ot(vue,Qe,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)cr(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(i9e(n[0],i)):t.add.push(Ti(i)),n[0]=i,t}});function bue(e){Qe.call(this,null,e)}bue.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Ot(bue,Qe,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||el,s=Han(e.opacity,e),o=Van(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?N0(n.map(l=>N0(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=lr({},l,u);r||(f.$max=N0(c.values||[])),l[a]=qan(c,f,o.dep?o:tl(o(f)),s.dep?s:tl(s(f)))}),t.reflow(!0).modifies(a)}});function Van(e,t){let n;return cr(e)?(n=r=>M1(e(r,t)),n.dep=sUe(e)):n=tl(M1(e||"#888")),n}function Han(e,t){let n;return cr(e)?(n=r=>e(r,t),n.dep=sUe(e)):e?n=tl(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function sUe(e){if(!cr(e))return!1;const t=mp(qu(e));return t.$x||t.$y||t.$value||t.$max}function qan(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Fv,d=x1(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let b=o,w=g*i;b<u;++b,y+=4){t.$x=b-o,t.$value=f(b+w);const S=n(t);m[y+0]=S.r,m[y+1]=S.g,m[y+2]=S.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function oUe(e){Qe.call(this,null,e),this.modified(!0)}Ot(oUe,Qe,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Gan(e.type),UX.forEach(r=>{e[r]!=null&&aEe(n,r,e[r])})):UX.forEach(r=>{e.modified(r)&&aEe(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Wan(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Wan(e,t){const n=Yan(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Gan(e){const t=lue((e||"mercator").toLowerCase());return t||st("Unrecognized projection type: "+e),t()}function aEe(e,t,n){cr(e[t])&&e[t](n)}function Yan(e){return e=Lt(e),e.length===1?e[0]:{type:hue,features:e.reduce((t,n)=>t.concat(Kan(n)),[])}}function Kan(e){return e.type===hue?e.features:Lt(e).filter(t=>t!=null).map(t=>t.type===zX?t:{type:zX,geometry:t})}const Xan=Object.freeze(Object.defineProperty({__proto__:null,contour:due,geojson:pue,geopath:mue,geopoint:gue,geoshape:yue,graticule:vue,heatmap:bue,isocontour:cue,kde2d:fue,projection:oUe},Symbol.toStringTag,{value:"Module"})),uEe={center:TCt,collide:HCt,nbody:t2t,link:WCt,x:n2t,y:r2t},WI="forces",VX=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Qan=["static","iterations"],aUe=["x","y","vx","vy"];function wue(e){Qe.call(this,null,e)}wue.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:aUe}]};Ot(wue,Qe,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(VX),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&uUe(n,e,0,t)):(this.value=n=Zan(t.source,e),n.on("tick",Jan(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(Qan)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==WI||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(aUe)}});function Jan(e,t){return()=>e.touch(t).run()}function Zan(e,t){const n=e2t(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),uUe(n,t,!0).on("end",()=>s=!0)}function uUe(e,t,n,r){var i=Lt(t.forces),s,o,a,u;for(s=0,o=VX.length;s<o;++s)a=VX[s],a!==WI&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=WI+s,a=n||t.modified(WI,s)?tun(i[s]):r&&eun(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(WI+s,null);return e.numForces=i.length,e}function eun(e,t){var n,r;for(n in e)if(cr(r=e[n])&&t.modified(qu(r)))return 1;return 0}function tun(e){var t,n;vn(uEe,e.force)||st("Unrecognized force: "+e.force),t=uEe[e.force]();for(n in e)cr(t[n])&&nun(t[n],e[n],e);return t}function nun(e,t,n){e(cr(t)?r=>t(r,n):t)}const run=Object.freeze(Object.defineProperty({__proto__:null,force:wue},Symbol.toStringTag,{value:"Module"}));function HX(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function _ue(e){Qe.call(this,null,e)}_ue.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const iun=e=>e.values;Ot(_ue,Qe,{transform(e,t){t.source||st("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&rj(o.data)&&i.rem.push(o.data)}),this.value=s=xB({values:Lt(e.keys).reduce((o,a)=>(o.key(a),o),sun()).entries(i.source)},iun),n&&s.each(o=>{o.children&&(o=Ti(o.data),i.add.push(o),i.source.push(o))}),HX(s,mn,mn)),i.source.root=s,i}});function sun(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function Fy(e){Qe.call(this,null,e)}const oun=(e,t)=>e.parent===t.parent?1:2;Ot(Fy,Qe,{transform(e,t){(!t.source||!t.source.root)&&st(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(ox(e.sort,o=>o.data)),aun(n,this.params,e),n.separation&&n.separation(e.separation!==!1?oun:_A);try{this.value=n(i)}catch(o){st(o)}return i.each(o=>uun(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function aun(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function uun(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const qX=["x","y","r","depth","children"];function Eue(e){Fy.call(this,e)}Eue.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:qX.length,default:qX}]};Ot(Eue,Fy,{layout:RPe,params:["radius","size","padding"],fields:qX});const WX=["x0","y0","x1","y1","depth","children"];function xue(e){Fy.call(this,e)}xue.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:WX.length,default:WX}]};Ot(xue,Fy,{layout:rDt,params:["size","round","padding"],fields:WX});function Sue(e){Qe.call(this,null,e)}Sue.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Ot(Sue,Qe,{transform(e,t){t.source||st("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?HX(rye().id(e.key).parentId(e.parentKey)(i.source),e.key,zd):HX(rye()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const lEe={tidy:hDt,cluster:CAt},GX=["x","y","depth","children"];function Tue(e){Fy.call(this,e)}Tue.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:GX.length,default:GX}]};Ot(Tue,Fy,{layout(e){const t=e||"tidy";if(vn(lEe,t))return lEe[t]();st("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:GX});function Cue(e){Qe.call(this,[],e)}Cue.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Ot(Cue,Qe,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||st("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[mn(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[mn(a)]&&s[mn(u)]&&i.add.push(Ti({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[mn(o)]=1),n.forEach(o=>{(s[mn(o.source)]||s[mn(o.target)])&&i.mod.push(o)})),i}});const cEe={binary:mDt,dice:xP,slice:SB,slicedice:gDt,squarify:MPe,resquarify:yDt},YX=["x0","y0","x1","y1","depth","children"];function Aue(e){Fy.call(this,e)}Aue.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:YX.length,default:YX}]};Ot(Aue,Fy,{layout(){const e=pDt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{vn(cEe,t)?e.tile(cEe[t]):st("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:YX});const lun=Object.freeze(Object.defineProperty({__proto__:null,nest:_ue,pack:Eue,partition:xue,stratify:Sue,tree:Tue,treelinks:Cue,treemap:Aue},Symbol.toStringTag,{value:"Module"})),ZH=4278190080;function cun(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function fun(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=x1(s,o).getContext("2d"),l=x1(s,o).getContext("2d"),c=a&&x1(s,o).getContext("2d");n.forEach(A=>FF(u,A,!1)),FF(l,t,!1),a&&FF(c,t,!0);const f=eq(u,s,o),d=eq(l,s,o),h=a&&eq(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,b,w,S,E,T,C;for(y=0;y<o;++y)for(g=0;g<s;++g)S=y*s+g,E=f[S]&ZH,C=d[S]&ZH,T=a&&h[S]&ZH,(E||T||C)&&(b=e(g),w=e(y),!i&&(E||C)&&p.set(b,w),a&&(E||T)&&m.set(b,w));return[p,m]}function eq(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function FF(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>FF(e,s.items,n))}):Bf[r].draw(e,{items:n?t.map(dun):t})}function dun(e){const t=ij(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Wg=5,gl=31,RN=32,Cv=new Uint32Array(RN+1),Mh=new Uint32Array(RN+1);Mh[0]=0;Cv[0]=~Mh[0];for(let e=1;e<=RN;++e)Mh[e]=Mh[e-1]<<1|1,Cv[e]=~Mh[e];function hun(e,t){const n=new Uint32Array(~~((e*t+RN)/RN));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Wg]&1<<(a&gl)},set:(s,o)=>{const a=o*e+s;r(a>>>Wg,1<<(a&gl))},clear:(s,o)=>{const a=o*e+s;i(a>>>Wg,~(1<<(a&gl)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>Wg,h=f>>>Wg,d===h){if(n[d]&Cv[c&gl]&Mh[(f&gl)+1])return!0}else{if(n[d]&Cv[c&gl]||n[h]&Mh[(f&gl)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Wg,d=c>>>Wg,f===d)r(f,Cv[l&gl]&Mh[(c&gl)+1]);else for(r(f,Cv[l&gl]),r(d,Mh[(c&gl)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Wg,d=c>>>Wg,f===d)i(f,Mh[l&gl]|Cv[(c&gl)+1]);else for(i(f,Mh[l&gl]),i(d,Cv[(c&gl)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function pun(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>hun(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function mun(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Sf.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,b;for(let w=0;w<u;++w)d=a[w].x,p=a[w].y,h=a[w].x2===void 0?d:a[w].x2,m=a[w].y2===void 0?p:a[w].y2,g=(d+h)/2,y=(p+m)/2,b=Math.abs(h-d+m-p),b>=f&&(f=b,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function _5(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function Jv(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function gun(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,b;if(!_5(p,m,d,h,i,s)&&!Jv(e,p,m,h,d,g,o,a)&&!Jv(e,p,m,h,d,h,o,null)){for(;y-g>=1;)b=(g+y)/2,Jv(e,p,m,h,d,b,o,a)?y=b:g=b;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Sf.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,b,w,S,E,T,C,A,I,k,N,F,M,L,j,B,z,V;for(let G=0;G<f;++G){for(b=c[G].x,S=c[G].y,w=c[G].x2===void 0?b:c[G].x2,E=c[G].y2===void 0?S:c[G].y2,b>w&&(V=b,b=w,w=V),S>E&&(V=S,S=E,E=V),k=e(b),F=e(w),N=~~((k+F)/2),M=e(S),j=e(E),L=~~((M+j)/2),A=N;A>=k;--A)for(I=L;I>=M;--I)z=u(A,I,p,h,d),z&&([l.x,l.y,p,m]=z);for(A=N;A<=F;++A)for(I=L;I<=j;++I)z=u(A,I,p,h,d),z&&([l.x,l.y,p,m]=z);!m&&!n&&(B=Math.abs(w-b+E-S),T=(b+w)/2,C=(S+E)/2,B>=y&&!_5(T,C,h,d,i,s)&&!Jv(e,T,C,d,h,d,o,null)&&(y=B,l.x=T,l.y=C,g=!0))}return m||g?(T=h/2,C=d/2,o.setRange(e(l.x-T),e(l.y-C),e(l.x+T),e(l.y+C)),l.align="center",l.baseline="middle",!0):!1}}const yun=[-1,-1,1,1],vun=[-1,1,-1,1];function bun(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Sf.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,b=0,w,S,E,T,C,A,I,k,N,F,M,L;for(let j=0;j<f;++j){for(w=c[j].x,E=c[j].y,S=c[j].x2===void 0?w:c[j].x2,T=c[j].y2===void 0?E:c[j].y2,p.push([e((w+S)/2),e((E+T)/2)]);p.length;)if([I,k]=p.pop(),!(o.get(I,k)||a.get(I,k)||u.get(I,k))){u.set(I,k);for(let B=0;B<4;++B)C=I+yun[B],A=k+vun[B],u.outOfBounds(C,A,C,A)||p.push([C,A]);if(C=e.invert(I),A=e.invert(k),N=m,F=s,!_5(C,A,h,d,i,s)&&!Jv(e,C,A,d,h,N,o,a)&&!Jv(e,C,A,d,h,d,o,null)){for(;F-N>=1;)M=(N+F)/2,Jv(e,C,A,d,h,M,o,a)?F=M:N=M;N>m&&(l.x=C,l.y=A,m=N,g=!0)}}!g&&!n&&(L=Math.abs(S-w+T-E),C=(w+S)/2,A=(E+T)/2,L>=b&&!_5(C,A,h,d,i,s)&&!Jv(e,C,A,d,h,d,o,null)&&(b=L,l.x=C,l.y=A,y=!0))}return g||y?(C=h/2,A=d/2,o.setRange(e(l.x-C),e(l.y-A),e(l.x+C),e(l.y+A)),l.align="center",l.baseline="middle",!0):!1}}const wun=["right","center","left"],_un=["bottom","middle","top"];function Eun(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,b,w,S,E,T,C,A,I,k,N;for(let F=0;F<u;++F){if(h=(n[F]&3)-1,p=(n[F]>>>2&3)-1,m=h===0&&p===0||r[F]<0,g=h&&p?Math.SQRT1_2:1,y=r[F]<0?-1:1,b=c[1+h]+r[F]*h*g,C=c[4+p]+y*f*p/2+r[F]*p*g,S=C-f/2,E=C+f/2,A=e(b),k=e(S),N=e(E),!d)if(fEe(A,A,k,N,o,a,b,b,S,E,c,m))d=Sf.width(l.datum,l.datum.text);else continue;if(T=b+y*d*h/2,b=T-d/2,w=T+d/2,A=e(b),I=e(w),fEe(A,I,k,N,o,a,b,w,S,E,c,m))return l.x=h?h*y<0?w:b:T,l.y=p?p*y<0?E:S:C,l.align=wun[h*y+1],l.baseline=_un[p*y+1],o.setRange(A,k,I,N),!0}return!1}}function fEe(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const tq=0,nq=4,rq=8,iq=0,sq=1,oq=2,xun={"top-left":tq+iq,top:tq+sq,"top-right":tq+oq,left:nq+iq,middle:nq+sq,right:nq+oq,"bottom-left":rq+iq,bottom:rq+sq,"bottom-right":rq+oq},Sun={naive:mun,"reduced-search":gun,floodfill:bun};function Tun(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=Cun(r,f),h=Aun(i,f),p=Dun(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=Iun(p,m,a,u),b=l===null||l===1/0,w=g&&c==="naive";let S=-1,E=-1;const T=e.map(k=>{const N=b?Sf.width(k,k.text):void 0;return S=Math.max(S,N),E=Math.max(E,k.fontSize),{datum:k,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(k),textWidth:N}});l=l===null||l===1/0?Math.max(S,E)+Math.max(...r):l;const C=pun(t[0],t[1],l);let A;if(!w){n&&T.sort((F,M)=>n(F.datum,M.datum));let k=!1;for(let F=0;F<h.length&&!k;++F)k=h[F]===5||d[F]<0;const N=(p&&o||g)&&e.map(F=>F.datum);A=s.length||N?fun(C,N||[],s,k,g):cun(C,o&&T)}const I=g?Sun[c](C,A,o,u):Eun(C,A,h,d);return T.forEach(k=>k.opacity=+I(k)),T}function Cun(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Aun(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=xun[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Dun(e){return e&&e.mark&&e.mark.marktype}function Iun(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const KX=["x","y","opacity","align","baseline"],lUe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Due(e){Qe.call(this,null,e)}Due.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:lUe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:KX.length,default:KX}]};Ot(Due,Qe,{transform(e,t){function n(s){const o=e[s];return cr(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&st("Size parameter should be specified as a [width, height] array.");const i=e.as||KX;return Tun(t.materialize(t.SOURCE).source||[],e.size,e.sort,Lt(e.offset==null?1:e.offset),Lt(e.anchor||lUe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const kun=Object.freeze(Object.defineProperty({__proto__:null,label:Due},Symbol.toStringTag,{value:"Module"}));function cUe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Iue(e){Qe.call(this,null,e)}Iue.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Ot(Iue,Qe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=cUe(r,e.groupby),s=(e.groupby||[]).map(lo),o=s.length,a=e.as||[lo(e.x),lo(e.y)],u=[];i.forEach(l=>{E9e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Ti(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const XX={constant:Uoe,linear:zoe,log:v9e,exp:b9e,pow:w9e,quad:Voe,poly:_9e},Run=(e,t)=>e==="poly"?t:e==="quad"?2:1;function kue(e){Qe.call(this,null,e)}kue.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(XX)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Ot(kue,Qe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=cUe(r,e.groupby),s=(e.groupby||[]).map(lo),o=e.method||"linear",a=e.order==null?3:e.order,u=Run(o,a),l=e.as||[lo(e.x),lo(e.y)],c=XX[o],f=[];let d=e.extent;vn(XX,o)||st("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(Ti({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||eg(h,e.x),y=b=>{const w={};for(let S=0;S<s.length;++S)w[s[S]]=h.dims[S];w[l[0]]=b[0],w[l[1]]=b[1],f.push(Ti(w))};o==="linear"||o==="constant"?g.forEach(b=>y([b,m.predict(b)])):fj(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const Nun=Object.freeze(Object.defineProperty({__proto__:null,loess:Iue,regression:kue},Symbol.toStringTag,{value:"Module"}));function Rue(e){Qe.call(this,null,e)}Rue.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Pun=[-1e5,-1e5,1e5,1e5];Ot(Rue,Qe,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:Pun;const s=this.value=Ite.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!Mun(u)?Oun(u):null}return t.reflow(e.modified()).modifies(n)}});function Oun(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function Mun(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const $un=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Rue},Symbol.toStringTag,{value:"Module"}));var aq=Math.PI/180,GI=64,LF=2048;function Fun(){var e=[256,256],t,n,r,i,s,o,a,u=fUe,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(x1()),m=Vun((e[0]>>5)*e[1]),g=null,y=l.length,b=-1,w=[],S=l.map(T=>({text:t(T),font:n(T),style:i(T),weight:s(T),rotate:o(T),size:~~(r(T)+1e-14),padding:a(T),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:T})).sort((T,C)=>C.size-T.size);++b<y;){var E=S[b];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,Lun(p,E,S,b),E.hasText&&h(m,E,g)&&(w.push(E),g?jun(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return w};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(GI<<5)/m,p.height=LF/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,b=m.y,w=Math.sqrt(e[0]*e[0]+e[1]*e[1]),S=u(e),E=c()<.5?1:-1,T=-E,C,A,I;(C=S(T+=E))&&(A=~~C[0],I=~~C[1],!(Math.min(Math.abs(A),Math.abs(I))>=w));)if(m.x=y+A,m.y=b+I,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!Bun(m,p,e[0]))&&(!g||Uun(m,g))){for(var k=m.sprite,N=m.width>>5,F=e[0]>>5,M=m.x-(N<<4),L=M&127,j=32-L,B=m.y1-m.y0,z=(m.y+m.y0)*F+(M>>5),V,G=0;G<B;G++){V=0;for(var $=0;$<=N;$++)p[z+$]|=V<<j|($<N?(V=k[G*N+$])>>>L:0);z+=F}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=yw(p),f):n},f.fontStyle=function(p){return arguments.length?(i=yw(p),f):i},f.fontWeight=function(p){return arguments.length?(s=yw(p),f):s},f.rotate=function(p){return arguments.length?(o=yw(p),f):o},f.text=function(p){return arguments.length?(t=yw(p),f):t},f.spiral=function(p){return arguments.length?(u=Hun[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=yw(p),f):r},f.padding=function(p){return arguments.length?(a=yw(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function Lun(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(GI<<5)/s,LF/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*aq),g=Math.cos(t.rotate*aq),y=c*g,b=c*m,w=d*g,S=d*m;c=Math.max(Math.abs(y+S),Math.abs(y-S))+31>>5<<5,d=~~Math.max(Math.abs(b+w),Math.abs(b-w))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=GI<<5&&(o=0,a+=u,u=0),a+d>=LF)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*aq),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(GI<<5)/s,LF/s).data,T=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)T[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var C=0,A=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var I=f*p+(h>>5),k=E[(a+p)*(GI<<5)+(o+h)<<2]?1<<31-h%32:0;T[I]|=k,C|=k}C?A=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+A,t.sprite=T.slice(0,(t.y1-t.y0)*f)}}}function Bun(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function jun(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Uun(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function fUe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function zun(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Vun(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function yw(e){return typeof e=="function"?e:function(){return e}}var Hun={archimedean:fUe,rectangular:zun};const dUe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],qun=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Nue(e){Qe.call(this,Fun(),e)}Nue.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:dUe}]};Ot(Nue,Qe,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&st("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return cr(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||qun.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||dUe;let a=e.fontSize||14,u;if(cr(a)?u=e.fontSizeRange:a=tl(a),u){const p=a,m=pi("sqrt")().domain(eg(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Hd).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const Wun=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Nue},Symbol.toStringTag,{value:"Module"})),Gun=e=>new Uint8Array(e),Yun=e=>new Uint16Array(e),Gk=e=>new Uint32Array(e);function Kun(){let e=8,t=[],n=Gk(0),r=l$(0,e),i=l$(0,e);return{data:()=>t,seen:()=>n=Xun(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=l$(s,e,r),i=l$(s,e))}}}function Xun(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function l$(e,t,n){const r=(t<257?Gun:t<65537?Yun:Gk)(e);return n&&r.set(n),r}function dEe(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function hEe(){let e=Gk(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=Gk(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=Qun(h,d),c)p=t,m=e,t=Array(c+f),e=Gk(c+f),Jun(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[j_t(u,a[0],0,l),P1(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function Qun(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),V_t(e,t)}function Jun(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Pue(e){Qe.call(this,Kun(),e),this._indices=null,this._dims=null}Pue.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Ot(Pue,Qe,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=hEe()),s.push(dEe(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,b,w,S,E,T,C;if(l.set(u),t.rem.length&&(w=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(S={},b=t.mod,E=0,T=b.length;E<T;++E)S[b[E]._index]=1;for(E=0;E<h;++E)C=r[E],(!o[E]||e.modified("fields",E)||t.modified(C.fields))&&(y=C.fname,(m=p[y])||(s[y]=g=hEe(),p[y]=m=g.insert(C,t.source,0)),o[E]=dEe(g,E,i[E]).onAdd(m,u));for(E=0,T=a.data().length;E<T;++E)w[E]||(l[E]!==u[E]?f.push(E):S[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),b=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=b,g[d]!==b&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,b;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function Oue(e){Qe.call(this,null,e)}Oue.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Ot(Oue,Qe,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const Zun=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Pue,resolvefilter:Oue},Symbol.toStringTag,{value:"Module"})),eln="RawCode",yE="Literal",tln="Property",nln="Identifier",rln="ArrayExpression",iln="BinaryExpression",hUe="CallExpression",sln="ConditionalExpression",oln="LogicalExpression",aln="MemberExpression",uln="ObjectExpression",lln="UnaryExpression";function Ap(e){this.type=e}Ap.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=cln(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function cln(e){switch(e.type){case rln:return e.elements;case iln:case oln:return[e.left,e.right];case hUe:return[e.callee].concat(e.arguments);case sln:return[e.test,e.consequent,e.alternate];case aln:return[e.object,e.property];case uln:return e.properties;case tln:return[e.key,e.value];case lln:return[e.argument];case nln:case yE:case eln:default:return[]}}var bg,rn,tt,Gu,Fi,Ij=1,SO=2,vE=3,Ub=4,kj=5,lx=6,cc=7,TO=8,fln=9;bg={};bg[Ij]="Boolean";bg[SO]="<end>";bg[vE]="Identifier";bg[Ub]="Keyword";bg[kj]="Null";bg[lx]="Numeric";bg[cc]="Punctuator";bg[TO]="String";bg[fln]="RegularExpression";var dln="ArrayExpression",hln="BinaryExpression",pln="CallExpression",mln="ConditionalExpression",pUe="Identifier",gln="Literal",yln="LogicalExpression",vln="MemberExpression",bln="ObjectExpression",wln="Property",_ln="UnaryExpression",Pa="Unexpected token %0",Eln="Unexpected number",xln="Unexpected string",Sln="Unexpected identifier",Tln="Unexpected reserved word",Cln="Unexpected end of input",QX="Invalid regular expression",uq="Invalid regular expression: missing /",mUe="Octal literals are not allowed in strict mode.",Aln="Duplicate data property in object literal not allowed in strict mode",su="ILLEGAL",NN="Disabled.",Dln=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Iln=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Rj(e,t){if(!e)throw new Error("ASSERT: "+t)}function s0(e){return e>=48&&e<=57}function Mue(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Yk(e){return"01234567".indexOf(e)>=0}function kln(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function PN(e){return e===10||e===13||e===8232||e===8233}function CO(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Dln.test(String.fromCharCode(e))}function E5(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Iln.test(String.fromCharCode(e))}const Rln={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function gUe(){for(;tt<Gu;){const e=rn.charCodeAt(tt);if(kln(e)||PN(e))++tt;else break}}function JX(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)tt<Gu&&Mue(rn[tt])?(r=rn[tt++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):di({},Pa,su);return String.fromCharCode(i)}function Nln(){var e,t,n,r;for(e=rn[tt],t=0,e==="}"&&di({},Pa,su);tt<Gu&&(e=rn[tt++],!!Mue(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&di({},Pa,su),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function yUe(){var e,t;for(e=rn.charCodeAt(tt++),t=String.fromCharCode(e),e===92&&(rn.charCodeAt(tt)!==117&&di({},Pa,su),++tt,e=JX("u"),(!e||e==="\\"||!CO(e.charCodeAt(0)))&&di({},Pa,su),t=e);tt<Gu&&(e=rn.charCodeAt(tt),!!E5(e));)++tt,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),rn.charCodeAt(tt)!==117&&di({},Pa,su),++tt,e=JX("u"),(!e||e==="\\"||!E5(e.charCodeAt(0)))&&di({},Pa,su),t+=e);return t}function Pln(){var e,t;for(e=tt++;tt<Gu;){if(t=rn.charCodeAt(tt),t===92)return tt=e,yUe();if(E5(t))++tt;else break}return rn.slice(e,tt)}function Oln(){var e,t,n;return e=tt,t=rn.charCodeAt(tt)===92?yUe():Pln(),t.length===1?n=vE:Rln.hasOwnProperty(t)?n=Ub:t==="null"?n=kj:t==="true"||t==="false"?n=Ij:n=vE,{type:n,value:t,start:e,end:tt}}function lq(){var e=tt,t=rn.charCodeAt(tt),n,r=rn[tt],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++tt,{type:cc,value:String.fromCharCode(t),start:e,end:tt};default:if(n=rn.charCodeAt(tt+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return tt+=2,{type:cc,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:tt};case 33:case 61:return tt+=2,rn.charCodeAt(tt)===61&&++tt,{type:cc,value:rn.slice(e,tt),start:e,end:tt}}}if(o=rn.substr(tt,4),o===">>>=")return tt+=4,{type:cc,value:o,start:e,end:tt};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return tt+=3,{type:cc,value:s,start:e,end:tt};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return tt+=2,{type:cc,value:i,start:e,end:tt};if(i==="//"&&di({},Pa,su),"<>=!+-*%&|^/".indexOf(r)>=0)return++tt,{type:cc,value:r,start:e,end:tt};di({},Pa,su)}function Mln(e){let t="";for(;tt<Gu&&Mue(rn[tt]);)t+=rn[tt++];return t.length===0&&di({},Pa,su),CO(rn.charCodeAt(tt))&&di({},Pa,su),{type:lx,value:parseInt("0x"+t,16),start:e,end:tt}}function $ln(e){let t="0"+rn[tt++];for(;tt<Gu&&Yk(rn[tt]);)t+=rn[tt++];return(CO(rn.charCodeAt(tt))||s0(rn.charCodeAt(tt)))&&di({},Pa,su),{type:lx,value:parseInt(t,8),octal:!0,start:e,end:tt}}function pEe(){var e,t,n;if(n=rn[tt],Rj(s0(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=tt,e="",n!=="."){if(e=rn[tt++],n=rn[tt],e==="0"){if(n==="x"||n==="X")return++tt,Mln(t);if(Yk(n))return $ln(t);n&&s0(n.charCodeAt(0))&&di({},Pa,su)}for(;s0(rn.charCodeAt(tt));)e+=rn[tt++];n=rn[tt]}if(n==="."){for(e+=rn[tt++];s0(rn.charCodeAt(tt));)e+=rn[tt++];n=rn[tt]}if(n==="e"||n==="E")if(e+=rn[tt++],n=rn[tt],(n==="+"||n==="-")&&(e+=rn[tt++]),s0(rn.charCodeAt(tt)))for(;s0(rn.charCodeAt(tt));)e+=rn[tt++];else di({},Pa,su);return CO(rn.charCodeAt(tt))&&di({},Pa,su),{type:lx,value:parseFloat(e),start:t,end:tt}}function Fln(){var e="",t,n,r,i,s=!1;for(t=rn[tt],Rj(t==="'"||t==='"',"String literal must starts with a quote"),n=tt,++tt;tt<Gu;)if(r=rn[tt++],r===t){t="";break}else if(r==="\\")if(r=rn[tt++],!r||!PN(r.charCodeAt(0)))switch(r){case"u":case"x":rn[tt]==="{"?(++tt,e+=Nln()):e+=JX(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Yk(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),tt<Gu&&Yk(rn[tt])&&(s=!0,i=i*8+"01234567".indexOf(rn[tt++]),"0123".indexOf(r)>=0&&tt<Gu&&Yk(rn[tt])&&(i=i*8+"01234567".indexOf(rn[tt++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&rn[tt]===`
`&&++tt;else{if(PN(r.charCodeAt(0)))break;e+=r}return t!==""&&di({},Pa,su),{type:TO,value:e,octal:s,start:n,end:tt}}function Lln(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";di({},QX)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{di({},QX)}try{return new RegExp(e,t)}catch{return null}}function Bln(){var e,t,n,r,i;for(e=rn[tt],Rj(e==="/","Regular expression literal must start with a slash"),t=rn[tt++],n=!1,r=!1;tt<Gu;)if(e=rn[tt++],t+=e,e==="\\")e=rn[tt++],PN(e.charCodeAt(0))&&di({},uq),t+=e;else if(PN(e.charCodeAt(0)))di({},uq);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||di({},uq),i=t.substr(1,t.length-2),{value:i,literal:t}}function jln(){var e,t,n;for(t="",n="";tt<Gu&&(e=rn[tt],!!E5(e.charCodeAt(0)));)++tt,e==="\\"&&tt<Gu?di({},Pa,su):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&di({},QX,n),{value:n,literal:t}}function Uln(){var e,t,n,r;return Fi=null,gUe(),e=tt,t=Bln(),n=jln(),r=Lln(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:tt}}function zln(e){return e.type===vE||e.type===Ub||e.type===Ij||e.type===kj}function vUe(){if(gUe(),tt>=Gu)return{type:SO,start:tt,end:tt};const e=rn.charCodeAt(tt);return CO(e)?Oln():e===40||e===41||e===59?lq():e===39||e===34?Fln():e===46?s0(rn.charCodeAt(tt+1))?pEe():lq():s0(e)?pEe():lq()}function vc(){const e=Fi;return tt=e.end,Fi=vUe(),tt=e.end,e}function bUe(){const e=tt;Fi=vUe(),tt=e}function Vln(e){const t=new Ap(dln);return t.elements=e,t}function mEe(e,t,n){const r=new Ap(e==="||"||e==="&&"?yln:hln);return r.operator=e,r.left=t,r.right=n,r}function Hln(e,t){const n=new Ap(pln);return n.callee=e,n.arguments=t,n}function qln(e,t,n){const r=new Ap(mln);return r.test=e,r.consequent=t,r.alternate=n,r}function $ue(e){const t=new Ap(pUe);return t.name=e,t}function YI(e){const t=new Ap(gln);return t.value=e.value,t.raw=rn.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function gEe(e,t,n){const r=new Ap(vln);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Wln(e){const t=new Ap(bln);return t.properties=e,t}function yEe(e,t,n){const r=new Ap(wln);return r.key=t,r.value=n,r.kind=e,r}function Gln(e,t){const n=new Ap(_ln);return n.operator=e,n.argument=t,n.prefix=!0,n}function di(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(Rj(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=tt,n.description=i,n}function Nj(e){e.type===SO&&di(e,Cln),e.type===lx&&di(e,Eln),e.type===TO&&di(e,xln),e.type===vE&&di(e,Sln),e.type===Ub&&di(e,Tln),di(e,Pa,e.value)}function Yu(e){const t=vc();(t.type!==cc||t.value!==e)&&Nj(t)}function gs(e){return Fi.type===cc&&Fi.value===e}function cq(e){return Fi.type===Ub&&Fi.value===e}function Yln(){const e=[];for(tt=Fi.start,Yu("[");!gs("]");)gs(",")?(vc(),e.push(null)):(e.push(bE()),gs("]")||Yu(","));return vc(),Vln(e)}function vEe(){tt=Fi.start;const e=vc();return e.type===TO||e.type===lx?(e.octal&&di(e,mUe),YI(e)):$ue(e.value)}function Kln(){var e,t,n,r;if(tt=Fi.start,e=Fi,e.type===vE)return n=vEe(),Yu(":"),r=bE(),yEe("init",n,r);if(e.type===SO||e.type===cc)Nj(e);else return t=vEe(),Yu(":"),r=bE(),yEe("init",t,r)}function Xln(){var e=[],t,n,r,i={},s=String;for(tt=Fi.start,Yu("{");!gs("}");)t=Kln(),t.key.type===pUe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?di({},Aln):i[r]=!0,e.push(t),gs("}")||Yu(",");return Yu("}"),Wln(e)}function Qln(){Yu("(");const e=Fue();return Yu(")"),e}const Jln={if:1};function Zln(){var e,t,n;if(gs("("))return Qln();if(gs("["))return Yln();if(gs("{"))return Xln();if(e=Fi.type,tt=Fi.start,e===vE||Jln[Fi.value])n=$ue(vc().value);else if(e===TO||e===lx)Fi.octal&&di(Fi,mUe),n=YI(vc());else{if(e===Ub)throw new Error(NN);e===Ij?(t=vc(),t.value=t.value==="true",n=YI(t)):e===kj?(t=vc(),t.value=null,n=YI(t)):gs("/")||gs("/=")?(n=YI(Uln()),bUe()):Nj(vc())}return n}function ecn(){const e=[];if(Yu("("),!gs(")"))for(;tt<Gu&&(e.push(bE()),!gs(")"));)Yu(",");return Yu(")"),e}function tcn(){tt=Fi.start;const e=vc();return zln(e)||Nj(e),$ue(e.value)}function ncn(){return Yu("."),tcn()}function rcn(){Yu("[");const e=Fue();return Yu("]"),e}function icn(){var e,t,n;for(e=Zln();;)if(gs("."))n=ncn(),e=gEe(".",e,n);else if(gs("("))t=ecn(),e=Hln(e,t);else if(gs("["))n=rcn(),e=gEe("[",e,n);else break;return e}function bEe(){const e=icn();if(Fi.type===cc&&(gs("++")||gs("--")))throw new Error(NN);return e}function BF(){var e,t;if(Fi.type!==cc&&Fi.type!==Ub)t=bEe();else{if(gs("++")||gs("--"))throw new Error(NN);if(gs("+")||gs("-")||gs("~")||gs("!"))e=vc(),t=BF(),t=Gln(e.value,t);else{if(cq("delete")||cq("void")||cq("typeof"))throw new Error(NN);t=bEe()}}return t}function wEe(e){let t=0;if(e.type!==cc&&e.type!==Ub)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function scn(){var e,t,n,r,i,s,o,a,u,l;if(e=Fi,u=BF(),r=Fi,i=wEe(r),i===0)return u;for(r.prec=i,vc(),t=[e,Fi],o=BF(),s=[u,r,o];(i=wEe(Fi))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=mEe(a,u,o),s.push(n);r=vc(),r.prec=i,s.push(r),t.push(Fi),n=BF(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=mEe(s[l-1].value,s[l-2],n),l-=2;return n}function bE(){var e,t,n;return e=scn(),gs("?")&&(vc(),t=bE(),Yu(":"),n=bE(),e=qln(e,t,n)),e}function Fue(){const e=bE();if(gs(","))throw new Error(NN);return e}function Lue(e){rn=e,tt=0,Gu=rn.length,Fi=null,bUe();const t=Fue();if(Fi.type!==SO)throw new Error("Unexpect token after expression.");return t}var wUe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function _Ue(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&st("Missing arguments to clamp function."),o.length>3&&st("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&st("Missing arguments to if function."),o.length>3&&st("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function ocn(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function EUe(e){e=e||{};const t=e.allowed?mp(e.allowed):{},n=e.forbidden?mp(e.forbidden):{},r=e.constants||wUe,i=(e.functions||_Ue)(f),s=e.globalvar,o=e.fieldvar,a=cr(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(Bt(p))return p;const m=d[p.type];return m==null&&st("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:vn(n,m)?st("Illegal identifier: "+m):vn(r,m)?r[m]:vn(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[ocn(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&st("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=vn(i,m)&&i[m];return y||st("Unrecognized function: "+m),cr(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const _Ee=Symbol("vega_selection_getter");function xUe(e){return(!e.getter||!e.getter[_Ee])&&(e.getter=Ud(e.field),e.getter[_Ee]=!0),e.getter}const Bue="intersect",EEe="union",acn="vlMulti",ucn="vlPoint",xEe="or",lcn="and",tm="_vgsid_",ON=Ud(tm),ccn="E",fcn="R",dcn="R-E",hcn="R-LE",pcn="R-RE",x5="index:unit";function SEe(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=xUe(a)(e),_1(o)&&(o=zu(o)),_1(r[s])&&(r[s]=zu(r[s])),at(r[s])&&_1(r[s][0])&&(r[s]=r[s].map(zu)),a.type===ccn){if(at(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===fcn){if(!nT(o,r[s]))return!1}else if(a.type===pcn){if(!nT(o,r[s],!0,!1))return!1}else if(a.type===dcn){if(!nT(o,r[s],!1,!1))return!1}else if(a.type===hcn&&!nT(o,r[s],!1,!0))return!1;return!0}function mcn(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[x5]&&r[x5].value:void 0,o=n===Bue,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=SEe(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=SEe(t,l),o^h)return h;return a&&o}const SUe=KE(ON),gcn=SUe.left,ycn=SUe.right;function vcn(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[x5]&&r[x5].value:void 0,o=n===Bue,a=ON(t),u=gcn(i,a);if(u===i.length||ON(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(ycn(i,a)-u<s.size)return!1}return!0}function bcn(e,t){return e.map(n=>lr(t.fields?{values:t.fields.map(r=>xUe(r)(n.datum))}:{[tm]:ON(n.datum)},t))}function wcn(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,b,w=s.length,S=0,E,T;S<w;++S)if(l=s[S],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,T=c.length;E<T;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),b=fq[`${y}_union`],m[d]=b(g,Lt(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(Lt(f).reduce((C,A,I)=>(C[c[I].field]=A,C),{})))}else h=tm,p=ON(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[tm]:p}));if(t=t||EEe,o[tm]?o[tm]=fq[`${tm}_${t}`](...Object.values(o[tm])):Object.keys(o).forEach(C=>{o[C]=Object.keys(o[C]).map(A=>o[C][A]).reduce((A,I)=>A===void 0?I:fq[`${u[C]}_${t}`](A,I))}),s=Object.keys(a),n&&s.length){const C=r?ucn:acn;o[C]=t===EEe?{[xEe]:s.reduce((A,I)=>(A.push(...a[I]),A),[])}:{[lcn]:s.map(A=>({[xEe]:a[A]}))}}return o}var fq={[`${tm}_union`]:J_t,[`${tm}_intersect`]:X_t,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=zu(t[0]),r=zu(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=zu(t[0]),r=zu(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const _cn=":",Ecn="@";function jue(e,t,n,r){t[0].type!==yE&&st("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Yr(t).value,o="unit",a=Ecn+o,u=_cn+i;s===Bue&&!vn(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),vn(r,u)||(r[u]=n.getData(i).tuplesRef())}function TUe(e){const t=this.context.data[e];return t?t.values.value:[]}function xcn(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function Scn(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(zd).insert(t)),1}function Tcn(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const AO=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},Ccn=AO("format"),CUe=AO("timeFormat"),Acn=AO("utcFormat"),Dcn=AO("timeParse"),Icn=AO("utcParse"),c$=new Date(2e3,0,1);function Pj(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(c$.setYear(2e3),c$.setMonth(e),c$.setDate(t),CUe.call(this,c$,n))}function kcn(e){return Pj.call(this,e,1,"%B")}function Rcn(e){return Pj.call(this,e,1,"%b")}function Ncn(e){return Pj.call(this,0,2+e,"%A")}function Pcn(e){return Pj.call(this,0,2+e,"%a")}const Ocn=":",Mcn="@",ZX="%",AUe="$";function Uue(e,t,n,r){t[0].type!==yE&&st("First argument to data functions must be a string literal.");const i=t[0].value,s=Ocn+i;if(!vn(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function $cn(e,t,n,r){t[0].type!==yE&&st("First argument to indata must be a string literal."),t[1].type!==yE&&st("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=Mcn+s;vn(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Ml(e,t,n,r){if(t[0].type===yE)TEe(n,r,t[0].value);else for(e in n.scales)TEe(n,r,e)}function TEe(e,t,n){const r=ZX+n;if(!vn(t,r))try{t[r]=e.scaleRef(n)}catch{}}function wg(e,t){if(cr(e))return e;if(Bt(e)){const n=t.scales[e];return n&&urn(n.value)?n.value:void 0}}function Fcn(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Ml,n._range=Ml,n._scale=Ml;const r=i=>"_["+(i.type===yE?Nt(ZX+i.value):Nt(ZX)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function zue(e,t){return function(n,r,i){if(n){const s=wg(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const Lcn=zue("area",p2t),Bcn=zue("bounds",v2t),jcn=zue("centroid",S2t);function Ucn(e,t){const n=wg(e,(t||this).context);return n&&n.scale()}function zcn(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Vue(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Vcn(){return Vue(this.context.dataflow,"warn",arguments)}function Hcn(){return Vue(this.context.dataflow,"info",arguments)}function qcn(){return Vue(this.context.dataflow,"debug",arguments)}function dq(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function eQ(e){const t=M1(e),n=dq(t.r),r=dq(t.g),i=dq(t.b);return .2126*n+.7152*r+.0722*i}function Wcn(e,t){const n=eQ(e),r=eQ(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function Gcn(){const e=[].slice.call(arguments);return e.unshift({}),lr(...e)}function DUe(e,t){return e===t||e!==e&&t!==t?!0:at(e)?at(t)&&e.length===t.length?Ycn(e,t):!1:jt(e)&&jt(t)?IUe(e,t):!1}function Ycn(e,t){for(let n=0,r=e.length;n<r;++n)if(!DUe(e[n],t[n]))return!1;return!0}function IUe(e,t){for(const n in e)if(!DUe(e[n],t[n]))return!1;return!0}function CEe(e){return t=>IUe(e,t)}function Kcn(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?zd:at(n)||rj(n)?n:CEe(n),c.remove(f)),t&&c.insert(t),r&&(f=CEe(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function Xcn(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function Qcn(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const AEe={};function Jcn(e,t){const n=AEe[t]||(AEe[t]=Ud(t));return at(e)?e.map(n):n(e)}function Hue(e){return at(e)||ArrayBuffer.isView(e)?e:null}function que(e){return Hue(e)||(Bt(e)?e:null)}function Zcn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Hue(e).join(...n)}function efn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return que(e).indexOf(...n)}function tfn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return que(e).lastIndexOf(...n)}function nfn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return que(e).slice(...n)}function rfn(e,t,n){return cr(n)&&st("Function argument passed to replace."),String(e).replace(t,n)}function ifn(e){return Hue(e).slice().reverse()}function sfn(e,t,n){return mae(e||0,t||0,n||0)}function ofn(e,t){const n=wg(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function afn(e,t){const n=wg(e,(t||this).context);return n?n.copy():void 0}function ufn(e,t){const n=wg(e,(t||this).context);return n?n.domain():[]}function lfn(e,t,n){const r=wg(e,(n||this).context);return r?at(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function cfn(e,t){const n=wg(e,(t||this).context);return n&&n.range?n.range():[]}function ffn(e,t,n){const r=wg(e,(n||this).context);return r?r(t):void 0}function dfn(e,t,n,r,i){e=wg(e,(i||this).context);const s=bje(t,n);let o=e.domain(),a=o[0],u=Yr(o),l=el;return u-a?l=aje(e,a,u):e=(e.interpolator?pi("sequential")().interpolator(e.interpolator()):pi("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Yr(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function hfn(e,t,n){const r=wg(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function pfn(e){let t=null;return function(n){return n?DN(n,t=t||t2(e)):e}}const kUe=e=>e.data;function RUe(e,t){const n=TUe.call(t,e);return n.root&&n.root.lookup||{}}function mfn(e,t,n){const r=RUe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(kUe):void 0}function gfn(e,t){const n=RUe(e,this)[t];return n?n.ancestors().map(kUe):void 0}const NUe=()=>typeof window<"u"&&window||null;function yfn(){const e=NUe();return e?e.screen:{}}function vfn(){const e=NUe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function bfn(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function PUe(e,t,n){if(!e)return[];const[r,i]=e,s=new qo().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return g7e(o,s,wfn(t))}function wfn(e){let t=null;if(e){const n=Lt(e.marktype),r=Lt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function _fn(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Lt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function Efn(e){return Lt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function xfn(e,t,n){const{x:r,y:i,mark:s}=n,o=new qo().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),PUe([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>Sfn(u.x,u.y,t))}function Sfn(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const MN={random(){return Hd()},cumulativeNormal:uj,cumulativeLogNormal:Moe,cumulativeUniform:Boe,densityNormal:koe,densityLogNormal:Ooe,densityUniform:Loe,quantileNormal:lj,quantileLogNormal:$oe,quantileUniform:joe,sampleNormal:aj,sampleLogNormal:Poe,sampleUniform:Foe,isArray:at,isBoolean:jb,isDate:_1,isDefined(e){return e!==void 0},isNumber:li,isObject:jt,isRegExp:yBe,isString:Bt,isTuple:rj,isValid(e){return e!=null&&e===e},toBoolean:poe,toDate(e){return moe(e)},toNumber:zu,toString:goe,indexof:efn,join:Zcn,lastindexof:tfn,replace:rfn,reverse:ifn,slice:nfn,flush:mBe,lerp:vBe,merge:Gcn,pad:_Be,peek:Yr,pluck:Jcn,span:aO,inrange:nT,truncate:EBe,rgb:M1,lab:XL,hcl:QL,hsl:YL,luminance:eQ,contrast:Wcn,sequence:Ec,format:Ccn,utcFormat:Acn,utcParse:Icn,utcOffset:$Be,utcSequence:BBe,timeFormat:CUe,timeParse:Dcn,timeOffset:MBe,timeSequence:LBe,timeUnitSpecifier:SBe,monthFormat:kcn,monthAbbrevFormat:Rcn,dayFormat:Ncn,dayAbbrevFormat:Pcn,quarter:fBe,utcquarter:dBe,week:CBe,utcweek:IBe,dayofyear:TBe,utcdayofyear:DBe,warn:Vcn,info:Hcn,debug:qcn,extent(e){return eg(e)},inScope:zcn,intersect:PUe,clampRange:hBe,pinchDistance:Xcn,pinchAngle:Qcn,screen:yfn,containerSize:bfn,windowSize:vfn,bandspace:sfn,setdata:Scn,pathShape:pfn,panLinear:aBe,panLog:uBe,panPow:lBe,panSymlog:cBe,zoomLinear:uoe,zoomLog:loe,zoomPow:n5,zoomSymlog:coe,encode:Tcn,modify:Kcn,lassoAppend:_fn,lassoPath:Efn,intersectLasso:xfn},Tfn=["view","item","group","xy","x","y"],Cfn="event.vega.",OUe="this.",Wue={},MUe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Nt(AUe+e)}]`,functions:Afn,constants:wUe,visitors:Wue},$Ue=EUe(MUe);function Afn(e){const t=_Ue(e);Tfn.forEach(n=>t[n]=Cfn+n);for(const n in MN)t[n]=OUe+n;return lr(t,Fcn(e,MN,Wue)),t}function Ro(e,t,n){return arguments.length===1?MN[e]:(MN[e]=t,n&&(Wue[e]=n),$Ue.functions[e]=OUe+e,this)}Ro("bandwidth",ofn,Ml);Ro("copy",afn,Ml);Ro("domain",ufn,Ml);Ro("range",cfn,Ml);Ro("invert",lfn,Ml);Ro("scale",ffn,Ml);Ro("gradient",dfn,Ml);Ro("geoArea",Lcn,Ml);Ro("geoBounds",Bcn,Ml);Ro("geoCentroid",jcn,Ml);Ro("geoShape",hfn,Ml);Ro("geoScale",Ucn,Ml);Ro("indata",xcn,$cn);Ro("data",TUe,Uue);Ro("treePath",mfn,Uue);Ro("treeAncestors",gfn,Uue);Ro("vlSelectionTest",mcn,jue);Ro("vlSelectionIdTest",vcn,jue);Ro("vlSelectionResolve",wcn,jue);Ro("vlSelectionTuples",bcn);function ng(e,t){const n={};let r;try{e=Bt(e)?e:Nt(e)+"",r=Lue(e)}catch{st("Expression parse error: "+e)}r.visit(s=>{if(s.type!==hUe)return;const o=s.callee.name,a=MUe.visitors[o];a&&a(o,s.arguments,t,n)});const i=$Ue(r);return i.globals.forEach(s=>{const o=AUe+s;!vn(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:lr({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Dfn(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const Ifn=mp(["rule"]),DEe=mp(["group","image","rect"]);function kfn(e,t){let n="";return Ifn[t]||(e.x2&&(e.x?(DEe[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(DEe[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Gue(e){return(e+"").toLowerCase()}function Rfn(e){return Gue(e)==="operator"}function Nfn(e){return Gue(e)==="collect"}function GD(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function Pfn(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var Ofn={operator:(e,t)=>GD(e,["_"],t.code),parameter:(e,t)=>GD(e,["datum","_"],t.code),event:(e,t)=>GD(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return GD(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Nt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=kfn(r,n),i+="return m;",GD(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Nt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),Pfn(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function Mfn(e){const t=this;Rfn(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function $fn(e){const t=this;if(e.params){const n=t.get(e.id);n||st("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Ffn(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=at(i)?i.map(s=>IEe(s,n,t)):IEe(i,n,t)}return t}function IEe(e,t,n){if(!e||!jt(e))return e;for(let r=0,i=kEe.length,s;r<i;++r)if(s=kEe[r],vn(e,s.key))return s.parse(e,t,n);return e}var kEe=[{key:"$ref",parse:Lfn},{key:"$key",parse:jfn},{key:"$expr",parse:Bfn},{key:"$field",parse:Ufn},{key:"$encode",parse:Vfn},{key:"$compare",parse:zfn},{key:"$context",parse:Hfn},{key:"$subflow",parse:qfn},{key:"$tupleid",parse:Wfn}];function Lfn(e,t){return t.get(e.$ref)||st("Operator not defined: "+e.$ref)}function Bfn(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Xc(t.parameterExpression(e.$expr),e.$fields))}function jfn(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=hoe(e.$key,e.$flat,t.expr.codegen))}function Ufn(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Ud(e.$field,e.$name,t.expr.codegen))}function zfn(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Lt(e.$compare).map(i=>i&&i.$tupleid?mn:i);return t.fn[n]||(t.fn[n]=foe(r,e.$order,t.expr.codegen))}function Vfn(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=Xc(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function Hfn(e,t){return t}function qfn(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function Wfn(){return mn}function Gfn(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&st("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Yfn(e){var t=this,n=jt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||st("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const Kfn={skip:!0};function Xfn(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function Qfn(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],Kfn)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(zd).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function FUe(e,t,n,r){return new LUe(e,t,n,r)}function LUe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||Ofn,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function REe(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}LUe.prototype=REe.prototype={fork(){const e=new REe(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),Nfn(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Gue(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Dfn,parseOperator:Mfn,parseOperatorParameters:$fn,parseParameters:Ffn,parseStream:Gfn,parseUpdate:Yfn,getState:Xfn,setState:Qfn};function Jfn(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),BUe(t,e.description()))}function BUe(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Zfn(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const hq="default";function edn(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:hq,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?Bt(i)?i:i.user:hq,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Bt(r)||(i=r.item,r=r.user),tQ(e,r&&r!==hq?r:i||r),i},{cursor:t})}function tQ(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function S5(e,t){var n=e._runtime.data;return vn(n,t)||st("Unrecognized data set: "+t),n[t]}function tdn(e,t){return arguments.length<2?S5(this,e).values.value:Oj.call(this,e,ax().remove(zd).insert(t))}function Oj(e,t){s9e(t)||st("Second argument to changes must be a changeset.");const n=S5(this,e);return n.modified=!0,this.pulse(n.input,t)}function ndn(e,t){return Oj.call(this,e,ax().insert(t))}function rdn(e,t){return Oj.call(this,e,ax().remove(t))}function jUe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function UUe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Mj(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function idn(e){var t=Mj(e),n=jUe(e),r=UUe(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function sdn(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=Mj(e),o=t.changedTouches?t.changedTouches[0]:t,s=Cj(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=odn(e,n,s),t}function odn(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;Bt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:tl(e),item:tl(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const NEe="view",adn="timer",udn="window",ldn={trap:!1};function cdn(e){const t=lr({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{at(r[s])&&(r[s]=mp(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function zUe(e,t,n,r){e._eventListeners.push({type:n,sources:Lt(t),handler:r})}function fdn(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function f$(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||jt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function ddn(e,t,n){var r=this,i=new oj(n),s=function(l,c){r.runAsync(null,()=>{e===NEe&&fdn(r,t)&&l.preventDefault(),i.receive(sdn(r,l,c))})},o;if(e===adn)f$(r,"timer",t)&&r.timer(s,t);else if(e===NEe)f$(r,"view",t)&&r.addEventListener(t,s,ldn);else if(e===udn?f$(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&f$(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);zUe(r,o,t,s)}return i}function PEe(e){return e.item}function OEe(e){return e.item.mark.source}function MEe(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function hdn(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",PEe),OEe,MEe(e)),this.on(this.events("view","pointerout",PEe),OEe,MEe(t)),this}function pdn(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Tf(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const mdn="vega-bind",gdn="vega-bind-name",ydn="vega-bind-radio";function vdn(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=doe(r.debounce,i.update))),(r.input==null&&r.element?bdn:_dn)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function bdn(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),zUe(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(wdn(i))}}function wdn(e){return typeof Event<"u"?new Event(e):{type:e}}function _dn(e,t,n,r){const i=r.signal(n.signal),s=Tf("div",{class:mdn}),o=n.input==="radio"?s:s.appendChild(Tf("label"));o.appendChild(Tf("span",{class:gdn},n.name||n.signal)),t.appendChild(s);let a=Edn;switch(n.input){case"checkbox":a=xdn;break;case"select":a=Sdn;break;case"radio":a=Tdn;break;case"range":a=Cdn;break}a(e,o,n,i)}function Edn(e,t,n,r){const i=Tf("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function xdn(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Tf("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function Sdn(e,t,n,r){const i=Tf("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};T5(o,r)&&(u.selected=!0),i.appendChild(Tf("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(T5(n.options[a],o)){i.selectedIndex=a;return}}}function Tdn(e,t,n,r){const i=Tf("span",{class:ydn}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};T5(o,r)&&(u.checked=!0);const l=Tf("input",u);l.addEventListener("change",()=>e.update(o));const c=Tf("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)T5(a[l].value,o)&&(a[l].checked=!0)}}function Cdn(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||O1(s,i,100),a=Tf("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Tf("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function T5(e,t){return e===t||e+""==t+""}function VUe(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,jUe(e),UUe(e),Mj(e),i,s).background(e.background())}function Yue(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Adn(e,t,n,r){const i=new r(e.loader(),Yue(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Mj(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function Ddn(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=Aj(r);e=n._el=e?pq(n,e,!0):null,Jfn(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||xO,a=e?s.renderer:s.headless;return n._renderer=a?VUe(n,n._renderer,e,a):null,n._handler=Adn(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=pq(n,t,!0):e.appendChild(Tf("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=pq(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{vdn(n,u.element||t,u)})),n}function pq(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const YD=e=>+e||0,Idn=e=>({top:e,bottom:e,left:e,right:e});function $Ee(e){return jt(e)?{top:YD(e.top),bottom:YD(e.bottom),left:YD(e.left),right:YD(e.right)}:Idn(YD(e))}async function Kue(e,t,n,r){const i=Aj(t),s=i&&i.headless;return s||st("Unrecognized renderer type: "+t),await e.runAsync(),VUe(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function kdn(e,t){e!==Kv.Canvas&&e!==Kv.SVG&&e!==Kv.PNG&&st("Unrecognized image type: "+e);const n=await Kue(this,e,t);return e===Kv.SVG?Rdn(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Rdn(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Ndn(e,t){return(await Kue(this,Kv.Canvas,e,t)).canvas()}async function Pdn(e){return(await Kue(this,Kv.SVG,e)).svg()}function Odn(e,t,n){return FUe(e,QC,MN,n).parse(t)}function Mdn(e){var t=this._runtime.scales;return vn(t,e)||st("Unrecognized scale or projection: "+e),t[e].value}var HUe="width",qUe="height",Xue="padding",FEe={skip:!0};function WUe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Xue?r.left+r.right:0)}function GUe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Xue?r.top+r.bottom:0)}function $dn(e){var t=e._signals,n=t[HUe],r=t[qUe],i=t[Xue];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=WUe(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=GUe(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function Fdn(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(HUe,n,FEe),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(qUe,r,FEe),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function Ldn(e){return this._runtime.getState(e||{data:Bdn,signals:jdn,recurse:!0})}function Bdn(e,t){return t.modified&&at(t.input.value)&&!e.startsWith("_:vega:_")}function jdn(e,t){return!(e==="parent"||t instanceof QC.proxy)}function Udn(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function zdn(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(RSt(n,t))}function Vdn(e,t,n,r){const i=e.element();i&&i.setAttribute("title",Hdn(r))}function Hdn(e){return e==null?"":at(e)?YUe(e):jt(e)&&!_1(e)?qdn(e):e+""}function qdn(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(at(n)?YUe(n):KUe(n))}).join(`
`)}function YUe(e){return"["+e.map(KUe).join(", ")+"]"}function KUe(e){return at(e)?"[]":jt(e)&&!_1(e)?"{}":e}function Wdn(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function XUe(e,t){const n=this;if(t=t||{},UT.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=lr({},e.locale,t.locale);n.locale(KBe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Kv.Canvas,n._scenegraph=new Vje;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Vdn,n._redraw=!0,n._handler=new xO().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=cdn(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=Odn(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:lr({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=WUe(n,n._width),n._viewHeight=GUe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,$dn(n),Zfn(n),edn(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function d$(e,t){return vn(e._signals,t)?e._signals[t]:st("Unrecognized signal name: "+Nt(t))}function QUe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function LEe(e,t,n,r){let i=QUe(n,r);return i||(i=Yue(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function BEe(e,t,n){const r=QUe(t,n);return r&&t._targets.remove(r),e}Ot(XUe,UT,{async evaluate(e,t,n){if(await UT.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,idn(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&CF(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&BUe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=d$(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",$Ee(e)):$Ee(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Aj(e)||st("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(UT.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(d$(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Fdn,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=Yue(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return LEe(this,e,d$(this,e),t)},removeSignalListener(e,t){return BEe(this,d$(this,e),t)},addDataListener(e,t){return LEe(this,e,S5(this,e).values,t)},removeDataListener(e,t){return BEe(this,S5(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=tQ(this,null);this._globalCursor=!!e,t&&tQ(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:zdn,events:ddn,finalize:pdn,hover:hdn,data:tdn,change:Oj,insert:ndn,remove:rdn,scale:Mdn,initialize:Ddn,toImageURL:kdn,toCanvas:Ndn,toSVG:Pdn,getState:Ldn,setState:Udn,_watchPixelRatio:Wdn});const Gdn="view",C5="[",A5="]",JUe="{",ZUe="}",Ydn=":",eze=",",Kdn="@",Xdn=">",Qdn=/[[\]{}]/,Jdn={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let tze,nze;function zb(e,t,n){return tze=t||Gdn,nze=n||Jdn,rze(e.trim()).map(nQ)}function Zdn(e){return nze[e]}function Kk(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function rze(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Kk(e,i,eze,C5+JUe,A5+ZUe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function nQ(e){return e[0]==="["?ehn(e):thn(e)}function ehn(e){const t=e.length;let n=1,r;if(n=Kk(e,n,A5,C5,A5),n===t)throw"Empty between selector: "+e;if(r=rze(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Xdn)throw"Expected '>' after between selector: "+e;r=r.map(nQ);const i=nQ(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function thn(e){const t={source:tze},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===ZUe){if(a=e.lastIndexOf(JUe),a>=0){try{r=nhn(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===Kdn&&(i=++a),u=Kk(e,a,Ydn),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=Kk(e,a,C5),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=Kk(e,a,A5),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==C5)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||Qdn.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):Zdn(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function nhn(e){const t=e.split(eze);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function rhn(e){return jt(e)?e:{type:e||"pad"}}const KD=e=>+e||0,ihn=e=>({top:e,bottom:e,left:e,right:e});function shn(e){return jt(e)?e.signal?e:{top:KD(e.top),bottom:KD(e.bottom),left:KD(e.left),right:KD(e.right)}:ihn(KD(e))}const Oa=e=>jt(e)&&!at(e)?lr({},e):{value:e};function jEe(e,t,n,r){return n!=null?(jt(n)&&!at(n)||at(n)&&n.length&&jt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function pu(e,t,n){for(const r in t)jEe(e,r,t[r]);for(const r in n)jEe(e,r,n[r],"update")}function kA(e,t,n){for(const r in t)n&&vn(n,r)||(e[r]=lr(e[r]||{},t[r]));return e}function NS(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const Que="mark",Jue="frame",Zue="scope",ohn="axis",ahn="axis-domain",uhn="axis-grid",lhn="axis-label",chn="axis-tick",fhn="axis-title",dhn="legend",hhn="legend-band",phn="legend-entry",mhn="legend-gradient",ize="legend-label",ghn="legend-symbol",yhn="legend-title",vhn="title",bhn="title-text",whn="title-subtitle";function _hn(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!NS(u,e)&&mq(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===Jue?i.group:n===Que?lr({},i.mark,i[t]):null;for(u in c)l=NS(u,e)||(u==="fill"||u==="stroke")&&(NS("fill",e)||NS("stroke",e)),l||mq(s,u,c[u]);Lt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)NS(h,e)||mq(s,h,d[h])}),e=lr({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=lr(o,e.enter),a&&(e.update=lr(a,e.update)),e}function mq(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const sze=e=>Bt(e)?Nt(e):e.signal?`(${e.signal})`:oze(e);function $j(e){if(e.gradient!=null)return xhn(e);let t=e.signal?`(${e.signal})`:e.color?Ehn(e.color):e.field!=null?oze(e.field):e.value!==void 0?Nt(e.value):void 0;return e.scale!=null&&(t=Shn(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${jF(e.exponent)})`),e.mult!=null&&(t+=`*${jF(e.mult)}`),e.offset!=null&&(t+=`+${jF(e.offset)}`),e.round&&(t=`round(${t})`),t}const h$=(e,t,n,r)=>`(${e}(${[t,n,r].map($j).join(",")})+'')`;function Ehn(e){return e.c?h$("hcl",e.h,e.c,e.l):e.h||e.s?h$("hsl",e.h,e.s,e.l):e.l||e.a?h$("lab",e.l,e.a,e.b):e.r||e.g||e.b?h$("rgb",e.r,e.g,e.b):null}function xhn(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Nt(n));for(;t.length&&Yr(t)==null;)t.pop();return t.unshift(sze(e.gradient)),`gradient(${t.join(",")})`}function jF(e){return jt(e)?"("+$j(e)+")":e}function oze(e){return aze(jt(e)?e:{datum:e})}function aze(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):st("Invalid field reference: "+Nt(e));return e.signal||(r=Bt(r)?yg(r).map(Nt).join("]["):aze(r)),t+"["+r+"]"}function Shn(e,t){const n=sze(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+jF(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function Thn(e){let t="";return e.forEach(n=>{const r=$j(n);t+=n.test?`(${n.test})?${r}:`:r}),Yr(t)===":"&&(t+="null"),t}function uze(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=_hn(e,t,n,r,i.config);for(const a in e)o[a]=Chn(e[a],t,s,i);return s}function Chn(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=Dhn(Ahn(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function Ahn(e){return at(e)?Thn(e):$j(e)}function Dhn(e,t,n,r){const i=ng(e,t);return i.$fields.forEach(s=>r[s]=1),lr(n,i.$params),i.$expr}const Ihn="outer",khn=["value","update","init","react","bind"];function UEe(e,t){st(e+' for "outer" push: '+Nt(t))}function lze(e,t){const n=e.name;if(e.push===Ihn)t.signals[n]||UEe("No prior signal definition",n),khn.forEach(r=>{e[r]!==void 0&&UEe("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function rQ(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function Fj(e,t,n,r){return new rQ(e,t,n,r)}function D5(e,t){return Fj("operator",e,t)}function pn(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function $N(e,t){return t?{$field:e,$name:t}:{$field:e}}const iQ=$N("key");function zEe(e,t){return{$compare:e,$order:t}}function Rhn(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Nhn="ascending",Phn="descending";function Ohn(e){return jt(e)?(e.order===Phn?"-":"+")+Lj(e.op,e.field):""}function Lj(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const ele="scope",sQ="view";function pa(e){return e&&e.signal}function Mhn(e){return e&&e.expr}function UF(e){if(pa(e))return!0;if(jt(e)){for(const t in e)if(UF(e[t]))return!0}return!1}function Nh(e,t){return e??t}function $_(e){return e&&e.signal||e}const VEe="timer";function FN(e,t){return(e.merge?Fhn:e.stream?Lhn:e.type?Bhn:st("Invalid stream specification: "+Nt(e)))(e,t)}function $hn(e){return e===ele?sQ:e||sQ}function Fhn(e,t){const n=e.merge.map(i=>FN(i,t)),r=tle({merge:n},e,t);return t.addStream(r).id}function Lhn(e,t){const n=FN(e.stream,t),r=tle({stream:n},e,t);return t.addStream(r).id}function Bhn(e,t){let n;e.type===VEe?(n=t.event(VEe,e.throttle),e={between:e.between,filter:e.filter}):n=t.event($hn(e.source),e.type);const r=tle({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function tle(e,t,n){let r=t.between;return r&&(r.length!==2&&st('Stream "between" parameter must have 2 entries: '+Nt(t)),e.between=[FN(r[0],n),FN(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(jhn(t.marktype,t.markname,t.markrole)),t.source===ele&&r.push("inScope(event.item)"),r.length&&(e.filter=ng("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function jhn(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const Uhn={code:"_.$value",ast:{type:"Identifier",value:"value"}};function zhn(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||st("Signal update missing events specification."),Bt(s)&&(s=zb(s,t.isSubscope()?ele:sQ)),s=Lt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[Hhn(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&st("Signal encode and update are mutually exclusive."),o="encode(item(),"+Nt(r)+")"),i.update=Bt(o)?ng(o,t):o.expr!=null?ng(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:Uhn,$params:{$value:t.signalRef(o.signal)}}:st("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(lr(Vhn(u,t),i)))}function Vhn(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):FN(e,t)}}function Hhn(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function qhn(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?st("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=ng(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>zhn(i,t,n.id))}const Yi=e=>(t,n,r)=>Fj(e,n,t||void 0,r),cze=Yi("aggregate"),Whn=Yi("axisticks"),fze=Yi("bound"),Dp=Yi("collect"),HEe=Yi("compare"),Ghn=Yi("datajoin"),dze=Yi("encode"),Yhn=Yi("expression"),Khn=Yi("facet"),Xhn=Yi("field"),Qhn=Yi("key"),Jhn=Yi("legendentries"),Zhn=Yi("load"),epn=Yi("mark"),tpn=Yi("multiextent"),npn=Yi("multivalues"),rpn=Yi("overlap"),ipn=Yi("params"),hze=Yi("prefacet"),spn=Yi("projection"),opn=Yi("proxy"),apn=Yi("relay"),pze=Yi("render"),upn=Yi("scale"),cx=Yi("sieve"),lpn=Yi("sortitems"),mze=Yi("viewlayout"),cpn=Yi("values");let fpn=0;const gze={min:"min",max:"max",count:"sum"};function dpn(e,t){const n=e.type||"linear";tje(n)||st("Unrecognized scale type: "+Nt(n)),t.addScale(e.name,{type:n,domain:void 0})}function hpn(e,t){const n=t.getScale(e.name).params;let r;n.domain=yze(e.domain,e,t),e.range!=null&&(n.range=bze(e,t,n)),e.interpolate!=null&&xpn(e.interpolate,n),e.nice!=null&&(n.nice=Epn(e.nice,t)),e.bins!=null&&(n.bins=_pn(e.bins,t));for(r in e)vn(n,r)||r==="name"||(n[r]=Id(e[r],t))}function Id(e,t){return jt(e)?e.signal?t.signalRef(e.signal):st("Unsupported object: "+Nt(e)):e}function zF(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Id(n,t))}function Bj(e){st("Can not find data set: "+Nt(e))}function yze(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&st("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(at(e)?ppn:e.fields?gpn:mpn)(e,t,n)}function ppn(e,t,n){return e.map(r=>Id(r,n))}function mpn(e,t,n){const r=n.getData(e.data);return r||Bj(e.data),e2(t.type)?r.valuesRef(n,e.field,vze(e.sort,!1)):ije(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function gpn(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=Bt(o)?{data:r,field:o}:at(o)||o.signal?ypn(o,n):o,s.push(o),s),[]);return(e2(t.type)?vpn:ije(t.type)?bpn:wpn)(e,n,i)}function ypn(e,t){const n="_:vega:_"+fpn++,r=Dp({});if(at(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Nt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,cx({})]),{data:n,field:"data"}}function vpn(e,t,n){const r=vze(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||Bj(l.data),c.countsRef(t,l.field,r)}),a={groupby:iQ,pulse:o};r&&(i=r.op||"count",s=r.field?Lj(i,r.field):"count",a.ops=[gze[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(cze(a));const u=t.add(Dp({pulse:pn(i)}));return s=t.add(cpn({field:iQ,sort:t.sortRef(r),pulse:pn(u)})),pn(s)}function vze(e,t){return e&&(!e.field&&!e.op?jt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?st("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!gze[e.op]&&st("Multiple domain scales can not be sorted using "+e.op)),e}function bpn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||Bj(i.data),s.domainRef(t,i.field)});return pn(t.add(npn({values:r})))}function wpn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||Bj(i.data),s.extentRef(t,i.field)});return pn(t.add(tpn({extents:r})))}function _pn(e,t){return e.signal||at(e)?zF(e,t):t.objectProperty(e)}function Epn(e,t){return e.signal?t.signalRef(e.signal):jt(e)?{interval:Id(e.interval),step:Id(e.step)}:Id(e)}function xpn(e,t){t.interpolate=Id(e.type||e),e.gamma!=null&&(t.interpolateGamma=Id(e.gamma))}function bze(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Bt(i)){if(r&&vn(r,i))return e=lr({},e,{range:r[i]}),bze(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=e2(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:st("Unrecognized scale range value: "+Nt(i))}else if(i.scheme){n.scheme=at(i.scheme)?zF(i.scheme,t):Id(i.scheme,t),i.extent&&(n.schemeExtent=zF(i.extent,t)),i.count&&(n.schemeCount=Id(i.count,t));return}else if(i.step){n.rangeStep=Id(i.step,t);return}else{if(e2(e.type)&&!at(i))return yze(i,e,t);at(i)||st("Unsupported range type: "+Nt(i))}return i.map(s=>(at(s)?zF:Id)(s,t))}function Spn(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=oQ(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=oQ(n[i],i,t));t.addProjection(e.name,r)}function oQ(e,t,n){return at(e)?e.map(r=>oQ(r,t,n)):jt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:st("Unsupported parameter object: "+Nt(e)):e}const Ip="top",RA="left",NA="right",ob="bottom",wze="center",Tpn="vertical",Cpn="start",Apn="middle",Dpn="end",aQ="index",nle="label",Ipn="offset",s2="perc",kpn="perc2",Nd="value",DO="guide-label",rle="guide-title",Rpn="group-title",Npn="group-subtitle",qEe="symbol",VF="gradient",uQ="discrete",lQ="size",Ppn="shape",Opn="fill",Mpn="stroke",$pn="strokeWidth",Fpn="strokeDash",Lpn="opacity",ile=[lQ,Ppn,Opn,Mpn,$pn,Fpn,Lpn],IO={name:1,style:1,interactive:1},Zr={value:0},Pd={value:1},jj="group",_ze="rect",sle="rule",Bpn="symbol",fx="text";function LN(e){return e.type=jj,e.interactive=e.interactive||!1,e}function Qc(e,t){const n=(r,i)=>Nh(e[r],Nh(t[r],i));return n.isVertical=r=>Tpn===Nh(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Nh(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Nh(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Nh(e.columns,Nh(t.columns,+n.isVertical(!0))),n}function Eze(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function jpn(e,t,n){const r=t.config.style[n];return r&&r[e]}function Uj(e,t,n){return`item.anchor === '${Cpn}' ? ${e} : item.anchor === '${Dpn}' ? ${t} : ${n}`}const ole=Uj(Nt(RA),Nt(NA),Nt(wze));function Upn(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},jt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function xze(e,t){return t?e?jt(e)?Object.assign({},e,{offset:xze(e.offset,t)}):{value:e,offset:t}:t:e}function jf(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=kA(e.encode,t,IO)):e.interactive=!1,e}function zpn(e,t,n,r){const i=Qc(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:Zr,x:Zr,y:Zr,width:Oa(f),height:Oa(d)},update:lr({},u,{opacity:Pd,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:Zr}};return pu(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),jf({type:_ze,role:mhn,encode:h},r)}function Vpn(e,t,n,r,i){const s=Qc(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:Zr,fill:{scale:t,field:Nd}};p[l]={signal:h+"datum."+s2,mult:u},p[c]=Zr,p[f]={signal:h+"datum."+kpn,mult:u},p[d]=Oa(a);const m={enter:p,update:lr({},p,{opacity:Pd}),exit:{opacity:Zr}};return pu(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),jf({type:_ze,role:hhn,key:Nd,from:i,encode:m},r)}const Hpn=`datum.${s2}<=0?"${RA}":datum.${s2}>=1?"${NA}":"${wze}"`,qpn=`datum.${s2}<=0?"${ob}":datum.${s2}>=1?"${Ip}":"${Apn}"`;function WEe(e,t,n,r){const i=Qc(e,t),s=i.isVertical(),o=Oa(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:Zr},update:c={opacity:Pd,text:{field:nle}},exit:{opacity:Zr}};return pu(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Nh(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:qpn},f="y",d="x",h="1-"):(l.align=c.align={signal:Hpn},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+s2,mult:a},l[d]=c[d]=o,o.offset=Nh(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+aQ}:void 0,jf({type:fx,role:ize,style:DO,key:Nd,from:r,encode:p,overlap:u},n)}function Wpn(e,t,n,r,i){const s=Qc(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${Ipn} : datum.${lQ}`,h=l?Oa(l):{field:lQ},p=`datum.${aQ}`,m=`max(1, ${i})`;let g,y,b,w,S;h.mult=.5,g={enter:y={opacity:Zr,x:{signal:d,mult:.5,offset:c},y:h},update:b={opacity:Pd,x:y.x,y:y.y},exit:{opacity:Zr}};let E=null,T=null;e.fill||(E=t.symbolBaseFillColor,T=t.symbolBaseStrokeColor),pu(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",T),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),ile.forEach(k=>{e[k]&&(b[k]=y[k]={scale:e[k],field:Nd})});const C=jf({type:Bpn,role:ghn,key:Nd,from:f,clip:l?!0:void 0,encode:g},n.symbols),A=Oa(c);A.offset=s("labelOffset"),g={enter:y={opacity:Zr,x:{signal:d,offset:A},y:h},update:b={opacity:Pd,text:{field:nle},x:y.x,y:y.y},exit:{opacity:Zr}},pu(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const I=jf({type:fx,role:ize,style:DO,key:Nd,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:Zr,height:l?Oa(l):Zr,opacity:Zr},exit:{opacity:Zr},update:b={opacity:Pd,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(w=`ceil(item.mark.items.length / ${m})`,b.row.signal=`${p}%${w}`,b.column.signal=`floor(${p} / ${w})`,S={field:["row",p]}):(b.row.signal=`floor(${p} / ${m})`,b.column.signal=`${p} % ${m}`,S={field:p}),b.column.signal=`(${i})?${b.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:aQ}},LN({role:Zue,from:r,encode:kA(g,o,IO),marks:[C,I],name:u,interactive:a,sort:S})}function Gpn(e,t){const n=Qc(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const ale='item.orient === "left"',ule='item.orient === "right"',zj=`(${ale} || ${ule})`,Ypn=`datum.vgrad && ${zj}`,Kpn=Uj('"top"','"bottom"','"middle"'),Xpn=Uj('"right"','"left"','"center"'),Qpn=`datum.vgrad && ${ule} ? (${Xpn}) : (${zj} && !(datum.vgrad && ${ale})) ? "left" : ${ole}`,Jpn=`item._anchor || (${zj} ? "middle" : "start")`,Zpn=`${Ypn} ? (${ale} ? -90 : 90) : 0`,emn=`${zj} ? (datum.vgrad ? (${ule} ? "bottom" : "top") : ${Kpn}) : "top"`;function tmn(e,t,n,r){const i=Qc(e,t),s={enter:{opacity:Zr},update:{opacity:Pd,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Zr}};return pu(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Jpn},angle:{signal:Zpn},align:{signal:Qpn},baseline:{signal:emn},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),jf({type:fx,role:yhn,style:rle,from:r,encode:s},n)}function nmn(e,t){let n;return jt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+GEe(e.path)+")":e.sphere&&(n="geoShape("+GEe(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function GEe(e){return jt(e)&&e.signal?e.signal:Nt(e)}function Sze(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===jj?Zue:t||Que}function rmn(e){return{marktype:e.type,name:e.name||void 0,role:e.role||Sze(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function imn(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function lle(e,t){const n=u9e(e.type);n||st("Unrecognized transform type: "+Nt(e.type));const r=Fj(n.type.toLowerCase(),null,Tze(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function Tze(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=smn(o,t,n)}return r}function smn(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return omn(e,t,n);if(i===void 0){e.required&&st("Missing required "+Nt(t.type)+" parameter: "+Nt(e.name));return}else{if(r==="param")return amn(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!pa(i)?i.map(s=>YEe(e,s,n)):YEe(e,i,n)}function YEe(e,t,n){const r=e.type;if(pa(t))return XEe(r)?st("Expression references can not be signals."):gq(r)?n.fieldRef(t):QEe(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||gq(r);return i&&umn(t)?n.exprRef(t.expr,t.as):i&&lmn(t)?$N(t.field,t.as):XEe(r)?ng(t,n):cmn(r)?pn(n.getData(t).values):gq(r)?$N(t):QEe(r)?n.compareRef(t):t}}function omn(e,t,n){return Bt(t.from)||st('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function amn(e,t,n){const r=t[e.name];return e.array?(at(r)||st("Expected an array of sub-parameters. Instead: "+Nt(r)),r.map(i=>KEe(e,i,n))):KEe(e,r,n)}function KEe(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||st("Unsupported parameter: "+Nt(t));const s=lr(Tze(i,t,n),i.key);return pn(n.add(ipn(s)))}const umn=e=>e&&e.expr,lmn=e=>e&&e.field,cmn=e=>e==="data",XEe=e=>e==="expr",gq=e=>e==="field",QEe=e=>e==="compare";function fmn(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||st("Only group marks can be faceted."),r.field!=null?o=a=HF(r,n):(e.data?a=pn(n.getData(e.data).aggregate):(s=lle(lr({type:"aggregate",groupby:Lt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=HF(r,n),o=a=pn(n.add(s))),i=n.keyRef(r.groupby,!0))):o=pn(n.add(Dp(null,[{}]))),o||(o=HF(e,n)),{key:i,pulse:o,parent:a}}function HF(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:pn(t.getData(e.data).output)}function wE(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}wE.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=pn(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new wE(e,s,i,r,o)};function Cze(e){return Bt(e)?e:null}function JEe(e,t,n){const r=Lj(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function XD(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=Ohn(s);let l=Cze(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:iQ,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:pn(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(Fj(r,void 0,d)),o&&(t.index[i]=f),c=pn(f),l!=null&&(a[l]=c)}return c}wE.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=Cze(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&JEe(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:pn(r.output)},n&&n.field&&JEe(e,u,n),a=e.add(cze(u)),o=e.add(Dp({pulse:pn(a)})),o={agg:a,ref:pn(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return pn(this.values)},extentRef(e,t){return XD(e,this,"extent","extent",t,!1)},domainRef(e,t){return XD(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return XD(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return XD(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return XD(e,this,"indata","tupleindex",t,!0,!0)}};function dmn(e,t,n){const r=e.from.facet,i=r.name,s=HF(r,t);let o;r.name||st("Facet must have a name: "+Nt(r)),r.data||st("Facet must reference a data set: "+Nt(r)),r.field?o=t.add(hze({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(Khn({key:t.keyRef(r.groupby),group:pn(t.proxy(n.parent)),pulse:s})):st("Facet must specify groupby or field: "+Nt(r));const a=t.fork(),u=a.add(Dp()),l=a.add(cx({pulse:pn(u)}));a.addData(i,new wE(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function hmn(e,t,n){const r=t.add(hze({pulse:n.pulse})),i=t.fork();i.add(cx()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function Aze(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(D5()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=ng(l,t);u.update=c.$expr,u.params=c.$params}function Vj(e,t){const n=Sze(e),r=e.type===jj,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Zue||n===Jue,a,u,l,c,f,d,h;const p=n===Que||o||i,m=fmn(e.from,r,t);u=t.add(Ghn({key:m.key||(e.key?$N(e.key):void 0),pulse:m.pulse,clean:!r}));const g=pn(u);u=l=t.add(Dp({pulse:g})),u=t.add(epn({markdef:rmn(e),interactive:imn(e.interactive,t),clip:nmn(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:pn(u)}));const y=pn(u);u=c=t.add(dze(uze(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(T=>{const C=lle(T,t),A=C.metadata;(A.generates||A.changes)&&st("Mark transforms should not generate new data."),A.nomod||(c.params.mod=!0),C.params.pulse=pn(u),t.add(u=C)}),e.sort&&(u=t.add(lpn({sort:t.compareRef(e.sort),pulse:pn(u)})));const b=pn(u);(i||o)&&(o=t.add(mze({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:b})),d=pn(o));const w=t.add(fze({mark:y,pulse:d||b}));h=pn(w),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(b,d||h,g),i?dmn(e,t,m):p?hmn(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(w))),s&&(h=pmn(s,h,t));const S=t.add(pze({pulse:h})),E=t.add(cx({pulse:pn(S)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new wE(t,l,S,E)),e.on&&e.on.forEach(T=>{(T.insert||T.remove||T.toggle)&&st("Marks only support modify triggers."),Aze(T,t,f)}))}function pmn(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:pa(s)?n.signalRef(s.signal):s,method:pa(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=pa(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return pn(n.add(rpn(o)))}function mmn(e,t){const n=t.config.legend,r=e.encode||{},i=Qc(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;ile.forEach(w=>e[w]?(l[w]=e[w],c=c||e[w]):0),c||st("Missing valid scale for legend.");const p=gmn(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=pn(t.add(Dp(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},b=pn(t.add(Jhn(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===VF?(h=[zpn(e,c,n,r.gradient),WEe(e,n,r.labels,b)],d.count=d.count||t.signalRef(`max(2,2*floor((${$_(i.gradientLength())})/100))`)):p===uQ?h=[Vpn(e,c,n,r.gradient,b),WEe(e,n,r.labels,b)]:(f=Gpn(e,n),h=[Wpn(e,n,r,b,$_(f.columns))],d.size=bmn(e,t,h[0].marks)),h=[LN({role:phn,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(tmn(e,n,r.title,g)),Vj(LN({role:dhn,from:g,encode:kA(vmn(i,e,n),s,IO),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function gmn(e,t){let n=e.type||qEe;return!e.type&&ymn(e)===1&&(e.fill||e.stroke)&&(n=wae(t)?VF:SX(t)?uQ:qEe),n!==VF?n:SX(t)?uQ:VF}function ymn(e){return ile.reduce((t,n)=>t+(e[n]?1:0),0)}function vmn(e,t,n){const r={enter:{},update:{}};return pu(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function bmn(e,t,n){const r=$_(ZEe("size",e,n)),i=$_(ZEe("strokeWidth",e,n)),s=$_(wmn(n[1].encode,t,DO));return ng(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function ZEe(e,t,n){return t[e]?`scale("${t[e]}",datum)`:Eze(e,n[0].encode)}function wmn(e,t,n){return Eze("fontSize",e)||jpn("fontSize",t,n)}const _mn=`item.orient==="${RA}"?-90:item.orient==="${NA}"?90:0`;function Emn(e,t){e=Bt(e)?{text:e}:e;const n=Qc(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=pn(t.add(Dp(null,[l])));return u.push(Tmn(e,n,xmn(e),c)),e.subtitle&&u.push(Cmn(e,n,r.subtitle,c)),Vj(LN({role:vhn,from:c,encode:Smn(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function xmn(e){const t=e.encode;return t&&t.title||lr({name:e.name,interactive:e.interactive,style:e.style},t)}function Smn(e,t){const n={enter:{},update:{}};return pu(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:ole},angle:{signal:_mn},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),kA(n,t,IO)}function Tmn(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return pu(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),jf({type:fx,role:bhn,style:Rpn,from:r,encode:o},n)}function Cmn(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return pu(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),jf({type:fx,role:whn,style:Npn,from:r,encode:o},n)}function Amn(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(lle(r,t))}),e.on&&e.on.forEach(r=>{Aze(r,t,e.name)}),t.addDataPipeline(e.name,Dmn(e,t,n))}function Dmn(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?pa(e.values)||UF(e.format)?(r.push(exe(t,e)),r.push(i=vw())):r.push(i=vw({$ingest:e.values,$format:e.format})):e.url?UF(e.url)||UF(e.format)?(r.push(exe(t,e)),r.push(i=vw())):r.push(i=vw({$request:e.url,$format:e.format})):e.source&&(i=a=Lt(e.source).map(d=>pn(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=vw()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=apn({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,vw())),i||r.push(vw()),r.push(cx({})),r}function vw(e){const t=Dp({},e);return t.metadata={source:!0},t}function exe(e,t){return Zhn({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const Dze=e=>e===ob||e===Ip,Hj=(e,t,n)=>pa(e)?Nmn(e.signal,t,n):e===RA||e===Ip?t:n,Ma=(e,t,n)=>pa(e)?kmn(e.signal,t,n):Dze(e)?t:n,op=(e,t,n)=>pa(e)?Rmn(e.signal,t,n):Dze(e)?n:t,Ize=(e,t,n)=>pa(e)?Pmn(e.signal,t,n):e===Ip?{value:t}:{value:n},Imn=(e,t,n)=>pa(e)?Omn(e.signal,t,n):e===NA?{value:t}:{value:n},kmn=(e,t,n)=>kze(`${e} === '${Ip}' || ${e} === '${ob}'`,t,n),Rmn=(e,t,n)=>kze(`${e} !== '${Ip}' && ${e} !== '${ob}'`,t,n),Nmn=(e,t,n)=>cle(`${e} === '${RA}' || ${e} === '${Ip}'`,t,n),Pmn=(e,t,n)=>cle(`${e} === '${Ip}'`,t,n),Omn=(e,t,n)=>cle(`${e} === '${NA}'`,t,n),kze=(e,t,n)=>(t=t!=null?Oa(t):t,n=n!=null?Oa(n):n,txe(t)&&txe(n)?(t=t?t.signal||Nt(t.value):null,n=n?n.signal||Nt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[lr({test:e},t)].concat(n||[])),txe=e=>e==null||Object.keys(e).length===1,cle=(e,t,n)=>({signal:`${e} ? (${sT(t)}) : (${sT(n)})`}),Mmn=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${RA}' ? (${sT(r)}) : `:"")+(n!=null?`${e} === '${ob}' ? (${sT(n)}) : `:"")+(i!=null?`${e} === '${NA}' ? (${sT(i)}) : `:"")+(t!=null?`${e} === '${Ip}' ? (${sT(t)}) : `:"")+"(null)"}),sT=e=>pa(e)?e.signal:e==null?null:Nt(e),$mn=(e,t)=>t===0?0:pa(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},zT=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function fS(e,t,n,r){let i;if(t&&vn(t,e))return t[e];if(vn(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[rle][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[DO][i]}return null}function nxe(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function Fmn(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(pa(o)){const f=nxe([n.axisX,n.axisY]),d=nxe([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=Ma(o,fS(l,n.axisX,i,r),fS(l,n.axisY,i,r));u={};for(l of d)u[l]=Mmn(o.signal,fS(l,n.axisTop,i,r),fS(l,n.axisBottom,i,r),fS(l,n.axisLeft,i,r),fS(l,n.axisRight,i,r))}else a=o===Ip||o===ob?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?lr({},i,a,u,s):i}function Lmn(e,t,n,r){const i=Qc(e,t),s=e.orient;let o,a;const u={enter:o={opacity:Zr},update:a={opacity:Pd},exit:{opacity:Zr}};pu(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=rxe(e,0),c=rxe(e,1);return o.x=a.x=Ma(s,l,Zr),o.x2=a.x2=Ma(s,c),o.y=a.y=op(s,l,Zr),o.y2=a.y2=op(s,c),jf({type:sle,role:ahn,from:r,encode:u},n)}function rxe(e,t){return{scale:e.scale,range:t}}function Bmn(e,t,n,r,i){const s=Qc(e,t),o=e.orient,a=e.gridScale,u=Hj(o,1,-1),l=jmn(e.offset,u);let c,f,d;const h={enter:c={opacity:Zr},update:d={opacity:Pd},exit:f={opacity:Zr}};pu(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Nd,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=Ma(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:lr(m,{mult:u,offset:l});return c.x=d.x=Ma(o,p,g),c.y=d.y=op(o,p,g),c.x2=d.x2=op(o,y),c.y2=d.y2=Ma(o,y),f.x=Ma(o,p),f.y=op(o,p),jf({type:sle,role:uhn,key:Nd,from:r,encode:h},n)}function jmn(e,t){if(t!==1)if(!jt(e))e=pa(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=lr({},e);for(;n.mult!=null;)if(jt(n.mult))n=n.mult=lr({},n.mult);else return n.mult=pa(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function Umn(e,t,n,r,i,s){const o=Qc(e,t),a=e.orient,u=Hj(a,-1,1);let l,c,f;const d={enter:l={opacity:Zr},update:f={opacity:Pd},exit:c={opacity:Zr}};pu(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=Oa(i);h.mult=u;const p={scale:e.scale,field:Nd,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=Ma(a,Zr,p),f.y2=l.y2=Ma(a,h),c.x=Ma(a,p),f.x=l.x=op(a,Zr,p),f.x2=l.x2=op(a,h),c.y=op(a,p),jf({type:sle,role:chn,key:Nd,from:r,encode:d},n)}function yq(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function zmn(e,t,n,r,i,s){const o=Qc(e,t),a=e.orient,u=e.scale,l=Hj(a,-1,1),c=$_(o("labelFlush")),f=$_(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=Oa(i);g.mult=l,g.offset=Oa(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:Nd,band:.5,offset:xze(s.offset,o("labelOffset"))},b=Ma(a,p?yq(u,c,'"left"','"right"','"center"'):{value:"center"},Imn(a,"left","right")),w=Ma(a,Ize(a,"bottom","top"),p?yq(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),S=yq(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:Zr,x:Ma(a,y,g),y:op(a,y,g)},T={enter:E,update:m={opacity:Pd,text:{field:nle},x:E.x,y:E.y,align:b,baseline:w},exit:{opacity:Zr,x:E.x,y:E.y}};pu(T,{dx:!d&&p?Ma(a,S):null,dy:!h&&p?op(a,S):null}),pu(T,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const C=o("labelBound");let A=o("labelOverlap");return A=A||C?{separation:o("labelSeparation"),method:A,order:"datum.index",bound:C?{scale:u,orient:a,tolerance:C}:null}:void 0,m.align!==b&&(m.align=zT(m.align,b)),m.baseline!==w&&(m.baseline=zT(m.baseline,w)),jf({type:fx,role:lhn,style:DO,key:Nd,from:r,encode:T,overlap:A},n)}function Vmn(e,t,n,r){const i=Qc(e,t),s=e.orient,o=Hj(s,-1,1);let a,u;const l={enter:a={opacity:Zr,anchor:Oa(i("titleAnchor",null)),align:{signal:ole}},update:u=lr({},a,{opacity:Pd,text:Oa(e.title)}),exit:{opacity:Zr}},c={signal:`lerp(range("${e.scale}"), ${Uj(0,1,.5)})`};return u.x=Ma(s,c),u.y=op(s,c),a.angle=Ma(s,Zr,$mn(o,90)),a.baseline=Ma(s,Ize(s,ob,Ip),{value:ob}),u.angle=a.angle,u.baseline=a.baseline,pu(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),Hmn(i,s,l,n),l.update.align=zT(l.update.align,a.align),l.update.angle=zT(l.update.angle,a.angle),l.update.baseline=zT(l.update.baseline,a.baseline),jf({type:fx,role:fhn,style:rle,from:r,encode:l},n)}function Hmn(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=zT(Oa(a),n.update[u]),!1):!NS(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?Oa(o):Ma(t,Oa(o),Oa(s))}function qmn(e,t){const n=Fmn(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=Qc(e,n),l=Upn(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=pn(t.add(Dp({},[c]))),d=pn(t.add(Whn({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(Bmn(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(Umn(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(zmn(e,n,r.labels,d,p,l))),c.domain&&h.push(Lmn(e,n,r.domain,f)),c.title&&h.push(Vmn(e,n,r.title,f)),Vj(LN({role:ohn,from:f,encode:kA(Wmn(u,e),i,IO),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function Wmn(e,t){const n={enter:{},update:{}};return pu(n,{orient:e("orient"),offset:e("offset")||0,position:Nh(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function Rze(e,t,n){const r=Lt(e.signals),i=Lt(e.scales);return n||r.forEach(s=>lze(s,t)),Lt(e.projections).forEach(s=>Spn(s,t)),i.forEach(s=>dpn(s,t)),Lt(e.data).forEach(s=>Amn(s,t)),i.forEach(s=>hpn(s,t)),(n||r).forEach(s=>qhn(s,t)),Lt(e.axes).forEach(s=>qmn(s,t)),Lt(e.marks).forEach(s=>Vj(s,t)),Lt(e.legends).forEach(s=>mmn(s,t)),e.title&&Emn(e.title,t),t.parseLambdas(),t}const Gmn=e=>kA({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Ymn(e,t){const n=t.config,r=pn(t.root=t.add(D5())),i=Kmn(e,n);i.forEach(l=>lze(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Dp()),o=t.add(dze(uze(Gmn(e.encode),jj,Jue,e.style,t,{pulse:pn(s)}))),a=t.add(mze({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:pn(o)}));t.operators.pop(),t.pushState(pn(o),pn(a),null),Rze(e,t,i),t.operators.push(a);let u=t.add(fze({mark:r,pulse:pn(a)}));return u=t.add(pze({pulse:pn(u)})),u=t.add(cx({pulse:pn(u)})),t.addData("root",new wE(t,s,s,u)),t}function QD(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Kmn(e,t){const n=o=>Nh(e[o],t[o]),r=[QD("background",n("background")),QD("autosize",rhn(n("autosize"))),QD("padding",shn(n("padding"))),QD("width",n("width")||0),QD("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return Lt(e.signals).forEach(o=>{vn(i,o.name)?o=lr(i[o.name],o):r.push(o),s[o.name]=o}),Lt(t.signals).forEach(o=>{!vn(s,o.name)&&!vn(i,o.name)&&r.push(o)}),r}function Nze(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function ixe(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}Nze.prototype=ixe.prototype={parse(e){return Rze(e,this)},fork(){return new ixe(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof rQ?pn(e):e;return this.add(opn({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(pn(this.add(cx({pulse:e})))),this._parent.push(t),this._lookup.push(n?pn(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Yr(this._parent)},encode(){return Yr(this._encode)},lookup(){return Yr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Bt(e))return $N(e,t);e.signal||st("Unsupported field reference: "+Nt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=pn(this.add(Xhn(i)))}return r},compareRef(e){let t=!1;const n=s=>pa(s)?(t=!0,this.signalRef(s.signal)):Mhn(s)?(t=!0,this.exprRef(s.expr)):s,r=Lt(e.field).map(n),i=Lt(e.order).map(n);return t?pn(this.add(HEe({fields:r,orders:i}))):zEe(r,i)},keyRef(e,t){let n=!1;const r=s=>pa(s)?(n=!0,pn(i[s.signal])):s,i=this.signals;return e=Lt(e).map(r),n?pn(this.add(Qhn({fields:e,flat:t}))):Rhn(e,t)},sortRef(e){if(!e)return e;const t=Lj(e.op,e.field),n=e.order||Nhn;return n.signal?pn(this.add(HEe({fields:t,orders:this.signalRef(n.signal)}))):zEe(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return vn(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&st("Duplicate signal name: "+Nt(e));const n=t instanceof rQ?t:this.add(D5(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||st("Unrecognized signal name: "+Nt(e)),this.signals[e]},signalRef(e){return this.signals[e]?pn(this.signals[e]):(vn(this.lambdas,e)||(this.lambdas[e]=this.add(D5(null))),pn(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=ng(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!jt(e)?e:this.signalRef(e.signal||fle(e))},exprRef(e,t){const n={expr:ng(e,this)};return t&&(n.expr.$name=t),pn(this.add(Yhn(n)))},addBinding(e,t){this.bindings||st("Nested signals do not support binding: "+Nt(e)),this.bindings.push(lr({signal:e},t))},addScaleProj(e,t){vn(this.scales,e)&&st("Duplicate scale or projection name: "+Nt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,upn(t))},addProjection(e,t){this.addScaleProj(e,spn(t))},getScale(e){return this.scales[e]||st("Unrecognized scale name: "+Nt(e)),this.scales[e]},scaleRef(e){return pn(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return vn(this.data,e)&&st("Duplicate data set name: "+Nt(e)),this.data[e]=t},getData(e){return this.data[e]||st("Undefined data set name: "+Nt(e)),this.data[e]},addDataPipeline(e,t){return vn(this.data,e)&&st("Duplicate data set name: "+Nt(e)),this.addData(e,wE.fromEntries(this,t))}};function fle(e){return(at(e)?Xmn:Qmn)(e)}function Xmn(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(jt(i)?i.signal||fle(i):Nt(i))}return n+"]"}function Qmn(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Nt(r)+":"+(jt(i)?i.signal||fle(i):Nt(i));return t+"}"}function Jmn(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Zmn(e,t,n){return jt(e)||st("Input Vega specification must be an object."),t=EA(Jmn(),t,e.config),Ymn(e,new Nze(t,n)).toRuntime()}var egn="5.29.0";lr(QC,Znn,Uon,ban,Xan,run,kun,lun,Nun,$un,Wun,Zun);const tgn=Object.freeze(Object.defineProperty({__proto__:null,Bounds:qo,CanvasHandler:xO,CanvasRenderer:g5,DATE:qc,DAY:Uu,DAYOFYEAR:tg,Dataflow:UT,Debug:nBe,Error:soe,EventStream:oj,Gradient:bje,GroupItem:bj,HOURS:Ff,Handler:qae,HybridHandler:c7e,HybridRenderer:MX,Info:tBe,Item:vj,MILLISECONDS:gp,MINUTES:Lf,MONTH:Wu,Marks:Bf,MultiPulse:Toe,None:eBe,Operator:ns,Parameters:sj,Pulse:E1,QUARTER:Hc,RenderType:Kv,Renderer:EO,ResourceLoader:Cje,SECONDS:Vd,SVGHandler:Qje,SVGRenderer:Qae,SVGStringRenderer:l7e,Scenegraph:Vje,TIME_UNITS:yoe,Transform:Qe,View:XUe,WEEK:ca,Warn:ooe,YEAR:cu,accessor:Xc,accessorFields:qu,accessorName:lo,array:Lt,ascending:Z9,bandwidthNRD:Ioe,bin:f9e,bootstrapCI:d9e,boundClip:w7e,boundContext:vO,boundItem:kX,boundMark:Bje,boundStroke:$y,changeset:ax,clampRange:hBe,codegenExpression:EUe,compare:foe,constant:tl,cumulativeLogNormal:Moe,cumulativeNormal:uj,cumulativeUniform:Boe,dayofyear:TBe,debounce:doe,defaultLocale:woe,definition:u9e,densityLogNormal:Ooe,densityNormal:koe,densityUniform:Loe,domChild:ua,domClear:xd,domCreate:Gv,domFind:Hae,dotbin:h9e,error:st,expressionFunction:Ro,extend:lr,extent:eg,extentIndex:pBe,falsy:pv,fastmap:SA,field:Ud,flush:mBe,font:Sj,fontFamily:_O,fontSize:vg,format:TF,formatLocale:r5,formats:xoe,hasOwnProperty:vn,id:oO,identity:el,inferType:QBe,inferTypes:JBe,ingest:Ti,inherits:Ot,inrange:nT,interpolate:_ae,interpolateColors:gj,interpolateRange:sje,intersect:g7e,intersectBoxLine:rT,intersectPath:Iae,intersectPoint:kae,intersectRule:Dje,isArray:at,isBoolean:jb,isDate:_1,isFunction:cr,isIterable:gBe,isNumber:li,isObject:jt,isRegExp:yBe,isString:Bt,isTuple:rj,key:hoe,lerp:vBe,lineHeight:rb,loader:tj,locale:KBe,logger:aoe,lruCache:bBe,markup:Xae,merge:wBe,mergeConfig:EA,multiLineOffset:Uae,one:_A,pad:_Be,panLinear:aBe,panLog:uBe,panPow:lBe,panSymlog:cBe,parse:Zmn,parseExpression:Lue,parseSelector:zb,path:bB,pathCurves:Cae,pathEqual:_7e,pathParse:t2,pathRectangle:Eje,pathRender:DN,pathSymbols:_je,pathTrail:xje,peek:Yr,point:Cj,projection:lue,quantileLogNormal:$oe,quantileNormal:lj,quantileUniform:joe,quantiles:Aoe,quantizeInterpolator:oje,quarter:fBe,quartiles:Doe,get random(){return Hd},randomInteger:rnn,randomKDE:Noe,randomLCG:nnn,randomLogNormal:m9e,randomMixture:g9e,randomNormal:Roe,randomUniform:y9e,read:t9e,regressionConstant:Uoe,regressionExp:b9e,regressionLinear:zoe,regressionLoess:E9e,regressionLog:v9e,regressionPoly:_9e,regressionPow:w9e,regressionQuad:Voe,renderModule:Aj,repeat:FI,resetDefaultLocale:Zen,resetSVGClipId:Tje,resetSVGDefIds:son,responseType:e9e,runtimeContext:FUe,sampleCurve:fj,sampleLogNormal:Poe,sampleNormal:aj,sampleUniform:Foe,scale:pi,sceneEqual:Jae,sceneFromJSON:Uje,scenePickVisit:u5,sceneToJSON:jje,sceneVisit:yp,sceneZOrder:Rae,scheme:Eae,serializeXML:s7e,setHybridRendererOptions:ton,setRandom:enn,span:aO,splitAccessPath:yg,stringValue:Nt,textMetrics:Sf,timeBin:zBe,timeFloor:NBe,timeFormatLocale:TN,timeInterval:TA,timeOffset:MBe,timeSequence:LBe,timeUnitSpecifier:SBe,timeUnits:voe,toBoolean:poe,toDate:moe,toNumber:zu,toSet:mp,toString:goe,transform:l9e,transforms:QC,truncate:EBe,truthy:zd,tupleid:mn,typeParsers:_X,utcFloor:PBe,utcInterval:CA,utcOffset:$Be,utcSequence:BBe,utcdayofyear:DBe,utcquarter:dBe,utcweek:IBe,version:egn,visitArray:Sv,week:CBe,writeConfig:xA,zero:Fv,zoomLinear:uoe,zoomLog:loe,zoomPow:n5,zoomSymlog:coe},Symbol.toStringTag,{value:"Module"}));function ngn(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var rgn={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},ign={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},sgn={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const ogn=Array.prototype.slice,bw=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,ogn.call(t,1))},agn=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var ugn={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:agn,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return bw("join",arguments)},indexof:function(){return bw("indexOf",arguments)},lastindexof:function(){return bw("lastIndexOf",arguments)},slice:function(){return bw("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return bw("substring",arguments,String)},split:function(){return bw("split",arguments,String)},replace:function(){return bw("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const lgn=["view","item","group","xy","x","y"],cQ=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&cQ.add(setImmediate);const cgn={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:rgn[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),cQ.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||ugn[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>ign[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>sgn[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,cQ.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function JD(e,t,n,r,i,s){const o=a=>cgn[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,lgn.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var fgn={operator(e,t){const n=t.ast,r=e.functions;return i=>JD(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>JD(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>JD(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return JD(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=JD(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&ngn(o,r,s),l}}};const dgn="vega-lite",hgn='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',pgn="5.18.1",mgn=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],ggn="https://vega.github.io/vega-lite/",ygn="Vega-Lite is a concise high-level language for interactive visualization.",vgn=["vega","chart","visualization"],bgn="build/vega-lite.js",wgn="build/vega-lite.min.js",_gn="build/vega-lite.min.js",Egn="build/src/index",xgn="build/src/index.d.ts",Sgn={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},Tgn=["bin","build","src","vega-lite*","tsconfig.json"],Cgn={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},Agn={type:"git",url:"https://github.com/vega/vega-lite.git"},Dgn="BSD-3-Clause",Ign={url:"https://github.com/vega/vega-lite/issues"},kgn={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},Rgn={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},Ngn={vega:"^5.24.0"},Pgn={node:">=18"},Ogn="yarn@1.22.19",Mgn={name:dgn,author:hgn,version:pgn,collaborators:mgn,homepage:ggn,description:ygn,keywords:vgn,main:bgn,unpkg:wgn,jsdelivr:_gn,module:Egn,types:xgn,bin:Sgn,files:Tgn,scripts:Cgn,repository:Agn,license:Dgn,bugs:Ign,devDependencies:kgn,dependencies:Rgn,peerDependencies:Ngn,engines:Pgn,packageManager:Ogn};function dle(e){return!!e.or}function hle(e){return!!e.and}function ple(e){return!!e.not}function qF(e,t){if(ple(e))qF(e.not,t);else if(hle(e))for(const n of e.and)qF(n,t);else if(dle(e))for(const n of e.or)qF(n,t);else t(e)}function VT(e,t){return ple(e)?{not:VT(e.not,t)}:hle(e)?{and:e.and.map(n=>VT(n,t))}:dle(e)?{or:e.or.map(n=>VT(n,t))}:t(e)}const Hn=structuredClone;function Pze(e){throw new Error(e)}function o2(e,t){const n={};for(const r of t)vn(e,r)&&(n[r]=e[r]);return n}function Pc(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Hi(e)).join(",")})`};function $r(e){if(li(e))return e;const t=Bt(e)?e:Hi(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function fQ(e){return e===!1||e===null}function Fr(e,t){return e.includes(t)}function _E(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function mle(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function Oze(e,...t){for(const n of t)$gn(e,n??{});return e}function $gn(e,t){for(const n of _t(t))xA(e,n,t[n],!0)}function Em(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function Fgn(e,t){const n=_t(e),r=_t(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function Mze(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function gle(e,t){for(const n of e)if(t.has(n))return!0;return!1}function dQ(e){const t=new Set;for(const n of e){const i=yg(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function yle(e,t){return e===void 0||t===void 0?!0:gle(dQ(e),dQ(t))}function Vi(e){return _t(e).length===0}const _t=Object.keys,fu=Object.values,ab=Object.entries;function BN(e){return e===!0||e===!1}function Ls(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Xk(e,t){return ple(e)?`!(${Xk(e.not,t)})`:hle(e)?`(${e.and.map(n=>Xk(n,t)).join(") && (")})`:dle(e)?`(${e.or.map(n=>Xk(n,t)).join(") || (")})`:t(e)}function I5(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&I5(e[n],t)&&delete e[n],Vi(e)}function kO(e){return e.charAt(0).toUpperCase()+e.substr(1)}function vle(e,t="datum"){const n=yg(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Nt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function $ze(e,t="datum"){return`${t}[${Nt(yg(e).join("."))}]`}function Lgn(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function qd(e){return`${yg(e).map(Lgn).join("\\.")}`}function EE(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function PA(e){return`${yg(e).join(".")}`}function a2(e){return e?yg(e).length:0}function Ao(...e){for(const t of e)if(t!==void 0)return t}let Fze=42;function Lze(e){const t=++Fze;return e?String(e)+t:t}function Bgn(){Fze=42}function Bze(e){return jze(e)?e:`__${e}`}function jze(e){return e.startsWith("__")}function jN(e){if(e!==void 0)return(e%360+360)%360}function qj(e){return li(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const sxe=Object.getPrototypeOf(structuredClone({}));function _f(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!_f(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!_f(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==sxe.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==sxe.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!_f(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Hi(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const L0="row",B0="column",Wj="facet",Bs="x",za="y",kp="x2",_g="y2",Vb="xOffset",OA="yOffset",Rp="radius",Ly="radius2",nh="theta",By="theta2",Np="latitude",Pp="longitude",Op="latitude2",Wd="longitude2",Wc="color",Eg="fill",xg="stroke",Gc="shape",jy="size",dx="angle",Uy="opacity",Hb="fillOpacity",qb="strokeOpacity",Wb="strokeWidth",Gb="strokeDash",RO="text",u2="order",NO="detail",Gj="key",xE="tooltip",Yj="href",Kj="url",Xj="description",jgn={x:1,y:1,x2:1,y2:1},Uze={theta:1,theta2:1,radius:1,radius2:1};function zze(e){return e in Uze}const ble={longitude:1,longitude2:1,latitude:1,latitude2:1};function Vze(e){switch(e){case Np:return"y";case Op:return"y2";case Pp:return"x";case Wd:return"x2"}}function Hze(e){return e in ble}const Ugn=_t(ble),wle={...jgn,...Uze,...ble,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function HT(e){return e===Wc||e===Eg||e===xg}const qze={row:1,column:1,facet:1},kd=_t(qze),_le={...wle,...qze},zgn=_t(_le),{order:E2n,detail:x2n,tooltip:S2n,...Vgn}=_le,{row:T2n,column:C2n,facet:A2n,...Hgn}=Vgn;function qgn(e){return!!Hgn[e]}function Wze(e){return!!_le[e]}const Wgn=[kp,_g,Op,Wd,By,Ly];function Gze(e){return hx(e)!==e}function hx(e){switch(e){case kp:return Bs;case _g:return za;case Op:return Np;case Wd:return Pp;case By:return nh;case Ly:return Rp}return e}function ub(e){if(zze(e))switch(e){case nh:return"startAngle";case By:return"endAngle";case Rp:return"outerRadius";case Ly:return"innerRadius"}return e}function Sg(e){switch(e){case Bs:return kp;case za:return _g;case Np:return Op;case Pp:return Wd;case nh:return By;case Rp:return Ly}}function Yc(e){switch(e){case Bs:case kp:return"width";case za:case _g:return"height"}}function Yze(e){switch(e){case Bs:return"xOffset";case za:return"yOffset";case kp:return"x2Offset";case _g:return"y2Offset";case nh:return"thetaOffset";case Rp:return"radiusOffset";case By:return"theta2Offset";case Ly:return"radius2Offset"}}function Ele(e){switch(e){case Bs:return"xOffset";case za:return"yOffset"}}function Ggn(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Ygn=_t(wle),{x:D2n,y:I2n,x2:k2n,y2:R2n,xOffset:N2n,yOffset:P2n,latitude:O2n,longitude:M2n,latitude2:$2n,longitude2:F2n,theta:L2n,theta2:B2n,radius:j2n,radius2:U2n,...xle}=wle,Kgn=_t(xle),Sle={x:1,y:1},Tg=_t(Sle);function Do(e){return e in Sle}const Tle={theta:1,radius:1},Xgn=_t(Tle);function Qj(e){return e==="width"?Bs:za}const Kze={xOffset:1,yOffset:1};function PO(e){return e in Kze}const{text:z2n,tooltip:V2n,href:H2n,url:q2n,description:W2n,detail:G2n,key:Y2n,order:K2n,...Xze}=xle,Qgn=_t(Xze);function Jgn(e){return!!xle[e]}function Zgn(e){switch(e){case Wc:case Eg:case xg:case jy:case Gc:case Uy:case Wb:case Gb:return!0;case Hb:case qb:case dx:return!1}}const Qze={...Sle,...Tle,...Kze,...Xze},Jj=_t(Qze);function zy(e){return!!Qze[e]}function e0n(e,t){return n0n(e)[t]}const Jze={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:X2n,...t0n}=Jze;function n0n(e){switch(e){case Wc:case Eg:case xg:case Xj:case NO:case Gj:case xE:case Yj:case u2:case Uy:case Hb:case qb:case Wb:case Wj:case L0:case B0:return Jze;case Bs:case za:case Vb:case OA:case Np:case Pp:return t0n;case kp:case _g:case Op:case Wd:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case jy:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Gb:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Gc:return{point:"always",geoshape:"always"};case RO:return{text:"always"};case dx:return{point:"always",square:"always",text:"always"};case Kj:return{image:"always"};case nh:return{text:"always",arc:"always"};case Rp:return{text:"always",arc:"always"};case By:case Ly:return{arc:"always"}}}function vq(e){switch(e){case Bs:case za:case nh:case Rp:case Vb:case OA:case jy:case dx:case Wb:case Uy:case Hb:case qb:case kp:case _g:case By:case Ly:return;case Wj:case L0:case B0:case Gc:case Gb:case RO:case xE:case Yj:case Kj:case Xj:return"discrete";case Wc:case Eg:case xg:return"flexible";case Np:case Pp:case Op:case Wd:case NO:case Gj:case u2:return}}const r0n={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},i0n={count:1,min:1,max:1};function gy(e){return!!e&&!!e.argmin}function Yb(e){return!!e&&!!e.argmax}function Cle(e){return Bt(e)&&!!r0n[e]}const s0n=new Set(["count","valid","missing","distinct"]);function Zze(e){return Bt(e)&&s0n.has(e)}function o0n(e){return Bt(e)&&Fr(["min","max"],e)}const a0n=new Set(["count","sum","distinct","valid","missing"]),u0n=new Set(["mean","average","median","q1","q3","min","max"]);function eVe(e){return jb(e)&&(e=c7(e,void 0)),"bin"+_t(e).map(t=>Zj(e[t])?Ls(`_${t}_${ab(e[t])}`):Ls(`_${t}_${e[t]}`)).join("")}function cs(e){return e===!0||px(e)&&!e.binned}function eu(e){return e==="binned"||px(e)&&e.binned===!0}function px(e){return jt(e)}function Zj(e){return e==null?void 0:e.param}function oxe(e){switch(e){case L0:case B0:case jy:case Wc:case Eg:case xg:case Wb:case Uy:case Hb:case qb:case Gc:return 6;case Gb:return 4;default:return 10}}function OO(e){return!!(e!=null&&e.expr)}function mc(e){const t=_t(e||{}),n={};for(const r of t)n[r]=pf(e[r]);return n}function tVe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},b={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},w=o2(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:w,nonMarkTitleProperties:y,subtitle:b}}function Av(e){return Bt(e)||at(e)&&Bt(e[0])}function on(e){return!!(e!=null&&e.signal)}function Kb(e){return!!e.step}function l0n(e){return at(e)?!1:"fields"in e&&!("data"in e)}function c0n(e){return at(e)?!1:"fields"in e&&"data"in e}function A0(e){return at(e)?!1:"field"in e&&"data"in e}const f0n={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},d0n=_t(f0n),h0n={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},hQ=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function nVe(e){const t=at(e.condition)?e.condition.map(axe):axe(e.condition);return{...pf(e),condition:t}}function pf(e){if(OO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function axe(e){if(OO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function ys(e){if(OO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return on(e)?e:e!==void 0?{value:e}:void 0}function p0n(e){return on(e)?e.signal:Nt(e)}function uxe(e){return on(e)?e.signal:Nt(e.value)}function Yh(e){return on(e)?e.signal:e==null?null:Nt(e)}function m0n(e,t,n){for(const r of n){const i=yy(r,t.markDef,t.config);i!==void 0&&(e[r]=ys(i))}return e}function rVe(e){return[].concat(e.type,e.style??[])}function Si(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:yy(e,t,n,r)}function yy(e,t,n,{vgChannel:r}={}){return Ao(r?k5(e,t,n.style):void 0,k5(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function k5(e,t,n){return iVe(e,rVe(t),n)}function iVe(e,t,n){t=Lt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function sVe(e,t){return Lt(e).reduce((n,r)=>(n.field.push(Pt(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function oVe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(_f(i,r))return;n.push(r)}),n}function aVe(e,t){return _f(e,t)||!t?e:e?[...Lt(e),...Lt(t)].join(", "):t}function uVe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Av(n)||on(n))&&(Av(r)||on(r)))return{explicit:e.explicit,value:aVe(n,r)};if(Av(n)||on(n))return{explicit:e.explicit,value:n};if(Av(r)||on(r))return{explicit:e.explicit,value:r};if(!Av(n)&&!on(n)&&!Av(r)&&!on(r))return{explicit:e.explicit,value:oVe(n,r)};throw new Error("It should never reach here")}function Ale(e){return`Invalid specification ${Hi(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const g0n='Autosize "fit" only works for single views and layered views.';function lxe(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function cxe(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function fxe(e){return e?`Dropping "fit-${e}" because spec has discrete ${Yc(e)}.`:'Dropping "fit" because spec has discrete size.'}function Dle(e){return`Unknown field for ${e}. Cannot calculate view size.`}function dxe(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function y0n(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function v0n(e){return`The "nearest" transform is not supported for ${e} marks.`}function lVe(e){return`Selection not supported for ${e} yet.`}function b0n(e){return`Cannot find a selection named "${e}".`}const w0n="Scale bindings are currently only supported for scales with unbinned, continuous domains.",_0n="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",E0n="Legend bindings are only supported for selections over an individual field or encoding channel.";function x0n(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function S0n(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const T0n="The same selection must be used to override scale domains in a layered view.",C0n='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function A0n(e){return`Unknown repeated value "${e}".`}function hxe(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const D0n="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function I0n(e){return`Unrecognized parse "${e}".`}function pxe(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const k0n="Attempt to add the same child twice.";function R0n(e){return`Ignoring an invalid transform: ${Hi(e)}.`}const N0n='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function mxe(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function P0n(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Hi(t)} is overridden by a child projection ${Hi(n)}.`}const O0n="Arc marks uses theta channel rather than angle, replacing angle with theta.";function M0n(e){return`${e}Offset dropped because ${e} is continuous`}function $0n(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Hi(n)}}.`}function cVe(e){return`Invalid field type "${e}".`}function F0n(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function L0n(e){return`Invalid aggregation operator "${e}".`}function fVe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function B0n(e){return`Position range does not support relative band size for ${e}.`}function pQ(e,t){return`Dropping ${Hi(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const j0n="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function e7(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function U0n(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function z0n(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function V0n(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function H0n(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function bq(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function q0n(e){return`The ${e} for range marks cannot be an expression`}function W0n(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function G0n(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Y0n(e){return`Cannot use the scale property "${e}" with non-color channel.`}function K0n(e){return`Cannot use the relative band size with ${e} scale.`}function X0n(e){return`Using unaggregated domain with raw field has no effect (${Hi(e)}).`}function Q0n(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function J0n(e){return`Unaggregated domain is currently unsupported for log scale (${Hi(e)}).`}function Z0n(e){return`Cannot apply size to non-oriented mark "${e}".`}function eyn(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function tyn(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function dVe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function hVe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function nyn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Hi(n)} and ${Hi(r)}). Using ${Hi(n)}.`}function ryn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Hi(n)} and ${Hi(r)}). Using the union of the two domains.`}function iyn(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function syn(e){return`Dropping sort property ${Hi(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const gxe="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",oyn="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",ayn="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",uyn="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function lyn(e){return`Cannot stack "${e}" if there is already "${e}2".`}function cyn(e){return`Stack is applied to a non-linear scale (${e}).`}function fyn(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function R5(e,t){return`Invalid ${e}: ${Hi(t)}.`}function dyn(e){return`Dropping day from datetime ${Hi(e)} as day cannot be combined with other units.`}function hyn(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function pyn(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function myn(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function yxe(e){return`1D error band does not support ${e}.`}function pVe(e){return`Channel ${e} is required for "binned" bin.`}function gyn(e){return`Channel ${e} should not be used with "binned" bin.`}function yyn(e){return`Domain for ${e} is required for threshold scale.`}const mVe=aoe(ooe);let l2=mVe;function vyn(e){return l2=e,l2}function byn(){return l2=mVe,l2}function Tt(...e){l2.warn(...e)}function wyn(...e){l2.debug(...e)}function mx(e){if(e&&jt(e)){for(const t of kle)if(t in e)return!0}return!1}const gVe=["january","february","march","april","may","june","july","august","september","october","november","december"],_yn=gVe.map(e=>e.substr(0,3)),yVe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Eyn=yVe.map(e=>e.substr(0,3));function xyn(e){if(qj(e)&&(e=+e),li(e))return e>4&&Tt(R5("quarter",e)),e-1;throw new Error(R5("quarter",e))}function Syn(e){if(qj(e)&&(e=+e),li(e))return e-1;{const t=e.toLowerCase(),n=gVe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=_yn.indexOf(r);if(i!==-1)return i;throw new Error(R5("month",e))}}function Tyn(e){if(qj(e)&&(e=+e),li(e))return e%7;{const t=e.toLowerCase(),n=yVe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Eyn.indexOf(r);if(i!==-1)return i;throw new Error(R5("day",e))}}function Ile(e,t){const n=[];if(t&&e.day!==void 0&&_t(e).length>1&&(Tt(dyn(e)),e=Hn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?Syn(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?xyn(e.quarter):e.quarter;n.push(li(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?Tyn(e.day):e.day;n.push(li(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function SE(e){const n=Ile(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Cyn(e){const n=Ile(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Ayn(e){const t=Ile(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const vVe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},kle=_t(vVe);function Dyn(e){return!!vVe[e]}function gx(e){return jt(e)?e.binned:bVe(e)}function bVe(e){return e&&e.startsWith("binned")}function Rle(e){return e.startsWith("utc")}function Iyn(e){return e.substring(3)}const kyn={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function t7(e){return kle.filter(t=>_Ve(e,t))}function wVe(e){const t=t7(e);return t[t.length-1]}function _Ve(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Ryn(e,t,{end:n}={end:!1}){const r=vle(t),i=Rle(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of kle)_Ve(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),Cyn(a)}function EVe(e){if(!e)return;const t=t7(e);return`timeUnitSpecifier(${Hi(t)}, ${Hi(kyn)})`}function Nyn(e,t,n){if(!e)return;const r=EVe(e);return`${n||Rle(e)?"utc":"time"}Format(${t}, ${r})`}function La(e){if(!e)return;let t;return Bt(e)?bVe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:jt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Rle(t.unit)&&(t.utc=!0,t.unit=Iyn(t.unit)),t}function Pyn(e){const{utc:t,...n}=La(e);return n.unit?(t?"utc":"")+_t(n).map(r=>Ls(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+_t(n).map(r=>Ls(`_${r}_${n[r]}`)).join("")}function xVe(e,t=n=>n){const n=La(e),r=wVe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=SVe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(SE(a))} - ${t(SE(i))}`}}const Oyn={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Myn(e){return!!Oyn[e]}function SVe(e,t=1){if(Myn(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function $yn(e){return e==null?void 0:e.param}function Nle(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Ple(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Ole(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Mle(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function $le(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Fle(e){if(e!=null&&e.field){if(at(e.range)&&e.range.length===2)return!0;if(on(e.range))return!0}return!1}function Lle(e){return!!(e!=null&&e.field)&&(at(e.oneOf)||at(e.in))}function Fyn(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function TVe(e){return Lle(e)||Nle(e)||Fle(e)||Ple(e)||Mle(e)||Ole(e)||$le(e)}function Hp(e,t){return f7(e,{timeUnit:t,wrapTime:!0})}function Lyn(e,t){return e.map(n=>Hp(n,t))}function CVe(e,t=!0){const{field:n}=e,r=La(e.timeUnit),{unit:i,binned:s}=r||{},o=Pt(e,{expr:"datum"}),a=i?`time(${s?o:Ryn(i,n)})`:o;if(Nle(e))return`${a}===${Hp(e.equal,i)}`;if(Ple(e)){const u=e.lt;return`${a}<${Hp(u,i)}`}else if(Mle(e)){const u=e.gt;return`${a}>${Hp(u,i)}`}else if(Ole(e)){const u=e.lte;return`${a}<=${Hp(u,i)}`}else if($le(e)){const u=e.gte;return`${a}>=${Hp(u,i)}`}else{if(Lle(e))return`indexof([${Lyn(e.oneOf,i).join(",")}], ${a}) !== -1`;if(Fyn(e))return Ble(a,e.valid);if(Fle(e)){const{range:u}=e,l=on(u)?{signal:`${u.signal}[0]`}:u[0],c=on(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Hp(l,i)+", "+Hp(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Hp(l,i)}`),c!==null&&f.push(`${a} <= ${Hp(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Hi(e)}`)}function Ble(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Byn(e){return TVe(e)&&e.timeUnit?{...e,timeUnit:La(e.timeUnit)}:e}const MO={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function jyn(e){return e==="quantitative"||e==="temporal"}function AVe(e){return e==="ordinal"||e==="nominal"}const TE=MO.quantitative,jle=MO.ordinal,c2=MO.temporal,Ule=MO.nominal,MA=MO.geojson;function Uyn(e){if(e)switch(e=e.toLowerCase(),e){case"q":case TE:return"quantitative";case"t":case c2:return"temporal";case"o":case jle:return"ordinal";case"n":case Ule:return"nominal";case MA:return"geojson"}}const Oc={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},mQ={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function zyn(e,t){const n=mQ[e],r=mQ[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const Vyn={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function vxe(e){return Vyn[e]}const DVe=new Set(["linear","log","pow","sqrt","symlog"]),IVe=new Set([...DVe,"time","utc"]);function kVe(e){return DVe.has(e)}const RVe=new Set(["quantile","quantize","threshold"]),Hyn=new Set([...IVe,...RVe,"sequential","identity"]),qyn=new Set(["ordinal","bin-ordinal","point","band"]);function Ba(e){return qyn.has(e)}function Uf(e){return Hyn.has(e)}function Kh(e){return IVe.has(e)}function f2(e){return RVe.has(e)}const Wyn={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function Gyn(e){return!Bt(e)&&!!e.name}function NVe(e){return e==null?void 0:e.param}function Yyn(e){return e==null?void 0:e.unionWith}function Kyn(e){return jt(e)&&"field"in e}const Xyn={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Q2n,domain:J2n,range:Z2n,rangeMax:eAn,rangeMin:tAn,scheme:nAn,...Qyn}=Xyn,Jyn=_t(Qyn);function gQ(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Kh(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Kh(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Kh(e);case"nice":return Kh(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Uf(e)&&!Fr(["log","time","utc","threshold","quantile"],e)}}function PVe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return HT(e)?void 0:Y0n(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function Zyn(e,t){return Fr([jle,Ule],t)?e===void 0||Ba(e):t===c2?Fr([Oc.TIME,Oc.UTC,void 0],e):t===TE?kVe(e)||f2(e)||e===void 0:!0}function evn(e,t,n=!1){if(!zy(e))return!1;switch(e){case Bs:case za:case Vb:case OA:case nh:case Rp:return Kh(t)||t==="band"?!0:t==="point"?!n:!1;case jy:case Wb:case Uy:case Hb:case qb:case dx:return Kh(t)||f2(t)||Fr(["band","point","ordinal"],t);case Wc:case Eg:case xg:return t!=="band";case Gb:case Gc:return t==="ordinal"||f2(t)}}function zle(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=Hle(e);return At(n)&&!Zze(n.aggregate)&&i&&Kh(i.get("type"))?tvn({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function tvn({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Si("invalid",n,i)===null?[nvn(e,t),r]:r}function nvn(e,t){const n=Vle(e,!0),i=hx(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function Vle(e,t=!0){return Ble(Bt(e)?e:Pt(e,{expr:"datum"}),!t)}function rvn(e){const{datum:t}=e;return mx(t)?SE(t):`${Hi(t)}`}function F_(e,t,n,r){const i={};if(t&&(i.scale=t),Cg(e)){const{datum:s}=e;mx(s)?i.signal=SE(s):on(s)?i.signal=s.signal:OO(s)?i.signal=s.expr:i.value=s}else i.field=Pt(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function N5({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!on(o)&&0<o&&o<1?"datum":void 0,u=Pt(t,{expr:a,suffix:i}),l=n!==void 0?Pt(n,{expr:a}):Pt(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=on(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function ivn({scaleName:e,fieldDef:t}){const n=Pt(t,{expr:"datum"}),r=Pt(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function Hle({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Jn(t)){const f=o==null?void 0:o.get("type");if(Ul(t)){c??(c=lb({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(cs(d)||c&&h&&p===c2)return a!=null&&a.impute?F_(t,s,{binSuffix:"mid"},{offset:u}):c&&!Ba(f)?N5({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):F_(t,s,BO(t,e)?{binSuffix:"range"}:{},{offset:u});if(eu(d)){if(At(n))return N5({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Tt(pVe(e===Bs?kp:_g))}}return F_(t,s,Ba(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(vp(t)){const f=t.value,d=u?{offset:u}:{};return{...Qk(e,f),...d}}}return cr(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function Qk(e,t){return Fr(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Fr(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:ys(t)}function CE(e){return e&&e!=="number"&&e!=="time"}function OVe(e,t,n){return`${e}(${t}${n?`, ${Hi(n)}`:""})`}const svn="  ";function qle({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(CE(n))return Xh({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=MVe(e,r,i),a=d2(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Xh({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Xh({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&At(e)&&e.timeUnit===void 0)return Xh({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(p2(e)){const c=avn({field:o,timeUnit:At(e)?(u=La(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:vx(e)&&((l=e.scale)==null?void 0:l.type)===Oc.UTC});return c?{signal:c}:void 0}if(t=yQ({type:a,specifiedFormat:t,config:s,normalizeStack:i}),At(e)&&cs(e.bin)){const c=Pt(e,{expr:r,binSuffix:"end"});return{signal:$O(o,c,t,n,s)}}else return t||d2(e)==="quantitative"?{signal:`${LVe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function MVe(e,t,n){return At(e)?n?`${Pt(e,{expr:t,suffix:"end"})}-${Pt(e,{expr:t,suffix:"start"})}`:Pt(e,{expr:t}):rvn(e)}function Xh({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=MVe(e,r,i)),o!=="datum.value"&&At(e)&&cs(e.bin)){const a=Pt(e,{expr:r,binSuffix:"end"});return{signal:$O(o,a,t,n,s)}}return{signal:OVe(n,o,t)}}function $Ve(e,t,n,r,i,s){var o;if(!(Bt(r)&&CE(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&d2(e)==="quantitative"&&(i.normalizedNumberFormatType&&h2(e)&&e.stack==="normalize"||i.numberFormatType))){if(h2(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return yQ({type:"quantitative",config:i,normalizeStack:!0});if(p2(e)){const a=At(e)?(o=La(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:ovn({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return yQ({type:t,specifiedFormat:n,config:i})}}function FVe(e,t,n){var r;if(e&&(on(e)||e==="number"||e==="time"))return e;if(p2(t)&&n!=="time"&&n!=="utc")return At(t)&&((r=La(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function yQ({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Bt(t))return t;if(e===TE)return r?n.normalizedNumberFormat:n.numberFormat}function ovn({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:EVe(t)}:r?void 0:n.timeFormat)}function LVe(e,t){return`format(${e}, "${t||""}")`}function bxe(e,t,n,r){return CE(n)?OVe(n,e,t):LVe(e,(Bt(t)?t:void 0)??r.numberFormat)}function $O(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return $O(e,t,i.numberFormat,i.numberFormatType,i);const s=bxe(e,n,r,i),o=bxe(t,n,r,i);return`${Ble(e,!1)} ? "null" : ${s} + "${svn}" + ${o}`}function avn({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Bt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):Nyn(t,e,s)}const Gl={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},BVe=Gl.arc,n7=Gl.area,r7=Gl.bar,uvn=Gl.image,i7=Gl.line,s7=Gl.point,lvn=Gl.rect,P5=Gl.rule,jVe=Gl.text,Wle=Gl.tick,cvn=Gl.trail,Gle=Gl.circle,Yle=Gl.square,UVe=Gl.geoshape;function yx(e){return["line","area","trail"].includes(e)}function UN(e){return["rect","bar","image","arc"].includes(e)}const fvn=new Set(_t(Gl));function rg(e){return e.type}const dvn=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],hvn=["fill","fillOpacity"],pvn=[...dvn,...hvn],mvn={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},wxe=_t(mvn),gvn={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},yvn={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},vvn={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},zVe=_t(vvn);function AE(e){return e&&e.band!=null}const bvn={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},VVe=5,wvn={binSpacing:1,continuousBandSize:VVe,minBandSize:.25,timeUnitBandPosition:.5},_vn={binSpacing:0,continuousBandSize:VVe,minBandSize:.25,timeUnitBandPosition:.5},Evn={thickness:1};function xvn(e){return rg(e)?e.type:e}const o7="min",Svn={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function _xe(e){return e in Svn}function HVe(e){return!!(e!=null&&e.encoding)}function Fm(e){return e&&(e.op==="count"||!!e.field)}function qVe(e){return e&&at(e)}function FO(e){return"row"in e||"column"in e}function Kle(e){return!!e&&"header"in e}function a7(e){return"facet"in e}function Tvn(e){return e.param}function Cvn(e){return e&&!Bt(e)&&"repeat"in e}function Exe(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Xle(e){return"sort"in e}function lb({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Jn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(At(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return yy("timeUnitBandPosition",n,r);if(cs(s))return .5}}function WVe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=Yc(e),u=Si(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(At(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:yy("timeUnitBandSize",r,i)};if(cs(h)&&!Ba(s))return{band:1}}if(UN(r.type))return s?Ba(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function GVe(e,t,n,r){return cs(e.bin)||e.timeUnit&&Ul(e)&&e.type==="temporal"?lb({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function YVe(e){return e&&!!e.sort&&!e.field}function u7(e){return e&&"condition"in e}function l7(e){const t=e==null?void 0:e.condition;return!!t&&!at(t)&&At(t)}function LO(e){const t=e==null?void 0:e.condition;return!!t&&!at(t)&&Jn(t)}function Avn(e){const t=e==null?void 0:e.condition;return!!t&&(at(t)||vp(t))}function At(e){return e&&(!!e.field||e.aggregate==="count")}function d2(e){return e==null?void 0:e.type}function Cg(e){return e&&"datum"in e}function Zv(e){return Ul(e)&&!M5(e)||O5(e)}function xxe(e){return Ul(e)&&e.type==="quantitative"&&!e.bin||O5(e)}function O5(e){return Cg(e)&&li(e.datum)}function Jn(e){return At(e)||Cg(e)}function Ul(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function vp(e){return e&&"value"in e&&"value"in e}function vx(e){return e&&("scale"in e||"sort"in e)}function h2(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function KVe(e){return e&&"legend"in e}function XVe(e){return e&&("format"in e||"formatType"in e)}function Dvn(e){return Pc(e,["legend","axis","header","scale"])}function Ivn(e){return"op"in e}function Pt(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(Rvn(e))n=Bze("count");else{let o;if(!t.nofn)if(Ivn(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;cs(a)?(o=eVe(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Yb(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):gy(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!gx(l)&&(o=Pyn(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?PA(n):t.expr?$ze(n,t.expr)+s:qd(n)+s}function M5(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return At(e)&&!!e.bin;case"temporal":return!1}throw new Error(cVe(e.type))}function kvn(e){var t;return vx(e)&&f2((t=e.scale)==null?void 0:t.type)}function Rvn(e){return e.aggregate==="count"}function Nvn(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(cs(r))return`${n} (binned)`;if(i&&!gx(i)){const a=(o=La(i))==null?void 0:o.unit;if(a)return`${n} (${t7(a).join("-")})`}else if(s)return Yb(s)?`${n} for max ${s.argmax}`:gy(s)?`${n} for min ${s.argmin}`:`${kO(s)} of ${n}`;return n}function Pvn(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Yb(t))return`${i} for argmax(${t.argmax})`;if(gy(t))return`${i} for argmin(${t.argmin})`;const s=r&&!gx(r)?La(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||cs(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const QVe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return Pvn(e);default:return Nvn(e,t)}};let JVe=QVe;function ZVe(e){JVe=e}function Ovn(){ZVe(QVe)}function qT(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=Qle(e))==null?void 0:a.title;if(!At(e))return i??e.title;const s=e,o=r?Jle(s,t):void 0;return n?Ao(i,s.title,o):i??s.title??o}function Qle(e){if(h2(e)&&e.axis)return e.axis;if(KVe(e)&&e.legend)return e.legend;if(Kle(e)&&e.header)return e.header}function Jle(e,t){return JVe(e,t)}function $5(e){if(XVe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=Qle(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function Mvn(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Xle(e)&&at(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Yb(n)&&!gy(n))return"quantitative";if(vx(e)&&((s=e.scale)!=null&&s.type))switch(mQ[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function ig(e){if(At(e))return e;if(l7(e))return e.condition}function fa(e){if(Jn(e))return e;if(LO(e))return e.condition}function eHe(e,t,n,r={}){if(Bt(e)||li(e)||jb(e)){const i=Bt(e)?"string":li(e)?"number":"boolean";return Tt($0n(t,i,e)),{value:e}}return Jn(e)?F5(e,t,n,r):LO(e)?{...e,condition:F5(e.condition,t,n,r)}:e}function F5(e,t,n,r){if(XVe(e)){const{format:i,formatType:s,...o}=e;if(CE(s)&&!n.customFormatTypes)return Tt(mxe(t)),F5(o,t,n,r)}else{const i=h2(e)?"axis":KVe(e)?"legend":Kle(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(CE(o)&&!n.customFormatTypes)return Tt(mxe(t)),F5({...e,[i]:a},t,n,r)}}return At(e)?Zle(e,t,r):$vn(e)}function $vn(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=li(n)?"quantitative":Bt(n)?"nominal":mx(n)?"temporal":void 0,{...e,type:t}}function Zle(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Cle(r)&&!Yb(r)&&!gy(r)&&(Tt(L0n(r)),delete a.aggregate),i&&(a.timeUnit=La(i)),o&&(a.field=`${o}`),cs(s)&&(a.bin=c7(s,t)),eu(s)&&!Do(t)&&Tt(gyn(t)),Ul(a)){const{type:u}=a,l=Uyn(u);u!==l&&(a.type=l),u!=="quantitative"&&Zze(r)&&(Tt(F0n(u,r)),a.type="quantitative")}else if(!Gze(t)){const u=Mvn(a,t);a.type=u}if(Ul(a)){const{compatible:u,warning:l}=Fvn(a,t)||{};u===!1&&Tt(l)}if(Xle(a)&&Bt(a.sort)){const{sort:u}=a;if(_xe(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&_xe(l))return{...a,sort:{encoding:l,order:"descending"}}}if(Kle(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function c7(e,t){return jb(e)?{maxbins:oxe(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:oxe(t)}:e}const dS={compatible:!0};function Fvn(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case L0:case B0:case Wj:return M5(e)?dS:{compatible:!1,warning:z0n(t)};case Bs:case za:case Vb:case OA:case Wc:case Eg:case xg:case RO:case NO:case Gj:case xE:case Yj:case Kj:case dx:case nh:case Rp:case Xj:return dS;case Pp:case Wd:case Np:case Op:return n!==TE?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:dS;case Uy:case Hb:case qb:case Wb:case jy:case By:case Ly:case kp:case _g:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:dS;case Gc:case Gb:return!M5(e)&&!kvn(e)?{compatible:!1,warning:V0n(t)}:dS;case u2:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:dS}}function p2(e){const{formatType:t}=$5(e);return t==="time"||!t&&Lvn(e)}function Lvn(e){return e&&(e.type==="temporal"||At(e)&&!!e.timeUnit)}function f7(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=La(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return OO(e)?a=e.expr:on(e)?a=e.signal:mx(e)?(o=!0,a=SE(e)):(Bt(e)||li(e))&&o&&(a=`datetime(${Hi(e)})`,Dyn(s)&&(li(e)&&e<1e4||Bt(e)&&isNaN(Date.parse(e)))&&(a=SE({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Hi(e)}function tHe(e,t){const{type:n}=e;return t.map(r=>{const i=At(e)&&!gx(e.timeUnit)?e.timeUnit:void 0,s=f7(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function BO(e,t){return cs(e.bin)?zy(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Sxe={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function jO(e){return e==null?void 0:e.condition}const nHe=["domain","grid","labels","ticks","title"],Bvn={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},rHe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},jvn={...rHe,style:1,labelExpr:1,encoding:1};function Txe(e){return!!jvn[e]}const Uvn={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},iHe=_t(Uvn);function Vy(e){return"mark"in e}class d7{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Vy(t)?xvn(t.mark)===this.name:!1}}function L_(e,t){const n=e&&e[t];return n?at(n)?_E(n,r=>!!r.field):At(n)||l7(n):!1}function sHe(e,t){const n=e&&e[t];return n?at(n)?_E(n,r=>!!r.field):At(n)||Cg(n)||LO(n):!1}function oHe(e,t){if(Do(t)){const n=e[t];if((At(n)||Cg(n))&&(AVe(n.type)||At(n)&&n.timeUnit)){const r=Ele(t);return sHe(e,r)}}return!1}function ece(e){return _E(zgn,t=>{if(L_(e,t)){const n=e[t];if(at(n))return _E(n,r=>!!r.aggregate);{const r=ig(n);return r&&!!r.aggregate}}return!1})}function aHe(e,t){const n=[],r=[],i=[],s=[],o={};return tce(e,(a,u)=>{if(At(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=Qle(a),m=p==null?void 0:p.title;let g=Pt(a,{forAs:!0});const y={...m?[]:{title:qT(a,t,{allowDisabling:!0})},...h,field:g};if(c){let b;if(Yb(c)?(b="argmax",g=Pt({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):gy(c)?(b="argmin",g=Pt({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(b=c),b){const w={op:b,as:g};l&&(w.field=l),s.push(w)}}else if(n.push(g),Ul(a)&&cs(f)){if(r.push({bin:f,field:l,as:g}),n.push(Pt(a,{binSuffix:"end"})),BO(a,u)&&n.push(Pt(a,{binSuffix:"range"})),Do(u)){const b={field:`${g}_end`};o[`${u}2`]=b}y.bin="binned",Gze(u)||(y.type=TE)}else if(d&&!gx(d)){i.push({timeUnit:d,field:l,as:g});const b=Ul(a)&&a.type!==c2&&"time";b&&(u===RO||u===xE?y.formatType=b:Jgn(u)?y.legend={formatType:b,...y.legend}:Do(u)&&(y.axis={formatType:b,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function zvn(e,t,n){const r=e0n(t,n);if(r){if(r==="binned"){const i=e[t===kp?Bs:za];return!!(At(i)&&At(e[t])&&eu(i.bin))}}else return!1;return!0}function Vvn(e,t,n,r){const i={};for(const s of _t(e))Wze(s)||Tt(U0n(s));for(let s of Ygn){if(!e[s])continue;const o=e[s];if(PO(s)){const a=Ggn(s),u=i[a];if(At(u)&&jyn(u.type)&&At(o)&&!u.timeUnit){Tt(M0n(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Tt(O0n),s=nh),!zvn(e,s,t)){Tt(e7(s,t));continue}if(s===jy&&t==="line"){const a=ig(e[s]);if(a!=null&&a.aggregate){Tt(j0n);continue}}if(s===Wc&&(n?"fill"in e:"stroke"in e)){Tt(fVe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===NO||s===u2&&!at(o)&&!vp(o)||s===xE&&at(o)){if(o){if(s===u2){const a=e[s];if(YVe(a)){i[s]=a;continue}}i[s]=Lt(o).reduce((a,u)=>(At(u)?a.push(Zle(u,s)):Tt(pQ(u,s)),a),[])}}else{if(s===xE&&o===null)i[s]=null;else if(!At(o)&&!Cg(o)&&!vp(o)&&!u7(o)&&!on(o)){Tt(pQ(o,s));continue}i[s]=eHe(o,s,r)}}return i}function h7(e,t){const n={};for(const r of _t(e)){const i=eHe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function Hvn(e){const t=[];for(const n of _t(e))if(L_(e,n)){const r=e[n],i=Lt(r);for(const s of i)At(s)?t.push(s):l7(s)&&t.push(s.condition)}return t}function tce(e,t,n){if(e)for(const r of _t(e)){const i=e[r];if(at(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function qvn(e,t,n,r){return e?_t(e).reduce((i,s)=>{const o=e[s];return at(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function uHe(e,t){return _t(t).reduce((n,r)=>{switch(r){case Bs:case za:case Yj:case Xj:case Kj:case kp:case _g:case Vb:case OA:case nh:case By:case Rp:case Ly:case Np:case Pp:case Op:case Wd:case RO:case Gc:case dx:case xE:return n;case u2:if(e==="line"||e==="trail")return n;case NO:case Gj:{const i=t[r];if(at(i)||At(i))for(const s of Lt(i))s.aggregate||n.push(Pt(s,{}));return n}case jy:if(e==="trail")return n;case Wc:case Eg:case xg:case Uy:case Hb:case qb:case Gb:case Wb:{const i=ig(t[r]);return i&&!i.aggregate&&n.push(Pt(i,{})),n}}},[])}function Wvn(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(at(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return at(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function vQ(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${nce(t)}`:"";return{field:o+t.field,type:t.type,title:on(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=Hvn(n).map(Dvn);return{tooltip:[...i,...Em(s,$r)]}}function nce(e){const{title:t,field:n}=e;return Ao(t,n)}function rce(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=nce(n);return lHe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...Bt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function lHe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...rg(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...jb(e[t])?{}:e[t]}}]:[]}function cHe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:p$(s,n),continuousAxisChannelDef2:p$(o,n),continuousAxisChannelDefError:p$(a,n),continuousAxisChannelDefError2:p$(u,n),continuousAxis:i}}function p$(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Tt(myn(n,t)),r}else return e}function fHe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(rg(n)&&n.orient)return n.orient;if(Zv(i)){if(Zv(s)){const o=At(i)&&i.aggregate,a=At(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return p2(s)&&!p2(i)?"horizontal":"vertical"}return"horizontal"}else{if(Zv(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const L5="boxplot",Gvn=["box","median","outliers","rule","ticks"],Yvn=new d7(L5,hHe);function dHe(e){return li(e)?"tukey":e}function hHe(e,{config:t}){e={...e,encoding:h7(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=rg(n)?n:{type:n};i&&Tt(lVe("boxplot"));const u=a.extent??t.boxplot.extent,l=Si("size",a,t),c=a.invalid,f=dHe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:b,encodingWithoutContinuousAxis:w,ticksOrient:S,boxOrient:E,customTooltipWithoutAggregatedField:T}=Kvn(e,u,t),C=PA(m.field),{color:A,size:I,...k}=w,N=He=>rce(a,g,m,He,t.boxplot),F=N(k),M=N(w),L=(jt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",j=N({...k,...I?{size:I}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...A||{value:L}}}}),B=vQ([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,w),z={type:"tick",color:"black",opacity:1,orient:S,invalid:c,aria:!1},V=f==="min-max"?B:vQ([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,w),G=[...F({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:V}),...F({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:V}),...F({partName:"ticks",mark:z,positionPrefix:"lower_whisker",extraEncoding:V}),...F({partName:"ticks",mark:z,positionPrefix:"upper_whisker",extraEncoding:V})],$=[...f!=="tukey"?G:[],...M({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:B}),...j({partName:"median",mark:{type:"tick",invalid:c,...jt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:S,aria:!1},positionPrefix:"mid_box",extraEncoding:B})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:$};const W=`datum["lower_box_${m.field}"]`,K=`datum["upper_box_${m.field}"]`,q=`(${K} - ${W})`,Y=`${W} - ${u} * ${q}`,Z=`${K} + ${u} * ${q}`,ae=`datum["${m.field}"]`,be={joinaggregate:pHe(m.field),groupby:y},Se={transform:[{filter:`(${Y} <= ${ae}) && (${ae} <= ${Z})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${C}`},{op:"max",field:m.field,as:`upper_whisker_${C}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${C}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${C}`},...b],groupby:y}],layer:G},{tooltip:we,...Ce}=k,{scale:Le,axis:ke}=m,Ze=nce(m),Ke=Pc(ke,["title"]),Ct=lHe(a,"outliers",t.boxplot,{transform:[{filter:`(${ae} < ${Y}) || (${ae} > ${Z})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Ze!==void 0?{title:Ze}:{},...Le!==void 0?{scale:Le}:{},...Vi(Ke)?{}:{axis:Ke}},...Ce,...A?{color:A}:{},...T?{tooltip:T}:{}}})[0];let wt;const Re=[...d,...h,be];return Ct?wt={transform:Re,layer:[Ct,Se]}:(wt=Se,wt.transform.unshift(...Re)),{...o,layer:[wt,{transform:p,layer:$}]}}function pHe(e){const t=PA(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function Kvn(e,t,n){const r=fHe(e,L5),{continuousAxisChannelDef:i,continuousAxis:s}=cHe(e,r,L5),o=i.field,a=PA(o),u=dHe(t),l=[...pHe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=Wvn(d),{bins:m,timeUnits:g,aggregate:y,groupby:b,encoding:w}=aHe(p,n),S=r==="vertical"?"horizontal":"vertical",E=r,T=[...m,...g,{aggregate:[...y,...l],groupby:b},...c];return{bins:m,timeUnits:g,transform:T,groupby:b,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:w,ticksOrient:S,boxOrient:E,customTooltipWithoutAggregatedField:h}}const ice="errorbar",Xvn=["ticks","rule"],Qvn=new d7(ice,mHe);function mHe(e,{config:t}){e={...e,encoding:h7(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=gHe(e,ice,t);delete s.size;const c=rce(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function Jvn(e,t){const{encoding:n}=e;if(Zvn(n))return{orient:fHe(e,t),inputType:"raw"};const r=e1n(n),i=t1n(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(Jn(a)&&Jn(u))throw new Error(`${t} cannot have both x2 and y2`);if(Jn(a)){if(Zv(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Jn(u)){if(Zv(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Jn(u)&&!Jn(a))throw new Error(`${t} cannot have xError2 without xError`);if(Jn(c)&&!Jn(l))throw new Error(`${t} cannot have yError2 without yError`);if(Jn(a)&&Jn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Jn(a)){if(Zv(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Jn(l)){if(Zv(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Zvn(e){return(Jn(e.x)||Jn(e.y))&&!Jn(e.x2)&&!Jn(e.y2)&&!Jn(e.xError)&&!Jn(e.xError2)&&!Jn(e.yError)&&!Jn(e.yError2)}function e1n(e){return Jn(e.x2)||Jn(e.y2)}function t1n(e){return Jn(e.xError)||Jn(e.xError2)||Jn(e.yError)||Jn(e.yError2)}function gHe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=rg(r)?r:{type:r};s&&Tt(lVe(t));const{orient:l,inputType:c}=Jvn(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=cHe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:b,tooltipTitleWithFieldName:w}=n1n(u,f,d,h,p,c,t,n),{[m]:S,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:T,[m==="x"?"xError2":"yError2"]:C,...A}=i,{bins:I,timeUnits:k,aggregate:N,groupby:F,encoding:M}=aHe(A,n),L=[...N,...g],j=c!=="raw"?[]:F,B=vQ(b,f,M,w);return{transform:[...a.transform??[],...I,...k,...L.length===0?[]:[{aggregate:L,groupby:j}],...y],groupby:j,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:M,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:B}}function n1n(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Tt(pyn(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:kO(h)},{fieldPrefix:"upper_",titlePrefix:Cxe(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Cxe(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:qT({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:qT({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:qT({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Tt(hyn(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:EE(EE(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Cxe(e,t,n){return`${kO(e)} ${n} ${t}`}const sce="errorband",r1n=["band","borders"],i1n=new d7(sce,yHe);function yHe(e,{config:t}){e={...e,encoding:h7(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=gHe(e,sce,t),l=o,c=rce(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Tt(yxe("interpolate")):l.tension&&Tt(yxe("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const vHe={};function oce(e,t,n){const r=new d7(e,t);vHe[e]={normalizer:r,parts:n}}function s1n(){return _t(vHe)}oce(L5,hHe,Gvn);oce(ice,mHe,Xvn);oce(sce,yHe,r1n);const o1n=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],bHe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},wHe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},a1n=_t(bHe),u1n=_t(wHe),l1n={header:1,headerRow:1,headerColumn:1,headerFacet:1},_He=_t(l1n),EHe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],c1n={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},f1n={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},bp="_vgsid_",d1n={point:{on:"click",fields:[bp],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function ace(e){return e==="legend"||!!(e!=null&&e.legend)}function wq(e){return ace(e)&&jt(e)}function uce(e){return!!(e!=null&&e.select)}function xHe(e){const t=[];for(const n of e||[]){if(uce(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function h1n(e){return p7(e)||cce(e)||lce(e)}function lce(e){return"concat"in e}function p7(e){return"vconcat"in e}function cce(e){return"hconcat"in e}function SHe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function sg(e){return jt(e)&&e.step!==void 0}function Axe(e){return e.view||e.width||e.height}const Dxe=20,p1n={align:1,bounds:1,center:1,columns:1,spacing:1},m1n=_t(p1n);function g1n(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(a7(e)&&!FO(e.facet)||lce(e))&&(i.columns=o),p7(e)&&(i.columns=1);for(const a of m1n)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=li(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function bQ(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function B5(e,t){const n=j5(e,t);return sg(n)?n.step:THe}function j5(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Ao(n,{step:e.step})}const THe=20,y1n={continuousWidth:200,continuousHeight:200,step:THe},v1n={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:y1n,mark:yvn,arc:{},area:{},bar:wvn,circle:{},geoshape:{},image:{},line:{},point:{},rect:_vn,rule:{color:"black"},square:{},text:{color:"black"},tick:Evn,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Wyn,projection:{},legend:c1n,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:d1n,style:{},title:{},facet:{spacing:Dxe},concat:{spacing:Dxe},normalizedNumberFormat:".0%"},Gg=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Ixe={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},kxe={blue:Gg[0],orange:Gg[1],red:Gg[2],teal:Gg[3],green:Gg[4],yellow:Gg[5],purple:Gg[6],pink:Gg[7],brown:Gg[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function b1n(e={}){return{signals:[{name:"color",value:jt(e)?{...kxe,...e}:kxe}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function w1n(e){return{signals:[{name:"fontSize",value:jt(e)?{...Ixe,...e}:Ixe}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function _1n(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function CHe(e){const t=_t(e||{}),n={};for(const r of t){const i=e[r];n[r]=jO(i)?nVe(i):pf(i)}return n}function E1n(e){const t=_t(e),n={};for(const r of t)n[r]=CHe(e[r]);return n}const x1n=[...zVe,...iHe,..._He,"background","padding","legend","lineBreak","scale","style","title","view"];function AHe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=EA({},Hn(v1n),n?_1n(n):{},t?b1n(t):{},r?w1n(r):{},s||{});i&&xA(o,"selection",i,!0);const a=Pc(o,x1n);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=pf(o[u]));for(const u of zVe)o[u]&&(a[u]=mc(o[u]));for(const u of iHe)o[u]&&(a[u]=CHe(o[u]));for(const u of _He)o[u]&&(a[u]=mc(o[u]));return o.legend&&(a.legend=mc(o.legend)),o.scale&&(a.scale=mc(o.scale)),o.style&&(a.style=E1n(o.style)),o.title&&(a.title=mc(o.title)),o.view&&(a.view=mc(o.view)),a}const S1n=new Set(["view",...fvn]),T1n=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],C1n={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...gvn};function A1n(e){e=Hn(e);for(const t of T1n)delete e[t];if(e.axis)for(const t in e.axis)jO(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of o1n)delete e.legend[t];if(e.mark){for(const t of wxe)delete e.mark[t];e.mark.tooltip&&jt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(xHe(e.params)),delete e.params);for(const t of S1n){for(const r of wxe)delete e[t][r];const n=C1n[t];if(n)for(const r of n)delete e[t][r];I1n(e,t)}for(const t of s1n())delete e[t];D1n(e);for(const t in e)jt(e[t])&&Vi(e[t])&&delete e[t];return Vi(e)?void 0:e}function D1n(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=tVe(e.title);Vi(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Vi(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Vi(r)?delete e.title:e.title=r}function I1n(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Vi(s)||(e.style[n??t]=s),delete e[t]}function m7(e){return"layer"in e}function k1n(e){return"repeat"in e}function R1n(e){return!at(e.repeat)&&e.repeat.layer}class fce{map(t,n){return a7(t)?this.mapFacet(t,n):k1n(t)?this.mapRepeat(t,n):cce(t)?this.mapHConcat(t,n):p7(t)?this.mapVConcat(t,n):lce(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(m7(t))return this.mapLayer(t,n);if(Vy(t))return this.mapUnit(t,n);throw new Error(Ale(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const N1n={zero:1,center:1,normalize:1};function P1n(e){return e in N1n}const O1n=new Set([BVe,r7,n7,P5,s7,Gle,Yle,i7,jVe,Wle]),M1n=new Set([r7,n7,BVe]);function hS(e){return At(e)&&d2(e)==="quantitative"&&!e.bin}function Rxe(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(At(o)&&At(a))if(hS(o)&&hS(a)){if(o.stack)return t;if(a.stack)return i;const u=At(o)&&!!o.aggregate,l=At(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(hS(o))return t;if(hS(a))return i}else{if(hS(o))return s&&n==="vertical"?void 0:t;if(hS(a))return s&&n==="horizontal"?void 0:i}}function $1n(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function DHe(e,t){var m,g;const n=rg(e)?e:{type:e},r=n.type;if(!O1n.has(r))return null;const i=Rxe(t,"x",n)||Rxe(t,"theta",n);if(!i)return null;const s=t[i],o=At(s)?Pt(s,{}):void 0,a=$1n(i),u=[],l=new Set;if(t[a]){const y=t[a],b=At(y)?Pt(y,{}):void 0;b&&b!==o&&(u.push(a),l.add(b))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=At(f)?Pt(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=Kgn.reduce((y,b)=>{if(b!=="tooltip"&&L_(t,b)){const w=t[b];for(const S of Lt(w)){const E=ig(S);if(E.aggregate)continue;const T=Pt(E,{});(!T||!l.has(T))&&y.push({channel:b,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?jb(s.stack)?p=s.stack?"zero":null:p=s.stack:M1n.has(r)&&(p="zero"),!p||!P1n(p)||ece(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Oc.LINEAR&&s!=null&&s.stack&&Tt(cyn(s.scale.type)),Jn(t[Sg(i)])?(s.stack!==void 0&&Tt(lyn(i)),null):(At(s)&&s.aggregate&&!a0n.has(s.aggregate)&&Tt(fyn(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:yx(r),stackBy:h,offset:p}))}function IHe(e,t,n){const r=mc(e),i=Si("orient",r,n);if(r.orient=j1n(r.type,t,i),i!==void 0&&i!==r.orient&&Tt(G0n(r.orient,i)),r.type==="bar"&&r.orient){const u=Si("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:bvn[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Si("opacity",r,n),o=Si("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=L1n(r.type,t)),Si("cursor",r,n)===void 0&&(r.cursor=F1n(r,t,n)),r}function F1n(e,t,n){return t.href||e.href||Si("href",e,n)?"pointer":e.cursor}function L1n(e,t){if(Fr([s7,Wle,Gle,Yle],e)&&!ece(t))return .7}function B1n(e,t,{graticule:n}){if(n)return!1;const r=yy("filled",e,t),i=e.type;return Ao(r,i!==s7&&i!==i7&&i!==P5)}function j1n(e,t,n){switch(e){case s7:case Gle:case Yle:case jVe:case lvn:case uvn:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case r7:if(At(r)&&(eu(r.bin)||At(i)&&i.aggregate&&!r.aggregate))return"vertical";if(At(i)&&(eu(i.bin)||At(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(At(r)&&r.type===TE&&!cs(r.bin)||O5(r))&&At(i)&&eu(i.bin)?"horizontal":"vertical";if(!o)return(At(i)&&i.type===TE&&!cs(i.bin)||O5(i))&&At(r)&&eu(r.bin)?"vertical":"horizontal"}case P5:if(s&&!(At(r)&&eu(r.bin))&&o&&!(At(i)&&eu(i.bin)))return;case n7:if(o)return At(i)&&eu(i.bin)?"horizontal":"vertical";if(s)return At(r)&&eu(r.bin)?"vertical":"horizontal";if(e===P5){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case i7:case Wle:{const a=xxe(r),u=xxe(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=Ul(r)&&r.type===c2,c=Ul(i)&&i.type===c2;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function U1n(e){const{point:t,line:n,...r}=e;return _t(r).length>1?r:r.type}function z1n(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Pc(e[t],["point","line"])});return e}function _q(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?jt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?jt(t.point)?t.point:{}:void 0}function Nxe(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class V1n{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Vy(t)){const{mark:r,encoding:i}=t,s=rg(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!_q(s,n[s.type],i);case"area":return!!_q(s,n[s.type],i)||!!Nxe(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=h7(l,i),d=rg(a)?a:{type:a},h=_q(d,i[d.type],f),p=d.type==="area"&&Nxe(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:U1n({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Pc(f,["shape"])}],g=DHe(IHe(d,f,i),f);let y=f;if(g){const{fieldChannel:b,offset:w}=g;y={...f,[b]:{...f[b],...w?{stack:w}:{}}}}return y=Pc(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...o2(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...o2(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:z1n(i)})}}function H1n(e,t){return t?FO(e)?RHe(e,t):kHe(e,t):e}function Eq(e,t){return t?RHe(e,t):e}function wQ(e,t,n){const r=t[e];if(Cvn(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Tt(A0n(r.repeat));return}return t}function kHe(e,t){if(e=wQ("field",e,t),e!==void 0){if(e===null)return null;if(Xle(e)&&Fm(e.sort)){const n=wQ("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Pxe(e,t){if(At(e))return kHe(e,t);{const n=wQ("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Oxe(e,t){if(Jn(e)){const n=Pxe(e,t);if(n)return n;if(u7(e))return{condition:e.condition}}else{if(LO(e)){const n=Pxe(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function RHe(e,t){const n={};for(const r in e)if(vn(e,r)){const i=e[r];if(at(i))n[r]=i.map(s=>Oxe(s,t)).filter(s=>s);else{const s=Oxe(i,t);s!==void 0&&(n[r]=s)}}return n}class q1n{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Vy(t)){const{encoding:n,mark:r}=t;if(r==="line"||rg(r)&&r.type==="line")for(const i of Wgn){const s=hx(i),o=n[s];if(n[i]&&(At(o)&&!eu(o.bin)||Cg(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Tt(W0n(!!i.x2,!!i.y2)),r({...t,mark:jt(s)?{...s,type:"rule"}:"rule"},n)}}class W1n extends fce{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Yvn,Qvn,i1n,new V1n,new q1n]}map(t,n){if(Vy(t)){const r=L_(t.encoding,L0),i=L_(t.encoding,B0),s=L_(t.encoding,Wj);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=Eq(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return R1n(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Ls(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!at(r)&&t.columns&&(t=Pc(t,["columns"]),Tt(hxe("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!at(r)&&r.row||[u?u.row:null],f=!at(r)&&r.column||[u?u.column:null],d=at(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},b=(i.name?`${i.name}_`:"")+l+"child__"+(at(r)?`${Ls(p)}`:(r.row?`row_${Ls(m)}`:"")+(r.column?`column_${Ls(g)}`:"")),w=this.map(i,{...n,repeater:y,repeaterPrefix:b});w.name=b,a.push(Pc(w,["data"]))}const h=at(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return FO(r)&&t.columns&&(t=Pc(t,["columns"]),Tt(hxe("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=$xe({parentProjection:o,projection:i}),l=Mxe({parentEncoding:s,encoding:Eq(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=Eq(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Tt(H0n([...r?[L0]:[],...i?[B0]:[]]));const o={},a={};for(const u of[L0,B0]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:H1n(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:Mxe({parentEncoding:n,encoding:s,layer:!0}),parentProjection:$xe({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Mxe({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([..._t(e),..._t(t)]);for(const s of i){const o=t[s],a=e[s];if(Jn(o)){const u={...a,...o};r[s]=u}else LO(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||vp(a)||on(a)||Jn(a)||at(a))&&(r[s]=a)}}else r=t;return!r||Vi(r)?void 0:r}function $xe(e){const{parentProjection:t,projection:n}=e;return t&&n&&Tt(P0n({parentProjection:t,projection:n})),n??t}function dce(e){return"filter"in e}function G1n(e){return(e==null?void 0:e.stop)!==void 0}function NHe(e){return"lookup"in e}function Y1n(e){return"data"in e}function K1n(e){return"param"in e}function X1n(e){return"pivot"in e}function Q1n(e){return"density"in e}function J1n(e){return"quantile"in e}function Z1n(e){return"regression"in e}function ebn(e){return"loess"in e}function tbn(e){return"sample"in e}function nbn(e){return"window"in e}function rbn(e){return"joinaggregate"in e}function ibn(e){return"flatten"in e}function sbn(e){return"calculate"in e}function PHe(e){return"bin"in e}function obn(e){return"impute"in e}function abn(e){return"timeUnit"in e}function ubn(e){return"aggregate"in e}function lbn(e){return"stack"in e}function cbn(e){return"fold"in e}function fbn(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function dbn(e){return e.map(t=>dce(t)?{filter:VT(t.filter,Byn)}:t)}class hbn extends fce{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Fxe(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Fxe(t,n),t.encoding){const r={};for(const[i,s]of ab(t.encoding))r[i]=OHe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:ab(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of fu(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function Fxe(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(dce(s))return{filter:_Q(s,t)};if(PHe(s)&&px(s.bin))return{...s,bin:MHe(s.bin)};if(NHe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function OHe(e,t){var r,i;const n=Hn(e);if(At(n)&&px(n.bin)&&(n.bin=MHe(n.bin)),vx(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(u7(n))if(at(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:_Q(s,t)}});else{const{selection:s,param:o,test:a,...u}=OHe(n.condition,t);n.condition=o?n.condition:{...u,test:_Q(n.condition,t)}}return n}function MHe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function _Q(e,t){const n=r=>VT(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):VT(e.test||e.filter,r=>r.selection?n(r.selection):r)}class EQ extends fce{map(t,n){const r=n.selections??[];if(t.params&&!Vy(t)){const i=[];for(const s of t.params)uce(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(Bt(a)&&(a===t.name||i.includes(a))||at(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=EQ.prototype[e];EQ.prototype[e]=function(n,r){return t.call(this,n,pbn(n,r))}}function pbn(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function $He(e,t){t===void 0&&(t=AHe(e.config));const n=vbn(e,t),{width:r,height:i}=e,s=bbn(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const mbn=new W1n,gbn=new hbn,ybn=new EQ;function vbn(e,t={}){const n={config:t};return ybn.map(mbn.map(gbn.map(e,n),n),n)}function Lxe(e){return Bt(e)?{type:e}:e??{}}function bbn(e,t,n){let{width:r,height:i}=t;const s=Vy(e)||m7(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Tt(lxe("width")),r=void 0),i=="container"&&(Tt(lxe("height")),i=void 0));const a={type:"pad",...o,...n?Lxe(n.autosize):{},...Lxe(e.autosize)};if(a.type==="fit"&&!s&&(Tt(g0n),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Tt(cxe("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Tt(cxe("height")),!_f(a,{type:"pad"}))return a}function wbn(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function _bn(e){return e?`fit-${Qj(e)}`:"fit"}const Ebn=["background","padding"];function Bxe(e,t){const n={};for(const r of Ebn)e&&e[r]!==void 0&&(n[r]=pf(e[r]));return t&&(n.params=e.params),n}class Hy{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Hy(Hn(this.explicit),Hn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Ao(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of _t(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function em(e){return{explicit:!0,value:e}}function of(e){return{explicit:!1,value:e}}function FHe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:g7(t,n,r,i)}}function g7(e,t,n,r){return e.explicit&&t.explicit&&Tt(nyn(n,r,e.value,t.value)),e}function cb(e,t,n,r,i=g7){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:_f(e.value,t.value)?e:i(e,t,n,r)}class xbn extends Hy{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function m2(e){return"url"in e}function zN(e){return"values"in e}function LHe(e){return"name"in e&&!m2(e)&&!zN(e)&&!T1(e)}function T1(e){return e&&(BHe(e)||jHe(e)||hce(e))}function BHe(e){return"sequence"in e}function jHe(e){return"sphere"in e}function hce(e){return"graticule"in e}var Rs;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(Rs||(Rs={}));function UHe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=qd(i.field),i}function DE(e,t=!0,n=el){if(at(e)){const r=e.map(i=>DE(i,t,n));return t?`[${r.join(", ")}]`:r}else if(mx(e))return n(t?SE(e):Ayn(e));return t?n(Hi(e)):e}function Sbn(e,t){for(const n of fu(e.component.selection??{})){const r=n.name;let i=`${r}${db}, ${n.resolve==="global"?"true":`{unit: ${B_(e)}}`}`;for(const s of w7)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+nwn,on:[{events:{signal:n.name+db},update:`modify(${Nt(n.name+IE)}, ${i})`}]})}return pce(t)}function Tbn(e,t){if(e.component.selection&&_t(e.component.selection).length){const n=Nt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:zb("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return pce(t)}function Cbn(e,t){let n=!1;for(const r of fu(e.component.selection??{})){const i=r.name,s=Nt(i+IE);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${sqe}(${s}, ${Nt(a)}${u}`})}n=!0;for(const a of w7)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),pce(t)}function Abn(e,t){const n=[...t],r=B_(e,{escape:!1});for(const i of fu(e.component.selection??{})){const s={name:i.name+IE};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:bp}}]),i.init){const a=i.project.items.map(UHe);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[bp]:DE(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:DE(u,!1)}))}n.filter(a=>a.name===i.name+IE).length||n.push(s)}return n}function zHe(e,t){for(const n of fu(e.component.selection??{}))for(const r of w7)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Dbn(e,t){for(const n of e.children)ao(n)&&(t=zHe(n,t));return t}function Ibn(e,t,n,r){const i=cqe(e,t.param,t);return{signal:Uf(n.get("type"))&&at(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function pce(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class ji{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Tt(k0n);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Mc extends ji{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${Lze()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function xq(e){return e.as!==void 0}function jxe(e){return`${e}_end`}class Lm extends ji{clone(){return new Lm(null,Hn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(gx(u)){if(ao(n)){const{mark:c,markDef:f,config:d}=n,h=lb({fieldDef:s,markDef:f,config:d});(UN(c)||h)&&(l={timeUnit:La(u),field:a})}}else l={as:Pt(s,{forAs:!0}),field:a,timeUnit:u};if(ao(n)){const{mark:c,markDef:f,config:d}=n,h=lb({fieldDef:s,markDef:f,config:d});UN(c)&&Do(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[$r(l)]=l)}return i},{});return Vi(r)?null:new Lm(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=La(r),o={...i,timeUnit:s};return new Lm(t,{[$r(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of ab(this.timeUnits)){const s=xq(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(fu(this.timeUnits).map(t=>xq(t)?t.as:jxe(t.field)))}dependentFields(){return new Set(fu(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${$r(this.timeUnits)}`}assemble(){const t=[];for(const n of fu(this.timeUnits)){const{rectBandPosition:r}=n,i=La(n.timeUnit);if(xq(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:qd(s),type:"timeunit",...a?{units:t7(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...Uxe(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=VHe({timeUnit:i,field:o}),u=jxe(o);t.push({type:"formula",expr:a,as:u}),t.push(...Uxe([o,u],r,i))}}return t}}const y7="offsetted_rect_start",v7="offsetted_rect_end";function VHe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=wVe(r),{part:o,step:a}=SVe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function Uxe([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:zxe([VHe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${y7}`},{type:"formula",expr:zxe([i,s],n+.5),as:`${e}_${v7}`}]}return[]}function zxe([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const UO="_tuple_fields";class kbn{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Rbn={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new kbn),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Ls(`${r}_${g}`);for(let b=1;a.has(y);b++)y=Ls(`${r}_${g}_${b}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?Lt(n.value):null;let{fields:d,encodings:h}=jt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(jt(p))for(const m of _t(p))qgn(m)?(h||(h=[])).push(m):l==="interval"?(Tt(C0n),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Tt(y0n(p,m.aggregate));continue}else if(!g){Tt(dxe(p));continue}if(m.timeUnit&&!gx(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[$r(y)]=y}if(!s[g]){const y=l==="interval"&&zy(p)&&Uf(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",b={field:g,channel:p,type:y,index:i.items.length};b.signals={...u(b,"data"),...u(b,"visual")},i.items.push(s[g]=b),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===bp,Hze(p)?(b.geoChannel=p,b.channel=Vze(p),i.hasChannel[b.channel]=s[g]):i.hasChannel[p]=s[g]}}else Tt(dxe(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===bp}f&&(t.init=f.map(p=>i.items.map(m=>jt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Vi(o)||(i.timeUnit=new Lm(null,o))},signals:(e,t,n)=>{const r=t.name+UO;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(UHe)})}},j0={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!zy(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Tt(_0n),!s||!Uf(o)){Tt(w0n);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||Vxe(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(sqe)>=0)i.update=`{${r.map(o=>`${Nt(qd(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Nt(qd(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Vxe(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function xQ(e,t){return`domain(${Nt(e.scaleName(t))})`}function Vxe(e){return e.parent&&jA(e.parent)&&!e.parent.parent}const WT="_brush",HHe="_scale_trigger",ZD="geo_interval_init_tick",qHe="_init",Nbn="_center",Pbn={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...jt(n.select)?n.select:{}};i.fields=[bp],i.encodings||(i.encodings=n.value?_t(n.value):[Pp,Np]),n.select={type:"interval",...i}}if(t.translate&&!j0.defined(t)){const i=`!event.item || event.item.mark.name !== ${Nt(t.name+WT)}`;for(const s of t.events){if(!s.between){Tt(`${s} is not an ordered event stream for interval selections.`);continue}const o=Lt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+db,s=fu(t.project.hasChannel).filter(a=>a.channel===Bs||a.channel===za),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(Obn(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=Nt(e.projectionName()),u=e.projectionName()+Nbn,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+qHe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(T=>T.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${Nt(e.getName("marks"))}}, unit.mark)`,b=`{unit: ${B_(e)}}`,w=`vlSelectionTuples(${y}, ${b})`,S=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...S.length?[{signal:S.join(" || ")}]:[],...o?[{signal:ZD}]:[]],update:w}]})}else{if(!j0.defined(t)){const l=r+HHe,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=Nt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=Uf(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${B_(e)}, fields: ${r+UO}, values`;return n.concat({name:i,...o?{init:`{${u}: ${DE(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(ao(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===ZD).length||n.unshift({name:ZD,value:null,on:[{events:"timer{1}",update:`${ZD} === null ? {} : ${ZD}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${Nt(t.name+IE)})`;if(j0.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of _t(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${B_(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=_t(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(b=>b).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+WT}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+WT,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function Obn(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Nt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Bs?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=j0.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:DE(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+HHe},update:Uf(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:DE(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Bs?0:1,h=t.name+qHe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const Mbn={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+UO,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=fu(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+WT):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${B_(e)}, `;if(t.project.hasSelectionId)l+=`${bp}: ${o}[${Nt(bp)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${Nt(e.vgField(d.channel,{}))}], ${o}[${Nt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${Nt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+db,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function $A(e,t,n,r){const i=u7(t)&&t.condition,s=r(t);if(i){const a=Lt(i).map(u=>{const l=r(u);if(Tvn(u)){const{param:c,empty:f}=u;return{test:lqe(e,{param:c,empty:f}),...l}}else return{test:V5(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function mce(e,t="text"){const n=e.encoding[t];return $A(e,n,t,r=>b7(r,e.config))}function b7(e,t,n="datum"){if(e){if(vp(e))return ys(e.value);if(Jn(e)){const{format:r,formatType:i}=$5(e);return qle({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function WHe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(at(o))return{tooltip:Hxe({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return $A(e,o,"tooltip",u=>{const l=b7(u,i,a);if(l)return l;if(u===null)return;let c=Si("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),Bt(c))return{value:c};if(jt(c))return on(c)?c:c.content==="encoding"?Hxe(n,s,i,t):{signal:a}})}}function GHe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=hx(f),h=Ul(c)?c:{...c,type:e[d].type},p=h.title||Jle(h,i),m=Lt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(Do(f)){const y=f==="x"?"x2":"y2",b=ig(e[y]);if(eu(h.bin)&&b){const w=Pt(h,{expr:o}),S=Pt(b,{expr:o}),{format:E,formatType:T}=$5(h);g=$O(w,S,E,T,i),s[y]=!0}}if((Do(f)||f===nh||f===Rp)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:b}=$5(h);g=qle({fieldOrDatumDef:h,format:y,formatType:b,expr:o,config:i,normalizeStack:!0}).signal}g??(g=b7(h,i,o).signal),a.push({channel:f,key:m,value:g})}tce(e,(c,f)=>{At(c)?u(c,f):l7(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function Hxe(e,t,n,{reactiveGeom:r}={}){const i=GHe(e,t,n,{reactiveGeom:r}),s=ab(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function $bn(e){const{markDef:t,config:n}=e,r=Si("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...Fbn(e),...Lbn(e)}}function Fbn(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Si("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in h0n?{}:{ariaRoleDescription:{value:t}}}function Lbn(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return $A(e,s,"description",u=>b7(u,e.config));const o=Si("description",n,r);if(o!=null)return{description:ys(o)};if(r.aria===!1)return{};const a=GHe(t,i,r);if(!Vi(a))return{description:{signal:ab(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function ka(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=Si(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=ys(u)));const l=i[e];return $A(t,l,o??e,c=>Hle({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function YHe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Si("filled",n,i),a=Fr(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=Si(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=Si(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:ys(u)}:{},...l?{stroke:ys(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Tt(fVe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...ka("color",e,{vgChannel:c,defaultValue:o?u:l}),...ka("fill",e,{defaultValue:r.fill?u:void 0}),...ka("stroke",e,{defaultValue:r.stroke?l:void 0})}}function Bbn(e){const{encoding:t,mark:n}=e,r=t.order;return!yx(n)&&vp(r)?$A(e,r,"zindex",i=>ys(i.value)):{}}function g2({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:Hle({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:ys(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function Vu(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[Sg(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=g2({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=gce({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&Do(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:jbn({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function jbn(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(Jn(n)&&i&&t===i.fieldChannel){if(At(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return N5({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return F_(n,r,{suffix:"end"},{offset:s})}return zle(e)}function gce({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=hx(n),u=ub(n),l=Si(n,s,o,{vgChannel:u});if(l!==void 0)return Qk(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Fr([Oc.LOG,Oc.TIME,Oc.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Yc(n)],mult:.5}}}}const Ubn={left:"x",center:"xc",right:"x2"},zbn={top:"y",middle:"yc",bottom:"y2"};function KHe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return ub(e);const i=e==="x"?"align":"baseline",s=Si(i,t,n);let o;return on(s)?(Tt(q0n(i)),o=void 0):o=s,e==="x"?Ubn[o||(r==="top"?"left":"center")]:zbn[o||r]}function U5(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?XHe(e,t,{defaultPos:n,defaultPos2:r}):Vu(e,t,{defaultPos:n})}function XHe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=Sg(e),a=Yc(e),u=Vbn(t,r,o),l=u[a]?KHe(e,i,s):ub(e);return{...Vu(e,t,{defaultPos:n,vgChannel:l}),...u}}function Vbn(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=hx(n),l=Yc(n),c=ub(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?g2({channel:n,markDef:s,encoding:r,model:e}):g2({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=Yc(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=Hbn({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:m$(n,s)||m$(n,{[n]:k5(n,s,a.style),[l]:k5(l,s,a.style)})||m$(n,a[i])||m$(n,a.mark)||{[c]:gce({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function Hbn({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return Jn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?F_(t,s,{suffix:"start"},{offset:u}):zle({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function m$(e,t){const n=Yc(e),r=ub(e);if(t[r]!==void 0)return{[r]:Qk(e,t[r])};if(t[e]!==void 0)return{[r]:Qk(e,t[e])};if(t[n]){const i=t[n];if(AE(i))Tt(B0n(n));else return{[n]:Qk(e,i)}}}function fb(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=Sg(t),a=Yc(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??Si("size",i,n,{vgChannel:a}),p=Yze(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return At(u)&&(cs(u.bin)||eu(u.bin)||u.timeUnit&&!l)&&!(h&&!AE(h))&&!r[p]&&!Ba(f)?Gbn({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Jn(u)&&Ba(f)||m)&&!l?Wbn(u,t,e):XHe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function qbn(e,t,n,r,i,s,o){if(AE(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=yy("minBandSize",{type:o},r);return{signal:c?`max(${Yh(c)}, ${l})`:l}}else i.band!==1&&(Tt(K0n(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(on(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(Kb(u)&&li(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=Ao(u,o==="bar"?l:c);if(on(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(li(f))return{signal:`${1-f} * ${e}`}}return{value:B5(r.view,e)-2}}function Wbn(e,t,n){var I,k;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=Yc(t),f=Sg(t),d=Yze(t),h=n.scaleName(d),p=n.getScaleComponent(Ele(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=ka("size",n,{vgChannel:c,defaultRef:ys(r.size)}):Tt(Z0n(r.type)));const y=!!g,b=WVe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(I=l||p)==null?void 0:I.get("type"),useVlSizeChannel:m});g=g||{[c]:qbn(c,h||u,p||l,s,b,!!e,r.type)};const w=((k=l||p)==null?void 0:k.get("type"))==="band"&&AE(b)&&!y?"top":"middle",S=KHe(t,r,s,w),E=S==="xc"||S==="yc",{offset:T,offsetType:C}=g2({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),A=zle({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:T,defaultRef:gce({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?C==="encoding"?0:.5:on(b)?{signal:`(1-${b})/2`}:AE(b)?(1-b.band)/2:0});if(c)return{[S]:A,...g};{const N=ub(f),F=g[c],M=T?{...F,offset:T}:F;return{[S]:A,[N]:at(A)?[A[0],{...A[1],offset:M}]:{...A,offset:M}}}}function qxe(e,t,n,r,i,s,o){if(zze(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(on(n)||on(i)||on(r)||s){const l=Yh(n),c=Yh(i),f=Yh(r),d=Yh(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function Gbn({fieldDef:e,fieldDef2:t,channel:n,model:r}){var k;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=WVe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(k=r.component.axes[n])==null?void 0:k[0],h=(d==null?void 0:d.get("translate"))??.5,p=Do(n)?Si("binSpacing",s,i)??0:0,m=Sg(n),g=ub(n),y=ub(m),b=yy("minBandSize",s,i),{offset:w}=g2({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:S}=g2({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=ivn({fieldDef:e,scaleName:u}),T=qxe(n,p,c,h,w,b,E),C=qxe(m,p,c,h,S??w,b,E),A=on(f)?{signal:`(1-${f.signal})/2`}:AE(f)?(1-f.band)/2:.5,I=lb({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(cs(e.bin)||e.timeUnit){const N=e.timeUnit&&I!==.5;return{[y]:Wxe({fieldDef:e,scaleName:u,bandPosition:A,offset:C,useRectOffsetField:N}),[g]:Wxe({fieldDef:e,scaleName:u,bandPosition:on(A)?{signal:`1-${A.signal}`}:1-A,offset:T,useRectOffsetField:N})}}else if(eu(e.bin)){const N=F_(e,u,{},{offset:C});if(At(t))return{[y]:N,[g]:F_(t,u,{},{offset:T})};if(px(e.bin)&&e.bin.step)return{[y]:N,[g]:{signal:`scale("${u}", ${Pt(e,{expr:"datum"})} + ${e.bin.step})`,offset:T}}}Tt(pVe(m))}function Wxe({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return N5({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:y7,endSuffix:v7}:{}})}const Ybn=new Set(["aria","width","height"]);function rh(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?YHe(e):{};return{...Kbn(e.markDef,t),...Gxe(e,"fill",n),...Gxe(e,"stroke",r),...ka("opacity",e),...ka("fillOpacity",e),...ka("strokeOpacity",e),...ka("strokeWidth",e),...ka("strokeDash",e),...Bbn(e),...WHe(e),...mce(e,"href"),...$bn(e)}}function Gxe(e,t,n){const{config:r,mark:i,markDef:s}=e;if(Si("invalid",s,r)==="hide"&&n&&!yx(i)){const a=Xbn(e,{invalid:!0,channels:Jj});if(a)return{[t]:[{test:a,value:null},...Lt(n)]}}return n?{[t]:n}:{}}function Kbn(e,t){return d0n.reduce((n,r)=>(!Ybn.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=ys(e[r])),n),{})}function Xbn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&Uf(u)&&(s[l]=!0)}return s},{}),i=_t(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Vle(o,t)).join(` ${s} `)}}function yce(e){const{config:t,markDef:n}=e;if(Si("invalid",n,t)){const i=Qbn(e,{channels:Tg});if(i)return{defined:{signal:i}}}return{}}function Qbn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&Uf(l)&&(s[c]=!0)}return s},{}),i=_t(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Vle(o,t)).join(` ${s} `)}}function Yxe(e,t){if(t!==void 0)return{[e]:ys(t)}}const Sq="voronoi",QHe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(Sq)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(yx(s))return Tt(v0n(s)),n;const o={name:e.getName(Sq),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...WHe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(Sq)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},JHe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!ace(e.bind),parse:(e,t,n)=>oqe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=QHe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Ls(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:DE(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Nt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+db)[0],o=r+UO,a=i.items.map(l=>Ls(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},z5="_toggle",ZHe={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+z5,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+db,r=t.name+z5;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${B_(e)}}, `)+`${r} ? ${n} : null`}},Jbn={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Bt(t.clear)?zb(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(JHe.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Ls(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+db);r(i,"null"),ZHe.defined(t)&&(i=n.findIndex(s=>s.name===t.name+z5),r(i,"false"))}return n}},eqe={defined:e=>{const t=e.resolve==="global"&&e.bind&&ace(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==bp;return t&&!n&&Tt(E0n),t&&n},parse:(e,t,n)=>{const r=Hn(n);if(r.select=Bt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},oqe(t,r),jt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Lt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=wq(t.bind)?t.bind.legend:"click",s=Bt(i)?zb(i,"view"):Lt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=wq(t.bind)&&t.bind.legend,s=o=>a=>{const u=Hn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Ls(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+db),o=r+UO,a=i.items.filter(d=>d.hasLegend).map(d=>Ls(`${r}_${Ls(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+z5),f=wq(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function Zbn(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of fu(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&eqe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const tqe="_translate_anchor",nqe="_translate_delta",ewn={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=j0.defined(t),s=r+tqe,{x:o,y:a}=t.project.hasChannel;let u=zb(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+WT,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?xQ(e,Bs):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?xQ(e,za):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+nqe,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Kxe(e,t,o,"width",n),a!==void 0&&Kxe(e,t,a,"height",n),n}};function Kxe(e,t,n,r,i){const s=t.name,o=s+tqe,a=s+nqe,u=n.channel,l=j0.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Bs?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,b=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",w=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",S=`${b}(${g}, ${y}${w})`;c.on.push({events:{signal:a},update:l?S:`clampRange(${S}, 0, ${f})`})}const rqe="_zoom_anchor",iqe="_zoom_delta",twn={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=j0.defined(t),s=r+iqe,{x:o,y:a}=t.project.hasChannel,u=Nt(e.scaleName(Bs)),l=Nt(e.scaleName(za));let c=zb(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+WT,f))),n.push({name:r+rqe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&Xxe(e,t,o,"width",n),a!==void 0&&Xxe(e,t,a,"height",n),n}};function Xxe(e,t,n,r,i){const s=t.name,o=n.channel,a=j0.defined(t),u=i.filter(b=>b.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?xQ(e,o):u.name,h=s+iqe,p=`${s}${rqe}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const IE="_store",db="_tuple",nwn="_modify",sqe="vlSelectionResolve",w7=[Mbn,Pbn,Rbn,ZHe,JHe,j0,eqe,Jbn,ewn,twn,QHe];function rwn(e){let t=e.parent;for(;t&&!Cf(t);)t=t.parent;return t}function B_(e,{escape:t}={escape:!0}){let n=t?Nt(e.name):e.name;const r=rwn(e);if(r){const{facet:i}=r;for(const s of kd)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Nt(r.vgField(s))}])`)}return n}function vce(e){return fu(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function oqe(e,t){(Bt(t.select)||!t.select.on)&&delete e.events,(Bt(t.select)||!t.select.clear)&&delete e.clear,(Bt(t.select)||!t.select.toggle)&&delete e.toggle}function SQ(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...SQ(e.object)),t.push(...SQ(e.property))),t)}function aqe(e){return e.object.type==="MemberExpression"?aqe(e.object):e.object.name==="datum"}function uqe(e){const t=Lue(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&aqe(r)&&n.add(SQ(r).slice(1).join("."))}),n}class FA extends ji{clone(){return new FA(null,this.model,Hn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=V5(this.model,this.filter,this),this._dependentFields=uqe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function iwn(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Ls(i.name),o=i.select,a=Bt(o)?o:o.type,u=jt(o)?Hn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=Hn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:Bt(u.on)?zb(u.on,"scope"):Lt(Hn(u.on))},f=Hn(i);for(const d of w7)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function lqe(e,t,n,r="datum"){const i=Bt(t)?t:t.param,s=Ls(i),o=Nt(s+IE);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${Nt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function cqe(e,t,n){const r=Ls(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Tt(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Nt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Tt((a.length?"Multiple ":"No ")+`matching ${Nt(i)} encoding found for selection ${Nt(n.param)}. Using "field": ${Nt(s)}.`)):s=a[0].field}return`${o.name}[${Nt(qd(s))}]`}function swn(e,t){for(const[n,r]of ab(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Mc(new FA(t,e,{param:n}),i,Rs.Lookup,e.component.data.outputNodeRefCounts)}}function V5(e,t,n){return Xk(t,r=>Bt(r)?r:$yn(r)?lqe(e,r,n):CVe(r))}function own(e,t){if(e)return at(e)&&!Av(e)?e.map(n=>Jle(n,t)).join(", "):e}function Tq(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function KI(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=Bvn[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(jO(m)){const{condition:g,...y}=m,b=Lt(g),w=Sxe[h];if(w){const{vgProp:S,part:E}=w,T=[...b.map(C=>{const{test:A,...I}=C;return{test:V5(null,A),...I}}),y];Tq(c,E,S,T),delete c[h]}else if(w===null){const S={signal:b.map(E=>{const{test:T,...C}=E;return`${V5(null,T)} ? ${uxe(C)} : `}).join("")+uxe(y)};c[h]=S}}else if(on(m)){const g=Sxe[h];if(g){const{vgProp:y,part:b}=g;Tq(c,b,y,m),delete c[h]}}Fr(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Vi(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Ao(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&on(c.encode.labels.update.text)&&(p=EE(a,"datum.label",c.encode.labels.update.text.signal)),Tq(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of nHe)e.hasAxisPart(p)||delete c.encode[p];Vi(c.encode)&&delete c.encode}const h=own(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:Ao(l,0)}}}}function fqe(e){const{axes:t}=e.component,n=[];for(const r of Tg)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function awn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>KI(i,"grid",t)),...r.map(i=>KI(i,"grid",t)),...n.map(i=>KI(i,"main",t)),...r.map(i=>KI(i,"main",t))].filter(i=>i)}function Qxe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([..._t(o),..._t(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Yh(o[c])} : ${Yh(a[c])}`};return l}return t[i]})])}function uwn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:kVe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=on(n)?"axisOrient":`axis${kO(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:Qxe(a,r,e,n),vgAxisConfig:Qxe(u,r,e,n),axisConfigStyle:lwn([...u,...a],r)}}function lwn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=Lt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function TQ(e,t,n,r={}){var s;const i=iVe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const Jxe={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??cwn(n,e),gridScale:({model:e,channel:t})=>fwn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||hqe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||dqe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??hwn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??pwn(t.type,n,At(t)&&!!t.timeUnit,At(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??gwn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:ywn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=pqe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return oVe(i?[Exe(i)]:[],At(o)?[Exe(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>vwn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??bwn(n,t)};function cwn(e,t){return!Ba(e)&&At(t)&&!cs(t==null?void 0:t.bin)&&!eu(t==null?void 0:t.bin)}function fwn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function dwn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return on(s)?s:jN(s);{const{configValue:o}=TQ("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?jN(o):n===Bs&&Fr([Ule,jle],e.type)&&!(At(e)&&e.timeUnit)?270:void 0}}function CQ(e){return`(((${e.signal} % 360) + 360) % 360)`}function dqe(e,t,n,r){if(e!==void 0)if(n==="x"){if(on(e)){const i=CQ(e),s=on(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(on(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(on(e)){const i=CQ(e),s=on(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(on(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function hqe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(on(e)){const o=CQ(e),a=on(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(on(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function hwn(e,t){if(t==="x"&&Fr(["quantitative","temporal"],e))return!0}function pwn(e,t,n,r){if(n&&!jt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function mwn(e){return e==="x"?"bottom":"left"}function gwn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Ba(t)&&t!=="log"){if(At(e)){if(cs(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Fr(["month","hours","day","quarter"],(i=La(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function ywn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(At(t)){const{timeUnit:n}=t;if(n){const r=xVe(n);if(r)return{signal:r}}}}function pqe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return aVe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function vwn(e,t){const n=e.values;if(at(n))return tHe(t,n);if(on(n))return n}function bwn(e,t){return e==="rect"&&M5(t)?1:0}class y2 extends ji{clone(){return new y2(null,Hn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=uqe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(vx(r)&&qVe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${CVe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new y2(t,{calculate:u,as:v2(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${$r(this.transform)}`}}function v2(e,t,n){return Pt(e,{prefix:t,suffix:"sort_index",...n})}function _7(e,t){return Fr(["top","bottom"],t)?"column":Fr(["left","right"],t)||e==="row"?"row":"column"}function b2(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Ao((t||{})[e],i[e],n.header[e])}function E7(e,t,n,r){const i={};for(const s of e){const o=b2(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const bce=["row","column"],wce=["header","footer"];function wwn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=E7(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=_7(t,a),l=jN(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...gqe(l,u),...mqe(u,l,s),...yqe(r,i,t,a1n,bHe)}}}function mqe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=hqe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function gqe(e,t){const n=dqe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function _wn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of wce)if(n[i])for(const s of n[i]){const o=xwn(e,t,i,n,s);o!=null&&r.push(o)}return r}function Ewn(e,t){const{sort:n}=e;return Fm(n)?{field:Pt(n,{expr:"datum"}),order:n.order??"ascending"}:at(n)?{field:v2(e,t,{expr:"datum"}),order:"ascending"}:{field:Pt(e,{expr:"datum"}),order:n??"ascending"}}function AQ(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=E7(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=qle({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=_7(t,a);return{text:{signal:u?EE(EE(u,"datum.label",l),"datum.value",Pt(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...gqe(s,c),...mqe(c,s,o),...yqe(n,e,t,u1n,wHe)}}function xwn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=E7(["labelOrient"],o.header,a,t);(t==="row"&&!Fr(["top","bottom"],f)||t==="column"&&!Fr(["left","right"],f))&&(s=AQ(o,t,a))}const u=Cf(e)&&!FO(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Ewn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const Swn={column:{start:0,end:1},row:{start:1,end:0}};function Twn(e,t){return Swn[t][e]}function Cwn(e,t){const n={};for(const r of kd){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=E7(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=_7(r,o),u=Twn(s,a);u!==void 0&&(n[a]=u)}}return Vi(n)?void 0:n}function yqe(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=b2(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function _ce(e){return[...g$(e,"width"),...g$(e,"height"),...g$(e,"childWidth"),...g$(e,"childHeight")]}function g$(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(Ba(o)&&Kb(a)){const u=e.scaleName(n);return Cf(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Zxe(u,a)]:[Zxe(u,a),{name:i,update:vqe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=bQ(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Zxe(e,t){const n=`${e}_step`;return on(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function vqe(e,t,n){const r=t.get("type"),i=t.get("padding"),s=Ao(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Yh(o)}, ${Yh(s)}) * ${e}_step`}function bqe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function wqe(e,t){return _t(e).reduce((n,r)=>{const i=e[r];return{...n,...$A(t,i,r,s=>ys(s.value))}},{})}function _qe(e,t){if(Cf(t))return e==="theta"?"independent":"shared";if(jA(t))return"shared";if(Dce(t))return Do(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Ece(e,t){const n=e.scale[t],r=Do(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Tt(iyn(t)),"independent"):e[r][t]||"shared"}const Awn={...f1n,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},Eqe=_t(Awn);class Dwn extends Hy{}const eSe={symbols:Iwn,gradient:kwn,labels:Rwn,entries:Nwn};function Iwn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...m0n({},n,pvn),...YHe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?xqe(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Wc)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=ys(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=ys(m??1));else if(at(f.fill)){const g=DQ(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=ys(g))}}if(f.stroke){if(r==="stroke"||!c&&r===Wc)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(at(f.stroke)){const g=Ao(DQ(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==Uy){const g=At(t)&&Tqe(n,i,t);g?f.opacity=[{test:g,...ys(m??1)},ys(u.legend.unselectedOpacity)]:m&&(f.opacity=ys(m))}return f={...f,...e},Vi(f)?void 0:f}function kwn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?xqe(o.opacity)||s.opacity:void 0;return l&&(a.opacity=ys(l)),a={...a,...e},Vi(a)?void 0:a}function Rwn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=At(t)?Tqe(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;CE(c)?f=Xh({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Xh({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&At(t)&&t.timeUnit===void 0&&(f=Xh({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Vi(d)?void 0:d}function Nwn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function xqe(e){return Sqe(e,(t,n)=>Math.max(t,n.value))}function DQ(e){return Sqe(e,(t,n)=>Ao(t,n.value))}function Sqe(e,t){if(Avn(e))return Lt(e.condition).reduce(t,e.value);if(vp(e))return e.value}function Tqe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Nt(n.field);return r.map(s=>`(!length(data(${Nt(Ls(s)+IE)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const tSe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return $Ve(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return FVe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Bwn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??jwn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??Own(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>qT(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(HT(n)&&Kh(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Pwn(t,e)};function Pwn(e,t){const n=e.values;if(at(n))return tHe(t,n);if(on(n))return n}function Own(e,t,n,r){if(t!=="shape"){const i=DQ(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Mwn(e){const{legend:t}=e;return Ao(t.type,$wn(e))}function $wn({channel:e,timeUnit:t,scaleType:n}){if(HT(e)){if(Fr(["quarter","month","day"],t))return"symbol";if(Kh(n))return"gradient"}return"symbol"}function Fwn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Lwn(n,t)}function Lwn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Bwn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Kh(i))return n==="horizontal"?r==="top"||r==="bottom"?nSe(t,"width",o,s):o:nSe(t,"height",u,a)}function nSe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function jwn(e){if(Fr(["quantile","threshold","log","symlog"],e))return"greedy"}function Cqe(e){const t=ao(e)?Uwn(e):qwn(e);return e.component.legends=t,t}function Uwn(e){const{encoding:t}=e,n={};for(const r of[Wc,...EHe]){const i=fa(t[r]);!i||!e.getScaleComponent(r)||r===Gc&&At(i)&&i.type===MA||(n[r]=Hwn(e,r))}return n}function zwn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Vwn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function Hwn(e,t){var S;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new Dwn({},zwn(e,t));Zbn(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=fa(i[t]),f=At(c)?(S=La(c.timeUnit))==null?void 0:S.unit:void 0,d=n.orient||s.legend.orient||"right",h=Mwn({legend:n,channel:t,timeUnit:f,scaleType:l}),p=Fwn({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of Eqe){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const T=E in tSe?tSe[E](m):n[E];if(T!==void 0){const C=Vwn(T,E,n,e.fieldDef(t));(C||s.legend[E]===void 0)&&a.set(E,T,C)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),b={},w={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const T=wqe(g[E]??{},e),C=E in eSe?eSe[E](T,w):T;C!==void 0&&!Vi(C)&&(b[E]={...y!=null&&y.length&&At(c)?{name:`${Ls(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:C})}return Vi(b)||a.set("encode",b,!!(n!=null&&n.encoding)),a}function qwn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){Cqe(r);for(const i of _t(r.component.legends))n.legend[i]=Ece(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=Aqe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of _t(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function Aqe(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of Eqe){const c=cb(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return Wwn(f,d);case"title":return uVe(f,d);case"type":return i=!0,of("symbol")}return g7(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&I5(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&I5(e.explicit,["encode","gradient"])),e}function Wwn(e,t){return t.value==="circle"?t:e}function Gwn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function Dqe(e){const t=e.component.legends,n={};for(const i of _t(t)){const s=e.getScaleComponent(i),o=Hi(s.get("domains"));if(n[o])for(const a of n[o])Aqe(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return fu(n).flat().map(i=>Ywn(i,e.config)).filter(i=>i!==void 0)}function Ywn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of EHe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&on(s.encode.labels.update.text)&&(l=EE(r,"datum.label",s.encode.labels.update.text.signal)),Gwn(s,"labels","text",{signal:l})}return s}}function Kwn(e){return jA(e)||Dce(e)?Xwn(e):Iqe(e)}function Xwn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),Iqe(e))}function Iqe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=on(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Fr(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Qwn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class kqe extends Hy{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function Rqe(e){e.component.projection=ao(e)?Jwn(e):t_n(e)}function Jwn(e){if(e.hasProjection){const t=mc(e.specifiedProjection),n=!(t.scale!=null||t.translate!=null),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Zwn(e):void 0,s=new kqe(e.projectionName(!0),{...mc(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function Zwn(e){const t=[],{encoding:n}=e;for(const r of[[Pp,Np],[Wd,Op]])(fa(n[r[0]])||fa(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Gc)&&e.typedFieldDef(Gc).type===MA&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Rs.Main)),t}function e_n(e,t){const n=mle(Qwn,i=>!!(!vn(e.explicit,i)&&!vn(t.explicit,i)||vn(e.explicit,i)&&vn(t.explicit,i)&&_f(e.get(i),t.get(i))));if(_f(e.size,t.size)){if(n)return e;if(_f(e.explicit,{}))return t;if(_f(t.explicit,{}))return e}return null}function t_n(e){if(e.children.length===0)return;let t;for(const r of e.children)Rqe(r);const n=mle(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=e_n(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new kqe(r,t.specifiedProjection,t.size,Hn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function n_n(e,t,n,r){if(BO(t,n)){const i=ao(e)?e.axis(n)??e.legend(n)??{}:{},s=Pt(t,{expr:"datum"}),o=Pt(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Pt(t,{binSuffix:"range",forAs:!0}),formula:$O(s,o,i.format,i.formatType,r)}}return{}}function Nqe(e,t){return`${eVe(e)}_${t}`}function r_n(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function xce(e,t,n){const r=c7(n,void 0)??{},i=Nqe(r,t);return e.getName(`${i}_bins`)}function i_n(e){return"as"in e}function rSe(e,t,n){let r,i;i_n(e)?r=Bt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Pt(e,{forAs:!0}),Pt(e,{binSuffix:"end",forAs:!0})];const s={...c7(t,void 0)},o=Nqe(s,e.field),{signal:a,extentSignal:u}=r_n(n,o);if(Zj(s.extent)){const c=s.extent;i=cqe(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class Bm extends ji{clone(){return new Bm(null,Hn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(Ul(s)&&cs(s.bin)){const{key:a,binComponent:u}=rSe(s,s.bin,n);i[a]={...u,...i[a],...n_n(n,s,o,n.config)}}return i},{});return Vi(r)?null:new Bm(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=rSe(n,n.bin,r);return new Bm(t,{[i]:s})}merge(t,n){for(const r of _t(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Em([...this.bins[r].as,...t.bins[r].as],$r)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(fu(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(fu(this.bins).map(t=>t.field))}hash(){return`Bin ${$r(this.bins)}`}assemble(){return fu(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:qd(t.field),as:r,signal:t.signal,...Zj(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:qd(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:Pt({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function s_n(e,t,n,r){var s;const i=ao(r)?r.encoding[Sg(t)]:void 0;if(Ul(n)&&ao(r)&&GVe(n,i,r.markDef,r.config)){e.add(Pt(n,{})),e.add(Pt(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=lb({fieldDef:n,markDef:a,config:u});UN(o)&&l!==.5&&Do(t)&&(e.add(Pt(n,{suffix:y7})),e.add(Pt(n,{suffix:v7}))),n.bin&&BO(n,t)&&e.add(Pt(n,{binSuffix:"range"}))}else if(Hze(t)){const o=Vze(t);e.add(r.getName(o))}else e.add(Pt(n));return vx(n)&&Kyn((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function o_n(e,t){for(const n of _t(t)){const r=t[n];for(const i of _t(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class ap extends ji{clone(){return new ap(null,new Set(this.dimensions),Hn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Pt(o,{forAs:!0})]);else{if(gy(u)||Yb(u)){const c=gy(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([Pt({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([Pt(o,{forAs:!0})]);zy(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([Pt({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([Pt({field:l,aggregate:"max"},{forAs:!0})]))}else s_n(s,a,o,n)}),s.size+_t(i).length===0)?null:new ap(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||Pt(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||Pt(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+_t(i).length===0?null:new ap(t,r,i)}merge(t){return Mze(this.dimensions,t.dimensions)?(o_n(this.measures,t.measures),!0):(wyn("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,..._t(this.measures)])}producedFields(){const t=new Set;for(const n of _t(this.measures))for(const r of _t(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${$r({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of _t(this.measures))for(const o of _t(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:qd(s));return{type:"aggregate",groupby:[...this.dimensions].map(qd),ops:t,fields:n,as:r}}}class LA extends ji{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of kd){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[Pt(o),...cs(a)?[Pt(o,{binSuffix:"end"})]:[]],...Fm(u)?{sortField:u}:at(u)?{sortIndexField:v2(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of kd)this[n]&&(t+=` ${n.charAt(0)}:${$r(this[n])}`);return t}get fields(){var n;const t=[];for(const r of kd)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of kd)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Tg){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(Ba(i)&&Kb(s)){const o=x7(this.childModel,n),a=Ace(o);a?t[n]=a:Tt(Dle(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=o7,field:f}=u;s.push(f),o.push(c),a.push(Pt(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of bce){for(const c of wce){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[B0,L0])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function iSe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function a_n(e,t){const n=vle(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=iSe(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=iSe(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Tt(I0n(t)),null}function u_n(e){const t={};return qF(e.filter,n=>{if(TVe(n)){let r=null;Nle(n)?r=pf(n.equal):Ole(n)?r=pf(n.lte):Ple(n)?r=pf(n.lt):Mle(n)?r=pf(n.gt):$le(n)?r=pf(n.gte):Fle(n)?r=n.range[0]:Lle(n)&&(r=(n.oneOf??n.in)[0]),r&&(mx(r)?t[n.field]="date":li(r)?t[n.field]="number":Bt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function l_n(e){const t={};function n(r){p2(r)?t[r.field]="date":r.type==="quantitative"&&o0n(r.aggregate)?t[r.field]="number":a2(r.field)>1?r.field in t||(t[r.field]="flatten"):vx(r)&&Fm(r.sort)&&a2(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((ao(e)||Cf(e))&&e.forEachFieldDef((r,i)=>{if(Ul(r))n(r);else{const s=hx(i),o=e.fieldDef(s);n({...r,type:o.type})}}),ao(e)){const{mark:r,markDef:i,encoding:s}=e;if(yx(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];At(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function c_n(e){const t={};if(ao(e)&&e.component.selection)for(const n of _t(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&a2(i.field)>1&&(t[i.field]="flatten")}return t}class Hu extends ji{clone(){return new Hu(null,Hn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${$r(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!T1(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of _t(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Tt(pxe(a,r[a],u.value)))}for(const a of _t(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Tt(pxe(a,n[a],u)))}const s=new Hy(n,r);i.copyAll(s);const o={};for(const a of _t(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return _t(o).length===0||i.parseNothing?null:new Hu(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of _t(this._parse)){const r=this._parse[n];a2(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(_t(this._parse))}dependentFields(){return new Set(_t(this._parse))}assembleTransforms(t=!1){return _t(this._parse).filter(n=>t?a2(n)>1:!0).map(n=>{const r=a_n(n,this._parse[n]);return r?{type:"formula",expr:r,as:PA(n)}:null}).filter(n=>n!==null)}}class hb extends ji{clone(){return new hb(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([bp])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:bp}}}class zO extends ji{clone(){return new zO(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${$r(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class VO extends ji{clone(){return new VO(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${$r(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class kE extends ji{constructor(t){super(null),t??(t={name:"source"});let n;if(T1(t)||(n=t.format?{...Pc(t.format,["parse"])}:{}),zN(t))this._data={values:t.values};else if(m2(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Fr(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else jHe(t)?this._data={values:[{type:"Sphere"}]}:(LHe(t)||T1(t))&&(this._data={});this._generator=T1(t),t.name&&(this._name=t.name),n&&!Vi(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var sSe=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},f_n=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},XI;function Sce(e){return e instanceof kE||e instanceof zO||e instanceof VO}class Tce{constructor(){XI.set(this,void 0),sSe(this,XI,!1,"f")}setModified(){sSe(this,XI,!0,"f")}get modifiedFlag(){return f_n(this,XI,"f")}}XI=new WeakMap;class bx extends Tce{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Cce extends Tce{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class d_n extends Cce{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of _t(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class h_n extends Cce{constructor(t){super(),this.requiresSelectionId=t&&vce(t)}run(t){t instanceof hb&&(this.requiresSelectionId&&(Sce(t.parent)||t.parent instanceof ap||t.parent instanceof Hu)||(this.setModified(),t.remove()))}}class p_n extends Tce{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Lm&&(r=t.producedFields(),gle(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class m_n extends Cce{constructor(){super()}run(t){t instanceof Mc&&!t.isRequired()&&(this.setModified(),t.remove())}}class g_n extends bx{run(t){if(!Sce(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Hu)if(t instanceof Hu)this.setModified(),t.merge(n);else{if(yle(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class y_n extends bx{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Hu);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of _t(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Vi(i)){this.setModified();const o=new Hu(t,i);for(const a of n){if(a instanceof Hu)for(const u of _t(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof Hu&&_t(a.parse).length===0&&a.remove()}}}}}class v_n extends bx{run(t){t instanceof Mc||t.numChildren()>0||t instanceof LA||t instanceof kE||(this.setModified(),t.remove())}}class b_n extends bx{run(t){const n=t.children.filter(i=>i instanceof Lm),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class w_n extends bx{run(t){const n=t.children.filter(i=>i instanceof ap),r={};for(const i of n){const s=$r(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of _t(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class __n extends bx{constructor(t){super(),this.model=t}run(t){const n=!(Sce(t)||t instanceof FA||t instanceof Hu||t instanceof hb),r=[],i=[];for(const s of t.children)s instanceof Bm&&(n&&!yle(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Bm?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class E_n extends bx{run(t){const n=[...t.children];if(!_E(n,o=>o instanceof Mc)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Mc){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Mc)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class wx extends ji{clone(){return new wx(null,Hn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Em(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Pt(t)}hash(){return`JoinAggregateTransform ${$r(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function x_n(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Pt(r);return i&&t.push(i),t},[])}function S_n(e){return at(e)&&e.every(t=>Bt(t))&&e.length>1}class U0 extends ji{clone(){return new U0(null,Hn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(Ao(f.order,"ascending"));const l={field:a,order:u};let c;return S_n(s)?c=s:Bt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new U0(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return ig(p)}).filter(h=>!!h),c=x_n(n),f=n.encoding.order;let d;if(at(f)||At(f))d=sVe(f);else{const h=YVe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new U0(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${$r(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Pt(i,{binSuffix:"mid"})]:[Pt(i,{}),Pt(i,{binSuffix:"end"})]:[Pt(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=Pt(c,{expr:"datum"}),p=Pt(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:Pt(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:Pt(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class BA extends ji{clone(){return new BA(null,Hn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Em(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Pt(t)}hash(){return`WindowTransform ${$r(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Cle(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function T_n(e){function t(n){if(!(n instanceof LA)){const r=n.clone();if(r instanceof Mc){const i=kQ+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof ap||r instanceof U0||r instanceof BA||r instanceof wx)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function IQ(e){if(e instanceof LA)if(e.numChildren()===1&&!(e.children[0]instanceof Mc)){const t=e.children[0];(t instanceof ap||t instanceof U0||t instanceof BA||t instanceof wx)&&t.addDimensions(e.fields),t.swapWithParent(),IQ(e)}else{const t=e.model.component.data.main;Pqe(t);const n=T_n(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(IQ)}function Pqe(e){if(e instanceof Mc&&e.type===Rs.Main&&e.numChildren()===1){const t=e.children[0];t instanceof LA||(t.swapWithParent(),Pqe(e))}}const kQ="scale_",y$=5;function RQ(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!RQ(t.children))return!1}return!0}function bh(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function oSe(e,t,n){let r=e.sources,i=!1;return i=bh(new m_n,r)||i,i=bh(new h_n(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=bh(new v_n,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=bh(new g_n,r)||i,i=bh(new __n(t),r)||i,i=bh(new p_n,r)||i,i=bh(new y_n,r)||i,i=bh(new w_n,r)||i,i=bh(new b_n,r)||i,i=bh(new d_n,r)||i,i=bh(new E_n,r)||i),e.sources=r,i}function C_n(e,t){RQ(e.sources);let n=0,r=0;for(let i=0;i<y$&&oSe(e,t,!0);i++)n++;e.sources.map(IQ);for(let i=0;i<y$&&oSe(e,t,!1);i++)r++;RQ(e.sources),Math.max(n,r)===y$&&Tt(`Maximum optimization runs(${y$}) reached.`)}class Da{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Da(()=>t(n))}}function Oqe(e){ao(e)?A_n(e):D_n(e)}function A_n(e){const t=e.component.scales;for(const n of _t(t)){const r=k_n(e,n);if(t[n].setWithExplicit("domains",r),N_n(e,n),e.component.data.isFaceted){let s=e;for(;!Cf(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)A0(a)&&(a.data=kQ+a.data.replace(kQ,""))}}}function D_n(e){for(const n of e.children)Oqe(n);const t=e.component.scales;for(const n of _t(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=cb(r,o.getWithExplicit("domains"),"domains","scale",NQ);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Tt(T0n),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function I_n(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=aSe(t,n);if(!i){Tt(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=aSe(t,n);if(i)return"unaggregated"}return e}function k_n(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=I_n(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&fa(r.x2)?fa(r.x)?cb(gv(n,i,e,"x"),gv(n,i,e,"x2"),"domain","scale",NQ):gv(n,i,e,"x2"):t==="y"&&fa(r.y2)?fa(r.y)?cb(gv(n,i,e,"y"),gv(n,i,e,"y2"),"domain","scale",NQ):gv(n,i,e,"y2"):gv(n,i,e,t)}function R_n(e,t,n){return e.map(r=>({signal:`{data: ${f7(r,{timeUnit:n,type:t})}}`}))}function Cq(e,t,n){var i;const r=(i=La(n))==null?void 0:i.unit;return t==="temporal"||r?R_n(e,t,r):[e]}function gv(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=fa(i[r]),{type:c}=l,f=l.timeUnit;if(Yyn(t)){const p=gv(e,void 0,n,r),m=Cq(t.unionWith,c,f);return em([...m,...p.value])}else{if(on(t))return em([t]);if(t&&t!=="unaggregated"&&!NVe(t))return em(Cq(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return of([[0,1]]);const p=n.requestDataName(Rs.Main);return of([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=zy(r)&&At(l)?P_n(n,r,e):void 0;if(Cg(l)){const p=Cq([l.datum],c,f);return of(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(Rs.Main),{field:m}=l;return of([{data:p,field:Pt({field:m,aggregate:"min"})},{data:p,field:Pt({field:m,aggregate:"max"})}])}else if(cs(h.bin)){if(Ba(e))return of(e==="bin-ordinal"?[]:[{data:BN(d)?n.requestDataName(Rs.Main):n.requestDataName(Rs.Raw),field:n.vgField(r,BO(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!jt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(cs(p)){const m=xce(n,h.field,p);return of([new Da(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return of([{data:n.requestDataName(Rs.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Fr(["time","utc"],e)){const p=i[Sg(r)];if(GVe(h,p,s,a)){const m=n.requestDataName(Rs.Main),g=lb({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=UN(o)&&g!==.5&&Do(r);return of([{data:m,field:n.vgField(r,y?{suffix:y7}:{})},{data:m,field:n.vgField(r,{suffix:y?v7:"end"})}])}}return of(d?[{data:BN(d)?n.requestDataName(Rs.Main):n.requestDataName(Rs.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(Rs.Main),field:n.vgField(r)}])}function Aq(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":o7),...r?{field:qd(r)}:{},...i?{order:i}:{}}}function N_n(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=NVe(r)&&r,o=px(i)&&Zj(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function P_n(e,t,n){if(!Ba(n))return;const r=e.fieldDef(t),i=r.sort;if(qVe(i))return{op:"min",field:v2(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Fm(i)){const a=s&&!o.has(i.field);return Aq(i,a)}else if(HVe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(gy(c)||Yb(c))return Aq({field:Pt(l),order:u},d);if(Cle(c)||!c)return Aq({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Fr(["ascending",void 0],i))return!0}}function aSe(e,t){const{aggregate:n,type:r}=e;return n?Bt(n)&&!u0n.has(n)?{valid:!1,reason:Q0n(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:J0n(e)}:{valid:!0}:{valid:!1,reason:X0n(e)}}function NQ(e,t,n,r){return e.explicit&&t.explicit&&Tt(ryn(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function O_n(e){const t=Em(e.map(o=>{if(A0(o)){const{sort:a,...u}=o;return u}return o}),$r),n=Em(e.map(o=>{if(A0(o)){const a=o.sort;return a!==void 0&&!BN(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),$r);if(t.length===0)return;if(t.length===1){const o=e[0];if(A0(o)&&n.length>0){let a=n[0];if(n.length>1){Tt(gxe);const u=n.filter(l=>jt(l)&&"op"in l&&l.op!=="min");n.every(l=>jt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(jt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Em(n.map(o=>BN(o)||!("op"in o)||Bt(o.op)&&o.op in i0n?o:(Tt(syn(o)),!0)),$r);let i;r.length===1?i=r[0]:r.length>1&&(Tt(gxe),i=!0);const s=Em(e.map(o=>A0(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Ace(e){if(A0(e)&&Bt(e.field))return e.field;if(l0n(e)){let t;for(const n of e.fields)if(A0(n)&&Bt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Tt(oyn),t}return Tt(ayn),t}else if(c0n(e)){Tt(uyn);const t=e.fields[0];return Bt(t)?t:void 0}}function x7(e,t){const r=e.component.scales[t].get("domains").map(i=>(A0(i)&&(i.data=e.lookupDataSource(i.data)),i));return O_n(r)}function Mqe(e){return jA(e)||Dce(e)?e.children.reduce((t,n)=>t.concat(Mqe(n)),uSe(e)):uSe(e)}function uSe(e){return _t(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=M_n(i.range,s,n,e),h=x7(e,n),p=a?Ibn(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function M_n(e,t,n,r){if(Do(n)){if(Kb(e))return{step:{signal:`${t}_step`}}}else if(jt(e)&&A0(e))return{...e,data:r.lookupDataSource(e.data)};return e}class $qe extends Hy{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:_E(this.get("domains"),t=>at(t)&&t.length===2&&li(t[0])&&t[0]<=0&&li(t[1])&&t[1]>=0)}}const $_n=["range","scheme"];function F_n(e){const t=e.component.scales;for(const n of Jj){const r=t[n];if(!r)continue;const i=L_n(n,e);r.setWithExplicit("range",i)}}function lSe(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=Yc(t),o=e.getName(s);if(jt(r)&&r.binned&&r.step!==void 0)return new Da(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(cs(r)){const a=xce(e,i,r);return new Da(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function L_n(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of $_n)if(n[f]!==void 0){const d=gQ(s,f),h=PVe(e,f);if(!d)Tt(dVe(s,f,e));else if(h)Tt(h);else switch(f){case"range":{const p=n.range;if(at(p)){if(Do(e))return em(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Da.fromName(y,g)}return m}))}else if(jt(p))return em({data:t.requestDataName(Rs.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return em(p)}case"scheme":return em(B_n(n[f]))}}const o=e===Bs||e==="xOffset"?"width":"height",a=r[o];if(sg(a)){if(Do(e))if(Ba(s)){const f=Lqe(a,t,e);if(f)return em({step:f})}else Tt(hVe(o));else if(PO(e)){const f=e===Vb?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=Bqe(a,s);if(p)return em(p)}}}const{rangeMin:u,rangeMax:l}=n,c=j_n(e,t);return(u!==void 0||l!==void 0)&&gQ(s,"rangeMin")&&at(c)&&c.length===2?em([u??c[0],l??c[1]]):of(c)}function B_n(e){return Gyn(e)?{scheme:e.name,...Pc(e,["name"])}:{scheme:e}}function Fqe(e,t,n,{center:r}={}){const i=Yc(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===za&&Uf(n)?r?[Da.fromName(a=>`${o(a)}/2`,s),Da.fromName(a=>`-${o(a)}/2`,s)]:[Da.fromName(o,s),0]:r?[Da.fromName(a=>`-${o(a)}/2`,s),Da.fromName(a=>`${o(a)}/2`,s)]:[0,Da.fromName(o,s)]}function j_n(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=fa(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Bs:case za:{if(Fr(["point","band"],u)){const f=jqe(e,n,r.view);if(sg(f))return{step:Lqe(f,t,e)}}return Fqe(e,t,u)}case Vb:case OA:return U_n(e,t,u);case jy:{const f=t.component.scales[e].get("zero"),d=Uqe(i,f,r),h=H_n(i,n,t,r);return f2(u)?V_n(d,h,z_n(u,r,l,e)):[d,h]}case nh:return[0,Math.PI*2];case dx:return[0,360];case Rp:return[0,new Da(()=>{const f=t.getSignalName(Cf(t.parent)?"child_width":"width"),d=t.getSignalName(Cf(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Wb:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Gb:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Gc:return"symbol";case Wc:case Eg:case xg:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Uy:case Hb:case qb:return[r.scale.minOpacity,r.scale.maxOpacity]}}function Lqe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=Ele(n),o=r[s];if(SHe({step:e,offsetIsDiscrete:Jn(o)&&AVe(o.type)})==="offset"&&sHe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${p0n(f)})`}}else return e.step}function Bqe(e,t){if(SHe({step:e,offsetIsDiscrete:Ba(t)})==="offset")return{step:e.step}}function U_n(e,t,n){const r=e===Vb?"x":"y",i=t.getScaleComponent(r);if(!i)return Fqe(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=jqe(r,t.size,t.config.view);if(sg(l)){const c=Bqe(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(At(l)&&l.timeUnit){const c=xVe(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=lb({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=on(f)?`${f.signal}/2`+h:`${f/2+d}`,m=on(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return Pze(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function jqe(e,t,n){const r=e===Bs?"width":"height",i=t[r];return i||j5(n,r)}function z_n(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&at(n)?n.length+1:(Tt(yyn(r)),3)}}function V_n(e,t,n){const r=()=>{const i=Yh(t),s=Yh(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return on(t)?new Da(r):{signal:r()}}function Uqe(e,t,n){if(t)return on(t)?{signal:`${t.signal} ? 0 : ${Uqe(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(e7("size",e))}const cSe=.95;function H_n(e,t,n,r){const i={x:lSe(n,"x"),y:lSe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=fSe(t,i,r.view);return li(s)?s-1:new Da(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=fSe(t,i,r.view);return li(s)?Math.pow(cSe*s,2):new Da(()=>`pow(${cSe} * ${s.signal}, 2)`)}}throw new Error(e7("size",e))}function fSe(e,t,n){const r=sg(e.width)?e.width.step:B5(n,"width"),i=sg(e.height)?e.height.step:B5(n,"height");return t.x||t.y?new Da(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function zqe(e,t){ao(e)?q_n(e,t):Hqe(e,t)}function q_n(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of _t(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=fa(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=gQ(h,t),y=PVe(a,t);if(d!==void 0&&(g?y&&Tt(y):Tt(dVe(h,t,a))),g&&y===void 0)if(d!==void 0){const b=f.timeUnit,w=f.type;switch(t){case"domainMax":case"domainMin":mx(u[t])||w==="temporal"||b?l.set(t,{signal:f7(u[t],{type:w,timeUnit:b})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const b=t in dSe?dSe[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:oHe(i,a),hasSecondaryRangeChannel:!!i[Sg(a)]}):r.scale[t];b!==void 0&&l.set(t,b,!1)}}}const dSe={bins:({model:e,fieldOrDatumDef:t})=>At(t)?W_n(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>G_n(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>Y_n(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>K_n(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>X_n(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>Q_n(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=At(e)?e.sort:void 0;return J_n(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>Z_n(e,t,n,r,i,s.scale,o)};function Vqe(e){ao(e)?F_n(e):Hqe(e,"range")}function Hqe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?Vqe(r):zqe(r,t);for(const r of _t(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=cb(i,a,t,"scale",FHe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function W_n(e,t){const n=t.bin;if(cs(n)){const r=xce(e,t.field,n);return new Da(()=>e.getSignalName(r))}else if(eu(n)&&px(n)&&n.step!==void 0)return{step:n.step}}function G_n(e,t){if(Fr([Wc,Eg,xg],e)&&t!=="nominal")return"hcl"}function Y_n(e,t,n,r,i,s){var o;if(!((o=ig(s))!=null&&o.bin||at(n)||i!=null||r!=null||Fr([Oc.TIME,Oc.UTC],e)))return Do(t)?!0:void 0}function K_n(e,t,n,r,i,s){if(Do(e)){if(Kh(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(At(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Oc.POINT)return n.pointPadding}}function X_n(e,t,n,r,i,s=!1){if(e===void 0){if(Do(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:Ao(o,n==="bar"?a:u)}else if(PO(t)&&r===Oc.BAND)return i.offsetBandPaddingInner}}function Q_n(e,t,n,r,i,s=!1){if(e===void 0){if(Do(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Oc.BAND)return Ao(o,on(r)?{signal:`${r.signal}/2`}:r/2)}else if(PO(t)){if(n===Oc.POINT)return .5;if(n===Oc.BAND)return i.offsetBandPaddingOuter}}}function J_n(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Uf(e)&&t==="descending"?on(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Uf(e)&&t==="descending")return!0}function Z_n(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Uf(i)){if(at(n)){const u=n[0],l=n[n.length-1];if(li(u)&&u<=0&&li(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!f2(i))return!0;if(!(At(t)&&t.bin)&&Fr([...Tg,...Xgn],e)){const{orient:u,type:l}=r;return Fr(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Fr(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function eEn(e,t,n,r,i=!1){const s=tEn(t,n,r,i),{type:o}=e;return zy(t)?o!==void 0?evn(t,o)?At(n)&&!Zyn(o,n.type)?(Tt(tyn(o,s)),s):o:(Tt(eyn(t,o,s)),s):s:null}function tEn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(HT(e)||vq(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Tt(bq(e,"ordinal")),"ordinal";if(Do(e)||PO(e)){if(Fr(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Tle)return"band";const s=n[Yc(e)];return AE(s)||h2(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return HT(e)?"time":vq(e)==="discrete"?(Tt(bq(e,"temporal")),"ordinal"):At(t)&&t.timeUnit&&La(t.timeUnit).utc?"utc":"time";case"quantitative":return HT(e)?At(t)&&cs(t.bin)?"bin-ordinal":"linear":vq(e)==="discrete"?(Tt(bq(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(cVe(t.type))}function nEn(e,{ignoreRange:t}={}){qqe(e),Oqe(e);for(const n of Jyn)zqe(e,n);t||Vqe(e)}function qqe(e){ao(e)?e.component.scales=rEn(e):e.component.scales=sEn(e)}function rEn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of Jj){const o=fa(t[s]);if(o&&n===UVe&&s===Gc&&o.type===MA)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=oHe(t,s),l=eEn(a,s,o,r,u);i[s]=new $qe(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const iEn=FHe((e,t)=>vxe(e)-vxe(t));function sEn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){qqe(s);for(const o of _t(s.component.scales))if((t=i.scale)[o]??(t[o]=_qe(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?zyn(a.value,u.value)?r[o]=cb(a,u,"type","scale",iEn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of _t(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new $qe(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class Dq{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function ao(e){return(e==null?void 0:e.type)==="unit"}function Cf(e){return(e==null?void 0:e.type)==="facet"}function Dce(e){return(e==null?void 0:e.type)==="concat"}function jA(e){return(e==null?void 0:e.type)==="layer"}class Ice{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=mc(a),this.name=t.name??i,this.title=Av(t.title)?{text:t.title}:t.title?mc(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new Dq,this.projectionNameMap=r?r.projectionNameMap:new Dq,this.signalNameMap=r?r.signalNameMap:new Dq,this.data=t.data,this.description=t.description,this.transforms=dbn(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:g1n(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:a7(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Hy,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?Hn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){nEn(this)}parseProjection(){Rqe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Cqe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of _t(r)){const o=r[s];o!==void 0&&(i[s]=ys(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=ys(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Vi(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=Cwn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of kd)t[r].title&&n.push(wwn(this,r));for(const r of bce)n=n.concat(_wn(this,r));return n}assembleAxes(){return awn(this.component.axes,this.config)}assembleLegends(){return Dqe(this)}assembleProjections(){return Kwn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...tVe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Fr(["unit","layer"],this.type)?Fr(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Vi(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Cf(this.parent)?Mqe(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Ls((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Rs[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Cf(this.parent)){const n=bqe(t),r=Qj(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(Ba(s)&&Kb(o)){const a=i.get("name"),u=x7(this,r),l=Ace(u);if(l){const c=Pt({aggregate:"distinct",field:l},{expr:"datum"});return{signal:vqe(a,i,c)}}else return Tt(Dle(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(Wze(t)&&zy(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(b0n(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class Wqe extends Ice{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Pt(r,n)}reduceFieldDef(t,n){return qvn(this.getMapping(),(r,i,s)=>{const o=ig(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){tce(this.getMapping(),(r,i)=>{const s=ig(r);s&&t(s,i)},n)}}class S7 extends ji{clone(){return new S7(null,Hn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Hn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${$r(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class T7 extends ji{clone(){return new T7(null,Hn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Hn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${$r(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class VN extends ji{clone(){return new VN(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(Si("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=zy(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Uf(d)&&l.aggregate!=="count"&&!yx(i)&&(u[l.field]=l)}return u},{});return _t(a).length?new VN(t,a):null}dependentFields(){return new Set(_t(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${$r(this.filter)}`}assemble(){const t=_t(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Pt(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class C7 extends ji{clone(){return new C7(this.parent,Hn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Hn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${$r(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class A7 extends ji{clone(){return new A7(null,Hn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Hn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${$r(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class GT extends ji{clone(){return new GT(null,Hn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Pp,Np],[Wd,Op]]){const s=i.map(o=>{const a=fa(n.encoding[o]);return At(a)?a.field:Cg(a)?{expr:`${a.datum}`}:vp(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new GT(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Gc)){const i=n.typedFieldDef(Gc);i.type===MA&&(t=new GT(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Bt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${$r(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class HN extends ji{clone(){return new HN(null,this.projection,Hn(this.fields),Hn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Pp,Np],[Wd,Op]]){const i=r.map(o=>{const a=fa(n.encoding[o]);return At(a)?a.field:Cg(a)?{expr:`${a.datum}`}:vp(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Wd?"2":"";(i[0]||i[1])&&(t=new HN(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Bt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${$r(this.fields)} ${$r(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class j_ extends ji{clone(){return new j_(null,Hn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new j_(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(At(i)&&At(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=uHe(n.mark,r);return new j_(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${$r(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:G1n(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class D7 extends ji{clone(){return new D7(null,Hn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Hn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${$r(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class qN extends ji{clone(){return new qN(null,Hn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(Y1n(o)){let u=Kqe(o.data,s);u||(u=new kE(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Mc(u,l,Rs.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(K1n(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Ls(u),u)}catch{throw new Error(x0n(u))}if(a=l.materialized,!a)throw new Error(S0n(u))}return new qN(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Lt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${$r({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Lt(this.transform.as)}:{}};else{let n=this.transform.as;Bt(n)||(Tt(N0n),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class I7 extends ji{clone(){return new I7(null,Hn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Hn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${$r(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class k7 extends ji{clone(){return new k7(null,Hn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Hn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${$r(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class R7 extends ji{clone(){return new R7(null,Hn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Em((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${$r(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class N7 extends ji{clone(){return new N7(null,Hn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${$r(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Gqe(e){let t=0;function n(r,i){if(r instanceof kE&&!r.isGenerator&&!m2(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Hu&&(r.parent instanceof kE&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof LA){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof zO||r instanceof VO||r instanceof VN||r instanceof FA||r instanceof y2||r instanceof HN||r instanceof ap||r instanceof qN||r instanceof BA||r instanceof wx||r instanceof A7||r instanceof C7||r instanceof S7||r instanceof D7||r instanceof I7||r instanceof k7||r instanceof hb||r instanceof N7||r instanceof R7||r instanceof T7)&&i.transform.push(r.assemble()),(r instanceof Bm||r instanceof Lm||r instanceof j_||r instanceof U0||r instanceof GT)&&i.transform.push(...r.assemble()),r instanceof Mc&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Mc?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Mc&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function oEn(e){const t=[],n=Gqe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function aEn(e,t){const n=[],r=Gqe(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function uEn(e){return e==="top"||e==="left"||on(e)?"header":"footer"}function lEn(e){for(const t of kd)cEn(e,t);hSe(e,"x"),hSe(e,"y")}function cEn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=b2("title",null,r,t);let l=qT(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=at(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=b2("labelOrient",a.header,r,t),f=a.header!==null?Ao((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Fr(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[Yqe(e,t,f)]}}}function Yqe(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function hSe(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Ece(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=uEn(a.get("orient"));o[u]??(o[u]=[Yqe(e,s,!1)]);const l=KI(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function fEn(e){kce(e),H5(e,"width"),H5(e,"height")}function dEn(e){kce(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";H5(e,t),H5(e,n)}function kce(e){for(const t of e.children)t.parseLayoutSize()}function H5(e,t){const n=bqe(t),r=Qj(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??_qe(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=cb(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function hEn(e){const{size:t,component:n}=e;for(const r of Tg){const i=Yc(r);if(t[i]){const s=t[i];n.layoutSize.set(i,sg(s)?"step":s,!0)}else{const s=pEn(e,i);n.layoutSize.set(i,s,!1)}}}function pEn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(Ba(s)){const a=j5(r.view,t);return Kb(o)||sg(a)?"step":a}else return bQ(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return bQ(r.view,t);{const s=j5(r.view,t);return sg(s)?s.step:s}}}function PQ(e,t,n){return Pt(t,{suffix:`by_${Pt(e)}`,...n})}class Jk extends Wqe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Mce(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!FO(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=_t(t),r={};for(const i of n){if(![L0,B0].includes(i)){Tt(e7(i,"facet"));break}const s=t[i];if(s.field===void 0){Tt(pQ(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=Zle(t,n);return r.header?r.header=mc(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=P7(this),this.child.parseData()}parseLayoutSize(){kce(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),lEn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of kd)for(const r of wce){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=b2("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=_7(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Jk))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Jk?{...this.channelHasField("column")?{encode:{update:{columns:{field:Pt(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof Jk){if(this.child.channelHasField("column")){const i=Pt(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Tg){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(Ba(o)&&Kb(a)){const u=x7(this.child,i),l=Ace(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Tt(Dle(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of kd){const f=this.facet[c];if(f){u.push(Pt(f));const{bin:d,sort:h}=f;if(cs(d)&&u.push(Pt(f,{binSuffix:"end"})),Fm(h)){const{field:p,op:m=o7}=h,g=PQ(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(at(h)){const p=v2(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Fm(r.sort)?[PQ(r,r.sort,{expr:"datum"})]:at(r.sort)?[v2(r,t,{expr:"datum"})]:[Pt(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Fm(i)?i.order:!at(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return AQ(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of bce)if(t[s]){const o=b2("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return AQ(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=oEn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:kd.map(u=>this.facetSortFields(u)).flat(),order:kd.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(Tbn(this,[]))}]}getMapping(){return this.facet}}function mEn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Fm(s.sort)){const{field:o,op:a=o7}=s.sort;e=i=new wx(e,{joinaggregate:[{op:a,field:o,as:PQ(s,s.sort,{forAs:!0})}],groupby:[Pt(s)]})}return i}return null}function Kqe(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(zN(e)&&zN(a)){if(_f(e.values,a.values))return o}else if(m2(e)&&m2(a)){if(e.url===a.url)return o}else if(LHe(e)&&e.name===o.dataName)return o}}return null}function gEn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new kE({values:[]});return t.push(r),r}const n=Kqe(e.data,t);if(n)return T1(e.data)||(n.data.format=Oze({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new kE(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function yEn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(sbn(i))o=e=new y2(e,i),s="derived";else if(dce(i)){const a=u_n(i);o=e=Hu.makeWithAncestors(e,{},a,n)??e,e=new FA(e,t,i.filter)}else if(PHe(i))o=e=Bm.makeFromTransform(e,i,t),s="number";else if(abn(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new Hu(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Lm.makeFromTransform(e,i);else if(ubn(i))o=e=ap.makeFromTransform(e,i),s="number",vce(t)&&(e=new hb(e));else if(NHe(i))o=e=qN.make(e,t,i,r++),s="derived";else if(nbn(i))o=e=new BA(e,i),s="number";else if(rbn(i))o=e=new wx(e,i),s="number";else if(lbn(i))o=e=U0.makeFromTransform(e,i),s="derived";else if(cbn(i))o=e=new A7(e,i),s="derived";else if(fbn(i))o=e=new T7(e,i),s="derived";else if(ibn(i))o=e=new C7(e,i),s="derived";else if(X1n(i))o=e=new R7(e,i),s="derived";else if(tbn(i))e=new N7(e,i);else if(obn(i))o=e=j_.makeFromTransform(e,i),s="derived";else if(Q1n(i))o=e=new S7(e,i),s="derived";else if(J1n(i))o=e=new I7(e,i),s="derived";else if(Z1n(i))o=e=new k7(e,i),s="derived";else if(ebn(i))o=e=new D7(e,i),s="derived";else{Tt(R0n(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function P7(e){var h;let t=gEn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(T1(i)||m2(i)||zN(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new xbn;T1(i)?(BHe(i)?t=new VO(t,i.sequence):hce(i)&&(t=new zO(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=Hu.makeExplicit(t,e,o)??t,t=new hb(t);const a=e.parent&&jA(e.parent);(ao(e)||Cf(e))&&a&&(t=Bm.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=yEn(t,e,o));const u=c_n(e),l=l_n(e);t=Hu.makeWithAncestors(t,{},{...u,...l},o)??t,ao(e)&&(t=GT.parseAll(t,e),t=HN.parseAll(t,e)),(ao(e)||Cf(e))&&(a||(t=Bm.makeFromEncoding(t,e)??t),t=Lm.makeFromEncoding(t,e)??t,t=y2.parseAllForSortIndex(t,e));const c=t=pSe(Rs.Raw,e,t);if(ao(e)){const p=ap.makeFromEncoding(t,e);p&&(t=p,vce(e)&&(t=new hb(t))),t=j_.makeFromEncoding(t,e)??t,t=U0.makeFromEncoding(t,e)??t}ao(e)&&(t=VN.make(t,e)??t);const f=t=pSe(Rs.Main,e,t);ao(e)&&swn(e,f);let d=null;if(Cf(e)){const p=e.getName("facet");t=mEn(t,e.facet)??t,d=new LA(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function pSe(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Mc(n,s,e,i);return r[s]=o,o}class vEn extends Ice{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Tt(D0n),this.children=this.getChildren(t).map((l,c)=>Mce(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=P7(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of _t(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return p7(t)?t.vconcat:cce(t)?t.hconcat:t.concat}parseLayoutSize(){dEn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=_ce(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function bEn(e){return e===!1||e===null}const wEn={disable:1,gridScale:1,scale:1,...rHe,labelExpr:1,encode:1},Xqe=_t(wEn);class Rce extends Hy{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Rce(Hn(this.explicit),Hn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!bEn(this.get(t))}hasOrientSignalRef(){return on(this.explicit.orient)}}function _En(e,t,n){const{encoding:r,config:i}=e,s=fa(r[t])??fa(r[Sg(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(CE(u))return{text:Xh({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(d2(s)==="quantitative"){if(h2(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Xh({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Xh({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(d2(s)==="temporal"&&i.timeFormatType&&At(s)&&!s.timeUnit)return{text:Xh({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function EEn(e){return Tg.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[IEn(n,e)]),t),{})}const xEn={bottom:"top",top:"bottom",left:"right",right:"left"};function SEn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of _t(i.component.axes))n.axis[s]=Ece(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=TEn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of Tg){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!on(a)){if(r[a]>0&&!u){const l=xEn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function TEn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=CEn(i,s)}}}else return t.map(n=>n.clone());return e}function CEn(e,t){for(const n of Xqe){const r=cb(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return uVe(i,s);case"gridScale":return{explicit:i.explicit,value:Ao(i.value,s.value)}}return g7(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function AEn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(on(n.labelAngle)?n.labelAngle:jN(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===pqe(r,i))return!0}return e===n[t]}const DEn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function IEn(e,t){var y,b;let n=t.axis(e);const r=new Rce,i=fa(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((b=o.axis)==null?void 0:b.orient)||mwn(e),u=t.getScaleComponent(e).get("type"),l=uwn(e,u,a,t.config),c=n!==void 0?!n:TQ("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=dwn(i,n,e,o.style,l),d=FVe(n.formatType,i,u),h=$Ve(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const w of Xqe){const S=w in Jxe?Jxe[w](p):Txe(w)?n[w]:void 0,E=S!==void 0,T=AEn(S,w,n,t,e);if(E&&T)r.set(w,S,T);else{const{configValue:C=void 0,configFrom:A=void 0}=Txe(w)&&w!=="values"?TQ(w,o.style,n.style,l):{},I=C!==void 0;E&&!I?r.set(w,S,T):(A!=="vgAxisConfig"||DEn.has(w)&&I||jO(C)||on(C))&&r.set(w,C,!1)}}const m=n.encoding??{},g=nHe.reduce((w,S)=>{if(!r.hasAxisPart(S))return w;const E=wqe(m[S]??{},t),T=S==="labels"?_En(t,e,E):E;return T!==void 0&&!Vi(T)&&(w[S]={update:T}),w},{});return Vi(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function kEn({encoding:e,size:t}){for(const n of Tg){const r=Yc(n);sg(t[r])&&Zv(e[n])&&(delete t[r],Tt(hVe(r)))}return t}const REn={vgMark:"arc",encodeEntry:e=>({...rh(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Vu("x",e,{defaultPos:"mid"}),...Vu("y",e,{defaultPos:"mid"}),...fb(e,"radius"),...fb(e,"theta")})},NEn={vgMark:"area",encodeEntry:e=>({...rh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...U5("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...U5("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...yce(e)})},PEn={vgMark:"rect",encodeEntry:e=>({...rh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...fb(e,"x"),...fb(e,"y")})},OEn={vgMark:"shape",encodeEntry:e=>({...rh(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&At(n)&&n.type===MA?{field:Pt(n,{expr:"datum"})}:{}}]}},MEn={vgMark:"image",encodeEntry:e=>({...rh(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...fb(e,"x"),...fb(e,"y"),...mce(e,"url")})},$En={vgMark:"line",encodeEntry:e=>({...rh(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Vu("x",e,{defaultPos:"mid"}),...Vu("y",e,{defaultPos:"mid"}),...ka("size",e,{vgChannel:"strokeWidth"}),...yce(e)})},FEn={vgMark:"trail",encodeEntry:e=>({...rh(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Vu("x",e,{defaultPos:"mid"}),...Vu("y",e,{defaultPos:"mid"}),...ka("size",e),...yce(e)})};function Nce(e,t){const{config:n}=e;return{...rh(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Vu("x",e,{defaultPos:"mid"}),...Vu("y",e,{defaultPos:"mid"}),...ka("size",e),...ka("angle",e),...LEn(e,n,t)}}function LEn(e,t,n){return n?{shape:{value:n}}:ka("shape",e)}const BEn={vgMark:"symbol",encodeEntry:e=>Nce(e)},jEn={vgMark:"symbol",encodeEntry:e=>Nce(e,"circle")},UEn={vgMark:"symbol",encodeEntry:e=>Nce(e,"square")},zEn={vgMark:"rect",encodeEntry:e=>({...rh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...fb(e,"x"),...fb(e,"y")})},VEn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...rh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...U5("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...U5("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...ka("size",e,{vgChannel:"strokeWidth"})}}},HEn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...rh(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Vu("x",e,{defaultPos:"mid"}),...Vu("y",e,{defaultPos:"mid"}),...mce(e),...ka("size",e,{vgChannel:"fontSize"}),...ka("angle",e),...Yxe("align",qEn(e.markDef,n,t)),...Yxe("baseline",WEn(e.markDef,n,t)),...Vu("radius",e,{defaultPos:null}),...Vu("theta",e,{defaultPos:null})}}};function qEn(e,t,n){if(Si("align",e,n)===void 0)return"center"}function WEn(e,t,n){if(Si("baseline",e,n)===void 0)return"middle"}const GEn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...rh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Vu("x",e,{defaultPos:"mid",vgChannel:"xc"}),...Vu("y",e,{defaultPos:"mid",vgChannel:"yc"}),...ka("size",e,{defaultValue:YEn(e),vgChannel:i}),[s]:ys(Si("thickness",n,t))}}};function YEn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=Si("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&Kb(a)&&li(a.step)?a.step*3/4:B5(t.view,i)*3/4}}const v$={arc:REn,area:NEn,bar:PEn,circle:jEn,geoshape:OEn,image:MEn,line:$En,point:BEn,rect:zEn,rule:VEn,square:UEn,text:HEn,tick:GEn,trail:FEn};function KEn(e){if(Fr([i7,n7,cvn],e.mark)){const t=uHe(e.mark,e.encoding);if(t.length>0)return XEn(e,t)}else if(e.mark===r7){const t=hQ.some(n=>Si(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return QEn(e)}return Pce(e)}const mSe="faceted_path_";function XEn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:mSe+e.requestDataName(Rs.Main),data:e.requestDataName(Rs.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Pce(e,{fromPrefix:mSe})}]}const gSe="stack_group_";function QEn(e){var l;const[t]=Pce(e,{fromPrefix:gSe}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...o2(t.encode.update,["y","yc","y2","height",...hQ]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Pc(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...o2(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Pc(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of hQ){const f=yy(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=ys(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=Pt(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(Pt(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=yy(f,e.markDef,e.config);return d!==void 0?{...c,[f]:ys(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Rs.Main),name:gSe+e.requestDataName(Rs.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function JEn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!at(o)&&vp(o)&&fQ(o.value)||!o&&fQ(Si("order",i,s)))){if((at(o)||At(o))&&!n)return sVe(o,{expr:"datum"});if(yx(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(At(l)){const c=l.sort;if(at(c))return{field:Pt(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Fm(c))return{field:Pt({aggregate:ece(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(HVe(c)){const f=e.fieldDef(c.encoding);return{field:Pt(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:Pt(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function Pce(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=Ao(r.clip,ZEn(e),exn(e)),a=rVe(r),u=i.key,l=JEn(e),c=txn(e),f=Si("aria",r,s),d=v$[n].postEncodingTransform?v$[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:v$[n].vgMark,...o?{clip:o}:{},style:a,...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Rs.Main)},encode:{update:v$[n].encodeEntry(e)},...d?{transform:d}:{}}]}function ZEn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function exn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function txn(e){if(!e.component.selection)return null;const t=_t(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=_t(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class Qqe extends Wqe{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Axe(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=rg(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=B1n(o,s,{graticule:t.data&&hce(t.data)}));const u=this.encoding=Vvn(t.encoding||{},a,o.filled,s);this.markDef=IHe(o,u,s),this.size=kEn({encoding:u,size:Axe(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=DHe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>uce(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===UVe,r=t&&Ugn.some(i=>Jn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return Jj.reduce((r,i)=>{const s=fa(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=mc(t);return at(n)&&(i.domain=n.map(pf)),at(r)&&(i.range=r.map(pf)),i}initAxes(t){return Tg.reduce((n,r)=>{const i=t[r];if(Jn(i)||r===Bs&&Jn(t.x2)||r===za&&Jn(t.y2)){const s=Jn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=_t(t),r={};for(const i of n){const s=t[i];r[i]=jO(s)?nVe(s):pf(s)}return r}initLegends(t){return Qgn.reduce((n,r)=>{const i=fa(t[r]);if(i&&Zgn(r)){const s=i.legend;n[r]=s&&mc(s)}return n},{})}parseData(){this.component.data=P7(this)}parseLayoutSize(){hEn(this)}parseSelections(){this.component.selection=iwn(this,this.selection)}parseMarkGroup(){this.component.mark=KEn(this)}parseAxesAndHeaders(){this.component.axes=EEn(this)}assembleSelectionTopLevelSignals(t){return Cbn(this,t)}assembleSignals(){return[...fqe(this),...Sbn(this,[])]}assembleSelectionData(t){return Abn(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return _ce(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!jA(this.parent))&&(t=zHe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return L_(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return ig(n)}typedFieldDef(t){const n=this.fieldDef(t);return Ul(n)?n:null}}class Oce extends Ice{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(m7(a))return new Oce(a,this,this.getName(`layer_${u}`),o,s);if(Vy(a))return new Qqe(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Ale(a))})}parseData(){this.component.data=P7(this);for(const t of this.children)t.parseData()}parseLayoutSize(){fEn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of _t(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){SEn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),fqe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),_ce(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Lt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Dbn(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),Dqe(this))}}function Mce(e,t,n,r,i){if(a7(e))return new Jk(e,t,n,i);if(m7(e))return new Oce(e,t,n,r,i);if(Vy(e))return new Qqe(e,t,n,r,i);if(h1n(e))return new vEn(e,t,n,i);throw new Error(Ale(e))}function nxn(e,t={}){t.logger&&vyn(t.logger),t.fieldTitle&&ZVe(t.fieldTitle);try{const n=AHe(EA(t.config,e.config)),r=$He(e,n),i=Mce(r,null,"",void 0,n);return i.parse(),C_n(i.component.data,i),{spec:ixn(i,rxn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&byn(),t.fieldTitle&&Ovn()}}function rxn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Bt(t)&&(t={type:t}),i&&s&&wbn(t.type)){if(i==="step"&&s==="step")Tt(fxe()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Tt(fxe(Qj(o)));const a=o==="width"?"height":"width";t.type=_bn(a)}}return{..._t(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Bxe(n,!1),...Bxe(e,!0)}}function ixn(e,t,n={},r){const i=e.config?A1n(e.config):void 0,s=[].concat(e.assembleSelectionData([]),aEn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...xHe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const sxn=Mgn.version,oxn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:a2,accessPathWithDatum:vle,compile:nxn,contains:Fr,deepEqual:_f,deleteNestedProperty:I5,duplicate:Hn,entries:ab,every:mle,fieldIntersection:yle,flatAccessWithDatum:$ze,getFirstDefined:Ao,hasIntersection:gle,hash:$r,internalField:Bze,isBoolean:BN,isEmpty:Vi,isEqual:Fgn,isInternalField:jze,isNullOrFalse:fQ,isNumeric:qj,keys:_t,logicalExpr:Xk,mergeDeep:Oze,never:Pze,normalize:$He,normalizeAngle:jN,omit:Pc,pick:o2,prefixGenerator:dQ,removePathFromField:PA,replaceAll:EE,replacePathInField:qd,resetIdCounter:Bgn,setEqual:Mze,some:_E,stringify:Hi,titleCase:kO,unique:Em,uniqueId:Lze,vals:fu,varName:Ls,version:sxn},Symbol.toStringTag,{value:"Module"}));function Jqe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var axn="vega-themes",uxn="2.15.0",lxn="Themes for stylized Vega and Vega-Lite visualizations.",cxn=["vega","vega-lite","themes","style"],fxn="BSD-3-Clause",dxn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},hxn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],pxn="build/vega-themes.js",$ce="build/vega-themes.module.js",mxn="build/vega-themes.min.js",gxn="build/vega-themes.min.js",yxn="build/vega-themes.module.d.ts",vxn={type:"git",url:"https://github.com/vega/vega-themes.git"},bxn=["src","build"],wxn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},_xn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},Exn={vega:"*","vega-lite":"*"},xxn={},Sxn={name:axn,version:uxn,description:lxn,keywords:cxn,license:fxn,author:dxn,contributors:hxn,main:pxn,module:$ce,unpkg:mxn,jsdelivr:gxn,types:yxn,repository:vxn,files:bxn,scripts:wxn,devDependencies:_xn,peerDependencies:Exn,dependencies:xxn};const pS="#fff",ySe="#888",Txn={background:"#333",view:{stroke:ySe},title:{color:pS,subtitleColor:pS},style:{"guide-label":{fill:pS},"guide-title":{fill:pS}},axis:{domainColor:pS,gridColor:ySe,tickColor:pS}},ww="#4572a7",Cxn={background:"#fff",arc:{fill:ww},area:{fill:ww},line:{stroke:ww,strokeWidth:2},path:{stroke:ww},rect:{fill:ww},shape:{stroke:ww},symbol:{fill:ww,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},_w="#30a2da",Iq="#cbcbcb",Axn="#999",Dxn="#333",vSe="#f0f0f0",bSe="#333",Ixn={arc:{fill:_w},area:{fill:_w},axis:{domainColor:Iq,grid:!0,gridColor:Iq,gridWidth:1,labelColor:Axn,labelFontSize:10,titleColor:Dxn,tickColor:Iq,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:vSe,group:{fill:vSe},legend:{labelColor:bSe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:bSe,titleFontSize:14,titlePadding:10},line:{stroke:_w,strokeWidth:2},path:{stroke:_w,strokeWidth:.5},rect:{fill:_w},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:_w},bar:{binSpacing:2,fill:_w,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Ew="#000",kxn={group:{fill:"#e5e5e5"},arc:{fill:Ew},area:{fill:Ew},line:{stroke:Ew},path:{stroke:Ew},rect:{fill:Ew},shape:{stroke:Ew},symbol:{fill:Ew,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Rxn=22,Nxn="normal",wSe="Benton Gothic, sans-serif",_Se=11.5,Pxn="normal",xw="#82c6df",kq="Benton Gothic Bold, sans-serif",ESe="normal",xSe=13,eI={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Oxn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:kq,fontSize:Rxn,fontWeight:Nxn},arc:{fill:xw},area:{fill:xw},line:{stroke:xw,strokeWidth:2},path:{stroke:xw},rect:{fill:xw},shape:{stroke:xw},symbol:{fill:xw,size:30},axis:{labelFont:wSe,labelFontSize:_Se,labelFontWeight:Pxn,titleFont:kq,titleFontSize:xSe,titleFontWeight:ESe},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:wSe,labelFontSize:_Se,symbolType:"square",titleFont:kq,titleFontSize:xSe,titleFontWeight:ESe},range:{category:eI["category-6"],diverging:eI["fireandice-6"],heatmap:eI["fire-7"],ordinal:eI["fire-7"],ramp:eI["fire-7"]}},Sw="#ab5787",b$="#979797",Mxn={background:"#f9f9f9",arc:{fill:Sw},area:{fill:Sw},line:{stroke:Sw},path:{stroke:Sw},rect:{fill:Sw},shape:{stroke:Sw},symbol:{fill:Sw,size:30},axis:{domainColor:b$,domainWidth:.5,gridWidth:.2,labelColor:b$,tickColor:b$,tickWidth:.2,titleColor:b$},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Tw="#3e5c69",$xn={background:"#fff",arc:{fill:Tw},area:{fill:Tw},line:{stroke:Tw},path:{stroke:Tw},rect:{fill:Tw},shape:{stroke:Tw},symbol:{fill:Tw},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},fd="#1696d2",SSe="#000000",Fxn="#FFFFFF",w$="Lato",Rq="Lato",Lxn="Lato",Bxn="#DEDDDD",jxn=18,tI={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Uxn={background:Fxn,title:{anchor:"start",fontSize:jxn,font:w$},axisX:{domain:!0,domainColor:SSe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Rq,labelAngle:0,tickColor:SSe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:w$},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Bxn,gridWidth:1,labelFontSize:12,labelFont:Rq,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:w$,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Rq,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:w$,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:tI["six-groups-cat-1"],diverging:tI["diverging-colors"],heatmap:tI["diverging-colors"],ordinal:tI["six-groups-seq"],ramp:tI["shades-blue"]},area:{fill:fd},rect:{fill:fd},line:{color:fd,stroke:fd,strokeWidth:5},trail:{color:fd,stroke:fd,strokeWidth:0,size:1},path:{stroke:fd,strokeWidth:.5},point:{filled:!0},text:{font:Lxn,color:fd,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:fd,stroke:null}},arc:{fill:fd},shape:{stroke:fd},symbol:{fill:fd,size:30}},Cw="#3366CC",TSe="#ccc",_$="Arial, sans-serif",zxn={arc:{fill:Cw},area:{fill:Cw},path:{stroke:Cw},rect:{fill:Cw},shape:{stroke:Cw},symbol:{stroke:Cw},circle:{fill:Cw},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:_$,fontSize:12},"guide-title":{font:_$,fontSize:12},"group-title":{font:_$,fontSize:12}},title:{font:_$,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:TSe,tickColor:TSe,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Fce=e=>e*(1/3+1),CSe=Fce(9),ASe=Fce(10),DSe=Fce(12),nI="Segoe UI",ISe="wf_standard-font, helvetica, arial, sans-serif",kSe="#252423",rI="#605E5C",RSe="transparent",Vxn="#C8C6C4",Sh="#118DFF",Hxn="#12239E",qxn="#E66C37",Wxn="#6B007B",Gxn="#E044A7",Yxn="#744EC2",Kxn="#D9B300",Xxn="#D64550",Zqe=Sh,eWe="#DEEFFF",NSe=[eWe,Zqe],Qxn=[eWe,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Zqe],Jxn={view:{stroke:RSe},background:RSe,font:nI,header:{titleFont:ISe,titleFontSize:DSe,titleColor:kSe,labelFont:nI,labelFontSize:ASe,labelColor:rI},axis:{ticks:!1,grid:!1,domain:!1,labelColor:rI,labelFontSize:CSe,titleFont:ISe,titleColor:kSe,titleFontSize:DSe,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Vxn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Sh},line:{stroke:Sh,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:nI,fontSize:CSe,fill:rI},arc:{fill:Sh},area:{fill:Sh,line:!0,opacity:.6},path:{stroke:Sh},rect:{fill:Sh},point:{fill:Sh,filled:!0,size:75},shape:{stroke:Sh},symbol:{fill:Sh,strokeWidth:1.5,size:50},legend:{titleFont:nI,titleFontWeight:"bold",titleColor:rI,labelFont:nI,labelFontSize:ASe,labelColor:rI,symbolType:"circle",symbolSize:75},range:{category:[Sh,Hxn,qxn,Wxn,Gxn,Yxn,Kxn,Xxn],diverging:NSe,heatmap:NSe,ordinal:Qxn}},Nq='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Zxn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',Pq=400,E$={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},eSn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],tSn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function O7({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=E$.gridBg[e],i=E$.textPrimary[e],s=E$.textSecondary[e],o=n==="dark"?eSn:tSn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:Nq,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:Zxn,labelFontWeight:Pq,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:E$.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:Nq,fill:s,fontWeight:Pq},"guide-title":{font:Nq,fill:s,fontWeight:Pq}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const nSn=O7({theme:"white",background:"#ffffff"}),rSn=O7({theme:"g10",background:"#f4f4f4"}),iSn=O7({theme:"g90",background:"#262626"}),sSn=O7({theme:"g100",background:"#161616"}),oSn=Sxn.version,aSn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:rSn,carbong100:sSn,carbong90:iSn,carbonwhite:nSn,dark:Txn,excel:Cxn,fivethirtyeight:Ixn,ggplot2:kxn,googlecharts:zxn,latimes:Oxn,powerbi:Jxn,quartz:Mxn,urbaninstitute:Uxn,version:oSn,vox:$xn},Symbol.toStringTag,{value:"Module"}));function uSn(e,t,n,r){if(at(e))return`[${e.map(i=>t(Bt(i)?i:PSe(i,n))).join(", ")}]`;if(jt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(jt(c)&&(c=PSe(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function lSn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function PSe(e,t){return JSON.stringify(e,lSn(t))}var cSn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const tWe="vg-tooltip-element",fSn={offsetX:10,offsetY:10,id:tWe,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:dSn,maxDepth:2,formatTooltip:uSn,baseURL:""};function dSn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function hSn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return cSn.toString().replace(tWe,e)}function pSn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class mSn{constructor(t){this.options={...fSn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=hSn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=pSn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var Oq={};function gSn(e){return e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mq,OSe;function ySn(){return OSe||(OSe=1,Mq=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),Mq}var vSn=mi;mi.Node=RE;mi.create=mi;function mi(e){var t=this;if(t instanceof mi||(t=new mi),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}mi.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};mi.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};mi.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};mi.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)wSn(this,arguments[e]);return this.length};mi.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)_Sn(this,arguments[e]);return this.length};mi.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};mi.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};mi.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};mi.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};mi.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};mi.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};mi.prototype.map=function(e,t){t=t||this;for(var n=new mi,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};mi.prototype.mapReverse=function(e,t){t=t||this;for(var n=new mi,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};mi.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};mi.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};mi.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};mi.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};mi.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new mi;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};mi.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new mi;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};mi.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=bSn(this,i,n[r]);return s};mi.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function bSn(e,t,n){var r=t===e.head?new RE(n,null,t,e):new RE(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function wSn(e,t){e.tail=new RE(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function _Sn(e,t){e.head=new RE(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function RE(e,t,n,r){if(!(this instanceof RE))return new RE(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{ySn()(mi)}catch{}const ESn=vSn,i_=Symbol("max"),o0=Symbol("length"),mS=Symbol("lengthCalculator"),Zk=Symbol("allowStale"),T_=Symbol("maxAge"),e0=Symbol("dispose"),MSe=Symbol("noDisposeOnSet"),xa=Symbol("lruList"),Ch=Symbol("cache"),nWe=Symbol("updateAgeOnGet"),$q=()=>1;class xSn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[i_]=t.max||1/0;const n=t.length||$q;if(this[mS]=typeof n!="function"?$q:n,this[Zk]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[T_]=t.maxAge||0,this[e0]=t.dispose,this[MSe]=t.noDisposeOnSet||!1,this[nWe]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[i_]=t||1/0,iI(this)}get max(){return this[i_]}set allowStale(t){this[Zk]=!!t}get allowStale(){return this[Zk]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[T_]=t,iI(this)}get maxAge(){return this[T_]}set lengthCalculator(t){typeof t!="function"&&(t=$q),t!==this[mS]&&(this[mS]=t,this[o0]=0,this[xa].forEach(n=>{n.length=this[mS](n.value,n.key),this[o0]+=n.length})),iI(this)}get lengthCalculator(){return this[mS]}get length(){return this[o0]}get itemCount(){return this[xa].length}rforEach(t,n){n=n||this;for(let r=this[xa].tail;r!==null;){const i=r.prev;$Se(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[xa].head;r!==null;){const i=r.next;$Se(this,t,r,n),r=i}}keys(){return this[xa].toArray().map(t=>t.key)}values(){return this[xa].toArray().map(t=>t.value)}reset(){this[e0]&&this[xa]&&this[xa].length&&this[xa].forEach(t=>this[e0](t.key,t.value)),this[Ch]=new Map,this[xa]=new ESn,this[o0]=0}dump(){return this[xa].map(t=>q5(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[xa]}set(t,n,r){if(r=r||this[T_],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[mS](n,t);if(this[Ch].has(t)){if(s>this[i_])return YT(this,this[Ch].get(t)),!1;const u=this[Ch].get(t).value;return this[e0]&&(this[MSe]||this[e0](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[o0]+=s-u.length,u.length=s,this.get(t),iI(this),!0}const o=new SSn(t,n,s,i,r);return o.length>this[i_]?(this[e0]&&this[e0](t,n),!1):(this[o0]+=o.length,this[xa].unshift(o),this[Ch].set(t,this[xa].head),iI(this),!0)}has(t){if(!this[Ch].has(t))return!1;const n=this[Ch].get(t).value;return!q5(this,n)}get(t){return Fq(this,t,!0)}peek(t){return Fq(this,t,!1)}pop(){const t=this[xa].tail;return t?(YT(this,t),t.value):null}del(t){YT(this,this[Ch].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Ch].forEach((t,n)=>Fq(this,n,!1))}}const Fq=(e,t,n)=>{const r=e[Ch].get(t);if(r){const i=r.value;if(q5(e,i)){if(YT(e,r),!e[Zk])return}else n&&(e[nWe]&&(r.value.now=Date.now()),e[xa].unshiftNode(r));return i.value}},q5=(e,t)=>{if(!t||!t.maxAge&&!e[T_])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[T_]&&n>e[T_]},iI=e=>{if(e[o0]>e[i_])for(let t=e[xa].tail;e[o0]>e[i_]&&t!==null;){const n=t.prev;YT(e,t),t=n}},YT=(e,t)=>{if(t){const n=t.value;e[e0]&&e[e0](n.key,n.value),e[o0]-=n.length,e[Ch].delete(n.key),e[xa].removeNode(t)}};class SSn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const $Se=(e,t,n,r)=>{let i=n.value;q5(e,i)&&(YT(e,n),e[Zk]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var TSn=xSn;const CSn=Object.freeze({loose:!0}),ASn=Object.freeze({}),DSn=e=>e?typeof e!="object"?CSn:e:ASn;var Lce=DSn,OQ={exports:{}};const ISn="2.0.0",rWe=256,kSn=Number.MAX_SAFE_INTEGER||9007199254740991,RSn=16,NSn=rWe-6,PSn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Bce={MAX_LENGTH:rWe,MAX_SAFE_COMPONENT_LENGTH:RSn,MAX_SAFE_BUILD_LENGTH:NSn,MAX_SAFE_INTEGER:kSn,RELEASE_TYPES:PSn,SEMVER_SPEC_VERSION:ISn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const OSn=typeof process=="object"&&Oq&&Oq.NODE_DEBUG&&/\bsemver\b/i.test(Oq.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var M7=OSn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Bce,s=M7;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const b=h(g),w=c++;s(m,w,g),l[m]=w,u[w]=g,o[w]=new RegExp(g,y?"g":void 0),a[w]=new RegExp(b,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(OQ,OQ.exports);var jce=OQ.exports;const FSe=/^[0-9]+$/,iWe=(e,t)=>{const n=FSe.test(e),r=FSe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},MSn=(e,t)=>iWe(t,e);var $Sn={compareIdentifiers:iWe,rcompareIdentifiers:MSn};const x$=M7,{MAX_LENGTH:LSe,MAX_SAFE_INTEGER:S$}=Bce,{safeRe:BSe,t:jSe}=jce,FSn=Lce,{compareIdentifiers:gS}=$Sn;let LSn=class qp{constructor(t,n){if(n=FSn(n),t instanceof qp){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>LSe)throw new TypeError(`version is longer than ${LSe} characters`);x$("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?BSe[jSe.LOOSE]:BSe[jSe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>S$||this.major<0)throw new TypeError("Invalid major version");if(this.minor>S$||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>S$||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<S$)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(x$("SemVer.compare",this.version,this.options,t),!(t instanceof qp)){if(typeof t=="string"&&t===this.version)return 0;t=new qp(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof qp||(t=new qp(t,this.options)),gS(this.major,t.major)||gS(this.minor,t.minor)||gS(this.patch,t.patch)}comparePre(t){if(t instanceof qp||(t=new qp(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(x$("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return gS(r,i)}while(++n)}compareBuild(t){t instanceof qp||(t=new qp(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(x$("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return gS(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),gS(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Uce=LSn;const USe=Uce,BSn=(e,t,n)=>new USe(e,n).compare(new USe(t,n));var UA=BSn;const jSn=UA,USn=(e,t,n)=>jSn(e,t,n)===0;var zSn=USn;const VSn=UA,HSn=(e,t,n)=>VSn(e,t,n)!==0;var qSn=HSn;const WSn=UA,GSn=(e,t,n)=>WSn(e,t,n)>0;var YSn=GSn;const KSn=UA,XSn=(e,t,n)=>KSn(e,t,n)>=0;var QSn=XSn;const JSn=UA,ZSn=(e,t,n)=>JSn(e,t,n)<0;var eTn=ZSn;const tTn=UA,nTn=(e,t,n)=>tTn(e,t,n)<=0;var rTn=nTn;const iTn=zSn,sTn=qSn,oTn=YSn,aTn=QSn,uTn=eTn,lTn=rTn,cTn=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return iTn(e,n,r);case"!=":return sTn(e,n,r);case">":return oTn(e,n,r);case">=":return aTn(e,n,r);case"<":return uTn(e,n,r);case"<=":return lTn(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var fTn=cTn,Lq,zSe;function dTn(){if(zSe)return Lq;zSe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}Lq=t;const n=Lce,{safeRe:r,t:i}=jce,s=fTn,o=M7,a=Uce,u=sWe();return Lq}var Bq,VSe;function sWe(){if(VSe)return Bq;VSe=1;class e{constructor(L,j){if(j=r(j),L instanceof e)return L.loose===!!j.loose&&L.includePrerelease===!!j.includePrerelease?L:new e(L.raw,j);if(L instanceof i)return this.raw=L.value,this.set=[[L]],this.format(),this;if(this.options=j,this.loose=!!j.loose,this.includePrerelease=!!j.includePrerelease,this.raw=L.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(B=>this.parseRange(B.trim())).filter(B=>B.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const B=this.set[0];if(this.set=this.set.filter(z=>!p(z[0])),this.set.length===0)this.set=[B];else if(this.set.length>1){for(const z of this.set)if(z.length===1&&m(z[0])){this.set=[z];break}}}this.format()}format(){return this.range=this.set.map(L=>L.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(L){const B=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+L,z=n.get(B);if(z)return z;const V=this.options.loose,G=V?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];L=L.replace(G,N(this.options.includePrerelease)),s("hyphen replace",L),L=L.replace(a[u.COMPARATORTRIM],l),s("comparator trim",L),L=L.replace(a[u.TILDETRIM],c),s("tilde trim",L),L=L.replace(a[u.CARETTRIM],f),s("caret trim",L);let $=L.split(" ").map(Y=>y(Y,this.options)).join(" ").split(/\s+/).map(Y=>k(Y,this.options));V&&($=$.filter(Y=>(s("loose invalid filter",Y,this.options),!!Y.match(a[u.COMPARATORLOOSE])))),s("range list",$);const W=new Map,K=$.map(Y=>new i(Y,this.options));for(const Y of K){if(p(Y))return[Y];W.set(Y.value,Y)}W.size>1&&W.has("")&&W.delete("");const q=[...W.values()];return n.set(B,q),q}intersects(L,j){if(!(L instanceof e))throw new TypeError("a Range is required");return this.set.some(B=>g(B,j)&&L.set.some(z=>g(z,j)&&B.every(V=>z.every(G=>V.intersects(G,j)))))}test(L){if(!L)return!1;if(typeof L=="string")try{L=new o(L,this.options)}catch{return!1}for(let j=0;j<this.set.length;j++)if(F(this.set[j],L,this.options))return!0;return!1}}Bq=e;const t=TSn,n=new t({max:1e3}),r=Lce,i=dTn(),s=M7,o=Uce,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=jce,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Bce,p=M=>M.value==="<0.0.0-0",m=M=>M.value==="",g=(M,L)=>{let j=!0;const B=M.slice();let z=B.pop();for(;j&&B.length;)j=B.every(V=>z.intersects(V,L)),z=B.pop();return j},y=(M,L)=>(s("comp",M,L),M=E(M,L),s("caret",M),M=w(M,L),s("tildes",M),M=C(M,L),s("xrange",M),M=I(M,L),s("stars",M),M),b=M=>!M||M.toLowerCase()==="x"||M==="*",w=(M,L)=>M.trim().split(/\s+/).map(j=>S(j,L)).join(" "),S=(M,L)=>{const j=L.loose?a[u.TILDELOOSE]:a[u.TILDE];return M.replace(j,(B,z,V,G,$)=>{s("tilde",M,B,z,V,G,$);let W;return b(z)?W="":b(V)?W=`>=${z}.0.0 <${+z+1}.0.0-0`:b(G)?W=`>=${z}.${V}.0 <${z}.${+V+1}.0-0`:$?(s("replaceTilde pr",$),W=`>=${z}.${V}.${G}-${$} <${z}.${+V+1}.0-0`):W=`>=${z}.${V}.${G} <${z}.${+V+1}.0-0`,s("tilde return",W),W})},E=(M,L)=>M.trim().split(/\s+/).map(j=>T(j,L)).join(" "),T=(M,L)=>{s("caret",M,L);const j=L.loose?a[u.CARETLOOSE]:a[u.CARET],B=L.includePrerelease?"-0":"";return M.replace(j,(z,V,G,$,W)=>{s("caret",M,z,V,G,$,W);let K;return b(V)?K="":b(G)?K=`>=${V}.0.0${B} <${+V+1}.0.0-0`:b($)?V==="0"?K=`>=${V}.${G}.0${B} <${V}.${+G+1}.0-0`:K=`>=${V}.${G}.0${B} <${+V+1}.0.0-0`:W?(s("replaceCaret pr",W),V==="0"?G==="0"?K=`>=${V}.${G}.${$}-${W} <${V}.${G}.${+$+1}-0`:K=`>=${V}.${G}.${$}-${W} <${V}.${+G+1}.0-0`:K=`>=${V}.${G}.${$}-${W} <${+V+1}.0.0-0`):(s("no pr"),V==="0"?G==="0"?K=`>=${V}.${G}.${$}${B} <${V}.${G}.${+$+1}-0`:K=`>=${V}.${G}.${$}${B} <${V}.${+G+1}.0-0`:K=`>=${V}.${G}.${$} <${+V+1}.0.0-0`),s("caret return",K),K})},C=(M,L)=>(s("replaceXRanges",M,L),M.split(/\s+/).map(j=>A(j,L)).join(" ")),A=(M,L)=>{M=M.trim();const j=L.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return M.replace(j,(B,z,V,G,$,W)=>{s("xRange",M,B,z,V,G,$,W);const K=b(V),q=K||b(G),Y=q||b($),Z=Y;return z==="="&&Z&&(z=""),W=L.includePrerelease?"-0":"",K?z===">"||z==="<"?B="<0.0.0-0":B="*":z&&Z?(q&&(G=0),$=0,z===">"?(z=">=",q?(V=+V+1,G=0,$=0):(G=+G+1,$=0)):z==="<="&&(z="<",q?V=+V+1:G=+G+1),z==="<"&&(W="-0"),B=`${z+V}.${G}.${$}${W}`):q?B=`>=${V}.0.0${W} <${+V+1}.0.0-0`:Y&&(B=`>=${V}.${G}.0${W} <${V}.${+G+1}.0-0`),s("xRange return",B),B})},I=(M,L)=>(s("replaceStars",M,L),M.trim().replace(a[u.STAR],"")),k=(M,L)=>(s("replaceGTE0",M,L),M.trim().replace(a[L.includePrerelease?u.GTE0PRE:u.GTE0],"")),N=M=>(L,j,B,z,V,G,$,W,K,q,Y,Z,ae)=>(b(B)?j="":b(z)?j=`>=${B}.0.0${M?"-0":""}`:b(V)?j=`>=${B}.${z}.0${M?"-0":""}`:G?j=`>=${j}`:j=`>=${j}${M?"-0":""}`,b(K)?W="":b(q)?W=`<${+K+1}.0.0-0`:b(Y)?W=`<${K}.${+q+1}.0-0`:Z?W=`<=${K}.${q}.${Y}-${Z}`:M?W=`<${K}.${q}.${+Y+1}-0`:W=`<=${W}`,`${j} ${W}`.trim()),F=(M,L,j)=>{for(let B=0;B<M.length;B++)if(!M[B].test(L))return!1;if(L.prerelease.length&&!j.includePrerelease){for(let B=0;B<M.length;B++)if(s(M[B].semver),M[B].semver!==i.ANY&&M[B].semver.prerelease.length>0){const z=M[B].semver;if(z.major===L.major&&z.minor===L.minor&&z.patch===L.patch)return!0}return!1}return!0};return Bq}const hTn=sWe(),pTn=(e,t,n)=>{try{t=new hTn(t,n)}catch{return!1}return t.test(e)};var mTn=pTn,oWe=gSn(mTn);function gTn(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var yTn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function aWe(e,...t){for(const n of t)vTn(e,n);return e}function vTn(e,t){for(const n of Object.keys(t))xA(e,n,t[n],!0)}const Dh=tgn;let WN=oxn;const T$=typeof window<"u"?window:void 0;var JSe;WN===void 0&&((JSe=T$==null?void 0:T$.vl)!=null&&JSe.compile)&&(WN=T$.vl);const bTn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},wTn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},QI={vega:"Vega","vega-lite":"Vega-Lite"},W5={vega:Dh.version,"vega-lite":WN?WN.version:"not available"},_Tn={vega:e=>e,"vega-lite":(e,t)=>WN.compile(e,{config:t}).spec},ETn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,xTn="chart-wrapper";function STn(e){return typeof e=="function"}function HSe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${QI[r]} JSON Source`}function TTn(e,t){if(e.$schema){const n=Jqe(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${QI[n.library]}, but mode argument sets ${QI[t]??t}.`);const r=n.library;return oWe(W5[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${QI[r]} ${n.version}, but the current version of ${QI[r]} is v${W5[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function uWe(e){return!!(e&&"load"in e)}function qSe(e){return uWe(e)?e:Dh.loader(e)}function CTn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Bt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function ATn(e,t,n={}){let r,i;Bt(t)?(i=qSe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=CTn(r),o=s.loader;(!i||o)&&(i=qSe(n.loader??o));const a=await WSe(s,i),u=await WSe(n,i),l={...aWe(u,a),config:EA(u.config??{},a.config??{})};return await ITn(e,r,l,i)}async function WSe(e,t){const n=Bt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Bt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function DTn(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function ITn(e,t,n={},r){const i=n.theme?EA(aSn[n.theme],n.config??{}):n.config,s=jb(n.actions)?n.actions:aWe({},bTn,n.actions??{}),o={...wTn,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Dh.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:T,rootContainer:C}=DTn(c);if(!T.getElementById(E)){const A=document.createElement("style");A.id=E,A.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?yTn.toString():n.defaultStyle,C.appendChild(A)}}const f=TTn(t,n.mode);let d=_Tn[f](t,i);if(f==="vega-lite"&&d.$schema){const E=Jqe(d.$schema);oWe(W5.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${W5.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(xTn),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):X9(d,p,!0,!1).newDocument),n.formatLocale&&Dh.formatLocale(n.formatLocale),n.timeFormatLocale&&Dh.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const T=n.expressionFunctions[E];"fn"in T?Dh.expressionFunction(E,T.fn,T.visitor):T instanceof Function&&Dh.expressionFunction(E,T)}const{ast:m}=n,g=Dh.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||Dh.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:Dh.expressionInterpreter??n.expr??fgn}:{}});if(y.addSignalListener("autosize",(E,T)=>{const{type:C}=T;C=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):C=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):C=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:T}=n,C=E&&!uWe(E)?E==null?void 0:E.baseURL:void 0,A=STn(T)?T:new mSn({baseURL:C,...T===!0?{}:T}).call;y.tooltip(A)}let{hover:b}=n;if(b===void 0&&(b=f==="vega"),b){const{hoverSet:E,updateSet:T}=typeof b=="boolean"?{}:b;y.hover(E,T)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let w;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const C=document.createElement("details");C.title=o.CLICK_TO_VIEW_ACTIONS,c.append(C),E=C;const A=document.createElement("summary");A.innerHTML=ETn,C.append(A),w=I=>{C.contains(I.target)||C.removeAttribute("open")},document.addEventListener("click",w)}const T=document.createElement("div");if(E.append(T),T.classList.add("vega-actions"),s===!0||s.export!==!1){for(const C of["svg","png"])if(s===!0||s.export===!0||s.export[C]){const A=o[`${C.toUpperCase()}_ACTION`],I=document.createElement("a"),k=jt(n.scaleFactor)?n.scaleFactor[C]:n.scaleFactor;I.text=A,I.href="#",I.target="_blank",I.download=`${l}.${C}`,I.addEventListener("mousedown",async function(N){N.preventDefault();const F=await y.toImageURL(C,k);this.href=F}),T.append(I)}}if(s===!0||s.source!==!1){const C=document.createElement("a");C.text=o.SOURCE_ACTION,C.href="#",C.addEventListener("click",function(A){HSe(jH(t),n.sourceHeader??"",n.sourceFooter??"",f),A.preventDefault()}),T.append(C)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const C=document.createElement("a");C.text=o.COMPILED_ACTION,C.href="#",C.addEventListener("click",function(A){HSe(jH(d),n.sourceHeader??"",n.sourceFooter??"","vega"),A.preventDefault()}),T.append(C)}if(s===!0||s.editor!==!1){const C=n.editorUrl??"https://vega.github.io/editor/",A=document.createElement("a");A.text=o.EDITOR_ACTION,A.href="#",A.addEventListener("click",function(I){gTn(window,C,{config:i,mode:f,renderer:a,spec:jH(t)}),I.preventDefault()}),T.append(A)}}function S(){w&&document.removeEventListener("click",w),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:S,embedOptions:n}}function kTn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function RTn(e,t,n){n&&(kTn(n)?n(e.data(t)):e.change(t,Dh.changeset().remove(()=>!0).insert(n)))}function NTn(e,t){Object.keys(t).forEach(n=>{RTn(e,n,t[n])})}function lWe(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const cWe=()=>{};function jq(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function PTn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=lWe([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!G$(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function GSe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function Uq(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function JI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class fWe extends xi.PureComponent{constructor(){super(...arguments),JI(this,"containerRef",xi.createRef()),JI(this,"resultPromise",void 0),JI(this,"handleError",t=>{const{onError:n=cWe}=this.props;n(t,this.containerRef.current),console.warn(t)}),JI(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=lWe([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=PTn(Uq(this.props),Uq(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!aX(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&GSe(a,s),i&&jq(a,i)),a.run()})}else aX(i,s)||this.modifyView(o=>{s&&GSe(o,s),i&&jq(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=Uq(this.props);this.resultPromise=ATn(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;jq(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return xi.createElement("div",{ref:this.containerRef,className:t,style:n})}}JI(fWe,"propTypes",{className:Jpe.string,onError:Jpe.func});function MQ(){return MQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MQ.apply(this,arguments)}function $Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const OTn={};class dWe extends xi.PureComponent{constructor(){super(...arguments),$Q(this,"vegaEmbed",xi.createRef()),$Q(this,"handleNewView",t=>{this.update();const{onNewView:n=cWe}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){aX(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{NTn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return xi.createElement(fWe,MQ({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}$Q(dWe,"defaultProps",{data:OTn});function FQ(){return FQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FQ.apply(this,arguments)}function LQ(e){return xi.createElement(dWe,FQ({},e,{mode:"vega-lite"}))}function MTn({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=d8(!0),[o,a]=Zh(),u=P.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=P.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=P.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.filter(([g,y])=>y.endTime!==-1).map(([g,y])=>(y.endTime-y.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return _.jsxs(T2,{p:"lg",withBorder:!0,ref:o,children:[_.jsxs(Zt,{direction:"row",justify:"space-between",onClick:s,children:[_.jsxs(Zt,{align:"center",children:[e.type==="metadata"&&_.jsx(bht,{size:20}),e.type==="numerical"&&_.jsx(Dht,{size:20}),(e.type==="shortText"||e.type==="longText")&&_.jsx(pht,{size:20}),e.type==="likert"&&_.jsx(Eht,{size:20}),e.type==="dropdown"&&_.jsx($ht,{size:20}),e.type==="slider"&&_.jsx(lht,{size:20}),e.type==="radio"&&_.jsx(Nht,{size:20}),e.type==="checkbox"&&_.jsx(Fht,{size:20}),e.type==="iframe"&&_.jsx(Tht,{size:20}),_.jsx(Os,{order:5,ml:4,children:e.id})]}),_.jsx(vht,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),_.jsxs(p8,{in:i,mah:400,children:[_.jsx(Ne,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:_.jsx(uC,{})}),_.jsxs(gee,{cols:2,h:360,children:[_.jsx(W0,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="iframe"?_.jsx(LQ,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):_.jsxs(Zt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&_.jsx(lk,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&_.jsxs(_.Fragment,{children:[_.jsx(gt,{fw:700,children:"Response Values: "}),u.map((f,d)=>_.jsx(Zt,{align:"center",gap:"xs",children:_.jsx(gt,{children:f[e.id]})},d))]})]})}),_.jsx(W0,{mih:200,children:e.type==="metadata"?_.jsx(LQ,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):_.jsxs(_.Fragment,{children:[_.jsx(gt,{fw:700,children:"Response Specification: "}),_.jsx(lk,{block:!0,children:JSON.stringify(e,null,2)}),_.jsx("br",{}),l&&_.jsxs(_.Fragment,{children:[_.jsx(gt,{fw:700,children:"Correct Answer: "}),_.jsx(lk,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function $Tn({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&i6e(t.components[n],t),i=P.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?_.jsx(Zt,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>_.jsx(MTn,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):_.jsx(Zt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:_.jsx(gt,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function FTn({studyConfig:e,inprogress:t,completed:n,rejected:r}){const[i,s]=P.useState([...n]),o=P.useCallback(l=>{const c=[];l.includes("completed")&&c.push(...n),l.includes("inprogress")&&c.push(...t),l.includes("rejected")&&c.push(...r),s(c)},[n,t,r]),a=P.useMemo(()=>{let l=f1(e.sequence);return l=lte(l,"root"),l.components.push("end"),l},[e.sequence]),{trialId:u}=X0();return _.jsxs(T2,{shadow:"sm",p:"md",withBorder:!0,children:[_.jsx(Zt,{direction:"row",justify:"space-between",children:_.jsx(wc.Group,{defaultValue:["completed"],onChange:o,mb:"xs",mt:8,ml:"xs",children:_.jsxs(qi,{children:[_.jsx(wc,{value:"completed",label:"Completed"}),_.jsx(wc,{value:"inprogress",label:"In Progress"}),_.jsx(wc,{value:"rejected",label:"Rejected"})]})})}),_.jsx(uC,{my:"xs"}),i.length===0?_.jsx(Zt,{justify:"center",align:"center",pt:"lg",pb:"md",children:_.jsx(gt,{children:"No data available."})}):_.jsxs(Zt,{direction:"row",children:[_.jsx(Ne,{w:340,children:_.jsx(D4,{configSequence:a,participantSequence:a,fullSequence:a,participantView:!1,studyConfig:e,analysisNavigation:!0})}),_.jsx(uC,{orientation:"vertical",mx:"md"}),_.jsx($Tn,{participantData:i,studyConfig:e,trialId:u})]})]})}function LTn({globalConfig:e}){const{studyId:t}=X0(),[n,r]=P.useState([]),[i,s]=P.useState(void 0),[o,a]=P.useState(!1),{storageEngine:u}=Wo(),l=wp(),{tab:c}=X0(),{user:f}=sx(),d=P.useCallback(async()=>{if(a(!0),t){const g=await S9(t,e);if(!g||!u)return;await u.initializeStudyDb(t,g);const y=await u.getAllParticipantsData();r(y),s(g),a(!1)}},[e,u,t]);P.useEffect(()=>{d()},[e,u,t,d]);const[h,p,m]=P.useMemo(()=>{const g=n.filter(w=>!w.rejected&&w.completed),y=n.filter(w=>!w.rejected&&!w.completed),b=n.filter(w=>w.rejected);return[g,y,b]},[n]);return _.jsxs(_.Fragment,{children:[_.jsx(Vk,{studyIds:e.configsList}),_.jsx(bs.Main,{children:_.jsxs(Fd,{fluid:!0,style:{height:"100%",position:"relative"},children:[_.jsx(kf,{visible:o}),_.jsxs(Zt,{direction:"row",align:"center",children:[_.jsx(Os,{order:5,children:t}),_.jsx(K8e,{completed:h.length,inProgress:p.length,rejected:m.length})]}),_.jsx(xf,{h:"xs"}),_.jsxs(bo,{variant:"outline",value:c,onChange:g=>l(`/analysis/stats/${t}/${g}`),style:{height:"100%"},children:[_.jsxs(bo.List,{children:[_.jsx(bo.Tab,{value:"table",leftSection:_.jsx(Lht,{size:16}),children:"Table View"}),_.jsx(bo.Tab,{value:"stats",leftSection:_.jsx(ght,{size:16}),children:"Trial Stats"}),_.jsx(hs,{label:"Coming soon",position:"bottom",children:_.jsx(bo.Tab,{value:"replay",leftSection:_.jsx(Rht,{size:16}),disabled:!0,children:"Participant Replay"})}),_.jsx(bo.Tab,{value:"manage",leftSection:_.jsx(mIe,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),_.jsx(bo.Panel,{value:"table",pt:"xs",children:i&&_.jsx(GZt,{completed:h,inProgress:p,rejected:m,studyConfig:i,refresh:d})}),_.jsx(bo.Panel,{value:"stats",pt:"xs",children:i&&_.jsx(FTn,{studyConfig:i,completed:h,inprogress:p,rejected:m})}),_.jsx(bo.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),_.jsx(bo.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?_.jsx(ten,{studyId:t,refresh:d}):_.jsx(Fd,{mt:20,children:_.jsx(k0,{title:"Unauthorized Access",variant:"light",color:"red",icon:_.jsx(Oee,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function YSe({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=sx(),{storageEngine:o}=Wo(),[a,u]=P.useState(!1),l=X0();return P.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?_.jsx(kf,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?_.jsx(Ree,{to:"/login"}):_.jsx(_.Fragment,{children:e})}async function hWe(e,t){if(e instanceof Ed){t(!0);const n=new h0,r=V4();try{await FGt(r,n,q4e)}catch(i){J4({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function BTn(){const{user:e}=sx(),[t,n]=P.useState(!1),{storageEngine:r}=Wo();return P.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&J4({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?_.jsx(Ree,{to:"/"}):_.jsx(Fd,{children:_.jsx(jE,{padding:"lg",children:_.jsxs(Zt,{align:"center",direction:"column",justify:"center",children:[_.jsx(Eb,{maw:200,mt:50,mb:100,src:`${Rl}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsxs(_.Fragment,{children:[_.jsx(gt,{mb:20,children:"To access admin settings, please sign in using your Google account."}),_.jsx(Mn,{onClick:()=>hWe(r,n),leftSection:_.jsx(Bht,{}),variant:"filled",children:"Sign In With Google"})]}),_.jsx(kf,{visible:t})]})})})}var pWe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Hs,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(L){var j=["th","st","nd","rd"],B=L%100;return"["+L+(j[(B-20)%10]||j[B]||j[0])+"]"}},w=function(L,j,B){var z=String(L);return!z||z.length>=j?L:""+Array(j+1-z.length).join(B)+L},S={s:w,z:function(L){var j=-L.utcOffset(),B=Math.abs(j),z=Math.floor(B/60),V=B%60;return(j<=0?"+":"-")+w(z,2,"0")+":"+w(V,2,"0")},m:function L(j,B){if(j.date()<B.date())return-L(B,j);var z=12*(B.year()-j.year())+(B.month()-j.month()),V=j.clone().add(z,f),G=B-V<0,$=j.clone().add(z+(G?-1:1),f);return+(-(z+(B-V)/(G?V-$:$-V))||0)},a:function(L){return L<0?Math.ceil(L)||0:Math.floor(L)},p:function(L){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[L]||String(L||"").toLowerCase().replace(/s$/,"")},u:function(L){return L===void 0}},E="en",T={};T[E]=b;var C="$isDayjsObject",A=function(L){return L instanceof F||!(!L||!L[C])},I=function L(j,B,z){var V;if(!j)return E;if(typeof j=="string"){var G=j.toLowerCase();T[G]&&(V=G),B&&(T[G]=B,V=G);var $=j.split("-");if(!V&&$.length>1)return L($[0])}else{var W=j.name;T[W]=j,V=W}return!z&&V&&(E=V),V||!z&&E},k=function(L,j){if(A(L))return L.clone();var B=typeof j=="object"?j:{};return B.date=L,B.args=arguments,new F(B)},N=S;N.l=I,N.i=A,N.w=function(L,j){return k(L,{locale:j.$L,utc:j.$u,x:j.$x,$offset:j.$offset})};var F=function(){function L(B){this.$L=I(B.locale,null,!0),this.parse(B),this.$x=this.$x||B.x||{},this[C]=!0}var j=L.prototype;return j.parse=function(B){this.$d=function(z){var V=z.date,G=z.utc;if(V===null)return new Date(NaN);if(N.u(V))return new Date;if(V instanceof Date)return new Date(V);if(typeof V=="string"&&!/Z$/i.test(V)){var $=V.match(g);if($){var W=$[2]-1||0,K=($[7]||"0").substring(0,3);return G?new Date(Date.UTC($[1],W,$[3]||1,$[4]||0,$[5]||0,$[6]||0,K)):new Date($[1],W,$[3]||1,$[4]||0,$[5]||0,$[6]||0,K)}}return new Date(V)}(B),this.init()},j.init=function(){var B=this.$d;this.$y=B.getFullYear(),this.$M=B.getMonth(),this.$D=B.getDate(),this.$W=B.getDay(),this.$H=B.getHours(),this.$m=B.getMinutes(),this.$s=B.getSeconds(),this.$ms=B.getMilliseconds()},j.$utils=function(){return N},j.isValid=function(){return this.$d.toString()!==m},j.isSame=function(B,z){var V=k(B);return this.startOf(z)<=V&&V<=this.endOf(z)},j.isAfter=function(B,z){return k(B)<this.startOf(z)},j.isBefore=function(B,z){return this.endOf(z)<k(B)},j.$g=function(B,z,V){return N.u(B)?this[z]:this.set(V,B)},j.unix=function(){return Math.floor(this.valueOf()/1e3)},j.valueOf=function(){return this.$d.getTime()},j.startOf=function(B,z){var V=this,G=!!N.u(z)||z,$=N.p(B),W=function(we,Ce){var Le=N.w(V.$u?Date.UTC(V.$y,Ce,we):new Date(V.$y,Ce,we),V);return G?Le:Le.endOf(l)},K=function(we,Ce){return N.w(V.toDate()[we].apply(V.toDate("s"),(G?[0,0,0,0]:[23,59,59,999]).slice(Ce)),V)},q=this.$W,Y=this.$M,Z=this.$D,ae="set"+(this.$u?"UTC":"");switch($){case h:return G?W(1,0):W(31,11);case f:return G?W(1,Y):W(0,Y+1);case c:var be=this.$locale().weekStart||0,Se=(q<be?q+7:q)-be;return W(G?Z-Se:Z+(6-Se),Y);case l:case p:return K(ae+"Hours",0);case u:return K(ae+"Minutes",1);case a:return K(ae+"Seconds",2);case o:return K(ae+"Milliseconds",3);default:return this.clone()}},j.endOf=function(B){return this.startOf(B,!1)},j.$set=function(B,z){var V,G=N.p(B),$="set"+(this.$u?"UTC":""),W=(V={},V[l]=$+"Date",V[p]=$+"Date",V[f]=$+"Month",V[h]=$+"FullYear",V[u]=$+"Hours",V[a]=$+"Minutes",V[o]=$+"Seconds",V[s]=$+"Milliseconds",V)[G],K=G===l?this.$D+(z-this.$W):z;if(G===f||G===h){var q=this.clone().set(p,1);q.$d[W](K),q.init(),this.$d=q.set(p,Math.min(this.$D,q.daysInMonth())).$d}else W&&this.$d[W](K);return this.init(),this},j.set=function(B,z){return this.clone().$set(B,z)},j.get=function(B){return this[N.p(B)]()},j.add=function(B,z){var V,G=this;B=Number(B);var $=N.p(z),W=function(Y){var Z=k(G);return N.w(Z.date(Z.date()+Math.round(Y*B)),G)};if($===f)return this.set(f,this.$M+B);if($===h)return this.set(h,this.$y+B);if($===l)return W(1);if($===c)return W(7);var K=(V={},V[a]=r,V[u]=i,V[o]=n,V)[$]||1,q=this.$d.getTime()+B*K;return N.w(q,this)},j.subtract=function(B,z){return this.add(-1*B,z)},j.format=function(B){var z=this,V=this.$locale();if(!this.isValid())return V.invalidDate||m;var G=B||"YYYY-MM-DDTHH:mm:ssZ",$=N.z(this),W=this.$H,K=this.$m,q=this.$M,Y=V.weekdays,Z=V.months,ae=V.meridiem,be=function(Ce,Le,ke,Ze){return Ce&&(Ce[Le]||Ce(z,G))||ke[Le].slice(0,Ze)},Se=function(Ce){return N.s(W%12||12,Ce,"0")},we=ae||function(Ce,Le,ke){var Ze=Ce<12?"AM":"PM";return ke?Ze.toLowerCase():Ze};return G.replace(y,function(Ce,Le){return Le||function(ke){switch(ke){case"YY":return String(z.$y).slice(-2);case"YYYY":return N.s(z.$y,4,"0");case"M":return q+1;case"MM":return N.s(q+1,2,"0");case"MMM":return be(V.monthsShort,q,Z,3);case"MMMM":return be(Z,q);case"D":return z.$D;case"DD":return N.s(z.$D,2,"0");case"d":return String(z.$W);case"dd":return be(V.weekdaysMin,z.$W,Y,2);case"ddd":return be(V.weekdaysShort,z.$W,Y,3);case"dddd":return Y[z.$W];case"H":return String(W);case"HH":return N.s(W,2,"0");case"h":return Se(1);case"hh":return Se(2);case"a":return we(W,K,!0);case"A":return we(W,K,!1);case"m":return String(K);case"mm":return N.s(K,2,"0");case"s":return String(z.$s);case"ss":return N.s(z.$s,2,"0");case"SSS":return N.s(z.$ms,3,"0");case"Z":return $}return null}(Ce)||$.replace(":","")})},j.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},j.diff=function(B,z,V){var G,$=this,W=N.p(z),K=k(B),q=(K.utcOffset()-this.utcOffset())*r,Y=this-K,Z=function(){return N.m($,K)};switch(W){case h:G=Z()/12;break;case f:G=Z();break;case d:G=Z()/3;break;case c:G=(Y-q)/6048e5;break;case l:G=(Y-q)/864e5;break;case u:G=Y/i;break;case a:G=Y/r;break;case o:G=Y/n;break;default:G=Y}return V?G:N.a(G)},j.daysInMonth=function(){return this.endOf(f).$D},j.$locale=function(){return T[this.$L]},j.locale=function(B,z){if(!B)return this.$L;var V=this.clone(),G=I(B,z,!0);return G&&(V.$L=G),V},j.clone=function(){return N.w(this.$d,this)},j.toDate=function(){return new Date(this.valueOf())},j.toJSON=function(){return this.isValid()?this.toISOString():null},j.toISOString=function(){return this.$d.toISOString()},j.toString=function(){return this.$d.toUTCString()},L}(),M=F.prototype;return k.prototype=M,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function(L){M[L[1]]=function(j){return this.$g(j,L[0],L[1])}}),k.extend=function(L,j){return L.$i||(L(j,F,k),L.$i=!0),k},k.locale=I,k.isDayjs=A,k.unix=function(L){return k(1e3*L)},k.en=T[E],k.Ls=T,k.p={},k})})(pWe);var jTn=pWe.exports;const Qt=zf(jTn);function UTn({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>Qt(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function zTn({formatter:e,...t}){return(e||UTn)(t)}function VTn({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function mWe({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=VTn({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?mWe({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function HTn(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function qTn(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function zce({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=HTn(i.key);if(s){i.preventDefault();const o=qTn(e);mWe({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var gWe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Hs,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,b){b===void 0&&(b={});var w=b.timeZoneName||"short",S=y+"|"+w,E=r[S];return E||(E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:w}),r[S]=E),E}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],b=y.type,w=y.value,S=n[b];S>=0&&(m[S]=parseInt(w,10))}var E=m[3],T=E===24?0:E,C=m[0]+"-"+m[1]+"-"+m[2]+" "+T+":"+m[4]+":"+m[5]+":000",A=+d;return(o.utc(C).valueOf()-(A-=A%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),b=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var w=b.utcOffset();b=b.add(p-w,"minute")}return b.$x.$timezone=d,b},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var b=function(T,C,A){var I=T-60*C*1e3,k=l(I,A);if(C===k)return[I,C];var N=l(I-=60*(k-C)*1e3,A);return k===N?[I,k]:[T-60*Math.min(k,N)*1e3,Math.max(k,N)]}(o.utc(d,m).valueOf(),y,g),w=b[0],S=b[1],E=o(w).utcOffset(S);return E.$x.$timezone=g,E},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(gWe);var WTn=gWe.exports;const GTn=zf(WTn);var yWe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Hs,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(E){E===void 0&&(E="");var T=E.match(r);if(!T)return null;var C=(""+T[0]).match(i)||["-",0,0],A=C[0],I=60*+C[1]+ +C[2];return I===0?0:A==="+"?I:-I}(m),m===null))return this;var b=Math.abs(m)<=16?60*m:m,w=this;if(g)return w.$offset=b,w.$u=m===0,w;if(m!==0){var S=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(w=this.local().add(b+S,n)).$offset=b,w.$x.$localOffset=S}else w=this.utc();return w};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var b=this.local(),w=a(m).local();return p.call(b,w,g,y)}}})})(yWe);var YTn=yWe.exports;const KTn=zf(YTn);Qt.extend(KTn);Qt.extend(GTn);function XTn(e,t){return t?Qt(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const KSe=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=XTn(e,t);return n==="remove"&&(r*=-1),Qt(e).add(r,"minutes").toDate()};function C1(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>KSe(i,n,e)):KSe(t,n,e)}function QTn({minDate:e,maxDate:t,timezone:n}){const r=C1("add",new Date,n);return!e&&!t?r:e&&Qt(r).isBefore(e)?e:t&&Qt(r).isAfter(t)?t:r}const JTn={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},ZTn=P.createContext(JTn);function Gf(){const e=P.useContext(ZTn),t=P.useCallback(o=>o||e.locale,[e.locale]),n=P.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=P.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=P.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=P.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function eCn(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function vWe({value:e,type:t,name:n,form:r}){return _.jsx("input",{type:"hidden",value:eCn(e,t),name:n,form:r})}vWe.displayName="@mantine/dates/HiddenDatesInput";var bWe={day:"m_396ce5cb"};const tCn={},nCn=(e,{size:t})=>({day:{"--day-size":Vn(t,"day-size")}}),Vce=nt((e,t)=>{const n=Ue("Day",tCn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:b,hidden:w,static:S,...E}=n,T=$t({name:f||"Day",classes:bWe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nCn,rootSelector:"day"}),C=Gf();return _.jsx(Vo,{...T("day",{style:w?{display:"none"}:void 0}),component:S?"div":"button",ref:t,disabled:c,"data-today":Qt(l).isSame(C1("add",new Date,C.getTimezone()),"day")||void 0,"data-hidden":w||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":b&&!c||void 0,"data-static":S||void 0,unstyled:a,...E,children:(m==null?void 0:m(l))||l.getDate()})});Vce.classes=bWe;Vce.displayName="@mantine/dates/Day";function rCn({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=Qt().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(Qt(r).add(s,"days").locale(e).format(t)):i.push(t(Qt(r).add(s,"days").toDate()));return i}var wWe={weekday:"m_18a3eca"};const iCn={},sCn=(e,{size:t})=>({weekdaysRow:{"--wr-fz":Fa(t),"--wr-spacing":So(t)}}),Hce=nt((e,t)=>{const n=Ue("WeekdaysRow",iCn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=$t({name:h||"WeekdaysRow",classes:wWe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:sCn,rootSelector:"weekdaysRow"}),g=Gf(),y=rCn({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((b,w)=>_.jsx(d,{...m("weekday"),children:b},w));return _.jsx(Ne,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});Hce.classes=wWe;Hce.displayName="@mantine/dates/WeekdaysRow";function oCn(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function aCn(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function uCn({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=oCn(s,t),a=aCn(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function _We(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function EWe(e,t){return t instanceof Date?Qt(e).isAfter(Qt(t).subtract(1,"day"),"day"):!0}function xWe(e,t){return t instanceof Date?Qt(e).isBefore(Qt(t).add(1,"day"),"day"):!0}function lCn(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return xWe(c,n)&&EWe(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||_We(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>Qt().isSame(c,"date"));return l||a[0]}var SWe={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const cCn={withCellSpacing:!0},$7=nt((e,t)=>{const n=Ue("Month",cCn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:b,renderDay:w,hideOutsideDates:S,hideWeekdays:E,getDayAriaLabel:T,static:C,__getDayRef:A,__onDayKeyDown:I,__onDayClick:k,__onDayMouseEnter:N,__preventFocus:F,__stopPropagation:M,withCellSpacing:L,size:j,...B}=n,z=$t({name:l||"Month",classes:SWe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),V=Gf(),G=uCn({month:h,firstDayOfWeek:V.getFirstDayOfWeek(f),consistentWeeks:V.consistentWeeks}),$=lCn(G,y,b,m,g,S,h),{resolvedClassNames:W,resolvedStyles:K}=by({classNames:r,styles:o,props:n}),q=G.map((Y,Z)=>{const ae=Y.map((be,Se)=>{const we=!_We(be,h),Ce=(T==null?void 0:T(be))||Qt(be).locale(c||V.locale).format("D MMMM YYYY"),Le=m==null?void 0:m(be),ke=Qt(be).isSame($,"date");return _.jsx("td",{...z("monthCell"),"data-with-spacing":L||void 0,children:_.jsx(Vce,{__staticSelector:l||"Month",classNames:W,styles:K,unstyled:a,"data-mantine-stop-propagation":M||void 0,renderDay:w,date:be,size:j,weekend:V.getWeekendDays(p).includes(be.getDay()),outside:we,hidden:S?we:!1,"aria-label":Ce,static:C,disabled:(g==null?void 0:g(be))||!xWe(be,b)||!EWe(be,y),ref:Ze=>A==null?void 0:A(Z,Se,Ze),...Le,onKeyDown:Ze=>{var Ke;(Ke=Le==null?void 0:Le.onKeyDown)==null||Ke.call(Le,Ze),I==null||I(Ze,{rowIndex:Z,cellIndex:Se,date:be})},onMouseEnter:Ze=>{var Ke;(Ke=Le==null?void 0:Le.onMouseEnter)==null||Ke.call(Le,Ze),N==null||N(Ze,be)},onClick:Ze=>{var Ke;(Ke=Le==null?void 0:Le.onClick)==null||Ke.call(Le,Ze),k==null||k(Ze,be)},onMouseDown:Ze=>{var Ke;(Ke=Le==null?void 0:Le.onMouseDown)==null||Ke.call(Le,Ze),F&&Ze.preventDefault()},tabIndex:F||!ke?-1:0})},be.toString())});return _.jsx("tr",{...z("monthRow"),children:ae},Z)});return _.jsxs(Ne,{component:"table",...z("month"),size:j,ref:t,...B,children:[!E&&_.jsx("thead",{...z("monthThead"),children:_.jsx(Hce,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:j,classNames:W,styles:K,unstyled:a})}),_.jsx("tbody",{...z("monthTbody"),children:q})]})});$7.classes=SWe;$7.displayName="@mantine/dates/Month";var TWe={pickerControl:"m_dc6a3c71"};const fCn={},dCn=(e,{size:t})=>({pickerControl:{"--dpc-fz":Fa(t),"--dpc-size":Vn(t,"dpc-size")}}),F7=nt((e,t)=>{const n=Ue("PickerControl",fCn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=$t({name:d||"PickerControl",classes:TWe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dCn,rootSelector:"pickerControl"});return _.jsx(Vo,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});F7.classes=TWe;F7.displayName="@mantine/dates/PickerControl";function CWe(e,t,n){return!t&&!n?!1:!!(t&&Qt(e).isBefore(t,"year")||n&&Qt(e).isAfter(n,"year"))}function hCn(e,t,n,r){const i=e.flat().filter(a=>{var u;return!CWe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Qt().isSame(a,"year"));return o||i[0]}function AWe(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var DWe={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const pCn={yearsListFormat:"YYYY",withCellSpacing:!0},L7=nt((e,t)=>{const n=Ue("YearsList",pCn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:b,__onControlMouseEnter:w,__preventFocus:S,__stopPropagation:E,withCellSpacing:T,size:C,...A}=n,I=$t({name:m||"YearsList",classes:DWe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),k=Gf(),N=AWe(l),F=hCn(N,d,h,p),M=N.map((L,j)=>{const B=L.map((z,V)=>{const G=p==null?void 0:p(z),$=Qt(z).isSame(F,"year");return _.jsx("td",{...I("yearsListCell"),"data-with-spacing":T||void 0,children:_.jsx(F7,{...I("yearsListControl"),size:C,unstyled:a,"data-mantine-stop-propagation":E||void 0,disabled:CWe(z,d,h),ref:W=>g==null?void 0:g(j,V,W),...G,onKeyDown:W=>{var K;(K=G==null?void 0:G.onKeyDown)==null||K.call(G,W),y==null||y(W,{rowIndex:j,cellIndex:V,date:z})},onClick:W=>{var K;(K=G==null?void 0:G.onClick)==null||K.call(G,W),b==null||b(W,z)},onMouseEnter:W=>{var K;(K=G==null?void 0:G.onMouseEnter)==null||K.call(G,W),w==null||w(W,z)},onMouseDown:W=>{var K;(K=G==null?void 0:G.onMouseDown)==null||K.call(G,W),S&&W.preventDefault()},tabIndex:S||!$?-1:0,children:Qt(z).locale(k.getLocale(f)).format(c)})},V)});return _.jsx("tr",{...I("yearsListRow"),children:B},j)});return _.jsx(Ne,{component:"table",ref:t,size:C,...I("yearsList"),...A,children:_.jsx("tbody",{children:M})})});L7.classes=DWe;L7.displayName="@mantine/dates/YearsList";function IWe(e,t,n){return!t&&!n?!1:!!(t&&Qt(e).isBefore(t,"month")||n&&Qt(e).isAfter(n,"month"))}function mCn(e,t,n,r){const i=e.flat().filter(a=>{var u;return!IWe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Qt().isSame(a,"month"));return o||i[0]}function gCn(e){const t=Qt(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(Qt(t).add(r,"months").toDate()),r+=1;return n}var kWe={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const yCn={monthsListFormat:"MMM",withCellSpacing:!0},B7=nt((e,t)=>{const n=Ue("MonthsList",yCn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:b,__onControlMouseEnter:w,__preventFocus:S,__stopPropagation:E,withCellSpacing:T,size:C,...A}=n,I=$t({name:l||"MonthsList",classes:kWe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),k=Gf(),N=gCn(c),F=mCn(N,h,p,m),M=N.map((L,j)=>{const B=L.map((z,V)=>{const G=m==null?void 0:m(z),$=Qt(z).isSame(F,"month");return _.jsx("td",{...I("monthsListCell"),"data-with-spacing":T||void 0,children:_.jsx(F7,{...I("monthsListControl"),size:C,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":E||void 0,disabled:IWe(z,h,p),ref:W=>g==null?void 0:g(j,V,W),...G,onKeyDown:W=>{var K;(K=G==null?void 0:G.onKeyDown)==null||K.call(G,W),y==null||y(W,{rowIndex:j,cellIndex:V,date:z})},onClick:W=>{var K;(K=G==null?void 0:G.onClick)==null||K.call(G,W),b==null||b(W,z)},onMouseEnter:W=>{var K;(K=G==null?void 0:G.onMouseEnter)==null||K.call(G,W),w==null||w(W,z)},onMouseDown:W=>{var K;(K=G==null?void 0:G.onMouseDown)==null||K.call(G,W),S&&W.preventDefault()},tabIndex:S||!$?-1:0,children:Qt(z).locale(k.getLocale(d)).format(f)})},V)});return _.jsx("tr",{...I("monthsListRow"),children:B},j)});return _.jsx(Ne,{component:"table",ref:t,size:C,...I("monthsList"),...A,children:_.jsx("tbody",{children:M})})});B7.classes=kWe;B7.displayName="@mantine/dates/MonthsList";var RWe={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const vCn={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},bCn=(e,{size:t})=>({calendarHeader:{"--dch-control-size":Vn(t,"dch-control-size"),"--dch-fz":Fa(t)}}),Xb=nt((e,t)=>{const n=Ue("CalendarHeader",vCn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:b,hasNextLevel:w,levelControlAriaLabel:S,withNext:E,withPrevious:T,__staticSelector:C,__preventFocus:A,__stopPropagation:I,...k}=n,N=$t({name:C||"CalendarHeader",classes:RWe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:bCn,rootSelector:"calendarHeader"}),F=A?M=>M.preventDefault():void 0;return _.jsxs(Ne,{...N("calendarHeader"),ref:t,...k,children:[T&&_.jsx(Vo,{...N("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:F,disabled:b,"data-disabled":b||void 0,tabIndex:A||b?-1:0,"data-mantine-stop-propagation":I||void 0,children:c||_.jsx(oC,{...N("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),_.jsx(Vo,{component:w?"button":"div",...N("calendarHeaderLevel"),onClick:w?m:void 0,unstyled:a,onMouseDown:w?F:void 0,disabled:!w,"data-static":!w||void 0,"aria-label":S,tabIndex:A||!w?-1:0,"data-mantine-stop-propagation":I||void 0,children:g}),E&&_.jsx(Vo,{...N("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:F,disabled:y,"data-disabled":y||void 0,tabIndex:A||y?-1:0,"data-mantine-stop-propagation":I||void 0,children:l||_.jsx(oC,{...N("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});Xb.classes=RWe;Xb.displayName="@mantine/dates/CalendarHeader";function wCn(e){const t=AWe(e);return[t[0][0],t[3][0]]}const _Cn={decadeLabelFormat:"YYYY"},j7=nt((e,t)=>{const n=Ue("DecadeLevel",_Cn,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:b,onNext:w,onPrevious:S,nextDisabled:E,previousDisabled:T,levelControlAriaLabel:C,withNext:A,withPrevious:I,decadeLabelFormat:k,classNames:N,styles:F,unstyled:M,__staticSelector:L,__stopPropagation:j,size:B,...z}=n,V=Gf(),[G,$]=wCn(r),W={__staticSelector:L||"DecadeLevel",classNames:N,styles:F,unstyled:M,size:B},K=typeof E=="boolean"?E:o?!Qt($).endOf("year").isBefore(o):!1,q=typeof T=="boolean"?T:s?!Qt(G).startOf("year").isAfter(s):!1,Y=(Z,ae)=>Qt(Z).locale(i||V.locale).format(ae);return _.jsxs(Ne,{"data-decade-level":!0,size:B,ref:t,...z,children:[_.jsx(Xb,{label:typeof k=="function"?k(G,$):`${Y(G,k)}  ${Y($,k)}`,__preventFocus:p,__stopPropagation:j,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:b,onNext:w,onPrevious:S,nextDisabled:K,previousDisabled:q,hasNextLevel:!1,levelControlAriaLabel:C,withNext:A,withPrevious:I,...W}),_.jsx(L7,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:j,withCellSpacing:h,...W})]})});j7.classes={...L7.classes,...Xb.classes};j7.displayName="@mantine/dates/DecadeLevel";const ECn={yearLabelFormat:"YYYY"},U7=nt((e,t)=>{const n=Ue("YearLevel",ECn,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:b,onNext:w,onPrevious:S,onLevelClick:E,nextDisabled:T,previousDisabled:C,hasNextLevel:A,levelControlAriaLabel:I,withNext:k,withPrevious:N,yearLabelFormat:F,__staticSelector:M,__stopPropagation:L,size:j,classNames:B,styles:z,unstyled:V,...G}=n,$=Gf(),W={__staticSelector:M||"YearLevel",classNames:B,styles:z,unstyled:V,size:j},K=typeof T=="boolean"?T:o?!Qt(r).endOf("year").isBefore(o):!1,q=typeof C=="boolean"?C:s?!Qt(r).startOf("year").isAfter(s):!1;return _.jsxs(Ne,{"data-year-level":!0,size:j,ref:t,...G,children:[_.jsx(Xb,{label:typeof F=="function"?F(r):Qt(r).locale(i||$.locale).format(F),__preventFocus:p,__stopPropagation:L,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:b,onNext:w,onPrevious:S,onLevelClick:E,nextDisabled:K,previousDisabled:q,hasNextLevel:A,levelControlAriaLabel:I,withNext:k,withPrevious:N,...W}),_.jsx(B7,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:L,withCellSpacing:h,...W})]})});U7.classes={...Xb.classes,...B7.classes};U7.displayName="@mantine/dates/YearLevel";const xCn={monthLabelFormat:"MMMM YYYY"},z7=nt((e,t)=>{const n=Ue("MonthLevel",xCn,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:b,__onDayMouseEnter:w,withCellSpacing:S,__preventFocus:E,__stopPropagation:T,nextIcon:C,previousIcon:A,nextLabel:I,previousLabel:k,onNext:N,onPrevious:F,onLevelClick:M,nextDisabled:L,previousDisabled:j,hasNextLevel:B,levelControlAriaLabel:z,withNext:V,withPrevious:G,monthLabelFormat:$,classNames:W,styles:K,unstyled:q,__staticSelector:Y,size:Z,static:ae,...be}=n,Se=Gf(),we={__staticSelector:Y||"MonthLevel",classNames:W,styles:K,unstyled:q,size:Z},Ce=typeof L=="boolean"?L:f?!Qt(r).endOf("month").isBefore(f):!1,Le=typeof j=="boolean"?j:c?!Qt(r).startOf("month").isAfter(c):!1;return _.jsxs(Ne,{"data-month-level":!0,size:Z,ref:t,...be,children:[_.jsx(Xb,{label:typeof $=="function"?$(r):Qt(r).locale(i||Se.locale).format($),__preventFocus:E,__stopPropagation:T,nextIcon:C,previousIcon:A,nextLabel:I,previousLabel:k,onNext:N,onPrevious:F,onLevelClick:M,nextDisabled:Ce,previousDisabled:Le,hasNextLevel:B,levelControlAriaLabel:z,withNext:V,withPrevious:G,...we}),_.jsx($7,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:b,__onDayMouseEnter:w,__preventFocus:E,__stopPropagation:T,static:ae,withCellSpacing:S,...we})]})});z7.classes={...$7.classes,...Xb.classes};z7.displayName="@mantine/dates/MonthLevel";var NWe={levelsGroup:"m_30b26e33"};const SCn={},Qb=nt((e,t)=>{const n=Ue("LevelsGroup",SCn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=$t({name:l||"LevelsGroup",classes:NWe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return _.jsx(Ne,{ref:t,...f("levelsGroup"),...c})});Qb.classes=NWe;Qb.displayName="@mantine/dates/LevelsGroup";const TCn={numberOfColumns:1},V7=nt((e,t)=>{const n=Ue("DecadeLevelGroup",TCn,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:b,nextDisabled:w,previousDisabled:S,classNames:E,styles:T,unstyled:C,__staticSelector:A,__stopPropagation:I,numberOfColumns:k,levelControlAriaLabel:N,decadeLabelFormat:F,size:M,vars:L,...j}=n,B=P.useRef([]),z=Array(k).fill(0).map((V,G)=>{const $=Qt(r).add(G*10,"years").toDate();return _.jsx(j7,{size:M,yearsListFormat:a,decade:$,withNext:G===k-1,withPrevious:G===0,decadeLabelFormat:F,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(W,K)=>zce({levelIndex:G,rowIndex:K.rowIndex,cellIndex:K.cellIndex,event:W,controlsRef:B}),__getControlRef:(W,K,q)=>{Array.isArray(B.current[G])||(B.current[G]=[]),Array.isArray(B.current[G][W])||(B.current[G][W]=[]),B.current[G][W][K]=q},levelControlAriaLabel:typeof N=="function"?N($):N,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:I,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:b,nextDisabled:w,previousDisabled:S,getYearControlProps:u,__staticSelector:A||"DecadeLevelGroup",classNames:E,styles:T,unstyled:C,withCellSpacing:f},G)});return _.jsx(Qb,{classNames:E,styles:T,__staticSelector:A||"DecadeLevelGroup",ref:t,size:M,unstyled:C,...j,children:z})});V7.classes={...Qb.classes,...j7.classes};V7.displayName="@mantine/dates/DecadeLevelGroup";const CCn={numberOfColumns:1},H7=nt((e,t)=>{const n=Ue("YearLevelGroup",CCn,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:b,onLevelClick:w,nextDisabled:S,previousDisabled:E,hasNextLevel:T,classNames:C,styles:A,unstyled:I,__staticSelector:k,__stopPropagation:N,numberOfColumns:F,levelControlAriaLabel:M,yearLabelFormat:L,size:j,vars:B,...z}=n,V=P.useRef([]),G=Array(F).fill(0).map(($,W)=>{const K=Qt(r).add(W,"years").toDate();return _.jsx(U7,{size:j,monthsListFormat:a,year:K,withNext:W===F-1,withPrevious:W===0,yearLabelFormat:L,__stopPropagation:N,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(q,Y)=>zce({levelIndex:W,rowIndex:Y.rowIndex,cellIndex:Y.cellIndex,event:q,controlsRef:V}),__getControlRef:(q,Y,Z)=>{Array.isArray(V.current[W])||(V.current[W]=[]),Array.isArray(V.current[W][q])||(V.current[W][q]=[]),V.current[W][q][Y]=Z},levelControlAriaLabel:typeof M=="function"?M(K):M,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:b,onLevelClick:w,nextDisabled:S,previousDisabled:E,hasNextLevel:T,getMonthControlProps:u,classNames:C,styles:A,unstyled:I,__staticSelector:k||"YearLevelGroup",withCellSpacing:f},W)});return _.jsx(Qb,{classNames:C,styles:A,__staticSelector:k||"YearLevelGroup",ref:t,size:j,unstyled:I,...z,children:G})});H7.classes={...U7.classes,...Qb.classes};H7.displayName="@mantine/dates/YearLevelGroup";const ACn={numberOfColumns:1},q7=nt((e,t)=>{const n=Ue("MonthLevelGroup",ACn,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:b,__preventFocus:w,nextIcon:S,previousIcon:E,nextLabel:T,previousLabel:C,onNext:A,onPrevious:I,onLevelClick:k,nextDisabled:N,previousDisabled:F,hasNextLevel:M,classNames:L,styles:j,unstyled:B,numberOfColumns:z,levelControlAriaLabel:V,monthLabelFormat:G,__staticSelector:$,__stopPropagation:W,size:K,static:q,vars:Y,...Z}=n,ae=P.useRef([]),be=Array(z).fill(0).map((Se,we)=>{const Ce=Qt(r).add(we,"months").toDate();return _.jsx(z7,{month:Ce,withNext:we===z-1,withPrevious:we===0,monthLabelFormat:G,__stopPropagation:W,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(Le,ke)=>zce({levelIndex:we,rowIndex:ke.rowIndex,cellIndex:ke.cellIndex,event:Le,controlsRef:ae}),__getDayRef:(Le,ke,Ze)=>{Array.isArray(ae.current[we])||(ae.current[we]=[]),Array.isArray(ae.current[we][Le])||(ae.current[we][Le]=[]),ae.current[we][Le][ke]=Ze},levelControlAriaLabel:typeof V=="function"?V(Ce):V,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:w,nextIcon:S,previousIcon:E,nextLabel:T,previousLabel:C,onNext:A,onPrevious:I,onLevelClick:k,nextDisabled:N,previousDisabled:F,hasNextLevel:M,classNames:L,styles:j,unstyled:B,__staticSelector:$||"MonthLevelGroup",size:K,static:q,withCellSpacing:b},we)});return _.jsx(Qb,{classNames:L,styles:j,__staticSelector:$||"MonthLevelGroup",ref:t,size:K,...Z,children:be})});q7.classes={...Qb.classes,...z7.classes};q7.displayName="@mantine/dates/MonthLevelGroup";var PWe={input:"m_6fa5e2aa"};const DCn={},W7=nt((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:b,rightSection:w,shouldClear:S,readOnly:E,disabled:T,value:C,name:A,form:I,type:k,...N}=IAe("PickerInputBase",DCn,e),F=w||(g&&S&&!E&&!T?_.jsx(Ey,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...b}):null),M=()=>{k==="range"&&Array.isArray(C)&&C[0]&&!C[1]&&y(),h.close()};return _.jsxs(_.Fragment,{children:[c==="modal"&&!E&&_.jsx(qs,{opened:p,onClose:M,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),_.jsx(ws.Wrapper,{...r,children:_.jsxs(au,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||E,onClose:()=>{var L;(L=u==null?void 0:u.onClose)==null||L.call(u),M()},children:[_.jsx(au.Target,{children:_.jsx(ws,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":E||void 0,disabled:T,component:"button",type:"button",multiline:!0,onClick:L=>{m==null||m(L),h.toggle()},rightSection:F,...n,ref:t,classNames:{...s,input:co(PWe.input,s==null?void 0:s.input)},...N,children:d||_.jsx(ws.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),_.jsx(au.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),_.jsx(vWe,{value:C,name:A,form:I,type:k})]})});W7.classes=PWe;W7.displayName="@mantine/dates/PickerInputBase";const XSe=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function qce({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=P.useRef(e),o=Gf(),[a,u,l]=Ho({value:C1("add",t,o.getTimezone(),!i),defaultValue:C1("add",n,o.getTimezone(),!i),finalValue:XSe(e),onChange:f=>{r==null||r(C1("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:XSe(e),u(c))),[c,u,l]}function zq(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function ICn(e){return e===0?"month":e===1?"year":"decade"}function sI(e,t,n){return ICn(gm(zq(e,0),zq(t,0),zq(n,2)))}const kCn={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},G7=nt((e,t)=>{const n=Ue("Calendar",kCn,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:b,__updateDateOnYearSelect:w,__updateDateOnMonthSelect:S,firstDayOfWeek:E,weekdayFormat:T,weekendDays:C,getDayProps:A,excludeDate:I,renderDay:k,hideOutsideDates:N,hideWeekdays:F,getDayAriaLabel:M,monthLabelFormat:L,nextIcon:j,previousIcon:B,__onDayClick:z,__onDayMouseEnter:V,withCellSpacing:G,monthsListFormat:$,getMonthControlProps:W,yearLabelFormat:K,yearsListFormat:q,getYearControlProps:Y,decadeLabelFormat:Z,classNames:ae,styles:be,unstyled:Se,minDate:we,maxDate:Ce,locale:Le,__staticSelector:ke,size:Ze,__preventFocus:Ke,__stopPropagation:Ct,onNextDecade:wt,onPreviousDecade:Re,onNextYear:He,onPreviousYear:lt,onNextMonth:St,onPreviousMonth:Vt,static:ht,__timezoneApplied:Q,...de}=n,{resolvedClassNames:_e,resolvedStyles:oe}=by({classNames:ae,styles:be,props:n}),[he,Ee]=Ho({value:a?sI(a,s,i):void 0,defaultValue:o?sI(o,s,i):void 0,finalValue:sI(void 0,s,i),onChange:u}),[Fe,je]=qce({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!Q}),ct={__staticSelector:ke||"Calendar",styles:oe,classNames:_e,unstyled:Se,size:Ze},rt=Gf(),qt=h||d||1,en=Fe||C1("add",new Date,rt.getTimezone()),Yt=()=>{const jn=Qt(en).add(qt,"month").toDate();St==null||St(jn),je(jn)},un=()=>{const jn=Qt(en).subtract(qt,"month").toDate();Vt==null||Vt(jn),je(jn)},Sn=()=>{const jn=Qt(en).add(qt,"year").toDate();He==null||He(jn),je(jn)},Bn=()=>{const jn=Qt(en).subtract(qt,"year").toDate();lt==null||lt(jn),je(jn)},Ci=()=>{const jn=Qt(en).add(10*qt,"year").toDate();wt==null||wt(jn),je(jn)},gi=()=>{const jn=Qt(en).subtract(10*qt,"year").toDate();Re==null||Re(jn),je(jn)};return _.jsxs(Ne,{ref:t,size:Ze,"data-calendar":!0,...de,children:[he==="month"&&_.jsx(q7,{month:en,minDate:we,maxDate:Ce,firstDayOfWeek:E,weekdayFormat:T,weekendDays:C,getDayProps:A,excludeDate:I,renderDay:k,hideOutsideDates:N,hideWeekdays:F,getDayAriaLabel:M,onNext:Yt,onPrevious:un,hasNextLevel:i!=="month",onLevelClick:()=>Ee("year"),numberOfColumns:d,locale:Le,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:j,previousLabel:p==null?void 0:p.previousMonth,previousIcon:B,monthLabelFormat:L,__onDayClick:z,__onDayMouseEnter:V,__preventFocus:Ke,__stopPropagation:Ct,static:ht,withCellSpacing:G,...ct}),he==="year"&&_.jsx(H7,{year:en,numberOfColumns:d,minDate:we,maxDate:Ce,monthsListFormat:$,getMonthControlProps:W,locale:Le,onNext:Sn,onPrevious:Bn,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>Ee("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:j,previousLabel:p==null?void 0:p.previousYear,previousIcon:B,yearLabelFormat:K,__onControlMouseEnter:b,__onControlClick:(jn,Ki)=>{S&&je(Ki),Ee(sI("month",s,i)),g==null||g(Ki)},__preventFocus:Ke,__stopPropagation:Ct,withCellSpacing:G,...ct}),he==="decade"&&_.jsx(V7,{decade:en,minDate:we,maxDate:Ce,yearsListFormat:q,getYearControlProps:Y,locale:Le,onNext:Ci,onPrevious:gi,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:j,previousLabel:p==null?void 0:p.previousDecade,previousIcon:B,decadeLabelFormat:Z,__onControlMouseEnter:y,__onControlClick:(jn,Ki)=>{w&&je(Ki),Ee(sI("year",s,i)),m==null||m(Ki)},__preventFocus:Ke,__stopPropagation:Ct,withCellSpacing:G,...ct})]})});G7.classes={...V7.classes,...H7.classes,...q7.classes};G7.displayName="@mantine/dates/Calendar";function RCn(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:b,onPreviousMonth:w,onNextYear:S,onPreviousYear:E,onNextDecade:T,onPreviousDecade:C,withCellSpacing:A,__updateDateOnYearSelect:I,__updateDateOnMonthSelect:k,firstDayOfWeek:N,weekdayFormat:F,weekendDays:M,getDayProps:L,excludeDate:j,renderDay:B,hideOutsideDates:z,hideWeekdays:V,getDayAriaLabel:G,monthLabelFormat:$,monthsListFormat:W,getMonthControlProps:K,yearLabelFormat:q,yearsListFormat:Y,getYearControlProps:Z,decadeLabelFormat:ae,allowSingleDateInRange:be,allowDeselect:Se,minDate:we,maxDate:Ce,locale:Le,...ke}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:b,onPreviousMonth:w,onNextYear:S,onPreviousYear:E,onNextDecade:T,onPreviousDecade:C,withCellSpacing:A,__updateDateOnYearSelect:I,__updateDateOnMonthSelect:k,firstDayOfWeek:N,weekdayFormat:F,weekendDays:M,getDayProps:L,excludeDate:j,renderDay:B,hideOutsideDates:z,hideWeekdays:V,getDayAriaLabel:G,monthLabelFormat:$,monthsListFormat:W,getMonthControlProps:K,yearLabelFormat:q,yearsListFormat:Y,getYearControlProps:Z,decadeLabelFormat:ae,allowSingleDateInRange:be,allowDeselect:Se,minDate:we,maxDate:Ce,locale:Le},others:ke}}function QSe(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return Qt(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&Qt(n[1]).endOf("day").add(1,"ms").isAfter(e)}function NCn({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=qce({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=P.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=P.useState(null),m=T=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(Qt(T).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const C=[T,f];C.sort((A,I)=>A.getTime()-I.getTime()),c(C),p(null),d(null);return}if(l[0]&&!l[1]&&Qt(T).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([T,null]),p(null),d(T);return}if(e==="multiple"){l.some(C=>Qt(C).isSame(T,t))?c(l.filter(C=>!Qt(C).isSame(T,t))):c([...l,T]);return}l&&o&&Qt(T).isSame(l,t)?c(null):c(T)},g=T=>f instanceof Date&&h instanceof Date?QSe(T,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?QSe(T,l):!1,y=e==="range"?T=>{a==null||a(T),p(null)}:a,b=T=>l[0]instanceof Date&&Qt(T).isSame(l[0],t)?!(h&&Qt(h).isBefore(l[0])):!1,w=T=>l[1]instanceof Date?Qt(T).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:Qt(h).isBefore(l[0])&&Qt(T).isSame(l[0],t),S=T=>{if(e==="range")return{selected:l.some(A=>A&&Qt(A).isSame(T,t)),inRange:g(T),firstInRange:b(T),lastInRange:w(T),"data-autofocus":!!l[0]&&Qt(l[0]).isSame(T,t)||void 0};if(e==="multiple")return{selected:l.some(A=>A&&Qt(A).isSame(T,t)),"data-autofocus":!!l[0]&&Qt(l[0]).isSame(T,t)||void 0};const C=Qt(l).isSame(T,t);return{selected:C,"data-autofocus":C||void 0}},E=e==="range"&&f?p:()=>{};return P.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:E,getControlProps:S,_value:l,setValue:c}}const PCn={type:"default",defaultLevel:"month",numberOfColumns:1},Y7=nt((e,t)=>{const n=Ue("DatePicker",PCn,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:b,__timezoneApplied:w,...S}=n,{onDateChange:E,onRootMouseLeave:T,onHoveredDateChange:C,getControlProps:A}=NCn({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!w}),{resolvedClassNames:I,resolvedStyles:k}=by({classNames:r,styles:i,props:n}),N=Gf();return _.jsx(G7,{ref:t,minLevel:"month",classNames:I,styles:k,__staticSelector:c||"DatePicker",onMouseLeave:T,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(F,M)=>{C(M),y==null||y(F,M)},__onDayClick:(F,M)=>{E(M),b==null||b(F,M)},getDayProps:F=>({...A(F),...f==null?void 0:f(F)}),...S,date:C1("add",S.date,N.getTimezone(),w),__timezoneApplied:!0})});Y7.classes=G7.classes;Y7.displayName="@mantine/dates/DatePicker";function OCn({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=Gf(),[f,d]=d8(!1),[h,p]=qce({type:e,value:t,defaultValue:n,onChange:r}),m=zTn({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=w=>{o&&(e==="default"&&d.close(),e==="range"&&w[0]&&w[1]&&d.close()),p(a&&e==="multiple"?[...w].sort((S,E)=>S.getTime()-E.getTime()):w)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),b=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:b,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const MCn={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},Wce=nt((e,t)=>{const n=Ue("DatePickerInput",MCn,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:b,maxDate:w,vars:S,defaultDate:E,valueFormatter:T,...C}=n,{resolvedClassNames:A,resolvedStyles:I}=by({classNames:c,styles:f,props:n}),{calendarProps:k,others:N}=RCn(C),{_value:F,setValue:M,formattedValue:L,dropdownHandlers:j,dropdownOpened:B,onClear:z,shouldClear:V}=OCn({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:T}),G=Array.isArray(F)?F[0]||E:F||E,$=Gf();return _.jsx(W7,{formattedValue:L,dropdownOpened:B,dropdownHandlers:j,classNames:A,styles:I,unstyled:d,ref:t,onClear:z,shouldClear:V,value:F,size:p,variant:m,dropdownType:g,...N,type:r,__staticSelector:"DatePickerInput",children:_.jsx(Y7,{...k,size:p,variant:m,type:r,value:F,defaultDate:G||QTn({maxDate:w,minDate:b,timezone:$.getTimezone()}),onChange:M,locale:l,classNames:A,styles:I,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:b,maxDate:w,date:C1("add",k.date,$.getTimezone()),__timezoneApplied:!0})})});Wce.classes={...W7.classes,...Y7.classes};Wce.displayName="@mantine/dates/DatePickerInput";function $Cn(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat().filter(r=>r!==-1);return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function FCn({studyId:e,allParticipants:t}){const n=wp(),[r,i]=Zh(),s=t.filter(p=>p.completed).map(p=>Math.max(...Object.values(p.answers).map(m=>m.endTime).filter(m=>m!==-1))).filter(p=>Number.isFinite(p)),[o,a]=P.useState([new Date(new Date(Math.min(...s.length>0?s:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...s.length>0?s:[new Date().getTime()])).setHours(24,0,0,0))]),[u,l,c,f]=P.useMemo(()=>{const p=t.filter(y=>!y.rejected&&y.completed),m=t.filter(y=>!y.rejected&&!y.completed),g=t.filter(y=>y.rejected);return[p,m,g,p.filter(y=>$Cn(y.answers,o))]},[t,o]),d=P.useMemo(()=>{var p,m;return f.length>0?[{Date:(p=o[0])==null?void 0:p.getTime(),Participants:0},...f.map(g=>Math.max(...Object.values(g.answers).map(y=>y.endTime).flat().filter(y=>y!==-1))).sort((g,y)=>g-y).map((g,y)=>({Date:g,Participants:y})),{Date:(m=o[1])==null?void 0:m.getTime(),Participants:f.length}]:[]},[f,o]),h=P.useMemo(()=>{var p,m;return{width:i.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(p=o[0])==null?void 0:p.getTime(),(m=o[1])==null?void 0:m.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:d}}},[i.width,o,d]);return _.jsx(Fd,{children:_.jsxs(jE,{ref:r,padding:"lg",shadow:"md",withBorder:!0,children:[_.jsxs(Zt,{align:"center",mb:"xs",justify:"space-between",children:[_.jsxs(Zt,{direction:"row",align:"center",children:[_.jsx(Os,{order:5,children:e}),_.jsx(K8e,{completed:u.length,inProgress:l.length,rejected:c.length,filteredCompleted:f.length})]}),_.jsxs(qi,{children:[_.jsx(noe,{allParticipants:t,studyId:e}),_.jsx(hs,{label:"Analyze and manage study data",children:_.jsx(Mn,{onClick:p=>{!p.ctrlKey&&!p.metaKey&&(p.preventDefault(),n(`/analysis/stats/${e}`))},px:4,component:"a",href:`${Rl}analysis/stats/${e}`,children:_.jsx(yht,{})})})]})]}),_.jsx(Wce,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:o,onChange:a}),d.length>0?_.jsxs(_.Fragment,{children:[_.jsx(gt,{mt:16,children:"Finished Participants"}),_.jsx(LQ,{spec:h,actions:!1})]}):_.jsx(Ne,{h:293.4,children:_.jsx(If,{style:{height:"100%"},children:_.jsx(gt,{children:"Not enough participants for chart"})})})]})})}function LCn({globalConfig:e}){const[t,n]=P.useState(!1),[r,i]=P.useState({}),[s,o]=P.useState({}),{storageEngine:a}=Wo(),{user:u}=sx();P.useEffect(()=>{(async()=>{n(!0);const f={},d={},h=async m=>{const g=await S9(m,e);if(a){if(f[m]=await a.getAllParticipantsDataByStudy(m),g===null)return;if(a instanceof Ed){const y=await a.getModes(m);d[m]=y.analyticsInterfacePubliclyAccessible}}};await(async()=>{const m=e.configsList.map(g=>h(g));try{await Promise.all(m),i(f),o(d)}catch(g){console.error("Error fetching data:",g)}finally{n(!1)}})()})()},[e,a]);const l=e.configsList.map(c=>r[c]&&((s[c]||u.isAdmin)&&!e.configs[c].test?_.jsx(Cl.Col,{span:{md:12,xl:6},children:_.jsx(FCn,{studyId:c,allParticipants:r[c]})},`${c}-panel`):null));return _.jsxs(_.Fragment,{children:[_.jsx(Vk,{studyIds:e.configsList}),_.jsx(bs.Main,{children:_.jsx(Fd,{fluid:!0,children:_.jsxs(Ne,{children:[_.jsx(Os,{mb:20,order:4,children:"Your Studies:"}),_.jsxs(Cl,{children:[l.length>0?l:_.jsx(Fd,{mt:100,children:_.jsx(gt,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),_.jsx(kf,{visible:t})]})]})})})]})}function BCn(){const{user:e,triggerAuth:t}=sx(),{storageEngine:n}=Wo(),[r,i]=P.useState(!1),[s,o]=P.useState([]),[a,u]=P.useState(!1),[l,c]=P.useState(!1),[f,d]=P.useState(!1),[h,p]=P.useState(!1),[m,g]=P.useState(!1),[y,b]=P.useState(""),[w,S]=P.useState(null),E=wRe({initialValues:{email:""},validate:{email:g_t("Invalid email")}});P.useEffect(()=>{(async()=>{if(u(!0),n instanceof Ed){const M=await(n==null?void 0:n.getUserManagementData("authentication"));i((M==null?void 0:M.isEnabled)||!1);const L=await(n==null?void 0:n.getUserManagementData("adminUsers"));L&&L.adminUsersList&&o(L==null?void 0:L.adminUsersList.map(j=>j.email))}else i(!1);u(!1)})()},[n]);const T=async()=>{if(u(!0),n instanceof Ed){const F=await hWe(n,u);F&&F.email?(S({email:F.email,uid:F.uid}),p(!0)):g(!0)}u(!1)},C=async F=>{u(!0),n instanceof Ed&&F&&(await n.changeAuth(!0),await n.addAdminUser(F),o([F.email]),i(!0),t()),p(!1),u(!1)},A=async()=>{if(u(!0),n instanceof Ed){await n.addAdminUser({email:E.values.email,uid:null});const F=await n.getUserManagementData("adminUsers");o((F==null?void 0:F.adminUsersList.map(M=>M.email))||[])}u(!1),c(!1),E.setValues({email:""})},I=F=>{d(!0),b(F)},k=async()=>{if(u(!0),n instanceof Ed){await n.removeAdminUser(y);const F=await n.getUserManagementData("adminUsers");o((F==null?void 0:F.adminUsersList.map(M=>M.email))||[])}d(!1),u(!1)},N=P.useMemo(()=>n instanceof Ed,[n]);return _.jsxs(_.Fragment,{children:[_.jsx(Fd,{children:_.jsxs(jE,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(Os,{mb:20,order:3,children:"Authentication"}),r?_.jsx(Zt,{children:_.jsx(gt,{children:"Authentication is enabled."})}):_.jsxs(Zt,{justify:"space-between",children:[_.jsx(Ne,{children:_.jsx(gt,{children:"Authentication is currently disabled."})}),_.jsx(hs,{label:"You can only enable auth when using Firebase",disabled:N,children:_.jsx(Mn,{onClick:F=>N?T():F.preventDefault(),color:"green","data-disabled":N?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?_.jsxs(Zt,{mt:40,direction:"column",children:[_.jsxs(Zt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[_.jsx(Os,{order:6,children:"Enabled Users"}),_.jsx(Mee,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(F=>{var M;return _.jsxs(Zt,{justify:"space-between",mb:10,children:[_.jsx(gt,{children:F}),F===((M=e.user)==null?void 0:M.email)?_.jsx(gt,{color:"blue",size:"xs",children:"You"}):_.jsx(LE,{variant:"subtle",onClick:()=>I(F),children:_.jsx(yIe,{color:"red"})})]},F)}):null]}):null]})}),_.jsx(qs,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:_.jsxs(Ne,{component:"form",onSubmit:E.onSubmit(()=>A()),children:[_.jsx(y0,{leftSection:_.jsx(dht,{}),placeholder:"User Gmail Account",...E.getInputProps("email")}),_.jsxs(Zt,{mt:30,justify:"right",children:[_.jsx(Mn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),_.jsx(Mn,{type:"submit",children:"Save"})]})]})}),_.jsxs(qs,{opened:f,size:"large",onClose:()=>d(!1),title:_.jsxs(gt,{fw:700,children:["Remove",y,"?"]}),children:[_.jsxs(gt,{mt:40,children:["Are you sure you want to remove",_.jsx("b",{children:y})," ","as an administrator?"]}),_.jsxs(Zt,{mt:40,justify:"right",children:[_.jsx(Mn,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),_.jsx(Mn,{onClick:()=>k(),children:"Yes, I'm sure."})]})]}),_.jsxs(qs,{opened:h,size:"md",onClose:()=>p(!1),title:_.jsx(gt,{fw:700,children:"Enable Authentication?"}),children:[_.jsxs(gt,{mt:40,children:["User"," ",_.jsx("b",{children:w==null?void 0:w.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),_.jsxs(Zt,{mt:40,justify:"right",children:[_.jsx(Mn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),_.jsx(Mn,{onClick:()=>C(w),children:"Yes, I'm sure."})]})]}),_.jsxs(qs,{opened:m,size:"md",onClose:()=>g(!1),title:_.jsx(gt,{fw:700,children:"An Error Occurred."}),children:[_.jsxs(gt,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",_.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),_.jsx(Zt,{mt:40,justify:"right",children:_.jsx(Mn,{mr:5,onClick:()=>g(!1),children:"Okay"})})]}),_.jsx(kf,{visible:a})]})}class jCn extends G8e{constructor(){super("localStorage");fl(this,"studyDatabase");fl(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await RS.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await Q4(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await Q4(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await RS.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=X4();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=RS.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this.studyDatabase.setItem(this.currentParticipantId,r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this.studyDatabase.setItem(this.currentParticipantId,r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=X4();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r,i){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const s=await this.studyDatabase.getItem(r);if(!s)throw new Error("Participant not found");if(s.rejected)return;s.rejected={reason:i,timestamp:new Date().getTime()};const o=await this.studyDatabase.getItem("sequenceArray");o&&(o.unshift(s.sequence),this.setSequenceArray(o)),await this.studyDatabase.setItem(r,s)}async rejectCurrentParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){this.studyDatabase=await RS.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await RS.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function UCn(){let e,t=!1;{const n=new Ed;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new jCn;await n.connect(),e=n}return e}function yS({title:e}){const t=xb();return P.useEffect(()=>{document.title=e},[t,e]),null}async function zCn(){const t=await(await fetch(`${Rl}global.json`)).text();return UHt(t)}function VCn(){const[e,t]=P.useState(null),[n,r]=P.useState({});P.useEffect(()=>{async function a(){e&&r(await qHt(e))}a()},[e]),P.useEffect(()=>{e||zCn().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Wo();P.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await UCn();s(u)}a()},[s,i]);const o=async a=>i instanceof Ed?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?_.jsx(tht,{basename:Rl,children:_.jsx(HZt,{children:_.jsx(aht,{children:_.jsx(bs,{padding:"md",header:{height:70},children:_.jsxs(Qdt,{children:[_.jsx(Yg,{path:"/",element:_.jsxs(_.Fragment,{children:[_.jsx(yS,{title:"ReVISit | Home"}),_.jsx(Vk,{studyIds:e.configsList}),_.jsx(Ebt,{globalConfig:e,studyConfigs:n})]})}),_.jsx(Yg,{path:"/:studyId/*",element:_.jsxs(_.Fragment,{children:[_.jsx(yS,{title:"ReVISit | Study"}),_.jsx(WHt,{globalConfig:e})]})}),_.jsx(Yg,{path:"/analysis/dashboard",element:_.jsxs(_.Fragment,{children:[_.jsx(yS,{title:"ReVISit | Analysis"}),_.jsx(LCn,{globalConfig:e})]})}),_.jsx(Yg,{path:"/analysis",element:_.jsx(wK,{to:"/analysis/dashboard"})}),_.jsx(Yg,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:_.jsxs(_.Fragment,{children:[_.jsx(yS,{title:"ReVISit | Analysis"}),_.jsx(YSe,{paramToCheck:"studyId",paramCallback:o,children:_.jsx(LTn,{globalConfig:e})})]})}),_.jsx(Yg,{path:"/analysis/stats/:studyId",element:_.jsx(wK,{to:"./table",replace:!0})}),_.jsx(Yg,{path:"/settings",element:_.jsxs(YSe,{children:[_.jsx(yS,{title:"ReVISit | Settings"}),_.jsx(Vk,{studyIds:e.configsList}),_.jsx(bs.Main,{children:_.jsx(BCn,{})})]})}),_.jsx(Yg,{path:"/login",element:_.jsxs(_.Fragment,{children:[_.jsx(yS,{title:"ReVISit | Login"}),_.jsx(Vk,{studyIds:e.configsList}),_.jsx(bs.Main,{children:_.jsx(BTn,{})})]})})]})})})})}):null}Vq.createRoot(document.getElementById("root")).render(_.jsx(xi.StrictMode,{children:_.jsx(adt,{children:_.jsxs(P2e,{children:[_.jsx(Ay,{}),_.jsx(VCn,{})]})})}))});export default HCn();
